{"version":3,"file":"comunica-browser.js","mappings":"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IC,EAAI,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,KAAKC,EAAI,CAAC,GAAG,GAAG,IAAIC,EAAI,CAAC,GAAG,IAAIC,EAAI,CAAC,EAAE,IAAIC,EAAI,CAAC,EAAE,IAAIC,EAAI,CAAC,EAAE,IAAIC,EAAI,CAAC,EAAE,IAAIC,EAAI,CAAC,IAAI,KAAKC,EAAI,CAAC,EAAE,IAAIC,EAAI,CAAC,GAAG,GAAG,IAAIC,EAAI,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,KAAKC,EAAI,CAAC,EAAE,IAAIC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,IAAIC,EAAI,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,EAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAIC,EAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,KAAKC,EAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,EAAI,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,EAAI,CAAC,GAAG,GAAG,KAAKC,EAAI,CAAC,IAAI,IAAI,IAAI,KAAKC,EAAI,CAAC,GAAG,GAAG,IAAI,IAAI,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,IAAI,IAAI,IAAI,IAAI,KAAKC,EAAI,CAAC,GAAG,GAAG,IAAI,IAAI,IAAI,KAAKC,EAAI,CAAC,GAAG,GAAG,GAAG,GAAG,IAAIC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,EAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAI,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,IAAIC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,IAAIC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,IAAIC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,GAAG,KAAKC,GAAK,CAAC,GAAG,GAAG,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,IAAIC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,IAAIC,GAAK,CAAC,GAAG,IAAIC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,IAAIC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,IAAIC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,GAAG,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,IAAI,KAAKC,GAAK,CAAC,GAAG,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,GAAG,IAAIC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,GAAG,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,IAAIC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAKC,GAAK,CAAC,EAAE,KAAKC,GAAK,CAAC,GAAG,GAAG,IAAI,IAAI,KAAKC,G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GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,GAAG,CAAC,IAAI,IAChhHC,cAAe,SAAmBC,EAAQC,EAAQC,EAAUP,EAAIQ,EAAyBC,EAAiBC,GAG1G,IA22B6B33M,EAAOmxE,EA2FHymI,EACzB7+L,EAv8BJ8+L,EAAKH,EAAGr2M,OAAS,EACrB,OAAQo2M,GACR,KAAK,EAUC,GAPAC,EAAGG,EAAG,GAAKH,EAAGG,EAAG,IAAM,CAAC,EACpBh4M,GAAO+yC,OACT8kK,EAAGG,EAAG,GAAGjlK,KAAO/yC,GAAO+yC,MACzB/yC,GAAO+yC,KAAO,GACd8kK,EAAGG,EAAG,GAAG/uM,SAAWjJ,GAAOiJ,SAC3BjJ,GAAOiJ,SAAW,KAEdjJ,GAAOi4M,SAAU,CACnB,GAAsB,SAAlBJ,EAAGG,EAAG,GAAGrrM,MAAmB,aAAckrM,EAAGG,EAAG,GAClD,OAAOH,EAAGG,EAAG,GAEf,MAAM,IAAIh2M,MAAM,+CAClB,CAAO,GAAsB,SAAlB61M,EAAGG,EAAG,GAAGrrM,MAAmB,aAAckrM,EAAGG,EAAG,GACzD,MAAM,IAAIh2M,MAAM,0CAIlB,GAAsB,WAAlB61M,EAAGG,EAAG,GAAGrrM,KAAmB,CAC9B,MAAMurM,EAAkB,CAAC,EACzB,IAAK,MAAMthL,KAAUihL,EAAGG,EAAG,GAAG50K,QAC5B,GAA0B,WAAtBxM,EAAO25E,WAAyB,CAElC,MAAM4nG,EAAe,CAAC,EACtB,IAAK,MAAM/tL,KAAawM,EAAOwD,OAC7B,GAAuB,QAAnBhQ,EAAUzd,MAAqC,UAAnByd,EAAUzd,KACxC,IAAK,MAAM4yE,KAAUn1D,EAAU06B,QACG,cAA5By6B,EAAO/0D,QAAQyC,WACjBkrL,EAAa54H,EAAO/0D,QAAQrqB,QAAS,GACL,cAA9Bo/E,EAAOl1D,UAAU4C,WACnBkrL,EAAa54H,EAAOl1D,UAAUlqB,QAAS,GACV,cAA3Bo/E,EAAO90D,OAAOwC,WAChBkrL,EAAa54H,EAAO90D,OAAOtqB,QAAS,GAM5C,IAAK,MAAMu3D,KAASr2D,OAAOD,KAAK+2M,GAAe,CAC7C,GAAID,EAAgBxgJ,GAClB,MAAM,IAAI11D,MAAM,kEAElBk2M,EAAgBxgJ,IAAS,CAC3B,CACF,CAEJ,CACA,OAAOmgJ,EAAGG,EAAG,GAGnB,KAAK,EACL/3M,KAAKm4M,EAAI,IAAKP,EAAGG,EAAG,MAAOH,EAAGG,GAAKrrM,KAAM,SACzC,MACA,KAAK,EAEC3M,GAAO+yC,KAAOslK,GAAWR,EAAGG,IAElC,MACA,KAAK,EAEMh4M,GAAOiJ,WAAUjJ,GAAOiJ,SAAW,CAAC,GACzC4uM,EAAGG,EAAG,GAAKH,EAAGG,EAAG,GAAGv3H,OAAO,EAAGo3H,EAAGG,EAAG,GAAGx2M,OAAS,GAChDq2M,EAAGG,GAAMK,GAAWR,EAAGG,IACvBh4M,GAAOiJ,SAAS4uM,EAAGG,EAAG,IAAMH,EAAGG,GAErC,MACA,KAAK,EACL/3M,KAAKm4M,EAAI,IAAKP,EAAGG,EAAG,MAAOM,GAAcT,EAAGG,EAAG,OAAQH,EAAGG,EAAG,MAAOH,EAAGG,IACvE,MACA,KAAK,EAGC,IAAKh4M,GAAO+oJ,iBACK7oH,GAAQ23K,EAAGG,EAAG,GAAGh1L,UAAU5d,KAAI4zC,GAAQu/J,GAA0Bv/J,EAAK1d,eAClFsD,MAAKgJ,GAA2B,UAApBA,EAAIm9J,eAA6Bn9J,EAAItM,sBAAsBimK,OAC5DsW,EAAGG,GAAI9uK,OACnB,IAAK,MAAMsvK,KAAaX,EAAGG,EAAG,GAAGh1L,UAC/B,GAA2B,aAAvBw1L,EAAUvrL,UACZ,IAAK4qL,EAAGG,GAAI9uK,QAAU2uK,EAAGG,GAAI9uK,MAAM9jC,KAAIqzM,GAAYC,GAAgBD,KAAWx8L,SAASy8L,GAAgBF,IACrG,MAAMx2M,MAAM,sCAAwC02M,GAAgBF,GAAa,UAE9E,GAA+D,IAA3DD,GAA0BC,EAAUl9K,YAAY95B,OAAc,CACvE,MAAMm3M,EAAWC,GAA2BJ,EAAUl9K,YACtD,IAAK,MAAMu9K,KAAWF,EACpB,IAAKd,EAAGG,GAAI9uK,QAAU2uK,EAAGG,GAAI9uK,MAAM9jC,MAAQyyM,EAAGG,GAAI9uK,MAAM9jC,KAAIqzM,GAAYC,GAAgBD,KAAWx8L,SAASy8L,GAAgBG,IAC1H,MAAM72M,MAAM,0DAA4D02M,GAAgBG,GAAW,IAGzG,CAKN,MAAMC,EAAajB,EAAGG,EAAG,GAAG39K,MAAMn1B,QAAO6nG,GAAgB,UAAXA,EAAEpgG,OAChD,GAAImsM,EAAWt3M,OAAS,EAAG,CACzB,MAAMu3M,EAAiBlB,EAAGG,EAAG,GAAGh1L,UAAU9d,QAAOqyF,GAAKA,EAAE7sE,UAAY6sE,EAAE7sE,SAASvqB,QAAOiF,KAAImyF,GAAKA,EAAE7sE,SAASvqB,QACpG64M,EAAc94K,GAAQ44K,EAAW1zM,KAAIs2E,GAAOA,EAAI14D,aAAY5d,KAAImyF,GAAKA,EAAEp3F,OAASo3F,EAAE7sE,SAASvqB,QACjG,IAAK,MAAM84M,KAAiBF,EAC1B,GAAIC,EAAYjvM,QAAQkvM,IAAkB,EACxC,MAAMj3M,MAAM,uBAAyBi3M,EAAgB,6BAG3D,CACAh5M,KAAKm4M,EAAI//I,GAAOw/I,EAAGG,EAAG,GAAIM,GAAcT,EAAGG,EAAG,IAAKH,EAAGG,EAAG,GAAIH,EAAGG,IAEtE,MACA,KAAK,EACL/3M,KAAKm4M,EAAI//I,GAAO,CAAEg4C,UAAW,YAAap2E,SAAU49K,EAAGG,EAAG,IAAMM,GAAcT,EAAGG,EAAG,IAAKH,EAAGG,EAAG,GAAIH,EAAGG,IACtG,MACA,KAAK,EACL/3M,KAAKm4M,EAAI//I,GAAO,CAAEg4C,UAAW,YAAap2E,SAAU49K,EAAGG,EAAG,GAAMH,EAAGG,EAAG,GAAKH,EAAGG,EAAG,GAAGlzJ,QAAU,IAAOwzJ,GAAcT,EAAGG,EAAG,IAAK,CAAE39K,MAAO,CAAE,CAAE1tB,KAAM,MAAOm4C,QAASo0J,GAAY,GAAIrB,EAAGG,EAAG,OAAWH,EAAGG,IACrM,MACA,KAAK,GACL/3M,KAAKm4M,EAAI//I,GAAO,CAAEg4C,UAAW,WAAYrtF,UAAwB,MAAb60L,EAAGG,EAAG,GAAa,CAAC,IAAIzW,IAAcsW,EAAGG,EAAG,IAAMM,GAAcT,EAAGG,EAAG,IAAKH,EAAGG,EAAG,GAAIH,EAAGG,IAC5I,MACA,KAAK,GACL/3M,KAAKm4M,EAAI//I,GAAO,CAAEg4C,UAAW,OAASioG,GAAcT,EAAGG,EAAG,IAAKH,EAAGG,EAAG,GAAIH,EAAGG,IAC5E,MACA,KAAK,GACL/3M,KAAKm4M,EAAI//I,GAAOw/I,EAAGG,EAAG,GAAI,CAACh1L,UAAW,CAAC,IAAIu+K,MAC3C,MACA,KAAK,GAGC,MACM4X,EA+7BV,SAA8B/4L,GAC5B,MAAMg5L,EAAch5L,EAAM3b,QAAQymC,OAC5BiuK,EAAa,GACnB,IAAK,IAAI73M,EAAI,EAAGA,EAAI83M,EAAY53M,OAAS,EAAGF,IACtC83M,EAAY93M,EAAI,IAAM83M,EAAY93M,IACpC63M,EAAW31M,KAAK41M,EAAY93M,IAGhC,OAAO63M,CACT,CAx8BuBE,CADIxB,EAAGG,GAAI5yM,KAAImyF,GAAKA,EAAEp3F,OAASo3F,EAAE7sE,SAASvqB,SAE7D,GAAIg5M,EAAW33M,OAAS,EACtB,MAAMQ,MAAM,6DAA+Dm3M,EAAW,GAAK,KAG7Fl5M,KAAKm4M,EAAI//I,GAAOw/I,EAAGG,EAAG,GAAI,CAAEh1L,UAAW60L,EAAGG,KAEhD,MACA,KAAK,GACL/3M,KAAKm4M,EAAI//I,GAAO,CAAEg4C,UAAW,UAAWwnG,EAAGG,KAAQH,EAAGG,EAAG,GAAK5sD,GAAUysD,EAAGG,IAAMH,EAAGG,GAAM,CAAC,EAAGH,EAAGG,GAAIH,EAAGG,EAAG,KAAM,EAAMH,EAAGG,KAC1H,MACA,KAAK,GAAI,KAAK,GACd/3M,KAAKm4M,EAAI98K,GAAWu8K,EAAGG,EAAG,GAAI,CAAEttL,SAAUmtL,EAAGG,EAAG,KAChD,MACA,KAAK,GAAI,KAAK,GACd/3M,KAAKm4M,EAAI//I,GAAOw/I,EAAGG,EAAG,GAAIH,EAAGG,EAAG,GAAIH,EAAGG,EAAG,GAAIH,EAAGG,GAAK,CAAErrM,KAAM,UAC9D,MACA,KAAK,GAAI,KAAK,GACd1M,KAAKm4M,EAAI,CAAEr2K,IAAK81K,EAAGG,GAAKzwK,QAASswK,EAAGG,EAAG,IACvC,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE/9K,MAAOw9K,EAAGG,GAAIv9K,UACzB,MACA,KAAK,GACLx6B,KAAKm4M,EAAI//I,GAAOw/I,EAAGG,EAAG,GAAIH,EAAGG,IAC7B,MACA,KAAK,GACL/3M,KAAKm4M,EAAI//I,GAAOw/I,EAAGG,EAAG,GAAIH,EAAGG,EAAG,GAAIH,EAAGG,IACvC,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAElvK,MAAO2uK,EAAGG,IACrB,MACA,KAAK,GAAI,KAAK,GAAI,KAAK,GAAI,KAAK,GAAI,KAAK,GAAI,KAAK,GAClD/3M,KAAKm4M,EAAI98K,GAAWu8K,EAAGG,IACvB,MACA,KAAK,GACL/3M,KAAKm4M,EAAI98K,GAAWu8K,EAAGG,EAAG,IAC1B,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE5R,OAAQqR,EAAGG,IACtB,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEn0K,MAAO4zK,EAAGG,IACrB,MACA,KAAK,GACL/3M,KAAKm4M,EAAI98K,GAAWu8K,EAAGG,GAAK,CAAE1R,YAAY,IAC1C,MACA,KAAK,GACLrmM,KAAKm4M,EAAI,CAAE98L,MAAOg+L,GAAMzB,EAAGG,KAC3B,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEn3M,OAAQq4M,GAAMzB,EAAGG,KAC5B,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE98L,MAAOg+L,GAAMzB,EAAGG,EAAG,IAAK/2M,OAAQq4M,GAAMzB,EAAGG,KACpD,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE98L,MAAOg+L,GAAMzB,EAAGG,IAAM/2M,OAAQq4M,GAAMzB,EAAGG,EAAG,KACrD,MACA,KAAK,GAAI,KAAK,GACd/3M,KAAKm4M,EAAI,CAAEzrM,KAAM,SAAUW,OAAQuqM,EAAGG,IACtC,MACA,KAAK,GAAI,KAAK,GACd/3M,KAAKm4M,EAAIP,EAAGG,EAAG,GAAG5yM,KAAImyF,IAAK,CAAG,CAACsgH,EAAGG,EAAG,IAAKzgH,MAC1C,MACA,KAAK,GAAI,KAAK,GACdt3F,KAAKm4M,EAAIP,EAAGG,EAAG,GAAG5yM,KAAI,KAAM,CAAG,KAC/B,MACA,KAAK,GAAI,KAAK,GAER,IAAI5D,EAASq2M,EAAGG,EAAG,GAAGx2M,OACtBq2M,EAAGG,EAAG,GAAKH,EAAGG,EAAG,GAAG5yM,IAAIm0M,IACxBt5M,KAAKm4M,EAAIP,EAAGG,EAAG,GAAG5yM,KAAI,SAAUkI,GAC9B,GAAIA,EAAO9L,SAAWA,EACpB,MAAMQ,MAAM,8BAEd,IADA,IAAIw3M,EAAe,CAAC,EACZl4M,EAAI,EAAGA,EAAEE,EAAQF,IACvBk4M,EAAa,IAAM3B,EAAGG,EAAG,GAAG12M,GAAGnB,OAASmN,EAAOhM,GACjD,OAAOk4M,CACT,IAEN,MACA,KAAK,GAAI,KAAK,GAAI,KAAK,IAAK,KAAK,IAAK,KAAK,IAC3Cv5M,KAAKm4M,EAAIP,EAAGG,EAAG,GACf,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEzrM,KAAM,SAAUy2B,QAASq2K,GAAS5B,EAAGG,EAAG,GAAIH,EAAGG,EAAG,KAC7D,MACA,KAAK,GACL/3M,KAAKm4M,EAAI//I,GAAO,CAAE1rD,KAAM,OAAQu2B,SAAU20K,EAAGG,EAAG,GAAI/oL,OAAQ4oL,EAAGG,EAAG,IAAMH,EAAGG,IAAO,CAAE7hL,YAAa0hL,EAAGG,KACpG,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEzrM,KAAMy+I,GAAUysD,EAAGG,EAAG,IAAK90K,SAAU20K,EAAGG,EAAG,GAAI3sL,MAAOwsL,EAAGG,IACpE,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEzrM,KAAMy+I,GAAUysD,EAAGG,EAAG,IAAK90K,SAAU20K,EAAGG,EAAG,GAAI/oL,OAAQ4oL,EAAGG,EAAG,GAAI7hL,YAAa0hL,EAAGG,IAC5F,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEzrM,KAAM,SAAUu2B,SAAU20K,EAAGG,EAAG,GAAI3sL,MAAO,CAAE1e,KAAM,QAAS1C,KAAM4tM,EAAGG,KAChF,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE7nG,WAAY,SAAen2E,OAAQs/K,GAAkB7B,EAAGG,KACnE,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE7nG,WAAY,SAAejgF,OAAQqpL,GAAeD,GAAkB7B,EAAGG,MAClF,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE7nG,WAAY,cAAejgF,OAAQqpL,GAAe9B,EAAGG,KAChE,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE7nG,WAAY,kBAAmBsnG,EAAGG,EAAG,MAAOH,EAAGG,EAAG,MAAOM,GAAcT,EAAGG,EAAG,GAAI,SAAU39K,MAAOw9K,EAAGG,GAAIv9K,UACpH,MACA,KAAK,GAAI,KAAK,GAAI,KAAK,GAAI,KAAK,IAAK,KAAK,IAAK,KAAK,IACpDx6B,KAAKm4M,EAAIP,EAAGG,GACZ,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE9nL,OAAQqpL,GAAe9B,EAAGG,EAAG,IAAK59K,OAAQy9K,EAAGG,IAAO,IAC/D,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE9nL,OAAQ,GAAI8J,OAAQy9K,EAAGG,IAClC,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE/sL,MAAOwsL,EAAGG,IACrB,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEzrM,KAAM,QAAS26B,SAAS,GACnC,MACA,KAAK,GAAI,KAAK,GACdrnC,KAAKm4M,EAAI,CAAEzrM,KAAM,QAAS1C,KAAM4tM,EAAGG,IACnC,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAE,CAAChtD,GAAUysD,EAAGG,MAAO,GAChC,MACA,KAAK,GACL/3M,KAAKm4M,EAAIP,EAAGG,EAAG,GAAK4B,GAAS/B,EAAGG,GAAK,CAACH,EAAGG,EAAG,KAAO4B,GAAS/B,EAAGG,IAC/D,MACA,KAAK,GAEC,IAAI3sL,EAAQgtC,GAAOw/I,EAAGG,EAAG,IAAM,CAAElzJ,QAAS,IAAM,CAAEn4C,KAAM,QAAS1C,KAAM4tM,EAAGG,EAAG,KAC7E/3M,KAAKm4M,EAAIP,EAAGG,GAAM,CAAC3sL,EAAOwsL,EAAGG,IAAO,CAAC3sL,GAE3C,MACA,KAAK,GAAI,KAAK,GACdprB,KAAKm4M,EAAI,CAAEzrM,KAAM,MAAOm4C,QAAS80J,GAAS/B,EAAGG,EAAG,GAAI,CAACH,EAAGG,EAAG,MAC3D,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEzrM,KAAM,QAAS8tB,SAAU,CAAEo9K,EAAGG,EAAG,KAC5C,MACA,KAAK,GAGC,IAAK,MAAMn5J,KAAWg5J,EAAGG,EAAG,GAAG9yM,QAAOi2D,GAAkB,SAAZA,EAAGxuD,OAAkB,CAC/D,MAAMyR,EAAQy5L,EAAGG,EAAG,GAAGjuM,QAAQ80C,GACzBg7J,EAAY,IAAIr7L,IAEtB,IAAK,MAAM28C,KAAM08I,EAAGG,EAAG,GAAGvzM,MAAM,EAAG2Z,GACjB,UAAZ+8C,EAAGxuD,MAAgC,QAAZwuD,EAAGxuD,MAC5BmtM,GAAkC3+I,GAAIxwD,SAAQovM,GAAYF,EAAUn7L,IAAIq7L,KAI5E,GAAIF,EAAUzsM,IAAIyxC,EAAQn0B,SAASvqB,OACjC,MAAM6B,MAAM,4CAA8C68C,EAAQn0B,SAASvqB,MAAQ,IAEvF,CACAF,KAAKm4M,EAAI,CAAEzrM,KAAM,QAAS8tB,SAAUo9K,EAAGG,EAAG,IAEhD,MACA,KAAK,GACL/3M,KAAKm4M,EAAIP,EAAGG,EAAG,GAAK4B,GAAS,CAAC/B,EAAGG,EAAG,IAAKH,EAAGG,IAAO4B,GAAS/B,EAAGG,IAC/D,MACA,KAAK,GACL/3M,KAAKm4M,EAAIP,EAAGG,GAAM,CAACH,EAAGG,EAAG,GAAIH,EAAGG,IAAOH,EAAGG,EAAG,GAC7C,MACA,KAAK,GACL/3M,KAAKm4M,EAAI//I,GAAOw/I,EAAGG,GAAK,CAAErrM,KAAM,aAChC,MACA,KAAK,GACL1M,KAAKm4M,EAAI//I,GAAOw/I,EAAGG,GAAK,CAAErrM,KAAM,UAChC,MACA,KAAK,GACL1M,KAAKm4M,EAAI//I,GAAOw/I,EAAGG,GAAK,CAAErrM,KAAM,QAAS1C,KAAM4tM,EAAGG,EAAG,KACrD,MACA,KAAK,GACL/3M,KAAKm4M,EAAI//I,GAAOw/I,EAAGG,GAAK,CAAErrM,KAAM,UAAW1C,KAAM4tM,EAAGG,EAAG,GAAI90K,SAAU20K,EAAGG,EAAG,KAC3E,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEzrM,KAAM,SAAU2uB,WAAYu8K,EAAGG,IAC1C,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEzrM,KAAM,OAAQ+d,SAAUmtL,EAAGG,EAAG,GAAI18K,WAAYu8K,EAAGG,EAAG,IAC/D,MACA,KAAK,GACL/3M,KAAKm4M,EAAI4B,GAAiBnC,EAAGG,IAC7B,MACA,KAAK,GACL/3M,KAAKm4M,OAAIh4M,EACT,MACA,KAAK,GACLH,KAAKm4M,EAAIP,EAAGG,EAAG,GAAGx2M,OAAS,CAAEmL,KAAM,QAAS8tB,SAAUm/K,GAAS/B,EAAGG,EAAG,GAAG5yM,IAAI60M,IAAgB,CAACA,GAAcpC,EAAGG,OAAWH,EAAGG,GAC5H,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,IAAKP,EAAGG,GAAK9S,SAAU2S,EAAGG,EAAG,IACtC,MACA,KAAK,GACL/3M,KAAKm4M,EAAI,CAAEzrM,KAAM,eAAgBjI,KAAM,IACvC,MACA,KAAK,GACLzE,KAAKm4M,EAAI,CAAEzrM,KAAM,eAAgBjI,KAAM+0M,GAAS5B,EAAGG,EAAG,GAAIH,EAAGG,EAAG,IAAKzvK,WAAYsvK,EAAGG,EAAG,IACvF,MACA,KAAK,GAAI,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAChY/3M,KAAKm4M,EAAI,GACT,MACA,KAAK,GACLn4M,KAAKm4M,EAAIqB,GAAS5B,EAAGG,EAAG,GAAIH,EAAGG,EAAG,IAClC,MACA,KAAK,IACL/3M,KAAKm4M,EAAIwB,GAAS/B,EAAGG,EAAG,GAAI,CAACH,EAAGG,EAAG,KACnC,MACA,KAAK,IAAK,KAAK,IACf/3M,KAAKm4M,EAAI8B,GAAiBrC,EAAGG,GAAI5yM,KAAIi4F,GAAKhlC,GAAOknB,GAAOs4H,EAAGG,EAAG,IAAK36G,MACnE,MACA,KAAK,IACLp9F,KAAKm4M,EAAI8B,GAAiBhB,GAAYrB,EAAGG,GAAI5yM,KAAIi4F,GAAKhlC,GAAOknB,GAAOs4H,EAAGG,EAAG,GAAG9+L,QAASmkF,KAAKw6G,EAAGG,EAAG,GAAGlzJ,UACpG,MACA,KAAK,IACL7kD,KAAKm4M,EAAIwB,GAAS,CAAC/B,EAAGG,EAAG,IAAKH,EAAGG,IACjC,MACA,KAAK,IACL/3M,KAAKm4M,EAAIwB,GAAS/B,EAAGG,IACrB,MACA,KAAK,IACL/3M,KAAKm4M,EAAI+B,GAAoBtC,EAAGG,EAAG,GAAIH,EAAGG,IAC1C,MACA,KAAK,IAAK,KAAK,IACf/3M,KAAKm4M,EAAIp4M,GAAOg1B,QAAQrB,UAAUogI,IAClC,MACA,KAAK,IAAK,KAAK,IACf9zJ,KAAKm4M,EAAIqB,GAAS5B,EAAGG,EAAG,GAAIH,EAAGG,IAC/B,MACA,KAAK,IACL/3M,KAAKm4M,EAAIP,EAAGG,GAAM,CAAEoC,WAAYvC,EAAGG,GAAKvtL,OAAQotL,EAAGG,EAAG,IAAOH,EAAGG,EAAG,GACnE,MACA,KAAK,IACL/3M,KAAKm4M,EAAKP,EAAGG,GAAyBkC,GAAiBhB,GAAYrB,EAAGG,GAAI5yM,KAAIi4F,GAAKhlC,GAAOknB,GAAOs4H,EAAGG,EAAG,GAAG9+L,QAASmkF,KAAKw6G,EAAGG,EAAG,GAAGlzJ,UAA9G+yJ,EAAGG,EAAG,GAAGlzJ,QAC5B,MACA,KAAK,IACL7kD,KAAKm4M,EAAI+B,MAAuBtC,EAAGG,EAAG,GAAIH,EAAGG,IAC7C,MACA,KAAK,IACL/3M,KAAKm4M,EAAI+B,MAAuBtC,EAAGG,IACnC,MACA,KAAK,IAAK,KAAK,IAAK,KAAK,IACzB/3M,KAAKm4M,EAAI,CAACP,EAAGG,EAAG,GAAIH,EAAGG,IACvB,MACA,KAAK,IACL/3M,KAAKm4M,EAAIP,EAAGG,GAAM,CAAEvtL,OAAQotL,EAAGG,EAAG,GAAIoC,WAAYvC,EAAGG,IAAQH,EAAGG,EAAG,GACnE,MACA,KAAK,IACL/3M,KAAKm4M,EAAIP,EAAGG,EAAG,GAAGx2M,OAAS+oB,GAAK,IAAIkvL,GAAS5B,EAAGG,EAAG,GAAIH,EAAGG,KAAQH,EAAGG,GACrE,MACA,KAAK,IACL/3M,KAAKm4M,EAAIP,EAAGG,EAAG,GAAGx2M,OAAS+oB,GAAK,IAAKkvL,GAAS5B,EAAGG,EAAG,GAAIH,EAAGG,KAAQH,EAAGG,GACtE,MACA,KAAK,IACL/3M,KAAKm4M,EAAIP,EAAGG,GAAMztL,GAAKstL,EAAGG,GAAK,CAACH,EAAGG,EAAG,KAAOH,EAAGG,EAAG,GACnD,MACA,KAAK,IACL/3M,KAAKm4M,EAAIP,EAAGG,EAAG,GAAKztL,GAAKstL,EAAGG,EAAG,GAAI,CAACH,EAAGG,KAAQH,EAAGG,GAClD,MACA,KAAK,IAAK,KAAK,IACf/3M,KAAKm4M,EAAI7tL,GAAKstL,EAAGG,EAAG,GAAI,CAACH,EAAGG,KAC5B,MACA,KAAK,IACL/3M,KAAKm4M,EAAI7tL,GAAK,IAAKkvL,GAAS5B,EAAGG,EAAG,GAAIH,EAAGG,EAAG,KAC5C,MACA,KAAK,IAAK,KAAK,IACf/3M,KAAKm4M,EAkiBH,SAAoBjqL,GAClB,IAAIi2E,EAAO73D,KAASwM,EAAOqrD,EAAMi2G,EAAY,GAAiBv1J,EAAU,GACxE32B,EAAQxjB,SAAQ,SAAU1C,GAAKoyM,EAAU72M,KAAKyE,EAAEiR,QAASggM,GAAYp0J,EAAS78C,EAAE68C,QAAU,IAG1F,IAAK,IAAIxjD,EAAI,EAAGyB,EAAI,EAAGxB,EAAI84M,EAAU74M,OAAQ84M,EAAc1vM,MAAU,EAAJrJ,GAAQD,EAAIC,GAC3E+4M,EAAYv3M,KAAOw8E,GAAOxmC,EAAM/4C,GAAOg1B,QAAQrB,UAAUyrI,IAAYi7C,EAAU/4M,IAC/Eg5M,EAAYv3M,KAAOw8E,GAAOxmC,EAAM/4C,GAAOg1B,QAAQrB,UAAU2rI,IAAYvmH,IAASz3C,EAAIC,EAAIgrC,KAAUvsC,GAAOg1B,QAAQrB,UAAUoqI,KAG3H,MAAO,CAAE7kJ,OAAQkrF,EAAMt/C,QAASo0J,GAAYoB,EAAax1J,GAC3D,CA7iBOy1J,CAAW1C,EAAGG,EAAG,IAC1B,MACA,KAAK,IAAK,KAAK,IACf/3M,KAAKm4M,GA6iB4BL,EA7iBFF,EAAGG,EAAG,GA+iB1B,CACL9+L,OAFEA,EAASqzB,KAGXuY,QAASizJ,EAAa3yM,KAAI,SAAUi4F,GAAK,OAAOhlC,GAAOknB,GAAOrmE,GAASmkF,EAAI,MAhjBjF,MACA,KAAK,IACLp9F,KAAKm4M,EAAI,CAAEl/L,OAAQ2+L,EAAGG,GAAKlzJ,QAAS,IACpC,MACA,KAAK,IACL7kD,KAAKm4M,EAAImB,GAAM1B,EAAGG,IAClB,MACA,KAAK,IACL/3M,KAAKm4M,EAAIp4M,GAAOg1B,QAAQrB,UAAUoqI,IAClC,MACA,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IACnC99J,KAAKm4M,EAAIoC,GAAoB3C,EAAGG,EAAG,GAAIH,EAAGG,IAC1C,MACA,KAAK,IACL/3M,KAAKm4M,EAAI,CAAC,KAAMP,EAAGG,IACnB,MACA,KAAK,IACL/3M,KAAKm4M,EAAI,CAAC,KAAMP,EAAGG,IACnB,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUytL,EAAGG,EAAG,GAAI,CAACH,EAAGG,EAAG,GAAIH,EAAGG,KAC3C,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUytL,EAAGG,EAAG,GAAK,QAAU,KAAM,CAACH,EAAGG,EAAG,GAAIH,EAAGG,KAC5D,MACA,KAAK,IACL/3M,KAAKm4M,EAAI,CAAC,IAAKoC,GAAoB3C,EAAGG,EAAG,GAAIH,EAAGG,KAChD,MACA,KAAK,IAEC,IAAIyC,EAAiBC,GAAmB7C,EAAGG,EAAG,GAAG73M,MAAMgO,QAAQ,IAAK,IAAK0pM,EAAGG,EAAG,GAAGl/J,UAClF74C,KAAKm4M,EAAI,CAAC,IAAKoC,GAAoBC,EAAgB5C,EAAGG,KAE5D,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAU,QAAS,CAACytL,EAAGG,KAChC,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUytL,EAAGG,EAAG,GAAI,CAACH,EAAGG,KACjC,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAU,SAAU,CAACytL,EAAGG,KACjC,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUghI,GAAUysD,EAAGG,EAAG,KACnC,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUghI,GAAUysD,EAAGG,EAAG,IAAK,CAACH,EAAGG,EAAG,KAC/C,MACA,KAAK,IACL/3M,KAAKm4M,EAAI4B,GAAiB5vL,GAAUghI,GAAUysD,EAAGG,EAAG,IAAK,CAACH,EAAGG,EAAG,MAChE,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUghI,GAAUysD,EAAGG,EAAG,IAAK,CAACH,EAAGG,EAAG,GAAIH,EAAGG,EAAG,KACzD,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUghI,GAAUysD,EAAGG,EAAG,IAAK,CAACH,EAAGG,EAAG,GAAIH,EAAGG,EAAG,GAAIH,EAAGG,EAAG,KACnE,MACA,KAAK,IACL/3M,KAAKm4M,EAAI4B,GAAiB5vL,GAAUghI,GAAUysD,EAAGG,EAAG,IAAK,CAACH,EAAGG,EAAG,GAAIH,EAAGG,EAAG,GAAIH,EAAGG,EAAG,MACpF,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUghI,GAAUysD,EAAGG,EAAG,IAAKH,EAAGG,IAC3C,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAU,QAAS,CAACmvL,GAAM1B,EAAGG,EAAG,MACzC,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUytL,EAAGG,EAAG,GAAI,IAC7B,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUytL,EAAGG,EAAG,GAAI,CAACH,EAAGG,EAAG,KACpC,MACA,KAAK,IACL/3M,KAAKm4M,EAAIhuL,GAAUytL,EAAGG,EAAG,GAAK,YAAa,SAAU,CAACiC,GAAcpC,EAAGG,MACvE,MACA,KAAK,IAAK,KAAK,IACf/3M,KAAKm4M,EAAI98K,GAAWu8K,EAAGG,EAAG,GAAI,CAAErrM,KAAM,YAAao4L,YAAa35C,GAAUysD,EAAGG,EAAG,IAAKzvK,WAAYsvK,EAAGG,EAAG,KACvG,MACA,KAAK,IACL/3M,KAAKm4M,EAAI98K,GAAWu8K,EAAGG,EAAG,GAAI,CAAErrM,KAAM,YAAao4L,YAAa35C,GAAUysD,EAAGG,EAAG,IAAKzvK,WAAYsvK,EAAGG,EAAG,GAAI71I,UAA+B,iBAAb01I,EAAGG,EAAG,GAAkBH,EAAGG,EAAG,GAAK,MAChK,MACA,KAAK,IACL/3M,KAAKm4M,EAAIsC,GAAmB7C,EAAGG,IAC/B,MACA,KAAK,IACL/3M,KAAKm4M,GA2XwBj4M,EA3XF03M,EAAGG,EAAG,GA2XG1mI,EA3XC85E,GAAUysD,EAAGG,GAAIv3H,OAAO,IA4XlDzgF,GAAOg1B,QAAQ4jB,QAAQz4C,EAAOmxE,IA3XzC,MACA,KAAK,IACLrxE,KAAKm4M,EAAIsC,GAAmB7C,EAAGG,EAAG,GAAIH,EAAGG,IACzC,MACA,KAAK,IAAK,KAAK,IACf/3M,KAAKm4M,EAAIsC,GAAmB7C,EAAGG,GAAK9sI,IACpC,MACA,KAAK,IAAK,KAAK,IACfjrE,KAAKm4M,EAAIsC,GAAmB7C,EAAGG,GAAK5sI,IACpC,MACA,KAAK,IAAK,KAAK,IACfnrE,KAAKm4M,EAAIsC,GAAmBtvD,GAAUysD,EAAGG,IAAM1sI,IAC/C,MACA,KAAK,IACLrrE,KAAKm4M,EAAIsC,GAAmB7C,EAAGG,GAAIzyM,cAAeqmE,IAClD,MACA,KAAK,IACL3rE,KAAKm4M,EAAIsC,GAAmB7C,EAAGG,GAAIv3H,OAAO,GAAIvV,IAC9C,MACA,KAAK,IACLjrE,KAAKm4M,EAAIsC,GAAmB7C,EAAGG,GAAIv3H,OAAO,GAAIrV,IAC9C,MACA,KAAK,IACLnrE,KAAKm4M,EAAIsC,GAAmB7C,EAAGG,GAAIv3H,OAAO,GAAGl7E,cAAe+lE,IAC5D,MACA,KAAK,IAAK,KAAK,IACfrrE,KAAKm4M,EAAIuC,GAAe9C,EAAGG,GAAK,GAChC,MACA,KAAK,IAAK,KAAK,IACf/3M,KAAKm4M,EAAIuC,GAAe9C,EAAGG,GAAK,GAChC,MACA,KAAK,IACL/3M,KAAKm4M,EAAIp4M,GAAOg1B,QAAQrB,UAAU0kL,GAAWR,EAAGG,KAChD,MACA,KAAK,IAEC,IAAI4C,EAAU/C,EAAGG,GAAIjuM,QAAQ,KACzB5C,EAAS0wM,EAAGG,GAAIv3H,OAAO,EAAGm6H,GAC1BC,EAAY76M,GAAOiJ,SAAS9B,GAChC,IAAK0zM,EAAW,MAAM,IAAI74M,MAAM,mBAAqBmF,GACrD,IAAI2zM,EAAYzC,GAAWwC,EAAYhD,EAAGG,GAAIv3H,OAAOm6H,EAAU,IAC/D36M,KAAKm4M,EAAIp4M,GAAOg1B,QAAQrB,UAAUmnL,GAExC,MACA,KAAK,IAGC,GADAjD,EAAGG,GAAMH,EAAGG,GAAIv3H,OAAO,EAAGo3H,EAAGG,GAAIx2M,OAAS,KACpCq2M,EAAGG,KAAOh4M,GAAOiJ,UAAW,MAAM,IAAIjH,MAAM,mBAAqB61M,EAAGG,IACtE8C,EAAYzC,GAAWr4M,GAAOiJ,SAAS4uM,EAAGG,KAC9C/3M,KAAKm4M,EAAIp4M,GAAOg1B,QAAQrB,UAAUmnL,GAExC,MACA,KAAK,IACL76M,KAAKm4M,EAAI7rK,GAAMsrK,EAAGG,GAAI7pM,QAAQ,QAAQ,KACtC,MACA,KAAK,IACLlO,KAAKm4M,EAAI7rK,KACT,MACA,KAAK,IAAK,KAAK,IAAK,KAAK,IACzBtsC,KAAKm4M,EAAI4B,GAAiBe,GAAalD,EAAGG,EAAG,GAAIH,EAAGG,EAAG,GAAIH,EAAGG,EAAG,KACjE,MACA,KAAK,IAAK,KAAK,IACf/3M,KAAKm4M,EAAI4B,GAAiBnC,EAAGG,EAAG,IAChC,MACA,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAC/UH,EAAGG,EAAG,GAAGx0M,KAAKq0M,EAAGG,IACjB,MACA,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAC/F/3M,KAAKm4M,EAAI,CAACP,EAAGG,IACb,MACA,KAAK,IACLH,EAAGG,EAAG,GAAGx0M,KAAKq0M,EAAGG,EAAG,IACpB,MACA,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IAAK,KAAK,IACzGH,EAAGG,EAAG,GAAGx0M,KAAKq0M,EAAGG,EAAG,IAGpB,EACAptG,MAAO,CAAC3iG,EAAE8kM,EAAIC,EAAI,CAAC,EAAE,EAAE,EAAE,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,IAAI/kM,EAAEglM,EAAI,CAAC,EAAE,KAAK,CAAC,EAAE,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,GAAG,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE,CAAC,EAAE,KAAK,GAAGC,EAAI,GAAGA,EAAI,GAAGA,EAAI,IAAIA,EAAI,IAAIA,EAAI,IAAIA,EAAI,IAAIA,EAAI,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,IAAI,GAAGC,IAAMllM,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,EAAE,GAAG,CAAC,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,GAAG,GAAG,GAAG,GAAGmlM,GAAK,CAAC,EAAE,CAAC,EAAE,MAAMnlM,EAAEolM,EAAI,CAAC,EAAE,KAAK,CAAC,IAAI,GAAG,IAAI,KAAKplM,EAAEqlM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,KAAKrlM,EAAEqlM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,KAAKrlM,EAAEslM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,MAAM,CAAC,GAAGC,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,CAAC,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAGC,EAAI,IAAI,GAAG,IAAI,GAAG,IAAIC,EAAI,IAAI,IAAI1lM,EAAEqlM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,KAAKrlM,EAAE2lM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAGC,EAAI,GAAGH,GAAKzlM,EAAE6lM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,MAAM7lM,EAAE8kM,EAAI,CAAC,EAAE,MAAM9kM,EAAE8kM,EAAI,CAAC,EAAE,MAAM9kM,EAAE8kM,EAAI,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,GAAG,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,EAAE,KAAK9kM,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,MAAMA,EAAE8lM,EAAI,CAAC,EAAE,KAAK,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE,MAAM,CAAC,GAAG,GAAG,GAAGC,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAGC,EAAI,GAAG,IAAI,CAAC,GAAG,GAAG,GAAGF,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAGC,EAAI,GAAG,IAAIjmM,EAAEqlM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,IAAI,GAAG,GAAG,GAAGY,GAAKjmM,EAAEkmM,EAAI,CAAC,EAAE,KAAK,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,GAAG,CAAC,EAAE,OAAOlmM,EAAEmmM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,KAAKnmM,EAAEmmM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,GAAGZ,EAAI,GAAGC,EAAI,GAAGC,EAAI,IAAIC,IAAM1lM,EAAEmmM,EAAI,CAAC,EAAE,MAAMnmM,EAAEomM,EAAI,CAAC,EAAE,MAAMpmM,EAAEqmM,EAAI,CAAC,EAAE,MAAMrmM,EAAEqmM,EAAI,CAAC,EAAE,MAAMrmM,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,EAAE,MAAMA,EAAEsmM,EAAI,CAAC,EAAE,MAAMtmM,EAAEsmM,EAAI,CAAC,EAAE,MAAMtmM,EAAEsmM,EAAI,CAAC,EAAE,MAAMtmM,EAAEsmM,EAAI,CAAC,EAAE,MAAM,CAAC,GAAG,GAAG,GAAGP,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAGC,EAAI,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG,IAAI,IAAI,CAAC,EAAE,MAAMjmM,EAAEumM,EAAI,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAOvmM,EAAEwmM,EAAI,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAOxmM,EAAEymM,EAAI,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,MAAM,CAAC,GAAGC,EAAI,IAAI,KAAK,CAAC,GAAGA,EAAI,IAAI,KAAK,CAAC,GAAGA,EAAI,IAAI,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,IAAI,IAAIC,GAAK3mM,EAAE4mM,EAAI,CAAC,EAAE,MAAM5mM,EAAE4mM,EAAI,CAAC,EAAE,MAAM5mM,EAAE6mM,EAAI,CAAC,EAAE,MAAM7mM,EAAE6mM,EAAI,CAAC,EAAE,MAAM7mM,EAAE6mM,EAAI,CAAC,EAAE,MAAM7mM,EAAE2lM,EAAI,CAAC,EAAE,MAAM,CAAC,GAAGJ,EAAI,GAAGC,EAAI,GAAG,IAAI,IAAI,GAAG,IAAIE,GAAK1lM,EAAEqlM,EAAI,CAAC,EAAE,KAAKrlM,EAAEqlM,EAAI,CAAC,EAAE,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,GAAGO,EAAI,GAAGH,IAAMzlM,EAAE8mM,EAAI,CAAC,EAAE,MAAM9mM,EAAE8mM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAGvB,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAE6lM,EAAI,CAAC,EAAE,KAAK7lM,EAAE6lM,EAAI,CAAC,EAAE,MAAM7lM,EAAE6lM,EAAI,CAAC,EAAE,MAAM7lM,EAAE6lM,EAAI,CAAC,EAAE,MAAM7lM,EAAE8kM,EAAI,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,MAAM9kM,EAAEopM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,IAAI,IAAI,IAAI,KAAKppM,EAAEolM,EAAI,CAAC,EAAE,MAAMplM,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,OAAO,CAAC,GAAGulM,EAAI,GAAGC,EAAI,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,IAAI6D,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,GAAG,IAAI3D,GAAK1lM,EAAE8lM,EAAI,CAAC,EAAE,MAAM9lM,EAAEspM,GAAKC,GAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,KAAOxpM,EAAEqlM,EAAI,CAAC,EAAE,MAAM,CAAC,GAAGoE,GAAK,GAAG,KAAKzpM,EAAEumM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,MAAMvmM,EAAE0pM,GAAKC,GAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,KAAO5pM,EAAEqlM,EAAI,CAAC,EAAE,MAAM,CAAC,GAAG,IAAI,GAAGU,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGC,EAAI,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,MAAMjmM,EAAEslM,EAAI,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAGC,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGqE,GAAK,GAAG,IAAI,GAAG7C,EAAI,GAAGvB,EAAI,GAAGqE,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI/B,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,IAAMlqM,EAAEmqM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGpE,EAAI,GAAGC,EAAI,GAAGC,IAAMjmM,EAAEomM,EAAI,CAAC,EAAE,MAAMpmM,EAAE0pM,GAAKC,GAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,KAAO5pM,EAAEqlM,EAAI,CAAC,EAAE,MAAM,CAAC,EAAE,CAAC,EAAE,KAAKrlM,EAAE8kM,EAAIC,EAAI,CAAC,GAAG,EAAE,EAAE,MAAM,CAAC,GAAGQ,EAAI,GAAGC,EAAI,GAAG,IAAI,IAAI,GAAG,IAAIE,GAAK1lM,EAAEumM,EAAI,CAAC,EAAE,MAAM,CAAC,IAAI,IAAI,IAAI6D,GAAK,IAAI,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,MAAMpqM,EAAEwmM,EAAI,CAAC,EAAE,MAAMxmM,EAAEumM,EAAI8D,GAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAIC,GAAK,IAAIC,KAAOvqM,EAAEymM,EAAI,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAMzmM,EAAEwqM,GAAK,CAAC,EAAE,KAAKxqM,EAAEkmM,EAAIuE,GAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAGC,GAAK,IAAIA,KAAO1qM,EAAEwqM,GAAK,CAAC,EAAE,KAAKxqM,EAAEwqM,GAAK,CAAC,EAAE,KAAKxqM,EAAE2qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,GAAGjE,EAAI,IAAI,KAAK1mM,EAAE2qM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGjE,EAAI,IAAI,KAAK1mM,EAAE2lM,EAAI,CAAC,EAAE,KAAK3lM,EAAE8mM,EAAI,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM9mM,EAAE4qM,GAAK,CAAC,EAAE,MAAM5qM,EAAE6qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM7qM,EAAE8qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM9qM,EAAE8qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,OAAO9qM,EAAE+qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM/qM,EAAEgrM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,GAAGzF,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI2B,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG5D,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI2B,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG5D,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI2B,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEgrM,GAAK,CAAC,EAAE,MAAMhrM,EAAEgrM,GAAK,CAAC,EAAE,MAAMhrM,EAAEgrM,GAAK,CAAC,EAAE,MAAMhrM,EAAEgrM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,GAAGC,GAAK,GAAGC,KAAOlrM,EAAEgrM,GAAK,CAAC,EAAE,MAAMhrM,EAAEgrM,GAAK,CAAC,EAAE,MAAMhrM,EAAEgrM,GAAK,CAAC,EAAE,MAAMhrM,EAAEgrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGzF,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEmrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAGC,GAAK,GAAGC,GAAK,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAMrrM,EAAEsrM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,OAAOtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG/F,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,GAAG,GAAGwB,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIuC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM7oM,EAAEurM,GAAK,CAAC,EAAE,MAAMvrM,EAAEurM,GAAK,CAAC,EAAE,MAAMvrM,EAAEurM,GAAK,CAAC,EAAE,MAAMvrM,EAAEurM,GAAK,CAAC,EAAE,MAAMvrM,EAAEurM,GAAK,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAMvrM,EAAEwrM,GAAK,CAAC,EAAE,MAAMxrM,EAAEwrM,GAAK,CAAC,EAAE,MAAMxrM,EAAEwrM,GAAK,CAAC,EAAE,MAAMxrM,EAAEwrM,GAAK,CAAC,EAAE,MAAMxrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAEsrM,GAAK,CAAC,EAAE,MAAMtrM,EAAE8kM,EAAI,CAAC,EAAE,IAAI9kM,EAAEyrM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,MAAMzrM,EAAE0rM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM1rM,EAAE2rM,GAAK,CAAC,EAAE,MAAM3rM,EAAEopM,GAAK,CAAC,EAAE,KAAKppM,EAAEopM,GAAK,CAAC,EAAE,KAAKppM,EAAEopM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,IAAI,KAAKppM,EAAEolM,EAAI,CAAC,EAAE,MAAMplM,EAAE4rM,GAAK,CAAC,EAAE,MAAM5rM,EAAE4rM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,OAAO5rM,EAAE6rM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGtG,EAAI,GAAGC,EAAI,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,GAAG,CAAC,EAAE,KAAK,IAAI6D,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIyC,GAAK,IAAI,GAAG,IAAIpG,GAAK1lM,EAAEolM,EAAIH,EAAI,CAAC,IAAI,GAAG,IAAI,MAAMjlM,EAAE6rM,GAAK,CAAC,EAAE,MAAM7rM,EAAE6rM,GAAK,CAAC,EAAE,MAAM7rM,EAAE+rM,GAAK,CAAC,EAAE,IAAI/rM,EAAEgsM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,EAAE,OAAOhsM,EAAEspM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG/D,EAAI,GAAGC,EAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAIK,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,GAAG,IAAIrC,EAAI,IAAIoD,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,EAAE,KAAKA,EAAEkmM,EAAI+F,GAAK,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAGC,GAAK,GAAGA,GAAK,GAAGA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,GAAK,GAAGhH,IAAM,CAAC,GAAGK,EAAI,GAAGC,EAAI,GAAG,IAAI,IAAI,GAAG,IAAIE,GAAK1lM,EAAEumM,EAAI,CAAC,EAAE,MAAMvmM,EAAE+rM,GAAK,CAAC,EAAE,IAAI/rM,EAAEspM,GAAKC,GAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,KAAOxpM,EAAE0pM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM1pM,EAAE0pM,GAAKC,GAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,KAAO5pM,EAAEqlM,EAAI,CAAC,EAAE,MAAMrlM,EAAEkmM,EAAIuE,GAAK,CAAC,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,CAAC,EAAE,OAAOzqM,EAAEqlM,EAAI,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,IAAI,IAAI,IAAI,CAAC,EAAE,MAAM,CAAC,GAAGE,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,GAAG,GAAGC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI0G,GAAK,IAAI,GAAG,IAAIzG,GAAK1lM,EAAEosM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG7G,EAAI,GAAGC,EAAI,GAAGC,EAAI,IAAI0G,GAAK,IAAIzG,IAAM1lM,EAAEqsM,GAAK,CAAC,EAAE,MAAMrsM,EAAEqsM,GAAK,CAAC,EAAE,MAAMrsM,EAAEqsM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG9G,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGqE,GAAK,GAAG,IAAI,GAAG7C,EAAI,GAAGvB,EAAI,GAAGqE,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI/B,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,IAAM,CAAC,GAAG3E,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,GAAG,GAAGC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI0G,GAAK,IAAI,GAAG,IAAIzG,GAAK1lM,EAAEqsM,GAAK,CAAC,EAAE,MAAMrsM,EAAEqsM,GAAK,CAAC,EAAE,MAAMrsM,EAAEqsM,GAAK,CAAC,EAAE,MAAMrsM,EAAEqsM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG9G,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAG,IAAI,GAAGwB,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIuC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,GAAK,IAAI,KAAKlqM,EAAEssM,GAAK,CAAC,EAAE,MAAMtsM,EAAEssM,GAAK,CAAC,EAAE,MAAMtsM,EAAE0pM,GAAKC,GAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,KAAO5pM,EAAEmmM,EAAI,CAAC,EAAE,MAAMnmM,EAAEmqM,GAAK,CAAC,EAAE,MAAMnqM,EAAE+rM,GAAK,CAAC,EAAE,KAAK/rM,EAAEglM,EAAI,CAAC,EAAE,KAAK,CAAC,EAAE,CAAC,EAAE,OAAOhlM,EAAEwqM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,EAAE,OAAOxqM,EAAEwqM,GAAK,CAAC,EAAE,KAAKxqM,EAAEwqM,GAAK,CAAC,EAAE,KAAKxqM,EAAEwqM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGjF,EAAI,GAAGC,EAAI,GAAG,IAAI,IAAI,GAAG,IAAIE,GAAK1lM,EAAEwqM,GAAK,CAAC,EAAE,MAAMxqM,EAAEwqM,GAAK,CAAC,EAAE,MAAMxqM,EAAEwqM,GAAK,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAMxqM,EAAEusM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGhH,EAAI,GAAGC,EAAI,GAAG,IAAI,IAAI,GAAG,IAAIE,GAAK1lM,EAAEumM,EAAI,CAAC,EAAE,MAAM,CAAC,GAAGhB,EAAI,GAAGC,EAAI,GAAG,IAAI,IAAI,GAAG,IAAIE,GAAK,CAAC,GAAG,CAAC,EAAE,MAAM1lM,EAAEwsM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAMxsM,EAAEwsM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGjH,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGqE,GAAK,GAAG,IAAI,GAAG7C,EAAI,GAAGvB,EAAI,GAAGqE,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI/B,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,IAAM,CAAC,GAAG,CAAC,EAAE,KAAK,IAAI,IAAI,IAAI,CAAC,EAAE,MAAMlqM,EAAE2qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAIhE,IAAM3mM,EAAE2qM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,IAAI,GAAGlF,GAAKzlM,EAAE4qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO5qM,EAAE6qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,GAAGtF,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,IAAI,CAAC,EAAE,MAAMnpM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEysM,GAAK,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAMzsM,EAAE,CAAC,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAImoM,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,KAAMxoM,EAAE+qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,GAAG2B,GAAK,IAAIC,KAAO3sM,EAAEgrM,GAAK,CAAC,EAAE,MAAMhrM,EAAEgrM,GAAK,CAAC,EAAE,MAAMhrM,EAAEgrM,GAAK,CAAC,EAAE,MAAMhrM,EAAEmrM,GAAK,CAAC,EAAE,KAAKnrM,EAAEmrM,GAAK,CAAC,EAAE,KAAKnrM,EAAEysM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,MAAMzsM,EAAEmrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG5F,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG5D,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG5D,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG5D,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG5D,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEmrM,GAAK,CAAC,EAAE,MAAMnrM,EAAEmrM,GAAK,CAAC,EAAE,KAAKnrM,EAAEysM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,EAAE,MAAMzsM,EAAEmrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG5F,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAGM,GAAK,GAAG,KAAKzpM,EAAEsrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG/F,EAAI,GAAGC,EAAI,GAAG,IAAI,IAAI,GAAG,IAAIE,GAAK,CAAC,GAAGH,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,GAAG,GAAGC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI0G,GAAK,IAAI,GAAG,IAAIzG,GAAK1lM,EAAE4sM,GAAK,CAAC,EAAE,MAAM5sM,EAAE4sM,GAAK,CAAC,EAAE,MAAM5sM,EAAE4sM,GAAK,CAAC,EAAE,MAAM5sM,EAAE6sM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO7sM,EAAEysM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAOzsM,EAAEysM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,GAAGlH,EAAI,GAAGC,EAAI,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,GAAGwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI8F,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI9E,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIqH,IAAM,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM/sM,EAAE2rM,GAAK,CAAC,EAAE,MAAM3rM,EAAEyrM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAMzrM,EAAE0rM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM1rM,EAAE2rM,GAAK,CAAC,EAAE,MAAM3rM,EAAE4rM,GAAK,CAAC,EAAE,MAAM5rM,EAAE4rM,GAAK,CAAC,EAAE,MAAM5rM,EAAE4rM,GAAK,CAAC,EAAE,MAAM5rM,EAAE4rM,GAAK,CAAC,EAAE,MAAM5rM,EAAE4rM,GAAK,CAAC,EAAE,MAAM5rM,EAAE6rM,GAAK,CAAC,EAAE,MAAM7rM,EAAE6rM,GAAK,CAAC,EAAE,MAAM7rM,EAAE6rM,GAAK,CAAC,EAAE,MAAM7rM,EAAEgtM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAMhtM,EAAE6rM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGtG,EAAI,GAAGC,EAAI,GAAG,IAAI,IAAI6D,GAAK,IAAI,IAAI,IAAI,GAAG,IAAI3D,GAAK,CAAC,GAAG,CAAC,EAAE,MAAM1lM,EAAEitM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,OAAOjtM,EAAEgsM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAMhsM,EAAEspM,GAAK,CAAC,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG/D,EAAI,GAAGC,EAAI,GAAGuB,EAAI,IAAIK,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIrC,EAAI,IAAIoD,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,KAAOnpM,EAAEktM,GAAK,CAAC,EAAE,MAAMltM,EAAEmtM,GAAK,CAAC,EAAE,KAAKntM,EAAEmtM,GAAK,CAAC,EAAE,KAAKntM,EAAEmtM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGlC,GAAK,GAAGC,GAAK,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,IAAI,GAAGnF,EAAI,GAAGC,EAAI,GAAG,IAAI,CAAC,GAAG,IAAI,GAAGD,EAAI,GAAGC,EAAI,GAAG,IAAIhmM,EAAEotM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAMptM,EAAEotM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG7H,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAG6H,GAAK,GAAG,IAAI,GAAGrG,EAAI,GAAGvB,EAAI,GAAGqE,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIwD,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAItF,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,IAAMlqM,EAAEmmM,EAAI,CAAC,EAAE,KAAKnmM,EAAEitM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG1H,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAG+H,GAAK,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG9H,EAAI,IAAI,IAAI,IAAI2B,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,GAAG,IAAIrC,EAAI,IAAIoD,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAE+rM,GAAK,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM/rM,EAAEkmM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,OAAOlmM,EAAEosM,GAAK,CAAC,EAAE,MAAMpsM,EAAEwtM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAMxtM,EAAEkmM,EAAI,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,MAAMlmM,EAAEkmM,EAAI,CAAC,EAAE,MAAMlmM,EAAEkmM,EAAI,CAAC,EAAE,MAAMlmM,EAAEosM,GAAK,CAAC,EAAE,MAAMpsM,EAAEosM,GAAK,CAAC,EAAE,MAAMpsM,EAAEosM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG7G,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGqE,GAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,GAAG7C,EAAI,GAAGvB,EAAI,GAAGqE,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI/B,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,IAAMlqM,EAAEytM,GAAK,CAAC,EAAE,MAAMztM,EAAE0tM,GAAK,CAAC,EAAE,MAAM1tM,EAAE0tM,GAAK,CAAC,EAAE,MAAM1tM,EAAE2tM,GAAK,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,GAAGpI,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,GAAG,GAAGC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI0G,GAAK,IAAI,GAAG,IAAIzG,GAAK1lM,EAAE4sM,GAAK,CAAC,EAAE,MAAM5sM,EAAE4sM,GAAK,CAAC,EAAE,MAAM5sM,EAAE4sM,GAAK,CAAC,EAAE,MAAM5sM,EAAE4sM,GAAK,CAAC,EAAE,MAAM5sM,EAAE4sM,GAAK,CAAC,EAAE,MAAM5sM,EAAE+rM,GAAK,CAAC,EAAE,KAAK/rM,EAAEwqM,GAAK,CAAC,EAAE,KAAKxqM,EAAEwqM,GAAK,CAAC,EAAE,MAAM,CAAC,IAAIJ,GAAK,IAAI,KAAKpqM,EAAEwqM,GAAK,CAAC,EAAE,KAAKxqM,EAAEumM,EAAI8D,GAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAIC,GAAK,IAAIC,KAAOvqM,EAAEusM,GAAK,CAAC,EAAE,KAAKvsM,EAAEwqM,GAAK,CAAC,EAAE,KAAKxqM,EAAE,CAAC,EAAE,GAAG,IAAI,IAAI,KAAK,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,KAAKA,EAAEwsM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,GAAG/C,GAAK,GAAG,KAAKzpM,EAAE2qM,GAAK,CAAC,EAAE,MAAM3qM,EAAEumM,EAAI,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAOvmM,EAAE2qM,GAAK,CAAC,EAAE,KAAK3qM,EAAE2qM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM3qM,EAAE6qM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGtF,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAE8qM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGvF,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAE8qM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGM,GAAK,GAAGC,GAAK,IAAI,KAAKrrM,EAAE+qM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGxF,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEgrM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAMhrM,EAAEgrM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAMhrM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEgrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGzF,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEysM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAMzsM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAE,CAAC,EAAE,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,GAAGulM,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAMnpM,EAAEmrM,GAAK,CAAC,EAAE,MAAMnrM,EAAEsrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG/F,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,GAAG,GAAGwB,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIuC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAI,KAAK,CAAC,GAAGtD,EAAI,GAAGC,EAAI,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAE6sM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGtH,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEysM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGlH,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEopM,GAAK,CAAC,EAAE,KAAKppM,EAAEyrM,GAAK,CAAC,EAAE,MAAMzrM,EAAE4tM,GAAK,CAAC,EAAE,KAAK5tM,EAAE4tM,GAAK,CAAC,EAAE,KAAK5tM,EAAE4tM,GAAK,CAAC,EAAE,KAAK5tM,EAAE4tM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGrI,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIgB,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAI,IAAI,IAAIwE,GAAK,IAAI,KAAKlqM,EAAEopM,GAAK,CAAC,EAAE,KAAKppM,EAAE0rM,GAAK,CAAC,EAAE,MAAM1rM,EAAE6tM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,MAAM,CAAC,GAAGtI,EAAI,GAAGC,EAAI,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,GAAGwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI8F,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI9E,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIqH,IAAM,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM/sM,EAAE2rM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGpG,EAAI,GAAGC,EAAI,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,IAAI6D,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIyC,GAAK,IAAI,GAAG,IAAIpG,GAAK1lM,EAAE6rM,GAAK,CAAC,EAAE,MAAM7rM,EAAE6rM,GAAK,CAAC,EAAE,MAAM7rM,EAAEitM,GAAK,CAAC,EAAE,KAAKjtM,EAAEitM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG1H,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG+G,GAAK,GAAG,IAAI,GAAGC,GAAK,GAAG,IAAI,GAAGtI,EAAI,IAAI,IAAI,IAAI2B,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,GAAG,IAAIrC,EAAI,IAAIoD,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEktM,GAAK,CAAC,EAAE,MAAMltM,EAAEguM,GAAK,CAAC,EAAE,KAAKhuM,EAAEguM,GAAK,CAAC,EAAE,KAAKhuM,EAAEspM,GAAKC,GAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,KAAOxpM,EAAE0pM,GAAKC,GAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,KAAO,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,GAAGzE,EAAI,IAAI,CAAC,EAAE,KAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,KAAKnlM,EAAEotM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAOptM,EAAEolM,EAAIH,EAAI,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAGQ,IAAMzlM,EAAEiuM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,GAAGhJ,EAAI,GAAGA,EAAI,GAAGA,EAAI,IAAIA,EAAI,IAAIA,EAAI,IAAIA,EAAI,IAAIA,EAAI,GAAGQ,IAAM,CAAC,GAAGF,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAG6H,GAAK,GAAG,IAAI,GAAGrG,EAAI,GAAGvB,EAAI,GAAGqE,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIwD,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAItF,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,IAAMlqM,EAAEolM,EAAIH,EAAI,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAGQ,IAAMzlM,EAAE0pM,GAAK,CAAC,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGnE,EAAI,GAAGC,EAAI,GAAG+H,GAAK,GAAG9H,EAAI,IAAI2B,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIrC,EAAI,IAAIoD,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,KAAOnpM,EAAEkuM,GAAK,CAAC,EAAE,MAAMluM,EAAEkuM,GAAK,CAAC,EAAE,KAAKluM,EAAEkuM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG3I,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEkuM,GAAK,CAAC,EAAE,KAAKluM,EAAE0pM,GAAKC,GAAK,CAAC,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,KAAO5pM,EAAE,CAAC,GAAG,IAAI,IAAI,IAAI,KAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAOA,EAAEwtM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGjI,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGqE,GAAK,GAAG,IAAI,GAAG7C,EAAI,GAAGvB,EAAI,GAAGqE,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI/B,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,IAAMlqM,EAAEmuM,GAAK,CAAC,EAAE,MAAMnuM,EAAEytM,GAAK,CAAC,EAAE,MAAMztM,EAAEmuM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG5I,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAG,IAAI,GAAGwB,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIuC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,GAAK,IAAI,KAAKlqM,EAAEwqM,GAAK,CAAC,EAAE,KAAKxqM,EAAEwqM,GAAK,CAAC,EAAE,KAAKxqM,EAAEwsM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGjH,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,GAAG,GAAGC,EAAI,IAAI,IAAI,IAAI,GAAG,IAAIC,GAAK1lM,EAAEwsM,GAAK,CAAC,EAAE,KAAKxsM,EAAEkmM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAGkI,GAAK,IAAIA,KAAOpuM,EAAEwqM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGjF,EAAI,GAAGC,EAAI,GAAG,IAAI,IAAI,GAAG,IAAIE,GAAK1lM,EAAEumM,EAAI,CAAC,EAAE,MAAMvmM,EAAE8mM,EAAI,CAAC,EAAE,KAAK9mM,EAAE6qM,GAAK,CAAC,EAAE,MAAM7qM,EAAE8qM,GAAK,CAAC,EAAE,MAAM9qM,EAAE8qM,GAAK,CAAC,EAAE,MAAM9qM,EAAE+qM,GAAK,CAAC,EAAE,MAAM/qM,EAAE+qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,GAAG2B,GAAK,IAAIC,KAAO3sM,EAAE+qM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,GAAG2B,GAAK,IAAIC,KAAO3sM,EAAEgrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGzF,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEmrM,GAAK,CAAC,EAAE,MAAMnrM,EAAEmrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG5F,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG5D,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG5D,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,MAAMnpM,EAAEmrM,GAAK,CAAC,EAAE,MAAMnrM,EAAEmrM,GAAK,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,IAAI,IAAI,KAAK,CAAC,GAAG5F,EAAI,GAAGC,EAAI,GAAG,IAAI,IAAI6D,GAAK,IAAI,IAAI,IAAI,GAAG,IAAI3D,GAAK1lM,EAAEquM,GAAK,CAAC,EAAE,MAAMruM,EAAEquM,GAAK,CAAC,EAAE,MAAMruM,EAAEquM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,GAAGC,GAAK,GAAG,KAAKtuM,EAAEopM,GAAK,CAAC,EAAE,KAAKppM,EAAEyrM,GAAK,CAAC,EAAE,MAAMzrM,EAAEopM,GAAK,CAAC,EAAE,KAAKppM,EAAE0rM,GAAK,CAAC,EAAE,MAAM1rM,EAAE6tM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,MAAM7tM,EAAEitM,GAAK,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,OAAOjtM,EAAEitM,GAAK,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,EAAE,OAAOjtM,EAAEgsM,GAAK,CAAC,EAAE,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGzG,EAAI,GAAGC,EAAI,GAAGuB,EAAI,GAAG+G,GAAK,GAAGC,GAAK,GAAGtI,EAAI,IAAI2B,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIrC,EAAI,IAAIoD,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,KAAOnpM,EAAEuuM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGxH,EAAI,GAAG,KAAK,CAAC,GAAGA,EAAI,GAAG,KAAK/mM,EAAEuuM,GAAK,CAAC,EAAE,KAAKvuM,EAAEuuM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,GAAGpJ,GAAK,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,GAAGA,GAAKnlM,EAAEotM,GAAK,CAAC,EAAE,MAAMptM,EAAEwuM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAOxuM,EAAEyuM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGhF,GAAK,GAAG,KAAK,CAAC,GAAGA,GAAK,GAAG,KAAK,CAAC,GAAGlE,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,GAAG,GAAGC,EAAI,IAAI,IAAI,IAAI,GAAG,IAAIC,GAAK1lM,EAAE0uM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,GAAGnJ,EAAI,GAAGC,EAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAIK,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,GAAG,IAAIrC,EAAI,IAAIoD,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG,CAAC,EAAE,MAAMnpM,EAAEyuM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGhF,GAAK,GAAG,KAAKzpM,EAAEotM,GAAK,CAAC,EAAE,KAAKptM,EAAEkmM,EAAI,CAAC,EAAE,KAAK,CAAC,GAAGyI,GAAK,GAAGA,GAAK,GAAGA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,KAAO3uM,EAAEiuM,GAAK,CAAC,EAAE,MAAMjuM,EAAE4uM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,MAAM5uM,EAAEkmM,EAAI,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,MAAMlmM,EAAEkmM,EAAI,CAAC,EAAE,MAAMlmM,EAAEkmM,EAAI,CAAC,EAAE,MAAMlmM,EAAEiuM,GAAK,CAAC,EAAE,MAAMjuM,EAAEiuM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG1I,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAG6H,GAAK,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,GAAGrG,EAAI,GAAGvB,EAAI,GAAGqE,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIwD,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAItF,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,IAAMlqM,EAAEytM,GAAK,CAAC,EAAE,MAAMztM,EAAE2tM,GAAK,CAAC,EAAE,MAAM3tM,EAAE2tM,GAAK,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM3tM,EAAEkuM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAMluM,EAAE+rM,GAAK,CAAC,EAAE,IAAI/rM,EAAEwtM,GAAK,CAAC,EAAE,MAAMxtM,EAAEwtM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAGjI,EAAI,GAAGC,EAAI,GAAGC,EAAI,IAAI0G,GAAK,IAAIzG,IAAM1lM,EAAEwtM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,OAAOxtM,EAAE6uM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM7uM,EAAE2qM,GAAK,CAAC,EAAE,KAAK3qM,EAAEgrM,GAAK,CAAC,EAAE,MAAMhrM,EAAEgrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAMhrM,EAAEmrM,GAAK,CAAC,EAAE,KAAKnrM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAE,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,EAAE,MAAMA,EAAEmrM,GAAK,CAAC,EAAE,MAAMnrM,EAAEmrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,GAAG5F,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIgB,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAI,IAAI,IAAIwE,GAAK,IAAI,KAAKlqM,EAAEopM,GAAK,CAAC,EAAE,KAAKppM,EAAE6tM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGtI,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGwB,EAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI8F,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI9E,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIqH,IAAM,CAAC,GAAG,CAAC,EAAE,KAAK,GAAGuB,GAAK,GAAG,KAAKtuM,EAAE6rM,GAAK,CAAC,EAAE,MAAM7rM,EAAEgtM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAMhtM,EAAEuuM,GAAK,CAAC,EAAE,MAAMvuM,EAAEuuM,GAAK,CAAC,EAAE,KAAKvuM,EAAEuuM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,KAAK,CAAC,GAAG,CAAC,EAAE,MAAMvuM,EAAEkmM,EAAI+F,GAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG6C,GAAK,GAAGA,GAAK,GAAGA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,GAAK,IAAIA,KAAO9uM,EAAEwuM,GAAK,CAAC,EAAE,MAAMxuM,EAAEyuM,GAAK,CAAC,EAAE,KAAKzuM,EAAEyuM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGhF,GAAK,GAAG,KAAK,CAAC,GAAGlE,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,GAAG,GAAGC,EAAI,IAAI,IAAI,IAAI,GAAG,IAAIC,GAAK1lM,EAAE0uM,GAAK,CAAC,EAAE,MAAM1uM,EAAEyuM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGlJ,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEyuM,GAAK,CAAC,EAAE,IAAI,CAAC,IAAI,CAAC,EAAE,OAAOzuM,EAAE,CAAC,GAAG,GAAG,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,KAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAOA,EAAE4uM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGrJ,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAG6H,GAAK,GAAG,IAAI,GAAGrG,EAAI,GAAGvB,EAAI,GAAGqE,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIwD,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAItF,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIsE,GAAK,IAAIC,GAAK,IAAI,IAAI,IAAIC,IAAMlqM,EAAEqsM,GAAK,CAAC,EAAE,MAAMrsM,EAAEytM,GAAK,CAAC,EAAE,MAAMztM,EAAEqsM,GAAK,CAAC,EAAE,MAAMrsM,EAAEkuM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,IAAI,GAAGzI,GAAKzlM,EAAEwtM,GAAK,CAAC,EAAE,MAAMxtM,EAAEwtM,GAAK,CAAC,EAAE,MAAMxtM,EAAEkmM,EAAI,CAAC,EAAE,MAAMlmM,EAAE6uM,GAAK,CAAC,EAAE,MAAM7uM,EAAE6uM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAGtJ,EAAI,GAAGC,EAAI,GAAG,GAAG,GAAG,GAAG,GAAGC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI0G,GAAK,IAAI,GAAG,IAAIzG,GAAK1lM,EAAEssM,GAAK,CAAC,EAAE,MAAMtsM,EAAEkmM,EAAIuE,GAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,CAAC,EAAE,OAAOzqM,EAAEmrM,GAAK,CAAC,EAAE,KAAKnrM,EAAEysM,GAAK,CAAC,EAAE,MAAMzsM,EAAEmrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG5F,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAM,CAAC,GAAG5D,EAAI,GAAGC,EAAI,GAAG,IAAI,GAAGuB,EAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,GAAGC,EAAI,GAAGvB,EAAI,IAAI,IAAI,IAAIwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAI,IAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,EAAI,IAAI,IAAI,IAAIC,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAImD,GAAI,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,GAAK,IAAIC,IAAMnpM,EAAEmrM,GAAK,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,GAAG5F,EAAI,GAAGC,EAAI,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,GAAGwB,EAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI8F,GAAK,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI9E,EAAI,IAAIC,EAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAI,GAAG,IAAIlD,EAAI,IAAIqH,IAAM/sM,EAAE+uM,GAAK,CAAC,EAAE,MAAM/uM,EAAEopM,GAAK,CAAC,EAAE,KAAKppM,EAAE6tM,GAAK,CAAC,EAAE,MAAM7tM,EAAEitM,GAAK,CAAC,EAAE,KAAKjtM,EAAEitM,GAAK,CAAC,EAAE,KAAKjtM,EAAEotM,GAAK,CAAC,EAAE,KAAKptM,EAAEotM,GAAK,CAAC,EAAE,MAAMptM,EAAEyuM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAGhF,GAAK,GAAG,KAAK,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAMzpM,EAAE4uM,GAAK,CAAC,EAAE,MAAM5uM,EAAE4uM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG3J,EAAI,GAAGA,EAAI,GAAGA,EAAI,IAAIA,EAAI,IAAIA,EAAI,IAAIA,EAAI,IAAIA,EAAI,GAAGQ,IAAMzlM,EAAE4uM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,OAAO5uM,EAAEgvM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,CAAC,EAAE,OAAO,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,IAAI,IAAI,IAAIvG,GAAI,IAAIC,GAAI,IAAIC,GAAI,IAAIC,IAAK5oM,EAAE4tM,GAAK,CAAC,EAAE,MAAM5tM,EAAE6tM,GAAK,CAAC,EAAE,KAAK7tM,EAAE+uM,GAAK,CAAC,EAAE,MAAM/uM,EAAEyuM,GAAK,CAAC,EAAE,KAAK,CAAC,GAAG,IAAI,GAAGhJ,GAAKzlM,EAAE4uM,GAAK,CAAC,EAAE,MAAM5uM,EAAEkmM,EAAI,CAAC,EAAE,MAAMlmM,EAAEgvM,GAAK,CAAC,EAAE,MAAMhvM,EAAEgvM,GAAK,CAAC,EAAE,MAAMhvM,EAAEolM,EAAIH,EAAI,CAAC,IAAI,GAAG,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAG,IAAI,IAAI,IAAI,GAAGQ,IAAMzlM,EAAEkuM,GAAK,CAAC,EAAE,KAAKluM,EAAE6uM,GAAK,CAAC,EAAE,MAAM7uM,EAAEivM,GAAK,CAAC,EAAE,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,EAAE,OAAOjvM,EAAEmrM,GAAK,CAAC,EAAE,MAAMnrM,EAAEmrM,GAAK,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE,MAAM,CAAC,IAAI,CAAC,EAAE,MAAMnrM,EAAEkmM,EAAIuE,GAAK,CAAC,IAAI,IAAI,IAAI,IAAI,IAAI,IAAI,GAAGyE,GAAK,IAAIA,KAAOlvM,EAAEivM,GAAK,CAAC,EAAE,MAAMjvM,EAAEyuM,GAAK,CAAC,EAAE,KAAKzuM,EAAEgvM,GAAK,CAAC,EAAE,MAAMhvM,EAAEwsM,GAAK,CAAC,EAAE,KAAKxsM,EAAEwsM,GAAK,CAAC,EAAE,OACpwmCuG,eAAgB,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,IAAI,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,MACpSz3M,WAAY,SAAqBe,EAAK+d,GAClC,IAAIA,EAAK44L,YAEF,CACH,IAAI73M,EAAQ,IAAIpB,MAAMsC,GAEtB,MADAlB,EAAMif,KAAOA,EACPjf,CACV,CALInD,KAAKu/D,MAAMl7D,EAMnB,EACA4I,MAAO,SAAeQ,GAClB,IAAIvE,EAAOlJ,KAAMW,EAAQ,CAAC,GAAiBs6M,EAAS,CAAC,MAAOC,EAAS,GAAIvwG,EAAQ3qG,KAAK2qG,MAAO6sG,EAAS,GAAIE,EAAW,EAAGD,EAAS,EAAG0D,EAAa,EAC7I12M,EAAOy2M,EAAO12M,MAAMmE,KAAK+Z,UAAW,GACpCynG,EAAQ/oH,OAAO2G,OAAO/H,KAAKmqH,OAC3BixF,EAAc,CAAEjE,GAAI,CAAC,GACzB,IAAK,IAAIp0M,KAAK/C,KAAKm3M,GACX/1M,OAAOM,UAAUgH,eAAeC,KAAK3I,KAAKm3M,GAAIp0M,KAC9Cq4M,EAAYjE,GAAGp0M,GAAK/C,KAAKm3M,GAAGp0M,IAGpConH,EAAMkxF,SAAS5tM,EAAO2tM,EAAYjE,IAClCiE,EAAYjE,GAAGhtF,MAAQA,EACvBixF,EAAYjE,GAAGzjM,OAAS1T,UACG,IAAhBmqH,EAAMmxF,SACbnxF,EAAMmxF,OAAS,CAAC,GAEpB,IAAIC,EAAQpxF,EAAMmxF,OAClBJ,EAAO33M,KAAKg4M,GACZ,IAaYl4M,EAbRm4M,EAASrxF,EAAMrjH,SAAWqjH,EAAMrjH,QAAQ00M,OACH,mBAA9BJ,EAAYjE,GAAG7zM,WACtBtD,KAAKsD,WAAa83M,EAAYjE,GAAG7zM,WAEjCtD,KAAKsD,WAAalC,OAAOusG,eAAe3tG,MAAMsD,WAiBlD,IATI,IAQAm4M,EAAQC,EAAgB96M,EAAOmnB,EAAW8sE,EAAepsF,EAAG4qF,EAAKsoH,EAAUpnB,EAA9BqnB,EAAQ,CAAC,IAC7C,CAUG,GATZh7M,EAAQD,EAAMA,EAAMY,OAAS,GACzBvB,KAAK+6M,eAAen6M,GACpBmnB,EAAS/nB,KAAK+6M,eAAen6M,IAEzB66M,UAbAp4M,SAEiB,iBADrBA,EAAQ8mH,EAAM0xF,OA/BgJ,KAiC1Jx4M,EAAQ6F,EAAKkuM,SAAS/zM,IAAUA,GAWhCo4M,EATGp4M,GAWP0kB,EAAS4iF,EAAM/pG,IAAU+pG,EAAM/pG,GAAO66M,SAER,IAAX1zL,IAA2BA,EAAOxmB,SAAWwmB,EAAO,GAAI,CACvE,IAAI+zL,EAEJ,IAAKrzM,KADL8rL,EAAW,GACD5pF,EAAM/pG,GACRZ,KAAKq3M,WAAW5uM,IAAMA,EApDmH,GAqDzI8rL,EAAShxL,KAAK,IAAOvD,KAAKq3M,WAAW5uM,GAAK,KAI9CqzM,EADA3xF,EAAM4xF,aACG,wBAA0BrE,EAAW,GAAK,MAAQvtF,EAAM4xF,eAAiB,eAAiBxnB,EAASlvL,KAAK,MAAQ,WAAcrF,KAAKq3M,WAAWoE,IAAWA,GAAU,IAEnK,wBAA0B/D,EAAW,GAAK,iBA3DmG,GA2DhF+D,EAAgB,eAAiB,KAAQz7M,KAAKq3M,WAAWoE,IAAWA,GAAU,KAExJz7M,KAAKsD,WAAWw4M,EAAQ,CACpBl4M,KAAMumH,EAAMnmH,MACZX,MAAOrD,KAAKq3M,WAAWoE,IAAWA,EAClC/rM,KAAMy6G,EAAMutF,SACZ/3F,IAAK47F,EACLhnB,SAAUA,GAElB,CACJ,GAAIxsK,EAAO,aAAcpd,OAASod,EAAOxmB,OAAS,EAC9C,MAAM,IAAIQ,MAAM,oDAAsDnB,EAAQ,YAAc66M,GAEhG,OAAQ1zL,EAAO,IACf,KAAK,EACDpnB,EAAM4C,KAAKk4M,GACXR,EAAO13M,KAAK4mH,EAAMqtF,QAClB0D,EAAO33M,KAAK4mH,EAAMmxF,QAClB36M,EAAM4C,KAAKwkB,EAAO,IAClB0zL,EAAS,KACJC,GASDD,EAASC,EACTA,EAAiB,OATjBjE,EAASttF,EAAMstF,OACfD,EAASrtF,EAAMqtF,OACfE,EAAWvtF,EAAMutF,SACjB6D,EAAQpxF,EAAMmxF,OACVH,EAAa,GACbA,KAMR,MACJ,KAAK,EAwBD,GAvBA9nH,EAAMrzF,KAAKs3M,aAAavvL,EAAO,IAAI,GACnC6zL,EAAMzD,EAAI8C,EAAOA,EAAO15M,OAAS8xF,GACjCuoH,EAAM/D,GAAK,CACPmE,WAAYd,EAAOA,EAAO35M,QAAU8xF,GAAO,IAAI2oH,WAC/CC,UAAWf,EAAOA,EAAO35M,OAAS,GAAG06M,UACrCC,aAAchB,EAAOA,EAAO35M,QAAU8xF,GAAO,IAAI6oH,aACjDC,YAAajB,EAAOA,EAAO35M,OAAS,GAAG46M,aAEvCX,IACAI,EAAM/D,GAAGr7H,MAAQ,CACb0+H,EAAOA,EAAO35M,QAAU8xF,GAAO,IAAI7W,MAAM,GACzC0+H,EAAOA,EAAO35M,OAAS,GAAGi7E,MAAM,UAYvB,KATjBqY,EAAI70F,KAAKu3M,cAAchxM,MAAMq1M,EAAO,CAChCpE,EACAC,EACAC,EACA0D,EAAYjE,GACZpvL,EAAO,GACPkzL,EACAC,GACFr3K,OAAOp/B,KAEL,OAAOowF,EAEPxB,IACA1yF,EAAQA,EAAM6D,MAAM,GAAI,EAAI6uF,EAAM,GAClC4nH,EAASA,EAAOz2M,MAAM,GAAI,EAAI6uF,GAC9B6nH,EAASA,EAAO12M,MAAM,GAAI,EAAI6uF,IAElC1yF,EAAM4C,KAAKvD,KAAKs3M,aAAavvL,EAAO,IAAI,IACxCkzL,EAAO13M,KAAKq4M,EAAMzD,GAClB+C,EAAO33M,KAAKq4M,EAAM/D,IAClB8D,EAAWhxG,EAAMhqG,EAAMA,EAAMY,OAAS,IAAIZ,EAAMA,EAAMY,OAAS,IAC/DZ,EAAM4C,KAAKo4M,GACX,MACJ,KAAK,EACD,OAAO,EAEf,CACA,OAAO,CACX,GAMMra,GAAW,WAGX5rC,GAAM,8CACN5B,GAAY4B,GAAM,OAClByJ,GAAYzJ,GAAM,QAClB2J,GAAY3J,GAAM,OAClBoI,GAAYpI,GAAM,MAClBJ,GAAM,oCACNrqF,GAAeqqF,GAAM,UACrBnqF,GAAemqF,GAAM,UACrBjqF,GAAeiqF,GAAM,SACrB3pF,GAAe2pF,GAAM,UAErBxiH,GAAO,GAAIspK,GAAW,GAAIC,GAAW,GAGzC,SAASlxD,GAAU/qJ,GACjB,OAAOA,EAAOkF,aAChB,CAGA,SAASk0M,GAASr5L,EAAOgC,GACvB,OAAOhC,EAAM5c,KAAK4e,GAAOhC,CAC3B,CAGA,SAAS84L,GAAY94L,EAAO9V,GAC1B,OAAO8V,EAAM5c,KAAKgD,MAAM4Z,EAAO9V,GAAQ8V,CACzC,CAGA,SAASi4C,GAAOtlB,GACTA,IAAMA,EAAO,CAAC,GACnB,IAAK,IAAiC9W,EAA7B36B,EAAI,EAAGC,EAAIohB,UAAUnhB,OAAaF,EAAIC,IAAM06B,EAAMtZ,UAAUrhB,IAAM,CAAC,GAAIA,IAC9E,IAAK,IAAI2I,KAAQgyB,EACf8W,EAAK9oC,GAAQgyB,EAAIhyB,GACrB,OAAO8oC,CACT,CAGA,SAAS6mK,KAEP,IADA,IAAI56D,EAAQ,GACH19I,EAAI,EAAGC,EAAIohB,UAAUnhB,OAAQF,EAAIC,EAAGD,IAC3C09I,EAAQA,EAAMl7G,OAAOt9B,MAAMw4I,EAAOr8H,UAAUrhB,IAC9C,OAAO09I,CACT,CAGA,SAASq5D,GAAWt2K,GAKlB,GAHe,MAAXA,EAAI,KACNA,EAAMA,EAAI61D,UAAU,EAAG71D,EAAIvgC,OAAS,IAElC,YAAY0I,KAAK63B,GACnB,OAAOA,EACT,IAAK/hC,GAAO+yC,KACV,MAAM,IAAI/wC,MAAM,+BAAiC+/B,EAAM,iCAMzD,OALIgR,KAAS/yC,GAAO+yC,OAClBA,GAAO/yC,GAAO+yC,KACdspK,GAAWtpK,GAAK5kC,QAAQ,WAAY,IACpCmuM,GAAWvpK,GAAK9uC,MAAM,0BAA0B,IAE1C89B,EAAI,IAEZ,UAAK3hC,EACH,OAAO2yC,GAET,IAAK,IACH,OAAOA,GAAOhR,EAEhB,IAAK,IACH,OAAOgR,GAAK5kC,QAAQ,aAAc4zB,GAEpC,IAAK,IACH,OAAOu6K,GAAWv6K,EAEpB,QACE,OAAOs6K,GAAWt6K,EAEtB,CAGA,SAASw3K,GAAM7uL,GACb,GAAIA,EAAU,CACZ,IAAIwuB,EAAQxuB,EAAS,GACrB,GAAc,MAAVwuB,GAA2B,MAAVA,EAAe,OAAOl5C,GAAOg1B,QAAQtK,SAASA,EAAS+1D,OAAO,GACrF,CACA,OAAO/1D,CACT,CAGA,SAASN,GAAUmyL,EAAc73M,GAC/B,MAAO,CAAEiI,KAAM,YAAas+B,SAAUsxK,EAAc73M,KAAMA,GAAQ,GACpE,CAGA,SAAS42B,GAAWkP,EAAMzsB,GACxB,IAAIud,EAAa,CAAEA,WAAqB,MAATkP,EAAc,IAAI+2J,GAAa/2J,GAC9D,GAAIzsB,EACF,IAAK,IAAI62E,KAAK72E,EACZud,EAAWs5D,GAAK72E,EAAK62E,GACzB,OAAOt5D,CACT,CAGA,SAAS/Q,GAAK5d,EAAMrC,GAClB,MAAO,CAAEqC,KAAM,OAAQ44L,SAAU54L,EAAMrC,MAAOA,EAChD,CAGA,SAASkwM,GAAoBgC,EAAmBC,GAC9C,IAAK,IAAqCr6L,EAAjC9gB,EAAI,EAAGC,EAAIk7M,EAAcj7M,OAAcF,EAAIC,IAAM6gB,EAAOq6L,EAAcn7M,IAAKA,IAClFk7M,EAAoBpyL,GAAUhI,EAAK,GAAI,CAACo6L,EAAmBp6L,EAAK,KAClE,OAAOo6L,CACT,CAGA,SAASlE,GAAcoE,EAAaC,GAClC,IAAuDC,EAAnDC,EAAW,GAAIt1K,EAAQ,GAAIhmC,EAAIm7M,EAAYl7M,OAAoB0nC,EAAQ,CAAC,EAC5E,IAAK3nC,EACH,OAAO,KACT,IAAK,IAAID,EAAI,EAAGA,EAAIC,IAAMq7M,EAAaF,EAAYp7M,IAAKA,KACrDs7M,EAAWr1K,MAAQA,EAAQs1K,GAAUr5M,KAAKo5M,EAAW76K,KAExD,OADAmH,EAAMyzK,GAAa,QAAU,CAAEr1K,QAASu1K,EAAUt1K,MAAOA,GAClD2B,CACT,CAGA,SAASowK,GAAMj5M,GACb,OAAO8C,SAAS9C,EAAQ,GAC1B,CAGA,SAAS45M,GAAc/wK,GACrB,MAAsB,UAAfA,EAAMv8B,MAA8C,IAA1Bu8B,EAAMzO,SAASj5B,OAAe0nC,EAAMzO,SAAS,GAAKyO,CACrF,CAGA,SAASwxK,GAAmBv6M,EAAOwM,GAIjC,OAHIA,GAA0B,cAAlBA,EAAKsgB,WACftgB,EAAO3M,GAAOg1B,QAAQrB,UAAUhnB,IAE3B3M,GAAOg1B,QAAQ4jB,QAAQz4C,EAAOwM,EACvC,CAOA,SAASouM,GAAavwL,EAASH,EAAWI,GAGxC,KAAM,aAAcJ,GAClB,MAAM,IAAIroB,MAAM,uCAGlB,OAAOhC,GAAOg1B,QAAQlB,KAAKtJ,EAASH,EAAWI,EACjD,CAGA,SAAS80D,GAAO/0D,EAASH,EAAWI,EAAQqyL,GAC1C,IAAIv9H,EAAS,CAAC,EAKd,OAJmB,MAAf/0D,IAAqB+0D,EAAO/0D,QAAcA,GAC3B,MAAfH,IAAqBk1D,EAAOl1D,UAAcA,GAC3B,MAAfI,IAAqB80D,EAAO90D,OAAcA,GAC3B,MAAfqyL,IAAqBv9H,EAAOu9H,YAAcA,GACvCv9H,CACT,CAGA,SAAShzC,GAAMtiC,GACb,MAAoB,iBAATA,EACLA,EAAKkqB,WAAW,MAAcn0B,GAAOg1B,QAAQV,UAAUrqB,GACpDjK,GAAOg1B,QAAQV,UAAU,KAAOrqB,GAElCjK,GAAOg1B,QAAQV,UAAU,KAAOyoL,KACzC,CACA,IAAIA,GAAU,EACd/8M,GAAO+oM,aAAe,WAAcgU,GAAU,CAAG,EAGjD,IAAI1mD,GAAiB,iDACjBC,GAAqB,CAAE,KAAM,KAAM,IAAK,IAAK,IAAK,IAC3B,EAAK,KAAM,EAAK,KAAM,EAAK,KAAM,EAAK,KAAM,EAAK,MACxE0mD,GAAmC,sCACnC56M,GAAeD,OAAOC,aAG1B,SAASu4M,GAAet6M,EAAQ48M,GAC9B58M,EAASA,EAAOu3F,UAAUqlH,EAAY58M,EAAOmB,OAASy7M,GACtD,IACE58M,EAASA,EAAO8N,QAAQkoJ,IAAgB,SAAU8C,EAAUC,EAAUC,EAAUC,GAC9E,IAAInuC,EACJ,GAAIiuC,EAAU,CAEZ,GADAjuC,EAAWhoH,SAASi2J,EAAU,IAC1Bp1J,MAAMmnH,GAAW,MAAM,IAAInpH,MAC/B,OAAOI,GAAa+oH,EACtB,CACK,GAAIkuC,EAAU,CAEjB,GADAluC,EAAWhoH,SAASk2J,EAAU,IAC1Br1J,MAAMmnH,GAAW,MAAM,IAAInpH,MAC/B,OAAImpH,EAAW,MAAe/oH,GAAa+oH,GACpC/oH,GAAa,QAAW+oH,GAAY,QAAY,IAAK,OAAqB,KAAXA,GACxE,CAEE,IAAIruC,EAAcw5E,GAAmBgD,GACrC,IAAKx8E,EAAa,MAAM,IAAI96E,MAC5B,OAAO86E,CAEX,GACF,CACA,MAAO15E,GAAS,MAAO,EAAI,CAG3B,GAAI45M,GAAiCn0H,KAAKxoF,GACxC,MAAM,IAAI2B,MAAM,kFAAoF3B,GAGtG,OAAOA,CACT,CA0BA,SAAS85M,GAAoB9vL,EAAW6yL,EAAYC,GAClD,IAAIhvL,EAAU,GAAI22B,EAAU,GAU5B,OATAo4J,EAAWvyM,SAAQ,SAAUpJ,GAC3B,IAAI64M,EAAa,KACb74M,EAAE64M,aACJA,EAAa74M,EAAE64M,WACf74M,EAAIA,EAAEkpB,QAER0D,EAAQ3qB,KAAK+7E,GAAO,KAAMl1D,EAAW9oB,EAAE2X,OAAQkhM,IAC/ClB,GAAYp0J,EAASvjD,EAAEujD,QACzB,IACO80J,GAASzrL,EAASgvL,GAAgB,GAAIr4J,EAC/C,CA6BA,SAAS4zJ,GAAgBp9K,GACvB,OAAOA,EAAW5Q,SAAW4Q,EAAW5Q,SAASvqB,MAAQm7B,EAAWn7B,OAASm7B,EAAWA,WAAWn7B,KACrG,CAGA,SAASo4M,GAA0Bj9K,GACjC,IAAKA,EACH,MAAO,GAET,GAAwB,cAApBA,EAAW3uB,KACb,MAAO,CAAC2uB,GACH,GAAwB,cAApBA,EAAW3uB,KAAsB,CAC1C,MAAMg7B,EAAa,GACnB,IAAK,MAAM1L,KAAOX,EAAW52B,KAC3BijC,EAAWnkC,QAAQ+0M,GAA0Bt8K,IAE/C,OAAO0L,CACT,CACA,MAAO,EACT,CAGA,SAASixK,GAA2Bt9K,GAClC,MAAMtY,EAAY,IAAIxE,IAChB4+L,EAAkB,SAAU5yK,GAC3BA,IACiB,aAAlBA,EAAKvd,SACPjK,EAAUtE,IAAI8rB,GACS,cAAdA,EAAK79B,MACd69B,EAAK9lC,KAAKiG,QAAQyyM,GAEtB,EAEA,OADAA,EAAgB9hL,GACTtY,CACT,CAGA,SAASkd,GAAQxyB,EAAOmmE,EAAQ,EAAGjzE,EAAQ,IACzC,IAAK,MAAMwhB,KAAQ1U,EACXmmE,EAAQ,GAAKzxD,aAAgBxX,MAC/Bs1B,GAAQ9d,EAAMyxD,EAAQ,EAAGjzE,GAEzBA,EAAM4C,KAAK4e,GAGjB,OAAOxhB,CACT,CAEA,SAAS2gK,GAAW9tI,GAClB,MAAyB,aAAlBA,EAAKxG,QACd,CAEA,SAAS6sL,GAAkC3qL,GACzC,GAAIA,EAAQ21B,QAAS,CACnB,MAAM+0J,EAAY,GAClB,IAAK,MAAMt6H,KAAUpwD,EAAQ21B,QACvBy8G,GAAWhiF,EAAO/0D,UAAUqvL,EAAUr2M,KAAK+7E,EAAO/0D,QAAQrqB,OAC1DohK,GAAWhiF,EAAOl1D,YAAYwvL,EAAUr2M,KAAK+7E,EAAOl1D,UAAUlqB,OAC9DohK,GAAWhiF,EAAO90D,SAASovL,EAAUr2M,KAAK+7E,EAAO90D,OAAOtqB,OAE9D,OAAO05M,CACT,CAAO,GAAI1qL,EAAQsL,SAAU,CAC3B,MAAMo/K,EAAY,GAClB,IAAK,MAAM1yK,KAAOhY,EAAQsL,SACxBo/K,EAAUr2M,QAAQs2M,GAAkC3yK,IAEtD,OAAO0yK,CACT,CACA,MAAO,EACT,CAcA,SAASG,GAAiB75M,GACxB,IAAKH,GAAO8yC,WACV,MAAM,IAAI9wC,MAAM,sCAElB,OAAO7B,CACT,CAEA,SAASk9M,GAAkB7yL,EAASsyL,EAAa5pH,GAC/C,IAAK,MAAMknH,KAAc0C,EAAa,CACpC,MAAMz/G,EAAI9d,GAIR,YAAa66H,EAAaA,EAAW5vL,QAAUA,EAC/C4vL,EAAW/vL,UACX+vL,EAAW3vL,QAGbyoE,EAAI1vF,KAAK65F,GAEL+8G,EAAW0C,aACbO,GAAkBtC,GAClBvwL,EACA4vL,EAAW/vL,UACX+vL,EAAW3vL,QACV2vL,EAAW0C,YAAa5pH,EAE7B,CACF,CAEA,SAASgnH,GAAiBp1J,GACxB,GAAI9kD,GAAO8yC,WAAY,CACrB,MAAMwqK,EAAa,GAYnB,OAVAx4J,EAAQn6C,SAAQ0yF,IACd,MAAMl4F,EAAIo6E,GAAO8d,EAAE7yE,QAAS6yE,EAAEhzE,UAAWgzE,EAAE5yE,QAE3C6yL,EAAW95M,KAAK2B,GAEZk4F,EAAEy/G,aACJO,GAAkBtC,GAAa19G,EAAE7yE,QAAS6yE,EAAEhzE,UAAWgzE,EAAE5yE,QAAS4yE,EAAEy/G,YAAaQ,EACnF,IAGKA,CACT,CACA,OAAOx4J,CACT,CASA,SAAS40J,GAAkB5+K,GACzB,IAAK,MAAM1Q,KAAa0Q,EAAY,CAClC,GAAuB,UAAnB1Q,EAAUzd,MAAgD,aAA5Byd,EAAUngB,KAAKgjB,SAC/C,MAAM,IAAIjrB,MAAM,sCAElB,GAAuB,QAAnBooB,EAAUzd,MAAqC,UAAnByd,EAAUzd,KACxC,IAAK,MAAM4yE,KAAUn1D,EAAU06B,QAC7B,GAAgC,aAA5By6B,EAAO/0D,QAAQyC,UACe,aAA9BsyD,EAAOl1D,UAAU4C,UACU,aAA3BsyD,EAAO90D,OAAOwC,SAChB,MAAM,IAAIjrB,MAAM,mCAIxB,CACA,OAAO84B,CACT,CAEA,SAAS6+K,GAAe7+K,GACtB,IAAK,MAAM1Q,KAAa0Q,EACtB,GAAuB,QAAnB1Q,EAAUzd,KACZ,IAAK,MAAM4yE,KAAUn1D,EAAU06B,QAC7B,GAAgC,cAA5By6B,EAAO/0D,QAAQyC,UACe,cAA9BsyD,EAAOl1D,UAAU4C,UACU,cAA3BsyD,EAAO90D,OAAOwC,SAChB,MAAM,IAAIjrB,MAAM,sCAKxB,OAAO84B,CACT,CAEF,IAAIsvF,GACQ,CAEZL,IAAI,EAEJxmH,WAAW,SAAoBe,EAAK+d,GAC5B,IAAIpiB,KAAKm3M,GAAGzjM,OAGR,MAAM,IAAI3R,MAAMsC,GAFhBrE,KAAKm3M,GAAGzjM,OAAOpQ,WAAWe,EAAK+d,EAIvC,EAGJi5L,SAAS,SAAU5tM,EAAO0pM,GAiBlB,OAhBAn3M,KAAKm3M,GAAKA,GAAMn3M,KAAKm3M,IAAM,CAAC,EAC5Bn3M,KAAKo4J,OAAS3qJ,EACdzN,KAAKs9M,MAAQt9M,KAAKu9M,WAAav9M,KAAKqG,MAAO,EAC3CrG,KAAK03M,SAAW13M,KAAKy3M,OAAS,EAC9Bz3M,KAAKw3M,OAASx3M,KAAKw9M,QAAUx9M,KAAKgE,MAAQ,GAC1ChE,KAAKy9M,eAAiB,CAAC,WACvBz9M,KAAKs7M,OAAS,CACVU,WAAY,EACZE,aAAc,EACdD,UAAW,EACXE,YAAa,GAEbn8M,KAAK8G,QAAQ00M,SACbx7M,KAAKs7M,OAAO9+H,MAAQ,CAAC,EAAE,IAE3Bx8E,KAAKgB,OAAS,EACPhB,IACX,EAGJyN,MAAM,WACE,IAAImzH,EAAK5gI,KAAKo4J,OAAO,GAkBrB,OAjBAp4J,KAAKw3M,QAAU52E,EACf5gI,KAAKy3M,SACLz3M,KAAKgB,SACLhB,KAAKgE,OAAS48H,EACd5gI,KAAKw9M,SAAW58E,EACJA,EAAG58H,MAAM,oBAEjBhE,KAAK03M,WACL13M,KAAKs7M,OAAOW,aAEZj8M,KAAKs7M,OAAOa,cAEZn8M,KAAK8G,QAAQ00M,QACbx7M,KAAKs7M,OAAO9+H,MAAM,KAGtBx8E,KAAKo4J,OAASp4J,KAAKo4J,OAAO5zJ,MAAM,GACzBo8H,CACX,EAGJ88E,MAAM,SAAU98E,GACR,IAAIvtC,EAAMutC,EAAGr/H,OACTs0C,EAAQ+qF,EAAG57H,MAAM,iBAErBhF,KAAKo4J,OAASx3B,EAAK5gI,KAAKo4J,OACxBp4J,KAAKw3M,OAASx3M,KAAKw3M,OAAOh3H,OAAO,EAAGxgF,KAAKw3M,OAAOj2M,OAAS8xF,GAEzDrzF,KAAKgB,QAAUqyF,EACf,IAAIsqH,EAAW39M,KAAKgE,MAAMgB,MAAM,iBAChChF,KAAKgE,MAAQhE,KAAKgE,MAAMw8E,OAAO,EAAGxgF,KAAKgE,MAAMzC,OAAS,GACtDvB,KAAKw9M,QAAUx9M,KAAKw9M,QAAQh9H,OAAO,EAAGxgF,KAAKw9M,QAAQj8M,OAAS,GAExDs0C,EAAMt0C,OAAS,IACfvB,KAAK03M,UAAY7hK,EAAMt0C,OAAS,GAEpC,IAAIszF,EAAI70F,KAAKs7M,OAAO9+H,MAgBpB,OAdAx8E,KAAKs7M,OAAS,CACVU,WAAYh8M,KAAKs7M,OAAOU,WACxBC,UAAWj8M,KAAK03M,SAAW,EAC3BwE,aAAcl8M,KAAKs7M,OAAOY,aAC1BC,YAAatmK,GACRA,EAAMt0C,SAAWo8M,EAASp8M,OAASvB,KAAKs7M,OAAOY,aAAe,GAC5DyB,EAASA,EAASp8M,OAASs0C,EAAMt0C,QAAQA,OAASs0C,EAAM,GAAGt0C,OAChEvB,KAAKs7M,OAAOY,aAAe7oH,GAG7BrzF,KAAK8G,QAAQ00M,SACbx7M,KAAKs7M,OAAO9+H,MAAQ,CAACqY,EAAE,GAAIA,EAAE,GAAK70F,KAAKy3M,OAASpkH,IAEpDrzF,KAAKy3M,OAASz3M,KAAKw3M,OAAOj2M,OACnBvB,IACX,EAGJ46F,KAAK,WAEG,OADA56F,KAAKs9M,OAAQ,EACNt9M,IACX,EAGJ+F,OAAO,WACC,OAAI/F,KAAK8G,QAAQ82M,iBACb59M,KAAKu9M,YAAa,EASfv9M,MAPIA,KAAKsD,WAAW,0BAA4BtD,KAAK03M,SAAW,GAAK,mIAAqI13M,KAAK+7M,eAAgB,CAC9Nn4M,KAAM,GACNP,MAAO,KACPqM,KAAM1P,KAAK03M,UAKvB,EAGJmG,KAAK,SAAUj7M,GACP5C,KAAK09M,MAAM19M,KAAKgE,MAAMQ,MAAM5B,GAChC,EAGJk7M,UAAU,WACF,IAAIC,EAAO/9M,KAAKw9M,QAAQh9H,OAAO,EAAGxgF,KAAKw9M,QAAQj8M,OAASvB,KAAKgE,MAAMzC,QACnE,OAAQw8M,EAAKx8M,OAAS,GAAK,MAAM,IAAMw8M,EAAKv9H,QAAQ,IAAItyE,QAAQ,MAAO,GAC3E,EAGJ8vM,cAAc,WACN,IAAI93M,EAAOlG,KAAKgE,MAIhB,OAHIkC,EAAK3E,OAAS,KACd2E,GAAQlG,KAAKo4J,OAAO53E,OAAO,EAAG,GAAGt6E,EAAK3E,UAElC2E,EAAKs6E,OAAO,EAAE,KAAOt6E,EAAK3E,OAAS,GAAK,MAAQ,KAAK2M,QAAQ,MAAO,GAChF,EAGJ6tM,aAAa,WACL,IAAIkC,EAAMj+M,KAAK89M,YACX3qM,EAAI,IAAIxI,MAAMszM,EAAI18M,OAAS,GAAG8D,KAAK,KACvC,OAAO44M,EAAMj+M,KAAKg+M,gBAAkB,KAAO7qM,EAAI,GACnD,EAGJ+qM,WAAW,SAASl6M,EAAOm6M,GACnB,IAAI96M,EACAwyC,EACAuoK,EAwDJ,GAtDIp+M,KAAK8G,QAAQ82M,kBAEbQ,EAAS,CACL1G,SAAU13M,KAAK03M,SACf4D,OAAQ,CACJU,WAAYh8M,KAAKs7M,OAAOU,WACxBC,UAAWj8M,KAAKi8M,UAChBC,aAAcl8M,KAAKs7M,OAAOY,aAC1BC,YAAan8M,KAAKs7M,OAAOa,aAE7B3E,OAAQx3M,KAAKw3M,OACbxzM,MAAOhE,KAAKgE,MACZyd,QAASzhB,KAAKyhB,QACd+7L,QAASx9M,KAAKw9M,QACd/F,OAAQz3M,KAAKy3M,OACbz2M,OAAQhB,KAAKgB,OACbs8M,MAAOt9M,KAAKs9M,MACZllD,OAAQp4J,KAAKo4J,OACb++C,GAAIn3M,KAAKm3M,GACTsG,eAAgBz9M,KAAKy9M,eAAej5M,MAAM,GAC1C6B,KAAMrG,KAAKqG,MAEXrG,KAAK8G,QAAQ00M,SACb4C,EAAO9C,OAAO9+H,MAAQx8E,KAAKs7M,OAAO9+H,MAAMh4E,MAAM,MAItDqxC,EAAQ7xC,EAAM,GAAGA,MAAM,sBAEnBhE,KAAK03M,UAAY7hK,EAAMt0C,QAE3BvB,KAAKs7M,OAAS,CACVU,WAAYh8M,KAAKs7M,OAAOW,UACxBA,UAAWj8M,KAAK03M,SAAW,EAC3BwE,aAAcl8M,KAAKs7M,OAAOa,YAC1BA,YAAatmK,EACAA,EAAMA,EAAMt0C,OAAS,GAAGA,OAASs0C,EAAMA,EAAMt0C,OAAS,GAAGyC,MAAM,UAAU,GAAGzC,OAC5EvB,KAAKs7M,OAAOa,YAAcn4M,EAAM,GAAGzC,QAEpDvB,KAAKw3M,QAAUxzM,EAAM,GACrBhE,KAAKgE,OAASA,EAAM,GACpBhE,KAAKyhB,QAAUzd,EACfhE,KAAKy3M,OAASz3M,KAAKw3M,OAAOj2M,OACtBvB,KAAK8G,QAAQ00M,SACbx7M,KAAKs7M,OAAO9+H,MAAQ,CAACx8E,KAAKgB,OAAQhB,KAAKgB,QAAUhB,KAAKy3M,SAE1Dz3M,KAAKs9M,OAAQ,EACbt9M,KAAKu9M,YAAa,EAClBv9M,KAAKo4J,OAASp4J,KAAKo4J,OAAO5zJ,MAAMR,EAAM,GAAGzC,QACzCvB,KAAKw9M,SAAWx5M,EAAM,GACtBX,EAAQrD,KAAKu3M,cAAc5uM,KAAK3I,KAAMA,KAAKm3M,GAAIn3M,KAAMm+M,EAAcn+M,KAAKy9M,eAAez9M,KAAKy9M,eAAel8M,OAAS,IAChHvB,KAAKqG,MAAQrG,KAAKo4J,SAClBp4J,KAAKqG,MAAO,GAEZhD,EACA,OAAOA,EACJ,GAAIrD,KAAKu9M,WAAY,CAExB,IAAK,IAAIx6M,KAAKq7M,EACVp+M,KAAK+C,GAAKq7M,EAAOr7M,GAErB,OAAO,CACX,CACA,OAAO,CACX,EAGJmD,KAAK,WACG,GAAIlG,KAAKqG,KACL,OAAOrG,KAAK8pH,IAMhB,IAAIzmH,EACAW,EACAq6M,EACAlgM,EAPCne,KAAKo4J,SACNp4J,KAAKqG,MAAO,GAOXrG,KAAKs9M,QACNt9M,KAAKw3M,OAAS,GACdx3M,KAAKgE,MAAQ,IAGjB,IADA,IAAIs6M,EAAQt+M,KAAKu+M,gBACRl9M,EAAI,EAAGA,EAAIi9M,EAAM/8M,OAAQF,IAE9B,IADAg9M,EAAYr+M,KAAKo4J,OAAOp0J,MAAMhE,KAAKs+M,MAAMA,EAAMj9M,SAC5B2C,GAASq6M,EAAU,GAAG98M,OAASyC,EAAM,GAAGzC,QAAS,CAGhE,GAFAyC,EAAQq6M,EACRlgM,EAAQ9c,EACJrB,KAAK8G,QAAQ82M,gBAAiB,CAE9B,IAAc,KADdv6M,EAAQrD,KAAKk+M,WAAWG,EAAWC,EAAMj9M,KAErC,OAAOgC,EACJ,GAAIrD,KAAKu9M,WAAY,CACxBv5M,GAAQ,EACR,QACJ,CAEI,OAAO,CAEf,CAAO,IAAKhE,KAAK8G,QAAQ03M,KACrB,KAER,CAEJ,OAAIx6M,GAEc,KADdX,EAAQrD,KAAKk+M,WAAWl6M,EAAOs6M,EAAMngM,MAE1B9a,EAKK,KAAhBrD,KAAKo4J,OACEp4J,KAAK8pH,IAEL9pH,KAAKsD,WAAW,0BAA4BtD,KAAK03M,SAAW,GAAK,yBAA2B13M,KAAK+7M,eAAgB,CACpHn4M,KAAM,GACNP,MAAO,KACPqM,KAAM1P,KAAK03M,UAGvB,EAGJmE,IAAI,WAEI,OADQ77M,KAAKkG,QAIFlG,KAAK67M,KAEpB,EAGJt2E,MAAM,SAAgBtkB,GACdjhH,KAAKy9M,eAAel6M,KAAK09G,EAC7B,EAGJw9F,SAAS,WAED,OADQz+M,KAAKy9M,eAAel8M,OAAS,EAC7B,EACGvB,KAAKy9M,eAAej6M,MAEpBxD,KAAKy9M,eAAe,EAEnC,EAGJc,cAAc,WACN,OAAIv+M,KAAKy9M,eAAel8M,QAAUvB,KAAKy9M,eAAez9M,KAAKy9M,eAAel8M,OAAS,GACxEvB,KAAK0+M,WAAW1+M,KAAKy9M,eAAez9M,KAAKy9M,eAAel8M,OAAS,IAAI+8M,MAErEt+M,KAAK0+M,WAAoB,QAAEJ,KAE1C,EAGJK,SAAS,SAAmB/7M,GAEpB,OADAA,EAAI5C,KAAKy9M,eAAel8M,OAAS,EAAIoD,KAAKm4E,IAAIl6E,GAAK,KAC1C,EACE5C,KAAKy9M,eAAe76M,GAEpB,SAEf,EAGJg8M,UAAU,SAAoB39F,GACtBjhH,KAAKulI,MAAMtkB,EACf,EAGJ49F,eAAe,WACP,OAAO7+M,KAAKy9M,eAAel8M,MAC/B,EACJuF,QAAS,CAAC,MAAO,EAAK,oBAAmB,GACzCywM,cAAe,SAAmBJ,EAAG2H,EAAIC,EAA0BC,GAEnE,OAAOD,GACP,KAAK,EACL,MACA,KAAK,EAAE,OAAO,GAEd,KAAK,EAAE,OAAO,GAEd,KAAK,EAAE,OAAO,GAEd,KAAK,EAAE,OAAO,IAEd,KAAK,EAAE,OAAO,IAEd,KAAK,EAAE,OAAO,GAEd,KAAK,EAAE,OAAO,GAEd,KAAK,EAAE,OAAO,GAEd,KAAK,EAAE,OAAO,GAEd,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,GAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAAO,IAEf,KAAK,GAAG,OAA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","sources":["webpack://Comunica/../../node_modules/@bergos/jsonparse/jsonparse.js","webpack://Comunica/../../node_modules/@jeswr/prefixcc/dist/fragment.js","webpack://Comunica/../../node_modules/@jeswr/prefixcc/dist/index.js","webpack://Comunica/../../node_modules/@jeswr/prefixcc/dist/lookup/fetchContext.js","webpack://Comunica/../../node_modules/@jeswr/prefixcc/dist/lookup/index.js","webpack://Comunica/../../node_modules/@jeswr/prefixcc/dist/lookup/lookupAllPrefixes.js","webpack://Comunica/../../node_modules/@jeswr/prefixcc/dist/lookup/lookupNamespace.js","webpack://Comunica/../../node_modules/@jeswr/prefixcc/dist/lookup/lookupPrefix.js","webpack://Comunica/../../node_modules/@jeswr/prefixcc/node_modules/cross-fetch/dist/browser-ponyfill.js","webpack://Comunica/../../node_modules/@rubensworks/saxes/saxes.js","webpack://Comunica/../../node_modules/@smessie/readable-web-to-node-stream/lib/index.js","webpack://Comunica/../../node_modules/abort-controller/browser.js","webpack://Comunica/../../node_modules/arrayify-stream/index.js","webpack://Comunica/../../node_modules/asyncjoin/index.js","webpack://Comunica/../../node_modules/asyncjoin/join/DynamicNestedLoopJoin.js","webpack://Comunica/../../node_modules/asyncjoin/join/HashJoin.js","webpack://Comunica/../../node_modules/asyncjoin/join/NestedLoopJoin.js","webpack://Comunica/../../node_modules/asyncjoin/join/SymmetricHashJoin.js","webpack://Comunica/../../node_modules/asyncjoin/util/MergeIterator.js","webpack://Comunica/./engine-default.js","webpack://Comunica/QueryEngine.ts","webpack://Comunica/index-browser.ts","webpack://Comunica/ActorAbstractMediaTyped.ts","webpack://Comunica/ActorAbstractMediaTypedFixed.ts","webpack://Comunica/index.ts","webpack://Comunica/ActorAbstractPath.ts","webpack://Comunica/PathVariableObjectIterator.ts","webpack://Comunica/ActorContextPreprocessConvertShortcuts.ts","webpack://Comunica/ActorContextPreprocessQuerySourceIdentify.ts","webpack://Comunica/ActorContextPreprocessQuerySourceSkolemize.ts","webpack://Comunica/QuerySourceSkolemized.ts","webpack://Comunica/utils.ts","webpack://Comunica/ActorContextPreprocessSetDefaults.ts","webpack://Comunica/ActorContextPreprocessSourceToDestination.ts","webpack://Comunica/ActorHashBindingsSha1.ts","webpack://Comunica/ActorInitQuery-browser.ts","webpack://Comunica/ActorInitQueryBase.ts","webpack://Comunica/QueryEngineBase.ts","webpack://Comunica/ActorOptimizeQueryOperationAssignSourcesExhaustive.ts","webpack://Comunica/ActorOptimizeQueryOperationBgpToJoin.ts","webpack://Comunica/ActorOptimizeQueryOperationDescribeToConstructsSubject.ts","webpack://Comunica/ActorOptimizeQueryOperationFilterPushdown.ts","webpack://Comunica/ActorOptimizeQueryOperationGroupSources.ts","webpack://Comunica/ActorOptimizeQueryOperationJoinBgp.ts","webpack://Comunica/ActorOptimizeQueryOperationJoinConnected.ts","webpack://Comunica/ActorOptimizeQueryOperationPruneEmptySourceOperations.ts","webpack://Comunica/ActorOptimizeQueryOperationRewriteAdd.ts","webpack://Comunica/ActorOptimizeQueryOperationRewriteCopy.ts","webpack://Comunica/ActorOptimizeQueryOperationRewriteMove.ts","webpack://Comunica/ActorQueryOperationAsk.ts","webpack://Comunica/ActorQueryOperationBgpJoin.ts","webpack://Comunica/ActorQueryOperationConstruct.ts","webpack://Comunica/BindingsToQuadsIterator.ts","webpack://Comunica/ActorQueryOperationDistinctHash.ts","webpack://Comunica/ActorQueryOperationExtend.ts","webpack://Comunica/ActorQueryOperationFilter.ts","webpack://Comunica/ActorQueryOperationFromQuad.ts","webpack://Comunica/ActorQueryOperationGroup.ts","webpack://Comunica/GroupsState.ts","webpack://Comunica/ActorQueryOperationJoin.ts","webpack://Comunica/ActorQueryOperationLeftJoin.ts","webpack://Comunica/ActorQueryOperationMinus.ts","webpack://Comunica/ActorQueryOperationNop.ts","webpack://Comunica/ActorQueryOperationOrderBy.ts","webpack://Comunica/SortIterator.ts","webpack://Comunica/ActorQueryOperationPathAlt.ts","webpack://Comunica/ActorQueryOperationPathInv.ts","webpack://Comunica/ActorQueryOperationPathLink.ts","webpack://Comunica/ActorQueryOperationPathNps.ts","webpack://Comunica/ActorQueryOperationPathOneOrMore.ts","webpack://Comunica/ActorQueryOperationPathSeq.ts","webpack://Comunica/ActorQueryOperationPathZeroOrMore.ts","webpack://Comunica/ActorQueryOperationPathZeroOrOne.ts","webpack://Comunica/ActorQueryOperationProject.ts","webpack://Comunica/ActorQueryOperationReducedHash.ts","webpack://Comunica/ActorQueryOperationService.ts","webpack://Comunica/ActorQueryOperationSlice.ts","webpack://Comunica/ActorQueryOperationSource.ts","webpack://Comunica/ActorQueryOperationUnion.ts","webpack://Comunica/ActorQueryOperationClear.ts","webpack://Comunica/ActorQueryOperationUpdateCompositeUpdate.ts","webpack://Comunica/ActorQueryOperationCreate.ts","webpack://Comunica/ActorQueryOperationUpdateDeleteInsert.ts","webpack://Comunica/ActorQueryOperationDrop.ts","webpack://Comunica/ActorQueryOperationLoad.ts","webpack://Comunica/ActorQueryOperationValues.ts","webpack://Comunica/ActorQueryParseGraphql.ts","webpack://Comunica/ActorQueryParseSparql.ts","webpack://Comunica/ActorQueryProcessExplainLogical.ts","webpack://Comunica/ActorQueryProcessExplainParsed.ts","webpack://Comunica/ActorQueryProcessExplainPhysical.ts","webpack://Comunica/MemoryPhysicalQueryPlanLogger.ts","webpack://Comunica/ActorQueryProcessSequential.ts","webpack://Comunica/ActorQueryResultSerializeJson.ts","webpack://Comunica/ActorQueryResultSerializeRdf.ts","webpack://Comunica/ActorQueryResultSerializeSimple.ts","webpack://Comunica/ActorQueryResultSerializeSparqlCsv.ts","webpack://Comunica/ActionObserverHttp.ts","webpack://Comunica/ActorQueryResultSerializeSparqlJson.ts","webpack://Comunica/ActorQueryResultSerializeSparqlTsv.ts","webpack://Comunica/ActorQueryResultSerializeSparqlXml.ts","webpack://Comunica/XmlSerializer.ts","webpack://Comunica/ActorQueryResultSerializeStats.ts","webpack://Comunica/ActorQueryResultSerializeTable.ts","webpack://Comunica/ActorQueryResultSerializeTree.ts","webpack://Comunica/ActorQuerySourceIdentifyHypermediaSparql.ts","webpack://Comunica/QuerySourceSparql.ts","webpack://Comunica/ActorQuerySourceIdentifyHypermedia.ts","webpack://Comunica/LinkedRdfSourcesAsyncRdfIterator.ts","webpack://Comunica/MediatedLinkedRdfSourcesAsyncRdfIterator.ts","webpack://Comunica/QuerySourceHypermedia.ts","webpack://Comunica/StreamingStoreMetadata.ts","webpack://Comunica/ActorQuerySourceIdentifyRdfJs.ts","webpack://Comunica/QuerySourceRdfJs.ts","webpack://Comunica/ActorRdfJoinEntriesSortCardinality.ts","webpack://Comunica/ActorRdfJoinHash.ts","webpack://Comunica/ActorRdfJoinMultiBindSource.ts","webpack://Comunica/ActorRdfJoinMultiBind.ts","webpack://Comunica/ActorRdfJoinMultiEmpty.ts","webpack://Comunica/ActorRdfJoinMultiSmallestFilterBindings.ts","webpack://Comunica/ActorRdfJoinMultiSmallest.ts","webpack://Comunica/ActorRdfJoinNestedLoop.ts","webpack://Comunica/ActorRdfJoinNone.ts","webpack://Comunica/ActorRdfJoinSingle.ts","webpack://Comunica/ActorRdfJoinSymmetricHash.ts","webpack://Comunica/ActorRdfJoinMinusHashUndef.ts","webpack://Comunica/BindingsIndex.ts","webpack://Comunica/ActorRdfJoinMinusHash.ts","webpack://Comunica/ActorRdfJoinOptionalBind.ts","webpack://Comunica/ActorRdfJoinOptionalNestedLoop.ts","webpack://Comunica/ActorRdfJoinSelectivityVariableCounting.ts","webpack://Comunica/ActorRdfMetadataAccumulateCanContainUndefs.ts","webpack://Comunica/ActorRdfMetadataAccumulateCardinality.ts","webpack://Comunica/ActorRdfMetadataAccumulatePageSize.ts","webpack://Comunica/ActorRdfMetadataAccumulateRequestTime.ts","webpack://Comunica/ActorRdfSerializeJsonLd.ts","webpack://Comunica/ActorRdfSerializeN3.ts","webpack://Comunica/ActorRdfSerializeShaclc.ts","webpack://Comunica/ActorRdfUpdateQuadsRdfJsStore.ts","webpack://Comunica/RdfJsQuadDestination.ts","webpack://Comunica/Bindings.ts","webpack://Comunica/BindingsFactory.ts","webpack://Comunica/bindingsToString.ts","webpack://Comunica/ActorContextPreprocess.ts","webpack://Comunica/ActorHashBindings.ts","webpack://Comunica/ActorHttpInvalidate.ts","webpack://Comunica/ActorHttpInvalidateListenable.ts","webpack://Comunica/ActorInit.ts","webpack://Comunica/ActorOptimizeQueryOperation.ts","webpack://Comunica/ActorQueryOperation.ts","webpack://Comunica/ActorQueryOperationTyped.ts","webpack://Comunica/ActorQueryOperationTypedMediated.ts","webpack://Comunica/BusQueryOperation.ts","webpack://Comunica/ClosableTransformIterator.ts","webpack://Comunica/ActorQueryParse.ts","webpack://Comunica/ActorQueryProcess.ts","webpack://Comunica/ActorQueryResultSerialize.ts","webpack://Comunica/ActorQueryResultSerializeFixedMediaTypes.ts","webpack://Comunica/ActorQuerySourceIdentify.ts","webpack://Comunica/Utils.ts","webpack://Comunica/ActorRdfJoinEntriesSort.ts","webpack://Comunica/ActorRdfJoinSelectivity.ts","webpack://Comunica/ActorRdfJoin.ts","webpack://Comunica/ChunkedIterator.ts","webpack://Comunica/instrumentIterator.ts","webpack://Comunica/ActorRdfMetadataAccumulate.ts","webpack://Comunica/ActorRdfSerialize.ts","webpack://Comunica/ActorRdfSerializeFixedMediaTypes.ts","webpack://Comunica/ActorRdfUpdateQuads.ts","webpack://Comunica/ActorRdfUpdateQuadsDestination.ts","webpack://Comunica/Keys.ts","webpack://Comunica/ActionContext.ts","webpack://Comunica/ActionObserver.ts","webpack://Comunica/Actor.ts","webpack://Comunica/Bus.ts","webpack://Comunica/BusIndexed.ts","webpack://Comunica/ContextEntries.ts","webpack://Comunica/Mediator.ts","webpack://Comunica/BlankNodeBindingsScoped.ts","webpack://Comunica/BlankNodeScoped.ts","webpack://Comunica/Aggregator.ts","webpack://Comunica/Average.ts","webpack://Comunica/Count.ts","webpack://Comunica/GroupConcat.ts","webpack://Comunica/Max.ts","webpack://Comunica/Min.ts","webpack://Comunica/Sample.ts","webpack://Comunica/Sum.ts","webpack://Comunica/WildcardCountAggregator.ts","webpack://Comunica/AggregateEvaluator.ts","webpack://Comunica/AsyncAggregateEvaluator.ts","webpack://Comunica/AsyncEvaluator.ts","webpack://Comunica/SyncEvaluator.ts","webpack://Comunica/AsyncRecursiveEvaluator.ts","webpack://Comunica/BaseAggregateEvaluator.ts","webpack://Comunica/BaseExpressionEvaluator.ts","webpack://Comunica/SyncRecursiveEvaluator.ts","webpack://Comunica/Aggregate.ts","webpack://Comunica/AsyncExtension.ts","webpack://Comunica/Existence.ts","webpack://Comunica/Expressions.ts","webpack://Comunica/Named.ts","webpack://Comunica/Operator.ts","webpack://Comunica/SpecialOperator.ts","webpack://Comunica/SyncExtension.ts","webpack://Comunica/Term.ts","webpack://Comunica/Variable.ts","webpack://Comunica/Core.ts","webpack://Comunica/Helpers.ts","webpack://Comunica/NamedFunctions.ts","webpack://Comunica/OverloadTree.ts","webpack://Comunica/RegularFunctions.ts","webpack://Comunica/SpecialFunctions.ts","webpack://Comunica/XPathFunctions.ts","webpack://Comunica/AlgebraTransformer.ts","webpack://Comunica/TermTransformer.ts","webpack://Comunica/Consts.ts","webpack://Comunica/DateTimeHelpers.ts","webpack://Comunica/Errors.ts","webpack://Comunica/Ordering.ts","webpack://Comunica/Parsing.ts","webpack://Comunica/Serialization.ts","webpack://Comunica/SpecAlgos.ts","webpack://Comunica/TypeHandling.ts","webpack://Comunica/LoggerVoid.ts","webpack://Comunica/MediatorAll.ts","webpack://Comunica/MediatorCombinePipeline.ts","webpack://Comunica/MediatorCombineUnion.ts","webpack://Comunica/MediatorJoinCoefficientsFixed.ts","webpack://Comunica/MediatorNumber.ts","webpack://Comunica/MediatorRace.ts","webpack://Comunica/MetadataValidationState.ts","webpack://Comunica/Logger.ts","webpack://Comunica/../../node_modules/base64-js/index.js","webpack://Comunica/../../node_modules/bignumber.js/bignumber.js","webpack://Comunica/../../node_modules/buffer/index.js","webpack://Comunica/../../node_modules/canonicalize/lib/canonicalize.js","webpack://Comunica/../../node_modules/event-emitter-promisify/dist/index.js","webpack://Comunica/../../node_modules/events/events.js","webpack://Comunica/../../node_modules/fast-deep-equal/es6/index.js","webpack://Comunica/../../node_modules/fetch-sparql-endpoint/index.js","webpack://Comunica/../../node_modules/fetch-sparql-endpoint/lib/SparqlEndpointFetcher.js","webpack://Comunica/../../node_modules/fetch-sparql-endpoint/node_modules/cross-fetch/dist/browser-polyfill.js","webpack://Comunica/../../node_modules/graphql-to-sparql/index.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/Converter.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/IConvertContext.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/IConvertSettings.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/Util.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/NodeHandlerAdapter.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/NodeHandlerDefinitionAdapter.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/NodeHandlerDefinitionFragment.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/NodeHandlerDefinitionOperation.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/NodeHandlerDocument.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/NodeHandlerSelectionAdapter.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/NodeHandlerSelectionField.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/NodeHandlerSelectionFragmentSpread.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/NodeHandlerSelectionInlineFragment.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/directivenode/DirectiveNodeHandlerAdapter.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/directivenode/DirectiveNodeHandlerInclude.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/directivenode/DirectiveNodeHandlerOptional.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/directivenode/DirectiveNodeHandlerPlural.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/directivenode/DirectiveNodeHandlerSingle.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/directivenode/DirectiveNodeHandlerSkip.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/directivenode/index.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/index.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/NodeValueHandlerAdapter.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/NodeValueHandlerBoolean.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/NodeValueHandlerEnum.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/NodeValueHandlerFloat.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/NodeValueHandlerInt.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/NodeValueHandlerList.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/NodeValueHandlerNull.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/NodeValueHandlerObject.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/NodeValueHandlerString.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/NodeValueHandlerVariable.js","webpack://Comunica/../../node_modules/graphql-to-sparql/lib/handler/valuenode/index.js","webpack://Comunica/../../node_modules/graphql/error/GraphQLError.js","webpack://Comunica/../../node_modules/graphql/error/syntaxError.js","webpack://Comunica/../../node_modules/graphql/jsutils/defineInspect.js","webpack://Comunica/../../node_modules/graphql/jsutils/devAssert.js","webpack://Comunica/../../node_modules/graphql/jsutils/inspect.js","webpack://Comunica/../../node_modules/graphql/jsutils/instanceOf.js","webpack://Comunica/../../node_modules/graphql/jsutils/invariant.js","webpack://Comunica/../../node_modules/graphql/jsutils/isObjectLike.js","webpack://Comunica/../../node_modules/graphql/jsutils/nodejsCustomInspectSymbol.js","webpack://Comunica/../../node_modules/graphql/language/ast.js","webpack://Comunica/../../node_modules/graphql/language/blockString.js","webpack://Comunica/../../node_modules/graphql/language/directiveLocation.js","webpack://Comunica/../../node_modules/graphql/language/index.js","webpack://Comunica/../../node_modules/graphql/language/kinds.js","webpack://Comunica/../../node_modules/graphql/language/lexer.js","webpack://Comunica/../../node_modules/graphql/language/location.js","webpack://Comunica/../../node_modules/graphql/language/parser.js","webpack://Comunica/../../node_modules/graphql/language/predicates.js","webpack://Comunica/../../node_modules/graphql/language/printLocation.js","webpack://Comunica/../../node_modules/graphql/language/printer.js","webpack://Comunica/../../node_modules/graphql/language/source.js","webpack://Comunica/../../node_modules/graphql/language/tokenKind.js","webpack://Comunica/../../node_modules/graphql/language/visitor.js","webpack://Comunica/../../node_modules/graphql/polyfills/symbols.js","webpack://Comunica/../../node_modules/hash.js/lib/hash.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/common.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/hmac.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/ripemd.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/sha.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/sha/1.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/sha/224.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/sha/256.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/sha/384.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/sha/512.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/sha/common.js","webpack://Comunica/../../node_modules/hash.js/lib/hash/utils.js","webpack://Comunica/../../node_modules/http-link-header/lib/link.js","webpack://Comunica/../../node_modules/ieee754/index.js","webpack://Comunica/../../node_modules/immutable/dist/immutable.es.js","webpack://Comunica/../../node_modules/inherits/inherits_browser.js","webpack://Comunica/../../node_modules/is-stream/index.js","webpack://Comunica/../../node_modules/jsonld-context-parser/index.js","webpack://Comunica/../../node_modules/jsonld-context-parser/lib/ContextParser.js","webpack://Comunica/../../node_modules/jsonld-context-parser/lib/ErrorCoded.js","webpack://Comunica/../../node_modules/jsonld-context-parser/lib/FetchDocumentLoader.js","webpack://Comunica/../../node_modules/jsonld-context-parser/lib/IDocumentLoader.js","webpack://Comunica/../../node_modules/jsonld-context-parser/lib/JsonLdContext.js","webpack://Comunica/../../node_modules/jsonld-context-parser/lib/JsonLdContextNormalized.js","webpack://Comunica/../../node_modules/jsonld-context-parser/lib/Util.js","webpack://Comunica/../../node_modules/jsonld-context-parser/node_modules/cross-fetch/dist/browser-polyfill.js","webpack://Comunica/../../node_modules/jsonld-streaming-serializer/index.js","webpack://Comunica/../../node_modules/jsonld-streaming-serializer/lib/JsonLdSerializer.js","webpack://Comunica/../../node_modules/jsonld-streaming-serializer/lib/SeparatorType.js","webpack://Comunica/../../node_modules/jsonld-streaming-serializer/lib/Util.js","webpack://Comunica/../../node_modules/minimalistic-assert/index.js","webpack://Comunica/../../node_modules/n3/src/IRIs.js","webpack://Comunica/../../node_modules/n3/src/N3Lexer.js","webpack://Comunica/../../node_modules/n3/src/N3DataFactory.js","webpack://Comunica/../../node_modules/n3/src/N3Parser.js","webpack://Comunica/../../node_modules/n3/src/N3Util.js","webpack://Comunica/../../node_modules/n3/src/N3Writer.js","webpack://Comunica/../../node_modules/n3/src/N3Store.js","webpack://Comunica/../../node_modules/n3/src/N3StreamParser.js","webpack://Comunica/../../node_modules/n3/src/N3StreamWriter.js","webpack://Comunica/../../node_modules/n3/src/index.js","webpack://Comunica/../../node_modules/process/browser.js","webpack://Comunica/../../node_modules/promise-polyfill/Promise.js","webpack://Comunica/../../node_modules/queue-microtask/index.js","webpack://Comunica/../../node_modules/rdf-data-factory/index.js","webpack://Comunica/../../node_modules/rdf-data-factory/lib/BlankNode.js","webpack://Comunica/../../node_modules/rdf-data-factory/lib/DataFactory.js","webpack://Comunica/../../node_modules/rdf-data-factory/lib/DefaultGraph.js","webpack://Comunica/../../node_modules/rdf-data-factory/lib/Literal.js","webpack://Comunica/../../node_modules/rdf-data-factory/lib/NamedNode.js","webpack://Comunica/../../node_modules/rdf-data-factory/lib/Quad.js","webpack://Comunica/../../node_modules/rdf-data-factory/lib/Variable.js","webpack://Comunica/../../node_modules/rdf-isomorphic/index.js","webpack://Comunica/../../node_modules/rdf-isomorphic/lib/RdfIsomorphic.js","webpack://Comunica/../../node_modules/rdf-literal/index.js","webpack://Comunica/../../node_modules/rdf-literal/lib/ITypeHandler.js","webpack://Comunica/../../node_modules/rdf-literal/lib/Translator.js","webpack://Comunica/../../node_modules/rdf-literal/lib/handler/TypeHandlerBoolean.js","webpack://Comunica/../../node_modules/rdf-literal/lib/handler/TypeHandlerDate.js","webpack://Comunica/../../node_modules/rdf-literal/lib/handler/TypeHandlerNumberDouble.js","webpack://Comunica/../../node_modules/rdf-literal/lib/handler/TypeHandlerNumberInteger.js","webpack://Comunica/../../node_modules/rdf-literal/lib/handler/TypeHandlerString.js","webpack://Comunica/../../node_modules/rdf-literal/lib/handler/index.js","webpack://Comunica/../../node_modules/rdf-streaming-store/index.js","webpack://Comunica/../../node_modules/rdf-streaming-store/lib/PendingStreamsIndex.js","webpack://Comunica/../../node_modules/rdf-streaming-store/lib/StreamingStore.js","webpack://Comunica/../../node_modules/rdf-string-ttl/index.js","webpack://Comunica/../../node_modules/rdf-string-ttl/lib/TermUtil.js","webpack://Comunica/../../node_modules/rdf-string/index.js","webpack://Comunica/../../node_modules/rdf-string/lib/TermUtil.js","webpack://Comunica/../../node_modules/rdf-terms/index.js","webpack://Comunica/../../node_modules/rdf-terms/lib/QuadTermUtil.js","webpack://Comunica/../../node_modules/rdf-terms/lib/TermUtil.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/add-abort-signal.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/buffer_list.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/compose.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/destroy.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/duplex.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/duplexify.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/end-of-stream.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/from.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/legacy.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/operators.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/passthrough.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/pipeline.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/readable.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/state.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/transform.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/utils.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/streams/writable.js","webpack://Comunica/../../node_modules/readable-stream/lib/internal/validators.js","webpack://Comunica/../../node_modules/readable-stream/lib/ours/browser.js","webpack://Comunica/../../node_modules/readable-stream/lib/ours/errors.js","webpack://Comunica/../../node_modules/readable-stream/lib/ours/primordials.js","webpack://Comunica/../../node_modules/readable-stream/lib/ours/util.js","webpack://Comunica/../../node_modules/readable-stream/lib/stream.js","webpack://Comunica/../../node_modules/readable-stream/lib/stream/promises.js","webpack://Comunica/../../node_modules/relative-to-absolute-iri/index.js","webpack://Comunica/../../node_modules/relative-to-absolute-iri/lib/Resolve.js","webpack://Comunica/../../node_modules/safe-buffer/index.js","webpack://Comunica/../../node_modules/shaclc-write/dist/ShaclcGenerator.js","webpack://Comunica/../../node_modules/shaclc-write/dist/base-prefixes.js","webpack://Comunica/../../node_modules/shaclc-write/dist/index.js","webpack://Comunica/../../node_modules/shaclc-write/dist/node-param.js","webpack://Comunica/../../node_modules/shaclc-write/dist/property-param .js","webpack://Comunica/../../node_modules/shaclc-write/dist/utils.js","webpack://Comunica/../../node_modules/shaclc-write/dist/volatile-store.js","webpack://Comunica/../../node_modules/shaclc-write/dist/writer.js","webpack://Comunica/../../node_modules/spark-md5/spark-md5.js","webpack://Comunica/../../node_modules/sparqlalgebrajs/index.js","webpack://Comunica/../../node_modules/sparqlalgebrajs/lib/algebra.js","webpack://Comunica/../../node_modules/sparqlalgebrajs/lib/factory.js","webpack://Comunica/../../node_modules/sparqlalgebrajs/lib/sparql.js","webpack://Comunica/../../node_modules/sparqlalgebrajs/lib/sparqlAlgebra.js","webpack://Comunica/../../node_modules/sparqlalgebrajs/lib/util.js","webpack://Comunica/../../node_modules/sparqljs/lib/SparqlGenerator.js","webpack://Comunica/../../node_modules/sparqljs/lib/SparqlParser.js","webpack://Comunica/../../node_modules/sparqljs/lib/Wildcard.js","webpack://Comunica/../../node_modules/sparqljs/sparql.js","webpack://Comunica/../../node_modules/sparqljson-parse/index.js","webpack://Comunica/../../node_modules/sparqljson-parse/lib/SparqlJsonParser.js","webpack://Comunica/../../node_modules/sparqljson-to-tree/index.js","webpack://Comunica/../../node_modules/sparqljson-to-tree/lib/Converter.js","webpack://Comunica/../../node_modules/sparqlxml-parse/index.js","webpack://Comunica/../../node_modules/sparqlxml-parse/lib/SparqlXmlParser.js","webpack://Comunica/../../node_modules/stream-to-string/index.js","webpack://Comunica/../../node_modules/string_decoder/lib/string_decoder.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/index.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/md5.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/native.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/nil.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/parse.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/regex.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/rng.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/sha1.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/stringify.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/v1.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/v3.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/v35.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/v4.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/v5.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/validate.js","webpack://Comunica/../../node_modules/uuid/dist/commonjs-browser/version.js","webpack://Comunica/../../node_modules/xmlchars/xml/1.0/ed5.js","webpack://Comunica/../../node_modules/xmlchars/xml/1.1/ed2.js","webpack://Comunica/../../node_modules/xmlchars/xmlns/1.0/ed3.js","webpack://Comunica/../../node_modules/asynciterator/dist/asynciterator.js","webpack://Comunica/../../node_modules/asynciterator/dist/linkedlist.js","webpack://Comunica/../../node_modules/asynciterator/dist/taskscheduler.js","webpack://Comunica/../../node_modules/lru-cache/dist/commonjs/index.js","webpack://Comunica/webpack/bootstrap","webpack://Comunica/webpack/runtime/compat get default export","webpack://Comunica/webpack/runtime/define property getters","webpack://Comunica/webpack/runtime/global","webpack://Comunica/webpack/runtime/hasOwnProperty shorthand","webpack://Comunica/webpack/runtime/make namespace object","webpack://Comunica/webpack/startup"],"sourcesContent":["var { Buffer } = require('buffer')\n// Named constants with unique integer values\nvar C = {};\n// Tokens\nvar LEFT_BRACE    = C.LEFT_BRACE    = 0x1;\nvar RIGHT_BRACE   = C.RIGHT_BRACE   = 0x2;\nvar LEFT_BRACKET  = C.LEFT_BRACKET  = 0x3;\nvar RIGHT_BRACKET = C.RIGHT_BRACKET = 0x4;\nvar COLON         = C.COLON         = 0x5;\nvar COMMA         = C.COMMA         = 0x6;\nvar TRUE          = C.TRUE          = 0x7;\nvar FALSE         = C.FALSE         = 0x8;\nvar NULL          = C.NULL          = 0x9;\nvar STRING        = C.STRING        = 0xa;\nvar NUMBER        = C.NUMBER        = 0xb;\n// Tokenizer States\nvar START   = C.START   = 0x11;\nvar STOP    = C.STOP    = 0x12;\nvar TRUE1   = C.TRUE1   = 0x21;\nvar TRUE2   = C.TRUE2   = 0x22;\nvar TRUE3   = C.TRUE3   = 0x23;\nvar FALSE1  = C.FALSE1  = 0x31;\nvar FALSE2  = C.FALSE2  = 0x32;\nvar FALSE3  = C.FALSE3  = 0x33;\nvar FALSE4  = C.FALSE4  = 0x34;\nvar NULL1   = C.NULL1   = 0x41;\nvar NULL2   = C.NULL2   = 0x42;\nvar NULL3   = C.NULL3   = 0x43;\nvar NUMBER1 = C.NUMBER1 = 0x51;\nvar NUMBER3 = C.NUMBER3 = 0x53;\nvar STRING1 = C.STRING1 = 0x61;\nvar STRING2 = C.STRING2 = 0x62;\nvar STRING3 = C.STRING3 = 0x63;\nvar STRING4 = C.STRING4 = 0x64;\nvar STRING5 = C.STRING5 = 0x65;\nvar STRING6 = C.STRING6 = 0x66;\n// Parser States\nvar VALUE   = C.VALUE   = 0x71;\nvar KEY     = C.KEY     = 0x72;\n// Parser Modes\nvar OBJECT  = C.OBJECT  = 0x81;\nvar ARRAY   = C.ARRAY   = 0x82;\n// Character constants\nvar BACK_SLASH =      \"\\\\\".charCodeAt(0);\nvar FORWARD_SLASH =   \"\\/\".charCodeAt(0);\nvar BACKSPACE =       \"\\b\".charCodeAt(0);\nvar FORM_FEED =       \"\\f\".charCodeAt(0);\nvar NEWLINE =         \"\\n\".charCodeAt(0);\nvar CARRIAGE_RETURN = \"\\r\".charCodeAt(0);\nvar TAB =             \"\\t\".charCodeAt(0);\n\nvar STRING_BUFFER_SIZE = 64 * 1024;\n\nfunction alloc(size) {\n  return Buffer.alloc ? Buffer.alloc(size) : new Buffer(size);\n}\n\nfunction Parser() {\n  this.tState = START;\n  this.value = undefined;\n\n  this.string = undefined; // string data\n  this.stringBuffer = alloc(STRING_BUFFER_SIZE);\n  this.stringBufferOffset = 0;\n  this.unicode = undefined; // unicode escapes\n  this.highSurrogate = undefined;\n\n  this.key = undefined;\n  this.mode = undefined;\n  this.stack = [];\n  this.state = VALUE;\n  this.bytes_remaining = 0; // number of bytes remaining in multi byte utf8 char to read after split boundary\n  this.bytes_in_sequence = 0; // bytes in multi byte utf8 char to read\n  this.temp_buffs = { \"2\": alloc(2), \"3\": alloc(3), \"4\": alloc(4) }; // for rebuilding chars split before boundary is reached\n\n  // Stream offset\n  this.offset = -1;\n}\n\n// Slow code to string converter (only used when throwing syntax errors)\nParser.toknam = function (code) {\n  var keys = Object.keys(C);\n  for (var i = 0, l = keys.length; i < l; i++) {\n    var key = keys[i];\n    if (C[key] === code) { return key; }\n  }\n  return code && (\"0x\" + code.toString(16));\n};\n\nvar proto = Parser.prototype;\nproto.onError = function (err) { throw err; };\nproto.charError = function (buffer, i) {\n  this.tState = STOP;\n  this.onError(new Error(\"Unexpected \" + JSON.stringify(String.fromCharCode(buffer[i])) + \" at position \" + i + \" in state \" + Parser.toknam(this.tState)));\n};\nproto.appendStringChar = function (char) {\n  if (this.stringBufferOffset >= STRING_BUFFER_SIZE) {\n    this.string += this.stringBuffer.toString('utf8');\n    this.stringBufferOffset = 0;\n  }\n\n  this.stringBuffer[this.stringBufferOffset++] = char;\n};\nproto.appendStringBuf = function (buf, start, end) {\n  var size = buf.length;\n  if (typeof start === 'number') {\n    if (typeof end === 'number') {\n      if (end < 0) {\n        // adding a negative end decreeses the size\n        size = buf.length - start + end;\n      } else {\n        size = end - start;\n      }\n    } else {\n      size = buf.length - start;\n    }\n  }\n\n  if (size < 0) {\n    size = 0;\n  }\n\n  if (this.stringBufferOffset + size > STRING_BUFFER_SIZE) {\n    this.string += this.stringBuffer.toString('utf8', 0, this.stringBufferOffset);\n    this.stringBufferOffset = 0;\n  }\n\n  buf.copy(this.stringBuffer, this.stringBufferOffset, start, end);\n  this.stringBufferOffset += size;\n};\nproto.write = function (buffer) {\n  if (typeof buffer === \"string\") buffer = new Buffer(buffer);\n  var n;\n  for (var i = 0, l = buffer.length; i < l; i++) {\n    if (this.tState === START){\n      n = buffer[i];\n      this.offset++;\n      if(n === 0x7b){ this.onToken(LEFT_BRACE, \"{\"); // {\n      }else if(n === 0x7d){ this.onToken(RIGHT_BRACE, \"}\"); // }\n      }else if(n === 0x5b){ this.onToken(LEFT_BRACKET, \"[\"); // [\n      }else if(n === 0x5d){ this.onToken(RIGHT_BRACKET, \"]\"); // ]\n      }else if(n === 0x3a){ this.onToken(COLON, \":\");  // :\n      }else if(n === 0x2c){ this.onToken(COMMA, \",\"); // ,\n      }else if(n === 0x74){ this.tState = TRUE1;  // t\n      }else if(n === 0x66){ this.tState = FALSE1;  // f\n      }else if(n === 0x6e){ this.tState = NULL1; // n\n      }else if(n === 0x22){ // \"\n        this.string = \"\";\n        this.stringBufferOffset = 0;\n        this.tState = STRING1;\n      }else if(n === 0x2d){ this.string = \"-\"; this.tState = NUMBER1; // -\n      }else{\n        if (n >= 0x30 && n < 0x40) { // 1-9\n          this.string = String.fromCharCode(n); this.tState = NUMBER3;\n        } else if (n === 0x20 || n === 0x09 || n === 0x0a || n === 0x0d) {\n          // whitespace\n        } else {\n          return this.charError(buffer, i);\n        }\n      }\n    }else if (this.tState === STRING1){ // After open quote\n      n = buffer[i]; // get current byte from buffer\n      // check for carry over of a multi byte char split between data chunks\n      // & fill temp buffer it with start of this data chunk up to the boundary limit set in the last iteration\n      if (this.bytes_remaining > 0) {\n        for (var j = 0; j < this.bytes_remaining; j++) {\n          this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence - this.bytes_remaining + j] = buffer[j];\n        }\n\n        this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]);\n        this.bytes_in_sequence = this.bytes_remaining = 0;\n        i = i + j - 1;\n      } else if (this.bytes_remaining === 0 && n >= 128) { // else if no remainder bytes carried over, parse multi byte (>=128) chars one at a time\n        if (n <= 193 || n > 244) {\n          return this.onError(new Error(\"Invalid UTF-8 character at position \" + i + \" in state \" + Parser.toknam(this.tState)));\n        }\n        if ((n >= 194) && (n <= 223)) this.bytes_in_sequence = 2;\n        if ((n >= 224) && (n <= 239)) this.bytes_in_sequence = 3;\n        if ((n >= 240) && (n <= 244)) this.bytes_in_sequence = 4;\n        if ((this.bytes_in_sequence + i) > buffer.length) { // if bytes needed to complete char fall outside buffer length, we have a boundary split\n          for (var k = 0; k <= (buffer.length - 1 - i); k++) {\n            this.temp_buffs[this.bytes_in_sequence][k] = buffer[i + k]; // fill temp buffer of correct size with bytes available in this chunk\n          }\n          this.bytes_remaining = (i + this.bytes_in_sequence) - buffer.length;\n          i = buffer.length - 1;\n        } else {\n          this.appendStringBuf(buffer, i, i + this.bytes_in_sequence);\n          i = i + this.bytes_in_sequence - 1;\n        }\n      } else if (n === 0x22) {\n        this.tState = START;\n        this.string += this.stringBuffer.toString('utf8', 0, this.stringBufferOffset);\n        this.stringBufferOffset = 0;\n        this.onToken(STRING, this.string);\n        this.offset += Buffer.byteLength(this.string, 'utf8') + 1;\n        this.string = undefined;\n      }\n      else if (n === 0x5c) {\n        this.tState = STRING2;\n      }\n      else if (n >= 0x20) { this.appendStringChar(n); }\n      else {\n          return this.charError(buffer, i);\n      }\n    }else if (this.tState === STRING2){ // After backslash\n      n = buffer[i];\n      if(n === 0x22){ this.appendStringChar(n); this.tState = STRING1;\n      }else if(n === 0x5c){ this.appendStringChar(BACK_SLASH); this.tState = STRING1;\n      }else if(n === 0x2f){ this.appendStringChar(FORWARD_SLASH); this.tState = STRING1;\n      }else if(n === 0x62){ this.appendStringChar(BACKSPACE); this.tState = STRING1;\n      }else if(n === 0x66){ this.appendStringChar(FORM_FEED); this.tState = STRING1;\n      }else if(n === 0x6e){ this.appendStringChar(NEWLINE); this.tState = STRING1;\n      }else if(n === 0x72){ this.appendStringChar(CARRIAGE_RETURN); this.tState = STRING1;\n      }else if(n === 0x74){ this.appendStringChar(TAB); this.tState = STRING1;\n      }else if(n === 0x75){ this.unicode = \"\"; this.tState = STRING3;\n      }else{\n        return this.charError(buffer, i);\n      }\n    }else if (this.tState === STRING3 || this.tState === STRING4 || this.tState === STRING5 || this.tState === STRING6){ // unicode hex codes\n      n = buffer[i];\n      // 0-9 A-F a-f\n      if ((n >= 0x30 && n < 0x40) || (n > 0x40 && n <= 0x46) || (n > 0x60 && n <= 0x66)) {\n        this.unicode += String.fromCharCode(n);\n        if (this.tState++ === STRING6) {\n          var intVal = parseInt(this.unicode, 16);\n          this.unicode = undefined;\n          if (this.highSurrogate !== undefined && intVal >= 0xDC00 && intVal < (0xDFFF + 1)) { //<56320,57343> - lowSurrogate\n            this.appendStringBuf(new Buffer(String.fromCharCode(this.highSurrogate, intVal)));\n            this.highSurrogate = undefined;\n          } else if (this.highSurrogate === undefined && intVal >= 0xD800 && intVal < (0xDBFF + 1)) { //<55296,56319> - highSurrogate\n            this.highSurrogate = intVal;\n          } else {\n            if (this.highSurrogate !== undefined) {\n              this.appendStringBuf(new Buffer(String.fromCharCode(this.highSurrogate)));\n              this.highSurrogate = undefined;\n            }\n            this.appendStringBuf(new Buffer(String.fromCharCode(intVal)));\n          }\n          this.tState = STRING1;\n        }\n      } else {\n        return this.charError(buffer, i);\n      }\n    } else if (this.tState === NUMBER1 || this.tState === NUMBER3) {\n        n = buffer[i];\n\n        switch (n) {\n          case 0x30: // 0\n          case 0x31: // 1\n          case 0x32: // 2\n          case 0x33: // 3\n          case 0x34: // 4\n          case 0x35: // 5\n          case 0x36: // 6\n          case 0x37: // 7\n          case 0x38: // 8\n          case 0x39: // 9\n          case 0x2e: // .\n          case 0x65: // e\n          case 0x45: // E\n          case 0x2b: // +\n          case 0x2d: // -\n            this.string += String.fromCharCode(n);\n            this.tState = NUMBER3;\n            break;\n          default:\n            this.tState = START;\n            var error = this.numberReviver(this.string);\n            if (error){\n              return error;\n            }\n\n            this.offset += this.string.length - 1;\n            this.string = undefined;\n            i--;\n            break;\n        }\n    }else if (this.tState === TRUE1){ // r\n      if (buffer[i] === 0x72) { this.tState = TRUE2; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === TRUE2){ // u\n      if (buffer[i] === 0x75) { this.tState = TRUE3; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === TRUE3){ // e\n      if (buffer[i] === 0x65) { this.tState = START; this.onToken(TRUE, true); this.offset+= 3; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === FALSE1){ // a\n      if (buffer[i] === 0x61) { this.tState = FALSE2; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === FALSE2){ // l\n      if (buffer[i] === 0x6c) { this.tState = FALSE3; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === FALSE3){ // s\n      if (buffer[i] === 0x73) { this.tState = FALSE4; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === FALSE4){ // e\n      if (buffer[i] === 0x65) { this.tState = START; this.onToken(FALSE, false); this.offset+= 4; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === NULL1){ // u\n      if (buffer[i] === 0x75) { this.tState = NULL2; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === NULL2){ // l\n      if (buffer[i] === 0x6c) { this.tState = NULL3; }\n      else { return this.charError(buffer, i); }\n    }else if (this.tState === NULL3){ // l\n      if (buffer[i] === 0x6c) { this.tState = START; this.onToken(NULL, null); this.offset += 3; }\n      else { return this.charError(buffer, i); }\n    }\n  }\n};\nproto.onToken = function (token, value) {\n  // Override this to get events\n};\n\nproto.parseError = function (token, value) {\n  this.tState = STOP;\n  this.onError(new Error(\"Unexpected \" + Parser.toknam(token) + (value ? (\"(\" + JSON.stringify(value) + \")\") : \"\") + \" in state \" + Parser.toknam(this.state)));\n};\nproto.push = function () {\n  this.stack.push({value: this.value, key: this.key, mode: this.mode});\n};\nproto.pop = function () {\n  var value = this.value;\n  var parent = this.stack.pop();\n  this.value = parent.value;\n  this.key = parent.key;\n  this.mode = parent.mode;\n  this.emit(value);\n  if (!this.mode) { this.state = VALUE; }\n};\nproto.emit = function (value) {\n  if (this.mode) { this.state = COMMA; }\n  this.onValue(value);\n};\nproto.onValue = function (value) {\n  // Override me\n};\nproto.onToken = function (token, value) {\n  if(this.state === VALUE){\n    if(token === STRING || token === NUMBER || token === TRUE || token === FALSE || token === NULL){\n      if (this.value) {\n        this.value[this.key] = value;\n      }\n      this.emit(value);\n    }else if(token === LEFT_BRACE){\n      this.push();\n      if (this.value) {\n        this.value = this.value[this.key] = {};\n      } else {\n        this.value = {};\n      }\n      this.key = undefined;\n      this.state = KEY;\n      this.mode = OBJECT;\n    }else if(token === LEFT_BRACKET){\n      this.push();\n      if (this.value) {\n        this.value = this.value[this.key] = [];\n      } else {\n        this.value = [];\n      }\n      this.key = 0;\n      this.mode = ARRAY;\n      this.state = VALUE;\n    }else if(token === RIGHT_BRACE){\n      if (this.mode === OBJECT) {\n        this.pop();\n      } else {\n        return this.parseError(token, value);\n      }\n    }else if(token === RIGHT_BRACKET){\n      if (this.mode === ARRAY) {\n        this.pop();\n      } else {\n        return this.parseError(token, value);\n      }\n    }else{\n      return this.parseError(token, value);\n    }\n  }else if(this.state === KEY){\n    if (token === STRING) {\n      this.key = value;\n      this.state = COLON;\n    } else if (token === RIGHT_BRACE) {\n      this.pop();\n    } else {\n      return this.parseError(token, value);\n    }\n  }else if(this.state === COLON){\n    if (token === COLON) { this.state = VALUE; }\n    else { return this.parseError(token, value); }\n  }else if(this.state === COMMA){\n    if (token === COMMA) {\n      if (this.mode === ARRAY) { this.key++; this.state = VALUE; }\n      else if (this.mode === OBJECT) { this.state = KEY; }\n\n    } else if (token === RIGHT_BRACKET && this.mode === ARRAY || token === RIGHT_BRACE && this.mode === OBJECT) {\n      this.pop();\n    } else {\n      return this.parseError(token, value);\n    }\n  }else{\n    return this.parseError(token, value);\n  }\n};\n\n// Override to implement your own number reviver.\n// Any value returned is treated as error and will interrupt parsing.\nproto.numberReviver = function (text) {\n  var result = Number(text);\n\n  if (isNaN(result)) {\n    return this.charError(buffer, i);\n  }\n\n  if ((text.match(/[0-9]+/) == text) && (result.toString() != text)) {\n    // Long string of digits which is an ID string and not valid and/or safe JavaScript integer Number\n    this.onToken(STRING, text);\n  } else {\n    this.onToken(NUMBER, result);\n  }\n}\n\nParser.C = C;\n\nmodule.exports = Parser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fragment = void 0;\nfunction getFragment(inputStr) {\n    let str = inputStr;\n    if (str.endsWith('/') || str.endsWith('#')) {\n        str = str.slice(0, str.length - 1);\n    }\n    const args = [];\n    if (str.lastIndexOf('/') > 0) {\n        args.push(str.lastIndexOf('/'));\n    }\n    if (str.lastIndexOf('#') > 0) {\n        args.push(str.lastIndexOf('#'));\n    }\n    const i = Math.max(...args);\n    return str.slice(i + 1);\n}\nfunction camelize(str) {\n    var _a;\n    const res = (_a = str\n        .split(/[^a-z0-9]+/ig)\n        .filter((s) => s !== '')\n        .map((s) => s[0].toUpperCase() + s.slice(1))\n        .join('')\n        // Make sure the prefix does not start with a number\n        .match(/[a-z][a-z0-9]+/ig)) === null || _a === void 0 ? void 0 : _a[0];\n    // Include 'v' so we always return something matching the pattern\n    // [a-z][a-z0-9]+\n    return typeof res === 'undefined' ? undefined : res[0].toLowerCase() + res.slice(1);\n}\nfunction fragment(str) {\n    let value = getFragment(str);\n    value = value ? camelize(value) : undefined;\n    return value || 'v';\n}\nexports.fragment = fragment;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lookupAllPrefixes = exports.prefixToUri = exports.uriToPrefix = void 0;\nconst fragment_1 = require(\"./fragment\");\nconst lookup_1 = require(\"./lookup\");\nfunction uriToPrefix(uri, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let result;\n        // Collect the prefix\n        try {\n            result = yield (0, lookup_1.lookupPrefix)(uri, options);\n        }\n        catch (_a) {\n            if (options === null || options === void 0 ? void 0 : options.mintOnUnknown) {\n                // Keep prefixes at most 4 characters long when minting a new one\n                result = (0, fragment_1.fragment)(uri).slice(0, 4);\n            }\n        }\n        // If there is a bank of existing prefixes make sure to make a unique one\n        // by postfixing a number\n        if (typeof result !== 'undefined'\n            && typeof (options === null || options === void 0 ? void 0 : options.existingPrefixes) === 'object'\n            && result in options.existingPrefixes) {\n            let i = 0;\n            while (`${result}${i}` in options.existingPrefixes) {\n                i += 1;\n            }\n            result = `${result}${i}`;\n        }\n        return result;\n    });\n}\nexports.uriToPrefix = uriToPrefix;\n/**\n * Lookup the namespace commonly associated with a given prefix\n * @param prefix The prefix to lookup the namespace for\n * @param options You can optionally pass a custom fetch function\n */\nfunction prefixToUri(prefix, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            // The await needs to be here so that we can return undefined on rejection\n            return yield (0, lookup_1.lookupUri)(prefix, options);\n        }\n        catch (_a) {\n            return undefined;\n        }\n    });\n}\nexports.prefixToUri = prefixToUri;\nvar lookup_2 = require(\"./lookup\");\nObject.defineProperty(exports, \"lookupAllPrefixes\", { enumerable: true, get: function () { return lookup_2.lookupAllPrefixes; } });\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fetchContext = exports.fetchJson = void 0;\n// TODO: Use universal fetch here\nconst cross_fetch_1 = require(\"cross-fetch\");\nfunction fetchJson(url, options) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        // Select the correct fetch function\n        const fetchFn = (_a = options === null || options === void 0 ? void 0 : options.fetch) !== null && _a !== void 0 ? _a : cross_fetch_1.fetch;\n        return (yield fetchFn(url)).json();\n    });\n}\nexports.fetchJson = fetchJson;\nfunction fetchContext(url, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return (yield fetchJson(url, options))['@context'];\n    });\n}\nexports.fetchContext = fetchContext;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lookupNamespace\"), exports);\n__exportStar(require(\"./lookupPrefix\"), exports);\n__exportStar(require(\"./lookupAllPrefixes\"), exports);\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lookupAllPrefixes = void 0;\nconst fetchContext_1 = require(\"./fetchContext\");\n/**\n * Use prefix.cc to look up all recorded prefixes\n */\nfunction lookupAllPrefixes(options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return (0, fetchContext_1.fetchContext)('https://prefix.cc/context', options);\n    });\n}\nexports.lookupAllPrefixes = lookupAllPrefixes;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lookupUri = void 0;\nconst fetchContext_1 = require(\"./fetchContext\");\n/**\n * Use prefix.cc to look up the namespace associated with a given prefix.\n * Errors if one cannot be found.\n *\n * @param prefix The prefix of which to obtain the namespace\n * @param options Optional fetch function to use\n */\nfunction lookupUri(prefix, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const uri = (yield (0, fetchContext_1.fetchContext)(`https://prefix.cc/${prefix}.file.jsonld`, options))[prefix];\n        if (typeof uri !== 'string') {\n            throw new Error(`Expected uri to be a string, received: ${uri} of type ${typeof uri}`);\n        }\n        return uri;\n    });\n}\nexports.lookupUri = lookupUri;\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.lookupPrefix = void 0;\nconst fetchContext_1 = require(\"./fetchContext\");\n/**\n * Use prefix.cc to look up the prefix for a URI namespace, rejects if there is an error in\n * looking up the prefix, or if no prefixes are returned\n *\n * @param uri The URI to obtain a prefix for\n * @param options Optional fetch function to use\n */\nfunction lookupPrefix(uri, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // Create the correct url to lookup including search parameters\n        const url = new URL('https://prefix.cc/reverse');\n        url.searchParams.append('uri', uri);\n        url.searchParams.append('format', 'jsonld');\n        const prefixes = Object.keys(yield (0, fetchContext_1.fetchContext)(url, options));\n        if (prefixes.length === 0) {\n            throw new Error('No prefixes returned');\n        }\n        return prefixes[0];\n    });\n}\nexports.lookupPrefix = lookupPrefix;\n","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SaxesParser = exports.EVENTS = void 0;\nconst ed5 = require(\"xmlchars/xml/1.0/ed5\");\nconst ed2 = require(\"xmlchars/xml/1.1/ed2\");\nconst NSed3 = require(\"xmlchars/xmlns/1.0/ed3\");\nvar isS = ed5.isS;\nvar isChar10 = ed5.isChar;\nvar isNameStartChar = ed5.isNameStartChar;\nvar isNameChar = ed5.isNameChar;\nvar S_LIST = ed5.S_LIST;\nvar NAME_RE = ed5.NAME_RE;\nvar isChar11 = ed2.isChar;\nvar isNCNameStartChar = NSed3.isNCNameStartChar;\nvar isNCNameChar = NSed3.isNCNameChar;\nvar NC_NAME_RE = NSed3.NC_NAME_RE;\nconst XML_NAMESPACE = \"http://www.w3.org/XML/1998/namespace\";\nconst XMLNS_NAMESPACE = \"http://www.w3.org/2000/xmlns/\";\nconst rootNS = {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-assignment\n    __proto__: null,\n    xml: XML_NAMESPACE,\n    xmlns: XMLNS_NAMESPACE,\n};\nconst XML_ENTITIES = {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-assignment\n    __proto__: null,\n    amp: \"&\",\n    gt: \">\",\n    lt: \"<\",\n    quot: \"\\\"\",\n    apos: \"'\",\n};\n// EOC: end-of-chunk\nconst EOC = -1;\nconst NL_LIKE = -2;\nconst S_BEGIN = 0; // Initial state.\nconst S_BEGIN_WHITESPACE = 1; // leading whitespace\nconst S_DOCTYPE = 2; // <!DOCTYPE\nconst S_DOCTYPE_QUOTE = 3; // <!DOCTYPE \"//blah\nconst S_DTD = 4; // <!DOCTYPE \"//blah\" [ ...\nconst S_DTD_QUOTED = 5; // <!DOCTYPE \"//blah\" [ \"foo\nconst S_DTD_OPEN_WAKA = 6;\nconst S_DTD_OPEN_WAKA_BANG = 7;\nconst S_DTD_COMMENT = 8; // <!--\nconst S_DTD_COMMENT_ENDING = 9; // <!-- blah -\nconst S_DTD_COMMENT_ENDED = 10; // <!-- blah --\nconst S_DTD_PI = 11; // <?\nconst S_DTD_PI_ENDING = 12; // <?hi \"there\" ?\nconst S_TEXT = 13; // general stuff\nconst S_ENTITY = 14; // &amp and such\nconst S_OPEN_WAKA = 15; // <\nconst S_OPEN_WAKA_BANG = 16; // <!...\nconst S_COMMENT = 17; // <!--\nconst S_COMMENT_ENDING = 18; // <!-- blah -\nconst S_COMMENT_ENDED = 19; // <!-- blah --\nconst S_CDATA = 20; // <![CDATA[ something\nconst S_CDATA_ENDING = 21; // ]\nconst S_CDATA_ENDING_2 = 22; // ]]\nconst S_PI_FIRST_CHAR = 23; // <?hi, first char\nconst S_PI_REST = 24; // <?hi, rest of the name\nconst S_PI_BODY = 25; // <?hi there\nconst S_PI_ENDING = 26; // <?hi \"there\" ?\nconst S_XML_DECL_NAME_START = 27; // <?xml\nconst S_XML_DECL_NAME = 28; // <?xml foo\nconst S_XML_DECL_EQ = 29; // <?xml foo=\nconst S_XML_DECL_VALUE_START = 30; // <?xml foo=\nconst S_XML_DECL_VALUE = 31; // <?xml foo=\"bar\"\nconst S_XML_DECL_SEPARATOR = 32; // <?xml foo=\"bar\"\nconst S_XML_DECL_ENDING = 33; // <?xml ... ?\nconst S_OPEN_TAG = 34; // <strong\nconst S_OPEN_TAG_SLASH = 35; // <strong /\nconst S_ATTRIB = 36; // <a\nconst S_ATTRIB_NAME = 37; // <a foo\nconst S_ATTRIB_NAME_SAW_WHITE = 38; // <a foo _\nconst S_ATTRIB_VALUE = 39; // <a foo=\nconst S_ATTRIB_VALUE_QUOTED = 40; // <a foo=\"bar\nconst S_ATTRIB_VALUE_CLOSED = 41; // <a foo=\"bar\"\nconst S_ATTRIB_VALUE_UNQUOTED = 42; // <a foo=bar\nconst S_CLOSE_TAG = 43; // </a\nconst S_CLOSE_TAG_SAW_WHITE = 44; // </a   >\nconst TAB = 9;\nconst NL = 0xA;\nconst CR = 0xD;\nconst SPACE = 0x20;\nconst BANG = 0x21;\nconst DQUOTE = 0x22;\nconst AMP = 0x26;\nconst SQUOTE = 0x27;\nconst MINUS = 0x2D;\nconst FORWARD_SLASH = 0x2F;\nconst SEMICOLON = 0x3B;\nconst LESS = 0x3C;\nconst EQUAL = 0x3D;\nconst GREATER = 0x3E;\nconst QUESTION = 0x3F;\nconst OPEN_BRACKET = 0x5B;\nconst CLOSE_BRACKET = 0x5D;\nconst NEL = 0x85;\nconst LS = 0x2028; // Line Separator\nconst isQuote = (c) => c === DQUOTE || c === SQUOTE;\nconst QUOTES = [DQUOTE, SQUOTE];\nconst DOCTYPE_TERMINATOR = [...QUOTES, OPEN_BRACKET, GREATER];\nconst DTD_TERMINATOR = [...QUOTES, LESS, CLOSE_BRACKET];\nconst XML_DECL_NAME_TERMINATOR = [EQUAL, QUESTION, ...S_LIST];\nconst ATTRIB_VALUE_UNQUOTED_TERMINATOR = [...S_LIST, GREATER, AMP, LESS];\nfunction nsPairCheck(parser, prefix, uri) {\n    switch (prefix) {\n        case \"xml\":\n            if (uri !== XML_NAMESPACE) {\n                parser.fail(`xml prefix must be bound to ${XML_NAMESPACE}.`);\n            }\n            break;\n        case \"xmlns\":\n            if (uri !== XMLNS_NAMESPACE) {\n                parser.fail(`xmlns prefix must be bound to ${XMLNS_NAMESPACE}.`);\n            }\n            break;\n        default:\n    }\n    switch (uri) {\n        case XMLNS_NAMESPACE:\n            parser.fail(prefix === \"\" ?\n                `the default namespace may not be set to ${uri}.` :\n                `may not assign a prefix (even \"xmlns\") to the URI \\\n${XMLNS_NAMESPACE}.`);\n            break;\n        case XML_NAMESPACE:\n            switch (prefix) {\n                case \"xml\":\n                    // Assinging the XML namespace to \"xml\" is fine.\n                    break;\n                case \"\":\n                    parser.fail(`the default namespace may not be set to ${uri}.`);\n                    break;\n                default:\n                    parser.fail(\"may not assign the xml namespace to another prefix.\");\n            }\n            break;\n        default:\n    }\n}\nfunction nsMappingCheck(parser, mapping) {\n    for (const local of Object.keys(mapping)) {\n        nsPairCheck(parser, local, mapping[local]);\n    }\n}\nconst isNCName = (name) => NC_NAME_RE.test(name);\nconst isName = (name) => NAME_RE.test(name);\nconst FORBIDDEN_START = 0;\nconst FORBIDDEN_BRACKET = 1;\nconst FORBIDDEN_BRACKET_BRACKET = 2;\n/**\n * The list of supported events.\n */\nexports.EVENTS = [\n    \"xmldecl\",\n    \"text\",\n    \"processinginstruction\",\n    \"doctype\",\n    \"comment\",\n    \"opentagstart\",\n    \"attribute\",\n    \"opentag\",\n    \"closetag\",\n    \"cdata\",\n    \"error\",\n    \"end\",\n    \"ready\",\n];\nconst EVENT_NAME_TO_HANDLER_NAME = {\n    xmldecl: \"xmldeclHandler\",\n    text: \"textHandler\",\n    processinginstruction: \"piHandler\",\n    doctype: \"doctypeHandler\",\n    comment: \"commentHandler\",\n    opentagstart: \"openTagStartHandler\",\n    attribute: \"attributeHandler\",\n    opentag: \"openTagHandler\",\n    closetag: \"closeTagHandler\",\n    cdata: \"cdataHandler\",\n    error: \"errorHandler\",\n    end: \"endHandler\",\n    ready: \"readyHandler\",\n};\n// eslint-disable-next-line @typescript-eslint/ban-types\nclass SaxesParser {\n    /**\n     * Indicates whether or not the parser is closed. If ``true``, wait for\n     * the ``ready`` event to write again.\n     */\n    get closed() {\n        return this._closed;\n    }\n    /**\n     * @param opt The parser options.\n     */\n    constructor(opt) {\n        this.opt = opt !== null && opt !== void 0 ? opt : {};\n        this.fragmentOpt = !!this.opt.fragment;\n        const xmlnsOpt = this.xmlnsOpt = !!this.opt.xmlns;\n        this.trackPosition = this.opt.position !== false;\n        this.fileName = this.opt.fileName;\n        if (xmlnsOpt) {\n            // This is the function we use to perform name checks on PIs and entities.\n            // When namespaces are used, colons are not allowed in PI target names or\n            // entity names. So the check depends on whether namespaces are used. See:\n            //\n            // https://www.w3.org/XML/xml-names-19990114-errata.html\n            // NE08\n            //\n            this.nameStartCheck = isNCNameStartChar;\n            this.nameCheck = isNCNameChar;\n            this.isName = isNCName;\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            this.processAttribs = this.processAttribsNS;\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            this.pushAttrib = this.pushAttribNS;\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-assignment\n            this.ns = Object.assign({ __proto__: null }, rootNS);\n            const additional = this.opt.additionalNamespaces;\n            if (additional != null) {\n                nsMappingCheck(this, additional);\n                Object.assign(this.ns, additional);\n            }\n        }\n        else {\n            this.nameStartCheck = isNameStartChar;\n            this.nameCheck = isNameChar;\n            this.isName = isName;\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            this.processAttribs = this.processAttribsPlain;\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            this.pushAttrib = this.pushAttribPlain;\n        }\n        //\n        // The order of the members in this table needs to correspond to the state\n        // numbers given to the states that correspond to the methods being recorded\n        // here.\n        //\n        this.stateTable = [\n            /* eslint-disable @typescript-eslint/unbound-method */\n            this.sBegin,\n            this.sBeginWhitespace,\n            this.sDoctype,\n            this.sDoctypeQuote,\n            this.sDTD,\n            this.sDTDQuoted,\n            this.sDTDOpenWaka,\n            this.sDTDOpenWakaBang,\n            this.sDTDComment,\n            this.sDTDCommentEnding,\n            this.sDTDCommentEnded,\n            this.sDTDPI,\n            this.sDTDPIEnding,\n            this.sText,\n            this.sEntity,\n            this.sOpenWaka,\n            this.sOpenWakaBang,\n            this.sComment,\n            this.sCommentEnding,\n            this.sCommentEnded,\n            this.sCData,\n            this.sCDataEnding,\n            this.sCDataEnding2,\n            this.sPIFirstChar,\n            this.sPIRest,\n            this.sPIBody,\n            this.sPIEnding,\n            this.sXMLDeclNameStart,\n            this.sXMLDeclName,\n            this.sXMLDeclEq,\n            this.sXMLDeclValueStart,\n            this.sXMLDeclValue,\n            this.sXMLDeclSeparator,\n            this.sXMLDeclEnding,\n            this.sOpenTag,\n            this.sOpenTagSlash,\n            this.sAttrib,\n            this.sAttribName,\n            this.sAttribNameSawWhite,\n            this.sAttribValue,\n            this.sAttribValueQuoted,\n            this.sAttribValueClosed,\n            this.sAttribValueUnquoted,\n            this.sCloseTag,\n            this.sCloseTagSawWhite,\n            /* eslint-enable @typescript-eslint/unbound-method */\n        ];\n        this._init();\n    }\n    _init() {\n        var _a;\n        this.openWakaBang = \"\";\n        this.text = \"\";\n        this.name = \"\";\n        this.piTarget = \"\";\n        this.entity = \"\";\n        this.q = null;\n        this.tags = [];\n        this.tag = null;\n        this.topNS = null;\n        this.chunk = \"\";\n        this.chunkPosition = 0;\n        this.i = 0;\n        this.prevI = 0;\n        this.carriedFromPrevious = undefined;\n        this.forbiddenState = FORBIDDEN_START;\n        this.attribList = [];\n        // The logic is organized so as to minimize the need to check\n        // this.opt.fragment while parsing.\n        const { fragmentOpt } = this;\n        this.state = fragmentOpt ? S_TEXT : S_BEGIN;\n        // We want these to be all true if we are dealing with a fragment.\n        this.reportedTextBeforeRoot = this.reportedTextAfterRoot = this.closedRoot =\n            this.sawRoot = fragmentOpt;\n        // An XML declaration is intially possible only when parsing whole\n        // documents.\n        this.xmlDeclPossible = !fragmentOpt;\n        this.xmlDeclExpects = [\"version\"];\n        this.entityReturnState = undefined;\n        let { defaultXMLVersion } = this.opt;\n        if (defaultXMLVersion === undefined) {\n            if (this.opt.forceXMLVersion === true) {\n                throw new Error(\"forceXMLVersion set but defaultXMLVersion is not set\");\n            }\n            defaultXMLVersion = \"1.0\";\n        }\n        this.setXMLVersion(defaultXMLVersion);\n        this.positionAtNewLine = 0;\n        this.doctype = false;\n        this._closed = false;\n        this.xmlDecl = {\n            version: undefined,\n            encoding: undefined,\n            standalone: undefined,\n        };\n        this.line = 1;\n        this.column = 0;\n        this.ENTITIES = Object.create(XML_ENTITIES);\n        (_a = this.readyHandler) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n    /**\n     * The stream position the parser is currently looking at. This field is\n     * zero-based.\n     *\n     * This field is not based on counting Unicode characters but is to be\n     * interpreted as a plain index into a JavaScript string.\n     */\n    get position() {\n        return this.chunkPosition + this.i;\n    }\n    /**\n     * The column number of the next character to be read by the parser.  *\n     * This field is zero-based. (The first column in a line is 0.)\n     *\n     * This field reports the index at which the next character would be in the\n     * line if the line were represented as a JavaScript string.  Note that this\n     * *can* be different to a count based on the number of *Unicode characters*\n     * due to how JavaScript handles astral plane characters.\n     *\n     * See [[column]] for a number that corresponds to a count of Unicode\n     * characters.\n     */\n    get columnIndex() {\n        return this.position - this.positionAtNewLine;\n    }\n    /**\n     * Set an event listener on an event. The parser supports one handler per\n     * event type. If you try to set an event handler over an existing handler,\n     * the old handler is silently overwritten.\n     *\n     * @param name The event to listen to.\n     *\n     * @param handler The handler to set.\n     */\n    on(name, handler) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n        this[EVENT_NAME_TO_HANDLER_NAME[name]] = handler;\n    }\n    /**\n     * Unset an event handler.\n     *\n     * @parma name The event to stop listening to.\n     */\n    off(name) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n        this[EVENT_NAME_TO_HANDLER_NAME[name]] = undefined;\n    }\n    /**\n     * Make an error object. The error object will have a message that contains\n     * the ``fileName`` option passed at the creation of the parser. If position\n     * tracking was turned on, it will also have line and column number\n     * information.\n     *\n     * @param message The message describing the error to report.\n     *\n     * @returns An error object with a properly formatted message.\n     */\n    makeError(message) {\n        var _a;\n        let msg = (_a = this.fileName) !== null && _a !== void 0 ? _a : \"\";\n        if (this.trackPosition) {\n            if (msg.length > 0) {\n                msg += \":\";\n            }\n            msg += `${this.line}:${this.column}`;\n        }\n        if (msg.length > 0) {\n            msg += \": \";\n        }\n        return new Error(msg + message);\n    }\n    /**\n     * Report a parsing error. This method is made public so that client code may\n     * check for issues that are outside the scope of this project and can report\n     * errors.\n     *\n     * @param message The error to report.\n     *\n     * @returns this\n     */\n    fail(message) {\n        const err = this.makeError(message);\n        const handler = this.errorHandler;\n        if (handler === undefined) {\n            throw err;\n        }\n        else {\n            handler(err);\n        }\n        return this;\n    }\n    /**\n     * Write a XML data to the parser.\n     *\n     * @param chunk The XML data to write.\n     *\n     * @returns this\n     */\n    // We do need object for the type here. Yes, it often causes problems\n    // but not in this case.\n    write(chunk) {\n        if (this.closed) {\n            return this.fail(\"cannot write after close; assign an onready handler.\");\n        }\n        let end = false;\n        if (chunk === null) {\n            // We cannot return immediately because carriedFromPrevious may need\n            // processing.\n            end = true;\n            chunk = \"\";\n        }\n        else if (typeof chunk === \"object\") {\n            chunk = chunk.toString();\n        }\n        // We checked if performing a pre-decomposition of the string into an array\n        // of single complete characters (``Array.from(chunk)``) would be faster\n        // than the current repeated calls to ``charCodeAt``. As of August 2018, it\n        // isn't. (There may be Node-specific code that would perform faster than\n        // ``Array.from`` but don't want to be dependent on Node.)\n        if (this.carriedFromPrevious !== undefined) {\n            // The previous chunk had char we must carry over.\n            chunk = `${this.carriedFromPrevious}${chunk}`;\n            this.carriedFromPrevious = undefined;\n        }\n        let limit = chunk.length;\n        const lastCode = chunk.charCodeAt(limit - 1);\n        if (!end &&\n            // A trailing CR or surrogate must be carried over to the next\n            // chunk.\n            (lastCode === CR || (lastCode >= 0xD800 && lastCode <= 0xDBFF))) {\n            // The chunk ends with a character that must be carried over. We cannot\n            // know how to handle it until we get the next chunk or the end of the\n            // stream. So save it for later.\n            this.carriedFromPrevious = chunk[limit - 1];\n            limit--;\n            chunk = chunk.slice(0, limit);\n        }\n        const { stateTable } = this;\n        this.chunk = chunk;\n        this.i = 0;\n        while (this.i < limit) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-argument\n            stateTable[this.state].call(this);\n        }\n        this.chunkPosition += limit;\n        return end ? this.end() : this;\n    }\n    /**\n     * Close the current stream. Perform final well-formedness checks and reset\n     * the parser tstate.\n     *\n     * @returns this\n     */\n    close() {\n        return this.write(null);\n    }\n    /**\n     * Get a single code point out of the current chunk. This updates the current\n     * position if we do position tracking.\n     *\n     * This is the algorithm to use for XML 1.0.\n     *\n     * @returns The character read.\n     */\n    getCode10() {\n        const { chunk, i } = this;\n        this.prevI = i;\n        // Yes, we do this instead of doing this.i++. Doing it this way, we do not\n        // read this.i again, which is a bit faster.\n        this.i = i + 1;\n        if (i >= chunk.length) {\n            return EOC;\n        }\n        // Using charCodeAt and handling the surrogates ourselves is faster\n        // than using codePointAt.\n        const code = chunk.charCodeAt(i);\n        this.column++;\n        if (code < 0xD800) {\n            if (code >= SPACE || code === TAB) {\n                return code;\n            }\n            switch (code) {\n                case NL:\n                    this.line++;\n                    this.column = 0;\n                    this.positionAtNewLine = this.position;\n                    return NL;\n                case CR:\n                    // We may get NaN if we read past the end of the chunk, which is fine.\n                    if (chunk.charCodeAt(i + 1) === NL) {\n                        // A \\r\\n sequence is converted to \\n so we have to skip over the\n                        // next character. We already know it has a size of 1 so ++ is fine\n                        // here.\n                        this.i = i + 2;\n                    }\n                    // Otherwise, a \\r is just converted to \\n, so we don't have to skip\n                    // ahead.\n                    // In either case, \\r becomes \\n.\n                    this.line++;\n                    this.column = 0;\n                    this.positionAtNewLine = this.position;\n                    return NL_LIKE;\n                default:\n                    // If we get here, then code < SPACE and it is not NL CR or TAB.\n                    this.fail(\"disallowed character.\");\n                    return code;\n            }\n        }\n        if (code > 0xDBFF) {\n            // This is a specialized version of isChar10 that takes into account\n            // that in this context code > 0xDBFF and code <= 0xFFFF. So it does not\n            // test cases that don't need testing.\n            if (!(code >= 0xE000 && code <= 0xFFFD)) {\n                this.fail(\"disallowed character.\");\n            }\n            return code;\n        }\n        const final = 0x10000 + ((code - 0xD800) * 0x400) +\n            (chunk.charCodeAt(i + 1) - 0xDC00);\n        this.i = i + 2;\n        // This is a specialized version of isChar10 that takes into account that in\n        // this context necessarily final >= 0x10000.\n        if (final > 0x10FFFF) {\n            this.fail(\"disallowed character.\");\n        }\n        return final;\n    }\n    /**\n     * Get a single code point out of the current chunk. This updates the current\n     * position if we do position tracking.\n     *\n     * This is the algorithm to use for XML 1.1.\n     *\n     * @returns {number} The character read.\n     */\n    getCode11() {\n        const { chunk, i } = this;\n        this.prevI = i;\n        // Yes, we do this instead of doing this.i++. Doing it this way, we do not\n        // read this.i again, which is a bit faster.\n        this.i = i + 1;\n        if (i >= chunk.length) {\n            return EOC;\n        }\n        // Using charCodeAt and handling the surrogates ourselves is faster\n        // than using codePointAt.\n        const code = chunk.charCodeAt(i);\n        this.column++;\n        if (code < 0xD800) {\n            if ((code > 0x1F && code < 0x7F) || (code > 0x9F && code !== LS) ||\n                code === TAB) {\n                return code;\n            }\n            switch (code) {\n                case NL: // 0xA\n                    this.line++;\n                    this.column = 0;\n                    this.positionAtNewLine = this.position;\n                    return NL;\n                case CR: { // 0xD\n                    // We may get NaN if we read past the end of the chunk, which is\n                    // fine.\n                    const next = chunk.charCodeAt(i + 1);\n                    if (next === NL || next === NEL) {\n                        // A CR NL or CR NEL sequence is converted to NL so we have to skip\n                        // over the next character. We already know it has a size of 1.\n                        this.i = i + 2;\n                    }\n                    // Otherwise, a CR is just converted to NL, no skip.\n                }\n                /* yes, fall through */\n                case NEL: // 0x85\n                case LS: // Ox2028\n                    this.line++;\n                    this.column = 0;\n                    this.positionAtNewLine = this.position;\n                    return NL_LIKE;\n                default:\n                    this.fail(\"disallowed character.\");\n                    return code;\n            }\n        }\n        if (code > 0xDBFF) {\n            // This is a specialized version of isCharAndNotRestricted that takes into\n            // account that in this context code > 0xDBFF and code <= 0xFFFF. So it\n            // does not test cases that don't need testing.\n            if (!(code >= 0xE000 && code <= 0xFFFD)) {\n                this.fail(\"disallowed character.\");\n            }\n            return code;\n        }\n        const final = 0x10000 + ((code - 0xD800) * 0x400) +\n            (chunk.charCodeAt(i + 1) - 0xDC00);\n        this.i = i + 2;\n        // This is a specialized version of isCharAndNotRestricted that takes into\n        // account that in this context necessarily final >= 0x10000.\n        if (final > 0x10FFFF) {\n            this.fail(\"disallowed character.\");\n        }\n        return final;\n    }\n    /**\n     * Like ``getCode`` but with the return value normalized so that ``NL`` is\n     * returned for ``NL_LIKE``.\n     */\n    getCodeNorm() {\n        const c = this.getCode();\n        return c === NL_LIKE ? NL : c;\n    }\n    unget() {\n        this.i = this.prevI;\n        this.column--;\n    }\n    /**\n     * Capture characters into a buffer until encountering one of a set of\n     * characters.\n     *\n     * @param chars An array of codepoints. Encountering a character in the array\n     * ends the capture. (``chars`` may safely contain ``NL``.)\n     *\n     * @return The character code that made the capture end, or ``EOC`` if we hit\n     * the end of the chunk. The return value cannot be NL_LIKE: NL is returned\n     * instead.\n     */\n    captureTo(chars) {\n        let { i: start } = this;\n        const { chunk } = this;\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const c = this.getCode();\n            const isNLLike = c === NL_LIKE;\n            const final = isNLLike ? NL : c;\n            if (final === EOC || chars.includes(final)) {\n                this.text += chunk.slice(start, this.prevI);\n                return final;\n            }\n            if (isNLLike) {\n                this.text += `${chunk.slice(start, this.prevI)}\\n`;\n                start = this.i;\n            }\n        }\n    }\n    /**\n     * Capture characters into a buffer until encountering a character.\n     *\n     * @param char The codepoint that ends the capture. **NOTE ``char`` MAY NOT\n     * CONTAIN ``NL``.** Passing ``NL`` will result in buggy behavior.\n     *\n     * @return ``true`` if we ran into the character. Otherwise, we ran into the\n     * end of the current chunk.\n     */\n    captureToChar(char) {\n        let { i: start } = this;\n        const { chunk } = this;\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            let c = this.getCode();\n            switch (c) {\n                case NL_LIKE:\n                    this.text += `${chunk.slice(start, this.prevI)}\\n`;\n                    start = this.i;\n                    c = NL;\n                    break;\n                case EOC:\n                    this.text += chunk.slice(start);\n                    return false;\n                default:\n            }\n            if (c === char) {\n                this.text += chunk.slice(start, this.prevI);\n                return true;\n            }\n        }\n    }\n    /**\n     * Capture characters that satisfy ``isNameChar`` into the ``name`` field of\n     * this parser.\n     *\n     * @return The character code that made the test fail, or ``EOC`` if we hit\n     * the end of the chunk. The return value cannot be NL_LIKE: NL is returned\n     * instead.\n     */\n    captureNameChars() {\n        const { chunk, i: start } = this;\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const c = this.getCode();\n            if (c === EOC) {\n                this.name += chunk.slice(start);\n                return EOC;\n            }\n            // NL is not a name char so we don't have to test specifically for it.\n            if (!isNameChar(c)) {\n                this.name += chunk.slice(start, this.prevI);\n                return c === NL_LIKE ? NL : c;\n            }\n        }\n    }\n    /**\n     * Skip white spaces.\n     *\n     * @return The character that ended the skip, or ``EOC`` if we hit\n     * the end of the chunk. The return value cannot be NL_LIKE: NL is returned\n     * instead.\n     */\n    skipSpaces() {\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const c = this.getCodeNorm();\n            if (c === EOC || !isS(c)) {\n                return c;\n            }\n        }\n    }\n    setXMLVersion(version) {\n        this.currentXMLVersion = version;\n        /*  eslint-disable @typescript-eslint/unbound-method */\n        if (version === \"1.0\") {\n            this.isChar = isChar10;\n            this.getCode = this.getCode10;\n        }\n        else {\n            this.isChar = isChar11;\n            this.getCode = this.getCode11;\n        }\n        /* eslint-enable @typescript-eslint/unbound-method */\n    }\n    // STATE ENGINE METHODS\n    // This needs to be a state separate from S_BEGIN_WHITESPACE because we want\n    // to be sure never to come back to this state later.\n    sBegin() {\n        // We are essentially peeking at the first character of the chunk. Since\n        // S_BEGIN can be in effect only when we start working on the first chunk,\n        // the index at which we must look is necessarily 0. Note also that the\n        // following test does not depend on decoding surrogates.\n        // If the initial character is 0xFEFF, ignore it.\n        if (this.chunk.charCodeAt(0) === 0xFEFF) {\n            this.i++;\n            this.column++;\n        }\n        this.state = S_BEGIN_WHITESPACE;\n    }\n    sBeginWhitespace() {\n        // We need to know whether we've encountered spaces or not because as soon\n        // as we run into a space, an XML declaration is no longer possible. Rather\n        // than slow down skipSpaces even in places where we don't care whether it\n        // skipped anything or not, we check whether prevI is equal to the value of\n        // i from before we skip spaces.\n        const iBefore = this.i;\n        const c = this.skipSpaces();\n        if (this.prevI !== iBefore) {\n            this.xmlDeclPossible = false;\n        }\n        switch (c) {\n            case LESS:\n                this.state = S_OPEN_WAKA;\n                // We could naively call closeText but in this state, it is not normal\n                // to have text be filled with any data.\n                if (this.text.length !== 0) {\n                    throw new Error(\"no-empty text at start\");\n                }\n                break;\n            case EOC:\n                break;\n            default:\n                this.unget();\n                this.state = S_TEXT;\n                this.xmlDeclPossible = false;\n        }\n    }\n    sDoctype() {\n        var _a;\n        const c = this.captureTo(DOCTYPE_TERMINATOR);\n        switch (c) {\n            case GREATER: {\n                (_a = this.doctypeHandler) === null || _a === void 0 ? void 0 : _a.call(this, this.text);\n                this.text = \"\";\n                this.state = S_TEXT;\n                this.doctype = true; // just remember that we saw it.\n                break;\n            }\n            case EOC:\n                break;\n            default:\n                this.text += String.fromCodePoint(c);\n                if (c === OPEN_BRACKET) {\n                    this.state = S_DTD;\n                }\n                else if (isQuote(c)) {\n                    this.state = S_DOCTYPE_QUOTE;\n                    this.q = c;\n                }\n        }\n    }\n    sDoctypeQuote() {\n        const q = this.q;\n        if (this.captureToChar(q)) {\n            this.text += String.fromCodePoint(q);\n            this.q = null;\n            this.state = S_DOCTYPE;\n        }\n    }\n    sDTD() {\n        const c = this.captureTo(DTD_TERMINATOR);\n        if (c === EOC) {\n            return;\n        }\n        this.text += String.fromCodePoint(c);\n        if (c === CLOSE_BRACKET) {\n            this.state = S_DOCTYPE;\n        }\n        else if (c === LESS) {\n            this.state = S_DTD_OPEN_WAKA;\n        }\n        else if (isQuote(c)) {\n            this.state = S_DTD_QUOTED;\n            this.q = c;\n        }\n    }\n    sDTDQuoted() {\n        const q = this.q;\n        if (this.captureToChar(q)) {\n            this.text += String.fromCodePoint(q);\n            this.state = S_DTD;\n            this.q = null;\n        }\n    }\n    sDTDOpenWaka() {\n        const c = this.getCodeNorm();\n        this.text += String.fromCodePoint(c);\n        switch (c) {\n            case BANG:\n                this.state = S_DTD_OPEN_WAKA_BANG;\n                this.openWakaBang = \"\";\n                break;\n            case QUESTION:\n                this.state = S_DTD_PI;\n                break;\n            default:\n                this.state = S_DTD;\n        }\n    }\n    sDTDOpenWakaBang() {\n        const char = String.fromCodePoint(this.getCodeNorm());\n        const owb = this.openWakaBang += char;\n        this.text += char;\n        if (owb !== \"-\") {\n            this.state = owb === \"--\" ? S_DTD_COMMENT : S_DTD;\n            this.openWakaBang = \"\";\n        }\n    }\n    sDTDComment() {\n        if (this.captureToChar(MINUS)) {\n            this.text += \"-\";\n            this.state = S_DTD_COMMENT_ENDING;\n        }\n    }\n    sDTDCommentEnding() {\n        const c = this.getCodeNorm();\n        this.text += String.fromCodePoint(c);\n        this.state = c === MINUS ? S_DTD_COMMENT_ENDED : S_DTD_COMMENT;\n    }\n    sDTDCommentEnded() {\n        const c = this.getCodeNorm();\n        this.text += String.fromCodePoint(c);\n        if (c === GREATER) {\n            this.state = S_DTD;\n        }\n        else {\n            this.fail(\"malformed comment.\");\n            // <!-- blah -- bloo --> will be recorded as\n            // a comment of \" blah -- bloo \"\n            this.state = S_DTD_COMMENT;\n        }\n    }\n    sDTDPI() {\n        if (this.captureToChar(QUESTION)) {\n            this.text += \"?\";\n            this.state = S_DTD_PI_ENDING;\n        }\n    }\n    sDTDPIEnding() {\n        const c = this.getCodeNorm();\n        this.text += String.fromCodePoint(c);\n        if (c === GREATER) {\n            this.state = S_DTD;\n        }\n    }\n    sText() {\n        //\n        // We did try a version of saxes where the S_TEXT state was split in two\n        // states: one for text inside the root element, and one for text\n        // outside. This was avoiding having to test this.tags.length to decide\n        // what implementation to actually use.\n        //\n        // Peformance testing on gigabyte-size files did not show any advantage to\n        // using the two states solution instead of the current one. Conversely, it\n        // made the code a bit more complicated elsewhere. For instance, a comment\n        // can appear before the root element so when a comment ended it was\n        // necessary to determine whether to return to the S_TEXT state or to the\n        // new text-outside-root state.\n        //\n        if (this.tags.length !== 0) {\n            this.handleTextInRoot();\n        }\n        else {\n            this.handleTextOutsideRoot();\n        }\n    }\n    sEntity() {\n        // This is essentially a specialized version of captureToChar(SEMICOLON...)\n        let { i: start } = this;\n        const { chunk } = this;\n        // eslint-disable-next-line no-labels, no-restricted-syntax\n        loop: \n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            switch (this.getCode()) {\n                case NL_LIKE:\n                    this.entity += `${chunk.slice(start, this.prevI)}\\n`;\n                    start = this.i;\n                    break;\n                case SEMICOLON: {\n                    const { entityReturnState } = this;\n                    const entity = this.entity + chunk.slice(start, this.prevI);\n                    this.state = entityReturnState;\n                    let parsed;\n                    if (entity === \"\") {\n                        this.fail(\"empty entity name.\");\n                        parsed = \"&;\";\n                    }\n                    else {\n                        parsed = this.parseEntity(entity);\n                        this.entity = \"\";\n                    }\n                    if (entityReturnState !== S_TEXT || this.textHandler !== undefined) {\n                        this.text += parsed;\n                    }\n                    // eslint-disable-next-line no-labels\n                    break loop;\n                }\n                case EOC:\n                    this.entity += chunk.slice(start);\n                    // eslint-disable-next-line no-labels\n                    break loop;\n                default:\n            }\n        }\n    }\n    sOpenWaka() {\n        // Reminder: a state handler is called with at least one character\n        // available in the current chunk. So the first call to get code inside of\n        // a state handler cannot return ``EOC``. That's why we don't test\n        // for it.\n        const c = this.getCode();\n        // either a /, ?, !, or text is coming next.\n        if (isNameStartChar(c)) {\n            this.state = S_OPEN_TAG;\n            this.unget();\n            this.xmlDeclPossible = false;\n        }\n        else {\n            switch (c) {\n                case FORWARD_SLASH:\n                    this.state = S_CLOSE_TAG;\n                    this.xmlDeclPossible = false;\n                    break;\n                case BANG:\n                    this.state = S_OPEN_WAKA_BANG;\n                    this.openWakaBang = \"\";\n                    this.xmlDeclPossible = false;\n                    break;\n                case QUESTION:\n                    this.state = S_PI_FIRST_CHAR;\n                    break;\n                default:\n                    this.fail(\"disallowed character in tag name\");\n                    this.state = S_TEXT;\n                    this.xmlDeclPossible = false;\n            }\n        }\n    }\n    sOpenWakaBang() {\n        this.openWakaBang += String.fromCodePoint(this.getCodeNorm());\n        switch (this.openWakaBang) {\n            case \"[CDATA[\":\n                if (!this.sawRoot && !this.reportedTextBeforeRoot) {\n                    this.fail(\"text data outside of root node.\");\n                    this.reportedTextBeforeRoot = true;\n                }\n                if (this.closedRoot && !this.reportedTextAfterRoot) {\n                    this.fail(\"text data outside of root node.\");\n                    this.reportedTextAfterRoot = true;\n                }\n                this.state = S_CDATA;\n                this.openWakaBang = \"\";\n                break;\n            case \"--\":\n                this.state = S_COMMENT;\n                this.openWakaBang = \"\";\n                break;\n            case \"DOCTYPE\":\n                this.state = S_DOCTYPE;\n                if (this.doctype || this.sawRoot) {\n                    this.fail(\"inappropriately located doctype declaration.\");\n                }\n                this.openWakaBang = \"\";\n                break;\n            default:\n                // 7 happens to be the maximum length of the string that can possibly\n                // match one of the cases above.\n                if (this.openWakaBang.length >= 7) {\n                    this.fail(\"incorrect syntax.\");\n                }\n        }\n    }\n    sComment() {\n        if (this.captureToChar(MINUS)) {\n            this.state = S_COMMENT_ENDING;\n        }\n    }\n    sCommentEnding() {\n        var _a;\n        const c = this.getCodeNorm();\n        if (c === MINUS) {\n            this.state = S_COMMENT_ENDED;\n            (_a = this.commentHandler) === null || _a === void 0 ? void 0 : _a.call(this, this.text);\n            this.text = \"\";\n        }\n        else {\n            this.text += `-${String.fromCodePoint(c)}`;\n            this.state = S_COMMENT;\n        }\n    }\n    sCommentEnded() {\n        const c = this.getCodeNorm();\n        if (c !== GREATER) {\n            this.fail(\"malformed comment.\");\n            // <!-- blah -- bloo --> will be recorded as\n            // a comment of \" blah -- bloo \"\n            this.text += `--${String.fromCodePoint(c)}`;\n            this.state = S_COMMENT;\n        }\n        else {\n            this.state = S_TEXT;\n        }\n    }\n    sCData() {\n        if (this.captureToChar(CLOSE_BRACKET)) {\n            this.state = S_CDATA_ENDING;\n        }\n    }\n    sCDataEnding() {\n        const c = this.getCodeNorm();\n        if (c === CLOSE_BRACKET) {\n            this.state = S_CDATA_ENDING_2;\n        }\n        else {\n            this.text += `]${String.fromCodePoint(c)}`;\n            this.state = S_CDATA;\n        }\n    }\n    sCDataEnding2() {\n        var _a;\n        const c = this.getCodeNorm();\n        switch (c) {\n            case GREATER: {\n                (_a = this.cdataHandler) === null || _a === void 0 ? void 0 : _a.call(this, this.text);\n                this.text = \"\";\n                this.state = S_TEXT;\n                break;\n            }\n            case CLOSE_BRACKET:\n                this.text += \"]\";\n                break;\n            default:\n                this.text += `]]${String.fromCodePoint(c)}`;\n                this.state = S_CDATA;\n        }\n    }\n    // We need this separate state to check the first character fo the pi target\n    // with this.nameStartCheck which allows less characters than this.nameCheck.\n    sPIFirstChar() {\n        const c = this.getCodeNorm();\n        // This is first because in the case where the file is well-formed this is\n        // the branch taken. We optimize for well-formedness.\n        if (this.nameStartCheck(c)) {\n            this.piTarget += String.fromCodePoint(c);\n            this.state = S_PI_REST;\n        }\n        else if (c === QUESTION || isS(c)) {\n            this.fail(\"processing instruction without a target.\");\n            this.state = c === QUESTION ? S_PI_ENDING : S_PI_BODY;\n        }\n        else {\n            this.fail(\"disallowed character in processing instruction name.\");\n            this.piTarget += String.fromCodePoint(c);\n            this.state = S_PI_REST;\n        }\n    }\n    sPIRest() {\n        // Capture characters into a piTarget while ``this.nameCheck`` run on the\n        // character read returns true.\n        const { chunk, i: start } = this;\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const c = this.getCodeNorm();\n            if (c === EOC) {\n                this.piTarget += chunk.slice(start);\n                return;\n            }\n            // NL cannot satisfy this.nameCheck so we don't have to test specifically\n            // for it.\n            if (!this.nameCheck(c)) {\n                this.piTarget += chunk.slice(start, this.prevI);\n                const isQuestion = c === QUESTION;\n                if (isQuestion || isS(c)) {\n                    if (this.piTarget === \"xml\") {\n                        if (!this.xmlDeclPossible) {\n                            this.fail(\"an XML declaration must be at the start of the document.\");\n                        }\n                        this.state = isQuestion ? S_XML_DECL_ENDING : S_XML_DECL_NAME_START;\n                    }\n                    else {\n                        this.state = isQuestion ? S_PI_ENDING : S_PI_BODY;\n                    }\n                }\n                else {\n                    this.fail(\"disallowed character in processing instruction name.\");\n                    this.piTarget += String.fromCodePoint(c);\n                }\n                break;\n            }\n        }\n    }\n    sPIBody() {\n        if (this.text.length === 0) {\n            const c = this.getCodeNorm();\n            if (c === QUESTION) {\n                this.state = S_PI_ENDING;\n            }\n            else if (!isS(c)) {\n                this.text = String.fromCodePoint(c);\n            }\n        }\n        // The question mark character is not valid inside any of the XML\n        // declaration name/value pairs.\n        else if (this.captureToChar(QUESTION)) {\n            this.state = S_PI_ENDING;\n        }\n    }\n    sPIEnding() {\n        var _a;\n        const c = this.getCodeNorm();\n        if (c === GREATER) {\n            const { piTarget } = this;\n            if (piTarget.toLowerCase() === \"xml\") {\n                this.fail(\"the XML declaration must appear at the start of the document.\");\n            }\n            (_a = this.piHandler) === null || _a === void 0 ? void 0 : _a.call(this, {\n                target: piTarget,\n                body: this.text,\n            });\n            this.piTarget = this.text = \"\";\n            this.state = S_TEXT;\n        }\n        else if (c === QUESTION) {\n            // We ran into ?? as part of a processing instruction. We initially took\n            // the first ? as a sign that the PI was ending, but it is not. So we have\n            // to add it to the body but we take the new ? as a sign that the PI is\n            // ending.\n            this.text += \"?\";\n        }\n        else {\n            this.text += `?${String.fromCodePoint(c)}`;\n            this.state = S_PI_BODY;\n        }\n        this.xmlDeclPossible = false;\n    }\n    sXMLDeclNameStart() {\n        const c = this.skipSpaces();\n        // The question mark character is not valid inside any of the XML\n        // declaration name/value pairs.\n        if (c === QUESTION) {\n            // It is valid to go to S_XML_DECL_ENDING from this state.\n            this.state = S_XML_DECL_ENDING;\n            return;\n        }\n        if (c !== EOC) {\n            this.state = S_XML_DECL_NAME;\n            this.name = String.fromCodePoint(c);\n        }\n    }\n    sXMLDeclName() {\n        const c = this.captureTo(XML_DECL_NAME_TERMINATOR);\n        // The question mark character is not valid inside any of the XML\n        // declaration name/value pairs.\n        if (c === QUESTION) {\n            this.state = S_XML_DECL_ENDING;\n            this.name += this.text;\n            this.text = \"\";\n            this.fail(\"XML declaration is incomplete.\");\n            return;\n        }\n        if (!(isS(c) || c === EQUAL)) {\n            return;\n        }\n        this.name += this.text;\n        this.text = \"\";\n        if (!this.xmlDeclExpects.includes(this.name)) {\n            switch (this.name.length) {\n                case 0:\n                    this.fail(\"did not expect any more name/value pairs.\");\n                    break;\n                case 1:\n                    this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);\n                    break;\n                default:\n                    this.fail(`expected one of ${this.xmlDeclExpects.join(\", \")}`);\n            }\n        }\n        this.state = c === EQUAL ? S_XML_DECL_VALUE_START : S_XML_DECL_EQ;\n    }\n    sXMLDeclEq() {\n        const c = this.getCodeNorm();\n        // The question mark character is not valid inside any of the XML\n        // declaration name/value pairs.\n        if (c === QUESTION) {\n            this.state = S_XML_DECL_ENDING;\n            this.fail(\"XML declaration is incomplete.\");\n            return;\n        }\n        if (isS(c)) {\n            return;\n        }\n        if (c !== EQUAL) {\n            this.fail(\"value required.\");\n        }\n        this.state = S_XML_DECL_VALUE_START;\n    }\n    sXMLDeclValueStart() {\n        const c = this.getCodeNorm();\n        // The question mark character is not valid inside any of the XML\n        // declaration name/value pairs.\n        if (c === QUESTION) {\n            this.state = S_XML_DECL_ENDING;\n            this.fail(\"XML declaration is incomplete.\");\n            return;\n        }\n        if (isS(c)) {\n            return;\n        }\n        if (!isQuote(c)) {\n            this.fail(\"value must be quoted.\");\n            this.q = SPACE;\n        }\n        else {\n            this.q = c;\n        }\n        this.state = S_XML_DECL_VALUE;\n    }\n    sXMLDeclValue() {\n        const c = this.captureTo([this.q, QUESTION]);\n        // The question mark character is not valid inside any of the XML\n        // declaration name/value pairs.\n        if (c === QUESTION) {\n            this.state = S_XML_DECL_ENDING;\n            this.text = \"\";\n            this.fail(\"XML declaration is incomplete.\");\n            return;\n        }\n        if (c === EOC) {\n            return;\n        }\n        const value = this.text;\n        this.text = \"\";\n        switch (this.name) {\n            case \"version\": {\n                this.xmlDeclExpects = [\"encoding\", \"standalone\"];\n                const version = value;\n                this.xmlDecl.version = version;\n                // This is the test specified by XML 1.0 but it is fine for XML 1.1.\n                if (!/^1\\.[0-9]+$/.test(version)) {\n                    this.fail(\"version number must match /^1\\\\.[0-9]+$/.\");\n                }\n                // When forceXMLVersion is set, the XML declaration is ignored.\n                else if (!this.opt.forceXMLVersion) {\n                    this.setXMLVersion(version);\n                }\n                break;\n            }\n            case \"encoding\":\n                if (!/^[A-Za-z][A-Za-z0-9._-]*$/.test(value)) {\n                    this.fail(\"encoding value must match \\\n/^[A-Za-z0-9][A-Za-z0-9._-]*$/.\");\n                }\n                this.xmlDeclExpects = [\"standalone\"];\n                this.xmlDecl.encoding = value;\n                break;\n            case \"standalone\":\n                if (value !== \"yes\" && value !== \"no\") {\n                    this.fail(\"standalone value must match \\\"yes\\\" or \\\"no\\\".\");\n                }\n                this.xmlDeclExpects = [];\n                this.xmlDecl.standalone = value;\n                break;\n            default:\n            // We don't need to raise an error here since we've already raised one\n            // when checking what name was expected.\n        }\n        this.name = \"\";\n        this.state = S_XML_DECL_SEPARATOR;\n    }\n    sXMLDeclSeparator() {\n        const c = this.getCodeNorm();\n        // The question mark character is not valid inside any of the XML\n        // declaration name/value pairs.\n        if (c === QUESTION) {\n            // It is valid to go to S_XML_DECL_ENDING from this state.\n            this.state = S_XML_DECL_ENDING;\n            return;\n        }\n        if (!isS(c)) {\n            this.fail(\"whitespace required.\");\n            this.unget();\n        }\n        this.state = S_XML_DECL_NAME_START;\n    }\n    sXMLDeclEnding() {\n        var _a;\n        const c = this.getCodeNorm();\n        if (c === GREATER) {\n            if (this.piTarget !== \"xml\") {\n                this.fail(\"processing instructions are not allowed before root.\");\n            }\n            else if (this.name !== \"version\" &&\n                this.xmlDeclExpects.includes(\"version\")) {\n                this.fail(\"XML declaration must contain a version.\");\n            }\n            (_a = this.xmldeclHandler) === null || _a === void 0 ? void 0 : _a.call(this, this.xmlDecl);\n            this.name = \"\";\n            this.piTarget = this.text = \"\";\n            this.state = S_TEXT;\n        }\n        else {\n            // We got here because the previous character was a ?, but the question\n            // mark character is not valid inside any of the XML declaration\n            // name/value pairs.\n            this.fail(\"The character ? is disallowed anywhere in XML declarations.\");\n        }\n        this.xmlDeclPossible = false;\n    }\n    sOpenTag() {\n        var _a;\n        const c = this.captureNameChars();\n        if (c === EOC) {\n            return;\n        }\n        const tag = this.tag = {\n            name: this.name,\n            attributes: Object.create(null),\n        };\n        this.name = \"\";\n        if (this.xmlnsOpt) {\n            this.topNS = tag.ns = Object.create(null);\n        }\n        (_a = this.openTagStartHandler) === null || _a === void 0 ? void 0 : _a.call(this, tag);\n        this.sawRoot = true;\n        if (!this.fragmentOpt && this.closedRoot) {\n            this.fail(\"documents may contain only one root.\");\n        }\n        switch (c) {\n            case GREATER:\n                this.openTag();\n                break;\n            case FORWARD_SLASH:\n                this.state = S_OPEN_TAG_SLASH;\n                break;\n            default:\n                if (!isS(c)) {\n                    this.fail(\"disallowed character in tag name.\");\n                }\n                this.state = S_ATTRIB;\n        }\n    }\n    sOpenTagSlash() {\n        if (this.getCode() === GREATER) {\n            this.openSelfClosingTag();\n        }\n        else {\n            this.fail(\"forward-slash in opening tag not followed by >.\");\n            this.state = S_ATTRIB;\n        }\n    }\n    sAttrib() {\n        const c = this.skipSpaces();\n        if (c === EOC) {\n            return;\n        }\n        if (isNameStartChar(c)) {\n            this.unget();\n            this.state = S_ATTRIB_NAME;\n        }\n        else if (c === GREATER) {\n            this.openTag();\n        }\n        else if (c === FORWARD_SLASH) {\n            this.state = S_OPEN_TAG_SLASH;\n        }\n        else {\n            this.fail(\"disallowed character in attribute name.\");\n        }\n    }\n    sAttribName() {\n        const c = this.captureNameChars();\n        if (c === EQUAL) {\n            this.state = S_ATTRIB_VALUE;\n        }\n        else if (isS(c)) {\n            this.state = S_ATTRIB_NAME_SAW_WHITE;\n        }\n        else if (c === GREATER) {\n            this.fail(\"attribute without value.\");\n            this.pushAttrib(this.name, this.name);\n            this.name = this.text = \"\";\n            this.openTag();\n        }\n        else if (c !== EOC) {\n            this.fail(\"disallowed character in attribute name.\");\n        }\n    }\n    sAttribNameSawWhite() {\n        const c = this.skipSpaces();\n        switch (c) {\n            case EOC:\n                return;\n            case EQUAL:\n                this.state = S_ATTRIB_VALUE;\n                break;\n            default:\n                this.fail(\"attribute without value.\");\n                // Should we do this???\n                // this.tag.attributes[this.name] = \"\";\n                this.text = \"\";\n                this.name = \"\";\n                if (c === GREATER) {\n                    this.openTag();\n                }\n                else if (isNameStartChar(c)) {\n                    this.unget();\n                    this.state = S_ATTRIB_NAME;\n                }\n                else {\n                    this.fail(\"disallowed character in attribute name.\");\n                    this.state = S_ATTRIB;\n                }\n        }\n    }\n    sAttribValue() {\n        const c = this.getCodeNorm();\n        if (isQuote(c)) {\n            this.q = c;\n            this.state = S_ATTRIB_VALUE_QUOTED;\n        }\n        else if (!isS(c)) {\n            this.fail(\"unquoted attribute value.\");\n            this.state = S_ATTRIB_VALUE_UNQUOTED;\n            this.unget();\n        }\n    }\n    sAttribValueQuoted() {\n        // We deliberately do not use captureTo here. The specialized code we use\n        // here is faster than using captureTo.\n        const { q, chunk } = this;\n        let { i: start } = this;\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            switch (this.getCode()) {\n                case q:\n                    this.pushAttrib(this.name, this.text + chunk.slice(start, this.prevI));\n                    this.name = this.text = \"\";\n                    this.q = null;\n                    this.state = S_ATTRIB_VALUE_CLOSED;\n                    return;\n                case AMP:\n                    this.text += chunk.slice(start, this.prevI);\n                    this.state = S_ENTITY;\n                    this.entityReturnState = S_ATTRIB_VALUE_QUOTED;\n                    return;\n                case NL:\n                case NL_LIKE:\n                case TAB:\n                    this.text += `${chunk.slice(start, this.prevI)} `;\n                    start = this.i;\n                    break;\n                case LESS:\n                    this.text += chunk.slice(start, this.prevI);\n                    this.fail(\"disallowed character.\");\n                    return;\n                case EOC:\n                    this.text += chunk.slice(start);\n                    return;\n                default:\n            }\n        }\n    }\n    sAttribValueClosed() {\n        const c = this.getCodeNorm();\n        if (isS(c)) {\n            this.state = S_ATTRIB;\n        }\n        else if (c === GREATER) {\n            this.openTag();\n        }\n        else if (c === FORWARD_SLASH) {\n            this.state = S_OPEN_TAG_SLASH;\n        }\n        else if (isNameStartChar(c)) {\n            this.fail(\"no whitespace between attributes.\");\n            this.unget();\n            this.state = S_ATTRIB_NAME;\n        }\n        else {\n            this.fail(\"disallowed character in attribute name.\");\n        }\n    }\n    sAttribValueUnquoted() {\n        // We don't do anything regarding EOL or space handling for unquoted\n        // attributes. We already have failed by the time we get here, and the\n        // contract that saxes upholds states that upon failure, it is not safe to\n        // rely on the data passed to event handlers (other than\n        // ``onerror``). Passing \"bad\" data is not a problem.\n        const c = this.captureTo(ATTRIB_VALUE_UNQUOTED_TERMINATOR);\n        switch (c) {\n            case AMP:\n                this.state = S_ENTITY;\n                this.entityReturnState = S_ATTRIB_VALUE_UNQUOTED;\n                break;\n            case LESS:\n                this.fail(\"disallowed character.\");\n                break;\n            case EOC:\n                break;\n            default:\n                if (this.text.includes(\"]]>\")) {\n                    this.fail(\"the string \\\"]]>\\\" is disallowed in char data.\");\n                }\n                this.pushAttrib(this.name, this.text);\n                this.name = this.text = \"\";\n                if (c === GREATER) {\n                    this.openTag();\n                }\n                else {\n                    this.state = S_ATTRIB;\n                }\n        }\n    }\n    sCloseTag() {\n        const c = this.captureNameChars();\n        if (c === GREATER) {\n            this.closeTag();\n        }\n        else if (isS(c)) {\n            this.state = S_CLOSE_TAG_SAW_WHITE;\n        }\n        else if (c !== EOC) {\n            this.fail(\"disallowed character in closing tag.\");\n        }\n    }\n    sCloseTagSawWhite() {\n        switch (this.skipSpaces()) {\n            case GREATER:\n                this.closeTag();\n                break;\n            case EOC:\n                break;\n            default:\n                this.fail(\"disallowed character in closing tag.\");\n        }\n    }\n    // END OF STATE ENGINE METHODS\n    handleTextInRoot() {\n        // This is essentially a specialized version of captureTo which is optimized\n        // for performing the ]]> check. A previous version of this code, checked\n        // ``this.text`` for the presence of ]]>. It simplified the code but was\n        // very costly when character data contained a lot of entities to be parsed.\n        //\n        // Since we are using a specialized loop, we also keep track of the presence\n        // of ]]> in text data. The sequence ]]> is forbidden to appear as-is.\n        //\n        let { i: start, forbiddenState } = this;\n        const { chunk, textHandler: handler } = this;\n        // eslint-disable-next-line no-labels, no-restricted-syntax\n        scanLoop: \n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            switch (this.getCode()) {\n                case LESS: {\n                    this.state = S_OPEN_WAKA;\n                    if (handler !== undefined) {\n                        const { text } = this;\n                        const slice = chunk.slice(start, this.prevI);\n                        if (text.length !== 0) {\n                            handler(text + slice);\n                            this.text = \"\";\n                        }\n                        else if (slice.length !== 0) {\n                            handler(slice);\n                        }\n                    }\n                    forbiddenState = FORBIDDEN_START;\n                    // eslint-disable-next-line no-labels\n                    break scanLoop;\n                }\n                case AMP:\n                    this.state = S_ENTITY;\n                    this.entityReturnState = S_TEXT;\n                    if (handler !== undefined) {\n                        this.text += chunk.slice(start, this.prevI);\n                    }\n                    forbiddenState = FORBIDDEN_START;\n                    // eslint-disable-next-line no-labels\n                    break scanLoop;\n                case CLOSE_BRACKET:\n                    switch (forbiddenState) {\n                        case FORBIDDEN_START:\n                            forbiddenState = FORBIDDEN_BRACKET;\n                            break;\n                        case FORBIDDEN_BRACKET:\n                            forbiddenState = FORBIDDEN_BRACKET_BRACKET;\n                            break;\n                        case FORBIDDEN_BRACKET_BRACKET:\n                            break;\n                        default:\n                            throw new Error(\"impossible state\");\n                    }\n                    break;\n                case GREATER:\n                    if (forbiddenState === FORBIDDEN_BRACKET_BRACKET) {\n                        this.fail(\"the string \\\"]]>\\\" is disallowed in char data.\");\n                    }\n                    forbiddenState = FORBIDDEN_START;\n                    break;\n                case NL_LIKE:\n                    if (handler !== undefined) {\n                        this.text += `${chunk.slice(start, this.prevI)}\\n`;\n                    }\n                    start = this.i;\n                    forbiddenState = FORBIDDEN_START;\n                    break;\n                case EOC:\n                    if (handler !== undefined) {\n                        this.text += chunk.slice(start);\n                    }\n                    // eslint-disable-next-line no-labels\n                    break scanLoop;\n                default:\n                    forbiddenState = FORBIDDEN_START;\n            }\n        }\n        this.forbiddenState = forbiddenState;\n    }\n    handleTextOutsideRoot() {\n        // This is essentially a specialized version of captureTo which is optimized\n        // for a specialized task. We keep track of the presence of non-space\n        // characters in the text since these are errors when appearing outside the\n        // document root element.\n        let { i: start } = this;\n        const { chunk, textHandler: handler } = this;\n        let nonSpace = false;\n        // eslint-disable-next-line no-labels, no-restricted-syntax\n        outRootLoop: \n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const code = this.getCode();\n            switch (code) {\n                case LESS: {\n                    this.state = S_OPEN_WAKA;\n                    if (handler !== undefined) {\n                        const { text } = this;\n                        const slice = chunk.slice(start, this.prevI);\n                        if (text.length !== 0) {\n                            handler(text + slice);\n                            this.text = \"\";\n                        }\n                        else if (slice.length !== 0) {\n                            handler(slice);\n                        }\n                    }\n                    // eslint-disable-next-line no-labels\n                    break outRootLoop;\n                }\n                case AMP:\n                    this.state = S_ENTITY;\n                    this.entityReturnState = S_TEXT;\n                    if (handler !== undefined) {\n                        this.text += chunk.slice(start, this.prevI);\n                    }\n                    nonSpace = true;\n                    // eslint-disable-next-line no-labels\n                    break outRootLoop;\n                case NL_LIKE:\n                    if (handler !== undefined) {\n                        this.text += `${chunk.slice(start, this.prevI)}\\n`;\n                    }\n                    start = this.i;\n                    break;\n                case EOC:\n                    if (handler !== undefined) {\n                        this.text += chunk.slice(start);\n                    }\n                    // eslint-disable-next-line no-labels\n                    break outRootLoop;\n                default:\n                    if (!isS(code)) {\n                        nonSpace = true;\n                    }\n            }\n        }\n        if (!nonSpace) {\n            return;\n        }\n        // We use the reportedTextBeforeRoot and reportedTextAfterRoot flags\n        // to avoid reporting errors for every single character that is out of\n        // place.\n        if (!this.sawRoot && !this.reportedTextBeforeRoot) {\n            this.fail(\"text data outside of root node.\");\n            this.reportedTextBeforeRoot = true;\n        }\n        if (this.closedRoot && !this.reportedTextAfterRoot) {\n            this.fail(\"text data outside of root node.\");\n            this.reportedTextAfterRoot = true;\n        }\n    }\n    pushAttribNS(name, value) {\n        var _a;\n        const { prefix, local } = this.qname(name);\n        const attr = { name, prefix, local, value };\n        this.attribList.push(attr);\n        (_a = this.attributeHandler) === null || _a === void 0 ? void 0 : _a.call(this, attr);\n        if (prefix === \"xmlns\") {\n            const trimmed = value.trim();\n            if (this.currentXMLVersion === \"1.0\" && trimmed === \"\") {\n                this.fail(\"invalid attempt to undefine prefix in XML 1.0\");\n            }\n            this.topNS[local] = trimmed;\n            nsPairCheck(this, local, trimmed);\n        }\n        else if (name === \"xmlns\") {\n            const trimmed = value.trim();\n            this.topNS[\"\"] = trimmed;\n            nsPairCheck(this, \"\", trimmed);\n        }\n    }\n    pushAttribPlain(name, value) {\n        var _a;\n        const attr = { name, value };\n        this.attribList.push(attr);\n        (_a = this.attributeHandler) === null || _a === void 0 ? void 0 : _a.call(this, attr);\n    }\n    /**\n     * End parsing. This performs final well-formedness checks and resets the\n     * parser to a clean state.\n     *\n     * @returns this\n     */\n    end() {\n        var _a, _b;\n        if (!this.sawRoot) {\n            this.fail(\"document must contain a root element.\");\n        }\n        const { tags } = this;\n        while (tags.length > 0) {\n            const tag = tags.pop();\n            this.fail(`unclosed tag: ${tag.name}`);\n        }\n        if ((this.state !== S_BEGIN) && (this.state !== S_TEXT)) {\n            this.fail(\"unexpected end.\");\n        }\n        const { text } = this;\n        if (text.length !== 0) {\n            (_a = this.textHandler) === null || _a === void 0 ? void 0 : _a.call(this, text);\n            this.text = \"\";\n        }\n        this._closed = true;\n        (_b = this.endHandler) === null || _b === void 0 ? void 0 : _b.call(this);\n        this._init();\n        return this;\n    }\n    /**\n     * Resolve a namespace prefix.\n     *\n     * @param prefix The prefix to resolve.\n     *\n     * @returns The namespace URI or ``undefined`` if the prefix is not defined.\n     */\n    resolve(prefix) {\n        var _a, _b;\n        let uri = this.topNS[prefix];\n        if (uri !== undefined) {\n            return uri;\n        }\n        const { tags } = this;\n        for (let index = tags.length - 1; index >= 0; index--) {\n            uri = tags[index].ns[prefix];\n            if (uri !== undefined) {\n                return uri;\n            }\n        }\n        uri = this.ns[prefix];\n        if (uri !== undefined) {\n            return uri;\n        }\n        return (_b = (_a = this.opt).resolvePrefix) === null || _b === void 0 ? void 0 : _b.call(_a, prefix);\n    }\n    /**\n     * Parse a qname into its prefix and local name parts.\n     *\n     * @param name The name to parse\n     *\n     * @returns\n     */\n    qname(name) {\n        // This is faster than using name.split(\":\").\n        const colon = name.indexOf(\":\");\n        if (colon === -1) {\n            return { prefix: \"\", local: name };\n        }\n        const local = name.slice(colon + 1);\n        const prefix = name.slice(0, colon);\n        if (prefix === \"\" || local === \"\" || local.includes(\":\")) {\n            this.fail(`malformed name: ${name}.`);\n        }\n        return { prefix, local };\n    }\n    processAttribsNS() {\n        var _a;\n        const { attribList } = this;\n        const tag = this.tag;\n        {\n            // add namespace info to tag\n            const { prefix, local } = this.qname(tag.name);\n            tag.prefix = prefix;\n            tag.local = local;\n            const uri = tag.uri = (_a = this.resolve(prefix)) !== null && _a !== void 0 ? _a : \"\";\n            if (prefix !== \"\") {\n                if (prefix === \"xmlns\") {\n                    this.fail(\"tags may not have \\\"xmlns\\\" as prefix.\");\n                }\n                if (uri === \"\") {\n                    this.fail(`unbound namespace prefix: ${JSON.stringify(prefix)}.`);\n                    tag.uri = prefix;\n                }\n            }\n        }\n        if (attribList.length === 0) {\n            return;\n        }\n        const { attributes } = tag;\n        const seen = new Set();\n        // Note: do not apply default ns to attributes:\n        //   http://www.w3.org/TR/REC-xml-names/#defaulting\n        for (const attr of attribList) {\n            const { name, prefix, local } = attr;\n            let uri;\n            let eqname;\n            if (prefix === \"\") {\n                uri = name === \"xmlns\" ? XMLNS_NAMESPACE : \"\";\n                eqname = name;\n            }\n            else {\n                uri = this.resolve(prefix);\n                // if there's any attributes with an undefined namespace,\n                // then fail on them now.\n                if (uri === undefined) {\n                    this.fail(`unbound namespace prefix: ${JSON.stringify(prefix)}.`);\n                    uri = prefix;\n                }\n                eqname = `{${uri}}${local}`;\n            }\n            if (seen.has(eqname)) {\n                this.fail(`duplicate attribute: ${eqname}.`);\n            }\n            seen.add(eqname);\n            attr.uri = uri;\n            attributes[name] = attr;\n        }\n        this.attribList = [];\n    }\n    processAttribsPlain() {\n        const { attribList } = this;\n        // eslint-disable-next-line prefer-destructuring\n        const attributes = this.tag.attributes;\n        for (const { name, value } of attribList) {\n            if (attributes[name] !== undefined) {\n                this.fail(`duplicate attribute: ${name}.`);\n            }\n            attributes[name] = value;\n        }\n        this.attribList = [];\n    }\n    /**\n     * Handle a complete open tag. This parser code calls this once it has seen\n     * the whole tag. This method checks for well-formeness and then emits\n     * ``onopentag``.\n     */\n    openTag() {\n        var _a;\n        this.processAttribs();\n        const { tags } = this;\n        const tag = this.tag;\n        tag.isSelfClosing = false;\n        // There cannot be any pending text here due to the onopentagstart that was\n        // necessarily emitted before we get here. So we do not check text.\n        (_a = this.openTagHandler) === null || _a === void 0 ? void 0 : _a.call(this, tag);\n        tags.push(tag);\n        this.state = S_TEXT;\n        this.name = \"\";\n    }\n    /**\n     * Handle a complete self-closing tag. This parser code calls this once it has\n     * seen the whole tag. This method checks for well-formeness and then emits\n     * ``onopentag`` and ``onclosetag``.\n     */\n    openSelfClosingTag() {\n        var _a, _b, _c;\n        this.processAttribs();\n        const { tags } = this;\n        const tag = this.tag;\n        tag.isSelfClosing = true;\n        // There cannot be any pending text here due to the onopentagstart that was\n        // necessarily emitted before we get here. So we do not check text.\n        (_a = this.openTagHandler) === null || _a === void 0 ? void 0 : _a.call(this, tag);\n        (_b = this.closeTagHandler) === null || _b === void 0 ? void 0 : _b.call(this, tag);\n        const top = this.tag = (_c = tags[tags.length - 1]) !== null && _c !== void 0 ? _c : null;\n        if (top === null) {\n            this.closedRoot = true;\n        }\n        this.state = S_TEXT;\n        this.name = \"\";\n    }\n    /**\n     * Handle a complete close tag. This parser code calls this once it has seen\n     * the whole tag. This method checks for well-formeness and then emits\n     * ``onclosetag``.\n     */\n    closeTag() {\n        const { tags, name } = this;\n        // Our state after this will be S_TEXT, no matter what, and we can clear\n        // tagName now.\n        this.state = S_TEXT;\n        this.name = \"\";\n        if (name === \"\") {\n            this.fail(\"weird empty close tag.\");\n            this.text += \"</>\";\n            return;\n        }\n        const handler = this.closeTagHandler;\n        let l = tags.length;\n        while (l-- > 0) {\n            const tag = this.tag = tags.pop();\n            this.topNS = tag.ns;\n            handler === null || handler === void 0 ? void 0 : handler(tag);\n            if (tag.name === name) {\n                break;\n            }\n            this.fail(\"unexpected close tag.\");\n        }\n        if (l === 0) {\n            this.closedRoot = true;\n        }\n        else if (l < 0) {\n            this.fail(`unmatched closing tag: ${name}.`);\n            this.text += `</${name}>`;\n        }\n    }\n    /**\n     * Resolves an entity. Makes any necessary well-formedness checks.\n     *\n     * @param entity The entity to resolve.\n     *\n     * @returns The parsed entity.\n     */\n    parseEntity(entity) {\n        // startsWith would be significantly slower for this test.\n        if (entity[0] !== \"#\") {\n            const defined = this.ENTITIES[entity];\n            if (defined !== undefined) {\n                return defined;\n            }\n            this.fail(this.isName(entity) ? \"undefined entity.\" :\n                \"disallowed character in entity name.\");\n            return `&${entity};`;\n        }\n        let num = NaN;\n        if (entity[1] === \"x\" && /^#x[0-9a-f]+$/i.test(entity)) {\n            num = parseInt(entity.slice(2), 16);\n        }\n        else if (/^#[0-9]+$/.test(entity)) {\n            num = parseInt(entity.slice(1), 10);\n        }\n        // The character reference is required to match the CHAR production.\n        if (!this.isChar(num)) {\n            this.fail(\"malformed character entity.\");\n            return `&${entity};`;\n        }\n        return String.fromCodePoint(num);\n    }\n}\nexports.SaxesParser = SaxesParser;\n//# sourceMappingURL=saxes.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableWebToNodeStream = void 0;\nconst readable_stream_1 = require(\"readable-stream\");\n/**\n * Converts a Web-API stream into Node stream.Readable class\n * Node stream readable: https://nodejs.org/api/stream.html#stream_readable_streams\n * Web API readable-stream: https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\n * Node readable stream: https://nodejs.org/api/stream.html#stream_readable_streams\n */\nclass ReadableWebToNodeStream extends readable_stream_1.Readable {\n    /**\n     *\n     * @param stream ReadableStream: https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream\n     */\n    constructor(stream) {\n        super();\n        this.bytesRead = 0;\n        this.released = false;\n        this.reader = stream.getReader();\n    }\n    /**\n     * Implementation of readable._read(size).\n     * When readable._read() is called, if data is available from the resource,\n     * the implementation should begin pushing that data into the read queue\n     * https://nodejs.org/api/stream.html#stream_readable_read_size_1\n     */\n    async _read() {\n        // Should start pushing data into the queue\n        // Read data from the underlying Web-API-readable-stream\n        if (this.released) {\n            this.push(null); // Signal EOF\n            return;\n        }\n        this.pendingRead = this.reader.read();\n        const data = await this.pendingRead;\n        // clear the promise before pushing pushing new data to the queue and allow sequential calls to _read()\n        delete this.pendingRead;\n        if (data.done || this.released) {\n            this.push(null); // Signal EOF\n        }\n        else {\n            this.bytesRead += data.value.length;\n            this.push(data.value); // Push new data to the queue\n        }\n    }\n    /**\n     * If there is no unresolved read call to Web-API ReadableStream immediately returns;\n     * otherwise will wait until the read is resolved.\n     */\n    async waitForReadToComplete() {\n        if (this.pendingRead) {\n            await this.pendingRead;\n        }\n    }\n    /**\n     * Close wrapper\n     */\n    async close() {\n        await this.syncAndRelease();\n    }\n    async syncAndRelease() {\n        this.released = true;\n        await this.waitForReadToComplete();\n        await this.reader.releaseLock();\n    }\n}\nexports.ReadableWebToNodeStream = ReadableWebToNodeStream;\n//# sourceMappingURL=index.js.map","/*globals self, window */\n\"use strict\"\n\n/*eslint-disable @mysticatea/prettier */\nconst { AbortController, AbortSignal } =\n    typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    /* otherwise */ undefined\n/*eslint-enable @mysticatea/prettier */\n\nmodule.exports = AbortController\nmodule.exports.AbortSignal = AbortSignal\nmodule.exports.default = AbortController\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction promisifyEventEmitter(event, result) {\n    return new Promise((resolve, reject) => {\n        event.on('end', () => resolve(result));\n        event.on('error', reject);\n    });\n}\nfunction arrayifyStream(stream) {\n    const array = [];\n    return promisifyEventEmitter(stream.on('data', data => array.push(data)), array);\n}\nexports.default = arrayifyStream;\n//# sourceMappingURL=index.js.map","\nconst DynamicNestedLoopJoin = require('./join/DynamicNestedLoopJoin');\nconst HashJoin = require('./join/HashJoin');\nconst NestedLoopJoin = require('./join/NestedLoopJoin');\nconst SymmetricHashJoin = require('./join/SymmetricHashJoin');\n\nconst MergeStream = require('./util/MergeIterator');\n\nmodule.exports = {\n    DynamicNestedLoopJoin,\n    HashJoin,\n    NestedLoopJoin,\n    SymmetricHashJoin,\n\n    MergeStream\n};","\nlet AsyncIterator = require('asynciterator');\nlet MultiTransformIterator = AsyncIterator.MultiTransformIterator;\nlet SimpleTransformIterator = AsyncIterator.SimpleTransformIterator;\n\n// Nested Loop Join, but the values of the inner loop are determined by each value of the outer loop, possibly reducing the number of necessary checks\nclass DynamicNestedLoopJoin extends MultiTransformIterator\n{\n    constructor (left, funRight, funJoin, options)\n    {\n        super(left, options);\n\n        this.funRight = funRight;\n        this.funJoin = funJoin;\n    }\n\n    _createTransformer (leftItem)\n    {\n        return new SimpleTransformIterator(this.funRight(leftItem), { transform: (rightItem, done, push) =>\n        {\n            let result = this.funJoin(leftItem, rightItem);\n            if (result !== null)\n                push(result);\n            done();\n        }});\n    }\n}\n\nmodule.exports = DynamicNestedLoopJoin;\n","\nlet AsyncIterator = require('asynciterator').AsyncIterator;\n\n// https://en.wikipedia.org/wiki/Hash_join\nclass HashJoin extends AsyncIterator\n{\n    constructor (left, right, funHash, funJoin)\n    {\n        super();\n\n        this.addedDataListener = false;\n        this.left = left;\n        this.right = right;\n        this.funHash = funHash;\n        this.funJoin = funJoin;\n\n        this.leftMap = new Map();\n\n        this.match    = null;\n        this.matches  = [];\n        this.matchIdx = 0;\n\n        this.left.on('error', (error) => this.destroy(error));\n        this.right.on('error', (error) => this.destroy(error));\n\n        this.readable = false;\n\n        this.left.on('end', allowJoining.bind(this));\n\n        function allowJoining ()\n        {\n            if (this.leftMap.size <= 0)\n                return this.close();\n            this.readable = true;\n            this.right.on('readable', () => this.readable = true);\n            this.right.on('end', () => { if (!this.hasResults()) this._end(); });\n        }\n\n        this.on('newListener', (eventName) =>\n        {\n            if (eventName === 'data' && !this.addedDataListener)\n            {\n                this.addedDataListener = true;\n                this._addDataListener();\n            }\n        })\n    }\n\n    hasResults ()\n    {\n        return !this.right.ended || this.matchIdx < this.matches.length;\n    }\n\n    _end ()\n    {\n        super._end();\n        this.left.destroy();\n        this.right.destroy();\n    }\n\n    read ()\n    {\n        if (!this.addedDataListener)\n        {\n            this.addedDataListener = true;\n            this._addDataListener();\n        }\n\n        while(true) {\n            if (this.ended || !this.readable)\n                return null;\n\n            while (this.matchIdx < this.matches.length)\n            {\n                let item = this.matches[this.matchIdx++];\n                let result = this.funJoin(item, this.match);\n                if (result !== null)\n                    return result;\n            }\n\n            if (!this.hasResults())\n                this._end();\n\n            this.match = this.right.read();\n\n            if (this.match === null)\n            {\n                this.readable = false;\n                return null;\n            }\n\n            let hash = this.funHash(this.match);\n            this.matches = this.leftMap.get(hash) || [];\n            this.matchIdx = 0;\n        }\n    }\n\n    _addDataListener()\n    {\n        this.left.on('data', addItem.bind(this));\n\n        function addItem(item)\n        {\n            let hash = this.funHash(item);\n            if (!this.leftMap.has(hash))\n                this.leftMap.set(hash, []);\n            let arr = this.leftMap.get(hash);\n            arr.push(item);\n        }\n    }\n}\n\nmodule.exports = HashJoin;\n","\nconst { MultiTransformIterator, SimpleTransformIterator, scheduleTask } = require('asynciterator');\n\n// https://en.wikipedia.org/wiki/Nested_loop_join\nclass NestedLoopJoin extends MultiTransformIterator\n{\n    constructor (left, right, funJoin, options)\n    {\n        super(left, options);\n\n        this.right = right;\n        this.funJoin = funJoin; // function that joins 2 elements or returns null if join is not possible\n        this.on('end', () => this.right.close());\n    }\n\n    _end ()\n    {\n        super._end();\n        scheduleTask(() => this.right.destroy());\n    }\n\n    _createTransformer (leftItem)\n    {\n        return new SimpleTransformIterator(this.right.clone(), { transform: (rightItem, done, push) =>\n        {\n            let result = this.funJoin(leftItem, rightItem);\n            if (result !== null)\n                push(result);\n            done();\n        }});\n    }\n}\n\nmodule.exports = NestedLoopJoin;\n","\nlet AsyncIterator = require('asynciterator').AsyncIterator;\n\n// https://en.wikipedia.org/wiki/Symmetric_Hash_Join\nclass SymmetricHashJoin extends AsyncIterator\n{\n    constructor (left, right, funHash, funJoin)\n    {\n        super();\n\n        this.left  = left;\n        this.right = right;\n\n        this.funHash = funHash;\n        this.funJoin = funJoin;\n\n        this.usedLeft = false;\n        this.leftMap  = new Map();\n        this.rightMap = new Map();\n\n        this.on('end', () => this._cleanup() );\n\n        this.match    = null;\n        this.matches  = [];\n        this.matchIdx = 0;\n\n        if (this.left.readable || this.right.readable)\n        {\n            this.readable = true;\n        }\n\n        this.left.on('error', (error) => this.destroy(error));\n        this.right.on('error', (error) => this.destroy(error));\n\n        this.left.on('readable', () => this.readable = true);\n        this.right.on('readable', () => this.readable = true);\n\n        // this needs to be here since it's possible the left/right streams only get ended after there are no more results left\n        this.left.on ('end', () => { if (!this.hasResults()) this._end(); });\n        this.right.on('end', () => { if (!this.hasResults()) this._end(); });\n    }\n\n    hasResults()\n    {\n        // The \"!!this.match\" condition was added as a workaround to race\n        // conditions and/or duplicate \"end\" events that may lead to premature\n        // cleanups of the \"this.matches\" array.\n        // See https://github.com/joachimvh/asyncjoin/issues/7\n        return !this.left.ended  || !this.right.ended || (!!this.matches && this.matchIdx < this.matches.length);\n    }\n\n    _cleanup ()\n    {\n        // motivate garbage collector to remove these\n        this.leftMap = null;\n        this.rightMap = null;\n        this.matches = null;\n    }\n\n    _end ()\n    {\n        super._end();\n        this.left.destroy();\n        this.right.destroy();\n    }\n\n    read ()\n    {\n        while(true){\n            if (this.ended)\n                return null;\n\n            while (this.matchIdx < this.matches.length)\n            {\n                let item = this.matches[this.matchIdx++];\n                let result = this.usedLeft ? this.funJoin(this.match, item) : this.funJoin(item, this.match);\n                if (result !== null)\n                    return result;\n            }\n\n            if (!this.hasResults())\n                this._end();\n\n            let item = null;\n            // try both streams if the first one has no value\n            for (let i = 0; i < 2; ++i)\n            {\n                item = this.usedLeft ? this.right.read() : this.left.read();\n                this.usedLeft = !this.usedLeft; // try other stream next time\n\n                // found a result, no need to check the other stream this run\n                if (item !== null)\n                    break;\n            }\n\n            if (this.done || item === null)\n            {\n                this.readable = false;\n                return null;\n            }\n\n            let hash = this.funHash(item);\n            let map = this.usedLeft ? this.leftMap : this.rightMap;\n            if (!map.has(hash))\n                map.set(hash, []);\n            let arr = map.get(hash);\n            arr.push(item);\n\n            this.match = item;\n            this.matches = (this.usedLeft ? this.rightMap : this.leftMap).get(hash) || [];\n            this.matchIdx = 0;\n        }\n    }\n}\n\nmodule.exports = SymmetricHashJoin;\n","\nlet AsyncIterator = require('asynciterator').AsyncIterator;\n\n// merges the contents of multiple streams\nclass MergeIterator extends AsyncIterator\n{\n    constructor (streams)\n    {\n        super();\n        \n        if (!Array.isArray(streams))\n            streams = Array.prototype.slice.call(arguments);\n        \n        this.streams = streams;\n        \n        for (let stream of streams)\n        {\n            stream.on('readable', () => this.emit('readable'));\n            stream.on('end', () => this._removeStream(stream));\n        }\n        \n        if (this.streams.length === 0)\n            this.close();\n        \n        this.idx = this.streams.length-1;\n    }\n    \n    _removeStream (stream)\n    {\n        let idx = this.streams.indexOf(stream);\n        if (idx < 0)\n            return;\n        \n        this.streams.splice(idx, 1);\n        if (this.idx >= this.streams.length)\n            --this.idx;\n        \n        if (this.streams.length === 0)\n            this._end();\n    }\n    \n    close ()\n    {\n        super.close();\n        for (let stream of this.streams)\n            stream.close();\n    }\n    \n    read ()\n    {\n        for (let attempts = 0; attempts < this.streams.length; ++attempts)\n        {\n            this.idx = (this.idx + 1) % this.streams.length;\n            let item = this.streams[this.idx].read();\n            if (item !== null)\n                return item;\n        }\n        \n        return null;\n    }\n}\n\nmodule.exports = MergeIterator;","module.exports = function(variables) {\nfunction getVariableValue(name) {\n  if (!variables || !(name in variables)) {\n    throw new Error('Undefined variable: ' + name);\n  }\n  return variables[name];\n}\nconst df_455_1 = new (require('@comunica/logger-void').LoggerVoid)();\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_init__3_0_0_components_ActorInit_jsonld_ActorInit_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^3.0.0/components/ActorInit.jsonld#ActorInit_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_context_preprocess__3_0_0_components_ActorContextPreprocess_jsonld_ActorContextPreprocess_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^3.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_hash_bindings__3_0_0_components_ActorHashBindings_jsonld_ActorHashBindings_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^3.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^3.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_parse__3_0_0_components_ActorQueryParse_jsonld_ActorQueryParse_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^3.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^3.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_source_identify_hypermedia__3_0_0_components_ActorQuerySourceIdentifyHypermedia_jsonld_ActorQuerySourceIdentifyHypermedia_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify-hypermedia/^3.0.0/components/ActorQuerySourceIdentifyHypermedia.jsonld#ActorQuerySourceIdentifyHypermedia_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join_entries_sort__3_0_0_components_ActorRdfJoinEntriesSort_jsonld_ActorRdfJoinEntriesSort_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^3.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join_selectivity__3_0_0_components_ActorRdfJoinSelectivity_jsonld_ActorRdfJoinSelectivity_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^3.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata_accumulate__3_0_0_components_ActorRdfMetadataAccumulate_jsonld_ActorRdfMetadataAccumulate_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^3.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_serialize__3_0_0_components_ActorRdfSerialize_jsonld_ActorRdfSerialize_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^3.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_update_quads__3_0_0_components_ActorRdfUpdateQuads_jsonld_ActorRdfUpdateQuads_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^3.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus = new (require('@comunica/bus-query-operation').BusQueryOperation)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^3.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_process__3_0_0_components_ActorQueryProcess_jsonld_ActorQueryProcess_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^3.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_source_identify__3_0_0_components_ActorQuerySourceIdentify_jsonld_ActorQuerySourceIdentify_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^3.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^3.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http_invalidate__3_0_0_components_ActorHttpInvalidate_jsonld_ActorHttpInvalidate_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^3.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http__3_0_0_components_ActorHttp_jsonld_ActorHttp_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^3.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http__3_0_0_components_ActorHttp_jsonld_ActorHttp_fallback_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^3.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_merge_bindings_context__3_0_0_components_ActorMergeBindingsContext_jsonld_ActorMergeBindingsContext_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^3.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_dereference_rdf__3_0_0_components_ActorDereferenceRdf_jsonld_ActorDereferenceRdf_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^3.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata__3_0_0_components_ActorRdfMetadata_jsonld_ActorRdfMetadata_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^3.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata_extract__3_0_0_components_ActorRdfMetadataExtract_jsonld_ActorRdfMetadataExtract_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^3.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_resolve_hypermedia_links__3_0_0_components_ActorRdfResolveHypermediaLinks_jsonld_ActorRdfResolveHypermediaLinks_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^3.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus'\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_resolve_hypermedia_links_queue__3_0_0_components_ActorRdfResolveHypermediaLinksQueue_jsonld_ActorRdfResolveHypermediaLinksQueue_default_bus = new (require('@comunica/core').Bus)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^3.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus'\n});\nconst urn_comunica_default_context_preprocess_actors_convert_shortcuts = new (require('@comunica/actor-context-preprocess-convert-shortcuts').ActorContextPreprocessConvertShortcuts)({\n  'contextKeyShortcuts': {\"baseIRI\":\"@comunica/actor-init-query:baseIRI\",\"datetime\":\"@comunica/actor-http-memento:datetime\",\"destination\":\"@comunica/bus-rdf-update-quads:destination\",\"explain\":\"@comunica/actor-init-query:explain\",\"extensionFunctionCreator\":\"@comunica/actor-init-query:extensionFunctionCreator\",\"extensionFunctions\":\"@comunica/actor-init-query:extensionFunctions\",\"fetch\":\"@comunica/bus-http:fetch\",\"functionArgumentsCache\":\"@comunica/actor-init-query:functionArgumentsCache\",\"httpAuth\":\"@comunica/bus-http:auth\",\"httpBodyTimeout\":\"@comunica/bus-http:http-body-timeout\",\"httpIncludeCredentials\":\"@comunica/bus-http:include-credentials\",\"httpProxyHandler\":\"@comunica/actor-http-proxy:httpProxyHandler\",\"httpRetryCount\":\"@comunica/bus-http:http-retry-count\",\"httpRetryDelay\":\"@comunica/bus-http:http-retry-delay\",\"httpRetryOnServerError\":\"@comunica/bus-http:http-retry-on-server-error\",\"httpTimeout\":\"@comunica/bus-http:http-timeout\",\"initialBindings\":\"@comunica/actor-init-query:initialBindings\",\"lenient\":\"@comunica/actor-init-query:lenient\",\"log\":\"@comunica/core:log\",\"noCache\":\"@comunica/actor-init-query:noCache\",\"queryFormat\":\"@comunica/actor-init-query:queryFormat\",\"queryTimestamp\":\"@comunica/actor-init-query:queryTimestamp\",\"readOnly\":\"@comunica/bus-query-operation:readOnly\",\"recoverBrokenLinks\":\"@comunica/bus-http-wayback:recover-broken-links\",\"sources\":\"@comunica/actor-init-query:querySourcesUnidentified\",\"traverse\":\"@comunica/bus-query-source-identify:traverse\",\"unionDefaultGraph\":\"@comunica/bus-query-operation:unionDefaultGraph\"},\n  'name': 'urn:comunica:default:context-preprocess/actors#convert-shortcuts',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_context_preprocess__3_0_0_components_ActorContextPreprocess_jsonld_ActorContextPreprocess_default_bus\n});\nconst urn_comunica_default_context_preprocess_actors_set_defaults = new (require('@comunica/actor-context-preprocess-set-defaults').ActorContextPreprocessSetDefaults)({\n  'logger': df_455_1,\n  'name': 'urn:comunica:default:context-preprocess/actors#set-defaults',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_context_preprocess__3_0_0_components_ActorContextPreprocess_jsonld_ActorContextPreprocess_default_bus\n});\nconst urn_comunica_default_context_preprocess_actors_source_to_destination = new (require('@comunica/actor-context-preprocess-source-to-destination').ActorContextPreprocessSourceToDestination)({\n  'name': 'urn:comunica:default:context-preprocess/actors#source-to-destination',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_context_preprocess__3_0_0_components_ActorContextPreprocess_jsonld_ActorContextPreprocess_default_bus\n});\nconst urn_comunica_default_context_preprocess_actors_query_source_skolemize = new (require('@comunica/actor-context-preprocess-query-source-skolemize').ActorContextPreprocessQuerySourceSkolemize)({\n  'name': 'urn:comunica:default:context-preprocess/actors#query-source-skolemize',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_context_preprocess__3_0_0_components_ActorContextPreprocess_jsonld_ActorContextPreprocess_default_bus\n});\nconst urn_comunica_default_context_preprocess_mediators_main = new (require('@comunica/mediator-combine-pipeline').MediatorCombinePipeline)({\n  'name': 'urn:comunica:default:context-preprocess/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_context_preprocess__3_0_0_components_ActorContextPreprocess_jsonld_ActorContextPreprocess_default_bus\n});\nconst urn_comunica_default_hash_bindings_actors_sha1 = new (require('@comunica/actor-hash-bindings-sha1').ActorHashBindingsSha1)({\n  'name': 'urn:comunica:default:hash-bindings/actors#sha1',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_hash_bindings__3_0_0_components_ActorHashBindings_jsonld_ActorHashBindings_default_bus\n});\nconst urn_comunica_default_hash_bindings_mediators_main = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:hash-bindings/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_hash_bindings__3_0_0_components_ActorHashBindings_jsonld_ActorHashBindings_default_bus\n});\nconst urn_comunica_default_optimize_query_operation_actors_rewrite_copy = new (require('@comunica/actor-optimize-query-operation-rewrite-copy').ActorOptimizeQueryOperationRewriteCopy)({\n  'name': 'urn:comunica:default:optimize-query-operation/actors#rewrite-copy',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus\n});\nconst urn_comunica_default_optimize_query_operation_actors_rewrite_move = new (require('@comunica/actor-optimize-query-operation-rewrite-move').ActorOptimizeQueryOperationRewriteMove)({\n  'name': 'urn:comunica:default:optimize-query-operation/actors#rewrite-move',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus\n});\nconst urn_comunica_default_optimize_query_operation_actors_rewrite_add = new (require('@comunica/actor-optimize-query-operation-rewrite-add').ActorOptimizeQueryOperationRewriteAdd)({\n  'name': 'urn:comunica:default:optimize-query-operation/actors#rewrite-add',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus\n});\nconst urn_comunica_default_optimize_query_operation_actors_group_sources = new (require('@comunica/actor-optimize-query-operation-group-sources').ActorOptimizeQueryOperationGroupSources)({\n  'name': 'urn:comunica:default:optimize-query-operation/actors#group-sources',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus\n});\nconst urn_comunica_default_optimize_query_operation_mediators_main = new (require('@comunica/mediator-combine-pipeline').MediatorCombinePipeline)({\n  'filterErrors': true,\n  'name': 'urn:comunica:default:optimize-query-operation/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus\n});\nconst urn_comunica_default_query_parse_actors_sparql = new (require('@comunica/actor-query-parse-sparql').ActorQueryParseSparql)({\n  'prefixes': {\"dbpedia\":\"http://dbpedia.org/resource/\",\"dbpedia-owl\":\"http://dbpedia.org/ontology/\",\"dbpprop\":\"http://dbpedia.org/property/\",\"dc\":\"http://purl.org/dc/terms/\",\"dc11\":\"http://purl.org/dc/elements/1.1/\",\"dcterms\":\"http://purl.org/dc/terms/\",\"foaf\":\"http://xmlns.com/foaf/0.1/\",\"geo\":\"http://www.w3.org/2003/01/geo/wgs84_pos#\",\"owl\":\"http://www.w3.org/2002/07/owl#\",\"rdf\":\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\"rdfs\":\"http://www.w3.org/2000/01/rdf-schema#\",\"schema\":\"http://schema.org/\",\"skos\":\"http://www.w3.org/2008/05/skos#\",\"xsd\":\"http://www.w3.org/2001/XMLSchema#\"},\n  'name': 'urn:comunica:default:query-parse/actors#sparql',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_parse__3_0_0_components_ActorQueryParse_jsonld_ActorQueryParse_default_bus\n});\nconst urn_comunica_default_query_parse_actors_graphql = new (require('@comunica/actor-query-parse-graphql').ActorQueryParseGraphql)({\n  'name': 'urn:comunica:default:query-parse/actors#graphql',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_parse__3_0_0_components_ActorQueryParse_jsonld_ActorQueryParse_default_bus\n});\nconst urn_comunica_default_query_parse_mediators_main = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:query-parse/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_parse__3_0_0_components_ActorQueryParse_jsonld_ActorQueryParse_default_bus\n});\nconst urn_comunica_default_query_result_serialize_actors_json = new (require('@comunica/actor-query-result-serialize-json').ActorQueryResultSerializeJson)({\n  'mediaTypePriorities': {\"application/json\":1},\n  'mediaTypeFormats': {\"application/json\":\"https://comunica.linkeddatafragments.org/#results_JSON\"},\n  'name': 'urn:comunica:default:query-result-serialize/actors#json',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_result_serialize_actors_simple = new (require('@comunica/actor-query-result-serialize-simple').ActorQueryResultSerializeSimple)({\n  'mediaTypePriorities': {\"simple\":0.9},\n  'mediaTypeFormats': {\"simple\":\"https://comunica.linkeddatafragments.org/#results_simple\"},\n  'name': 'urn:comunica:default:query-result-serialize/actors#simple',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_result_serialize_actors_csv = new (require('@comunica/actor-query-result-serialize-sparql-csv').ActorQueryResultSerializeSparqlCsv)({\n  'mediaTypePriorities': {\"text/csv\":0.75},\n  'mediaTypeFormats': {\"text/csv\":\"http://www.w3.org/ns/formats/SPARQL_Results_CSV\"},\n  'name': 'urn:comunica:default:query-result-serialize/actors#csv',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_result_serialize_actors_sparql_tsv = new (require('@comunica/actor-query-result-serialize-sparql-tsv').ActorQueryResultSerializeSparqlTsv)({\n  'mediaTypePriorities': {\"text/tab-separated-values\":0.75},\n  'mediaTypeFormats': {\"text/tab-separated-values\":\"http://www.w3.org/ns/formats/SPARQL_Results_TSV\"},\n  'name': 'urn:comunica:default:query-result-serialize/actors#sparql-tsv',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_result_serialize_actors_sparql_xml = new (require('@comunica/actor-query-result-serialize-sparql-xml').ActorQueryResultSerializeSparqlXml)({\n  'mediaTypePriorities': {\"application/sparql-results+xml\":0.8},\n  'mediaTypeFormats': {\"application/sparql-results+xml\":\"http://www.w3.org/ns/formats/SPARQL_Results_XML\"},\n  'name': 'urn:comunica:default:query-result-serialize/actors#sparql-xml',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_result_serialize_actors_table = new (require('@comunica/actor-query-result-serialize-table').ActorQueryResultSerializeTable)({\n  'columnWidth': 50,\n  'mediaTypePriorities': {\"table\":0.6},\n  'mediaTypeFormats': {\"table\":\"https://comunica.linkeddatafragments.org/#results_table\"},\n  'name': 'urn:comunica:default:query-result-serialize/actors#table',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_result_serialize_actors_tree = new (require('@comunica/actor-query-result-serialize-tree').ActorQueryResultSerializeTree)({\n  'mediaTypePriorities': {\"tree\":0.5},\n  'mediaTypeFormats': {\"tree\":\"https://comunica.linkeddatafragments.org/#results_tree\"},\n  'name': 'urn:comunica:default:query-result-serialize/actors#tree',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_result_serialize_mediators_serialize = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:query-result-serialize/mediators#serialize',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_result_serialize_mediators_mediaType = new (require('@comunica/mediator-combine-union').MediatorCombineUnion)({\n  'field': 'mediaTypes',\n  'name': 'urn:comunica:default:query-result-serialize/mediators#mediaType',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_result_serialize_mediators_mediaTypeFormat = new (require('@comunica/mediator-combine-union').MediatorCombineUnion)({\n  'field': 'mediaTypeFormats',\n  'name': 'urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_source_identify_hypermedia_mediators_main = new (require('@comunica/mediator-number').MediatorNumber)({\n  'field': 'filterFactor',\n  'type': 'max',\n  'ignoreErrors': true,\n  'name': 'urn:comunica:default:query-source-identify-hypermedia/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_source_identify_hypermedia__3_0_0_components_ActorQuerySourceIdentifyHypermedia_jsonld_ActorQuerySourceIdentifyHypermedia_default_bus\n});\nconst urn_comunica_default_rdf_join_entries_sort_actors_cardinality = new (require('@comunica/actor-rdf-join-entries-sort-cardinality').ActorRdfJoinEntriesSortCardinality)({\n  'name': 'urn:comunica:default:rdf-join-entries-sort/actors#cardinality',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join_entries_sort__3_0_0_components_ActorRdfJoinEntriesSort_jsonld_ActorRdfJoinEntriesSort_default_bus\n});\nconst urn_comunica_default_rdf_join_entries_sort_mediators_main = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:rdf-join-entries-sort/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join_entries_sort__3_0_0_components_ActorRdfJoinEntriesSort_jsonld_ActorRdfJoinEntriesSort_default_bus\n});\nconst urn_comunica_default_rdf_join_selectivity_actors_variable_counting = new (require('@comunica/actor-rdf-join-selectivity-variable-counting').ActorRdfJoinSelectivityVariableCounting)({\n  'name': 'urn:comunica:default:rdf-join-selectivity/actors#variable-counting',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join_selectivity__3_0_0_components_ActorRdfJoinSelectivity_jsonld_ActorRdfJoinSelectivity_default_bus\n});\nconst urn_comunica_default_rdf_join_selectivity_mediators_main = new (require('@comunica/mediator-number').MediatorNumber)({\n  'field': 'accuracy',\n  'type': 'max',\n  'ignoreErrors': true,\n  'name': 'urn:comunica:default:rdf-join-selectivity/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join_selectivity__3_0_0_components_ActorRdfJoinSelectivity_jsonld_ActorRdfJoinSelectivity_default_bus\n});\nconst urn_comunica_default_rdf_metadata_accumulate_actors_cancontainundefs = new (require('@comunica/actor-rdf-metadata-accumulate-cancontainundefs').ActorRdfMetadataAccumulateCanContainUndefs)({\n  'name': 'urn:comunica:default:rdf-metadata-accumulate/actors#cancontainundefs',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata_accumulate__3_0_0_components_ActorRdfMetadataAccumulate_jsonld_ActorRdfMetadataAccumulate_default_bus\n});\nconst urn_comunica_default_rdf_metadata_accumulate_actors_cardinality = new (require('@comunica/actor-rdf-metadata-accumulate-cardinality').ActorRdfMetadataAccumulateCardinality)({\n  'name': 'urn:comunica:default:rdf-metadata-accumulate/actors#cardinality',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata_accumulate__3_0_0_components_ActorRdfMetadataAccumulate_jsonld_ActorRdfMetadataAccumulate_default_bus\n});\nconst urn_comunica_default_rdf_metadata_accumulate_actors_pagesize = new (require('@comunica/actor-rdf-metadata-accumulate-pagesize').ActorRdfMetadataAccumulatePageSize)({\n  'name': 'urn:comunica:default:rdf-metadata-accumulate/actors#pagesize',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata_accumulate__3_0_0_components_ActorRdfMetadataAccumulate_jsonld_ActorRdfMetadataAccumulate_default_bus\n});\nconst urn_comunica_default_rdf_metadata_accumulate_actors_requesttime = new (require('@comunica/actor-rdf-metadata-accumulate-requesttime').ActorRdfMetadataAccumulateRequestTime)({\n  'name': 'urn:comunica:default:rdf-metadata-accumulate/actors#requesttime',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata_accumulate__3_0_0_components_ActorRdfMetadataAccumulate_jsonld_ActorRdfMetadataAccumulate_default_bus\n});\nconst urn_comunica_default_rdf_metadata_accumulate_mediators_main = new (require('@comunica/mediator-combine-union').MediatorCombineUnion)({\n  'field': 'metadata',\n  'name': 'urn:comunica:default:rdf-metadata-accumulate/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata_accumulate__3_0_0_components_ActorRdfMetadataAccumulate_jsonld_ActorRdfMetadataAccumulate_default_bus\n});\nconst urn_comunica_default_rdf_serialize_actors_n3 = new (require('@comunica/actor-rdf-serialize-n3').ActorRdfSerializeN3)({\n  'mediaTypePriorities': {\"application/n-quads\":1,\"application/n-triples\":0.8,\"application/trig\":0.95,\"text/n3\":0.35,\"text/turtle\":0.6},\n  'mediaTypeFormats': {\"application/n-quads\":\"http://www.w3.org/ns/formats/N-Quads\",\"application/n-triples\":\"http://www.w3.org/ns/formats/N-Triples\",\"application/trig\":\"http://www.w3.org/ns/formats/TriG\",\"text/n3\":\"http://www.w3.org/ns/formats/N3\",\"text/turtle\":\"http://www.w3.org/ns/formats/Turtle\"},\n  'name': 'urn:comunica:default:rdf-serialize/actors#n3',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_serialize__3_0_0_components_ActorRdfSerialize_jsonld_ActorRdfSerialize_default_bus\n});\nconst urn_comunica_default_rdf_serialize_actors_jsonld = new (require('@comunica/actor-rdf-serialize-jsonld').ActorRdfSerializeJsonLd)({\n  'jsonStringifyIndentSpaces': 2,\n  'mediaTypePriorities': {\"application/ld+json\":1},\n  'mediaTypeFormats': {\"application/ld+json\":\"http://www.w3.org/ns/formats/JSON-LD\"},\n  'priorityScale': 0.9,\n  'name': 'urn:comunica:default:rdf-serialize/actors#jsonld',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_serialize__3_0_0_components_ActorRdfSerialize_jsonld_ActorRdfSerialize_default_bus\n});\nconst urn_comunica_default_rdf_serialize_actors_shaclc = new (require('@comunica/actor-rdf-serialize-shaclc').ActorRdfSerializeShaclc)({\n  'mediaTypePriorities': {\"text/shaclc\":1,\"text/shaclc-ext\":0.5},\n  'mediaTypeFormats': {\"text/shaclc\":\"http://www.w3.org/ns/formats/Shaclc\",\"text/shaclc-ext\":\"http://www.w3.org/ns/formats/ShaclcExtended\"},\n  'priorityScale': 0.1,\n  'name': 'urn:comunica:default:rdf-serialize/actors#shaclc',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_serialize__3_0_0_components_ActorRdfSerialize_jsonld_ActorRdfSerialize_default_bus\n});\nconst urn_comunica_default_rdf_serialize_mediators_serialize = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:rdf-serialize/mediators#serialize',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_serialize__3_0_0_components_ActorRdfSerialize_jsonld_ActorRdfSerialize_default_bus\n});\nconst urn_comunica_default_rdf_serialize_mediators_mediaType = new (require('@comunica/mediator-combine-union').MediatorCombineUnion)({\n  'field': 'mediaTypes',\n  'name': 'urn:comunica:default:rdf-serialize/mediators#mediaType',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_serialize__3_0_0_components_ActorRdfSerialize_jsonld_ActorRdfSerialize_default_bus\n});\nconst urn_comunica_default_rdf_serialize_mediators_mediaTypeFormat = new (require('@comunica/mediator-combine-union').MediatorCombineUnion)({\n  'field': 'mediaTypeFormats',\n  'name': 'urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_serialize__3_0_0_components_ActorRdfSerialize_jsonld_ActorRdfSerialize_default_bus\n});\nconst urn_comunica_default_rdf_update_quads_actors_rdfjs_store = new (require('@comunica/actor-rdf-update-quads-rdfjs-store').ActorRdfUpdateQuadsRdfJsStore)({\n  'name': 'urn:comunica:default:rdf-update-quads/actors#rdfjs-store',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_update_quads__3_0_0_components_ActorRdfUpdateQuads_jsonld_ActorRdfUpdateQuads_default_bus\n});\nconst urn_comunica_default_rdf_update_quads_mediators_main = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:rdf-update-quads/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_update_quads__3_0_0_components_ActorRdfUpdateQuads_jsonld_ActorRdfUpdateQuads_default_bus\n});\nconst urn_comunica_default_query_operation_actors_source = new (require('@comunica/actor-query-operation-source').ActorQueryOperationSource)({\n  'name': 'urn:comunica:default:query-operation/actors#source',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_mediators_main = new (require('@comunica/mediator-number').MediatorNumber)({\n  'field': 'httpRequests',\n  'type': 'min',\n  'ignoreErrors': true,\n  'name': 'urn:comunica:default:query-operation/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_process_mediators_main = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:query-process/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_process__3_0_0_components_ActorQueryProcess_jsonld_ActorQueryProcess_default_bus\n});\nconst urn_comunica_default_query_source_identify_mediators_main = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:query-source-identify/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_source_identify__3_0_0_components_ActorQuerySourceIdentify_jsonld_ActorQuerySourceIdentify_default_bus\n});\nconst urn_comunica_default_rdf_join_mediators_main = new (require('@comunica/mediator-join-coefficients-fixed').MediatorJoinCoefficientsFixed)({\n  'cpuWeight': 10,\n  'memoryWeight': 1,\n  'timeWeight': 2,\n  'ioWeight': 100,\n  'name': 'urn:comunica:default:rdf-join/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_context_preprocess_query_source_identify__3_0_0_components_ActorContextPreprocessQuerySourceIdentify_jsonld_IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator = new (require('@comunica/bus-http-invalidate').ActorHttpInvalidateListenable)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^3.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http_invalidate__3_0_0_components_ActorHttpInvalidate_jsonld_ActorHttpInvalidate_default_bus\n});\nconst urn_comunica_default_http_invalidate_mediators_main = new (require('@comunica/mediator-all').MediatorAll)({\n  'name': 'urn:comunica:default:http-invalidate/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http_invalidate__3_0_0_components_ActorHttpInvalidate_jsonld_ActorHttpInvalidate_default_bus\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_sparql_json__3_0_0_components_ActionObserverHttp_jsonld_IActionObserverHttpArgs_default_invalidator = new (require('@comunica/bus-http-invalidate').ActorHttpInvalidateListenable)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^3.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http_invalidate__3_0_0_components_ActorHttpInvalidate_jsonld_ActorHttpInvalidate_default_bus\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_stats__3_0_0_components_ActionObserverHttp_jsonld_IActionObserverHttpArgs_default_invalidator = new (require('@comunica/bus-http-invalidate').ActorHttpInvalidateListenable)({\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^3.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http_invalidate__3_0_0_components_ActorHttpInvalidate_jsonld_ActorHttpInvalidate_default_bus\n});\nconst urn_comunica_default_http_mediators_main = new (require('@comunica/mediator-number').MediatorNumber)({\n  'field': 'time',\n  'type': 'min',\n  'ignoreErrors': true,\n  'name': 'urn:comunica:default:http/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http__3_0_0_components_ActorHttp_jsonld_ActorHttp_fallback_bus\n});\nconst urn_comunica_default_merge_bindings_context_mediators_main = new (require('@comunica/mediator-combine-union').MediatorCombineUnion)({\n  'field': 'mergeHandlers',\n  'name': 'urn:comunica:default:merge-bindings-context/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_merge_bindings_context__3_0_0_components_ActorMergeBindingsContext_jsonld_ActorMergeBindingsContext_default_bus\n});\nconst urn_comunica_default_dereference_rdf_mediators_main = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:dereference-rdf/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_dereference_rdf__3_0_0_components_ActorDereferenceRdf_jsonld_ActorDereferenceRdf_default_bus\n});\nconst urn_comunica_default_rdf_metadata_mediators_main = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:rdf-metadata/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata__3_0_0_components_ActorRdfMetadata_jsonld_ActorRdfMetadata_default_bus\n});\nconst urn_comunica_default_rdf_metadata_extract_mediators_main = new (require('@comunica/mediator-combine-union').MediatorCombineUnion)({\n  'filterErrors': true,\n  'field': 'metadata',\n  'name': 'urn:comunica:default:rdf-metadata-extract/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata_extract__3_0_0_components_ActorRdfMetadataExtract_jsonld_ActorRdfMetadataExtract_default_bus\n});\nconst urn_comunica_default_rdf_resolve_hypermedia_links_mediators_main = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_resolve_hypermedia_links__3_0_0_components_ActorRdfResolveHypermediaLinks_jsonld_ActorRdfResolveHypermediaLinks_default_bus\n});\nconst urn_comunica_default_rdf_resolve_hypermedia_links_queue_mediators_main = new (require('@comunica/mediator-race').MediatorRace)({\n  'name': 'urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_resolve_hypermedia_links_queue__3_0_0_components_ActorRdfResolveHypermediaLinksQueue_jsonld_ActorRdfResolveHypermediaLinksQueue_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_inner_single = new (require('@comunica/actor-rdf-join-inner-single').ActorRdfJoinSingle)({\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#inner-single',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_inner_multi_empty = new (require('@comunica/actor-rdf-join-inner-multi-empty').ActorRdfJoinMultiEmpty)({\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#inner-multi-empty',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_inner_multi_bind_source = new (require('@comunica/actor-rdf-join-inner-multi-bind-source').ActorRdfJoinMultiBindSource)({\n  'selectivityModifier': 0.0001,\n  'blockSize': 16,\n  'mediatorJoinEntriesSort': urn_comunica_default_rdf_join_entries_sort_mediators_main,\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#inner-multi-bind-source',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_inner_hash = new (require('@comunica/actor-rdf-join-inner-hash').ActorRdfJoinHash)({\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#inner-hash',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_inner_symmetric_hash = new (require('@comunica/actor-rdf-join-inner-symmetrichash').ActorRdfJoinSymmetricHash)({\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#inner-symmetric-hash',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_inner_nested_loop = new (require('@comunica/actor-rdf-join-inner-nestedloop').ActorRdfJoinNestedLoop)({\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#inner-nested-loop',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_minus_hash = new (require('@comunica/actor-rdf-join-minus-hash').ActorRdfJoinMinusHash)({\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#minus-hash',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_minus_hash_undef = new (require('@comunica/actor-rdf-join-minus-hash-undef').ActorRdfJoinMinusHashUndef)({\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#minus-hash-undef',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_optional_nested_loop = new (require('@comunica/actor-rdf-join-optional-nestedloop').ActorRdfJoinOptionalNestedLoop)({\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#optional-nested-loop',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_query_result_serialize_actors_rdf = new (require('@comunica/actor-query-result-serialize-rdf').ActorQueryResultSerializeRdf)({\n  'mediatorRdfSerialize': urn_comunica_default_rdf_serialize_mediators_serialize,\n  'mediatorMediaTypeCombiner': urn_comunica_default_rdf_serialize_mediators_mediaType,\n  'mediatorMediaTypeFormatCombiner': urn_comunica_default_rdf_serialize_mediators_mediaTypeFormat,\n  'name': 'urn:comunica:default:query-result-serialize/actors#rdf',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_operation_actors_ask = new (require('@comunica/actor-query-operation-ask').ActorQueryOperationAsk)({\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#ask',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_bgp = new (require('@comunica/actor-query-operation-bgp-join').ActorQueryOperationBgpJoin)({\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#bgp',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_construct = new (require('@comunica/actor-query-operation-construct').ActorQueryOperationConstruct)({\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#construct',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_distinct = new (require('@comunica/actor-query-operation-distinct-hash').ActorQueryOperationDistinctHash)({\n  'mediatorHashBindings': urn_comunica_default_hash_bindings_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#distinct',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_from = new (require('@comunica/actor-query-operation-from-quad').ActorQueryOperationFromQuad)({\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#from',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_project = new (require('@comunica/actor-query-operation-project').ActorQueryOperationProject)({\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#project',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_reduced = new (require('@comunica/actor-query-operation-reduced-hash').ActorQueryOperationReducedHash)({\n  'mediatorHashBindings': urn_comunica_default_hash_bindings_mediators_main,\n  'cacheSize': 100,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#reduced',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_slice = new (require('@comunica/actor-query-operation-slice').ActorQueryOperationSlice)({\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#slice',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_union = new (require('@comunica/actor-query-operation-union').ActorQueryOperationUnion)({\n  'mediatorRdfMetadataAccumulate': urn_comunica_default_rdf_metadata_accumulate_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#union',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_path_alt = new (require('@comunica/actor-query-operation-path-alt').ActorQueryOperationPathAlt)({\n  'mediatorRdfMetadataAccumulate': urn_comunica_default_rdf_metadata_accumulate_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#path-alt',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_path_inv = new (require('@comunica/actor-query-operation-path-inv').ActorQueryOperationPathInv)({\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#path-inv',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_path_link = new (require('@comunica/actor-query-operation-path-link').ActorQueryOperationPathLink)({\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#path-link',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_path_nps = new (require('@comunica/actor-query-operation-path-nps').ActorQueryOperationPathNps)({\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#path-nps',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_update_clear = new (require('@comunica/actor-query-operation-update-clear').ActorQueryOperationClear)({\n  'mediatorUpdateQuads': urn_comunica_default_rdf_update_quads_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#update-clear',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_update_composite = new (require('@comunica/actor-query-operation-update-compositeupdate').ActorQueryOperationUpdateCompositeUpdate)({\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#update-composite',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_update_create = new (require('@comunica/actor-query-operation-update-create').ActorQueryOperationCreate)({\n  'mediatorUpdateQuads': urn_comunica_default_rdf_update_quads_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#update-create',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_update_drop = new (require('@comunica/actor-query-operation-update-drop').ActorQueryOperationDrop)({\n  'mediatorUpdateQuads': urn_comunica_default_rdf_update_quads_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#update-drop',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_update_load = new (require('@comunica/actor-query-operation-update-load').ActorQueryOperationLoad)({\n  'mediatorUpdateQuads': urn_comunica_default_rdf_update_quads_mediators_main,\n  'mediatorQuerySourceIdentify': urn_comunica_default_query_source_identify_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#update-load',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_join = new (require('@comunica/actor-query-operation-join').ActorQueryOperationJoin)({\n  'mediatorJoin': urn_comunica_default_rdf_join_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#join',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_minus = new (require('@comunica/actor-query-operation-minus').ActorQueryOperationMinus)({\n  'mediatorJoin': urn_comunica_default_rdf_join_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#minus',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_path_seq = new (require('@comunica/actor-query-operation-path-seq').ActorQueryOperationPathSeq)({\n  'mediatorJoin': urn_comunica_default_rdf_join_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#path-seq',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_inner_multi_smallest = new (require('@comunica/actor-rdf-join-inner-multi-smallest').ActorRdfJoinMultiSmallest)({\n  'mediatorJoinEntriesSort': urn_comunica_default_rdf_join_entries_sort_mediators_main,\n  'mediatorJoin': urn_comunica_default_rdf_join_mediators_main,\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#inner-multi-smallest',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_inner_multi_smallest_filter_bindings = new (require('@comunica/actor-rdf-join-inner-multi-smallest-filter-bindings').ActorRdfJoinMultiSmallestFilterBindings)({\n  'selectivityModifier': 0.0001,\n  'blockSize': 64,\n  'mediatorJoinEntriesSort': urn_comunica_default_rdf_join_entries_sort_mediators_main,\n  'mediatorJoin': urn_comunica_default_rdf_join_mediators_main,\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_optimize_query_operation_actors_filter_pushdown = new (require('@comunica/actor-optimize-query-operation-filter-pushdown').ActorOptimizeQueryOperationFilterPushdown)({\n  'name': 'urn:comunica:default:optimize-query-operation/actors#filter-pushdown',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus,\n  'beforeActors': [\n  urn_comunica_default_optimize_query_operation_actors_group_sources\n]\n});\nconst urn_comunica_default_context_preprocess_actors_query_source_identify = new (require('@comunica/actor-context-preprocess-query-source-identify').ActorContextPreprocessQuerySourceIdentify)({\n  'cacheSize': 100,\n  'httpInvalidator': https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_context_preprocess_query_source_identify__3_0_0_components_ActorContextPreprocessQuerySourceIdentify_jsonld_IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator,\n  'mediatorQuerySourceIdentify': urn_comunica_default_query_source_identify_mediators_main,\n  'mediatorContextPreprocess': urn_comunica_default_context_preprocess_mediators_main,\n  'name': 'urn:comunica:default:context-preprocess/actors#query-source-identify',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_context_preprocess__3_0_0_components_ActorContextPreprocess_jsonld_ActorContextPreprocess_default_bus,\n  'beforeActors': [\n  urn_comunica_default_context_preprocess_actors_query_source_skolemize\n]\n});\nconst urn_comunica_default_init_actors_query = new (require('@comunica/actor-init-query').ActorInitQuery)({\n  'mediatorQueryProcess': urn_comunica_default_query_process_mediators_main,\n  'mediatorQueryResultSerialize': urn_comunica_default_query_result_serialize_mediators_serialize,\n  'mediatorQueryResultSerializeMediaTypeCombiner': urn_comunica_default_query_result_serialize_mediators_mediaType,\n  'mediatorQueryResultSerializeMediaTypeFormatCombiner': urn_comunica_default_query_result_serialize_mediators_mediaTypeFormat,\n  'mediatorHttpInvalidate': urn_comunica_default_http_invalidate_mediators_main,\n  'defaultQueryInputFormat': 'sparql',\n  'allowNoSources': false,\n  'name': 'urn:comunica:default:init/actors#query',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_init__3_0_0_components_ActorInit_jsonld_ActorInit_default_bus\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_sparql_json__3_0_0_components_ActorQueryResultSerializeSparqlJson_jsonld_ActorQueryResultSerializeSparqlJson_default_observer = new (require('@comunica/actor-query-result-serialize-sparql-json').ActionObserverHttp)({\n  'httpInvalidator': https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_sparql_json__3_0_0_components_ActionObserverHttp_jsonld_IActionObserverHttpArgs_default_invalidator,\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^3.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http__3_0_0_components_ActorHttp_jsonld_ActorHttp_default_bus\n});\nconst https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_stats__3_0_0_components_ActorQueryResultSerializeStats_jsonld_ActorQueryResultSerializeStats_default_observer = new (require('@comunica/actor-query-result-serialize-stats').ActionObserverHttp)({\n  'httpInvalidator': https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_stats__3_0_0_components_ActionObserverHttp_jsonld_IActionObserverHttpArgs_default_invalidator,\n  'name': 'https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^3.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http__3_0_0_components_ActorHttp_jsonld_ActorHttp_default_bus\n});\nconst urn_comunica_default_rdf_resolve_quad_pattern_actors_sparql = new (require('@comunica/actor-query-source-identify-hypermedia-sparql').ActorQuerySourceIdentifyHypermediaSparql)({\n  'mediatorHttp': urn_comunica_default_http_mediators_main,\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'checkUrlSuffix': true,\n  'forceHttpGet': false,\n  'cacheSize': 1024,\n  'bindMethod': 'values',\n  'countTimeout': 3000,\n  'name': 'urn:comunica:default:rdf-resolve-quad-pattern/actors#sparql',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_source_identify_hypermedia__3_0_0_components_ActorQuerySourceIdentifyHypermedia_jsonld_ActorQuerySourceIdentifyHypermedia_default_bus\n});\nconst urn_comunica_default_query_operation_actors_extend = new (require('@comunica/actor-query-operation-extend').ActorQueryOperationExtend)({\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#extend',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_filter = new (require('@comunica/actor-query-operation-filter').ActorQueryOperationFilter)({\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#filter',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_group = new (require('@comunica/actor-query-operation-group').ActorQueryOperationGroup)({\n  'mediatorHashBindings': urn_comunica_default_hash_bindings_mediators_main,\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#group',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_leftjoin = new (require('@comunica/actor-query-operation-leftjoin').ActorQueryOperationLeftJoin)({\n  'mediatorJoin': urn_comunica_default_rdf_join_mediators_main,\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#leftjoin',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_nop = new (require('@comunica/actor-query-operation-nop').ActorQueryOperationNop)({\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#nop',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_orderby = new (require('@comunica/actor-query-operation-orderby').ActorQueryOperationOrderBy)({\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#orderby',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_service = new (require('@comunica/actor-query-operation-service').ActorQueryOperationService)({\n  'forceSparqlEndpoint': false,\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQuerySourceIdentify': urn_comunica_default_query_source_identify_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#service',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_values = new (require('@comunica/actor-query-operation-values').ActorQueryOperationValues)({\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#values',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_path_one_or_more = new (require('@comunica/actor-query-operation-path-one-or-more').ActorQueryOperationPathOneOrMore)({\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#path-one-or-more',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_path_zero_or_more = new (require('@comunica/actor-query-operation-path-zero-or-more').ActorQueryOperationPathZeroOrMore)({\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#path-zero-or-more',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_path_zero_or_one = new (require('@comunica/actor-query-operation-path-zero-or-one').ActorQueryOperationPathZeroOrOne)({\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#path-zero-or-one',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_operation_actors_update_delete_insert = new (require('@comunica/actor-query-operation-update-deleteinsert').ActorQueryOperationUpdateDeleteInsert)({\n  'mediatorUpdateQuads': urn_comunica_default_rdf_update_quads_mediators_main,\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'name': 'urn:comunica:default:query-operation/actors#update-delete-insert',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus\n});\nconst urn_comunica_default_query_process_actors_sequential = new (require('@comunica/actor-query-process-sequential').ActorQueryProcessSequential)({\n  'mediatorContextPreprocess': urn_comunica_default_context_preprocess_mediators_main,\n  'mediatorQueryParse': urn_comunica_default_query_parse_mediators_main,\n  'mediatorOptimizeQueryOperation': urn_comunica_default_optimize_query_operation_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'name': 'urn:comunica:default:query-process/actors#sequential',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_process__3_0_0_components_ActorQueryProcess_jsonld_ActorQueryProcess_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_inner_none = new (require('@comunica/actor-rdf-join-inner-none').ActorRdfJoinNone)({\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#inner-none',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_inner_multi_bind = new (require('@comunica/actor-rdf-join-inner-multi-bind').ActorRdfJoinMultiBind)({\n  'bindOrder': 'depth-first',\n  'selectivityModifier': 0.0001,\n  'mediatorJoinEntriesSort': urn_comunica_default_rdf_join_entries_sort_mediators_main,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#inner-multi-bind',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_rdf_join_actors_optional_bind = new (require('@comunica/actor-rdf-join-optional-bind').ActorRdfJoinOptionalBind)({\n  'bindOrder': 'depth-first',\n  'selectivityModifier': 0.0001,\n  'mediatorQueryOperation': urn_comunica_default_query_operation_mediators_main,\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'mediatorJoinSelectivity': urn_comunica_default_rdf_join_selectivity_mediators_main,\n  'name': 'urn:comunica:default:rdf-join/actors#optional-bind',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus\n});\nconst urn_comunica_default_query_source_identify_actors_hypermedia = new (require('@comunica/actor-query-source-identify-hypermedia').ActorQuerySourceIdentifyHypermedia)({\n  'cacheSize': 100,\n  'maxIterators': 64,\n  'aggregateTraversalStore': true,\n  'mediatorDereferenceRdf': urn_comunica_default_dereference_rdf_mediators_main,\n  'mediatorMetadata': urn_comunica_default_rdf_metadata_mediators_main,\n  'mediatorMetadataExtract': urn_comunica_default_rdf_metadata_extract_mediators_main,\n  'mediatorMetadataAccumulate': urn_comunica_default_rdf_metadata_accumulate_mediators_main,\n  'mediatorQuerySourceIdentifyHypermedia': urn_comunica_default_query_source_identify_hypermedia_mediators_main,\n  'mediatorRdfResolveHypermediaLinks': urn_comunica_default_rdf_resolve_hypermedia_links_mediators_main,\n  'mediatorRdfResolveHypermediaLinksQueue': urn_comunica_default_rdf_resolve_hypermedia_links_queue_mediators_main,\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'name': 'urn:comunica:default:query-source-identify/actors#hypermedia',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_source_identify__3_0_0_components_ActorQuerySourceIdentify_jsonld_ActorQuerySourceIdentify_default_bus\n});\nconst urn_comunica_default_query_result_serialize_actors_sparql_json = new (require('@comunica/actor-query-result-serialize-sparql-json').ActorQueryResultSerializeSparqlJson)({\n  'emitMetadata': true,\n  'httpObserver': https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_sparql_json__3_0_0_components_ActorQueryResultSerializeSparqlJson_jsonld_ActorQueryResultSerializeSparqlJson_default_observer,\n  'mediaTypePriorities': {\"application/sparql-results+json\":0.8},\n  'mediaTypeFormats': {\"application/sparql-results+json\":\"http://www.w3.org/ns/formats/SPARQL_Results_JSON\"},\n  'name': 'urn:comunica:default:query-result-serialize/actors#sparql-json',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_result_serialize_actors_stats = new (require('@comunica/actor-query-result-serialize-stats').ActorQueryResultSerializeStats)({\n  'httpObserver': https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_stats__3_0_0_components_ActorQueryResultSerializeStats_jsonld_ActorQueryResultSerializeStats_default_observer,\n  'mediaTypePriorities': {\"stats\":0.5},\n  'mediaTypeFormats': {\"stats\":\"https://comunica.linkeddatafragments.org/#results_stats\"},\n  'name': 'urn:comunica:default:query-result-serialize/actors#stats',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus\n});\nconst urn_comunica_default_query_process_actors_explain_parsed = new (require('@comunica/actor-query-process-explain-parsed').ActorQueryProcessExplainParsed)({\n  'queryProcessor': urn_comunica_default_query_process_actors_sequential,\n  'name': 'urn:comunica:default:query-process/actors#explain-parsed',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_process__3_0_0_components_ActorQueryProcess_jsonld_ActorQueryProcess_default_bus\n});\nconst urn_comunica_default_query_process_actors_explain_logical = new (require('@comunica/actor-query-process-explain-logical').ActorQueryProcessExplainLogical)({\n  'queryProcessor': urn_comunica_default_query_process_actors_sequential,\n  'name': 'urn:comunica:default:query-process/actors#explain-logical',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_process__3_0_0_components_ActorQueryProcess_jsonld_ActorQueryProcess_default_bus\n});\nconst urn_comunica_default_query_process_actors_explain_physical = new (require('@comunica/actor-query-process-explain-physical').ActorQueryProcessExplainPhysical)({\n  'queryProcessor': urn_comunica_default_query_process_actors_sequential,\n  'name': 'urn:comunica:default:query-process/actors#explain-physical',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_process__3_0_0_components_ActorQueryProcess_jsonld_ActorQueryProcess_default_bus\n});\nconst urn_comunica_default_optimize_query_operation_actors_prune_empty_source_operations = new (require('@comunica/actor-optimize-query-operation-prune-empty-source-operations').ActorOptimizeQueryOperationPruneEmptySourceOperations)({\n  'useAskIfSupported': false,\n  'name': 'urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus,\n  'beforeActors': [\n  urn_comunica_default_optimize_query_operation_actors_filter_pushdown\n]\n});\nconst urn_comunica_default_query_source_identify_actors_rdfjs = new (require('@comunica/actor-query-source-identify-rdfjs').ActorQuerySourceIdentifyRdfJs)({\n  'mediatorMergeBindingsContext': urn_comunica_default_merge_bindings_context_mediators_main,\n  'name': 'urn:comunica:default:query-source-identify/actors#rdfjs',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_source_identify__3_0_0_components_ActorQuerySourceIdentify_jsonld_ActorQuerySourceIdentify_default_bus,\n  'beforeActors': [\n  urn_comunica_default_query_source_identify_actors_hypermedia\n]\n});\nconst urn_comunica_default_optimize_query_operation_actors_join_connected = new (require('@comunica/actor-optimize-query-operation-join-connected').ActorOptimizeQueryOperationJoinConnected)({\n  'name': 'urn:comunica:default:optimize-query-operation/actors#join-connected',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus,\n  'beforeActors': [\n  urn_comunica_default_optimize_query_operation_actors_prune_empty_source_operations\n]\n});\nconst urn_comunica_default_optimize_query_operation_actors_bgp_to_join = new (require('@comunica/actor-optimize-query-operation-bgp-to-join').ActorOptimizeQueryOperationBgpToJoin)({\n  'name': 'urn:comunica:default:optimize-query-operation/actors#bgp-to-join',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus,\n  'beforeActors': [\n  urn_comunica_default_optimize_query_operation_actors_join_connected\n]\n});\nconst urn_comunica_default_optimize_query_operation_actors_join_bgp = new (require('@comunica/actor-optimize-query-operation-join-bgp').ActorOptimizeQueryOperationJoinBgp)({\n  'name': 'urn:comunica:default:optimize-query-operation/actors#join-bgp',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus,\n  'beforeActors': [\n  urn_comunica_default_optimize_query_operation_actors_bgp_to_join\n]\n});\nconst urn_comunica_default_optimize_query_operation_actors_assign_sources_exhaustive = new (require('@comunica/actor-optimize-query-operation-assign-sources-exhaustive').ActorOptimizeQueryOperationAssignSourcesExhaustive)({\n  'name': 'urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus,\n  'beforeActors': [\n  urn_comunica_default_optimize_query_operation_actors_join_bgp\n]\n});\nconst urn_comunica_default_optimize_query_operation_actors_describe_to_constructs_subject = new (require('@comunica/actor-optimize-query-operation-describe-to-constructs-subject').ActorOptimizeQueryOperationDescribeToConstructsSubject)({\n  'name': 'urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject',\n  'bus': https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus,\n  'beforeActors': [\n  urn_comunica_default_optimize_query_operation_actors_assign_sources_exhaustive\n]\n});\nconst urn_comunica_default_Runner = (https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_init__3_0_0_components_ActorInit_jsonld_ActorInit_default_bus, [\n  urn_comunica_default_context_preprocess_actors_convert_shortcuts,\n  urn_comunica_default_context_preprocess_actors_set_defaults,\n  urn_comunica_default_context_preprocess_actors_source_to_destination,\n  urn_comunica_default_context_preprocess_actors_query_source_identify,\n  urn_comunica_default_context_preprocess_actors_query_source_skolemize,\n  urn_comunica_default_hash_bindings_actors_sha1,\n  urn_comunica_default_init_actors_query,\n  urn_comunica_default_optimize_query_operation_actors_rewrite_copy,\n  urn_comunica_default_optimize_query_operation_actors_rewrite_move,\n  urn_comunica_default_optimize_query_operation_actors_rewrite_add,\n  urn_comunica_default_optimize_query_operation_actors_describe_to_constructs_subject,\n  urn_comunica_default_optimize_query_operation_actors_assign_sources_exhaustive,\n  urn_comunica_default_optimize_query_operation_actors_join_bgp,\n  urn_comunica_default_optimize_query_operation_actors_bgp_to_join,\n  urn_comunica_default_optimize_query_operation_actors_join_connected,\n  urn_comunica_default_optimize_query_operation_actors_prune_empty_source_operations,\n  urn_comunica_default_optimize_query_operation_actors_filter_pushdown,\n  urn_comunica_default_optimize_query_operation_actors_group_sources,\n  urn_comunica_default_query_parse_actors_sparql,\n  urn_comunica_default_query_parse_actors_graphql,\n  urn_comunica_default_query_result_serialize_actors_json,\n  urn_comunica_default_query_result_serialize_actors_rdf,\n  urn_comunica_default_query_result_serialize_actors_simple,\n  urn_comunica_default_query_result_serialize_actors_csv,\n  urn_comunica_default_query_result_serialize_actors_sparql_json,\n  urn_comunica_default_query_result_serialize_actors_sparql_tsv,\n  urn_comunica_default_query_result_serialize_actors_sparql_xml,\n  urn_comunica_default_query_result_serialize_actors_stats,\n  urn_comunica_default_query_result_serialize_actors_table,\n  urn_comunica_default_query_result_serialize_actors_tree,\n  urn_comunica_default_rdf_resolve_quad_pattern_actors_sparql,\n  urn_comunica_default_rdf_join_entries_sort_actors_cardinality,\n  urn_comunica_default_rdf_join_selectivity_actors_variable_counting,\n  urn_comunica_default_rdf_metadata_accumulate_actors_cancontainundefs,\n  urn_comunica_default_rdf_metadata_accumulate_actors_cardinality,\n  urn_comunica_default_rdf_metadata_accumulate_actors_pagesize,\n  urn_comunica_default_rdf_metadata_accumulate_actors_requesttime,\n  urn_comunica_default_rdf_serialize_actors_n3,\n  urn_comunica_default_rdf_serialize_actors_jsonld,\n  urn_comunica_default_rdf_serialize_actors_shaclc,\n  urn_comunica_default_rdf_update_quads_actors_rdfjs_store,\n  urn_comunica_default_query_operation_actors_ask,\n  urn_comunica_default_query_operation_actors_bgp,\n  urn_comunica_default_query_operation_actors_construct,\n  urn_comunica_default_query_operation_actors_distinct,\n  urn_comunica_default_query_operation_actors_extend,\n  urn_comunica_default_query_operation_actors_filter,\n  urn_comunica_default_query_operation_actors_from,\n  urn_comunica_default_query_operation_actors_group,\n  urn_comunica_default_query_operation_actors_join,\n  urn_comunica_default_query_operation_actors_leftjoin,\n  urn_comunica_default_query_operation_actors_minus,\n  urn_comunica_default_query_operation_actors_nop,\n  urn_comunica_default_query_operation_actors_orderby,\n  urn_comunica_default_query_operation_actors_project,\n  urn_comunica_default_query_operation_actors_reduced,\n  urn_comunica_default_query_operation_actors_service,\n  urn_comunica_default_query_operation_actors_slice,\n  urn_comunica_default_query_operation_actors_source,\n  urn_comunica_default_query_operation_actors_union,\n  urn_comunica_default_query_operation_actors_values,\n  urn_comunica_default_query_operation_actors_path_alt,\n  urn_comunica_default_query_operation_actors_path_inv,\n  urn_comunica_default_query_operation_actors_path_link,\n  urn_comunica_default_query_operation_actors_path_nps,\n  urn_comunica_default_query_operation_actors_path_one_or_more,\n  urn_comunica_default_query_operation_actors_path_seq,\n  urn_comunica_default_query_operation_actors_path_zero_or_more,\n  urn_comunica_default_query_operation_actors_path_zero_or_one,\n  urn_comunica_default_query_operation_actors_update_clear,\n  urn_comunica_default_query_operation_actors_update_composite,\n  urn_comunica_default_query_operation_actors_update_create,\n  urn_comunica_default_query_operation_actors_update_delete_insert,\n  urn_comunica_default_query_operation_actors_update_drop,\n  urn_comunica_default_query_operation_actors_update_load,\n  urn_comunica_default_query_process_actors_sequential,\n  urn_comunica_default_query_process_actors_explain_parsed,\n  urn_comunica_default_query_process_actors_explain_logical,\n  urn_comunica_default_query_process_actors_explain_physical,\n  urn_comunica_default_query_source_identify_actors_hypermedia,\n  urn_comunica_default_query_source_identify_actors_rdfjs,\n  urn_comunica_default_rdf_join_actors_inner_none,\n  urn_comunica_default_rdf_join_actors_inner_single,\n  urn_comunica_default_rdf_join_actors_inner_multi_empty,\n  urn_comunica_default_rdf_join_actors_inner_multi_bind_source,\n  urn_comunica_default_rdf_join_actors_inner_multi_bind,\n  urn_comunica_default_rdf_join_actors_inner_hash,\n  urn_comunica_default_rdf_join_actors_inner_symmetric_hash,\n  urn_comunica_default_rdf_join_actors_inner_nested_loop,\n  urn_comunica_default_rdf_join_actors_inner_multi_smallest,\n  urn_comunica_default_rdf_join_actors_inner_multi_smallest_filter_bindings,\n  urn_comunica_default_rdf_join_actors_minus_hash,\n  urn_comunica_default_rdf_join_actors_minus_hash_undef,\n  urn_comunica_default_rdf_join_actors_optional_bind,\n  urn_comunica_default_rdf_join_actors_optional_nested_loop\n]);\nreturn urn_comunica_default_init_actors_query;\n}\n\n","import { QueryEngineBase } from '@comunica/actor-init-query';\nimport type { ActorInitQueryBase } from '@comunica/actor-init-query';\nimport type { IQueryContextCommon } from '@comunica/types';\n\n// eslint-disable-next-line import/extensions,ts/no-require-imports,ts/no-var-requires\nconst engineDefault = require('../engine-default.js');\n\n/**\n * A Comunica SPARQL query engine.\n */\nexport class QueryEngine<QueryContext extends IQueryContextCommon = IQueryContextCommon>\n  extends QueryEngineBase<QueryContext> {\n  public constructor(engine: ActorInitQueryBase = engineDefault()) {\n    super(engine);\n  }\n}\n","/* eslint-disable unicorn/filename-case */\n/* eslint-enable unicorn/filename-case */\nexport * from './QueryEngine';\n","import type { IAction, IActorArgs, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { IActionContext } from '@comunica/types';\n\n/**\n * An abstract actor that handles media-typed actions.\n *\n * It splits up a action between a 'handle' and a 'mediaTypes' action.\n * A 'mediaTypes' action is used to retrieve the available media types from this actor.\n * A 'handle' action is abstract, and can be implemented to do anything,\n * such as parsing, serializing, etc.\n * @see IActionAbstractMediaTyped\n *\n * @see ActorAbstractMediaTypedFixed\n */\nexport abstract class ActorAbstractMediaTyped<HI, HT, HO>\n  extends Actor<IActionAbstractMediaTyped<HI>, IActorTestAbstractMediaTyped<HT>, IActorOutputAbstractMediaTyped<HO>> {\n  public constructor(args: IActorArgsMediaTyped<HI, HT, HO>) {\n    super(args);\n  }\n\n  public async run(action: IActionAbstractMediaTyped<HI>): Promise<IActorOutputAbstractMediaTyped<HO>> {\n    if ('handle' in action) {\n      const typedAction: IActionAbstractMediaTypedHandle<HI> = action;\n      return { handle: await this.runHandle(typedAction.handle, typedAction.handleMediaType, action.context) };\n    }\n    if ('mediaTypes' in action) {\n      return { mediaTypes: await this.getMediaTypes(action.context) };\n    }\n    if ('mediaTypeFormats' in action) {\n      return { mediaTypeFormats: await this.getMediaTypeFormats(action.context) };\n    }\n    throw new Error('Either a handle, mediaTypes or mediaTypeFormats action needs to be provided');\n  }\n\n  public async test(action: IActionAbstractMediaTyped<HI>): Promise<IActorTestAbstractMediaTyped<HT>> {\n    if ('handle' in action) {\n      const typedAction: IActionAbstractMediaTypedHandle<HI> = action;\n      return { handle: await this.testHandle(typedAction.handle, typedAction.handleMediaType, action.context) };\n    }\n    if ('mediaTypes' in action) {\n      return { mediaTypes: await this.testMediaType(action.context) };\n    }\n    if ('mediaTypeFormats' in action) {\n      return { mediaTypeFormats: await this.testMediaTypeFormats(action.context) };\n    }\n    throw new Error('Either a handle, mediaTypes or mediaTypeFormats action needs to be provided');\n  }\n\n  /**\n   * Check if this actor can run the given handle action,\n   * without actually running it.\n   *\n   * @param {HI} action The handle action to test.\n   * @param {string} mediaType The media type to test.\n   * @param {ActionContext} context An optional context.\n   * @return {Promise<T>} A promise that resolves to the handle test result.\n   */\n  public abstract testHandle(action: HI, mediaType: string | undefined, context: IActionContext): Promise<HT>;\n\n  /**\n   * Run the given handle action on this actor.\n   *\n   * @param {HI} action The handle action to run.\n   * @param {string} mediaType The media type to run with.\n   * @param {ActionContext} context An optional context.\n   * @return {Promise<T>} A promise that resolves to the handle run result.\n   */\n  public abstract runHandle(action: HI, mediaType: string | undefined, context: IActionContext): Promise<HO>;\n\n  /**\n   * Check if this actor can emit its media types.\n   *\n   * @param {ActionContext} context An optional context.\n   * @return {Promise<boolean>} A promise that resolves to the media type run result.\n   */\n  public abstract testMediaType(context: IActionContext): Promise<boolean>;\n\n  /**\n   * Get the media type of this given actor.\n   *\n   * @param {ActionContext} context An optional context.\n   * @return {Promise<{[id: string]: number}>} A promise that resolves to the media types.\n   */\n  public abstract getMediaTypes(context: IActionContext): Promise<Record<string, number>>;\n\n  /**\n   * Check if this actor can emit its media type formats.\n   *\n   * @param {ActionContext} context An optional context.\n   * @return {Promise<boolean>} A promise that resolves to the media type run result.\n   */\n  public abstract testMediaTypeFormats(context: IActionContext): Promise<boolean>;\n\n  /**\n   * Get the media type formats of this given actor.\n   *\n   * @param {ActionContext} context An optional context.\n   * @return {Promise<{[id: string]: string}>} A promise that resolves to the media types.\n   */\n  public abstract getMediaTypeFormats(context: IActionContext): Promise<Record<string, string>>;\n}\n\nexport interface IActorArgsMediaTyped<HI, HT, HO> extends IActorArgs<\n    IActionAbstractMediaTyped<HI>,\nIActorTestAbstractMediaTyped<HT>,\nIActorOutputAbstractMediaTyped<HO>\n> {}\n\nexport type IActionAbstractMediaTyped<HI> = IActionAbstractMediaTypedHandle<HI> | IActionAbstractMediaTypedMediaTypes\n| IActionAbstractMediaTypedMediaTypeFormats;\nexport interface IActionAbstractMediaTypedHandle<HI> extends IAction {\n  /**\n   * The handle action input.\n   */\n  handle: HI;\n  /**\n   * The handle media type that should be used when 'handle' is truthy.\n   */\n  handleMediaType?: string;\n}\n\nexport interface IActionAbstractMediaTypedMediaTypes extends IAction {\n  /**\n   * True if media types should be retrieved.\n   */\n  mediaTypes: boolean;\n}\n\nexport interface IActionAbstractMediaTypedMediaTypeFormats extends IAction {\n  /**\n   * True if media type formats should be retrieved.\n   */\n  mediaTypeFormats: boolean;\n}\n\n/**\n * Either 'handle', or 'mediaTypes' or 'mediaTypeFormats' must be truthy.\n * Groups may not be truthy at the same time.\n */\nexport type IActorTestAbstractMediaTyped<HT> = IActorTestAbstractMediaTypedHandle<HT>\n| IActorTestAbstractMediaTypedMediaTypes | IActorTestAbstractMediaTypedMediaTypeFormats;\nexport interface IActorTestAbstractMediaTypedHandle<HT> extends IActorTest {\n  /**\n   * The handle test output.\n   */\n  handle: HT;\n}\nexport interface IActorTestAbstractMediaTypedMediaTypes extends IActorTest {\n  /**\n   * True if media types can be retrieved.\n   */\n  mediaTypes: boolean;\n}\nexport interface IActorTestAbstractMediaTypedMediaTypeFormats extends IActorTest {\n  /**\n   * True if media type formats can be retrieved.\n   */\n  mediaTypeFormats?: boolean;\n}\n\n/**\n * Either 'handle', or 'mediaTypes' or 'mediaTypeFormats' must be truthy.\n * Groups may not be truthy at the same time.\n */\nexport type IActorOutputAbstractMediaTyped<HO> = IActorOutputAbstractMediaTypedHandle<HO>\n| IActorOutputAbstractMediaTypedMediaTypes | IActorOutputAbstractMediaTypedMediaTypeFormats;\nexport interface IActorOutputAbstractMediaTypedHandle<HO> extends IActorOutput {\n  /**\n   * The handle action output.\n   */\n  handle: HO;\n}\nexport interface IActorOutputAbstractMediaTypedMediaTypes extends IActorOutput {\n  /**\n   * An object containing media types as keys,\n   * and preferences as values, with values ranging from 0 to 1.\n   */\n  mediaTypes: Record<string, number>;\n}\nexport interface IActorOutputAbstractMediaTypedMediaTypeFormats extends IActorOutput {\n  /**\n   * An object containing media types as keys,\n   * and format IRIs as values.\n   */\n  mediaTypeFormats: Record<string, string>;\n}\n\nexport type MediateMediaTypes = Mediate<\nIActionAbstractMediaTypedMediaTypes,\nIActorOutputAbstractMediaTypedMediaTypes,\nIActorTestAbstractMediaTypedMediaTypes\n>;\n\nexport type MediateMediaTyped<I extends IAction, T extends IActorTest, O extends IActorOutput> = Mediate<\nIActionAbstractMediaTypedHandle<I>,\nIActorOutputAbstractMediaTypedHandle<O>,\nIActorTestAbstractMediaTypedHandle<T>\n>;\n","import type { IActionContext } from '@comunica/types';\nimport type { IActorArgsMediaTyped } from './ActorAbstractMediaTyped';\nimport { ActorAbstractMediaTyped } from './ActorAbstractMediaTyped';\n\nexport abstract class ActorAbstractMediaTypedFixed<HI, HT, HO> extends ActorAbstractMediaTyped<HI, HT, HO> {\n  public readonly mediaTypePriorities: Record<string, number>;\n  public readonly mediaTypeFormats: Record<string, string>;\n  public readonly priorityScale: number;\n\n  public constructor(args: IActorArgsMediaTypedFixed<HI, HT, HO>) {\n    super(args);\n    const scale: number = this.priorityScale || this.priorityScale === 0 ? this.priorityScale : 1;\n    if (this.mediaTypePriorities) {\n      for (const [ _index, [ key, value ]] of Object.entries(this.mediaTypePriorities).entries()) {\n        this.mediaTypePriorities[key] = scale * value;\n      }\n    }\n    this.mediaTypePriorities = Object.freeze(this.mediaTypePriorities);\n    this.mediaTypeFormats = Object.freeze(this.mediaTypeFormats);\n  }\n\n  public async testHandle(action: HI, mediaType: string | undefined, context: IActionContext): Promise<HT> {\n    if (!mediaType || !(mediaType in this.mediaTypePriorities)) {\n      throw new Error(`Unrecognized media type: ${mediaType}`);\n    }\n    return await this.testHandleChecked(action, context);\n  }\n\n  /**\n   * Check to see if this actor can handle the given action.\n   * The media type has already been checked before this is called.\n   *\n   * @param {ActionContext} context An optional context.\n   * @param {HI} action The action to test.\n   */\n  public abstract testHandleChecked(action: HI, context: IActionContext): Promise<HT>;\n\n  public async testMediaType(_context: IActionContext): Promise<boolean> {\n    return true;\n  }\n\n  public async getMediaTypes(_context: IActionContext): Promise<Record<string, number>> {\n    return this.mediaTypePriorities;\n  }\n\n  public async testMediaTypeFormats(_context: IActionContext): Promise<boolean> {\n    return true;\n  }\n\n  public async getMediaTypeFormats(_context: IActionContext): Promise<Record<string, string>> {\n    return this.mediaTypeFormats;\n  }\n}\n\nexport interface IActorArgsMediaTypedFixed<HI, HT, HO> extends IActorArgsMediaTyped<HI, HT, HO> {\n  /**\n   * A record of media types, with media type name as key, and its priority as value.\n   * Priorities are numbers between [0, 1].\n   * @range {json}\n   */\n  mediaTypePriorities: Record<string, number>;\n  /**\n   * A record of media types, with media type name as key, and its format IRI as value.\n   * @range {json}\n   */\n  mediaTypeFormats: Record<string, string>;\n  /**\n   * A multiplier for media type priorities.\n   * This can be used for keeping the original media types in place,\n   * but scaling all of their scores with a certain value.\n   * @range {double}\n   */\n  priorityScale?: number;\n}\n","export * from './ActorAbstractMediaTyped';\nexport * from './ActorAbstractMediaTypedFixed';\n","import type { BindingsFactory } from '@comunica/bindings-factory';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport { KeysQueryOperation } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport type {\n  IQueryOperationResultBindings,\n  Bindings,\n  IActionContext,\n  MetadataBindings,\n  IQuerySourceWrapper,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport {\n  BufferedIterator,\n  MultiTransformIterator,\n  TransformIterator,\n  EmptyIterator,\n} from 'asynciterator';\nimport { DataFactory } from 'rdf-data-factory';\nimport { termToString } from 'rdf-string';\nimport { Algebra, Factory } from 'sparqlalgebrajs';\nimport { PathVariableObjectIterator } from './PathVariableObjectIterator';\n\nconst DF = new DataFactory();\n\n/**\n * An abstract actor that handles Path operations.\n *\n * Provides multiple helper functions used by the Path operation actors.\n */\nexport abstract class ActorAbstractPath extends ActorQueryOperationTypedMediated<Algebra.Path> {\n  protected static readonly FACTORY: Factory = new Factory();\n\n  protected readonly predicateType: string;\n\n  protected constructor(args: IActorQueryOperationTypedMediatedArgs, predicateType: string) {\n    super(args, 'path');\n    this.predicateType = predicateType;\n  }\n\n  public async testOperation(operation: Algebra.Path, _context: IActionContext): Promise<IActorTest> {\n    if (operation.predicate.type !== this.predicateType) {\n      throw new Error(`This Actor only supports ${this.predicateType} Path operations.`);\n    }\n\n    return true;\n  }\n\n  // Generates a variable that does not yet occur in the path\n  public generateVariable(path?: Algebra.Path, name?: string): RDF.Variable {\n    if (!name) {\n      return this.generateVariable(path, 'b');\n    }\n\n    // Path predicates can't contain variables\n    if (path && (path.subject.value === name || path.object.value === name)) {\n      return this.generateVariable(path, `${name}b`);\n    }\n\n    return DF.variable(name);\n  }\n\n  // Such connectivity matching does not introduce duplicates (it does not incorporate any count of the number\n  // of ways the connection can be made) even if the repeated path itself would otherwise result in duplicates.\n  // https://www.w3.org/TR/sparql11-query/#propertypaths\n  public async isPathArbitraryLengthDistinct(context: IActionContext, path: Algebra.Path):\n  Promise<{ context: IActionContext; operation: IQueryOperationResultBindings | undefined }> {\n    if (!context.get(KeysQueryOperation.isPathArbitraryLengthDistinctKey)) {\n      context = context.set(KeysQueryOperation.isPathArbitraryLengthDistinctKey, true);\n      return { context, operation: ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({\n        operation: ActorAbstractPath.FACTORY.createDistinct(path),\n        context,\n      })) };\n    }\n\n    context = context.set(KeysQueryOperation.isPathArbitraryLengthDistinctKey, false);\n    return { context, operation: undefined };\n  }\n\n  private async predicateStarGraphVariable(\n    subject: RDF.Term,\n    object: RDF.Variable,\n    predicate: Algebra.PropertyPathSymbol,\n    graph: RDF.Variable,\n    context: IActionContext,\n    bindingsFactory: BindingsFactory,\n  ): Promise<IPathResultStream> {\n    const sources = this.getPathSources(predicate);\n    // TODO: refactor this with an iterator just like PathVariableObjectIterator so we handle backpressure correctly\n    // Construct path to obtain all graphs where subject exists\n    const predVar = this.generateVariable(ActorAbstractPath.FACTORY\n      .createPath(subject, predicate, object, graph));\n    const findGraphs = ActorAbstractPath.FACTORY.createUnion([\n      this.assignPatternSources(ActorAbstractPath.FACTORY.createPattern(subject, predVar, object, graph), sources),\n      this.assignPatternSources(ActorAbstractPath.FACTORY.createPattern(object, predVar, subject, graph), sources),\n    ]);\n    const results = ActorQueryOperation.getSafeBindings(\n      await this.mediatorQueryOperation.mediate({ context, operation: findGraphs }),\n    );\n\n    const passedGraphs: Set<string> = new Set();\n\n    const bindingsStream = new MultiTransformIterator<Bindings, Bindings>(\n      results.bindingsStream,\n      {\n        multiTransform: (bindings: Bindings) => {\n          // Extract the graph and start a predicate* search starting from subject in each graph\n          const graphValue: RDF.Term = bindings.get(graph)!;\n          if (passedGraphs.has(graphValue.value)) {\n            return new EmptyIterator();\n          }\n          passedGraphs.add(graphValue.value);\n          return new TransformIterator<Bindings>(\n            async() => {\n              const it = new BufferedIterator<RDF.Term>();\n              await this.getObjectsPredicateStar(subject, predicate, graphValue, context, {}, it, { count: 0 });\n              return it.transform<Bindings>({\n                transform(item, next, push) {\n                  push(bindingsFactory.bindings([\n                    [ object, item ],\n                    [ graph, graphValue ],\n                  ]));\n                  next();\n                },\n              });\n            },\n            { maxBufferSize: 128 },\n          );\n        },\n        autoStart: false,\n      },\n    );\n\n    return {\n      bindingsStream,\n      metadata: results.metadata,\n    };\n  }\n\n  /**\n   * Returns an iterator with Bindings of the query subject predicate* ?o or subject predicate+ ?o\n   * If graph is a variable, it will also be in those bindings\n   * @param {Term} subject Term of where we start the predicate* search.\n   * @param {Algebra.PropertyPathSymbol} predicate Predicate of the *-path.\n   * @param {Variable} object Variable of the zeroOrMore-query.\n   * @param {Term} graph The graph in which we search for the pattern. (Possibly a variable)\n   * @param {ActionContext} context The context to pass to sub-opertations\n   * @param emitFirstSubject If the path operation is predicate*, otherwise it is predicate+.\n   * @return {Promise<AsyncIterator<Bindings>} Iterator to where all bindings of query should have been pushed.\n   */\n  public async getObjectsPredicateStarEval(\n    subject: RDF.Term,\n    predicate: Algebra.PropertyPathSymbol,\n    object: RDF.Variable,\n    graph: RDF.Term,\n    context: IActionContext,\n    emitFirstSubject: boolean,\n    bindingsFactory: BindingsFactory,\n  ): Promise<IPathResultStream> {\n    if (graph.termType === 'Variable') {\n      return this.predicateStarGraphVariable(subject, object, predicate, graph, context, bindingsFactory);\n    }\n\n    const it = new PathVariableObjectIterator(\n      subject,\n      predicate,\n      graph,\n      context,\n      this.mediatorQueryOperation,\n      emitFirstSubject,\n    );\n\n    const bindingsStream = it.transform<Bindings>({\n      autoStart: false,\n      transform(item, next, push) {\n        push(bindingsFactory.bindings([[ object, item ]]));\n        next();\n      },\n    });\n\n    return {\n      bindingsStream,\n      async metadata() {\n        const metadata: MetadataBindings = await new Promise((resolve) => {\n          it.getProperty('metadata', (metadataInner: any) => resolve(metadataInner()));\n        });\n        // Increment cardinality by one, because we always have at least one result once we reach this stage.\n        // See the transformation above where we push a single binding.\n        metadata.cardinality.value++;\n        return metadata;\n      },\n    };\n  }\n\n  /**\n   * Pushes all terms to iterator `it` that are a solution of object predicate* ?o.\n   * @param {Term} object Term of where we start the predicate* search.\n   * @param {Algebra.PropertyPathSymbol} predicate Predicate of the *-path.\n   * @param {Term} graph The graph in which we search for the pattern.\n   * @param {ActionContext} context\n   * @param {Record<string, Term>} termHashes Remembers the objects we've already searched for.\n   * @param {BufferedIterator<Term>} it Iterator to push terms to.\n   * @param {any} counter Counts how many searches are in progress to close it when needed (when counter == 0).\n   * @return {Promise<IPathResultStream['metadata']>} The results metadata.\n   */\n  public async getObjectsPredicateStar(\n    object: RDF.Term,\n    predicate: Algebra.PropertyPathSymbol,\n    graph: RDF.Term,\n    context: IActionContext,\n    termHashes: Record<string, RDF.Term>,\n    it: BufferedIterator<RDF.Term>,\n    counter: any,\n  ): Promise<IPathResultStream['metadata'] | undefined> {\n    const termString = termToString(object);\n    if (termHashes[termString]) {\n      return;\n    }\n\n    (<any> it)._push(object);\n    termHashes[termString] = object;\n    counter.count++;\n\n    const thisVariable = this.generateVariable();\n    const path = ActorAbstractPath.FACTORY.createPath(object, predicate, thisVariable, graph);\n    const results = ActorQueryOperation.getSafeBindings(\n      await this.mediatorQueryOperation.mediate({ operation: path, context }),\n    );\n    // TODO: fixme\n    // eslint-disable-next-line ts/no-misused-promises\n    results.bindingsStream.on('data', async(bindings: Bindings) => {\n      const result = bindings.get(thisVariable);\n      await this.getObjectsPredicateStar(result!, predicate, graph, context, termHashes, it, counter);\n    });\n    results.bindingsStream.on('end', () => {\n      if (--counter.count === 0) {\n        it.close();\n      }\n    });\n\n    return results.metadata;\n  }\n\n  /**\n   * Pushes all terms to iterator `it` that are a solution of ?s predicate* ?o.\n   * @param {string} subjectVar String representation of subjectVariable\n   * @param {string} objectVar String representation of objectVariable\n   * @param {Term} subjectVal Term of where we start the predicate* search.\n   * @param {Term} objectVal Found solution for an object, start for the new step.\n   * @param {Algebra.PropertyPathSymbol} predicate Predicate of the *-path.\n   * @param {Term} graph The graph in which we search for the pattern.\n   * @param {ActionContext} context\n   * @param {{[id: string]: Promise<Term[]>}} termHashesGlobal\n   * Remembers solutions for when objectVal is already been calculated, can be reused when same objectVal occurs\n   * @param {{[id: string]: Term}} termHashesCurrentSubject\n   * Remembers the pairs we've already searched for, can stop searching if so.\n   * @param {BufferedIterator<Bindings>} it Iterator to push terms to.\n   * @param {any} counter Counts how many searches are in progress to close it when needed (when counter == 0).\n   * @return {Promise<void>} All solutions of query should have been pushed to it by then.\n   */\n  // Let the iterator `it` emit all bindings of size 2, with subjectStringVariable as value subjectVal\n  // and objectStringVariable as value all nodes reachable through predicate* beginning at objectVal\n  public async getSubjectAndObjectBindingsPredicateStar(\n    subjectVar: RDF.Variable,\n    objectVar: RDF.Variable,\n    subjectVal: RDF.Term,\n    objectVal: RDF.Term,\n    predicate: Algebra.PropertyPathSymbol,\n    graph: RDF.Term,\n    context: IActionContext,\n    termHashesGlobal: Record<string, Promise<RDF.Term[]>>,\n    termHashesCurrentSubject: Record<string, boolean>,\n    it: BufferedIterator<Bindings>,\n    counter: any,\n    bindingsFactory: BindingsFactory,\n  ): Promise<void> {\n    const termString = termToString(objectVal) + termToString(graph);\n\n    // If this combination of subject and object already done, return nothing\n    if (termHashesCurrentSubject[termString]) {\n      return;\n    }\n\n    counter.count++;\n    termHashesCurrentSubject[termString] = true;\n    (<any> it)._push(bindingsFactory.bindings([\n      [ subjectVar, subjectVal ],\n      [ objectVar, objectVal ],\n    ]));\n\n    // If every reachable node from object has already been calculated, use these for current subject too\n    if (termString in termHashesGlobal) {\n      const objects = await termHashesGlobal[termString];\n      for (const object of objects) {\n        await this.getSubjectAndObjectBindingsPredicateStar(\n          subjectVar,\n          objectVar,\n          subjectVal,\n          object,\n          predicate,\n          graph,\n          context,\n          termHashesGlobal,\n          termHashesCurrentSubject,\n          it,\n          counter,\n          bindingsFactory,\n        );\n      }\n      if (--counter.count === 0) {\n        it.close();\n      }\n\n      return;\n    }\n\n    // Construct promise to calculate all reachable nodes from this object\n    // TODO: fixme\n    // eslint-disable-next-line no-async-promise-executor,ts/no-misused-promises\n    const promise = new Promise<RDF.Term[]>(async(resolve, reject) => {\n      const objectsArray: RDF.Term[] = [];\n\n      // Construct path that leads us one step through predicate\n      const thisVariable = this.generateVariable();\n      const path = ActorAbstractPath.FACTORY.createPath(objectVal, predicate, thisVariable, graph);\n      const results = ActorQueryOperation.getSafeBindings(\n        await this.mediatorQueryOperation.mediate({ operation: path, context }),\n      );\n\n      // Recursive call on all neighbours\n      // TODO: fixme\n      // eslint-disable-next-line ts/no-misused-promises\n      results.bindingsStream.on('data', async(bindings: RDF.Bindings) => {\n        const result: RDF.Term = bindings.get(thisVariable)!;\n        objectsArray.push(result);\n        await this.getSubjectAndObjectBindingsPredicateStar(\n          subjectVar,\n          objectVar,\n          subjectVal,\n          result,\n          predicate,\n          graph,\n          context,\n          termHashesGlobal,\n          termHashesCurrentSubject,\n          it,\n          counter,\n          bindingsFactory,\n        );\n      });\n      results.bindingsStream.on('error', reject);\n      results.bindingsStream.on('end', () => {\n        if (--counter.count === 0) {\n          it.close();\n        }\n        resolve(objectsArray);\n      });\n    });\n\n    // Set it in the termHashesGlobal when this object occurs again they can wait for this promise\n    termHashesGlobal[termString] = promise;\n  }\n\n  /**\n   * Find all sources recursively contained in the given path operation.\n   * @param operation\n   */\n  public getPathSources(operation: Algebra.PropertyPathSymbol): IQuerySourceWrapper[] {\n    switch (operation.type) {\n      case Algebra.types.ALT:\n      case Algebra.types.SEQ:\n        return operation.input\n          .flatMap((subOp: Algebra.PropertyPathSymbol) => this.getPathSources(subOp));\n      case Algebra.types.INV:\n      case Algebra.types.ONE_OR_MORE_PATH:\n      case Algebra.types.ZERO_OR_MORE_PATH:\n      case Algebra.types.ZERO_OR_ONE_PATH:\n        return this.getPathSources(operation.path);\n      case Algebra.types.LINK:\n      case Algebra.types.NPS: {\n        const source = ActorQueryOperation.getOperationSource(operation);\n        if (!source) {\n          throw new Error(`Could not find a required source on a link path operation`);\n        }\n        return [ source ];\n      }\n    }\n  }\n\n  public assignPatternSources(pattern: Algebra.Pattern, sources: IQuerySourceWrapper[]): Algebra.Operation {\n    if (sources.length === 0) {\n      throw new Error(`Attempted to assign zero sources to a pattern during property path handling`);\n    }\n    if (sources.length === 1) {\n      return ActorQueryOperation.assignOperationSource(pattern, sources[0]);\n    }\n    return ActorAbstractPath.FACTORY.createUnion(sources\n      .map(source => ActorQueryOperation.assignOperationSource(pattern, source)), true);\n  }\n}\n\nexport interface IPathResultStream {\n  bindingsStream: AsyncIterator<Bindings>;\n  metadata: () => Promise<MetadataBindings>;\n}\n","import type { MediatorQueryOperation } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport type { IActionContext } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { BufferedIterator } from 'asynciterator';\nimport { DataFactory } from 'rdf-data-factory';\nimport { termToString } from 'rdf-string';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport { Factory } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory();\nconst FACTORY = new Factory();\n\n/**\n * An iterator that implements the multi-length property path operation (* and +)\n * for a fixed subject and predicate, and a variable object.\n */\nexport class PathVariableObjectIterator extends BufferedIterator<RDF.Term> {\n  private readonly termHashes: Map<string, RDF.Term> = new Map();\n  private readonly runningOperations: AsyncIterator<RDF.Term>[] = [];\n  private readonly pendingOperations: { variable: RDF.Variable; operation: Algebra.Path }[] = [];\n\n  public constructor(\n    private readonly subject: RDF.Term,\n    private readonly predicate: Algebra.PropertyPathSymbol,\n    private readonly graph: RDF.Term,\n    private readonly context: IActionContext,\n    private readonly mediatorQueryOperation: MediatorQueryOperation,\n    emitFirstSubject: boolean,\n    private readonly maxRunningOperations = 16,\n  ) {\n    // The autoStart flag must be true to kickstart metadata collection\n    super({ autoStart: true });\n\n    // Push the subject as starting point\n    this._push(this.subject, emitFirstSubject);\n  }\n\n  protected override _end(destroy?: boolean): void {\n    // Close all running iterators\n    for (const it of this.runningOperations) {\n      it.destroy();\n    }\n\n    super._end(destroy);\n  }\n\n  protected override _push(item: RDF.Term, pushAsResult = true): void {\n    let termString;\n    if (pushAsResult) {\n      // Don't push if this subject was already found\n      termString = termToString(item);\n      if (this.termHashes.has(termString)) {\n        return;\n      }\n    }\n\n    // Add a pending path operation for this item\n    const variable = DF.variable('b');\n    this.pendingOperations.push({\n      variable,\n      operation: FACTORY.createPath(item, this.predicate, variable, this.graph),\n    });\n\n    // Otherwise, push the subject\n    if (termString) {\n      this.termHashes.set(termString, item);\n      super._push(item);\n    }\n  }\n\n  protected override _read(count: number, done: () => void): void {\n    // eslint-disable-next-line ts/no-this-alias\n    const self = this;\n    (async function() {\n      // Open as many operations as possible\n      while (self.runningOperations.length < self.maxRunningOperations) {\n        if (self.pendingOperations.length === 0) {\n          break;\n        }\n\n        const pendingOperation = self.pendingOperations.pop()!;\n        const results = ActorQueryOperation.getSafeBindings(\n          await self.mediatorQueryOperation.mediate({ operation: pendingOperation.operation, context: self.context }),\n        );\n        const runningOperation = results.bindingsStream.transform<RDF.Term>({\n          autoStart: false,\n          transform(bindings, next, push) {\n            const newTerm: RDF.Term = bindings.get(pendingOperation.variable)!;\n            push(newTerm);\n            next();\n          },\n        });\n        if (!runningOperation.done) {\n          self.runningOperations.push(runningOperation);\n          runningOperation.on('error', error => self.destroy(error));\n          runningOperation.on('readable', () => {\n            self.readable = true;\n            self._fillBufferAsync();\n          });\n          runningOperation.on('end', () => {\n            self.runningOperations.splice(self.runningOperations.indexOf(runningOperation), 1);\n            self.readable = true;\n            self._fillBufferAsync();\n          });\n        }\n\n        self.setProperty('metadata', results.metadata);\n      }\n\n      // Try to read `count` items (based on UnionIterator)\n      let lastCount = 0;\n      let item: RDF.Term | null;\n      // eslint-disable-next-line no-cond-assign\n      while (lastCount !== (lastCount = count)) {\n        // Prioritize the operations that have been added first\n        for (let i = 0; i < self.runningOperations.length && count > 0; i++) {\n          // eslint-disable-next-line no-cond-assign\n          if ((item = self.runningOperations[i].read()) !== null) {\n            count--;\n            self._push(item);\n          }\n        }\n      }\n\n      // Close if everything has been read\n      if (self.runningOperations.length === 0 && self.pendingOperations.length === 0) {\n        self.close();\n      }\n    })().then(() => {\n      done();\n    }, error => this.destroy(error));\n  }\n}\n","import type { IActorContextPreprocessOutput, IActorContextPreprocessArgs } from '@comunica/bus-context-preprocess';\nimport { ActorContextPreprocess } from '@comunica/bus-context-preprocess';\nimport type { IAction, IActorTest } from '@comunica/core';\nimport { ActionContextKey } from '@comunica/core';\nimport type { IActionContext } from '@comunica/types';\n\n/**\n * A comunica Convert Shortcuts Context Preprocess Actor.\n */\nexport class ActorContextPreprocessConvertShortcuts extends ActorContextPreprocess {\n  public readonly contextKeyShortcuts: Record<string, string>;\n\n  public constructor(args: IActorContextPreprocessConvertShortcutsArgs) {\n    super(args);\n  }\n\n  public async test(_action: IAction): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IAction): Promise<IActorContextPreprocessOutput> {\n    return {\n      context: ActorContextPreprocessConvertShortcuts.expandShortcuts(action.context, this.contextKeyShortcuts),\n    };\n  }\n\n  public static expandShortcuts(context: IActionContext, contextKeyShortcuts: Record<string, string>): IActionContext {\n    for (const key of context.keys()) {\n      if (contextKeyShortcuts[key.name]) {\n        context = context\n          .set(new ActionContextKey(contextKeyShortcuts[key.name]), context.get(key))\n          .delete(key);\n      }\n    }\n    return context;\n  }\n}\n\nexport interface IActorContextPreprocessConvertShortcutsArgs extends IActorContextPreprocessArgs {\n  /**\n   * A record of context shortcuts to full context keys (as defined in @comunica/context-entries).\n   * @range {json}\n   * @default {{\n   *   \"sources\": \"@comunica/actor-init-query:querySourcesUnidentified\",\n   *   \"destination\": \"@comunica/bus-rdf-update-quads:destination\",\n   *   \"initialBindings\": \"@comunica/actor-init-query:initialBindings\",\n   *   \"queryFormat\": \"@comunica/actor-init-query:queryFormat\",\n   *   \"baseIRI\": \"@comunica/actor-init-query:baseIRI\",\n   *   \"log\": \"@comunica/core:log\",\n   *   \"datetime\": \"@comunica/actor-http-memento:datetime\",\n   *   \"queryTimestamp\": \"@comunica/actor-init-query:queryTimestamp\",\n   *   \"httpProxyHandler\": \"@comunica/actor-http-proxy:httpProxyHandler\",\n   *   \"lenient\": \"@comunica/actor-init-query:lenient\",\n   *   \"httpIncludeCredentials\": \"@comunica/bus-http:include-credentials\",\n   *   \"httpAuth\": \"@comunica/bus-http:auth\",\n   *   \"httpTimeout\": \"@comunica/bus-http:http-timeout\",\n   *   \"httpBodyTimeout\": \"@comunica/bus-http:http-body-timeout\",\n   *   \"httpRetryCount\": \"@comunica/bus-http:http-retry-count\",\n   *   \"httpRetryDelay\": \"@comunica/bus-http:http-retry-delay\",\n   *   \"httpRetryOnServerError\": \"@comunica/bus-http:http-retry-on-server-error\",\n   *   \"fetch\": \"@comunica/bus-http:fetch\",\n   *   \"recoverBrokenLinks\": \"@comunica/bus-http-wayback:recover-broken-links\",\n   *   \"readOnly\": \"@comunica/bus-query-operation:readOnly\",\n   *   \"extensionFunctions\": \"@comunica/actor-init-query:extensionFunctions\",\n   *   \"extensionFunctionCreator\": \"@comunica/actor-init-query:extensionFunctionCreator\",\n   *   \"functionArgumentsCache\": \"@comunica/actor-init-query:functionArgumentsCache\",\n   *   \"explain\": \"@comunica/actor-init-query:explain\",\n   *   \"unionDefaultGraph\": \"@comunica/bus-query-operation:unionDefaultGraph\",\n   *   \"traverse\": \"@comunica/bus-query-source-identify:traverse\",\n   *   \"noCache\": \"@comunica/actor-init-query:noCache\"\n   * }}\n   */\n  contextKeyShortcuts: Record<string, string>;\n}\n","import type {\n  IActorContextPreprocessOutput,\n  IActorContextPreprocessArgs,\n  MediatorContextPreprocess,\n} from '@comunica/bus-context-preprocess';\nimport { ActorContextPreprocess } from '@comunica/bus-context-preprocess';\nimport type { ActorHttpInvalidateListenable, IActionHttpInvalidate } from '@comunica/bus-http-invalidate';\nimport type { MediatorQuerySourceIdentify } from '@comunica/bus-query-source-identify';\nimport { KeysInitQuery, KeysQueryOperation } from '@comunica/context-entries';\nimport type { IAction, IActorTest } from '@comunica/core';\nimport { ActionContext } from '@comunica/core';\nimport type {\n  IQuerySourceWrapper,\n  QuerySourceUnidentified,\n  QuerySourceUnidentifiedExpanded,\n  IActionContext,\n  IQuerySourceUnidentifiedExpanded,\n} from '@comunica/types';\nimport { LRUCache } from 'lru-cache';\n\n/**\n * A comunica Query Source Identify Context Preprocess Actor.\n */\nexport class ActorContextPreprocessQuerySourceIdentify extends ActorContextPreprocess {\n  public readonly cacheSize: number;\n  public readonly httpInvalidator: ActorHttpInvalidateListenable;\n  public readonly mediatorQuerySourceIdentify: MediatorQuerySourceIdentify;\n  public readonly mediatorContextPreprocess: MediatorContextPreprocess;\n  public readonly cache?: LRUCache<string, Promise<IQuerySourceWrapper>>;\n\n  public constructor(args: IActorContextPreprocessQuerySourceIdentifyArgs) {\n    super(args);\n    this.cache = this.cacheSize ? new LRUCache<string, any>({ max: this.cacheSize }) : undefined;\n    const cache = this.cache;\n    if (cache) {\n      this.httpInvalidator.addInvalidateListener(\n        ({ url }: IActionHttpInvalidate) => url ? cache.delete(url) : cache.clear(),\n      );\n    }\n  }\n\n  public async test(_action: IAction): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IAction): Promise<IActorContextPreprocessOutput> {\n    let context = action.context;\n\n    // Rewrite sources\n    if (context.has(KeysInitQuery.querySourcesUnidentified)) {\n      const querySourcesUnidentified: QuerySourceUnidentified[] = action.context\n        .get(KeysInitQuery.querySourcesUnidentified)!;\n      const querySourcesUnidentifiedExpanded = await Promise.all(querySourcesUnidentified\n        .map(querySource => this.expandSource(querySource)));\n      const querySources: IQuerySourceWrapper[] = await Promise.all(querySourcesUnidentifiedExpanded\n        .map(async querySourceUnidentified => this.identifySource(querySourceUnidentified, action.context)));\n      context = action.context\n        .delete(KeysInitQuery.querySourcesUnidentified)\n        .set(KeysQueryOperation.querySources, querySources);\n    }\n\n    return { context };\n  }\n\n  public async expandSource(querySource: QuerySourceUnidentified): Promise<QuerySourceUnidentifiedExpanded> {\n    if (typeof querySource === 'string' || 'match' in querySource) {\n      return { value: querySource };\n    }\n    return {\n      ...<Omit<IQuerySourceUnidentifiedExpanded, 'context'>>querySource,\n      context: (await this.mediatorContextPreprocess.mediate({\n        context: ActionContext.ensureActionContext(querySource.context ?? {}),\n      })).context,\n    };\n  }\n\n  public identifySource(\n    querySourceUnidentified: QuerySourceUnidentifiedExpanded,\n    context: IActionContext,\n  ): Promise<IQuerySourceWrapper> {\n    let sourcePromise: Promise<IQuerySourceWrapper> | undefined;\n\n    // Try to read from cache\n    // Only sources based on string values (e.g. URLs) are supported!\n    if (typeof querySourceUnidentified.value === 'string' && this.cache) {\n      sourcePromise = this.cache.get(querySourceUnidentified.value)!;\n    }\n\n    // If not in cache, identify the source\n    if (!sourcePromise) {\n      sourcePromise = this.mediatorQuerySourceIdentify.mediate({ querySourceUnidentified, context })\n        .then(({ querySource }) => querySource);\n\n      // Set in cache\n      if (typeof querySourceUnidentified.value === 'string' && this.cache) {\n        this.cache.set(querySourceUnidentified.value, sourcePromise);\n      }\n    }\n\n    return sourcePromise;\n  }\n}\n\nexport interface IActorContextPreprocessQuerySourceIdentifyArgs extends IActorContextPreprocessArgs {\n  /**\n   * The maximum number of entries in the LRU cache, set to 0 to disable.\n   * @range {integer}\n   * @default {100}\n   */\n  cacheSize: number;\n  /* eslint-disable max-len */\n  /**\n   * An actor that listens to HTTP invalidation events\n   * @default {<default_invalidator> a <npmd:@comunica/bus-http-invalidate/^3.0.0/components/ActorHttpInvalidateListenable.jsonld#ActorHttpInvalidateListenable>}\n   */\n  httpInvalidator: ActorHttpInvalidateListenable;\n  /* eslint-enable max-len */\n  /**\n   * Mediator for identifying query sources.\n   */\n  mediatorQuerySourceIdentify: MediatorQuerySourceIdentify;\n  /**\n   * The context processing combinator\n   */\n  mediatorContextPreprocess: MediatorContextPreprocess;\n}\n","import type { IActorContextPreprocessOutput, IActorContextPreprocessArgs } from '@comunica/bus-context-preprocess';\nimport { ActorContextPreprocess } from '@comunica/bus-context-preprocess';\nimport { KeysQueryOperation, KeysQuerySourceIdentify } from '@comunica/context-entries';\nimport type { IActorTest, IAction } from '@comunica/core';\nimport type { IQuerySourceWrapper, QuerySourceReference } from '@comunica/types';\nimport { QuerySourceSkolemized } from './QuerySourceSkolemized';\nimport { getSourceId } from './utils';\n\n/**\n * A comunica Query Source Skolemize Context Preprocess Actor.\n */\nexport class ActorContextPreprocessQuerySourceSkolemize extends ActorContextPreprocess {\n  public constructor(args: IActorContextPreprocessArgs) {\n    super(args);\n  }\n\n  public async test(_action: IAction): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IAction): Promise<IActorContextPreprocessOutput> {\n    let context = action.context;\n\n    // Wrap sources in skolemized sources\n    if (context.has(KeysQueryOperation.querySources)) {\n      // Determine map of source id's\n      if (!context.has(KeysQuerySourceIdentify.sourceIds)) {\n        context = context.set(KeysQuerySourceIdentify.sourceIds, new Map());\n      }\n      const sourceIds: Map<QuerySourceReference, string> = context.getSafe(KeysQuerySourceIdentify.sourceIds);\n\n      let sources: IQuerySourceWrapper[] = context.getSafe(KeysQueryOperation.querySources);\n      sources = sources.map(sourceWrapper => ({\n        source: new QuerySourceSkolemized(sourceWrapper.source, getSourceId(sourceIds, sourceWrapper.source)),\n        context: sourceWrapper.context,\n      }));\n      context = context.set(KeysQueryOperation.querySources, sources);\n    }\n\n    return { context };\n  }\n}\n","import { MetadataValidationState } from '@comunica/metadata';\nimport type {\n  BindingsStream,\n  FragmentSelectorShape,\n  IActionContext,\n  IQueryBindingsOptions,\n  IQuerySource,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { ArrayIterator } from 'asynciterator';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport { deskolemizeOperation, skolemizeBindingsStream, skolemizeQuadStream } from './utils';\n\n/**\n * A IQuerySource wrapper that skolemizes outgoing quads and bindings.\n */\nexport class QuerySourceSkolemized implements IQuerySource {\n  /**\n   * The query source to wrap over.\n   */\n  public readonly innerSource: IQuerySource;\n  /**\n   * ID of the inner source, see KeysRdfResolveQuadPattern.sourceIds.\n   */\n  public readonly sourceId: string;\n\n  public constructor(innerSource: IQuerySource, sourceId: string) {\n    this.innerSource = innerSource;\n    this.sourceId = sourceId;\n  }\n\n  public async getSelectorShape(context: IActionContext): Promise<FragmentSelectorShape> {\n    return this.innerSource.getSelectorShape(context);\n  }\n\n  public queryBindings(\n    operation: Algebra.Operation,\n    context: IActionContext,\n    options: IQueryBindingsOptions | undefined,\n  ): BindingsStream {\n    const operationMapped = deskolemizeOperation(operation, this.sourceId);\n    if (!operationMapped) {\n      const it: BindingsStream = new ArrayIterator<RDF.Bindings>([], { autoStart: false });\n      it.setProperty('metadata', {\n        state: new MetadataValidationState(),\n        cardinality: { type: 'exact', value: 0 },\n        canContainUndefs: false,\n        variables: [],\n      });\n      return it;\n    }\n    return skolemizeBindingsStream(this.innerSource.queryBindings(operationMapped, context, options), this.sourceId);\n  }\n\n  public queryBoolean(operation: Algebra.Ask, context: IActionContext): Promise<boolean> {\n    return this.innerSource.queryBoolean(operation, context);\n  }\n\n  public queryQuads(operation: Algebra.Operation, context: IActionContext): AsyncIterator<RDF.Quad> {\n    const operationMapped = deskolemizeOperation(operation, this.sourceId);\n    if (!operationMapped) {\n      const it: AsyncIterator<RDF.Quad> = new ArrayIterator<RDF.Quad>([], { autoStart: false });\n      it.setProperty('metadata', {\n        state: new MetadataValidationState(),\n        cardinality: { type: 'exact', value: 0 },\n      });\n      return it;\n    }\n    return skolemizeQuadStream(this.innerSource.queryQuads(operationMapped, context), this.sourceId);\n  }\n\n  public queryVoid(operation: Algebra.Update, context: IActionContext): Promise<void> {\n    return this.innerSource.queryVoid(operation, context);\n  }\n\n  public get referenceValue(): string | RDF.Source {\n    return this.innerSource.referenceValue;\n  }\n\n  public toString(): string {\n    return `${this.innerSource.toString()}(SkolemID:${this.sourceId})`;\n  }\n}\n","import { BlankNodeScoped } from '@comunica/data-factory';\nimport type {\n  BindingsStream,\n  IQuerySource,\n  MetadataBindings,\n  MetadataQuads,\n  QuerySourceReference,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { DataFactory } from 'rdf-data-factory';\nimport { mapTermsNested } from 'rdf-terms';\nimport { Algebra, Util } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory();\n\nexport const SKOLEM_PREFIX = 'urn:comunica_skolem:source_';\n\n/**\n * Get the unique, deterministic id for the given source.\n * @param sourceIds ID's of datasources, see KeysRdfResolveQuadPattern.sourceIds.\n * @param source A data source.\n * @return The id of the given source.\n */\nexport function getSourceId(sourceIds: Map<QuerySourceReference, string>, source: IQuerySource): string {\n  let sourceId = sourceIds.get(source.referenceValue);\n  if (sourceId === undefined) {\n    sourceId = `${sourceIds.size}`;\n    sourceIds.set(source.referenceValue, sourceId);\n  }\n  return sourceId;\n}\n\n/**\n * If the given term is a blank node, return a deterministic named node for it\n * based on the source id and the blank node value.\n * @param term Any RDF term.\n * @param sourceId A source identifier.\n * @return If the given term was a blank node, this will return a skolemized named node, otherwise the original term.\n */\nexport function skolemizeTerm(term: RDF.Term, sourceId: string): RDF.Term | BlankNodeScoped {\n  if (term.termType === 'BlankNode') {\n    return new BlankNodeScoped(`bc_${sourceId}_${term.value}`, DF.namedNode(`${SKOLEM_PREFIX}${sourceId}:${term.value}`));\n  }\n  return term;\n}\n\n/**\n * Skolemize all terms in the given quad.\n * @param quad An RDF quad.\n * @param sourceId A source identifier.\n * @return The skolemized quad.\n */\nexport function skolemizeQuad<Q extends RDF.BaseQuad = RDF.Quad>(quad: Q, sourceId: string): Q {\n  return mapTermsNested(quad, term => skolemizeTerm(term, sourceId));\n}\n\n/**\n * Skolemize all terms in the given bindings.\n * @param bindings An RDF bindings object.\n * @param sourceId A source identifier.\n * @return The skolemized bindings.\n */\nexport function skolemizeBindings(bindings: RDF.Bindings, sourceId: string): RDF.Bindings {\n  return bindings.map((term) => {\n    if (term.termType === 'Quad') {\n      return skolemizeQuad(term, sourceId);\n    }\n    return skolemizeTerm(term, sourceId);\n  });\n}\n\n/**\n * Skolemize all terms in the given quad stream.\n * @param iterator An RDF quad stream.\n * @param sourceId A source identifier.\n * @return The skolemized quad stream.\n */\nexport function skolemizeQuadStream(iterator: AsyncIterator<RDF.Quad>, sourceId: string): AsyncIterator<RDF.Quad> {\n  const ret = iterator.map(quad => skolemizeQuad(quad, sourceId));\n  function inheritMetadata(): void {\n    iterator.getProperty('metadata', (metadata: MetadataQuads) => {\n      ret.setProperty('metadata', metadata);\n      metadata.state.addInvalidateListener(inheritMetadata);\n    });\n  }\n  inheritMetadata();\n  return ret;\n}\n\n/**\n * Skolemize all terms in the given bindings stream.\n * @param iterator An RDF bindings stream.\n * @param sourceId A source identifier.\n * @return The skolemized bindings stream.\n */\nexport function skolemizeBindingsStream(iterator: BindingsStream, sourceId: string): BindingsStream {\n  const ret = iterator.map(bindings => skolemizeBindings(bindings, sourceId));\n  function inheritMetadata(): void {\n    iterator.getProperty('metadata', (metadata: MetadataBindings) => {\n      ret.setProperty('metadata', metadata);\n      metadata.state.addInvalidateListener(inheritMetadata);\n    });\n  }\n  inheritMetadata();\n  return ret;\n}\n\n/**\n * If a given term was a skolemized named node for the given source id,\n * deskolemize it again to a blank node.\n * If the given term was a skolemized named node for another source, return false.\n * If the given term was not a skolemized named node, return the original term.\n * @param term Any RDF term.\n * @param sourceId A source identifier.\n */\nexport function deskolemizeTerm(term: RDF.Term, sourceId: string): RDF.Term | null {\n  if (term.termType === 'BlankNode' && 'skolemized' in term) {\n    term = (<BlankNodeScoped> term).skolemized;\n  }\n  if (term.termType === 'NamedNode' && term.value.startsWith(SKOLEM_PREFIX)) {\n    const colonSeparator = term.value.indexOf(':', SKOLEM_PREFIX.length);\n    const termSourceId = term.value.slice(SKOLEM_PREFIX.length, colonSeparator);\n    // We had a skolemized term\n    if (termSourceId === sourceId) {\n      // It came from the correct source\n      const termLabel = term.value.slice(colonSeparator + 1, term.value.length);\n      return DF.blankNode(termLabel);\n    }\n    // It came from a different source\n    return null;\n  }\n  return term;\n}\n\nexport function deskolemizeTermNestedThrowing(term: RDF.Term, sourceId: string): RDF.Term {\n  if (term.termType === 'Quad') {\n    return mapTermsNested(term, (subTerm) => {\n      const deskolemized = deskolemizeTerm(subTerm, sourceId);\n      if (!deskolemized) {\n        throw new Error(`Skolemized term is not in scope for this source`);\n      }\n      return deskolemized;\n    });\n  }\n  const ret = deskolemizeTerm(term, sourceId);\n  if (ret === null) {\n    throw new Error(`Skolemized term is not in scope for this source`);\n  }\n  return ret;\n}\n\n/**\n * Deskolemize all terms in the given quad.\n * @param quad An RDF quad.\n * @param sourceId A source identifier.\n * @return The deskolemized quad.\n */\nexport function deskolemizeQuad<Q extends RDF.BaseQuad = RDF.Quad>(quad: Q, sourceId: string): Q {\n  return mapTermsNested(quad, (term: RDF.Term): RDF.Term => {\n    const newTerm = deskolemizeTerm(term, sourceId);\n    // If the term was skolemized in a different source then don't deskolemize it\n    return newTerm ?? term;\n  });\n}\n\n/**\n * Deskolemize all terms in the given quad.\n * Will return undefined if there is at least one blank node not in scope for this sourceId.\n * @param operation An algebra operation.\n * @param sourceId A source identifier.\n */\nexport function deskolemizeOperation<O extends Algebra.Operation>(operation: O, sourceId: string): O | undefined {\n  try {\n    return <O> Util.mapOperation(operation, {\n      [Algebra.types.PATTERN](op, factory) {\n        return {\n          result: Object.assign(factory.createPattern(\n            deskolemizeTermNestedThrowing(op.subject, sourceId),\n            deskolemizeTermNestedThrowing(op.predicate, sourceId),\n            deskolemizeTermNestedThrowing(op.object, sourceId),\n            deskolemizeTermNestedThrowing(op.graph, sourceId),\n          ), { metadata: op.metadata }),\n          recurse: false,\n        };\n      },\n      [Algebra.types.PATH](op, factory) {\n        return {\n          result: Object.assign(factory.createPath(\n            deskolemizeTermNestedThrowing(op.subject, sourceId),\n            op.predicate,\n            deskolemizeTermNestedThrowing(op.object, sourceId),\n            deskolemizeTermNestedThrowing(op.graph, sourceId),\n          ), { metadata: op.metadata }),\n          recurse: false,\n        };\n      },\n    });\n  } catch {\n    // Return undefined for skolemized terms not in scope for this source\n  }\n}\n","import type {\n  IActorContextPreprocessOutput,\n  IActorContextPreprocessArgs,\n  IActionContextPreprocess,\n} from '@comunica/bus-context-preprocess';\nimport { ActorContextPreprocess } from '@comunica/bus-context-preprocess';\nimport { KeysCore, KeysInitQuery, KeysQuerySourceIdentify } from '@comunica/context-entries';\nimport type { IAction, IActorTest } from '@comunica/core';\nimport type { FunctionArgumentsCache, Logger } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\n\n/**\n * A comunica Set Defaults Context Preprocess Actor.\n */\nexport class ActorContextPreprocessSetDefaults extends ActorContextPreprocess {\n  private readonly defaultFunctionArgumentsCache: FunctionArgumentsCache;\n  public readonly logger: Logger;\n\n  public constructor(args: IActorContextPreprocessSetDefaultsArgs) {\n    super(args);\n    this.defaultFunctionArgumentsCache = {};\n  }\n\n  public async test(_action: IAction): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionContextPreprocess): Promise<IActorContextPreprocessOutput> {\n    let context = action.context;\n\n    if (action.initialize) {\n      // Set default values\n      context = context\n        .setDefault(KeysInitQuery.queryTimestamp, new Date())\n        .setDefault(KeysQuerySourceIdentify.sourceIds, new Map())\n        .setDefault(KeysCore.log, this.logger)\n        .setDefault(KeysInitQuery.functionArgumentsCache, this.defaultFunctionArgumentsCache)\n        .setDefault(KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores, new Map());\n\n      // Handle default query format\n      let queryFormat: RDF.QueryFormat = { language: 'sparql', version: '1.1' };\n      if (context.has(KeysInitQuery.queryFormat)) {\n        queryFormat = context.get(KeysInitQuery.queryFormat)!;\n        if (queryFormat.language === 'graphql') {\n          context = context.setDefault(KeysInitQuery.graphqlSingularizeVariables, {});\n        }\n      } else {\n        context = context.set(KeysInitQuery.queryFormat, queryFormat);\n      }\n    }\n\n    return { context };\n  }\n}\n\nexport interface IActorContextPreprocessSetDefaultsArgs extends IActorContextPreprocessArgs {\n  /**\n   * The logger of this actor\n   * @default {a <npmd:@comunica/logger-void/^3.0.0/components/LoggerVoid.jsonld#LoggerVoid>}\n   */\n  logger: Logger;\n}\n","import type { IActorContextPreprocessOutput, IActorContextPreprocessArgs } from '@comunica/bus-context-preprocess';\nimport { ActorContextPreprocess } from '@comunica/bus-context-preprocess';\nimport { KeysInitQuery, KeysRdfUpdateQuads } from '@comunica/context-entries';\nimport type { IActorTest, IAction } from '@comunica/core';\nimport type { QuerySourceUnidentified } from '@comunica/types';\n\n/**\n * A comunica Source To Destination Context Preprocess Actor.\n */\nexport class ActorContextPreprocessSourceToDestination extends ActorContextPreprocess {\n  public constructor(args: IActorContextPreprocessArgs) {\n    super(args);\n  }\n\n  public async test(_action: IAction): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IAction): Promise<IActorContextPreprocessOutput> {\n    if (action.context.get(KeysInitQuery.querySourcesUnidentified) &&\n      !action.context.get(KeysRdfUpdateQuads.destination)) {\n      const sources: QuerySourceUnidentified[] = action.context.get(KeysInitQuery.querySourcesUnidentified)!;\n      if (sources.length === 1) {\n        return { context: action.context.set(KeysRdfUpdateQuads.destination, sources[0]) };\n      }\n    }\n    return action;\n  }\n}\n","import type { IActionHashBindings, IActorHashBindingsOutput } from '@comunica/bus-hash-bindings';\nimport { ActorHashBindings } from '@comunica/bus-hash-bindings';\nimport type { IActorTest } from '@comunica/core';\nimport { sha1 } from 'hash.js';\nimport { termToString } from 'rdf-string';\n\n// eslint-disable-next-line ts/no-require-imports,ts/no-var-requires\nconst canonicalize = require('canonicalize');\n\n/**\n * A comunica Memento Http Actor.\n */\nexport class ActorHashBindingsSha1 extends ActorHashBindings {\n  public async test(action: IActionHashBindings): Promise<IActorTest> {\n    if (!action.allowHashCollisions) {\n      throw new Error(`Actor ${this.name} can not provide hash functions without hash collisions`);\n    }\n    return true;\n  }\n\n  public async run(_action: IActionHashBindings): Promise<IActorHashBindingsOutput> {\n    return {\n      hashFunction: bindings => sha1()\n        .update(canonicalize(Object.fromEntries([ ...bindings ]\n          .map(([ key, value ]) => [ termToString(key), termToString(value) ]))))\n        .digest('hex'),\n      hashCollisions: true,\n    };\n  }\n}\n","/* eslint-disable unicorn/filename-case */\n/* eslint-enable unicorn/filename-case */\nimport { ActorInitQueryBase } from './ActorInitQueryBase';\n\n/* istanbul ignore next */\nif (typeof process === 'undefined') {\n  // Polyfills process.nextTick for readable-stream\n  globalThis.process = require('process/');\n}\n\nexport class ActorInitQuery extends ActorInitQueryBase {}\n","import type { MediatorHttpInvalidate } from '@comunica/bus-http-invalidate';\nimport type { IActionInit, IActorInitArgs, IActorOutputInit } from '@comunica/bus-init';\nimport { ActorInit } from '@comunica/bus-init';\nimport type { MediatorQueryProcess } from '@comunica/bus-query-process';\nimport type {\n  MediatorQueryResultSerializeHandle,\n  MediatorQueryResultSerializeMediaTypes,\n  MediatorQueryResultSerializeMediaTypeFormats,\n} from '@comunica/bus-query-result-serialize';\nimport type { IActorTest } from '@comunica/core';\n\n/**\n * A browser-safe comunica Query Init Actor.\n */\nexport class ActorInitQueryBase extends ActorInit implements IActorInitQueryBaseArgs {\n  public readonly mediatorQueryResultSerialize: MediatorQueryResultSerializeHandle;\n  public readonly mediatorQueryResultSerializeMediaTypeCombiner: MediatorQueryResultSerializeMediaTypes;\n  public readonly mediatorQueryResultSerializeMediaTypeFormatCombiner: MediatorQueryResultSerializeMediaTypeFormats;\n  public readonly mediatorHttpInvalidate: MediatorHttpInvalidate;\n  public readonly mediatorQueryProcess: MediatorQueryProcess;\n\n  public readonly queryString?: string;\n  public readonly defaultQueryInputFormat?: string;\n  public readonly allowNoSources?: boolean;\n  public readonly context?: string;\n\n  public async test(_action: IActionInit): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(_action: IActionInit): Promise<IActorOutputInit> {\n    throw new Error('ActorInitSparql#run is not supported in the browser.');\n  }\n}\n\nexport interface IActorInitQueryBaseArgs extends IActorInitArgs {\n  /**\n   * The query process mediator\n   */\n  mediatorQueryProcess: MediatorQueryProcess;\n  /**\n   * The query serialize mediator\n   */\n  mediatorQueryResultSerialize: MediatorQueryResultSerializeHandle;\n  /**\n   * The query serialize media type combinator\n   */\n  mediatorQueryResultSerializeMediaTypeCombiner: MediatorQueryResultSerializeMediaTypes;\n  /**\n   * The query serialize media type format combinator\n   */\n  mediatorQueryResultSerializeMediaTypeFormatCombiner: MediatorQueryResultSerializeMediaTypeFormats;\n  /**\n   * The HTTP cache invalidation mediator\n   */\n  mediatorHttpInvalidate: MediatorHttpInvalidate;\n\n  /**\n   * A SPARQL query string\n   */\n  queryString?: string;\n  /**\n   * The default query input format\n   * @default {sparql}\n   */\n  defaultQueryInputFormat?: string;\n  /**\n   * If it should be allowed that the user passes no sources.\n   * @default {false}\n   */\n  allowNoSources?: boolean;\n  /**\n   * A JSON string of a query operation context\n   */\n  context?: string;\n}\n","import type { IActionSparqlSerialize, IActorQueryResultSerializeOutput } from '@comunica/bus-query-result-serialize';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport { ActionContext } from '@comunica/core';\nimport type {\n  IActionContext,\n  IQueryOperationResult,\n  IQueryEngine,\n  IQueryExplained,\n  QueryFormatType,\n  QueryType,\n  QueryExplainMode,\n  BindingsStream,\n  QueryAlgebraContext,\n  QueryStringContext,\n  IQueryBindingsEnhanced,\n  IQueryQuadsEnhanced,\n  QueryEnhanced,\n  IQueryContextCommon,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport type { ActorInitQueryBase } from './ActorInitQueryBase';\n\n/**\n * Base implementation of a Comunica query engine.\n */\nexport class QueryEngineBase<\n  // eslint-disable-next-line unused-imports/no-unused-vars\n  QueryContext extends IQueryContextCommon = IQueryContextCommon,\n  QueryStringContextInner extends RDF.QueryStringContext = QueryStringContext,\n  QueryAlgebraContextInner extends RDF.QueryAlgebraContext = QueryAlgebraContext,\n>\nimplements IQueryEngine<QueryStringContextInner, QueryAlgebraContextInner> {\n  private readonly actorInitQuery: ActorInitQueryBase;\n\n  public constructor(actorInitQuery: ActorInitQueryBase) {\n    this.actorInitQuery = actorInitQuery;\n  }\n\n  public async queryBindings<QueryFormatTypeInner extends QueryFormatType>(\n    query: QueryFormatTypeInner,\n    context?: QueryFormatTypeInner extends string ? QueryStringContextInner : QueryAlgebraContextInner,\n  ): Promise<BindingsStream> {\n    return this.queryOfType<QueryFormatTypeInner, IQueryBindingsEnhanced>(query, context, 'bindings');\n  }\n\n  public async queryQuads<QueryFormatTypeInner extends QueryFormatType>(\n    query: QueryFormatTypeInner,\n    context?: QueryFormatTypeInner extends string ? QueryStringContextInner : QueryAlgebraContextInner,\n  ): Promise<AsyncIterator<RDF.Quad> & RDF.ResultStream<RDF.Quad>> {\n    return this.queryOfType<QueryFormatTypeInner, IQueryQuadsEnhanced>(query, context, 'quads');\n  }\n\n  public async queryBoolean<QueryFormatTypeInner extends QueryFormatType>(\n    query: QueryFormatTypeInner,\n    context?: QueryFormatTypeInner extends string ? QueryStringContextInner : QueryAlgebraContextInner,\n  ): Promise<boolean> {\n    return this.queryOfType<QueryFormatTypeInner, RDF.QueryBoolean>(query, context, 'boolean');\n  }\n\n  public async queryVoid<QueryFormatTypeInner extends QueryFormatType>(\n    query: QueryFormatTypeInner,\n    context?: QueryFormatTypeInner extends string ? QueryStringContextInner : QueryAlgebraContextInner,\n  ): Promise<void> {\n    return this.queryOfType<QueryFormatTypeInner, RDF.QueryVoid>(query, context, 'void');\n  }\n\n  protected async queryOfType<QueryFormatTypeInner extends QueryFormatType, QueryTypeOut extends QueryEnhanced>(\n    query: QueryFormatTypeInner,\n    context: undefined | (QueryFormatTypeInner extends string ?\n      QueryStringContextInner : QueryAlgebraContextInner),\n    expectedType: QueryTypeOut['resultType'],\n  ): Promise<ReturnType<QueryTypeOut['execute']>> {\n    const result = await this.query<QueryFormatTypeInner>(query, context);\n    if (result.resultType === expectedType) {\n      return <ReturnType<QueryTypeOut['execute']>> await result.execute();\n    }\n    throw new Error(`Query result type '${expectedType}' was expected, while '${result.resultType}' was found.`);\n  }\n\n  /**\n   * Evaluate the given query\n   * @param query A query string or algebra.\n   * @param context An optional query context.\n   * @return {Promise<QueryType>} A promise that resolves to the query output.\n   */\n  public async query<QueryFormatTypeInner extends QueryFormatType>(\n    query: QueryFormatTypeInner,\n    context?: QueryFormatTypeInner extends string ? QueryStringContextInner : QueryAlgebraContextInner,\n  ): Promise<QueryType> {\n    const output = await this.queryOrExplain(query, context);\n    if ('explain' in output) {\n      throw new Error(`Tried to explain a query when in query-only mode`);\n    }\n    return output;\n  }\n\n  /**\n   * Explain the given query\n   * @param query A query string or algebra.\n   * @param context An optional query context.\n   * @param explainMode The explain mode.\n   * @return {Promise<QueryType | IQueryExplained>} A promise that resolves to\n   *                                                               the query output or explanation.\n   */\n  public async explain<QueryFormatTypeInner extends QueryFormatType>(\n    query: QueryFormatTypeInner,\n    context: QueryFormatTypeInner extends string ? QueryStringContextInner : QueryAlgebraContextInner,\n    explainMode: QueryExplainMode,\n  ): Promise<IQueryExplained> {\n    context.explain = explainMode;\n    const output = await this.queryOrExplain(query, context);\n    return <IQueryExplained> output;\n  }\n\n  /**\n   * Evaluate or explain the given query\n   * @param query A query string or algebra.\n   * @param context An optional query context.\n   * @return {Promise<QueryType | IQueryExplained>} A promise that resolves to\n   *                                                               the query output or explanation.\n   */\n  public async queryOrExplain<QueryFormatTypeInner extends QueryFormatType>(\n    query: QueryFormatTypeInner,\n    context?: QueryFormatTypeInner extends string ? QueryStringContextInner : QueryAlgebraContextInner,\n  ): Promise<QueryType | IQueryExplained> {\n    const actionContext: IActionContext = ActionContext.ensureActionContext(context);\n\n    // Invalidate caches if cache argument is set to false\n    if (actionContext.get(KeysInitQuery.noCache)) {\n      await this.invalidateHttpCache();\n    }\n\n    // Invoke query process\n    const { result } = await this.actorInitQuery.mediatorQueryProcess.mediate({ query, context: actionContext });\n    if ('explain' in result) {\n      return result;\n    }\n    return QueryEngineBase.internalToFinalResult(result);\n  }\n\n  /**\n   * @param context An optional context.\n   * @return {Promise<{[p: string]: number}>} All available SPARQL (weighted) result media types.\n   */\n  public async getResultMediaTypes(context?: any): Promise<Record<string, number>> {\n    context = ActionContext.ensureActionContext(context);\n    return (await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner\n      .mediate({ context, mediaTypes: true })).mediaTypes;\n  }\n\n  /**\n   * @param context An optional context.\n   * @return {Promise<{[p: string]: number}>} All available SPARQL result media type formats.\n   */\n  public async getResultMediaTypeFormats(context?: any): Promise<Record<string, string>> {\n    context = ActionContext.ensureActionContext(context);\n    return (await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner\n      .mediate({ context, mediaTypeFormats: true })).mediaTypeFormats;\n  }\n\n  /**\n   * Convert a query result to a string stream based on a certain media type.\n   * @param {IQueryOperationResult} queryResult A query result.\n   * @param {string} mediaType A media type.\n   * @param {ActionContext} context An optional context.\n   * @return {Promise<IActorQueryResultSerializeOutput>} A text stream.\n   */\n  public async resultToString(queryResult: RDF.Query<any>, mediaType?: string, context?: any):\n  Promise<IActorQueryResultSerializeOutput> {\n    context = ActionContext.ensureActionContext(context);\n    if (!mediaType) {\n      switch (queryResult.resultType) {\n        case 'bindings':\n          mediaType = 'application/json';\n          break;\n        case 'quads':\n          mediaType = 'application/trig';\n          break;\n        default:\n          mediaType = 'simple';\n          break;\n      }\n    }\n    const handle: IActionSparqlSerialize = { ...await QueryEngineBase.finalToInternalResult(queryResult), context };\n    return (await this.actorInitQuery.mediatorQueryResultSerialize\n      .mediate({ context, handle, handleMediaType: mediaType })).handle;\n  }\n\n  /**\n   * Invalidate all internal caches related to the given page URL.\n   * If no page URL is given, then all pages will be invalidated.\n   * @param {string} url The page URL to invalidate.\n   * @param context An optional ActionContext to pass to the actors.\n   * @return {Promise<any>} A promise resolving when the caches have been invalidated.\n   */\n  public invalidateHttpCache(url?: string, context?: any): Promise<any> {\n    context = ActionContext.ensureActionContext(context);\n    return this.actorInitQuery.mediatorHttpInvalidate.mediate({ url, context });\n  }\n\n  /**\n   * Convert an internal query result to a final one.\n   * @param internalResult An intermediary query result.\n   */\n  public static internalToFinalResult(internalResult: IQueryOperationResult): QueryType {\n    switch (internalResult.type) {\n      case 'bindings':\n        return {\n          resultType: 'bindings',\n          execute: async() => internalResult.bindingsStream,\n          metadata: async() => <any> await internalResult.metadata(),\n          context: internalResult.context,\n        };\n      case 'quads':\n        return {\n          resultType: 'quads',\n          execute: async() => internalResult.quadStream,\n          metadata: async() => <any> await internalResult.metadata(),\n          context: internalResult.context,\n        };\n      case 'boolean':\n        return {\n          resultType: 'boolean',\n          execute: async() => internalResult.execute(),\n          context: internalResult.context,\n        };\n      case 'void':\n        return {\n          resultType: 'void',\n          execute: async() => internalResult.execute(),\n          context: internalResult.context,\n        };\n    }\n  }\n\n  /**\n   * Convert a final query result to an internal one.\n   * @param finalResult A final query result.\n   */\n  public static async finalToInternalResult(finalResult: RDF.Query<any>): Promise<IQueryOperationResult> {\n    switch (finalResult.resultType) {\n      case 'bindings':\n        return {\n          type: 'bindings',\n          bindingsStream: <BindingsStream> await finalResult.execute(),\n          metadata: async() => <any> await finalResult.metadata(),\n        };\n      case 'quads':\n        return {\n          type: 'quads',\n          quadStream: <AsyncIterator<RDF.Quad>> await finalResult.execute(),\n          metadata: async() => <any> await finalResult.metadata(),\n        };\n      case 'boolean':\n        return {\n          type: 'boolean',\n          execute: () => finalResult.execute(),\n        };\n      case 'void':\n        return {\n          type: 'void',\n          execute: () => finalResult.execute(),\n        };\n    }\n  }\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n  IActorOptimizeQueryOperationArgs,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport { getDataDestinationValue } from '@comunica/bus-rdf-update-quads';\nimport { KeysInitQuery, KeysQueryOperation, KeysRdfUpdateQuads } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport type { IDataDestination, IQuerySourceWrapper } from '@comunica/types';\nimport { Algebra, Util } from 'sparqlalgebrajs';\n\n/**\n * A comunica Assign Sources Exhaustive Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationAssignSourcesExhaustive extends ActorOptimizeQueryOperation {\n  public constructor(args: IActorOptimizeQueryOperationArgs) {\n    super(args);\n  }\n\n  public async test(_action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    const sources: IQuerySourceWrapper[] = action.context.get(KeysQueryOperation.querySources) ?? [];\n    if (sources.length === 0) {\n      return { operation: action.operation, context: action.context };\n    }\n    if (sources.length === 1) {\n      const sourceWrapper = sources[0];\n      const destination: IDataDestination | undefined = action.context.get(KeysRdfUpdateQuads.destination);\n      if (!destination || sourceWrapper.source.referenceValue === getDataDestinationValue(destination)) {\n        try {\n          const shape = await sourceWrapper.source.getSelectorShape(action.context);\n          if (ActorQueryOperation.doesShapeAcceptOperation(shape, action.operation)) {\n            return {\n              operation: ActorQueryOperation.assignOperationSource(action.operation, sourceWrapper),\n              context: action.context,\n            };\n          }\n        } catch {\n          // Fallback to the default case when the selector shape does not exist,\n          // which can occur for a non-existent destination.\n        }\n      }\n    }\n    return {\n      operation: this.assignExhaustive(action.operation, sources),\n      // We only keep queryString in the context if we only have a single source that accepts the full operation.\n      // In that case, the queryString can be sent to the source as-is.\n      context: action.context\n        .delete(KeysInitQuery.queryString),\n    };\n  }\n\n  /**\n   * Assign the given sources to the leaves in the given query operation.\n   * Leaves will be wrapped in a union operation and duplicated for every source.\n   * The input operation will not be modified.\n   * @param operation The input operation.\n   * @param sources The sources to assign.\n   */\n  public assignExhaustive(operation: Algebra.Operation, sources: IQuerySourceWrapper[]): Algebra.Operation {\n    // eslint-disable-next-line ts/no-this-alias\n    const self = this;\n    return Util.mapOperation(operation, {\n      [Algebra.types.PATTERN](subOperation, factory) {\n        if (sources.length === 1) {\n          return {\n            result: ActorQueryOperation.assignOperationSource(subOperation, sources[0]),\n            recurse: false,\n          };\n        }\n        return {\n          result: factory.createUnion(sources\n            .map(source => ActorQueryOperation.assignOperationSource(subOperation, source))),\n          recurse: false,\n        };\n      },\n      [Algebra.types.LINK](subOperation, factory) {\n        if (sources.length === 1) {\n          return {\n            result: ActorQueryOperation.assignOperationSource(subOperation, sources[0]),\n            recurse: false,\n          };\n        }\n        return {\n          result: factory.createAlt(sources\n            .map(source => ActorQueryOperation.assignOperationSource(subOperation, source))),\n          recurse: false,\n        };\n      },\n      [Algebra.types.NPS](subOperation, factory) {\n        if (sources.length === 1) {\n          return {\n            result: ActorQueryOperation.assignOperationSource(subOperation, sources[0]),\n            recurse: false,\n          };\n        }\n        return {\n          result: factory.createAlt(sources\n            .map(source => ActorQueryOperation.assignOperationSource(subOperation, source))),\n          recurse: false,\n        };\n      },\n      [Algebra.types.SERVICE](subOperation) {\n        return {\n          result: subOperation,\n          recurse: false,\n        };\n      },\n      [Algebra.types.CONSTRUCT](subOperation, factory) {\n        return {\n          result: factory.createConstruct(\n            self.assignExhaustive(subOperation.input, sources),\n            subOperation.template,\n          ),\n          recurse: false,\n        };\n      },\n      [Algebra.types.DELETE_INSERT](subOperation, factory) {\n        return {\n          result: factory.createDeleteInsert(\n            subOperation.delete,\n            subOperation.insert,\n            subOperation.where ? self.assignExhaustive(subOperation.where, sources) : undefined,\n          ),\n          recurse: false,\n        };\n      },\n    });\n  }\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type { Algebra, Factory } from 'sparqlalgebrajs';\nimport { Util } from 'sparqlalgebrajs';\n\n/**\n * A comunica BGP to Join Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationBgpToJoin extends ActorOptimizeQueryOperation {\n  public async test(_action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    const operation = Util.mapOperation(action.operation, {\n      bgp(op: Algebra.Bgp, factory: Factory) {\n        return {\n          recurse: false,\n          result: factory.createJoin(op.patterns),\n        };\n      },\n    });\n    return { operation, context: action.context };\n  }\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n  IActorOptimizeQueryOperationArgs,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport { Algebra, Factory } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory<RDF.BaseQuad>();\nconst AF = new Factory();\n\n/**\n * A comunica Describe To Constructs Subject Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationDescribeToConstructsSubject extends ActorOptimizeQueryOperation {\n  public constructor(args: IActorOptimizeQueryOperationArgs) {\n    super(args);\n  }\n\n  public async test(action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    if (action.operation.type !== Algebra.types.DESCRIBE) {\n      throw new Error(`Actor ${this.name} only supports describe operations, but got ${action.operation.type}`);\n    }\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    const operationOriginal: Algebra.Describe = <Algebra.Describe> action.operation;\n\n    // Create separate construct queries for all non-variable terms\n    const operations: Algebra.Construct[] = operationOriginal.terms\n      .filter(term => term.termType !== 'Variable')\n      .map((term: RDF.Term) => {\n        // Transform each term to a separate construct operation with S ?p ?o patterns (BGP) for all terms\n        const patterns: RDF.BaseQuad[] = [\n          DF.quad(term, DF.variable('__predicate'), DF.variable('__object')),\n        ];\n\n        // eslint-disable-next-line unicorn/no-array-for-each\n        patterns.forEach((templatePattern: any) => templatePattern.type = 'pattern');\n        const templateOperation: Algebra.Operation = {\n          type: Algebra.types.BGP,\n          patterns: <Algebra.Pattern[]> patterns,\n        };\n\n        // Create a construct query\n        return <Algebra.Construct> {\n          input: templateOperation,\n          template: <Algebra.Pattern[]> patterns,\n          type: 'construct',\n        };\n      });\n\n    // If we have variables in the term list,\n    // create one separate construct operation to determine these variables using the input pattern.\n    if (operations.length !== operationOriginal.terms.length) {\n      let variablePatterns: Algebra.Pattern[] = [];\n      operationOriginal.terms\n        .filter(term => term.termType === 'Variable')\n        // eslint-disable-next-line unicorn/no-array-for-each\n        .forEach((term: RDF.Term, i: number) => {\n          // Transform each term to an S ?p ?o pattern in a non-conflicting way\n          const patterns: RDF.BaseQuad[] = [\n            DF.quad(term, DF.variable(`__predicate${i}`), DF.variable(`__object${i}`)),\n          ];\n\n          // eslint-disable-next-line unicorn/no-array-for-each\n          patterns.forEach((templatePattern: any) => templatePattern.type = 'pattern');\n          variablePatterns = [ ...variablePatterns, ...<Algebra.Pattern[]> patterns ];\n        });\n\n      // Add a single construct for the variables\n      // This requires a join between the input pattern and our variable patterns that form a simple BGP\n      operations.push({\n        input: {\n          type: Algebra.types.JOIN,\n          input: [\n            operationOriginal.input,\n            { type: Algebra.types.BGP, patterns: variablePatterns },\n          ],\n        },\n        template: variablePatterns,\n        type: Algebra.types.CONSTRUCT,\n      });\n    }\n\n    // Union the construct operations\n    const operation = AF.createUnion(operations, false);\n\n    return { operation, context: action.context };\n  }\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n  IActorOptimizeQueryOperationArgs,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { uniqTerms } from 'rdf-terms';\nimport type { Factory } from 'sparqlalgebrajs';\nimport { Algebra, Util } from 'sparqlalgebrajs';\n\n/**\n * A comunica Filter Pushdown Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationFilterPushdown extends ActorOptimizeQueryOperation {\n  public constructor(args: IActorOptimizeQueryOperationArgs) {\n    super(args);\n  }\n\n  public async test(_action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    // eslint-disable-next-line ts/no-this-alias\n    const self = this;\n    const operation = Util.mapOperation(action.operation, {\n      filter(op: Algebra.Filter, factory: Factory) {\n        // For all filter expressions in the operation,\n        // we attempt to push them down as deep as possible into the algebra.\n        const variables = self.getExpressionVariables(op.expression);\n        return {\n          recurse: true,\n          result: self.filterPushdown(op.expression, variables, op.input, factory, action.context),\n        };\n      },\n    });\n    return { operation, context: action.context };\n  }\n\n  /**\n   * Get all variables inside the given expression.\n   * @param expression An expression.\n   * @return An array of variables, or undefined if the expression is unsupported for pushdown.\n   */\n  public getExpressionVariables(expression: Algebra.Expression): RDF.Variable[] {\n    switch (expression.expressionType) {\n      case Algebra.expressionTypes.AGGREGATE:\n      case Algebra.expressionTypes.WILDCARD:\n        throw new Error(`Getting expression variables is not supported for ${expression.expressionType}`);\n      case Algebra.expressionTypes.EXISTENCE:\n        return Util.inScopeVariables(expression.input);\n      case Algebra.expressionTypes.NAMED:\n        return [];\n      case Algebra.expressionTypes.OPERATOR:\n        return uniqTerms(expression.args.flatMap(arg => this.getExpressionVariables(arg)));\n      case Algebra.expressionTypes.TERM:\n        if (expression.term.termType === 'Variable') {\n          return [ expression.term ];\n        }\n        return [];\n    }\n  }\n\n  protected getOverlappingOperations(\n    operation: Algebra.Operation,\n    expressionVariables: RDF.Variable[],\n  ): {\n      fullyOverlapping: Algebra.Operation[];\n      partiallyOverlapping: Algebra.Operation[];\n      notOverlapping: Algebra.Operation[];\n    } {\n    const fullyOverlapping: Algebra.Operation[] = [];\n    const partiallyOverlapping: Algebra.Operation[] = [];\n    const notOverlapping: Algebra.Operation[] = [];\n    for (const input of operation.input) {\n      const inputVariables = Util.inScopeVariables(input);\n      if (this.variablesSubSetOf(expressionVariables, inputVariables)) {\n        fullyOverlapping.push(input);\n      } else if (this.variablesIntersect(expressionVariables, inputVariables)) {\n        partiallyOverlapping.push(input);\n      } else {\n        notOverlapping.push(input);\n      }\n    }\n\n    return {\n      fullyOverlapping,\n      partiallyOverlapping,\n      notOverlapping,\n    };\n  }\n\n  /**\n   * Recursively push down the given expression into the given operation if possible.\n   * Different operators have different semantics for choosing whether or not to push down,\n   * and how this pushdown is done.\n   * For every passed operator, it is checked whether or not the filter will have any effect on the operation.\n   * If not, the filter is voided.\n   * @param expression An expression to push down.\n   * @param expressionVariables The variables inside the given expression.\n   * @param operation The operation to push down into.\n   * @param factory An algebra factory.\n   * @param context The action context.\n   * @return The modified operation.\n   */\n  public filterPushdown(\n    expression: Algebra.Expression,\n    expressionVariables: RDF.Variable[],\n    operation: Algebra.Operation,\n    factory: Factory,\n    context: IActionContext,\n  ): Algebra.Operation {\n    switch (operation.type) {\n      case Algebra.types.EXTEND:\n        // Pass if the variable is not part of the expression\n        if (!this.variablesIntersect([ operation.variable ], expressionVariables)) {\n          return factory.createExtend(\n            this.filterPushdown(expression, expressionVariables, operation.input, factory, context),\n            operation.variable,\n            operation.expression,\n          );\n        }\n        return factory.createFilter(operation, expression);\n      case Algebra.types.FILTER:\n        // Always pass\n        return factory.createFilter(\n          this.filterPushdown(expression, expressionVariables, operation.input, factory, context),\n          operation.expression,\n        );\n      case Algebra.types.JOIN: {\n        // Don't push down for empty join\n        if (operation.input.length === 0) {\n          return factory.createFilter(operation, expression);\n        }\n\n        // Determine overlapping operations\n        const {\n          fullyOverlapping,\n          partiallyOverlapping,\n          notOverlapping,\n        } = this.getOverlappingOperations(operation, expressionVariables);\n\n        const joins: Algebra.Operation[] = [];\n        this.logDebug(context, `Push down filter across join entries with ${fullyOverlapping.length} fully overlapping, ${partiallyOverlapping.length} partially overlapping, and ${notOverlapping.length} not overlapping`);\n        if (fullyOverlapping.length > 0) {\n          joins.push(factory.createJoin(fullyOverlapping\n            .map(input => this.filterPushdown(expression, expressionVariables, input, factory, context))));\n        }\n        if (partiallyOverlapping.length > 0) {\n          joins.push(factory.createFilter(factory.createJoin(partiallyOverlapping, false), expression));\n        }\n        if (notOverlapping.length > 0) {\n          joins.push(...notOverlapping);\n        }\n\n        return joins.length === 1 ? joins[0] : factory.createJoin(joins);\n      }\n      case Algebra.types.NOP:\n        return operation;\n      case Algebra.types.PROJECT:\n        // Push down if variables overlap\n        if (this.variablesIntersect(operation.variables, expressionVariables)) {\n          return factory.createProject(\n            this.filterPushdown(expression, expressionVariables, operation.input, factory, context),\n            operation.variables,\n          );\n        }\n        // Void expression otherwise\n        return operation;\n      case Algebra.types.UNION: {\n        // Determine overlapping operations\n        const {\n          fullyOverlapping,\n          partiallyOverlapping,\n          notOverlapping,\n        } = this.getOverlappingOperations(operation, expressionVariables);\n\n        const unions: Algebra.Operation[] = [];\n        this.logDebug(context, `Push down filter across union entries with ${fullyOverlapping.length} fully overlapping, ${partiallyOverlapping.length} partially overlapping, and ${notOverlapping.length} not overlapping`);\n        if (fullyOverlapping.length > 0) {\n          unions.push(factory.createUnion(fullyOverlapping\n            .map(input => this.filterPushdown(expression, expressionVariables, input, factory, context))));\n        }\n        if (partiallyOverlapping.length > 0) {\n          unions.push(factory.createFilter(factory.createUnion(partiallyOverlapping, false), expression));\n        }\n        if (notOverlapping.length > 0) {\n          unions.push(...notOverlapping);\n        }\n\n        return unions.length === 1 ? unions[0] : factory.createUnion(unions);\n      }\n      case Algebra.types.VALUES:\n        // Only keep filter if it overlaps with the variables\n        if (this.variablesIntersect(operation.variables, expressionVariables)) {\n          return factory.createFilter(operation, expression);\n        }\n        return operation;\n      case Algebra.types.LEFT_JOIN:\n      case Algebra.types.MINUS:\n      case Algebra.types.ALT:\n      case Algebra.types.ASK:\n      case Algebra.types.BGP:\n      case Algebra.types.CONSTRUCT:\n      case Algebra.types.DESCRIBE:\n      case Algebra.types.DISTINCT:\n      case Algebra.types.EXPRESSION:\n      case Algebra.types.FROM:\n      case Algebra.types.GRAPH:\n      case Algebra.types.GROUP:\n      case Algebra.types.INV:\n      case Algebra.types.LINK:\n      case Algebra.types.NPS:\n      case Algebra.types.ONE_OR_MORE_PATH:\n      case Algebra.types.ORDER_BY:\n      case Algebra.types.PATTERN:\n      case Algebra.types.REDUCED:\n      case Algebra.types.SEQ:\n      case Algebra.types.SERVICE:\n      case Algebra.types.SLICE:\n      case Algebra.types.PATH:\n      case Algebra.types.ZERO_OR_MORE_PATH:\n      case Algebra.types.ZERO_OR_ONE_PATH:\n      case Algebra.types.COMPOSITE_UPDATE:\n      case Algebra.types.DELETE_INSERT:\n      case Algebra.types.LOAD:\n      case Algebra.types.CLEAR:\n      case Algebra.types.CREATE:\n      case Algebra.types.DROP:\n      case Algebra.types.ADD:\n      case Algebra.types.MOVE:\n      case Algebra.types.COPY:\n        // Operations that do not support pushing down\n        // Left-join and minus might be possible to support in the future.\n        return factory.createFilter(operation, expression);\n    }\n  }\n\n  /**\n   * Check if there is an overlap between the two given lists of variables.\n   * @param varsA A list of variables.\n   * @param varsB A list of variables.\n   */\n  public variablesIntersect(varsA: RDF.Variable[], varsB: RDF.Variable[]): boolean {\n    return varsA.some(varA => varsB.some(varB => varA.equals(varB)));\n  }\n\n  /**\n   * Check if all variables from the first list are included in the second list.\n   * The second list may contain other variables as well.\n   * @param varsNeedles A list of variables to search for.\n   * @param varsHaystack A list of variables to search in.\n   */\n  public variablesSubSetOf(varsNeedles: RDF.Variable[], varsHaystack: RDF.Variable[]): boolean {\n    return varsNeedles.length <= varsHaystack.length &&\n      varsNeedles.every(varA => varsHaystack.some(varB => varA.equals(varB)));\n  }\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n  IActorOptimizeQueryOperationArgs,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQuerySourceWrapper } from '@comunica/types';\nimport { Algebra, Factory } from 'sparqlalgebrajs';\n\nconst AF = new Factory();\n\n/**\n * A comunica Group Sources Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationGroupSources extends ActorOptimizeQueryOperation {\n  public constructor(args: IActorOptimizeQueryOperationArgs) {\n    super(args);\n  }\n\n  public async test(action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    if (ActorQueryOperation.getOperationSource(action.operation)) {\n      throw new Error(`Actor ${this.name} does not work with top-level operation sources.`);\n    }\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    return { operation: await this.groupOperation(action.operation, action.context), context: action.context };\n  }\n\n  /**\n   * Group operations belonging to the same source together, only if that source accepts the grouped operations.\n   * This grouping will be done recursively for the whole operation tree.\n   * Operations annotated with sources are considered leaves in the tree.\n   * @param operation An operation to group.\n   * @param context The action context.\n   */\n  public async groupOperation(operation: Algebra.Operation, context: IActionContext): Promise<Algebra.Operation> {\n    // Return operation as-is if the operation already has a single source, or if the operation has no children.\n    if (ActorQueryOperation.getOperationSource(operation) ?? !('input' in operation)) {\n      return operation;\n    }\n\n    // If operation has a single input, move source annotation upwards if the source can handle it.\n    if (!Array.isArray(operation.input)) {\n      const groupedInput = await this.groupOperation(operation.input, context);\n      if (groupedInput.metadata?.scopedSource) {\n        const source: IQuerySourceWrapper = ActorQueryOperation.getOperationSource(groupedInput)!;\n        if (ActorQueryOperation\n          .doesShapeAcceptOperation(await source.source.getSelectorShape(context), operation)) {\n          this.logDebug(context, `Hoist 1 source-specific operation into a single ${operation.type} operation for ${source.source.toString()}`);\n          ActorQueryOperation.removeOperationSource(groupedInput);\n          operation = ActorQueryOperation.assignOperationSource(operation, source);\n        }\n      }\n      return <Algebra.Operation> { ...operation, input: groupedInput };\n    }\n\n    // If operation has multiple inputs, cluster source annotations.\n    const inputs: Algebra.Operation[] = await Promise.all(operation.input\n      .map(subInput => this.groupOperation(subInput, context)));\n    const clusters = this.clusterOperationsWithEqualSources(inputs);\n\n    // If we just have a single cluster, move the source annotation upwards\n    if (clusters.length === 1) {\n      const newInputs = clusters[0];\n      const source = ActorQueryOperation.getOperationSource(clusters[0][0])!;\n      return <Algebra.Operation> {\n        ...await this.moveSourceAnnotationUpwardsIfPossible(operation, newInputs, source, context),\n        input: newInputs,\n      };\n    }\n\n    // If the number of clusters is equal to the number of original inputs, do nothing.\n    if (clusters.length === inputs.length) {\n      return <Algebra.Operation> { ...operation, input: inputs };\n    }\n\n    // If we have multiple clusters, created nested multi-operations\n    let multiFactoryMethod: (children: Algebra.Operation[], flatten: boolean) => Algebra.Operation;\n    switch (operation.type) {\n      case Algebra.types.JOIN:\n        multiFactoryMethod = AF.createJoin.bind(AF);\n        break;\n      case Algebra.types.UNION:\n        multiFactoryMethod = AF.createUnion.bind(AF);\n        break;\n      case Algebra.types.ALT:\n        multiFactoryMethod = <any> AF.createAlt.bind(AF);\n        break;\n      case Algebra.types.SEQ:\n        multiFactoryMethod = <any> AF.createSeq.bind(AF);\n        break;\n      default:\n        // While LeftJoin and Minus are also multi-operations,\n        // these can never occur because they only have 2 inputs,\n        // so these cases will always be captured by one of the 2 if-cases above\n        // (clusters.length === 1 or clusters.length === input.length)\n\n        // In all other cases, error\n        throw new Error(`Unsupported operation '${operation.type}' detected while grouping sources`);\n    }\n    return await this.groupOperationMulti(clusters, multiFactoryMethod, context);\n  }\n\n  protected async groupOperationMulti(\n    clusters: Algebra.Operation[][],\n    factoryMethod: (children: Algebra.Operation[], flatten: boolean) => Algebra.Operation,\n    context: IActionContext,\n  ): Promise<Algebra.Operation> {\n    let flatten = true;\n    const nestedMerges = await Promise.all(clusters.map(async(cluster) => {\n      const source = ActorQueryOperation.getOperationSource(cluster[0])!;\n      const merged = await this\n        .moveSourceAnnotationUpwardsIfPossible(factoryMethod(cluster, true), cluster, source, context);\n      if (ActorQueryOperation.getOperationSource(merged)) {\n        flatten = false;\n      }\n      return merged;\n    }));\n    return factoryMethod(nestedMerges, flatten);\n  }\n\n  /**\n   * Cluster the given operations by equal source annotations.\n   * @param operationsIn An array of operations to cluster.\n   */\n  public clusterOperationsWithEqualSources(operationsIn: Algebra.Operation[]): Algebra.Operation[][] {\n    // Operations can have a source, or no source at all\n    const sourceOperations: Map<IQuerySourceWrapper, Algebra.Operation[]> = new Map();\n    const sourcelessOperations: Algebra.Operation[] = [];\n\n    // Cluster by source\n    for (const operation of operationsIn) {\n      const source: IQuerySourceWrapper = ActorQueryOperation.getOperationSource(operation)!;\n      if (source) {\n        if (!sourceOperations.has(source)) {\n          sourceOperations.set(source, []);\n        }\n        sourceOperations.get(source)!.push(operation);\n      } else {\n        sourcelessOperations.push(operation);\n      }\n    }\n\n    // Return clusters\n    const clusters: Algebra.Operation[][] = [];\n    if (sourcelessOperations.length > 0) {\n      clusters.push(sourcelessOperations);\n    }\n    for (const [ source, operations ] of sourceOperations.entries()) {\n      clusters.push(operations\n        .map(operation => ActorQueryOperation.assignOperationSource(operation, source)));\n    }\n    return clusters;\n  }\n\n  /**\n   * If the given source accepts the grouped operation, annotate the grouped operation with the source,\n   * and remove the source annotation from the seperate input operations.\n   * Otherwise, return the grouped operation unchanged.\n   * @param operation A grouped operation consisting of all given input operations.\n   * @param inputs An array of operations that share the same source annotation.\n   * @param source The common source.\n   * @param context The action context.\n   */\n  public async moveSourceAnnotationUpwardsIfPossible<O extends Algebra.Operation>(\n    operation: O,\n    inputs: Algebra.Operation[],\n    source: IQuerySourceWrapper | undefined,\n    context: IActionContext,\n  ): Promise<O> {\n    if (source && ActorQueryOperation\n      .doesShapeAcceptOperation(await source.source.getSelectorShape(context), operation)) {\n      this.logDebug(context, `Hoist ${inputs.length} source-specific operations into a single ${operation.type} operation for ${source.source.toString()}`);\n      operation = ActorQueryOperation.assignOperationSource(operation, source);\n      for (const input of inputs) {\n        ActorQueryOperation.removeOperationSource(input);\n      }\n    }\n    return operation;\n  }\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type { Algebra, Factory } from 'sparqlalgebrajs';\nimport { Util } from 'sparqlalgebrajs';\n\n/**\n * A comunica Join BGP Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationJoinBgp extends ActorOptimizeQueryOperation {\n  public async test(_action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    const operation = Util.mapOperation(action.operation, {\n      join(op: Algebra.Join, factory: Factory) {\n        if (op.input.every(subInput => subInput.type === 'bgp')) {\n          return {\n            recurse: false,\n            result: factory.createBgp(op.input.flatMap(subInput => subInput.patterns)),\n          };\n        }\n        return {\n          recurse: false,\n          result: op,\n        };\n      },\n    });\n    return { operation, context: action.context };\n  }\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type { Algebra, Factory } from 'sparqlalgebrajs';\nimport { Util } from 'sparqlalgebrajs';\n\n/**\n * A comunica Join Connected Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationJoinConnected extends ActorOptimizeQueryOperation {\n  public async test(_action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    const operation = Util.mapOperation(action.operation, {\n      join(op: Algebra.Join, factory: Factory) {\n        return {\n          recurse: false,\n          result: ActorOptimizeQueryOperationJoinConnected.cluster(op, factory),\n        };\n      },\n    });\n    return { operation, context: action.context };\n  }\n\n  /**\n   * Iteratively cluster join entries based on their overlapping variables.\n   * @param op A join operation.\n   * @param factory An algebra factory.\n   */\n  public static cluster(op: Algebra.Join, factory: Factory): Algebra.Join {\n    // Initialize each entry to be in a separate cluster\n    const initialClusters: IJoinCluster[] = op.input.map(subOp => ({\n      inScopeVariables: Object.fromEntries(Util.inScopeVariables(subOp).map(variable => [ variable.value, true ])),\n      entries: [ subOp ],\n    }));\n\n    // Iteratively merge clusters until they don't change anymore\n    let oldClusters: IJoinCluster[];\n    let newClusters: IJoinCluster[] = initialClusters;\n    do {\n      oldClusters = newClusters;\n      newClusters = ActorOptimizeQueryOperationJoinConnected.clusterIteration(oldClusters);\n    } while (oldClusters.length !== newClusters.length);\n\n    // Create new join operation of latest clusters\n    const subJoins = newClusters.map(cluster => factory.createJoin(cluster.entries));\n    return subJoins.length === 1 ? subJoins[0] : factory.createJoin(subJoins, false);\n  }\n\n  /**\n   * Perform a single clustering iteration.\n   * Clusters will be joined if they have overlapping variables.\n   * @param oldCluster\n   */\n  public static clusterIteration(oldCluster: IJoinCluster[]): IJoinCluster[] {\n    const newClusters: IJoinCluster[] = [];\n\n    for (const entry of oldCluster) {\n      // Try to add entry to a join cluster\n      let joined = false;\n      for (const newEntry of newClusters) {\n        if (ActorOptimizeQueryOperationJoinConnected\n          .haveOverlappingVariables(entry.inScopeVariables, newEntry.inScopeVariables)) {\n          newEntry.entries = [ ...newEntry.entries, ...entry.entries ];\n          newEntry.inScopeVariables = { ...newEntry.inScopeVariables, ...entry.inScopeVariables };\n          joined = true;\n          break;\n        }\n      }\n\n      // If none was found, create new cluster\n      if (!joined) {\n        newClusters.push({\n          inScopeVariables: entry.inScopeVariables,\n          entries: entry.entries,\n        });\n      }\n    }\n\n    return newClusters;\n  }\n\n  /**\n   * Check if the two given variable objects are overlapping.\n   * @param variablesA A variables objects.\n   * @param variablesB A variables objects.\n   */\n  public static haveOverlappingVariables(\n    variablesA: Record<string, boolean>,\n    variablesB: Record<string, boolean>,\n  ): boolean {\n    for (const variableA of Object.keys(variablesA)) {\n      if (variablesB[variableA]) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\n\n/**\n * A cluster of join entries.\n */\nexport interface IJoinCluster {\n  /**\n   * Union of all variables in scope within the join entries.\n   */\n  inScopeVariables: Record<string, boolean>;\n  /**\n   * Join entries\n   */\n  entries: Algebra.Operation[];\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n  IActorOptimizeQueryOperationArgs,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport { KeysQuerySourceIdentify } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQuerySourceWrapper, MetadataBindings } from '@comunica/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport { Algebra, Factory, Util } from 'sparqlalgebrajs';\n\nconst AF = new Factory();\nconst DF = new DataFactory();\n\n/**\n * A comunica Prune Empty Source Operations Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationPruneEmptySourceOperations extends ActorOptimizeQueryOperation {\n  private readonly useAskIfSupported: boolean;\n\n  public constructor(args: IActorOptimizeQueryOperationPruneEmptySourceOperationsArgs) {\n    super(args);\n  }\n\n  public async test(action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    if (ActorQueryOperation.getOperationSource(action.operation)) {\n      throw new Error(`Actor ${this.name} does not work with top-level operation sources.`);\n    }\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    let operation = action.operation;\n\n    // Collect all operations with source types\n    // Only consider unions of patterns or alts of links, since these are created during exhaustive source assignment.\n    const collectedOperations: (Algebra.Pattern | Algebra.Link)[] = [];\n    // eslint-disable-next-line ts/no-this-alias\n    const self = this;\n    Util.recurseOperation(operation, {\n      [Algebra.types.UNION](subOperation) {\n        self.collectMultiOperationInputs(subOperation.input, collectedOperations, Algebra.types.PATTERN);\n        return true;\n      },\n      [Algebra.types.ALT](subOperation) {\n        self.collectMultiOperationInputs(subOperation.input, collectedOperations, Algebra.types.LINK);\n        return false;\n      },\n      [Algebra.types.SERVICE]() {\n        return false;\n      },\n    });\n\n    // Determine in an async manner whether or not these sources return non-empty results\n    const emptyOperations: Set<Algebra.Operation> = new Set();\n    await Promise.all(collectedOperations.map(async(collectedOperation) => {\n      const checkOperation = collectedOperation.type === 'link' ?\n        AF.createPattern(DF.variable('?s'), collectedOperation.iri, DF.variable('?o')) :\n        collectedOperation;\n      if (!await this.hasSourceResults(\n        ActorQueryOperation.getOperationSource(collectedOperation)!,\n        checkOperation,\n        action.context,\n      )) {\n        emptyOperations.add(collectedOperation);\n      }\n    }));\n\n    // Only perform next mapping if we have at least one empty operation\n    if (emptyOperations.size > 0) {\n      this.logDebug(action.context, `Pruning ${emptyOperations.size} source-specific operations`);\n      // Rewrite operations by removing the empty children\n      operation = Util.mapOperation(operation, {\n        [Algebra.types.UNION](subOperation, factory) {\n          return self.mapMultiOperation(subOperation, emptyOperations, children => factory.createUnion(children));\n        },\n        [Algebra.types.ALT](subOperation, factory) {\n          return self.mapMultiOperation(subOperation, emptyOperations, children => factory.createAlt(children));\n        },\n      });\n\n      // Identify and remove projections that have become empty now due to missing variables\n      operation = Util.mapOperation(operation, {\n        [Algebra.types.PROJECT](subOperation, factory) {\n          let emptyProject = false;\n          Util.recurseOperation(subOperation, {\n            [Algebra.types.UNION](subSubOperation) {\n              if (subSubOperation.input.length === 0) {\n                emptyProject = true;\n              }\n              return true;\n            },\n            [Algebra.types.ALT](subSubOperation) {\n              if (subSubOperation.input.length === 0) {\n                emptyProject = true;\n              }\n              return true;\n            },\n          });\n\n          if (emptyProject) {\n            return {\n              recurse: false,\n              result: factory.createUnion([]),\n            };\n          }\n          return {\n            recurse: true,\n            result: subOperation,\n          };\n        },\n      });\n    }\n\n    return { operation, context: action.context };\n  }\n\n  protected collectMultiOperationInputs(\n    inputs: Algebra.Operation[],\n    collectedOperations: (Algebra.Pattern | Algebra.Link)[],\n    inputType: (Algebra.Pattern | Algebra.Link)['type'],\n  ): void {\n    for (const input of inputs) {\n      if (ActorQueryOperation.getOperationSource(input) && input.type === inputType) {\n        collectedOperations.push(input);\n      }\n    }\n  }\n\n  protected mapMultiOperation<O extends Algebra.Union | Algebra.Alt>(\n    operation: O,\n    emptyOperations: Set<Algebra.Operation>,\n    multiOperationFactory: (input: O['input']) => Algebra.Operation,\n  ): {\n      result: Algebra.Operation;\n      recurse: boolean;\n    } {\n    // Determine which operations return non-empty results\n    const nonEmptyInputs = operation.input.filter(input => !emptyOperations.has(input));\n\n    // Remove empty operations\n    if (nonEmptyInputs.length === operation.input.length) {\n      return { result: operation, recurse: true };\n    }\n    if (nonEmptyInputs.length === 0) {\n      return { result: multiOperationFactory([]), recurse: false };\n    }\n    if (nonEmptyInputs.length === 1) {\n      return { result: nonEmptyInputs[0], recurse: true };\n    }\n    return { result: multiOperationFactory(nonEmptyInputs), recurse: true };\n  }\n\n  /**\n   * Check if the given query operation will produce at least one result in the given source.\n   * @param source A query source.\n   * @param input A query operation.\n   * @param context The query context.\n   */\n  public async hasSourceResults(\n    source: IQuerySourceWrapper,\n    input: Algebra.Operation,\n    context: IActionContext,\n  ): Promise<boolean> {\n    // Traversal sources should never be considered empty at optimization time.\n    if (source.context?.get(KeysQuerySourceIdentify.traverse)) {\n      return true;\n    }\n\n    // Send an ASK query\n    if (this.useAskIfSupported) {\n      const askOperation = AF.createAsk(input);\n      if (ActorQueryOperation\n        .doesShapeAcceptOperation(await source.source.getSelectorShape(context), askOperation)) {\n        return source.source.queryBoolean(askOperation, context);\n      }\n    }\n\n    // Send the operation as-is and check the response cardinality\n    const bindingsStream = source.source.queryBindings(input, context);\n    return new Promise((resolve, reject) => {\n      bindingsStream.on('error', reject);\n      bindingsStream.getProperty('metadata', (metadata: MetadataBindings) => {\n        bindingsStream.destroy();\n        resolve(metadata.cardinality.value > 0);\n      });\n    });\n  }\n}\n\nexport interface IActorOptimizeQueryOperationPruneEmptySourceOperationsArgs extends IActorOptimizeQueryOperationArgs {\n  /**\n   * If true, ASK queries will be sent to the source instead of COUNT queries to check emptiness for patterns.\n   * This will only be done for sources that accept ASK queries.\n   * @default {false}\n   */\n  useAskIfSupported: boolean;\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n  IActorOptimizeQueryOperationArgs,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport { Algebra, Util } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory<RDF.BaseQuad>();\n\n/**\n * A comunica Rewrite Add Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationRewriteAdd extends ActorOptimizeQueryOperation {\n  public constructor(args: IActorOptimizeQueryOperationArgs) {\n    super(args);\n  }\n\n  public async test(_action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    const operation = Util.mapOperation(action.operation, {\n      [Algebra.types.ADD](operationOriginal, factory) {\n        // CONSTRUCT all quads from the source, and INSERT them into the destination\n        const destination = operationOriginal.destination === 'DEFAULT' ?\n          DF.defaultGraph() :\n          operationOriginal.destination;\n        const source = operationOriginal.source === 'DEFAULT' ? DF.defaultGraph() : operationOriginal.source;\n\n        const result = factory.createDeleteInsert(undefined, [\n          factory.createPattern(DF.variable('s'), DF.variable('p'), DF.variable('o'), destination),\n        ], factory.createPattern(DF.variable('s'), DF.variable('p'), DF.variable('o'), source));\n\n        return {\n          result,\n          recurse: false,\n        };\n      },\n    });\n\n    return { operation, context: action.context };\n  }\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n  IActorOptimizeQueryOperationArgs,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport { Algebra, Util } from 'sparqlalgebrajs';\n\n/**\n * A comunica Rewrite Copy Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationRewriteCopy extends ActorOptimizeQueryOperation {\n  public constructor(args: IActorOptimizeQueryOperationArgs) {\n    super(args);\n  }\n\n  public async test(_action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    const operation = Util.mapOperation(action.operation, {\n      [Algebra.types.COPY](operationOriginal, factory) {\n        // No-op if source === destination\n        let result: Algebra.CompositeUpdate;\n        if ((typeof operationOriginal.destination === 'string' && typeof operationOriginal.source === 'string' &&\n            operationOriginal.destination === operationOriginal.source) ||\n          (typeof operationOriginal.destination !== 'string' && typeof operationOriginal.source !== 'string' &&\n            operationOriginal.destination.equals(operationOriginal.source))) {\n          result = factory.createCompositeUpdate([]);\n        } else {\n          // COPY is equivalent to drop destination, and add\n          result = factory.createCompositeUpdate([\n            factory.createDrop(operationOriginal.destination, true),\n            factory.createAdd(operationOriginal.source, operationOriginal.destination, operationOriginal.silent),\n          ]);\n        }\n\n        return {\n          result,\n          recurse: false,\n        };\n      },\n    });\n\n    return { operation, context: action.context };\n  }\n}\n","import type {\n  IActionOptimizeQueryOperation,\n  IActorOptimizeQueryOperationOutput,\n  IActorOptimizeQueryOperationArgs,\n} from '@comunica/bus-optimize-query-operation';\nimport { ActorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport { Algebra, Util } from 'sparqlalgebrajs';\n\n/**\n * A comunica Rewrite Move Optimize Query Operation Actor.\n */\nexport class ActorOptimizeQueryOperationRewriteMove extends ActorOptimizeQueryOperation {\n  public constructor(args: IActorOptimizeQueryOperationArgs) {\n    super(args);\n  }\n\n  public async test(_action: IActionOptimizeQueryOperation): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionOptimizeQueryOperation): Promise<IActorOptimizeQueryOperationOutput> {\n    const operation = Util.mapOperation(action.operation, {\n      [Algebra.types.MOVE](operationOriginal, factory) {\n        // No-op if source === destination\n        let result: Algebra.CompositeUpdate;\n        if ((typeof operationOriginal.destination === 'string' && typeof operationOriginal.source === 'string' &&\n            operationOriginal.destination === operationOriginal.source) ||\n          (typeof operationOriginal.destination !== 'string' && typeof operationOriginal.source !== 'string' &&\n            operationOriginal.destination.equals(operationOriginal.source))) {\n          result = factory.createCompositeUpdate([]);\n        } else {\n          // MOVE is equivalent to drop destination, add, and drop source\n          const updates = [\n            factory.createDrop(operationOriginal.destination, true),\n            factory.createAdd(operationOriginal.source, operationOriginal.destination, operationOriginal.silent),\n            factory.createDrop(operationOriginal.source),\n          ];\n          result = factory.createCompositeUpdate(updates);\n        }\n\n        return {\n          result,\n          recurse: false,\n        };\n      },\n    });\n\n    return { operation, context: action.context };\n  }\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type {\n  IActionContext,\n  IQueryOperationResult,\n  IQueryOperationResultBindings,\n} from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Ask Query Operation Actor.\n */\nexport class ActorQueryOperationAsk extends ActorQueryOperationTypedMediated<Algebra.Ask> {\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, 'ask');\n  }\n\n  public async testOperation(_operation: Algebra.Ask, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Ask, context: IActionContext): Promise<IQueryOperationResult> {\n    // Call other query operations like this:\n    const output: IQueryOperationResult = await this.mediatorQueryOperation.mediate(\n      { operation: operation.input, context },\n    );\n    const { bindingsStream }: IQueryOperationResultBindings = ActorQueryOperation.getSafeBindings(output);\n    return { type: 'boolean', execute: async() => (await bindingsStream.take(1).toArray()).length === 1 };\n  }\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport { Factory } from 'sparqlalgebrajs';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A [Query Operation](https://github.com/comunica/comunica/tree/master/packages/bus-query-operation) actor\n * that handles SPARQL BGP operations by rewriting it as a join operator.\n */\nexport class ActorQueryOperationBgpJoin extends ActorQueryOperationTypedMediated<Algebra.Bgp> {\n  public static readonly FACTORY = new Factory();\n\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, 'bgp');\n  }\n\n  public async testOperation(_operation: Algebra.Bgp, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Bgp, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    return this.mediatorQueryOperation.mediate({\n      operation: ActorQueryOperationBgpJoin.FACTORY.createJoin(operation.patterns),\n      context,\n    });\n  }\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type {\n  IQueryOperationResultBindings,\n  IActionContext,\n  IQueryOperationResult,\n  MetadataQuads,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { getTermsNested, getVariables, uniqTerms } from 'rdf-terms';\nimport { Algebra } from 'sparqlalgebrajs';\nimport { BindingsToQuadsIterator } from './BindingsToQuadsIterator';\n\n/**\n * A comunica Construct Query Operation Actor.\n */\nexport class ActorQueryOperationConstruct extends ActorQueryOperationTypedMediated<Algebra.Construct> {\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, 'construct');\n  }\n\n  /**\n   * Find all variables in a list of triple patterns.\n   * @param {Algebra.Pattern[]} patterns An array of triple patterns.\n   * @return {RDF.Variable[]} The variables in the triple patterns.\n   */\n  public static getVariables(patterns: RDF.BaseQuad[]): RDF.Variable[] {\n    return uniqTerms((<RDF.Variable[]> []).concat\n      .apply([], patterns.map(pattern => getVariables(getTermsNested(pattern)))));\n  }\n\n  public async testOperation(_operation: Algebra.Construct, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operationOriginal: Algebra.Construct, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Apply a projection on our CONSTRUCT variables first, as the query may contain other variables as well.\n    const variables: RDF.Variable[] = ActorQueryOperationConstruct.getVariables(operationOriginal.template);\n    const operation: Algebra.Operation = { type: Algebra.types.PROJECT, input: operationOriginal.input, variables };\n\n    // Evaluate the input query\n    const output: IQueryOperationResultBindings = ActorQueryOperation.getSafeBindings(\n      await this.mediatorQueryOperation.mediate({ operation, context }),\n    );\n\n    // Construct triples using the result based on the pattern.\n    // If it's a DESCRIBE query don't apply the blank node localisation.\n    const quadStream: AsyncIterator<RDF.Quad> = new BindingsToQuadsIterator(\n      operationOriginal.template,\n      output.bindingsStream,\n    );\n\n    // Let the final metadata contain the estimated number of triples\n    const metadata: (() => Promise<MetadataQuads>) = () => output.metadata().then(meta => ({\n      ...meta,\n      order: undefined,\n      cardinality: {\n        type: meta.cardinality.type,\n        value: meta.cardinality.value * operationOriginal.template.length,\n      },\n      canContainUndefs: false,\n      availableOrders: undefined,\n    }));\n\n    return {\n      metadata,\n      quadStream,\n      type: 'quads',\n    };\n  }\n}\n","import type { Bindings, BindingsStream } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { ArrayIterator, MultiTransformIterator } from 'asynciterator';\nimport { DataFactory } from 'rdf-data-factory';\nimport { mapTermsNested } from 'rdf-terms';\n\nconst DF = new DataFactory();\n\n/**\n * Transforms a bindings stream into a quad stream given a quad template.\n *\n * This conforms to the SPARQL 1.1 spec on constructing triples:\n * https://www.w3.org/TR/sparql11-query/#rConstructTriples\n */\nexport class BindingsToQuadsIterator extends MultiTransformIterator<Bindings, RDF.Quad> {\n  protected readonly template: RDF.BaseQuad[];\n  protected blankNodeCounter: number;\n\n  public constructor(template: RDF.BaseQuad[], bindingsStream: BindingsStream) {\n    super(bindingsStream, { autoStart: false });\n    this.template = template;\n    this.blankNodeCounter = 0;\n  }\n\n  /**\n   * Bind the given term.\n   * If the term is a variable and the variable is bound in the bindings object,\n   * return the bindings value.\n   * If the term is a variable and the variable is not bound in the bindings object,\n   * a falsy value is returned..\n   * Otherwise, the term itself is returned.\n   * @param {Bindings}  bindings A bindings object.\n   * @param {RDF.Term}  term     An RDF term.\n   * @return {RDF.Term}          If the given term is not a variable, the term itself is returned.\n   *                             If the given term is a variable, then the bound term is returned,\n   *                             or a falsy value if it did not exist in the bindings.\n   */\n  public static bindTerm(bindings: Bindings, term: RDF.Term): RDF.Term | undefined {\n    if (term.termType === 'Variable') {\n      return bindings.get(term);\n    }\n    return term;\n  }\n\n  /**\n   * Bind the given quad pattern.\n   * If one of the terms was a variable AND is not bound in the bindings,\n   * a falsy value will be returned.\n   * @param {Bindings} bindings A bindings object.\n   * @param {RDF.Quad} pattern  An RDF quad.\n   * @return {RDF.Quad}         A bound RDF quad or undefined.\n   */\n  public static bindQuad(bindings: Bindings, pattern: RDF.BaseQuad): RDF.Quad | undefined {\n    try {\n      return mapTermsNested(<RDF.Quad> pattern, (term) => {\n        const boundTerm = BindingsToQuadsIterator.bindTerm(bindings, term);\n        if (!boundTerm) {\n          throw new Error('Unbound term');\n        }\n        return boundTerm;\n      });\n    } catch {\n      // Do nothing\n    }\n  }\n\n  /**\n   * Convert a blank node to a unique blank node in the given context.\n   * If the given term is not a blank node, the term itself will be returned.\n   * @param             blankNodeCounter A counter value for the blank node.\n   * @param {RDF.Term}  term             The term that should be localized.\n   * @return {RDF.Term}                  A term.\n   */\n  public static localizeBlankNode(blankNodeCounter: number, term: RDF.Term): RDF.Term {\n    if (term.termType === 'BlankNode') {\n      return DF.blankNode(`${term.value}${blankNodeCounter}`);\n    }\n    return term;\n  }\n\n  /**\n   * Convert the given quad to a quad that only contains unique blank nodes.\n   * @param            blankNodeCounter A counter value for the blank node.\n   * @param {RDF.BaseQuad} pattern          The pattern that should be localized.\n   * @return {RDF.BaseQuad}                 A quad.\n   */\n  public static localizeQuad(blankNodeCounter: number, pattern: RDF.BaseQuad): RDF.BaseQuad {\n    return mapTermsNested(pattern, term => BindingsToQuadsIterator.localizeBlankNode(blankNodeCounter, term));\n  }\n\n  /**\n   * Convert the given template to a list of quads based on the given bindings.\n   * @param {Bindings}    bindings           A bindings object.\n   * @param {RDF.Quad[]}  template           A list of quad patterns.\n   * @param               blankNodeCounter   A counter value for the blank node.\n   * @return {RDF.Quad[]}                    A list of quads.\n   */\n  public bindTemplate(bindings: Bindings, template: RDF.BaseQuad[], blankNodeCounter: number): RDF.Quad[] {\n    const quads: RDF.BaseQuad[] = <RDF.BaseQuad[]> template\n      // Make sure the multiple instantiations of the template contain different blank nodes, as required by SPARQL 1.1.\n      .map(BindingsToQuadsIterator.localizeQuad.bind(null, blankNodeCounter))\n      // Bind variables to bound terms\n      .map(x => BindingsToQuadsIterator.bindQuad.bind(null, bindings)(x))\n      // Remove quads that contained unbound terms, i.e., variables.\n      .filter(Boolean);\n    return <RDF.Quad[]> quads;\n  }\n\n  public override _createTransformer(bindings: Bindings): AsyncIterator<RDF.Quad> {\n    return new ArrayIterator(this.bindTemplate(\n      bindings,\n      this.template,\n      this.blankNodeCounter++,\n    ), { autoStart: false });\n  }\n}\n","import type { MediatorHashBindings } from '@comunica/bus-hash-bindings';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type {\n  Bindings,\n  BindingsStream,\n  IActionContext,\n  IQueryOperationResult,\n  IQueryOperationResultBindings,\n} from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Distinct Hash Query Operation Actor.\n */\nexport class ActorQueryOperationDistinctHash extends ActorQueryOperationTypedMediated<Algebra.Distinct> {\n  public readonly mediatorHashBindings: MediatorHashBindings;\n\n  public constructor(args: IActorQueryOperationDistinctHashArgs) {\n    super(args, 'distinct');\n  }\n\n  public async testOperation(_operation: Algebra.Distinct, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Distinct, context: IActionContext): Promise<IQueryOperationResult> {\n    const output: IQueryOperationResultBindings = ActorQueryOperation.getSafeBindings(\n      await this.mediatorQueryOperation.mediate({ operation: operation.input, context }),\n    );\n    const bindingsStream: BindingsStream = output.bindingsStream.filter(await this.newHashFilter(context));\n    return {\n      type: 'bindings',\n      bindingsStream,\n      metadata: output.metadata,\n    };\n  }\n\n  /**\n   * Create a new distinct filter function.\n   * This will maintain an internal hash datastructure so that every bindings object only returns true once.\n   * @param context The action context.\n   * @return {(bindings: Bindings) => boolean} A distinct filter for bindings.\n   */\n  public async newHashFilter(context: IActionContext): Promise<(bindings: Bindings) => boolean> {\n    const { hashFunction } = await this.mediatorHashBindings.mediate({ allowHashCollisions: true, context });\n    const hashes: Record<string, boolean> = {};\n    return (bindings: Bindings) => {\n      const hash: string = hashFunction(bindings);\n\n      return !(hash in hashes) && (hashes[hash] = true);\n    };\n  }\n}\n\nexport interface IActorQueryOperationDistinctHashArgs extends IActorQueryOperationTypedMediatedArgs {\n  mediatorHashBindings: MediatorHashBindings;\n}\n","import { BindingsFactory, bindingsToString } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type { ExpressionError } from '@comunica/expression-evaluator';\nimport { AsyncEvaluator, isExpressionError } from '@comunica/expression-evaluator';\nimport type { Bindings, IActionContext, IQueryOperationResult, IQueryOperationResultBindings } from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Extend Query Operation Actor.\n *\n * See https://www.w3.org/TR/sparql11-query/#sparqlAlgebra;\n */\nexport class ActorQueryOperationExtend extends ActorQueryOperationTypedMediated<Algebra.Extend> {\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryOperationExtendArgs) {\n    super(args, 'extend');\n  }\n\n  public async testOperation(operation: Algebra.Extend, context: IActionContext): Promise<IActorTest> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    // Will throw error for unsupported opperations\n    const _ = Boolean(new AsyncEvaluator(\n      operation.expression,\n      ActorQueryOperation.getAsyncExpressionContext(context, this.mediatorQueryOperation, bindingsFactory),\n    ));\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Extend, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    const { expression, input, variable } = operation;\n\n    const output: IQueryOperationResultBindings = ActorQueryOperation.getSafeBindings(\n      await this.mediatorQueryOperation.mediate({ operation: input, context }),\n    );\n\n    // Throw if the variable has already been bound\n    if ((await output.metadata()).variables.some(innerVariable => innerVariable.equals(variable))) {\n      throw new Error(`Illegal binding to variable '${variable.value}' that has already been bound`);\n    }\n\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    const config = { ...ActorQueryOperation.getAsyncExpressionContext(\n      context,\n      this.mediatorQueryOperation,\n      bindingsFactory,\n    ) };\n    const evaluator = new AsyncEvaluator(expression, config);\n\n    // Transform the stream by extending each Bindings with the expression result\n    const transform = async(bindings: Bindings, next: any, push: (pusbBindings: Bindings) => void): Promise<void> => {\n      try {\n        const result = await evaluator.evaluate(bindings);\n        // Extend operation is undefined when the key already exists\n        // We just override it here.\n        const extended = bindings.set(variable, result);\n        push(extended);\n      } catch (error: unknown) {\n        if (isExpressionError(<Error> error)) {\n          // Errors silently don't actually extend according to the spec\n          push(bindings);\n          // But let's warn anyway\n          this.logWarn(context, `Expression error for extend operation (${(<ExpressionError> error).message})` +\n            `with bindings '${bindingsToString(bindings)}'`);\n        } else {\n          bindingsStream.emit('error', error);\n        }\n      }\n      next();\n    };\n\n    // eslint-disable-next-line ts/no-misused-promises\n    const bindingsStream = output.bindingsStream.transform<Bindings>({ autoStart: false, transform });\n    return {\n      type: 'bindings',\n      bindingsStream,\n      async metadata() {\n        const outputMetadata = await output.metadata();\n        return { ...outputMetadata, variables: [ ...outputMetadata.variables, variable ]};\n      },\n    };\n  }\n}\n\nexport interface IActorQueryOperationExtendArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import { BindingsFactory, bindingsToString } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport { AsyncEvaluator, isExpressionError } from '@comunica/expression-evaluator';\nimport type { Bindings, IActionContext, IQueryOperationResult } from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Filter Sparqlee Query Operation Actor.\n */\nexport class ActorQueryOperationFilter extends ActorQueryOperationTypedMediated<Algebra.Filter> {\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryOperationFilterSparqleeArgs) {\n    super(args, 'filter');\n  }\n\n  public async testOperation(operation: Algebra.Filter, context: IActionContext): Promise<IActorTest> {\n    // Will throw error for unsupported operators\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    const config = { ...ActorQueryOperation.getAsyncExpressionContext(\n      context,\n      this.mediatorQueryOperation,\n      bindingsFactory,\n    ) };\n    const _ = new AsyncEvaluator(operation.expression, config);\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Filter, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    const outputRaw = await this.mediatorQueryOperation.mediate({ operation: operation.input, context });\n    const output = ActorQueryOperation.getSafeBindings(outputRaw);\n    ActorQueryOperation.validateQueryOutput(output, 'bindings');\n\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    const config = { ...ActorQueryOperation.getAsyncExpressionContext(\n      context,\n      this.mediatorQueryOperation,\n      bindingsFactory,\n    ) };\n    const evaluator = new AsyncEvaluator(operation.expression, config);\n\n    const transform = async(item: Bindings, next: any, push: (bindings: Bindings) => void): Promise<void> => {\n      try {\n        const result = await evaluator.evaluateAsEBV(item);\n        if (result) {\n          push(item);\n        }\n      } catch (error: unknown) {\n        // We ignore all Expression errors.\n        // Other errors (likely programming mistakes) are still propagated.\n        //\n        // > Specifically, FILTERs eliminate any solutions that,\n        // > when substituted into the expression, either result in\n        // > an effective boolean value of false or produce an error.\n        // > ...\n        // > These errors have no effect outside of FILTER evaluation.\n        // https://www.w3.org/TR/sparql11-query/#expressions\n        if (isExpressionError(<Error> error)) {\n          // In many cases, this is a user error, where the user should manually cast the variable to a string.\n          // In order to help users debug this, we should report these errors via the logger as warnings.\n          this.logWarn(context, 'Error occurred while filtering.', () => ({ error, bindings: bindingsToString(item) }));\n        } else {\n          bindingsStream.emit('error', error);\n        }\n      }\n      next();\n    };\n\n    // eslint-disable-next-line ts/no-misused-promises\n    const bindingsStream = output.bindingsStream.transform<Bindings>({ transform, autoStart: false });\n    return { type: 'bindings', bindingsStream, metadata: output.metadata };\n  }\n}\n\nexport interface IActorQueryOperationFilterSparqleeArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { Algebra, Factory } from 'sparqlalgebrajs';\n\n/**\n * A comunica From Query Operation Actor.\n */\nexport class ActorQueryOperationFromQuad extends ActorQueryOperationTypedMediated<Algebra.From> {\n  private static readonly FACTORY: Factory = new Factory();\n  private static readonly ALGEBRA_TYPES: string[] = Object.keys(Algebra.types).map(key => (<any> Algebra.types)[key]);\n\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, 'from');\n  }\n\n  /**\n   * Create a deep copy of the given operation.\n   * @param {Operation} operation An operation.\n   * @param {(subOperation: Operation) => Operation} recursiveCb A callback for recursive operation calls.\n   * @return {Operation} The copied operation.\n   */\n  public static copyOperation(\n    operation: Algebra.Operation,\n    recursiveCb: (subOperation: Algebra.Operation) => Algebra.Operation,\n  ): Algebra.Operation {\n    const copiedOperation: Algebra.Operation = <any> {};\n    for (const key of Object.keys(operation)) {\n      if (Array.isArray(operation[key]) && key !== 'template') {\n        // We exclude the 'template' entry, as we don't want to modify the template value of construct operations\n        if (key === 'variables') {\n          copiedOperation[key] = operation[key];\n        } else {\n          copiedOperation[key] = operation[key].map(recursiveCb);\n        }\n      } else if (ActorQueryOperationFromQuad.ALGEBRA_TYPES.includes(operation[key].type)) {\n        copiedOperation[key] = recursiveCb(operation[key]);\n      } else {\n        copiedOperation[key] = operation[key];\n      }\n    }\n    return copiedOperation;\n  }\n\n  /**\n   * Recursively transform the given operation to use the given graphs as default graph\n   * This will (possibly) create a new operation and not modify the given operation.\n   * @param {Operation} operation An operation.\n   * @param {RDF.Term[]} defaultGraphs Graph terms.\n   * @return {Operation} A new operation.\n   */\n  public static applyOperationDefaultGraph(operation: Algebra.Operation, defaultGraphs: RDF.Term[]): Algebra.Operation {\n    // If the operation is a BGP or Path, change the graph.\n    if ((operation.type === 'bgp' && operation.patterns.length > 0) ||\n      operation.type === 'path' ||\n      operation.type === 'pattern') {\n      if (operation.type === 'bgp') {\n        return ActorQueryOperationFromQuad.joinOperations(operation.patterns.map((pattern: Algebra.Pattern) => {\n          if (pattern.graph.termType !== 'DefaultGraph') {\n            return ActorQueryOperationFromQuad.FACTORY.createBgp([ pattern ]);\n          }\n          const bgps = defaultGraphs.map((graph: RDF.Term) =>\n            ActorQueryOperationFromQuad.FACTORY.createBgp([ Object.assign(\n              ActorQueryOperationFromQuad.FACTORY\n                .createPattern(pattern.subject, pattern.predicate, pattern.object, graph),\n              { metadata: pattern.metadata },\n            ) ]));\n          return ActorQueryOperationFromQuad.unionOperations(bgps);\n        }));\n      }\n      if (operation.graph.termType !== 'DefaultGraph') {\n        return operation;\n      }\n      const paths = defaultGraphs.map(\n        (graph: RDF.Term) => {\n          if (operation.type === 'path') {\n            return ActorQueryOperationFromQuad.FACTORY\n              .createPath(operation.subject, operation.predicate, operation.object, graph);\n          }\n          return Object.assign(ActorQueryOperationFromQuad.FACTORY\n            .createPattern(\n              operation.subject,\n              operation.predicate,\n              operation.object,\n              graph,\n            ), { metadata: operation.metadata });\n        },\n      );\n      return ActorQueryOperationFromQuad.unionOperations(paths);\n    }\n\n    return ActorQueryOperationFromQuad.copyOperation(\n      operation,\n      (subOperation: Algebra.Operation) => this.applyOperationDefaultGraph(subOperation, defaultGraphs),\n    );\n  }\n\n  /**\n   * Recursively transform the given operation to use the given graphs as named graph\n   * This will (possibly) create a new operation and not modify the given operation.\n   * @param {Operation} operation An operation.\n   * @param {RDF.Term[]} namedGraphs Graph terms.\n   * @param {RDF.Term[]} defaultGraphs Default graph terms.\n   * @return {Operation} A new operation.\n   */\n  public static applyOperationNamedGraph(\n    operation: Algebra.Operation,\n    namedGraphs: RDF.NamedNode[],\n    defaultGraphs: RDF.Term[],\n  ): Algebra.Operation {\n    // If the operation is a BGP or Path, change the graph.\n    if ((operation.type === 'bgp' && operation.patterns.length > 0) ||\n      operation.type === 'path' ||\n      operation.type === 'pattern') {\n      const patternGraph: RDF.Term = operation.type === 'bgp' ? operation.patterns[0].graph : operation.graph;\n      if (patternGraph.termType === 'DefaultGraph') {\n        // SPARQL spec (8.2) describes that when FROM NAMED's are used without a FROM, the default graph must be empty.\n        // The FROMs are transformed before this step to a named node, so this will not apply to this case anymore.\n        return { type: Algebra.types.BGP, patterns: []};\n      }\n      if (patternGraph.termType === 'Variable') {\n        if (namedGraphs.length === 1) {\n          const graph: RDF.NamedNode = namedGraphs[0];\n          // If the pattern graph is a variable, replace the graph and bind the variable using VALUES\n          const bindings: Record<string, RDF.Literal | RDF.NamedNode> = {};\n          bindings[`?${patternGraph.value}`] = graph;\n          const values: Algebra.Values = ActorQueryOperationFromQuad.FACTORY\n            .createValues([ patternGraph ], [ bindings ]);\n\n          let pattern: Algebra.Operation;\n          if (operation.type === 'bgp') {\n            pattern = ActorQueryOperationFromQuad.FACTORY\n              .createBgp(operation.patterns.map((pat: Algebra.Pattern) => ActorQueryOperationFromQuad.FACTORY\n                .createPattern(pat.subject, pat.predicate, pat.object, graph)));\n          } else if (operation.type === 'path') {\n            pattern = ActorQueryOperationFromQuad.FACTORY\n              .createPath(operation.subject, operation.predicate, operation.object, graph);\n          } else {\n            pattern = ActorQueryOperationFromQuad.FACTORY\n              .createPattern(operation.subject, operation.predicate, operation.object, graph);\n          }\n\n          return ActorQueryOperationFromQuad.FACTORY.createJoin([ values, pattern ]);\n        }\n        // If the pattern graph is a variable, take the union of the pattern applied to each available named graph\n        return ActorQueryOperationFromQuad.unionOperations(namedGraphs.map(\n          (graph: RDF.NamedNode) => ActorQueryOperationFromQuad.applyOperationNamedGraph(\n            operation,\n            [ graph ],\n            defaultGraphs,\n          ),\n        ));\n      }\n      // The pattern's graph is defined (including the default graphs)\n      const isNamedGraphAvailable: boolean = [ ...namedGraphs, ...defaultGraphs ].some(\n        (namedGraph: RDF.Term) => namedGraph.equals(patternGraph),\n      );\n      if (isNamedGraphAvailable) {\n        // Return the pattern as-is if the pattern's graph was selected in a FROM NAMED\n        return operation;\n      }\n      // No-op if the pattern's graph was not selected in a FROM NAMED.\n      return { type: Algebra.types.BGP, patterns: []};\n    }\n\n    return ActorQueryOperationFromQuad.copyOperation(\n      operation,\n      (subOperation: Algebra.Operation) => this.applyOperationNamedGraph(subOperation, namedGraphs, defaultGraphs),\n    );\n  }\n\n  /**\n   * Transform the given array of operations into a join operation.\n   * @param {Operation[]} operations An array of operations, must contain at least one operation.\n   * @return {Join} A join operation.\n   */\n  public static joinOperations(operations: Algebra.Operation[]): Algebra.Operation {\n    if (operations.length === 1) {\n      return operations[0];\n    }\n    if (operations.length > 1) {\n      return ActorQueryOperationFromQuad.FACTORY.createJoin(operations);\n    }\n    throw new Error('A join can only be applied on at least one operation');\n  }\n\n  /**\n   * Transform the given array of operations into a union operation.\n   * @param {Operation[]} operations An array of operations, must contain at least one operation.\n   * @return {Union} A union operation.\n   */\n  public static unionOperations(operations: Algebra.Operation[]): Algebra.Operation {\n    if (operations.length === 1) {\n      return operations[0];\n    }\n    if (operations.length > 1) {\n      return ActorQueryOperationFromQuad.FACTORY.createUnion(operations);\n    }\n    throw new Error('A union can only be applied on at least one operation');\n  }\n\n  /**\n   * Transform an operation based on the default and named graphs in the pattern.\n   *\n   * FROM sets the default graph.\n   * If multiple are available, take the union of the operation for all of them at quad-pattern level.\n   *\n   * FROM NAMED indicates which named graphs are available.\n   * This will rewrite the query so that only triples from the given named graphs can be selected.\n   *\n   * @param {From} pattern A from operation.\n   * @return {Operation} The transformed operation.\n   */\n  public static createOperation(pattern: Algebra.From): Algebra.Operation {\n    let operation: Algebra.Operation = pattern.input;\n    if (pattern.default.length > 0) {\n      operation = ActorQueryOperationFromQuad.applyOperationDefaultGraph(operation, pattern.default);\n    }\n    if (pattern.named.length > 0 || pattern.default.length > 0) {\n      operation = ActorQueryOperationFromQuad.applyOperationNamedGraph(operation, pattern.named, pattern.default);\n    }\n    return operation;\n  }\n\n  public async testOperation(_operation: Algebra.From, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(\n    operationOriginal: Algebra.From,\n    context: IActionContext,\n  ): Promise<IQueryOperationResult> {\n    const operation: Algebra.Operation = ActorQueryOperationFromQuad.createOperation(operationOriginal);\n    return this.mediatorQueryOperation.mediate({ operation, context });\n  }\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorHashBindings } from '@comunica/bus-hash-bindings';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport { AsyncEvaluator } from '@comunica/expression-evaluator';\nimport type { BindingsStream, IActionContext, IQueryOperationResult } from '@comunica/types';\nimport { ArrayIterator, TransformIterator } from 'asynciterator';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport { GroupsState } from './GroupsState';\n\n/**\n * A comunica Group Query Operation Actor.\n */\nexport class ActorQueryOperationGroup extends ActorQueryOperationTypedMediated<Algebra.Group> {\n  public readonly mediatorHashBindings: MediatorHashBindings;\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryOperationGroupArgs) {\n    super(args, 'group');\n  }\n\n  public async testOperation(operation: Algebra.Group, context: IActionContext): Promise<IActorTest> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    for (const aggregate of operation.aggregates) {\n      // Will throw for unsupported expressions\n      const _ = new AsyncEvaluator(\n        aggregate.expression,\n        ActorQueryOperation.getAsyncExpressionContext(context, this.mediatorQueryOperation, bindingsFactory),\n      );\n    }\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Group, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    // Create a hash function\n    const { hashFunction } = await this.mediatorHashBindings.mediate({ allowHashCollisions: true, context });\n\n    // Get result stream for the input query\n    const { input, aggregates } = operation;\n    const outputRaw = await this.mediatorQueryOperation.mediate({ operation: input, context });\n    const output = ActorQueryOperation.getSafeBindings(outputRaw);\n\n    // The variables in scope are the variables on which we group, i.e. pattern.variables.\n    // For 'GROUP BY ?x, ?z', this is [?x, ?z], for 'GROUP by expr(?x) as ?e' this is [?e].\n    // But also in scope are the variables defined by the aggregations, since GROUP has to handle this.\n    const variables = [\n      ...operation.variables,\n      ...aggregates.map(agg => agg.variable),\n    ];\n\n    const sparqleeConfig = ActorQueryOperation.getAsyncExpressionContext(\n      context,\n      this.mediatorQueryOperation,\n      bindingsFactory,\n    );\n\n    // Wrap a new promise inside an iterator that completes when the stream has ended or when an error occurs\n    const bindingsStream = new TransformIterator(() => new Promise<BindingsStream>((resolve, reject) => {\n      const groups = new GroupsState(hashFunction, operation, sparqleeConfig, bindingsFactory);\n\n      // Phase 2: Collect aggregator results\n      // We can only return when the binding stream ends, when that happens\n      // we return the identified groups. Which are nothing more than Bindings\n      // of the grouping variables merged with the aggregate variables\n      // eslint-disable-next-line ts/no-misused-promises\n      output.bindingsStream.on('end', async() => {\n        try {\n          const bindingsStreamInner = new ArrayIterator(await groups.collectResults(), { autoStart: false });\n          resolve(bindingsStreamInner);\n        } catch (error: unknown) {\n          reject(error);\n        }\n      });\n\n      // Make sure to propagate any errors in the binding stream\n      output.bindingsStream.on('error', reject);\n\n      // Phase 1: Consume the stream, identify the groups and populate the aggregators.\n      // We need to bind this after the 'error' and 'end' listeners to avoid the\n      // stream having ended before those listeners are bound.\n      output.bindingsStream.on('data', (bindings) => {\n        groups.consumeBindings(bindings).catch(reject);\n      });\n    }), { autoStart: false });\n\n    return {\n      type: 'bindings',\n      bindingsStream,\n      metadata: async() => ({ ...await output.metadata(), variables }),\n    };\n  }\n}\n\nexport interface IActorQueryOperationGroupArgs extends IActorQueryOperationTypedMediatedArgs {\n  mediatorHashBindings: MediatorHashBindings;\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import type { BindingsFactory } from '@comunica/bindings-factory';\nimport type { HashFunction } from '@comunica/bus-hash-bindings';\nimport type { IAsyncEvaluatorContext } from '@comunica/expression-evaluator';\nimport { AsyncAggregateEvaluator } from '@comunica/expression-evaluator';\nimport type { Bindings } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport type { Algebra } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory();\n\n/**\n * A simple type alias for strings that should be hashes of Bindings\n */\nexport type BindingsHash = string;\n\n/**\n * A state container for a single group\n *\n * @property {Bindings} bindings - The binding entries on which we group\n */\nexport interface IGroup {\n  bindings: Bindings;\n  aggregators: Record<string, AsyncAggregateEvaluator>;\n}\n\n/**\n * A state manager for the groups constructed by consuming the bindings-stream.\n */\nexport class GroupsState {\n  private readonly groups: Map<BindingsHash, IGroup>;\n  // We need to the promises of a group so we can await the initialisation/ creation of them.\n  //  Without this we could have duplicate work/ override precious work.\n  private readonly groupsInitializer: Map<BindingsHash, Promise<IGroup>>;\n  private readonly groupVariables: Set<string>;\n  private readonly distinctHashes: null | Map<BindingsHash, Set<BindingsHash>>;\n  private waitCounter: number;\n  // Function that resolves the promise given by collectResults\n  private waitResolver: (bindings: Bindings[]) => void;\n  private resultHasBeenCalled: boolean;\n\n  public constructor(\n    private readonly hashFunction: HashFunction,\n    private readonly pattern: Algebra.Group,\n    private readonly sparqleeConfig: IAsyncEvaluatorContext,\n    private readonly bindingsFactory: BindingsFactory,\n  ) {\n    this.groups = new Map();\n    this.groupsInitializer = new Map();\n    this.groupVariables = new Set(this.pattern.variables.map(x => x.value));\n    this.distinctHashes = pattern.aggregates.some(({ distinct }) => distinct) ?\n      new Map() :\n      null;\n    this.waitCounter = 1;\n    this.resultHasBeenCalled = false;\n  }\n\n  /**\n   * - Consumes a stream binding\n   * - Find the corresponding group and create one if need be\n   * - Feeds the binding to the group's aggregators\n   *\n   * @param {Bindings} bindings - The Bindings to consume\n   */\n  public consumeBindings(bindings: Bindings): Promise<void> {\n    const check = this.resultCheck<void>();\n    if (check) {\n      return check;\n    }\n    // We increment the counter and decrement him when put action is performed.\n    this.waitCounter++;\n\n    // Select the bindings on which we group\n    const grouper = bindings\n      .filter((_, variable) => this.groupVariables.has(variable.value));\n    const groupHash = this.hashBindings(grouper);\n\n    // First member of group -> create new group\n    let groupInitializer: Promise<IGroup> | undefined = this.groupsInitializer.get(groupHash);\n\n    let res: Promise<any>;\n    if (groupInitializer) {\n      const groupInitializerDefined = groupInitializer;\n      res = (async() => {\n        const group = await groupInitializerDefined;\n        await Promise.all(this.pattern.aggregates.map(async(aggregate) => {\n          // If distinct, check first whether we have inserted these values already\n          if (aggregate.distinct) {\n            const hash = this.hashBindings(bindings);\n            if (this.distinctHashes!.get(groupHash)!.has(hash)) {\n              return;\n            }\n            this.distinctHashes!.get(groupHash)!.add(hash);\n          }\n\n          const variable = aggregate.variable.value;\n          await group.aggregators[variable].put(bindings);\n        }));\n      })().then(async() => {\n        this.subtractWaitCounterAndCollect();\n      });\n    } else {\n      // Initialize state for all aggregators for new group\n      groupInitializer = (async() => {\n        const aggregators: Record<string, AsyncAggregateEvaluator> = {};\n        await Promise.all(this.pattern.aggregates.map(async(aggregate) => {\n          const key = aggregate.variable.value;\n          aggregators[key] = new AsyncAggregateEvaluator(aggregate, this.sparqleeConfig);\n          await aggregators[key].put(bindings);\n        }));\n\n        if (this.distinctHashes) {\n          const bindingsHash = this.hashBindings(bindings);\n          this.distinctHashes.set(groupHash, new Set([ bindingsHash ]));\n        }\n        const group = { aggregators, bindings: grouper };\n        this.groups.set(groupHash, group);\n        this.subtractWaitCounterAndCollect();\n        return group;\n      })();\n      this.groupsInitializer.set(groupHash, groupInitializer);\n      res = groupInitializer;\n    }\n    return res;\n  }\n\n  private subtractWaitCounterAndCollect(): void {\n    if (--this.waitCounter === 0) {\n      this.handleResultCollection();\n    }\n  }\n\n  private handleResultCollection(): void {\n    // Collect groups\n    let rows: Bindings[] = [ ...this.groups ].map(([ _, group ]) => {\n      const { bindings: groupBindings, aggregators } = group;\n\n      // Collect aggregator bindings\n      // If the aggregate errorred, the result will be undefined\n      let returnBindings = groupBindings;\n      for (const variable in aggregators) {\n        const value = aggregators[variable].result();\n        if (value) {\n          // Filter undefined\n          returnBindings = returnBindings.set(DF.variable(variable), value);\n        }\n      }\n\n      // Merge grouping bindings and aggregator bindings\n      return returnBindings;\n    });\n\n    // Case: No Input\n    // Some aggregators still define an output on the empty input\n    // Result is a single Bindings\n    if (rows.length === 0 && this.groupVariables.size === 0) {\n      const single: [RDF.Variable, RDF.Term][] = [];\n      for (const aggregate of this.pattern.aggregates) {\n        const key = aggregate.variable;\n        const value = AsyncAggregateEvaluator.emptyValue(aggregate);\n        if (value !== undefined) {\n          single.push([ key, value ]);\n        }\n      }\n      rows = [ this.bindingsFactory.bindings(single) ];\n    }\n    this.waitResolver(rows);\n  }\n\n  private resultCheck<T>(): Promise<T> | undefined {\n    if (this.resultHasBeenCalled) {\n      return Promise.reject(new Error('Calling any function after calling collectResult is invalid.'));\n    }\n  }\n\n  /**\n   * Collect the result of the final state. This returns a Bindings per group,\n   * and a (possibly empty) Bindings in case no Bindings have been consumed yet.\n   * You can only call this method once, after calling this method,\n   * calling any function on this will result in an error being thrown.\n   */\n  public collectResults(): Promise<Bindings[]> {\n    const check = this.resultCheck<Bindings[]>();\n    if (check) {\n      return check;\n    }\n    this.resultHasBeenCalled = true;\n    const res = new Promise<Bindings[]>((resolve) => {\n      this.waitResolver = resolve;\n    });\n    this.subtractWaitCounterAndCollect();\n    return res;\n  }\n\n  /**\n   * @param {Bindings} bindings - Bindings to hash\n   */\n  private hashBindings(bindings: Bindings): BindingsHash {\n    return this.hashFunction(bindings);\n  }\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { MediatorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { IActorTest } from '@comunica/core';\nimport type { IQueryOperationResult, IActionContext, IJoinEntry } from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Join Query Operation Actor.\n */\nexport class ActorQueryOperationJoin extends ActorQueryOperationTypedMediated<Algebra.Join> {\n  public readonly mediatorJoin: MediatorRdfJoin;\n\n  public constructor(args: IActorQueryOperationJoinArgs) {\n    super(args, 'join');\n  }\n\n  public async testOperation(_operation: Algebra.Join, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(\n    operationOriginal: Algebra.Join,\n    context: IActionContext,\n  ): Promise<IQueryOperationResult> {\n    const entries: IJoinEntry[] = (await Promise.all(operationOriginal.input\n      .map(async subOperation => ({\n        output: await this.mediatorQueryOperation.mediate({ operation: subOperation, context }),\n        operation: subOperation,\n      }))))\n      .map(({ output, operation }) => ({\n        output: ActorQueryOperation.getSafeBindings(output),\n        operation,\n      }));\n\n    return this.mediatorJoin.mediate({ type: 'inner', entries, context });\n  }\n}\n\nexport interface IActorQueryOperationJoinArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for joining Bindings streams\n   */\n  mediatorJoin: MediatorRdfJoin;\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { MediatorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { IActorTest } from '@comunica/core';\nimport { AsyncEvaluator, isExpressionError } from '@comunica/expression-evaluator';\nimport type { IQueryOperationResult, Bindings, IActionContext, IJoinEntry } from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica LeftJoin Query Operation Actor.\n */\nexport class ActorQueryOperationLeftJoin extends ActorQueryOperationTypedMediated<Algebra.LeftJoin> {\n  public readonly mediatorJoin: MediatorRdfJoin;\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryOperationLeftJoinArgs) {\n    super(args, 'leftjoin');\n  }\n\n  public async testOperation(_operation: Algebra.LeftJoin, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operationOriginal: Algebra.LeftJoin, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Delegate to join bus\n    const entries: IJoinEntry[] = (await Promise.all(operationOriginal.input\n      .map(async subOperation => ({\n        output: await this.mediatorQueryOperation.mediate({ operation: subOperation, context }),\n        operation: subOperation,\n      }))))\n      .map(({ output, operation }) => ({\n        output: ActorQueryOperation.getSafeBindings(output),\n        operation,\n      }));\n    const joined = await this.mediatorJoin.mediate({ type: 'optional', entries, context });\n\n    // If the pattern contains an expression, filter the resulting stream\n    if (operationOriginal.expression) {\n      const rightMetadata = await entries[1].output.metadata();\n      const expressionVariables = rightMetadata.variables;\n\n      const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n      const config = { ...ActorQueryOperation.getAsyncExpressionContext(\n        context,\n        this.mediatorQueryOperation,\n        bindingsFactory,\n      ) };\n      const evaluator = new AsyncEvaluator(operationOriginal.expression, config);\n      const bindingsStream = joined.bindingsStream\n        .transform({\n          autoStart: false,\n          // eslint-disable-next-line ts/no-misused-promises\n          transform: async(bindings: Bindings, done: () => void, push: (item: Bindings) => void) => {\n            // If variables of the right-hand entry are missing, we skip expression evaluation\n            if (!expressionVariables.every(variable => bindings.has(variable.value))) {\n              push(bindings);\n              return done();\n            }\n\n            try {\n              const result = await evaluator.evaluateAsEBV(bindings);\n              if (result) {\n                push(bindings);\n              }\n            } catch (error: unknown) {\n              // We ignore all Expression errors.\n              // Other errors (likely programming mistakes) are still propagated.\n              // Left Join is defined in terms of Filter (https://www.w3.org/TR/sparql11-query/#defn_algJoin),\n              // and Filter requires this (https://www.w3.org/TR/sparql11-query/#expressions).\n              if (isExpressionError(<Error>error)) {\n                // In many cases, this is a user error, where the user should manually cast the variable to a string.\n                // In order to help users debug this, we should report these errors via the logger as warnings.\n                this.logWarn(context, 'Error occurred while filtering.', () => ({ error, bindings }));\n              } else {\n                bindingsStream.emit('error', error);\n              }\n            }\n            done();\n          },\n        });\n      joined.bindingsStream = bindingsStream;\n    }\n\n    return joined;\n  }\n}\n\nexport interface IActorQueryOperationLeftJoinArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for joining Bindings streams\n   */\n  mediatorJoin: MediatorRdfJoin;\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { MediatorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResult, IJoinEntry } from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Minus Query Operation Actor.\n */\nexport class ActorQueryOperationMinus extends ActorQueryOperationTypedMediated<Algebra.Minus> {\n  public readonly mediatorJoin: MediatorRdfJoin;\n\n  public constructor(args: IActorQueryOperationMinusArgs) {\n    super(args, 'minus');\n  }\n\n  public async testOperation(_operation: Algebra.Minus, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(\n    operationOriginal: Algebra.Minus,\n    context: IActionContext,\n  ): Promise<IQueryOperationResult> {\n    const entries: IJoinEntry[] = (await Promise.all(operationOriginal.input\n      .map(async subOperation => ({\n        output: await this.mediatorQueryOperation.mediate({ operation: subOperation, context }),\n        operation: subOperation,\n      }))))\n      .map(({ output, operation }) => ({\n        output: ActorQueryOperation.getSafeBindings(output),\n        operation,\n      }));\n\n    return this.mediatorJoin.mediate({ type: 'minus', entries, context });\n  }\n}\n\nexport interface IActorQueryOperationMinusArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for joining Bindings streams\n   */\n  mediatorJoin: MediatorRdfJoin;\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport { MetadataValidationState } from '@comunica/metadata';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { SingletonIterator } from 'asynciterator';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A [Query Operation](https://github.com/comunica/comunica/tree/master/packages/bus-query-operation)\n * actor that handles SPARQL nop operations.\n */\nexport class ActorQueryOperationNop extends ActorQueryOperationTypedMediated<Algebra.Nop> {\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryOperationNopArgs) {\n    super(args, 'nop');\n  }\n\n  public async testOperation(_operation: Algebra.Nop, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Nop, context: IActionContext): Promise<IQueryOperationResult> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n\n    return {\n      bindingsStream: new SingletonIterator<RDF.Bindings>(bindingsFactory.bindings()),\n      metadata: () => Promise.resolve({\n        state: new MetadataValidationState(),\n        cardinality: { type: 'exact', value: 1 },\n        canContainUndefs: false,\n        variables: [],\n      }),\n      type: 'bindings',\n    };\n  }\n}\n\nexport interface IActorQueryOperationNopArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport { AsyncEvaluator, isExpressionError, orderTypes } from '@comunica/expression-evaluator';\nimport type { Bindings, IActionContext, IQueryOperationResult } from '@comunica/types';\nimport type { Term } from '@rdfjs/types';\nimport { Algebra } from 'sparqlalgebrajs';\nimport { SortIterator } from './SortIterator';\n\n/**\n * A comunica OrderBy Sparqlee Query Operation Actor.\n */\nexport class ActorQueryOperationOrderBy extends ActorQueryOperationTypedMediated<Algebra.OrderBy> {\n  private readonly window: number;\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryOperationOrderBySparqleeArgs) {\n    super(args, 'orderby');\n    this.window = args.window ?? Number.POSITIVE_INFINITY;\n  }\n\n  public async testOperation(operation: Algebra.OrderBy, context: IActionContext): Promise<IActorTest> {\n    // Will throw error for unsupported operators\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n\n    for (let expr of operation.expressions) {\n      expr = this.extractSortExpression(expr);\n      const _ = new AsyncEvaluator(\n        expr,\n        ActorQueryOperation.getAsyncExpressionContext(context, this.mediatorQueryOperation, bindingsFactory),\n      );\n    }\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.OrderBy, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    const outputRaw = await this.mediatorQueryOperation.mediate({ operation: operation.input, context });\n    const output = ActorQueryOperation.getSafeBindings(outputRaw);\n\n    const options = { window: this.window };\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    const sparqleeConfig = {\n      ...ActorQueryOperation.getAsyncExpressionContext(context, this.mediatorQueryOperation, bindingsFactory),\n    };\n    let { bindingsStream } = output;\n\n    // Sorting backwards since the first one is the most important therefore should be ordered last.\n    for (let i = operation.expressions.length - 1; i >= 0; i--) {\n      let expr = operation.expressions[i];\n      const isAscending = this.isAscending(expr);\n      expr = this.extractSortExpression(expr);\n      // Transform the stream by annotating it with the expr result\n      const evaluator = new AsyncEvaluator(expr, sparqleeConfig);\n      interface IAnnotatedBinding {\n        bindings: Bindings;\n        result: Term | undefined;\n      }\n\n      const transform = async(bindings: Bindings, next: any, push: (result: IAnnotatedBinding) => void):\n      Promise<void> => {\n        try {\n          const result = await evaluator.evaluate(bindings);\n          push({ bindings, result });\n        } catch (error: unknown) {\n          // We ignore all Expression errors.\n          // Other errors (likely programming mistakes) are still propagated.\n          // I can't recall where this is defined in the spec.\n          if (!isExpressionError(<Error> error)) {\n            bindingsStream.emit('error', error);\n          }\n          push({ bindings, result: undefined });\n        }\n        next();\n      };\n      // eslint-disable-next-line ts/no-misused-promises\n      const transformedStream = bindingsStream.transform<IAnnotatedBinding>({ transform });\n\n      // Sort the annoted stream\n      const sortedStream = new SortIterator(transformedStream, (left, right) => {\n        let compare = orderTypes(left.result, right.result);\n        if (!isAscending) {\n          compare *= -1;\n        }\n        return compare;\n      }, options);\n\n      // Remove the annotation\n      bindingsStream = sortedStream.map(({ bindings }) => bindings);\n    }\n\n    return {\n      type: 'bindings',\n      bindingsStream,\n      metadata: output.metadata,\n    };\n  }\n\n  // Remove descending operator if necessary\n  private extractSortExpression(expr: Algebra.Expression): Algebra.Expression {\n    const { expressionType, operator } = expr;\n    if (expressionType !== Algebra.expressionTypes.OPERATOR) {\n      return expr;\n    }\n    return operator === 'desc' ?\n      expr.args[0] :\n      expr;\n  }\n\n  private isAscending(expr: Algebra.Expression): boolean {\n    const { expressionType, operator } = expr;\n    if (expressionType !== Algebra.expressionTypes.OPERATOR) {\n      return true;\n    }\n    return operator !== 'desc';\n  }\n}\n\n/**\n * The window parameter determines how many of the elements to consider when sorting.\n */\nexport interface IActorQueryOperationOrderBySparqleeArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n  /**\n   * The size of the window for the sort iterator.\n   * @range {integer}\n   */\n  window?: number;\n}\n","import type { AsyncIterator } from 'asynciterator';\nimport { TransformIterator } from 'asynciterator';\n\n// Based on https://github.com/LinkedDataFragments/Client.js/blob/master/lib/sparql/SortIterator.js\nexport class SortIterator<T> extends TransformIterator<T, T> {\n  private readonly windowLength: number;\n  private readonly sort: (left: T, right: T) => number;\n  private readonly sorted: T[];\n\n  public constructor(source: AsyncIterator<T>, sort: (left: T, right: T) => number, options?: any) {\n    super(source, options);\n\n    // The `window` parameter indicates the length of the sliding window to apply sorting\n    const window: number = options && options.window;\n    this.windowLength = Number.isFinite(window) && window > 0 ? window : Number.POSITIVE_INFINITY;\n    this.sort = sort;\n    this.sorted = [];\n  }\n\n  // Reads the smallest item in the current sorting window\n  public override _read(count: number, done: () => void): void {\n    let item;\n    let { length } = this.sorted;\n    // Try to read items until we reach the desired window length\n    while (length !== this.windowLength) {\n      item = this.source!.read();\n      if (item === null) {\n        break;\n      }\n      // Insert the item in the sorted window (smallest last)\n      let left = 0;\n      let right = length - 1;\n      let mid;\n      let order;\n      while (left <= right) {\n        mid = Math.trunc((left + right) / 2);\n        order = this.sort(item, this.sorted[mid]);\n        if (order < 0) {\n          left = mid + 1;\n        } else if (order > 0) {\n          right = mid - 1;\n        } else {\n          left = mid;\n          right = -1;\n        }\n      }\n      this.sorted.splice(left, 0, item);\n      length++;\n    }\n    // Push the smallest item in the window\n    if (length === this.windowLength) {\n      this._push(this.sorted.pop()!);\n    }\n    done();\n  }\n\n  // Flushes remaining data after the source has ended\n  public override _flush(done: () => void): void {\n    let { length } = this.sorted;\n    while (length--) {\n      this._push(this.sorted.pop()!);\n    }\n    done();\n  }\n}\n","import { ActorAbstractPath } from '@comunica/actor-abstract-path';\nimport { ActorQueryOperationUnion } from '@comunica/actor-query-operation-union';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport type { MediatorRdfMetadataAccumulate } from '@comunica/bus-rdf-metadata-accumulate';\nimport type {\n  IQueryOperationResultBindings,\n  IQueryOperationResult,\n  IActionContext,\n  MetadataBindings,\n} from '@comunica/types';\nimport { UnionIterator } from 'asynciterator';\nimport { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Path Alt Query Operation Actor.\n */\nexport class ActorQueryOperationPathAlt extends ActorAbstractPath {\n  public readonly mediatorRdfMetadataAccumulate: MediatorRdfMetadataAccumulate;\n\n  public constructor(args: IActorQueryOperationPathAltArgs) {\n    super(args, Algebra.types.ALT);\n  }\n\n  public async runOperation(operation: Algebra.Path, context: IActionContext): Promise<IQueryOperationResult> {\n    const predicate = <Algebra.Alt> operation.predicate;\n\n    const subOperations: IQueryOperationResultBindings[] = (await Promise.all(predicate.input\n      .map(subPredicate => this.mediatorQueryOperation.mediate({\n        context,\n        operation: ActorAbstractPath.FACTORY\n          .createPath(operation.subject, subPredicate, operation.object, operation.graph),\n      }))))\n      .map(ActorQueryOperation.getSafeBindings);\n\n    const bindingsStream = new UnionIterator(subOperations.map(op => op.bindingsStream), { autoStart: false });\n    const metadata: (() => Promise<MetadataBindings>) = () =>\n      Promise.all(subOperations.map(output => output.metadata()))\n        .then(subMeta => ActorQueryOperationUnion\n          .unionMetadata(subMeta, true, context, this.mediatorRdfMetadataAccumulate));\n\n    return {\n      type: 'bindings',\n      bindingsStream,\n      metadata,\n    };\n  }\n}\n\nexport interface IActorQueryOperationPathAltArgs extends IActorQueryOperationTypedMediatedArgs {\n  mediatorRdfMetadataAccumulate: MediatorRdfMetadataAccumulate;\n}\n","import { ActorAbstractPath } from '@comunica/actor-abstract-path';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Path Inv Query Operation Actor.\n */\nexport class ActorQueryOperationPathInv extends ActorAbstractPath {\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, Algebra.types.INV);\n  }\n\n  public async runOperation(operation: Algebra.Path, context: IActionContext): Promise<IQueryOperationResult> {\n    const predicate = <Algebra.Inv> operation.predicate;\n    const invPath = ActorAbstractPath.FACTORY\n      .createPath(operation.object, predicate.path, operation.subject, operation.graph);\n    return this.mediatorQueryOperation.mediate({ operation: invPath, context });\n  }\n}\n","import { ActorAbstractPath } from '@comunica/actor-abstract-path';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Path Link Query Operation Actor.\n */\nexport class ActorQueryOperationPathLink extends ActorAbstractPath {\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, Algebra.types.LINK);\n  }\n\n  public async runOperation(\n    operationOriginal: Algebra.Path,\n    context: IActionContext,\n  ): Promise<IQueryOperationResult> {\n    const predicate = <Algebra.Link> operationOriginal.predicate;\n    const operation = Object.assign(ActorAbstractPath.FACTORY.createPattern(\n      operationOriginal.subject,\n      predicate.iri,\n      operationOriginal.object,\n      operationOriginal.graph,\n    ), { metadata: predicate.metadata });\n    return this.mediatorQueryOperation.mediate({ operation, context });\n  }\n}\n","import { ActorAbstractPath } from '@comunica/actor-abstract-path';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n} from '@comunica/bus-query-operation';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Path Nps Query Operation Actor.\n */\nexport class ActorQueryOperationPathNps extends ActorAbstractPath {\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, Algebra.types.NPS);\n  }\n\n  public async runOperation(operation: Algebra.Path, context: IActionContext): Promise<IQueryOperationResult> {\n    const predicate = <Algebra.Nps> operation.predicate;\n    const blank = this.generateVariable(operation);\n\n    const pattern = Object.assign(ActorAbstractPath.FACTORY\n      .createPattern(operation.subject, blank, operation.object, operation.graph), { metadata: predicate.metadata });\n    const output = ActorQueryOperation.getSafeBindings(\n      await this.mediatorQueryOperation.mediate({ operation: pattern, context }),\n    );\n\n    // Remove the generated blank nodes from the bindings\n    const bindingsStream = output.bindingsStream\n      .map(bindings => predicate.iris.some(iri => iri.equals(bindings.get(blank))) ? null : bindings.delete(blank));\n\n    return {\n      type: 'bindings',\n      bindingsStream,\n      metadata: output.metadata,\n    };\n  }\n}\n","import { ActorAbstractPath } from '@comunica/actor-abstract-path';\nimport { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport type { IQueryOperationResultBindings, Bindings, IQueryOperationResult, IActionContext } from '@comunica/types';\nimport { BufferedIterator, MultiTransformIterator, TransformIterator } from 'asynciterator';\nimport { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Path OneOrMore Query Operation Actor.\n */\nexport class ActorQueryOperationPathOneOrMore extends ActorAbstractPath {\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryOperationPathOneOrMoreArgs) {\n    super(args, Algebra.types.ONE_OR_MORE_PATH);\n  }\n\n  public async runOperation(operation: Algebra.Path, context: IActionContext): Promise<IQueryOperationResult> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    const distinct = await this.isPathArbitraryLengthDistinct(context, operation);\n    if (distinct.operation) {\n      return distinct.operation;\n    }\n\n    context = distinct.context;\n\n    const predicate = <Algebra.OneOrMorePath> operation.predicate;\n\n    if (operation.subject.termType !== 'Variable' && operation.object.termType === 'Variable') {\n      const objectVar = operation.object;\n      const starEval = await this.getObjectsPredicateStarEval(\n        operation.subject,\n        predicate.path,\n        objectVar,\n        operation.graph,\n        context,\n        false,\n        bindingsFactory,\n      );\n      const variables = operation.graph.termType === 'Variable' ? [ objectVar, operation.graph ] : [ objectVar ];\n      return {\n        type: 'bindings',\n        bindingsStream: starEval.bindingsStream,\n        metadata: async() => ({ ...await starEval.metadata(), variables }),\n      };\n    }\n    if (operation.subject.termType === 'Variable' && operation.object.termType === 'Variable') {\n      // Get all the results of subjects with same predicate, but once, then fill in first variable for those\n      const single = ActorAbstractPath.FACTORY.createDistinct(\n        ActorAbstractPath.FACTORY\n          .createPath(operation.subject, operation.predicate.path, operation.object, operation.graph),\n      );\n      const results = ActorQueryOperation.getSafeBindings(\n        await this.mediatorQueryOperation.mediate({ context, operation: single }),\n      );\n      const subjectVar = operation.subject;\n      const objectVar = operation.object;\n\n      const termHashes = {};\n\n      const bindingsStream: MultiTransformIterator<Bindings, Bindings> = new MultiTransformIterator(\n        results.bindingsStream,\n        {\n          multiTransform: (bindings: Bindings) => {\n            const subject = bindings.get(subjectVar);\n            const object = bindings.get(objectVar);\n            const graph = operation.graph.termType === 'Variable' ? bindings.get(operation.graph) : operation.graph;\n            return new TransformIterator<Bindings>(\n              async() => {\n                const it = new BufferedIterator<Bindings>();\n                await this.getSubjectAndObjectBindingsPredicateStar(\n                  subjectVar,\n                  objectVar,\n                  subject!,\n                  object!,\n                  predicate.path,\n                  graph!,\n                  context,\n                  termHashes,\n                  {},\n                  it,\n                  { count: 0 },\n                  bindingsFactory,\n                );\n                return it.transform<Bindings>({\n                  transform(item, next, push) {\n                    if (operation.graph.termType === 'Variable') {\n                      item = item.set(operation.graph, graph!);\n                    }\n                    push(item);\n                    next();\n                  },\n                });\n              },\n              { maxBufferSize: 128 },\n            );\n          },\n          autoStart: false,\n        },\n      );\n      const variables = operation.graph.termType === 'Variable' ?\n          [ subjectVar, objectVar, operation.graph ] :\n          [ subjectVar, objectVar ];\n      return {\n        type: 'bindings',\n        bindingsStream,\n        metadata: async() => ({ ...await results.metadata(), variables }),\n      };\n    }\n    if (operation.subject.termType === 'Variable' && operation.object.termType !== 'Variable') {\n      return <Promise<IQueryOperationResultBindings>> this.mediatorQueryOperation.mediate({\n        context,\n        operation: ActorAbstractPath.FACTORY.createPath(\n          operation.object,\n          ActorAbstractPath.FACTORY.createOneOrMorePath(\n            ActorAbstractPath.FACTORY.createInv(predicate.path),\n          ),\n          operation.subject,\n          operation.graph,\n        ),\n      });\n    }\n    // If (!sVar && !oVar)\n    const variable = this.generateVariable();\n    const results = ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({\n      context,\n      operation: ActorAbstractPath.FACTORY.createPath(operation.subject, predicate, variable, operation.graph),\n    }));\n    const bindingsStream = results.bindingsStream.transform<Bindings>({\n      filter: item => operation.object.equals(item.get(variable)),\n      transform(item, next, push) {\n        const binding = operation.graph.termType === 'Variable' ?\n          bindingsFactory.bindings([[ operation.graph, item.get(operation.graph)! ]]) :\n          bindingsFactory.bindings();\n        push(binding);\n        next();\n      },\n    });\n    return {\n      type: 'bindings',\n      bindingsStream,\n      metadata: async() => ({\n        ...await results.metadata(),\n        variables: operation.graph.termType === 'Variable' ? [ operation.graph ] : [],\n      }),\n    };\n  }\n}\n\nexport interface IActorQueryOperationPathOneOrMoreArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import { ActorAbstractPath } from '@comunica/actor-abstract-path';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n} from '@comunica/bus-query-operation';\nimport type { MediatorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { Bindings, IActionContext, IQueryOperationResult, IJoinEntry } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Path Seq Query Operation Actor.\n */\nexport class ActorQueryOperationPathSeq extends ActorAbstractPath {\n  public readonly mediatorJoin: MediatorRdfJoin;\n\n  public constructor(args: IActorQueryOperationPathSeq) {\n    super(args, Algebra.types.SEQ);\n  }\n\n  public async runOperation(\n    operationOriginal: Algebra.Path,\n    context: IActionContext,\n  ): Promise<IQueryOperationResult> {\n    const predicate = <Algebra.Seq> operationOriginal.predicate;\n\n    let joiner: RDF.Term = operationOriginal.subject;\n    const generatedVariableNames: RDF.Variable[] = [];\n    const entries: IJoinEntry[] = await Promise.all(predicate.input\n      .map((subPredicate, i) => {\n        const nextJoiner = i === predicate.input.length - 1 ? <RDF.Variable> operationOriginal.object : this.generateVariable(operationOriginal, `b${i}`);\n        const operation = ActorAbstractPath.FACTORY\n          .createPath(joiner, subPredicate, nextJoiner, operationOriginal.graph);\n        const output = this.mediatorQueryOperation.mediate({\n          context,\n          operation,\n        });\n\n        joiner = nextJoiner;\n        if (i < predicate.input.length - 1) {\n          generatedVariableNames.push(nextJoiner);\n        }\n\n        return { output, operation };\n      })\n      .map(async({ output, operation }) => ({\n        output: ActorQueryOperation.getSafeBindings(await output),\n        operation,\n      })));\n\n    const join = ActorQueryOperation.getSafeBindings(await this.mediatorJoin\n      .mediate({ type: 'inner', entries, context }));\n    // Remove the generated variable from the bindings\n    const bindingsStream = join.bindingsStream.transform<Bindings>({\n      transform(item, next, push) {\n        for (const generatedVariableName of generatedVariableNames) {\n          item = item.delete(generatedVariableName);\n        }\n        push(item);\n        next();\n      },\n    });\n\n    // Remove the generated variable from the list of variables\n    return {\n      type: 'bindings',\n      bindingsStream,\n      async metadata() {\n        const joinMetadata = await join.metadata();\n        const variables = joinMetadata.variables.filter(variable => !generatedVariableNames\n          .some(generatedVariableName => generatedVariableName.value === variable.value));\n        return { ...joinMetadata, variables };\n      },\n    };\n  }\n}\n\nexport interface IActorQueryOperationPathSeq extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for joining Bindings streams\n   */\n  mediatorJoin: MediatorRdfJoin;\n}\n","import { ActorAbstractPath } from '@comunica/actor-abstract-path';\nimport { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport type { Bindings, IQueryOperationResult, IActionContext } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { MultiTransformIterator, TransformIterator, EmptyIterator, BufferedIterator } from 'asynciterator';\nimport { termToString } from 'rdf-string';\nimport { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Path ZeroOrMore Query Operation Actor.\n */\nexport class ActorQueryOperationPathZeroOrMore extends ActorAbstractPath {\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryOperationPathZeroOrMoreArgs) {\n    super(args, Algebra.types.ZERO_OR_MORE_PATH);\n  }\n\n  public async runOperation(operation: Algebra.Path, context: IActionContext): Promise<IQueryOperationResult> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n\n    const distinct = await this.isPathArbitraryLengthDistinct(context, operation);\n    if (distinct.operation) {\n      return distinct.operation;\n    }\n\n    context = distinct.context;\n\n    const predicate = <Algebra.ZeroOrMorePath> operation.predicate;\n    const sources = this.getPathSources(predicate);\n\n    const sVar = operation.subject.termType === 'Variable';\n    const oVar = operation.object.termType === 'Variable';\n\n    if (operation.subject.termType === 'Variable' && operation.object.termType === 'Variable') {\n      // Query ?s ?p ?o, to get all possible namedNodes in de the db\n      const predVar = this.generateVariable(operation);\n      const single = this.assignPatternSources(ActorAbstractPath.FACTORY\n        .createPattern(operation.subject, predVar, operation.object, operation.graph), sources);\n      const results = ActorQueryOperation.getSafeBindings(\n        await this.mediatorQueryOperation.mediate({ context, operation: single }),\n      );\n      const subjectVar = operation.subject;\n      const objectVar = operation.object;\n\n      // Set with all namedNodes we have already started a predicate* search from\n      const entities: Set<string> = new Set();\n\n      const termHashes = {};\n\n      const bindingsStream: MultiTransformIterator<Bindings, Bindings> = new MultiTransformIterator(\n        results.bindingsStream,\n        {\n          multiTransform: (bindings: Bindings) => {\n            // Get the subject and object of the triples (?s ?p ?o) and extract graph if it was a variable\n            const subject: RDF.Term = bindings.get(subjectVar)!;\n            const object: RDF.Term = bindings.get(objectVar)!;\n            const graph: RDF.Term = operation.graph.termType === 'Variable' ?\n              bindings.get(operation.graph)! :\n              operation.graph;\n            // Make a hash of namedNode + graph to remember from where we already started a search\n            const subjectGraphHash = termToString(subject) + termToString(graph);\n            const objectGraphHash = termToString(object) + termToString(graph);\n            return new TransformIterator<Bindings>(\n              async() => {\n                // If no new namedNodes in this triple, return nothing\n                if (entities.has(subjectGraphHash) && entities.has(objectGraphHash)) {\n                  return new EmptyIterator();\n                }\n                // Set up an iterator to which getSubjectAndObjectBindingsPredicateStar will push solutions\n                const it = new BufferedIterator<Bindings>();\n                const counter = { count: 0 };\n                // If not started from this namedNode (subject in triple) in this graph, start a search\n                if (!entities.has(subjectGraphHash)) {\n                  entities.add(subjectGraphHash);\n                  await this.getSubjectAndObjectBindingsPredicateStar(\n                    subjectVar,\n                    objectVar,\n                    subject,\n                    subject,\n                    predicate.path,\n                    graph,\n                    context,\n                    termHashes,\n                    {},\n                    it,\n                    counter,\n                    bindingsFactory,\n                  );\n                }\n                // If not started from this namedNode (object in triple) in this graph, start a search\n                if (!entities.has(objectGraphHash)) {\n                  entities.add(objectGraphHash);\n                  await this.getSubjectAndObjectBindingsPredicateStar(\n                    subjectVar,\n                    objectVar,\n                    object,\n                    object,\n                    predicate.path,\n                    graph,\n                    context,\n                    termHashes,\n                    {},\n                    it,\n                    counter,\n                    bindingsFactory,\n                  );\n                }\n                return it.transform<Bindings>({\n                  transform(item, next, push) {\n                    // If the graph was a variable, fill in it's binding (we got it from the ?s ?p ?o binding)\n                    if (operation.graph.termType === 'Variable') {\n                      item = item.set(operation.graph, graph);\n                    }\n                    push(item);\n                    next();\n                  },\n                });\n              },\n            );\n          },\n        },\n      );\n      const variables: RDF.Variable[] = operation.graph.termType === 'Variable' ?\n          [ subjectVar, operation.object, operation.graph ] :\n          [ subjectVar, operation.object ];\n      return {\n        type: 'bindings',\n        bindingsStream,\n        metadata: async() => ({ ...await results.metadata(), variables }),\n      };\n    }\n    if (!sVar && !oVar) {\n      const variable = this.generateVariable();\n      const starEval = await this.getObjectsPredicateStarEval(\n        operation.subject,\n        predicate.path,\n        variable,\n        operation.graph,\n        context,\n        true,\n        bindingsFactory,\n      );\n      // Check this\n      const bindingsStream = starEval.bindingsStream.transform<Bindings>({\n        filter: item => operation.object.equals(item.get(variable)),\n        transform(item, next, push) {\n          // Return graph binding if graph was a variable, otherwise empty binding\n          const binding = operation.graph.termType === 'Variable' ?\n            bindingsFactory.bindings([[ operation.graph, item.get(operation.graph)! ]]) :\n            bindingsFactory.bindings();\n          push(binding);\n          next();\n        },\n      });\n      return {\n        type: 'bindings',\n        bindingsStream,\n        metadata: async() => ({\n          ...await starEval.metadata(),\n          variables: operation.graph.termType === 'Variable' ? [ operation.graph ] : [],\n        }),\n      };\n    }\n    // If (sVar || oVar)\n    const subject = sVar ? operation.object : operation.subject;\n    const value: RDF.Variable = <RDF.Variable> (sVar ? operation.subject : operation.object);\n    const pred = sVar ? ActorAbstractPath.FACTORY.createInv(predicate.path) : predicate.path;\n    const starEval = await this.getObjectsPredicateStarEval(\n      subject,\n      pred,\n      value,\n      operation.graph,\n      context,\n      true,\n      bindingsFactory,\n    );\n    const variables: RDF.Variable[] = operation.graph.termType === 'Variable' ? [ value, operation.graph ] : [ value ];\n    return {\n      type: 'bindings',\n      bindingsStream: starEval.bindingsStream,\n      metadata: async() => ({ ...await starEval.metadata(), variables }),\n    };\n  }\n}\n\nexport interface IActorQueryOperationPathZeroOrMoreArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import { ActorAbstractPath } from '@comunica/actor-abstract-path';\nimport { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport { MetadataValidationState } from '@comunica/metadata';\nimport type { Bindings, IQueryOperationResult, IActionContext, BindingsStream } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport {\n  SingletonIterator,\n  UnionIterator,\n} from 'asynciterator';\nimport { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Path ZeroOrOne Query Operation Actor.\n */\nexport class ActorQueryOperationPathZeroOrOne extends ActorAbstractPath {\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryOperationPathZeroOrOneArgs) {\n    super(args, Algebra.types.ZERO_OR_ONE_PATH);\n  }\n\n  public async runOperation(\n    operation: Algebra.Path,\n    context: IActionContext,\n  ): Promise<IQueryOperationResult> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    const predicate = <Algebra.ZeroOrOnePath> operation.predicate;\n    const sources = this.getPathSources(predicate);\n\n    const extra: Bindings[] = [];\n\n    // Both subject and object non-variables\n    if (operation.subject.termType !== 'Variable' &&\n      operation.object.termType !== 'Variable' &&\n      operation.subject.equals(operation.object)) {\n      return {\n        type: 'bindings',\n        bindingsStream: new SingletonIterator<RDF.Bindings>(bindingsFactory.bindings()),\n        metadata: () => Promise.resolve({\n          state: new MetadataValidationState(),\n          cardinality: { type: 'exact', value: 1 },\n          canContainUndefs: false,\n          variables: [],\n        }),\n      };\n    }\n\n    // Check if we require a distinct path operation\n    const distinct = await this.isPathArbitraryLengthDistinct(context, operation);\n    if (distinct.operation) {\n      return distinct.operation;\n    }\n    context = distinct.context;\n\n    // Create an operator that resolve to the \"One\" part\n    const bindingsOne = ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({\n      context,\n      operation: ActorAbstractPath.FACTORY\n        .createPath(operation.subject, predicate.path, operation.object, operation.graph),\n    }));\n\n    // Determine the bindings stream based on the variable-ness of subject and object\n    let bindingsStream: BindingsStream;\n    if (operation.subject.termType === 'Variable' && operation.object.termType === 'Variable') {\n      // Both subject and object are variables\n      // To determine the \"Zero\" part, we\n      // query ?s ?p ?o. FILTER ?s = ?0, to get all possible namedNodes in de the db\n      const varP = this.generateVariable(operation);\n      const bindingsZero = ActorQueryOperation.getSafeBindings(\n        await this.mediatorQueryOperation.mediate({\n          context,\n          operation: ActorAbstractPath.FACTORY.createFilter(\n            this.assignPatternSources(ActorAbstractPath.FACTORY\n              .createPattern(operation.subject, varP, operation.object, operation.graph), sources),\n            ActorAbstractPath.FACTORY.createOperatorExpression('=', [\n              ActorAbstractPath.FACTORY.createTermExpression(operation.subject),\n              ActorAbstractPath.FACTORY.createTermExpression(operation.object),\n            ]),\n          ),\n        }),\n      ).bindingsStream.map(bindings => bindings.delete(varP));\n      bindingsStream = new UnionIterator([\n        bindingsZero,\n        bindingsOne.bindingsStream,\n      ], { autoStart: false });\n    } else {\n      // If subject or object is not a variable, then determining the \"Zero\" part is simple.\n      if (operation.subject.termType === 'Variable') {\n        extra.push(bindingsFactory.bindings([[ operation.subject, operation.object ]]));\n      }\n      if (operation.object.termType === 'Variable') {\n        extra.push(bindingsFactory.bindings([[ operation.object, operation.subject ]]));\n      }\n\n      bindingsStream = bindingsOne.bindingsStream.prepend(extra);\n    }\n\n    return {\n      type: 'bindings',\n      bindingsStream,\n      metadata: bindingsOne.metadata,\n    };\n  }\n}\nexport interface IActorQueryOperationPathZeroOrOneArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport { BlankNodeBindingsScoped } from '@comunica/data-factory';\nimport type {\n  Bindings,\n  BindingsStream,\n  IActionContext,\n  IQueryOperationResult,\n  IQueryOperationResultBindings,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport type { Algebra } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory();\n\n/**\n * A comunica Project Query Operation Actor.\n */\nexport class ActorQueryOperationProject extends ActorQueryOperationTypedMediated<Algebra.Project> {\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, 'project');\n  }\n\n  public async testOperation(_operation: Algebra.Project, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Project, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Resolve the input\n    const output: IQueryOperationResultBindings = ActorQueryOperation.getSafeBindings(\n      await this.mediatorQueryOperation.mediate({ operation: operation.input, context }),\n    );\n\n    // Find all variables that should be deleted from the input stream.\n    const outputMetadata = await output.metadata();\n    const variables = operation.variables;\n    const deleteVariables = outputMetadata.variables\n      .filter(variable => !variables.some(subVariable => variable.value === subVariable.value));\n\n    // Error if there are variables that are not bound in the input stream.\n    const missingVariables = variables\n      .filter(variable => !outputMetadata.variables.some(subVariable => variable.value === subVariable.value));\n    if (missingVariables.length > 0) {\n      // eslint-disable-next-line ts/restrict-template-expressions\n      throw new Error(`Variables '${missingVariables.map(variable => `?${variable.value}`)}' are used in the projection result, but are not assigned.`);\n    }\n\n    // Make sure the project variables are the only variables that are present in the bindings.\n    let bindingsStream: BindingsStream = deleteVariables.length === 0 ?\n      output.bindingsStream :\n      output.bindingsStream.map((bindings: Bindings) => {\n        for (const deleteVariable of deleteVariables) {\n          bindings = bindings.delete(deleteVariable);\n        }\n        return bindings;\n      });\n\n    // Make sure that blank nodes with same labels are not reused over different bindings, as required by SPARQL 1.1.\n    // Required for the BNODE() function: https://www.w3.org/TR/sparql11-query/#func-bnode\n    // When we have a scoped blank node, make sure the skolemized value is maintained.\n    let blankNodeCounter = 0;\n    bindingsStream = bindingsStream.map((bindings: Bindings) => {\n      blankNodeCounter++;\n      const scopedBlankNodesCache = new Map<string, RDF.BlankNode>();\n      return bindings.map((term) => {\n        if (term instanceof BlankNodeBindingsScoped) {\n          let scopedBlankNode = scopedBlankNodesCache.get(term.value);\n          if (!scopedBlankNode) {\n            scopedBlankNode = DF.blankNode(`${term.value}${blankNodeCounter}`);\n            scopedBlankNodesCache.set(term.value, scopedBlankNode);\n          }\n          return scopedBlankNode;\n        }\n        return term;\n      });\n    });\n\n    return {\n      type: 'bindings',\n      bindingsStream,\n      metadata: async() => ({ ...outputMetadata, variables }),\n    };\n  }\n}\n","import type { MediatorHashBindings } from '@comunica/bus-hash-bindings';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type {\n  Bindings,\n  BindingsStream,\n  IActionContext,\n  IQueryOperationResult,\n  IQueryOperationResultBindings,\n} from '@comunica/types';\nimport { LRUCache } from 'lru-cache';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Reduced Hash Query Operation Actor.\n */\nexport class ActorQueryOperationReducedHash extends ActorQueryOperationTypedMediated<Algebra.Reduced> {\n  public readonly mediatorHashBindings: MediatorHashBindings;\n  public readonly cacheSize: number;\n\n  public constructor(args: IActorQueryOperationReducedHashArgs) {\n    super(args, 'reduced');\n  }\n\n  public async testOperation(_operation: Algebra.Reduced, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Reduced, context: IActionContext): Promise<IQueryOperationResult> {\n    const output: IQueryOperationResultBindings = ActorQueryOperation.getSafeBindings(\n      await this.mediatorQueryOperation.mediate({ operation: operation.input, context }),\n    );\n    const bindingsStream: BindingsStream = output.bindingsStream.filter(await this.newHashFilter(context));\n    return {\n      type: 'bindings',\n      bindingsStream,\n      metadata: output.metadata,\n    };\n  }\n\n  /**\n   * Create a new distinct filter function.\n   * This will maintain an internal hash datastructure so that every bindings object only returns true once.\n   * @param context The action context.\n   * @return {(bindings: Bindings) => boolean} A distinct filter for bindings.\n   */\n  public async newHashFilter(context: IActionContext): Promise<(bindings: Bindings) => boolean> {\n    const { hashFunction } = await this.mediatorHashBindings.mediate({ allowHashCollisions: true, context });\n    const hashes = new LRUCache<string, boolean>({ max: this.cacheSize });\n    return (bindings: Bindings) => {\n      const hash: string = hashFunction(bindings);\n      if (hashes.has(hash)) {\n        return false;\n      }\n      hashes.set(hash, true);\n      return true;\n    };\n  }\n}\n\nexport interface IActorQueryOperationReducedHashArgs extends IActorQueryOperationTypedMediatedArgs {\n  mediatorHashBindings: MediatorHashBindings;\n  /**\n   * @range {integer}\n   * @default {100}\n   */\n  cacheSize: number;\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { MediatorQuerySourceIdentify } from '@comunica/bus-query-source-identify';\nimport type { IActorTest } from '@comunica/core';\nimport { MetadataValidationState } from '@comunica/metadata';\nimport type { IActionContext, IQueryOperationResult, IQueryOperationResultBindings } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { SingletonIterator } from 'asynciterator';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Service Query Operation Actor.\n * It unwraps the SERVICE operation and executes it on the given source.\n */\nexport class ActorQueryOperationService extends ActorQueryOperationTypedMediated<Algebra.Service> {\n  public readonly forceSparqlEndpoint: boolean;\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n  public readonly mediatorQuerySourceIdentify: MediatorQuerySourceIdentify;\n\n  public constructor(args: IActorQueryOperationServiceArgs) {\n    super(args, 'service');\n  }\n\n  public async testOperation(operation: Algebra.Service, _context: IActionContext): Promise<IActorTest> {\n    if (operation.name.termType !== 'NamedNode') {\n      throw new Error(`${this.name} can only query services by IRI, while a ${operation.name.termType} was given.`);\n    }\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Service, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Identify the SERVICE target as query source\n    const { querySource } = await this.mediatorQuerySourceIdentify.mediate({\n      querySourceUnidentified: {\n        value: operation.name.value,\n        type: this.forceSparqlEndpoint ? 'sparql' : undefined,\n      },\n      context,\n    });\n\n    // Attach the source to the operation, and execute\n    let output: IQueryOperationResultBindings;\n    try {\n      output = ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({\n        operation: ActorQueryOperation.assignOperationSource(operation.input, querySource),\n        context,\n      }));\n    } catch (error: unknown) {\n      if (operation.silent) {\n        // Emit a single empty binding\n        const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n        output = {\n          bindingsStream: new SingletonIterator<RDF.Bindings>(bindingsFactory.bindings()),\n          type: 'bindings',\n          metadata: async() => ({\n            state: new MetadataValidationState(),\n            cardinality: { type: 'exact', value: 1 },\n            canContainUndefs: false,\n            variables: [],\n          }),\n        };\n        this.logWarn(context, `An error occurred when executing a SERVICE clause: ${(<Error> error).message}`);\n      } else {\n        throw error;\n      }\n    }\n\n    return output;\n  }\n}\n\nexport interface IActorQueryOperationServiceArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * If the SERVICE target should be assumed to be a SPARQL endpoint.\n   * @default {false}\n   */\n  forceSparqlEndpoint: boolean;\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n  /**\n   * The mediator for identifying query sources.\n   */\n  mediatorQuerySourceIdentify: MediatorQuerySourceIdentify;\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport { KeysQueryOperation } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport type {\n  IQueryOperationResult,\n  IQueryOperationResultBindings,\n  IQueryOperationResultQuads,\n  IQueryOperationResultStream,\n  IMetadata,\n  IActionContext,\n} from '@comunica/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Slice Query Operation Actor.\n */\nexport class ActorQueryOperationSlice extends ActorQueryOperationTypedMediated<Algebra.Slice> {\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, 'slice');\n  }\n\n  public async testOperation(_operation: Algebra.Slice, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Slice, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Add limit indicator to the context, which can be used for query planning\n    // eslint-disable-next-line unicorn/explicit-length-check\n    if (operation.length) {\n      context = context.set(KeysQueryOperation.limitIndicator, operation.length);\n    }\n\n    // Resolve the input\n    const output: IQueryOperationResult = await this.mediatorQueryOperation\n      .mediate({ operation: operation.input, context });\n\n    if (output.type === 'bindings') {\n      const bindingsStream = this.sliceStream(output.bindingsStream, operation);\n      return <IQueryOperationResultBindings> {\n        type: 'bindings',\n        bindingsStream,\n        metadata: this.sliceMetadata(output, operation),\n      };\n    }\n\n    if (output.type === 'quads') {\n      const quadStream = this.sliceStream(output.quadStream, operation);\n      return <IQueryOperationResultQuads> {\n        type: 'quads',\n        quadStream,\n        metadata: this.sliceMetadata(output, operation),\n      };\n    }\n\n    throw new Error(`Invalid query output type: Expected 'bindings' or 'quads' but got '${output.type}'`);\n  }\n\n  // Slice the stream based on the pattern values\n  private sliceStream(stream: AsyncIterator<any>, pattern: Algebra.Slice): AsyncIterator<any> {\n    // eslint-disable-next-line unicorn/explicit-length-check\n    const hasLength: boolean = Boolean(pattern.length) || pattern.length === 0;\n    const { start } = pattern;\n    const end = hasLength ? pattern.start + pattern.length! - 1 : Number.POSITIVE_INFINITY;\n    return stream.transform({ offset: start, limit: Math.max(end - start + 1, 0), autoStart: false });\n  }\n\n  // If we find metadata, apply slicing on the total number of items\n  private sliceMetadata(\n    output: IQueryOperationResultStream<any, any>,\n    pattern: Algebra.Slice,\n  ): () => Promise<IMetadata<any>> {\n    // eslint-disable-next-line unicorn/explicit-length-check\n    const hasLength: boolean = Boolean(pattern.length) || pattern.length === 0;\n    return () => (<() => Promise<IMetadata<any>>>output.metadata)()\n      .then((subMetadata) => {\n        const cardinality = { ...subMetadata.cardinality };\n        if (Number.isFinite(cardinality.value)) {\n          cardinality.value = Math.max(0, cardinality.value - pattern.start);\n          if (hasLength) {\n            cardinality.value = Math.min(cardinality.value, pattern.length!);\n          }\n        }\n        return { ...subMetadata, cardinality };\n      });\n  }\n}\n","import type { IActionQueryOperation, IActorQueryOperationArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport { getMetadataBindings, getMetadataQuads } from '@comunica/metadata';\nimport type {\n  IPhysicalQueryPlanLogger,\n  IQueryOperationResult,\n  IQuerySourceWrapper,\n} from '@comunica/types';\nimport { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Source Query Operation Actor.\n */\nexport class ActorQueryOperationSource extends ActorQueryOperation {\n  public constructor(args: IActorQueryOperationArgs) {\n    super(args);\n  }\n\n  public async test(action: IActionQueryOperation): Promise<IActorTest> {\n    if (!ActorQueryOperation.getOperationSource(action.operation)) {\n      throw new Error(`Actor ${this.name} requires an operation with source annotation.`);\n    }\n    return { httpRequests: 1 };\n  }\n\n  public async run(action: IActionQueryOperation): Promise<IQueryOperationResult> {\n    // Log to physical plan\n    const physicalQueryPlanLogger: IPhysicalQueryPlanLogger | undefined = action.context\n      .get(KeysInitQuery.physicalQueryPlanLogger);\n    if (physicalQueryPlanLogger) {\n      physicalQueryPlanLogger.logOperation(\n        action.operation.type,\n        undefined,\n        action.operation,\n        action.context.get(KeysInitQuery.physicalQueryPlanNode),\n        this.name,\n        {},\n      );\n      action.context = action.context.set(KeysInitQuery.physicalQueryPlanNode, action.operation);\n    }\n\n    const sourceWrapper: IQuerySourceWrapper = ActorQueryOperation.getOperationSource(action.operation)!;\n    const mergedContext = sourceWrapper.context ? action.context.merge(sourceWrapper.context) : action.context;\n\n    // eslint-disable-next-line ts/switch-exhaustiveness-check\n    switch (action.operation.type) {\n      // Special case: allow CONSTRUCT queries that are SLICED to be pushed into sources as well.\n      case Algebra.types.SLICE:\n      case Algebra.types.CONSTRUCT: {\n        if (action.operation.type === Algebra.types.SLICE && action.operation.input.type !== Algebra.types.CONSTRUCT) {\n          break;\n        }\n        const quadStream = sourceWrapper.source.queryQuads(action.operation, mergedContext);\n        const metadata = getMetadataQuads(quadStream);\n        return {\n          type: 'quads',\n          quadStream,\n          metadata,\n        };\n      }\n      case Algebra.types.ASK:\n        return {\n          type: 'boolean',\n          execute: () => sourceWrapper.source.queryBoolean(<Algebra.Ask>action.operation, mergedContext),\n        };\n      case Algebra.types.COMPOSITE_UPDATE:\n      case Algebra.types.DELETE_INSERT:\n      case Algebra.types.LOAD:\n      case Algebra.types.CLEAR:\n      case Algebra.types.CREATE:\n      case Algebra.types.DROP:\n      case Algebra.types.ADD:\n      case Algebra.types.MOVE:\n      case Algebra.types.COPY:\n        return {\n          type: 'void',\n          execute: () => sourceWrapper.source.queryVoid(<Algebra.Update>action.operation, mergedContext),\n        };\n    }\n\n    const bindingsStream = sourceWrapper.source.queryBindings(action.operation, mergedContext);\n    const metadata = getMetadataBindings(bindingsStream);\n    return {\n      type: 'bindings',\n      bindingsStream,\n      metadata,\n    };\n  }\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { MediatorRdfMetadataAccumulate } from '@comunica/bus-rdf-metadata-accumulate';\nimport type { IActorTest } from '@comunica/core';\nimport { MetadataValidationState } from '@comunica/metadata';\nimport type {\n  BindingsStream,\n  IQueryOperationResultBindings,\n  IActionContext,\n  IQueryOperationResult,\n  MetadataBindings,\n  MetadataQuads,\n  IQueryOperationResultQuads,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { UnionIterator } from 'asynciterator';\nimport { uniqTerms } from 'rdf-terms';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Union Query Operation Actor.\n */\nexport class ActorQueryOperationUnion extends ActorQueryOperationTypedMediated<Algebra.Union> {\n  public readonly mediatorRdfMetadataAccumulate: MediatorRdfMetadataAccumulate;\n\n  public constructor(args: IActorQueryOperationUnionArgs) {\n    super(args, 'union');\n  }\n\n  /**\n   * Takes the union of the given double array variables.\n   * Uniqueness is guaranteed.\n   * @param {string[][]} variables Double array of variables to take the union of.\n   * @return {string[]} The union of the given variables.\n   */\n  public static unionVariables(variables: RDF.Variable[][]): RDF.Variable[] {\n    return uniqTerms(variables.flat());\n  }\n\n  /**\n   * Takes the union of the given metadata array.\n   * It will ensure that the cardinality metadata value is properly calculated.\n   * @param {{[p: string]: any}[]} metadatas Array of metadata.\n   * @param bindings If the union of the variables field should also be taken.\n   * @param context The action context\n   * @param mediatorRdfMetadataAccumulate Mediator for metadata accumulation\n   * @return {{[p: string]: any}} Union of the metadata.\n   */\n  public static async unionMetadata<\n    Bindings extends boolean,\n    M extends (Bindings extends true ? MetadataBindings : MetadataQuads),\n  >(\n    metadatas: M[],\n    bindings: Bindings,\n    context: IActionContext,\n    mediatorRdfMetadataAccumulate: MediatorRdfMetadataAccumulate,\n    // eslint-disable-next-line function-paren-newline\n  ): Promise<M> {\n    let accumulatedMetadata: M = <M> (await mediatorRdfMetadataAccumulate\n      .mediate({ mode: 'initialize', context })).metadata;\n\n    // Accumulate cardinality\n    for (const appendingMetadata of metadatas) {\n      accumulatedMetadata = <any> {\n        ...appendingMetadata,\n        ...(await mediatorRdfMetadataAccumulate\n          .mediate({\n            mode: 'append',\n            accumulatedMetadata: <any> accumulatedMetadata,\n            appendingMetadata: <any> appendingMetadata,\n            context,\n          })).metadata,\n      };\n    }\n\n    // Create new metadata state\n    accumulatedMetadata.state = new MetadataValidationState();\n\n    // Propagate metadata invalidations\n    const invalidateListener = (): void => accumulatedMetadata.state.invalidate();\n    for (const metadata of metadatas) {\n      metadata.state.addInvalidateListener(invalidateListener);\n    }\n\n    // Union variables\n    if (bindings) {\n      accumulatedMetadata.variables = ActorQueryOperationUnion\n        .unionVariables(metadatas.map(metadata => metadata.variables));\n    }\n\n    return accumulatedMetadata;\n  }\n\n  public async testOperation(_operation: Algebra.Union, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Union, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Determine the type over which we are taking a union\n    const outputsRaw = await Promise.all(operation.input\n      .map(subOperation => this.mediatorQueryOperation.mediate({ operation: subOperation, context })));\n    let outputType: string | undefined;\n    for (const output of outputsRaw) {\n      if (outputType === undefined) {\n        outputType = output.type;\n      } else if (outputType !== output.type) {\n        throw new Error(`Unable to union ${outputType} and ${output.type}`);\n      }\n    }\n\n    // Handle bindings\n    if (outputType === 'bindings' || operation.input.length === 0) {\n      const outputs: IQueryOperationResultBindings[] = outputsRaw.map(ActorQueryOperation.getSafeBindings);\n\n      const bindingsStream: BindingsStream = new UnionIterator(outputs.map(\n        (output: IQueryOperationResultBindings) => output.bindingsStream,\n      ), { autoStart: false });\n\n      const metadata: () => Promise<MetadataBindings> = () => Promise.all(outputs.map(output => output.metadata()))\n        .then(subMeta => ActorQueryOperationUnion\n          .unionMetadata(subMeta, true, context, this.mediatorRdfMetadataAccumulate));\n      return { type: 'bindings', bindingsStream, metadata };\n    }\n\n    // Handle quads\n    if (outputType === 'quads') {\n      const outputs: IQueryOperationResultQuads[] = outputsRaw.map(ActorQueryOperation.getSafeQuads);\n\n      const quadStream = new UnionIterator(outputs.map(\n        (output: IQueryOperationResultQuads) => output.quadStream,\n      ), { autoStart: false });\n\n      const metadata: () => Promise<MetadataQuads> = () => Promise.all(outputs.map(output => output.metadata()))\n        .then(subMeta => ActorQueryOperationUnion\n          .unionMetadata(subMeta, false, context, this.mediatorRdfMetadataAccumulate));\n      return { type: 'quads', quadStream, metadata };\n    }\n\n    // Throw otherwise\n    throw new Error(`Unable to union ${outputType}`);\n  }\n}\n\nexport interface IActorQueryOperationUnionArgs extends IActorQueryOperationTypedMediatedArgs {\n  mediatorRdfMetadataAccumulate: MediatorRdfMetadataAccumulate;\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type {\n  MediatorRdfUpdateQuads,\n} from '@comunica/bus-rdf-update-quads';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport type { Algebra } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory();\n\n/**\n * A [Query Operation](https://github.com/comunica/comunica/tree/master/packages/bus-query-operation) actor\n * that handles SPARQL clear operations.\n */\nexport class ActorQueryOperationClear extends ActorQueryOperationTypedMediated<Algebra.Clear> {\n  public readonly mediatorUpdateQuads: MediatorRdfUpdateQuads;\n\n  public constructor(args: IActorQueryOperationClearArgs) {\n    super(args, 'clear');\n  }\n\n  public async testOperation(operation: Algebra.Clear, context: IActionContext): Promise<IActorTest> {\n    ActorQueryOperation.throwOnReadOnly(context);\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Clear, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Delegate to update-quads bus\n    let graphs: RDF.DefaultGraph | 'NAMED' | 'ALL' | RDF.NamedNode[];\n    if (operation.source === 'DEFAULT') {\n      graphs = DF.defaultGraph();\n    } else if (typeof operation.source === 'string') {\n      graphs = operation.source;\n    } else {\n      graphs = [ operation.source ];\n    }\n    const { execute } = await this.mediatorUpdateQuads.mediate({\n      deleteGraphs: {\n        graphs,\n        requireExistence: !operation.silent,\n        dropGraphs: false,\n      },\n      context,\n    });\n\n    return {\n      type: 'void',\n      execute,\n    };\n  }\n}\n\nexport interface IActorQueryOperationClearArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * The RDF Update Quads mediator\n   */\n  mediatorUpdateQuads: MediatorRdfUpdateQuads;\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Update CompositeUpdate Query Operation Actor.\n */\nexport class ActorQueryOperationUpdateCompositeUpdate\n  extends ActorQueryOperationTypedMediated<Algebra.CompositeUpdate> {\n  public constructor(args: IActorQueryOperationTypedMediatedArgs) {\n    super(args, 'compositeupdate');\n  }\n\n  public async testOperation(\n    operation: Algebra.CompositeUpdate,\n    context: IActionContext,\n  ): Promise<IActorTest> {\n    ActorQueryOperation.throwOnReadOnly(context);\n    return true;\n  }\n\n  public async runOperation(operationOriginal: Algebra.CompositeUpdate, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    const execute = (): Promise<void> => (async(): Promise<void> => {\n      // Execute update operations in sequence\n      for (const operation of operationOriginal.updates) {\n        const subResult = ActorQueryOperation\n          .getSafeVoid(await this.mediatorQueryOperation.mediate({ operation, context }));\n        await subResult.execute();\n      }\n    })();\n\n    return {\n      type: 'void',\n      execute,\n    };\n  }\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { MediatorRdfUpdateQuads } from '@comunica/bus-rdf-update-quads';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A [Query Operation](https://github.com/comunica/comunica/tree/master/packages/bus-query-operation) actor that\n * handles SPARQL create operations.\n */\nexport class ActorQueryOperationCreate extends ActorQueryOperationTypedMediated<Algebra.Create> {\n  public readonly mediatorUpdateQuads: MediatorRdfUpdateQuads;\n\n  public constructor(args: IActorQueryOperationCreateArgs) {\n    super(args, 'create');\n  }\n\n  public async testOperation(operation: Algebra.Create, context: IActionContext): Promise<IActorTest> {\n    ActorQueryOperation.throwOnReadOnly(context);\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Create, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Delegate to update-quads bus\n    const { execute } = await this.mediatorUpdateQuads.mediate({\n      createGraphs: {\n        graphs: [ operation.source ],\n        requireNonExistence: !operation.silent,\n      },\n      context,\n    });\n\n    return {\n      type: 'void',\n      execute,\n    };\n  }\n}\n\nexport interface IActorQueryOperationCreateArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * The RDF Update Quads mediator\n   */\n  mediatorUpdateQuads: MediatorRdfUpdateQuads;\n}\n","import { BindingsToQuadsIterator } from '@comunica/actor-query-operation-construct';\nimport { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport {\n  ActorQueryOperation,\n  ActorQueryOperationTypedMediated,\n} from '@comunica/bus-query-operation';\nimport type { MediatorRdfUpdateQuads } from '@comunica/bus-rdf-update-quads';\nimport type { IActorTest } from '@comunica/core';\nimport type { IQueryOperationResult, BindingsStream, IActionContext } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { ArrayIterator } from 'asynciterator';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Update DeleteInsert Query Operation Actor.\n */\nexport class ActorQueryOperationUpdateDeleteInsert extends ActorQueryOperationTypedMediated<Algebra.DeleteInsert> {\n  public readonly mediatorUpdateQuads: MediatorRdfUpdateQuads;\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  protected blankNodeCounter = 0;\n\n  public constructor(args: IActorQueryOperationUpdateDeleteInsertArgs) {\n    super(args, 'deleteinsert');\n  }\n\n  public async testOperation(\n    operation: Algebra.DeleteInsert,\n    context: IActionContext,\n  ): Promise<IActorTest> {\n    ActorQueryOperation.throwOnReadOnly(context);\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.DeleteInsert, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    // Evaluate the where clause\n    const whereBindings: BindingsStream = operation.where ?\n      ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation\n        .mediate({ operation: operation.where, context })).bindingsStream :\n      new ArrayIterator<RDF.Bindings>([ bindingsFactory.bindings() ], { autoStart: false });\n\n    // Construct triples using the result based on the pattern.\n    let quadStreamInsert: AsyncIterator<RDF.Quad> | undefined;\n    let quadStreamDelete: AsyncIterator<RDF.Quad> | undefined;\n    if (operation.insert) {\n      // Localize blank nodes in pattern, to avoid clashes across different INSERT/DELETE calls\n      quadStreamInsert = new BindingsToQuadsIterator(\n        operation.insert.map(BindingsToQuadsIterator.localizeQuad.bind(null, this.blankNodeCounter)),\n        whereBindings.clone(),\n      );\n      this.blankNodeCounter++;\n    }\n    if (operation.delete) {\n      // Localize blank nodes in pattern, to avoid clashes across different INSERT/DELETE calls\n      quadStreamDelete = new BindingsToQuadsIterator(\n        operation.delete.map(BindingsToQuadsIterator.localizeQuad.bind(null, this.blankNodeCounter)),\n        whereBindings.clone(),\n      );\n      this.blankNodeCounter++;\n    }\n\n    // Evaluate the required modifications\n    const { execute } = await this.mediatorUpdateQuads.mediate({\n      quadStreamInsert,\n      quadStreamDelete,\n      context,\n    });\n\n    return {\n      type: 'void',\n      execute,\n    };\n  }\n}\n\nexport interface IActorQueryOperationUpdateDeleteInsertArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * The RDF Update Quads mediator\n   */\n  mediatorUpdateQuads: MediatorRdfUpdateQuads;\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { MediatorRdfUpdateQuads } from '@comunica/bus-rdf-update-quads';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport type { Algebra } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory();\n\n/**\n * A [Query Operation](https://github.com/comunica/comunica/tree/master/packages/bus-query-operation) actor\n * that handles SPARQL drop operations.\n */\nexport class ActorQueryOperationDrop extends ActorQueryOperationTypedMediated<Algebra.Drop> {\n  public readonly mediatorUpdateQuads: MediatorRdfUpdateQuads;\n\n  public constructor(args: IActorQueryOperationDropArgs) {\n    super(args, 'drop');\n  }\n\n  public async testOperation(operation: Algebra.Drop, context: IActionContext): Promise<IActorTest> {\n    ActorQueryOperation.throwOnReadOnly(context);\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Drop, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Delegate to update-quads bus\n    let graphs: RDF.DefaultGraph | 'NAMED' | 'ALL' | RDF.NamedNode[];\n    if (operation.source === 'DEFAULT') {\n      graphs = DF.defaultGraph();\n    } else if (typeof operation.source === 'string') {\n      graphs = operation.source;\n    } else {\n      graphs = [ operation.source ];\n    }\n    const { execute } = await this.mediatorUpdateQuads.mediate({\n      deleteGraphs: {\n        graphs,\n        requireExistence: !operation.silent,\n        dropGraphs: true,\n      },\n      context,\n    });\n\n    return {\n      type: 'void',\n      execute,\n    };\n  }\n}\n\nexport interface IActorQueryOperationDropArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * The RDF Update Quads mediator\n   */\n  mediatorUpdateQuads: MediatorRdfUpdateQuads;\n}\n","import type { IActorQueryOperationTypedMediatedArgs } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, ActorQueryOperationTypedMediated } from '@comunica/bus-query-operation';\nimport type { MediatorQuerySourceIdentify } from '@comunica/bus-query-source-identify';\nimport type { MediatorRdfUpdateQuads } from '@comunica/bus-rdf-update-quads';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResult } from '@comunica/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport { Factory } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory();\n\n/**\n * A [Query Operation](https://github.com/comunica/comunica/tree/master/packages/bus-query-operation) actor\n * that handles SPARQL load operations.\n */\nexport class ActorQueryOperationLoad extends ActorQueryOperationTypedMediated<Algebra.Load> {\n  public readonly mediatorUpdateQuads: MediatorRdfUpdateQuads;\n  public readonly mediatorQuerySourceIdentify: MediatorQuerySourceIdentify;\n\n  private readonly factory: Factory;\n  private readonly constructOperation: Algebra.Construct;\n\n  public constructor(args: IActorQueryOperationLoadArgs) {\n    super(args, 'load');\n    this.factory = new Factory();\n  }\n\n  public async testOperation(operation: Algebra.Load, context: IActionContext): Promise<IActorTest> {\n    ActorQueryOperation.throwOnReadOnly(context);\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Load, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    // Determine query source\n    let subContext = context;\n    if (operation.silent) {\n      subContext = subContext.set(KeysInitQuery.lenient, true);\n    }\n    const { querySource } = await this.mediatorQuerySourceIdentify.mediate({\n      querySourceUnidentified: { value: operation.source.value },\n      context: subContext,\n    });\n\n    // Create CONSTRUCT query on the given source\n    const output = ActorQueryOperationLoad.getSafeQuads(await this.mediatorQueryOperation.mediate({\n      operation: this.factory.createConstruct(\n        ActorQueryOperation.assignOperationSource(\n          this.factory.createPattern(DF.variable('s'), DF.variable('p'), DF.variable('o')),\n          querySource,\n        ),\n        [ this.factory.createPattern(DF.variable('s'), DF.variable('p'), DF.variable('o')) ],\n      ),\n      context: subContext,\n    }));\n\n    // Determine quad stream to insert\n    let quadStream = output.quadStream;\n    if (operation.destination) {\n      quadStream = quadStream.map(quad => DF.quad(quad.subject, quad.predicate, quad.object, operation.destination));\n    }\n\n    // Insert quad stream\n    const { execute } = await this.mediatorUpdateQuads.mediate({\n      quadStreamInsert: quadStream,\n      context,\n    });\n\n    return {\n      type: 'void',\n      execute,\n    };\n  }\n}\n\nexport interface IActorQueryOperationLoadArgs extends IActorQueryOperationTypedMediatedArgs {\n  /**\n   * The RDF Update Quads mediator\n   */\n  mediatorUpdateQuads: MediatorRdfUpdateQuads;\n  /**\n   * Mediator for identifying load sources.\n   */\n  mediatorQuerySourceIdentify: MediatorQuerySourceIdentify;\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActionQueryOperation } from '@comunica/bus-query-operation';\nimport { ActorQueryOperationTyped } from '@comunica/bus-query-operation';\nimport type { IActorArgs, IActorTest } from '@comunica/core';\nimport { MetadataValidationState } from '@comunica/metadata';\nimport type {\n  IQueryOperationResult,\n  BindingsStream,\n  Bindings,\n  IActionContext,\n  MetadataBindings,\n} from '@comunica/types';\nimport { ArrayIterator } from 'asynciterator';\nimport { DataFactory } from 'rdf-data-factory';\nimport type { Algebra } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory();\n\n/**\n * A comunica Values Query Operation Actor.\n */\nexport class ActorQueryOperationValues extends ActorQueryOperationTyped<Algebra.Values> {\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryOperationUpdateDeleteInsertArgs) {\n    super(args, 'values');\n  }\n\n  public async testOperation(_operation: Algebra.Values, _context: IActionContext): Promise<IActorTest> {\n    return true;\n  }\n\n  public async runOperation(operation: Algebra.Values, context: IActionContext):\n  Promise<IQueryOperationResult> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, context);\n    const bindingsStream: BindingsStream = new ArrayIterator<Bindings>(operation.bindings\n      .map(x => bindingsFactory.bindings(Object.entries(x)\n        .map(([ key, value ]) => [ DF.variable(key.slice(1)), value ]))));\n    const variables = operation.variables;\n    const metadata = (): Promise<MetadataBindings> => Promise.resolve({\n      state: new MetadataValidationState(),\n      cardinality: { type: 'exact', value: operation.bindings.length },\n      canContainUndefs: operation.bindings.some(bindings => variables.some(variable => !(`?${variable.value}` in bindings))),\n      variables,\n    });\n    return { type: 'bindings', bindingsStream, metadata };\n  }\n}\n\nexport interface IActorQueryOperationUpdateDeleteInsertArgs extends\n  IActorArgs<IActionQueryOperation, IActorTest, IQueryOperationResult> {\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import type { IActionQueryParse, IActorQueryParseArgs, IActorQueryParseOutput } from '@comunica/bus-query-parse';\nimport { ActorQueryParse } from '@comunica/bus-query-parse';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport { Converter } from 'graphql-to-sparql';\n\n/**\n * A comunica GraphQL SPARQL Parse Actor.\n */\nexport class ActorQueryParseGraphql extends ActorQueryParse {\n  private readonly graphqlToSparql: Converter;\n\n  public constructor(args: IActorQueryParseArgs) {\n    super(args);\n    this.graphqlToSparql = new Converter({ requireContext: true });\n  }\n\n  public async test(action: IActionQueryParse): Promise<IActorTest> {\n    if (action.queryFormat?.language !== 'graphql') {\n      throw new Error('This actor can only parse GraphQL queries');\n    }\n    return true;\n  }\n\n  public async run(action: IActionQueryParse): Promise<IActorQueryParseOutput> {\n    const context: any = action.context.get(KeysInitQuery.jsonLdContext) || {};\n    const options = {\n      // eslint-disable-next-line ts/no-unnecessary-type-assertion\n      singularizeVariables: <any> action.context.get(KeysInitQuery.graphqlSingularizeVariables),\n    };\n    return { operation: await this.graphqlToSparql.graphqlToSparqlAlgebra(action.query, context, options) };\n  }\n}\n","import type { IActionQueryParse, IActorQueryParseArgs, IActorQueryParseOutput } from '@comunica/bus-query-parse';\nimport { ActorQueryParse } from '@comunica/bus-query-parse';\nimport type { IActorTest } from '@comunica/core';\nimport { translate } from 'sparqlalgebrajs';\nimport { Parser as SparqlParser } from 'sparqljs';\n\n/**\n * A comunica Algebra SPARQL Parse Actor.\n */\nexport class ActorQueryParseSparql extends ActorQueryParse {\n  public readonly prefixes: Record<string, string>;\n\n  public constructor(args: IActorQueryParseSparqlArgs) {\n    super(args);\n    this.prefixes = Object.freeze(this.prefixes);\n  }\n\n  public async test(action: IActionQueryParse): Promise<IActorTest> {\n    if (action.queryFormat && action.queryFormat.language !== 'sparql') {\n      throw new Error('This actor can only parse SPARQL queries');\n    }\n    return true;\n  }\n\n  public async run(action: IActionQueryParse): Promise<IActorQueryParseOutput> {\n    const parser = new SparqlParser({ prefixes: this.prefixes, baseIRI: action.baseIRI, sparqlStar: true });\n    const parsedSyntax = parser.parse(action.query);\n    const baseIRI = parsedSyntax.type === 'query' ? parsedSyntax.base : undefined;\n    return {\n      baseIRI,\n      operation: translate(parsedSyntax, {\n        quads: true,\n        prefixes: this.prefixes,\n        blankToVariable: true,\n        baseIRI: action.baseIRI,\n      }),\n    };\n  }\n}\n\nexport interface IActorQueryParseSparqlArgs extends IActorQueryParseArgs {\n  /**\n   * Default prefixes to use\n   * @range {json}\n   * @default {{\n   *   \"rdf\": \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\",\n   *   \"rdfs\": \"http://www.w3.org/2000/01/rdf-schema#\",\n   *   \"owl\": \"http://www.w3.org/2002/07/owl#\",\n   *   \"xsd\": \"http://www.w3.org/2001/XMLSchema#\",\n   *   \"dc\": \"http://purl.org/dc/terms/\",\n   *   \"dcterms\": \"http://purl.org/dc/terms/\",\n   *   \"dc11\": \"http://purl.org/dc/elements/1.1/\",\n   *   \"foaf\": \"http://xmlns.com/foaf/0.1/\",\n   *   \"geo\": \"http://www.w3.org/2003/01/geo/wgs84_pos#\",\n   *   \"dbpedia\": \"http://dbpedia.org/resource/\",\n   *   \"dbpedia-owl\": \"http://dbpedia.org/ontology/\",\n   *   \"dbpprop\": \"http://dbpedia.org/property/\",\n   *   \"schema\": \"http://schema.org/\",\n   *   \"skos\": \"http://www.w3.org/2008/05/skos#\"\n   * }}\n   */\n  prefixes?: Record<string, string>;\n}\n","import type {\n  IActionQueryProcess,\n  IActorQueryProcessOutput,\n  IActorQueryProcessArgs,\n  IQueryProcessSequential,\n} from '@comunica/bus-query-process';\nimport {\n  ActorQueryProcess,\n} from '@comunica/bus-query-process';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport { ActionContextKey } from '@comunica/core';\n\n/**\n * A comunica Explain Logical Query Process Actor.\n */\nexport class ActorQueryProcessExplainLogical extends ActorQueryProcess {\n  public readonly queryProcessor: IQueryProcessSequential;\n\n  public constructor(args: IActorQueryProcessExplainLogicalArgs) {\n    super(args);\n  }\n\n  public async test(action: IActionQueryProcess): Promise<IActorTest> {\n    if ((action.context.get(KeysInitQuery.explain) ||\n      action.context.get(new ActionContextKey('explain'))) !== 'logical') {\n      throw new Error(`${this.name} can only explain in 'logical' mode.`);\n    }\n    return true;\n  }\n\n  public async run(action: IActionQueryProcess): Promise<IActorQueryProcessOutput> {\n    // Parse and optimize the query\n    let { operation, context } = await this.queryProcessor.parse(action.query, action.context);\n    ({ operation, context } = await this.queryProcessor.optimize(operation, context));\n\n    return {\n      result: {\n        explain: true,\n        type: 'logical',\n        data: operation,\n      },\n    };\n  }\n}\n\nexport interface IActorQueryProcessExplainLogicalArgs extends IActorQueryProcessArgs {\n  queryProcessor: IQueryProcessSequential;\n}\n","import type {\n  IActionQueryProcess,\n  IActorQueryProcessOutput,\n  IActorQueryProcessArgs,\n  IQueryProcessSequential,\n} from '@comunica/bus-query-process';\nimport {\n  ActorQueryProcess,\n} from '@comunica/bus-query-process';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport { ActionContextKey } from '@comunica/core';\n\n/**\n * A comunica Explain Parsed Query Process Actor.\n */\nexport class ActorQueryProcessExplainParsed extends ActorQueryProcess {\n  public readonly queryProcessor: IQueryProcessSequential;\n\n  public constructor(args: IActorQueryProcessExplainParsedArgs) {\n    super(args);\n  }\n\n  public async test(action: IActionQueryProcess): Promise<IActorTest> {\n    if ((action.context.get(KeysInitQuery.explain) ||\n      action.context.get(new ActionContextKey('explain'))) !== 'parsed') {\n      throw new Error(`${this.name} can only explain in 'parsed' mode.`);\n    }\n    return true;\n  }\n\n  public async run(action: IActionQueryProcess): Promise<IActorQueryProcessOutput> {\n    // Parse the query\n    const { operation } = await this.queryProcessor.parse(action.query, action.context);\n\n    return {\n      result: {\n        explain: true,\n        type: 'parsed',\n        data: operation,\n      },\n    };\n  }\n}\n\nexport interface IActorQueryProcessExplainParsedArgs extends IActorQueryProcessArgs {\n  queryProcessor: IQueryProcessSequential;\n}\n","import type {\n  IActionQueryProcess,\n  IActorQueryProcessOutput,\n  IActorQueryProcessArgs,\n  IQueryProcessSequential,\n} from '@comunica/bus-query-process';\nimport {\n  ActorQueryProcess,\n} from '@comunica/bus-query-process';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport { ActionContextKey } from '@comunica/core';\nimport { MemoryPhysicalQueryPlanLogger } from './MemoryPhysicalQueryPlanLogger';\n\n/**\n * A comunica Explain Physical Query Process Actor.\n */\nexport class ActorQueryProcessExplainPhysical extends ActorQueryProcess {\n  public readonly queryProcessor: IQueryProcessSequential;\n\n  public constructor(args: IActorQueryProcessExplainPhysicalArgs) {\n    super(args);\n  }\n\n  public async test(action: IActionQueryProcess): Promise<IActorTest> {\n    const mode = (action.context.get(KeysInitQuery.explain) || action.context.get(new ActionContextKey('explain')));\n    if (mode !== 'physical' && mode !== 'physical-json') {\n      throw new Error(`${this.name} can only explain in 'physical' or 'physical-json' mode.`);\n    }\n    return true;\n  }\n\n  public async run(action: IActionQueryProcess): Promise<IActorQueryProcessOutput> {\n    // Run all query processing steps in sequence\n\n    let { operation, context } = await this.queryProcessor.parse(action.query, action.context);\n    ({ operation, context } = await this.queryProcessor.optimize(operation, context));\n\n    // If we need a physical query plan, store a physical query plan logger in the context, and collect it after exec\n    const physicalQueryPlanLogger = new MemoryPhysicalQueryPlanLogger();\n    context = context.set(KeysInitQuery.physicalQueryPlanLogger, physicalQueryPlanLogger);\n\n    const output = await this.queryProcessor.evaluate(operation, context);\n\n    // Make sure the whole result is produced\n    switch (output.type) {\n      case 'bindings':\n        await output.bindingsStream.toArray();\n        break;\n      case 'quads':\n        await output.quadStream.toArray();\n        break;\n      case 'boolean':\n        await output.execute();\n        break;\n      case 'void':\n        await output.execute();\n        break;\n    }\n\n    const mode: 'physical' | 'physical-json' = (action.context.get(KeysInitQuery.explain) ??\n      action.context.getSafe(new ActionContextKey('explain')));\n    return {\n      result: {\n        explain: true,\n        type: mode,\n        data: mode === 'physical' ? physicalQueryPlanLogger.toCompactString() : physicalQueryPlanLogger.toJson(),\n      },\n    };\n  }\n}\n\nexport interface IActorQueryProcessExplainPhysicalArgs extends IActorQueryProcessArgs {\n  queryProcessor: IQueryProcessSequential;\n}\n","import type { IPhysicalQueryPlanLogger, IPlanNode } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { termToString } from 'rdf-string';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A physical query plan logger that stores everything in memory.\n */\nexport class MemoryPhysicalQueryPlanLogger implements IPhysicalQueryPlanLogger {\n  private readonly planNodes: Map<any, IPlanNode>;\n  private rootNode: IPlanNode | undefined;\n\n  public constructor() {\n    this.planNodes = new Map();\n  }\n\n  public logOperation(\n    logicalOperator: string,\n    physicalOperator: string | undefined,\n    node: any,\n    parentNode: any,\n    actor: string,\n    metadata: any,\n  ): void {\n    const planNode: IPlanNode = {\n      actor,\n      logicalOperator,\n      physicalOperator,\n      rawNode: node,\n      children: [],\n      metadata,\n    };\n    this.planNodes.set(node, planNode);\n\n    if (this.rootNode) {\n      if (!parentNode) {\n        throw new Error(`Detected more than one parent-less node`);\n      }\n      const planParentNode = this.planNodes.get(parentNode);\n      if (!planParentNode) {\n        throw new Error(`Could not find parent node`);\n      }\n      planParentNode.children.push(planNode);\n    } else {\n      if (parentNode) {\n        throw new Error(`No root node has been set yet, while a parent is being referenced`);\n      }\n      this.rootNode = planNode;\n    }\n  }\n\n  public stashChildren(node: any, filter?: (planNodeFilter: IPlanNode) => boolean): void {\n    const planNode = this.planNodes.get(node);\n    if (!planNode) {\n      throw new Error(`Could not find plan node`);\n    }\n    planNode.children = filter ? planNode.children.filter(filter) : [];\n  }\n\n  public unstashChild(\n    node: any,\n    parentNode: any,\n  ): void {\n    const planNode = this.planNodes.get(node);\n    if (planNode) {\n      const planParentNode = this.planNodes.get(parentNode);\n      if (!planParentNode) {\n        throw new Error(`Could not find plan parent node`);\n      }\n      planParentNode.children.push(planNode);\n    }\n  }\n\n  public appendMetadata(\n    node: any,\n    metadata: any,\n  ): void {\n    const planNode = this.planNodes.get(node);\n    if (planNode) {\n      planNode.metadata = {\n        ...planNode.metadata,\n        ...metadata,\n      };\n    }\n  }\n\n  public toJson(): IPlanNodeJson | Record<string, never> {\n    return this.rootNode ? this.planNodeToJson(this.rootNode) : {};\n  }\n\n  private planNodeToJson(node: IPlanNode): IPlanNodeJson {\n    const data: IPlanNodeJson = {\n      logical: node.logicalOperator,\n      physical: node.physicalOperator,\n      ...this.getLogicalMetadata(node.rawNode),\n      ...this.compactMetadata(node.metadata),\n    };\n\n    if (node.children.length > 0) {\n      data.children = node.children.map(child => this.planNodeToJson(child));\n    }\n\n    // Special case: compact children for bind joins.\n    if (data.physical === 'bind' && data.children) {\n      // Group children by query plan format\n      const childrenGrouped: Record<string, IPlanNodeJson[]> = {};\n      for (const child of data.children) {\n        const lastSubChild = child.children?.at(-1) ?? child;\n        const key = this.getPlanHash(lastSubChild).join(',');\n        if (!childrenGrouped[key]) {\n          childrenGrouped[key] = [];\n        }\n        childrenGrouped[key].push(child);\n      }\n\n      // Compact query plan occurrences\n      const childrenCompact: IPlanNodeJsonChildCompact[] = [];\n      for (const children of Object.values(childrenGrouped)) {\n        childrenCompact.push({\n          occurrences: children.length,\n          firstOccurrence: children[0],\n        });\n      }\n\n      // Replace children with compacted representation\n      data.childrenCompact = childrenCompact;\n      delete data.children;\n    }\n\n    return data;\n  }\n\n  private getPlanHash(node: IPlanNodeJson): string[] {\n    let entries = [ `${node.logical}-${node.physical}` ];\n    if (node.children) {\n      entries = [\n        ...entries,\n        ...node.children.flatMap(child => this.getPlanHash(child)),\n      ];\n    } else if (node.childrenCompact) {\n      entries = [\n        ...entries,\n        ...node.childrenCompact.flatMap(child => this.getPlanHash(child.firstOccurrence)),\n      ];\n    }\n    return entries;\n  }\n\n  private compactMetadata(metadata: any): any {\n    return Object.fromEntries(Object.entries(metadata)\n      .map(([ key, value ]) => [ key, this.compactMetadataValue(value) ]));\n  }\n\n  private compactMetadataValue(value: any): any {\n    return value && typeof value === 'object' && 'termType' in value ? this.getLogicalMetadata(value) : value;\n  }\n\n  private getLogicalMetadata(rawNode: any): IPlanNodeJsonLogicalMetadata {\n    const data: IPlanNodeJsonLogicalMetadata = {};\n\n    if ('type' in rawNode) {\n      const operation: Algebra.Operation = rawNode;\n\n      if (operation.metadata?.scopedSource) {\n        data.source = (<any> operation.metadata.scopedSource).source.toString();\n      }\n\n      // eslint-disable-next-line ts/switch-exhaustiveness-check\n      switch (operation.type) {\n        case 'pattern':\n          data.pattern = this.quadToString(operation);\n          break;\n        case 'project':\n          data.variables = operation.variables.map(variable => variable.value);\n          break;\n      }\n    }\n\n    return data;\n  }\n\n  private quadToString(quad: RDF.BaseQuad): string {\n    return `${termToString(quad.subject)} ${termToString(quad.predicate)} ${termToString(quad.object)}${quad.graph.termType === 'DefaultGraph' ? '' : ` ${termToString(quad.graph)}`}`;\n  }\n\n  public toCompactString(): string {\n    const node = this.toJson();\n    const lines: string[] = [];\n    const sources: Map<string, number> = new Map();\n\n    if ('logical' in node) {\n      this.nodeToCompactString(lines, sources, '', <IPlanNodeJson> node);\n    } else {\n      lines.push('Empty');\n    }\n\n    if (sources.size > 0) {\n      lines.push('');\n      lines.push('sources:');\n      for (const [ key, id ] of sources.entries()) {\n        lines.push(`  ${id}: ${key}`);\n      }\n    }\n\n    return lines.join('\\n');\n  }\n\n  public nodeToCompactString(\n    lines: string[],\n    sources: Map<string, number>,\n    indent: string,\n    node: IPlanNodeJson,\n    metadata?: string,\n  ): void {\n    let sourceId: number | undefined;\n    if (node.source) {\n      sourceId = sources.get(node.source);\n      if (sourceId === undefined) {\n        sourceId = sources.size;\n        sources.set(node.source, sourceId);\n      }\n    }\n\n    lines.push(`${\n      indent}${\n      node.logical}${\n      node.physical ? `(${node.physical})` : ''}${\n      node.pattern ? ` (${node.pattern})` : ''}${\n      node.variables ? ` (${node.variables.join(',')})` : ''}${\n      node.bindOperation ? ` bindOperation:(${node.bindOperation.pattern}) bindCardEst:${node.bindOperationCardinality.type === 'estimate' ? '~' : ''}${node.bindOperationCardinality.value}` : ''}${\n      node.cardinality ? ` cardEst:${node.cardinality.type === 'estimate' ? '~' : ''}${numberToString(node.cardinality.value)}` : ''}${\n      node.source ? ` src:${sourceId}` : ''}${\n      node.cardinalityReal ? ` cardReal:${node.cardinalityReal}` : ''}${\n      node.timeSelf ? ` timeSelf:${numberToString(node.timeSelf)}ms` : ''}${\n      node.timeLife ? ` timeLife:${numberToString(node.timeLife)}ms` : ''}${\n      metadata ? ` ${metadata}` : ''}`);\n    for (const child of node.children ?? []) {\n      this.nodeToCompactString(lines, sources, `${indent}  `, child);\n    }\n    for (const child of node.childrenCompact ?? []) {\n      this.nodeToCompactString(lines, sources, `${indent}  `, child.firstOccurrence, `compacted-occurrences:${child.occurrences}`);\n    }\n  }\n}\n\nexport function numberToString(value: number): string {\n  return value.toLocaleString('en-US', { minimumFractionDigits: 0, maximumFractionDigits: 3 });\n}\n\ninterface IPlanNodeJson extends IPlanNodeJsonLogicalMetadata {\n  logical: string;\n  physical?: string;\n  [metadataKey: string]: any;\n  children?: IPlanNodeJson[];\n  childrenCompact?: IPlanNodeJsonChildCompact[];\n}\n\ninterface IPlanNodeJsonChildCompact {\n  occurrences: number;\n  firstOccurrence: IPlanNodeJson;\n}\n\ninterface IPlanNodeJsonLogicalMetadata {\n  pattern?: string;\n  source?: string;\n  variables?: string[];\n  cardinality?: RDF.QueryResultCardinality;\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorContextPreprocess } from '@comunica/bus-context-preprocess';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { MediatorOptimizeQueryOperation } from '@comunica/bus-optimize-query-operation';\nimport type { MediatorQueryOperation } from '@comunica/bus-query-operation';\nimport { materializeOperation } from '@comunica/bus-query-operation';\nimport type { MediatorQueryParse } from '@comunica/bus-query-parse';\nimport type {\n  IActionQueryProcess,\n  IActorQueryProcessOutput,\n  IActorQueryProcessArgs,\n  IQueryProcessSequential,\n  IQueryProcessSequentialOutput,\n} from '@comunica/bus-query-process';\nimport {\n  ActorQueryProcess,\n} from '@comunica/bus-query-process';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport { ActionContextKey } from '@comunica/core';\nimport type {\n  IActionContext,\n  IQueryOperationResult,\n  QueryFormatType,\n} from '@comunica/types';\n\nimport type * as RDF from '@rdfjs/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Sequential Query Process Actor.\n */\nexport class ActorQueryProcessSequential extends ActorQueryProcess implements IQueryProcessSequential {\n  public readonly mediatorContextPreprocess: MediatorContextPreprocess;\n  public readonly mediatorQueryParse: MediatorQueryParse;\n  public readonly mediatorOptimizeQueryOperation: MediatorOptimizeQueryOperation;\n  public readonly mediatorQueryOperation: MediatorQueryOperation;\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQueryProcessSequentialArgs) {\n    super(args);\n  }\n\n  public async test(action: IActionQueryProcess): Promise<IActorTest> {\n    if (action.context.get(KeysInitQuery.explain) || action.context.get(new ActionContextKey('explain'))) {\n      throw new Error(`${this.name} is not able to explain queries.`);\n    }\n    return true;\n  }\n\n  public async run(action: IActionQueryProcess): Promise<IActorQueryProcessOutput> {\n    // Run all query processing steps in sequence\n    let { operation, context } = await this.parse(action.query, action.context);\n    ({ operation, context } = await this.optimize(operation, context));\n    const output = await this.evaluate(operation, context);\n\n    return { result: output };\n  }\n\n  public async parse(query: QueryFormatType, context: IActionContext): Promise<IQueryProcessSequentialOutput> {\n    // Pre-processing the context\n    context = (await this.mediatorContextPreprocess.mediate({ context, initialize: true })).context;\n\n    // Parse query\n    let operation: Algebra.Operation;\n    if (typeof query === 'string') {\n      // Save the original query string in the context\n      context = context.set(KeysInitQuery.queryString, query);\n\n      const baseIRI: string | undefined = context.get(KeysInitQuery.baseIRI);\n      const queryFormat: RDF.QueryFormat = context.get(KeysInitQuery.queryFormat)!;\n      const queryParseOutput = await this.mediatorQueryParse.mediate({ context, query, queryFormat, baseIRI });\n      operation = queryParseOutput.operation;\n      // Update the baseIRI in the context if the query modified it.\n      if (queryParseOutput.baseIRI) {\n        context = context.set(KeysInitQuery.baseIRI, queryParseOutput.baseIRI);\n      }\n    } else {\n      operation = query;\n    }\n\n    // Apply initial bindings in context\n    if (context.has(KeysInitQuery.initialBindings)) {\n      const bindingsFactory = await BindingsFactory\n        .create(this.mediatorMergeBindingsContext, context);\n      operation = materializeOperation(operation, context.get(KeysInitQuery.initialBindings)!, bindingsFactory);\n\n      // Delete the query string from the context, since our initial query might have changed\n      context = context.delete(KeysInitQuery.queryString);\n    }\n\n    return { operation, context };\n  }\n\n  public async optimize(operation: Algebra.Operation, context: IActionContext): Promise<IQueryProcessSequentialOutput> {\n    // Save initial query in context\n    context = context.set(KeysInitQuery.query, operation);\n\n    ({ operation, context } = await this.mediatorOptimizeQueryOperation.mediate({ context, operation }));\n\n    // Save original query in context\n    context = context.set(KeysInitQuery.query, operation);\n\n    return { operation, context };\n  }\n\n  public async evaluate(operation: Algebra.Operation, context: IActionContext): Promise<IQueryOperationResult> {\n    const output = await this.mediatorQueryOperation.mediate({ context, operation });\n    output.context = context;\n    return output;\n  }\n}\n\nexport interface IActorQueryProcessSequentialArgs extends IActorQueryProcessArgs {\n  /**\n   * The context processing combinator\n   */\n  mediatorContextPreprocess: MediatorContextPreprocess;\n  /**\n   * The query parse mediator\n   */\n  mediatorQueryParse: MediatorQueryParse;\n  /**\n   * The query operation optimize mediator\n   */\n  mediatorOptimizeQueryOperation: MediatorOptimizeQueryOperation;\n  /**\n   * The query operation mediator\n   */\n  mediatorQueryOperation: MediatorQueryOperation;\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import type {\n  IActionSparqlSerialize,\n  IActorQueryResultSerializeFixedMediaTypesArgs,\n  IActorQueryResultSerializeOutput,\n} from '@comunica/bus-query-result-serialize';\nimport { ActorQueryResultSerializeFixedMediaTypes } from '@comunica/bus-query-result-serialize';\nimport type {\n  IActionContext,\n  IQueryOperationResultBindings,\n  IQueryOperationResultBoolean,\n  IQueryOperationResultQuads,\n} from '@comunica/types';\nimport { wrap } from 'asynciterator';\nimport * as RdfString from 'rdf-string';\nimport { Readable } from 'readable-stream';\n\n/**\n * A comunica JSON Query Result Serialize Actor.\n */\nexport class ActorQueryResultSerializeJson extends ActorQueryResultSerializeFixedMediaTypes {\n  /**\n   * @param args -\n   *   \\ @defaultNested {{\n   *       \"application/json\": 1.0\n   *     }} mediaTypePriorities\n   *   \\ @defaultNested {{\n   *       \"application/json\": \"https://comunica.linkeddatafragments.org/#results_JSON\"\n   *     }} mediaTypeFormats\n   */\n  public constructor(args: IActorQueryResultSerializeFixedMediaTypesArgs) {\n    super(args);\n  }\n\n  public override async testHandleChecked(action: IActionSparqlSerialize, _context: IActionContext): Promise<boolean> {\n    if (![ 'bindings', 'quads', 'boolean' ].includes(action.type)) {\n      throw new Error('This actor can only handle bindings or quad streams.');\n    }\n    return true;\n  }\n\n  public async runHandle(action: IActionSparqlSerialize, _mediaType: string, _context: IActionContext):\n  Promise<IActorQueryResultSerializeOutput> {\n    const data = new Readable();\n    data._read = () => {\n      // Do nothing\n    };\n\n    if (action.type === 'bindings' || action.type === 'quads') {\n      let stream = action.type === 'bindings' ?\n        wrap((<IQueryOperationResultBindings> action).bindingsStream)\n          .map(element => JSON.stringify(Object.fromEntries([ ...element ]\n            .map(([ key, value ]) => [ key.value, RdfString.termToString(value) ])))) :\n        wrap((<IQueryOperationResultQuads> action).quadStream)\n          .map(element => JSON.stringify(RdfString.quadToStringQuad(element)));\n\n      let empty = true;\n      stream = stream.map((element) => {\n        const ret = `${empty ? '' : ','}\\n${element}`;\n        empty = false;\n        return ret;\n      }).prepend([ '[' ]).append([ '\\n]\\n' ]);\n\n      data.wrap(<any> stream);\n    } else {\n      try {\n        data.push(`${JSON.stringify(await (<IQueryOperationResultBoolean> action).execute())}\\n`);\n        data.push(null);\n      } catch (error: unknown) {\n        setTimeout(() => data.emit('error', error));\n      }\n    }\n\n    return { data };\n  }\n}\n","import type {\n  IActorQueryResultSerializeArgs,\n  IActorQueryResultSerializeOutput,\n  IActionSparqlSerialize,\n} from '@comunica/bus-query-result-serialize';\nimport { ActorQueryResultSerialize } from '@comunica/bus-query-result-serialize';\nimport type {\n  MediatorRdfSerializeHandle,\n  MediatorRdfSerializeMediaTypeFormats,\n  MediatorRdfSerializeMediaTypes,\n} from '@comunica/bus-rdf-serialize';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext, IQueryOperationResultQuads } from '@comunica/types';\n\n/**\n * A comunica RDF Query Result Serialize Actor.\n *\n * It serializes quad streams (for example resulting from a CONSTRUCT query)\n * to an RDF syntax.\n */\nexport class ActorQueryResultSerializeRdf extends ActorQueryResultSerialize\n  implements IActorQueryResultSerializeRdfArgs {\n  public readonly mediatorRdfSerialize: MediatorRdfSerializeHandle;\n  public readonly mediatorMediaTypeCombiner: MediatorRdfSerializeMediaTypes;\n  public readonly mediatorMediaTypeFormatCombiner: MediatorRdfSerializeMediaTypeFormats;\n\n  public constructor(args: IActorQueryResultSerializeRdfArgs) {\n    super(args);\n  }\n\n  public async testHandle(action: IActionSparqlSerialize, mediaType: string, context: IActionContext):\n  Promise<IActorTest> {\n    // Check if we are provided with a quad stream\n    if (action.type !== 'quads') {\n      throw new Error(`Actor ${this.name} can only handle quad streams`);\n    }\n\n    // Check if the given media type can be handled\n    const { mediaTypes } = await this.mediatorMediaTypeCombiner.mediate(\n      { context, mediaTypes: true },\n    );\n    if (!(mediaType in mediaTypes)) {\n      throw new Error(`Actor ${this.name} can not handle media type ${mediaType}. All available types: ${\n        // eslint-disable-next-line ts/restrict-template-expressions\n        Object.keys(mediaTypes)}`);\n    }\n    return true;\n  }\n\n  public async runHandle(action: IActionSparqlSerialize, mediaType: string, context: IActionContext):\n  Promise<IActorQueryResultSerializeOutput> {\n    // Delegate handling to the mediator\n    return (await this.mediatorRdfSerialize.mediate({\n      context,\n      handle: {\n        context,\n        quadStream: (<IQueryOperationResultQuads> action).quadStream,\n      },\n      handleMediaType: mediaType,\n    })).handle;\n  }\n\n  public async testMediaType(_context: IActionContext): Promise<boolean> {\n    return true;\n  }\n\n  public async getMediaTypes(context: IActionContext): Promise<Record<string, number>> {\n    return (await this.mediatorMediaTypeCombiner.mediate({ context, mediaTypes: true })).mediaTypes;\n  }\n\n  public async testMediaTypeFormats(_context: IActionContext): Promise<boolean> {\n    return true;\n  }\n\n  public async getMediaTypeFormats(context: IActionContext): Promise<Record<string, string>> {\n    return (await this.mediatorMediaTypeFormatCombiner.mediate({ context, mediaTypeFormats: true })).mediaTypeFormats;\n  }\n}\n\nexport interface IActorQueryResultSerializeRdfArgs extends IActorQueryResultSerializeArgs {\n  mediatorRdfSerialize: MediatorRdfSerializeHandle;\n  mediatorMediaTypeCombiner: MediatorRdfSerializeMediaTypes;\n  mediatorMediaTypeFormatCombiner: MediatorRdfSerializeMediaTypeFormats;\n}\n","import type {\n  IActionSparqlSerialize,\n  IActorQueryResultSerializeFixedMediaTypesArgs,\n  IActorQueryResultSerializeOutput,\n} from '@comunica/bus-query-result-serialize';\nimport { ActorQueryResultSerializeFixedMediaTypes } from '@comunica/bus-query-result-serialize';\nimport type {\n  IActionContext,\n  IQueryOperationResultBindings,\n  IQueryOperationResultBoolean,\n  IQueryOperationResultQuads,\n  IQueryOperationResultVoid,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { wrap } from 'asynciterator';\nimport { termToString } from 'rdf-string';\nimport { Readable } from 'readable-stream';\n\n/**\n * A comunica Simple Sparql Serialize Actor.\n */\nexport class ActorQueryResultSerializeSimple extends ActorQueryResultSerializeFixedMediaTypes {\n  /**\n   * @param args -\n   *   \\ @defaultNested {{ \"simple\": 0.9 }} mediaTypePriorities\n   *   \\ @defaultNested {{ \"simple\": \"https://comunica.linkeddatafragments.org/#results_simple\" }} mediaTypeFormats\n   */\n  public constructor(args: IActorQueryResultSerializeFixedMediaTypesArgs) {\n    super(args);\n  }\n\n  public override async testHandleChecked(action: IActionSparqlSerialize, _context: IActionContext): Promise<boolean> {\n    if (![ 'bindings', 'quads', 'boolean', 'void' ].includes(action.type)) {\n      throw new Error('This actor can only handle bindings streams, quad streams, booleans, or updates.');\n    }\n    return true;\n  }\n\n  protected static termToString(term: RDF.Term): string {\n    return term.termType === 'Quad' ? termToString(term) : term.value;\n  }\n\n  public async runHandle(action: IActionSparqlSerialize, _mediaType: string, _context: IActionContext):\n  Promise<IActorQueryResultSerializeOutput> {\n    const data = new Readable();\n    if (action.type === 'bindings') {\n      data.wrap(<any> (<IQueryOperationResultBindings>action).bindingsStream.map((bindings: RDF.Bindings) => `${[ ...bindings ].map(\n        ([ key, value ]) => `?${key.value}: ${ActorQueryResultSerializeSimple.termToString(value)}`,\n      ).join('\\n')}\\n\\n`));\n    } else if (action.type === 'quads') {\n      data.wrap(<any> (<IQueryOperationResultQuads>action).quadStream.map(quad =>\n        `subject: ${ActorQueryResultSerializeSimple.termToString(quad.subject)}\\n` +\n        `predicate: ${ActorQueryResultSerializeSimple.termToString(quad.predicate)}\\n` +\n        `object: ${ActorQueryResultSerializeSimple.termToString(quad.object)}\\n` +\n        `graph: ${ActorQueryResultSerializeSimple.termToString(quad.graph)}\\n\\n`));\n    } else {\n      data.wrap(<any> wrap(\n        action.type === 'boolean' ?\n            (<IQueryOperationResultBoolean> action).execute().then(value => [ `${value}\\n` ]) :\n            (<IQueryOperationResultVoid>action).execute().then(() => [ 'ok\\n' ]),\n      ));\n    }\n\n    return { data };\n  }\n}\n","import type {\n  IActionSparqlSerialize,\n  IActorQueryResultSerializeFixedMediaTypesArgs,\n  IActorQueryResultSerializeOutput,\n} from '@comunica/bus-query-result-serialize';\nimport {\n  ActorQueryResultSerializeFixedMediaTypes,\n} from '@comunica/bus-query-result-serialize';\nimport type { Bindings, IActionContext, IQueryOperationResultBindings } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { Readable } from 'readable-stream';\n\n/**\n * A comunica SPARQL CSV Query Result Serialize Actor.\n */\nexport class ActorQueryResultSerializeSparqlCsv extends ActorQueryResultSerializeFixedMediaTypes {\n  /**\n   * @param args -\n   *   \\ @defaultNested {{\n   *       \"text/csv\": 0.75\n   *     }} mediaTypePriorities\n   *   \\ @defaultNested {{\n   *       \"text/csv\": \"http://www.w3.org/ns/formats/SPARQL_Results_CSV\"\n   *     }} mediaTypeFormats\n   */\n  public constructor(args: IActorQueryResultSerializeFixedMediaTypesArgs) {\n    super(args);\n  }\n\n  /**\n   * Converts an RDF term to its CSV representation.\n   * @param {RDF.Term} value An RDF term.\n   * @return {string} A string representation of the given value.\n   */\n  public static bindingToCsvBindings(value?: RDF.Term): string {\n    if (!value) {\n      return '';\n    }\n\n    let stringValue = value.value;\n\n    if (value.termType === 'Literal') {\n      // This is a lossy representation, since language and datatype are not encoded in here.\n      stringValue = `${stringValue}`;\n    } else if (value.termType === 'BlankNode') {\n      stringValue = `_:${stringValue}`;\n    } else if (value.termType === 'Quad') {\n      let object = ActorQueryResultSerializeSparqlCsv.bindingToCsvBindings(value.object);\n      if (value.object.termType === 'Literal') {\n        // If object is a literal, it must be put in quotes, and internal quotes must be escaped\n        object = `\"${object.replaceAll('\"', '\"\"')}\"`;\n      }\n      stringValue = `<< ${ActorQueryResultSerializeSparqlCsv.bindingToCsvBindings(value.subject)} ${ActorQueryResultSerializeSparqlCsv.bindingToCsvBindings(value.predicate)} ${object} >>`;\n    } else {\n      stringValue = `<${stringValue}>`;\n    }\n\n    // If a value contains certain characters, put it between double quotes\n    if (/[\",\\n\\r]/u.test(stringValue)) {\n      // Within quote strings, \" is written using a pair of quotation marks \"\".\n      stringValue = `\"${stringValue.replaceAll('\"', '\"\"')}\"`;\n    }\n\n    return stringValue;\n  }\n\n  public override async testHandleChecked(action: IActionSparqlSerialize, _context: IActionContext): Promise<boolean> {\n    if (action.type !== 'bindings') {\n      throw new Error('This actor can only handle bindings streams.');\n    }\n    return true;\n  }\n\n  public async runHandle(action: IActionSparqlSerialize, _mediaType: string | undefined, _context: IActionContext):\n  Promise<IActorQueryResultSerializeOutput> {\n    const bindingsAction = <IQueryOperationResultBindings> action;\n\n    const data = new Readable();\n\n    const metadata = await bindingsAction.metadata();\n\n    // Write head\n    data.push(`${metadata.variables.map(variable => variable.value).join(',')}\\r\\n`);\n\n    // Write body\n    data.wrap(<any> bindingsAction.bindingsStream.map((bindings: Bindings) => `${metadata.variables\n        .map(key => ActorQueryResultSerializeSparqlCsv.bindingToCsvBindings(bindings.get(key)))\n        .join(',')}\\r\\n`));\n\n    return { data };\n  }\n}\n","import type { IActionHttp, IActorHttpOutput } from '@comunica/bus-http';\nimport type { ActorHttpInvalidateListenable } from '@comunica/bus-http-invalidate';\nimport type { Actor, IActionObserverArgs, IActorTest } from '@comunica/core';\nimport { ActionObserver } from '@comunica/core';\n\n/**\n * Observes HTTP actions, and maintains a counter of the number of requests.\n */\nexport class ActionObserverHttp extends ActionObserver<IActionHttp, IActorHttpOutput> {\n  public readonly httpInvalidator: ActorHttpInvalidateListenable;\n  public requests = 0;\n\n  /* eslint-disable max-len */\n  /**\n   * @param args - @defaultNested {<npmd:@comunica/bus-http/^3.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus>} bus\n   */\n  public constructor(args: IActionObserverHttpArgs) {\n    super(args);\n    this.bus.subscribeObserver(this);\n    this.httpInvalidator.addInvalidateListener(() => {\n      this.requests = 0;\n    });\n  }\n  /* eslint-enable max-len */\n\n  public onRun(\n    _actor: Actor<IActionHttp, IActorTest, IActorHttpOutput>,\n    _action: IActionHttp,\n    _output: Promise<IActorHttpOutput>,\n  ): void {\n    this.requests++;\n  }\n}\n\nexport interface IActionObserverHttpArgs extends IActionObserverArgs<IActionHttp, IActorHttpOutput> {\n  /* eslint-disable max-len */\n  /**\n   * An actor that listens to HTTP invalidation events\n   * @default {<default_invalidator> a <npmd:@comunica/bus-http-invalidate/^3.0.0/components/ActorHttpInvalidateListenable.jsonld#ActorHttpInvalidateListenable>}\n   */\n  httpInvalidator: ActorHttpInvalidateListenable;\n  /* eslint-enable max-len */\n}\n","import type {\n  IActionSparqlSerialize,\n  IActorQueryResultSerializeFixedMediaTypesArgs,\n  IActorQueryResultSerializeOutput,\n} from '@comunica/bus-query-result-serialize';\nimport { ActorQueryResultSerializeFixedMediaTypes } from '@comunica/bus-query-result-serialize';\nimport type {\n  IActionContext,\n  IQueryOperationResultBindings,\n  IQueryOperationResultBoolean,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { wrap } from 'asynciterator';\nimport { Readable } from 'readable-stream';\nimport type { ActionObserverHttp } from './ActionObserverHttp';\n\n/**\n * A comunica sparql-results+xml Serialize Actor.\n */\nexport class ActorQueryResultSerializeSparqlJson extends ActorQueryResultSerializeFixedMediaTypes {\n  private readonly emitMetadata: boolean;\n  public readonly httpObserver: ActionObserverHttp;\n\n  /* eslint-disable max-len */\n  /**\n   * @param args -\n   *   \\ @defaultNested {{\n   *       \"application/sparql-results+json\": 0.8\n   *     }} mediaTypePriorities\n   *   \\ @defaultNested {{\n   *       \"application/sparql-results+json\": \"http://www.w3.org/ns/formats/SPARQL_Results_JSON\"\n   *     }} mediaTypeFormats\n   *   \\ @defaultNested {true} emitMetadata\n   *   \\ @defaultNested {<default_observer> a <caqrssj:components/ActionObserverHttp.jsonld#ActionObserverHttp>} httpObserver\n   */\n  public constructor(args: IActorQueryResultSerializeSparqlJsonArgs) {\n    super(args);\n  }\n  /* eslint-enable max-len */\n\n  /**\n   * Converts an RDF term to its JSON representation.\n   * @param {RDF.Term} value An RDF term.\n   * @return {any} A JSON object.\n   */\n  public static bindingToJsonBindings(value: RDF.Term): any {\n    if (value.termType === 'Literal') {\n      const literal: RDF.Literal = value;\n      const jsonValue: any = { value: literal.value, type: 'literal' };\n      const { language, datatype } = literal;\n      if (language) {\n        jsonValue['xml:lang'] = language;\n      } else if (datatype && datatype.value !== 'http://www.w3.org/2001/XMLSchema#string') {\n        jsonValue.datatype = datatype.value;\n      }\n      return jsonValue;\n    }\n    if (value.termType === 'BlankNode') {\n      return { value: value.value, type: 'bnode' };\n    }\n    if (value.termType === 'Quad') {\n      return {\n        value: {\n          subject: ActorQueryResultSerializeSparqlJson.bindingToJsonBindings(value.subject),\n          predicate: ActorQueryResultSerializeSparqlJson.bindingToJsonBindings(value.predicate),\n          object: ActorQueryResultSerializeSparqlJson.bindingToJsonBindings(value.object),\n        },\n        type: 'triple',\n      };\n    }\n    return { value: value.value, type: 'uri' };\n  }\n\n  public override async testHandleChecked(action: IActionSparqlSerialize, _context: IActionContext): Promise<boolean> {\n    if (![ 'bindings', 'boolean' ].includes(action.type)) {\n      throw new Error('This actor can only handle bindings streams or booleans.');\n    }\n    return true;\n  }\n\n  public async runHandle(action: IActionSparqlSerialize, _mediaType: string | undefined, _context: IActionContext):\n  Promise<IActorQueryResultSerializeOutput> {\n    const data = new Readable();\n    // Write head\n    const head: any = {};\n    if (action.type === 'bindings') {\n      const metadata = await (<IQueryOperationResultBindings> action).metadata();\n      if (metadata.variables.length > 0) {\n        head.vars = metadata.variables.map(variable => variable.value);\n      }\n    }\n    data.push(`{\"head\": ${JSON.stringify(head)},\\n`);\n\n    if (action.type === 'bindings') {\n      const resultStream = (<IQueryOperationResultBindings> action).bindingsStream;\n      data.push('\"results\": { \"bindings\": [\\n');\n\n      let first = true;\n\n      function* end(cb: () => string): Generator<string> {\n        yield cb();\n      }\n\n      // Write bindings\n      data.wrap(\n        // JSON SPARQL results spec does not allow unbound variables and blank node bindings\n        <any> wrap(resultStream).map((bindings) => {\n          const res = `${first ? '' : ',\\n'}${JSON.stringify(Object.fromEntries([ ...bindings ]\n          .map(([ key, value ]) => [ key.value, ActorQueryResultSerializeSparqlJson.bindingToJsonBindings(value) ])))}`;\n          first = false;\n          return res;\n        }).append(wrap(end(() => `\\n]}${this.emitMetadata ? `,\\n\"metadata\": { \"httpRequests\": ${this.httpObserver.requests} }` : ''}}\\n`))),\n      );\n    } else {\n      data.wrap(<any> wrap((<IQueryOperationResultBoolean> action).execute().then(value => [ `\"boolean\":${value}\\n}\\n` ])));\n    }\n\n    return { data };\n  }\n}\n\nexport interface IActorQueryResultSerializeSparqlJsonArgs extends IActorQueryResultSerializeFixedMediaTypesArgs {\n  emitMetadata: boolean;\n  httpObserver: ActionObserverHttp;\n}\n","import type {\n  IActionSparqlSerialize,\n  IActorQueryResultSerializeFixedMediaTypesArgs,\n  IActorQueryResultSerializeOutput,\n} from '@comunica/bus-query-result-serialize';\nimport {\n  ActorQueryResultSerializeFixedMediaTypes,\n} from '@comunica/bus-query-result-serialize';\nimport type { IActionContext, IQueryOperationResultBindings } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { termToString } from 'rdf-string-ttl';\nimport { Readable } from 'readable-stream';\n\n/**\n * A comunica SPARQL TSV Query Result Serialize Actor.\n */\nexport class ActorQueryResultSerializeSparqlTsv extends ActorQueryResultSerializeFixedMediaTypes {\n  /**\n   * @param args -\n   *   \\ @defaultNested {{\n   *       \"text/tab-separated-values\": 0.75\n   *     }} mediaTypePriorities\n   *   \\ @defaultNested {{\n   *       \"text/tab-separated-values\": \"http://www.w3.org/ns/formats/SPARQL_Results_TSV\"\n   *     }} mediaTypeFormats\n   */\n  public constructor(args: IActorQueryResultSerializeFixedMediaTypesArgs) {\n    super(args);\n  }\n\n  /**\n   * Converts an RDF term to its TSV representation.\n   * @param {RDF.Term} value An RDF term.\n   * @return {string} A string representation of the given value.\n   */\n  public static bindingToTsvBindings(value?: RDF.Term): string {\n    if (!value) {\n      return '';\n    }\n\n    // Escape tab, newline and carriage return characters\n    return termToString(value)\n      .replaceAll('\\t', '\\\\t')\n      .replaceAll('\\n', '\\\\n')\n      .replaceAll('\\r', '\\\\r');\n  }\n\n  public override async testHandleChecked(action: IActionSparqlSerialize, _context: IActionContext): Promise<boolean> {\n    if (action.type !== 'bindings') {\n      throw new Error('This actor can only handle bindings streams.');\n    }\n    return true;\n  }\n\n  public async runHandle(action: IActionSparqlSerialize, _mediaType: string | undefined, _context: IActionContext):\n  Promise<IActorQueryResultSerializeOutput> {\n    const bindingsAction = <IQueryOperationResultBindings> action;\n\n    const data = new Readable();\n    // Write head\n    const metadata = await bindingsAction.metadata();\n    data.push(`${metadata.variables.map((variable: RDF.Variable) => variable.value).join('\\t')}\\n`);\n\n    // Write Bindings\n    data.wrap(<any> bindingsAction.bindingsStream.map((bindings: RDF.Bindings) => `${metadata.variables\n      .map((key: RDF.Variable) => ActorQueryResultSerializeSparqlTsv\n        .bindingToTsvBindings(bindings.get(key)))\n      .join('\\t')}\\n`));\n\n    return { data };\n  }\n}\n","import type {\n  IActionSparqlSerialize,\n  IActorQueryResultSerializeFixedMediaTypesArgs,\n  IActorQueryResultSerializeOutput,\n} from '@comunica/bus-query-result-serialize';\nimport { ActorQueryResultSerializeFixedMediaTypes } from '@comunica/bus-query-result-serialize';\nimport type {\n  IActionContext,\n  IQueryOperationResultBindings,\n  IQueryOperationResultBoolean,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { wrap } from 'asynciterator';\nimport { Readable } from 'readable-stream';\nimport { XmlSerializer, type IXmlNode } from './XmlSerializer';\n\n/**\n * A comunica sparql-results+xml Serialize Actor.\n */\nexport class ActorQueryResultSerializeSparqlXml extends ActorQueryResultSerializeFixedMediaTypes {\n  /**\n   * @param args -\n   *   \\ @defaultNested {{\n   *       \"application/sparql-results+xml\": 0.8\n   *     }} mediaTypePriorities\n   *   \\ @defaultNested {{\n   *       \"application/sparql-results+xml\": \"http://www.w3.org/ns/formats/SPARQL_Results_XML\"\n   *     }} mediaTypeFormats\n   */\n  public constructor(args: IActorQueryResultSerializeFixedMediaTypesArgs) {\n    super(args);\n  }\n\n  /**\n   * Converts an RDF term to its object-based XML representation.\n   * @param {RDF.Term} value An RDF term.\n   * @param {string} key A variable name, '?' must be included as a prefix.\n   * @return {IXmlNode} An object-based XML tag.\n   */\n  public static bindingToXmlBindings(value: RDF.Term, key: RDF.Variable): IXmlNode {\n    return { name: 'binding', attributes: { name: key.value }, children: [ this.valueToXmlValue(value) ]};\n  }\n\n  public static valueToXmlValue(value: RDF.Term): IXmlNode {\n    let attributes;\n    switch (value.termType) {\n      case 'Literal':\n        if (value.language) {\n          attributes = { 'xml:lang': value.language };\n        } else if (value.datatype && value.datatype.value !== 'http://www.w3.org/2001/XMLSchema#string') {\n          attributes = { datatype: value.datatype.value };\n        } else {\n          attributes = {};\n        }\n        return { name: 'literal', attributes, children: value.value };\n      case 'BlankNode':\n        return { name: 'bnode', children: value.value };\n      case 'Quad':\n        return {\n          name: 'triple',\n          children: [\n            { name: 'subject', children: [ this.valueToXmlValue(value.subject) ]},\n            { name: 'predicate', children: [ this.valueToXmlValue(value.predicate) ]},\n            { name: 'object', children: [ this.valueToXmlValue(value.object) ]},\n          ],\n        };\n      default:\n        return { name: 'uri', children: value.value };\n    }\n  }\n\n  public override async testHandleChecked(action: IActionSparqlSerialize, _context: IActionContext): Promise<boolean> {\n    if (![ 'bindings', 'boolean' ].includes(action.type)) {\n      throw new Error('This actor can only handle bindings streams or booleans.');\n    }\n    return true;\n  }\n\n  public async runHandle(action: IActionSparqlSerialize, _mediaType: string, _context: IActionContext):\n  Promise<IActorQueryResultSerializeOutput> {\n    const data = new Readable();\n    data._read = () => {\n      // Do nothing\n    };\n\n    const serializer = new XmlSerializer();\n    const metadata = await (<IQueryOperationResultBindings> action).metadata();\n\n    data.push(XmlSerializer.header);\n    data.push(serializer.open('sparql', { xmlns: 'http://www.w3.org/2005/sparql-results#' }));\n    data.push(\n      serializer.serializeNode({\n        name: 'head',\n        children: metadata.variables.map(variable => ({ name: 'variable', attributes: { name: variable.value }})),\n      }),\n    );\n\n    if (action.type === 'bindings') {\n      function* end(): Generator<string, void> {\n        yield serializer.close();\n        yield serializer.close();\n      }\n      data.push(serializer.open('results'));\n      const stream = wrap((<IQueryOperationResultBindings> action).bindingsStream).map(\n        (bindings: RDF.Bindings) => serializer.serializeNode({\n          name: 'result',\n          children: [ ...bindings ].map(\n            ([ key, value ]) => ActorQueryResultSerializeSparqlXml.bindingToXmlBindings(value, key),\n          ),\n        }),\n      ).append(wrap(end()));\n      data.wrap(<any> stream);\n    } else {\n      try {\n        const result = await (<IQueryOperationResultBoolean> action).execute();\n        data.push(serializer.serializeNode({ name: 'boolean', children: result.toString() }));\n        data.push(serializer.close());\n        setTimeout(() => data.push(null));\n      } catch (error: unknown) {\n        setTimeout(() => data.emit('error', error));\n      }\n    }\n\n    return { data };\n  }\n}\n","/**\n * A very simple XML serializer\n */\nexport class XmlSerializer {\n  private readonly stack: string[] = [];\n\n  public static header = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n`;\n\n  public constructor() {}\n\n  /**\n   *\n   * @param name should be a valid XML tag name\n   * @param attributes keys should be valid attribute names\n   */\n  public open(name: string, attributes?: Record<string, string>): string {\n    const res = `${this.identation() + this.formatTag(name, attributes, 'open')}\\n`;\n    this.stack.push(name);\n    return res;\n  }\n\n  public close(): string {\n    const name = this.stack.pop();\n    if (name === undefined) {\n      throw new Error('There is no tag left to close');\n    }\n    return `${this.identation() + this.formatTag(name, {}, 'close')}\\n`;\n  }\n\n  public serializeNode(node: IXmlNode): string {\n    if (node.children === undefined) {\n      return `${this.identation() + this.formatTag(node.name, node.attributes, 'self-closing')}\\n`;\n    }\n    if (typeof node.children === 'string') {\n      return `${this.identation() + this.formatTag(node.name, node.attributes, 'open') + this.escape(node.children) + this.formatTag(node.name, {}, 'close')}\\n`;\n    }\n    const parts = [];\n    parts.push(`${this.identation() + this.formatTag(node.name, node.attributes, 'open')}\\n`);\n    this.stack.push(node.name);\n    for (const child of node.children) {\n      parts.push(this.serializeNode(child));\n    }\n    this.stack.pop();\n    parts.push(`${this.identation() + this.formatTag(node.name, {}, 'close')}\\n`);\n    return parts.join('');\n  }\n\n  private identation(): string {\n    return this.stack.map(_ => '  ').join('');\n  }\n\n  private formatTag(\n    name: string,\n    attributes: Record<string, string> | undefined,\n    state: 'open' | 'close' | 'self-closing',\n  ): string {\n    // eslint-disable-next-line ts/restrict-template-expressions\n    return `<${state === 'close' ? '/' : ''}${name}${Object.entries(attributes ?? {}).map(attr => ` ${attr[0]}=\"${this.escape(attr[1])}\"`)}${state === 'self-closing' ? '/' : ''}>`;\n  }\n\n  private escape(text: string): string {\n    return text.replaceAll(/[\"&'<>]/gu, <(substring: string) => string> ((char: '\"' | '&' | '\\'' | '<' | '>') => {\n      switch (char) {\n        case '<': return '&lt;';\n        case '>': return '&gt;';\n        case '&': return '&amp;';\n        case '\\'': return '&apos;';\n        case '\"': return '&quot;';\n      }\n    }));\n  }\n}\n\nexport interface IXmlNode {\n  name: string;\n  attributes?: Record<string, string>;\n  children?: (IXmlNode[]) | string;\n}\n","import type {\n  IActionSparqlSerialize,\n  IActorQueryResultSerializeFixedMediaTypesArgs,\n  IActorQueryResultSerializeOutput,\n} from '@comunica/bus-query-result-serialize';\nimport { ActorQueryResultSerializeFixedMediaTypes } from '@comunica/bus-query-result-serialize';\nimport type {\n  IActionContext,\n  IQueryOperationResultBindings,\n  IQueryOperationResultQuads,\n} from '@comunica/types';\nimport { wrap } from 'asynciterator';\nimport { Readable } from 'readable-stream';\nimport type { ActionObserverHttp } from './ActionObserverHttp';\n\nconst process: NodeJS.Process = require('process/');\n\n/**\n * Serializes SPARQL results for testing and debugging.\n */\nexport class ActorQueryResultSerializeStats extends ActorQueryResultSerializeFixedMediaTypes {\n  public readonly httpObserver: ActionObserverHttp;\n\n  /* eslint-disable max-len */\n  /**\n   * @param args -\n   *   \\ @defaultNested {{ \"stats\": 0.5 }} mediaTypePriorities\n   *   \\ @defaultNested {{ \"stats\": \"https://comunica.linkeddatafragments.org/#results_stats\" }} mediaTypeFormats\n   *   \\ @defaultNested {<default_observer> a <caqrsst:components/ActionObserverHttp.jsonld#ActionObserverHttp>} httpObserver\n   */\n  public constructor(args: IActorQueryResultSerializeStatsArgs) {\n    super(args);\n  }\n  /* eslint-enable max-len */\n\n  public override async testHandleChecked(action: IActionSparqlSerialize, _context: IActionContext): Promise<boolean> {\n    if (![ 'bindings', 'quads' ].includes(action.type)) {\n      throw new Error('This actor can only handle bindings streams or quad streams.');\n    }\n    return true;\n  }\n\n  public pushHeader(data: Readable): void {\n    const header: string = [ 'Result', 'Delay (ms)', 'HTTP requests',\n    ].join(',');\n    data.push(`${header}\\n`);\n  }\n\n  public createStat(startTime: number, result: number): string {\n    const row: string = [ result, this.delay(startTime), this.httpObserver.requests,\n    ].join(',');\n    return `${row}\\n`;\n  }\n\n  public createFooter(startTime: number): string {\n    const footer: string = [ 'TOTAL', this.delay(startTime), this.httpObserver.requests,\n    ].join(',');\n    return `${footer}\\n`;\n  }\n\n  public async runHandle(action: IActionSparqlSerialize, _mediaType: string, _context: IActionContext):\n  Promise<IActorQueryResultSerializeOutput> {\n    const data = new Readable();\n\n    const resultStream = action.type === 'bindings' ?\n        (<IQueryOperationResultBindings> action).bindingsStream :\n        (<IQueryOperationResultQuads> action).quadStream;\n\n    const startTime = this.now();\n    let result = 1;\n\n    function* end(cb: () => string): Generator<string> {\n      yield cb();\n    }\n    const stream = wrap(resultStream)\n      .map(() => this.createStat(startTime, result++))\n      .append(wrap(end(() => this.createFooter(startTime))));\n\n    this.pushHeader(data);\n    data.wrap(<any> stream);\n\n    return { data };\n  }\n\n  /* istanbul ignore next */\n  public now(): number {\n    // TODO: remove when we will drop support of Node 14\n    if (typeof performance === 'undefined') {\n      const time: [number, number] = process.hrtime();\n      return time[0] * 1_000 + (time[1] / 1_000_000);\n    }\n    return performance.now();\n  }\n\n  public delay(startTime: number): number {\n    return this.now() - startTime;\n  }\n}\n\nexport interface IActorQueryResultSerializeStatsArgs extends IActorQueryResultSerializeFixedMediaTypesArgs {\n  httpObserver: ActionObserverHttp;\n}\n","import type {\n  IActionSparqlSerialize,\n  IActorQueryResultSerializeFixedMediaTypesArgs,\n  IActorQueryResultSerializeOutput,\n} from '@comunica/bus-query-result-serialize';\nimport { ActorQueryResultSerializeFixedMediaTypes } from '@comunica/bus-query-result-serialize';\nimport type {\n  Bindings,\n  IActionContext,\n  IQueryOperationResultBindings,\n  IQueryOperationResultQuads,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport { termToString } from 'rdf-string';\nimport { getTerms, QUAD_TERM_NAMES } from 'rdf-terms';\nimport { Readable } from 'readable-stream';\n\nconst DF = new DataFactory();\nconst QUAD_TERM_NAMES_VARS = QUAD_TERM_NAMES.map(name => DF.variable(name));\n\n/**\n * A comunica Table Sparql Serialize Actor.\n */\nexport class ActorQueryResultSerializeTable extends ActorQueryResultSerializeFixedMediaTypes\n  implements IActorQueryResultSerializeTableArgs {\n  public readonly columnWidth: number;\n  public readonly padding: string;\n\n  /**\n   * @param args -\n   *   \\ @defaultNested {{ \"table\": 0.6 }} mediaTypePriorities\n   *   \\ @defaultNested {{ \"table\": \"https://comunica.linkeddatafragments.org/#results_table\" }} mediaTypeFormats\n   */\n  public constructor(args: IActorQueryResultSerializeTableArgs) {\n    super(args);\n    this.padding = ActorQueryResultSerializeTable.repeat(' ', this.columnWidth);\n  }\n\n  public static repeat(str: string, count: number): string {\n    return str.repeat(count);\n  }\n\n  public override async testHandleChecked(action: IActionSparqlSerialize, _context: IActionContext): Promise<boolean> {\n    if (![ 'bindings', 'quads' ].includes(action.type)) {\n      throw new Error('This actor can only handle bindings or quad streams.');\n    }\n    return true;\n  }\n\n  public termToString(term: RDF.Term): string {\n    return term.termType === 'Quad' ? termToString(term) : term.value;\n  }\n\n  public pad(str: string): string {\n    if (str.length <= this.columnWidth) {\n      return str + this.padding.slice(str.length);\n    }\n    return `${str.slice(0, this.columnWidth - 1)}`;\n  }\n\n  public pushHeader(data: Readable, labels: RDF.Variable[]): void {\n    const header: string = labels.map(label => this.pad(label.value)).join(' ');\n    data.push(`${header}\\n${ActorQueryResultSerializeTable.repeat('-', header.length)}\\n`);\n  }\n\n  public createRow(labels: RDF.Variable[], bindings: Bindings): string {\n    return `${labels\n      .map(label => bindings.has(label) ? this.termToString(bindings.get(label)!) : '')\n      .map(label => this.pad(label))\n      .join(' ')}\\n`;\n  }\n\n  public async runHandle(action: IActionSparqlSerialize, _mediaType: string, _context: IActionContext):\n  Promise<IActorQueryResultSerializeOutput> {\n    const data = new Readable();\n\n    let resultStream: NodeJS.EventEmitter;\n    if (action.type === 'bindings') {\n      resultStream = (<IQueryOperationResultBindings>action).bindingsStream.map(\n        bindings => this.createRow(labels, bindings),\n      );\n      const labels = (await (<IQueryOperationResultBindings>action).metadata()).variables;\n      this.pushHeader(data, labels);\n    } else {\n      resultStream = (<IQueryOperationResultQuads>action).quadStream.map(quad => `${getTerms(quad).map(term => this.pad(this.termToString(term))).join(' ')}\\n`);\n      this.pushHeader(data, QUAD_TERM_NAMES_VARS);\n    }\n    data.wrap(<any> resultStream);\n\n    return { data };\n  }\n}\n\nexport interface IActorQueryResultSerializeTableArgs extends IActorQueryResultSerializeFixedMediaTypesArgs {\n  /**\n   * The table column width in number of characters\n   * @range {integer}\n   * @default {50}\n   */\n  columnWidth: number;\n}\n","import type {\n  IActionSparqlSerialize,\n  IActorQueryResultSerializeFixedMediaTypesArgs,\n  IActorQueryResultSerializeOutput,\n} from '@comunica/bus-query-result-serialize';\nimport { ActorQueryResultSerializeFixedMediaTypes } from '@comunica/bus-query-result-serialize';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport { ActionContext } from '@comunica/core';\nimport type { IQueryOperationResultBindings, BindingsStream, IActionContext } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { Readable } from 'readable-stream';\nimport type { IConverterSettings, ISchema } from 'sparqljson-to-tree';\nimport { Converter } from 'sparqljson-to-tree';\n\n/**\n * A comunica Tree Query Result Serialize Actor.\n */\nexport class ActorQueryResultSerializeTree extends ActorQueryResultSerializeFixedMediaTypes\n  implements IActorQueryResultSerializeFixedMediaTypesArgs {\n  /**\n   * @param args -\n   *   \\ @defaultNested {{ \"tree\": 0.5 }} mediaTypePriorities\n   *   \\ @defaultNested {{ \"tree\": \"https://comunica.linkeddatafragments.org/#results_tree\" }} mediaTypeFormats\n   */\n  public constructor(args: IActorQueryResultSerializeFixedMediaTypesArgs) {\n    super(args);\n  }\n\n  /**\n   *\n   * @param {BindingsStream} bindingsStream\n   * @param context\n   * @param {IConverterSettings} converterSettings\n   * @return {Promise<string>}\n   */\n  public static async bindingsStreamToGraphQl(\n    bindingsStream: BindingsStream,\n    context: IActionContext | Record<string, any> | undefined,\n    converterSettings?: IConverterSettings,\n  ): Promise<any> {\n    const actionContext: IActionContext = ActionContext.ensureActionContext(context);\n    const converter: Converter = new Converter(converterSettings);\n    const schema: ISchema = {\n      singularizeVariables: actionContext.get(KeysInitQuery.graphqlSingularizeVariables) ?? {},\n    };\n\n    return converter.bindingsToTree(await bindingsStream.map((bindings: RDF.Bindings) =>\n      Object.fromEntries([ ...bindings ]\n        .map(([ key, value ]) => [ key.value, value ]))).toArray(), schema);\n  }\n\n  public override async testHandleChecked(action: IActionSparqlSerialize): Promise<boolean> {\n    if (action.type !== 'bindings') {\n      throw new Error('This actor can only handle bindings streams.');\n    }\n    return true;\n  }\n\n  public async runHandle(\n    action: IActionSparqlSerialize,\n    _mediaType: string,\n  ): Promise<IActorQueryResultSerializeOutput> {\n    const data = new Readable();\n    data._read = () => {\n      data._read = () => { /* Do nothing */ };\n      ActorQueryResultSerializeTree.bindingsStreamToGraphQl(\n        (<IQueryOperationResultBindings> action).bindingsStream,\n        action.context,\n        { materializeRdfJsTerms: true },\n      )\n        .then((result: any) => {\n          data.push(JSON.stringify(result, null, '  '));\n          data.push(null);\n        })\n        .catch(error => data.emit('error', error));\n    };\n\n    return { data };\n  }\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorHttp } from '@comunica/bus-http';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type {\n  IActionQuerySourceIdentifyHypermedia,\n  IActorQuerySourceIdentifyHypermediaOutput,\n  IActorQuerySourceIdentifyHypermediaArgs,\n  IActorQuerySourceIdentifyHypermediaTest,\n} from '@comunica/bus-query-source-identify-hypermedia';\nimport {\n  ActorQuerySourceIdentifyHypermedia,\n} from '@comunica/bus-query-source-identify-hypermedia';\nimport { QuerySourceSparql } from './QuerySourceSparql';\n\n/**\n * A comunica SPARQL Query Source Identify Hypermedia Actor.\n */\nexport class ActorQuerySourceIdentifyHypermediaSparql extends ActorQuerySourceIdentifyHypermedia {\n  public readonly mediatorHttp: MediatorHttp;\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n  public readonly checkUrlSuffix: boolean;\n  public readonly forceHttpGet: boolean;\n  public readonly cacheSize: number;\n  public readonly bindMethod: BindMethod;\n  public readonly countTimeout: number;\n\n  public constructor(args: IActorQuerySourceIdentifyHypermediaSparqlArgs) {\n    super(args, 'sparql');\n  }\n\n  public async testMetadata(\n    action: IActionQuerySourceIdentifyHypermedia,\n  ): Promise<IActorQuerySourceIdentifyHypermediaTest> {\n    if (!action.forceSourceType && !action.metadata.sparqlService &&\n      !(this.checkUrlSuffix && action.url.endsWith('/sparql'))) {\n      throw new Error(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql.`);\n    }\n    return { filterFactor: 1 };\n  }\n\n  public async run(action: IActionQuerySourceIdentifyHypermedia): Promise<IActorQuerySourceIdentifyHypermediaOutput> {\n    this.logInfo(action.context, `Identified ${action.url} as sparql source with service URL: ${action.metadata.sparqlService || action.url}`);\n    const source = new QuerySourceSparql(\n      action.forceSourceType ? action.url : action.metadata.sparqlService || action.url,\n      action.context,\n      this.mediatorHttp,\n      this.bindMethod,\n      await BindingsFactory.create(this.mediatorMergeBindingsContext, action.context),\n      this.forceHttpGet,\n      this.cacheSize,\n      this.countTimeout,\n    );\n    return { source };\n  }\n}\n\nexport interface IActorQuerySourceIdentifyHypermediaSparqlArgs extends IActorQuerySourceIdentifyHypermediaArgs {\n  /**\n   * The HTTP mediator\n   */\n  mediatorHttp: MediatorHttp;\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n  /**\n   * If URLs ending with '/sparql' should also be considered SPARQL endpoints.\n   * @default {true}\n   */\n  checkUrlSuffix: boolean;\n  /**\n   * If non-update queries should be sent via HTTP GET instead of POST\n   * @default {false}\n   */\n  forceHttpGet: boolean;\n  /**\n   * The cache size for COUNT queries.\n   * @range {integer}\n   * @default {1024}\n   */\n  cacheSize?: number;\n  /**\n   * The query operation for communicating bindings.\n   * @default {values}\n   */\n  bindMethod: BindMethod;\n  /**\n   * Timeout in ms of how long count queries are allowed to take.\n   * If the timeout is reached, an infinity cardinality is returned.\n   * @default {3000}\n   */\n  countTimeout: number;\n}\n\nexport type BindMethod = 'values' | 'union' | 'filter';\n","import type { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorHttp } from '@comunica/bus-http';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport type {\n  IQuerySource,\n  BindingsStream,\n  IActionContext,\n  FragmentSelectorShape,\n  Bindings,\n  MetadataBindings,\n  IQueryBindingsOptions,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { wrap, TransformIterator } from 'asynciterator';\nimport { SparqlEndpointFetcher } from 'fetch-sparql-endpoint';\nimport { LRUCache } from 'lru-cache';\nimport { DataFactory } from 'rdf-data-factory';\nimport { Algebra, Factory, toSparql, Util } from 'sparqlalgebrajs';\nimport type { BindMethod } from './ActorQuerySourceIdentifyHypermediaSparql';\n\nconst AF = new Factory();\nconst DF = new DataFactory<RDF.BaseQuad>();\nconst VAR_COUNT = DF.variable('count');\nconst COUNT_INFINITY: RDF.QueryResultCardinality = { type: 'estimate', value: Number.POSITIVE_INFINITY };\n\nexport class QuerySourceSparql implements IQuerySource {\n  protected static readonly SELECTOR_SHAPE: FragmentSelectorShape = {\n    type: 'disjunction',\n    children: [\n      {\n        type: 'operation',\n        operation: { operationType: 'type', type: Algebra.types.PROJECT },\n        joinBindings: true,\n      },\n      {\n        type: 'operation',\n        operation: { operationType: 'type', type: Algebra.types.CONSTRUCT },\n      },\n      {\n        type: 'operation',\n        operation: { operationType: 'type', type: Algebra.types.DESCRIBE },\n      },\n      {\n        type: 'operation',\n        operation: { operationType: 'type', type: Algebra.types.ASK },\n      },\n      {\n        type: 'operation',\n        operation: { operationType: 'type', type: Algebra.types.COMPOSITE_UPDATE },\n      },\n    ],\n  };\n\n  public readonly referenceValue: string;\n  private readonly url: string;\n  private readonly context: IActionContext;\n  private readonly mediatorHttp: MediatorHttp;\n  private readonly bindMethod: BindMethod;\n  private readonly countTimeout: number;\n  private readonly bindingsFactory: BindingsFactory;\n\n  private readonly endpointFetcher: SparqlEndpointFetcher;\n  private readonly cache: LRUCache<string, RDF.QueryResultCardinality> | undefined;\n\n  private lastSourceContext: IActionContext | undefined;\n\n  public constructor(\n    url: string,\n    context: IActionContext,\n    mediatorHttp: MediatorHttp,\n    bindMethod: BindMethod,\n    bindingsFactory: BindingsFactory,\n    forceHttpGet: boolean,\n    cacheSize: number,\n    countTimeout: number,\n  ) {\n    this.referenceValue = url;\n    this.url = url;\n    this.context = context;\n    this.mediatorHttp = mediatorHttp;\n    this.bindMethod = bindMethod;\n    this.bindingsFactory = bindingsFactory;\n    this.endpointFetcher = new SparqlEndpointFetcher({\n      method: forceHttpGet ? 'GET' : 'POST',\n      fetch: (input: Request | string, init?: RequestInit) => this.mediatorHttp.mediate(\n        { input, init, context: this.lastSourceContext! },\n      ),\n      prefixVariableQuestionMark: true,\n    });\n    this.cache = cacheSize > 0 ?\n      new LRUCache<string, RDF.QueryResultCardinality>({ max: cacheSize }) :\n      undefined;\n    this.countTimeout = countTimeout;\n  }\n\n  public async getSelectorShape(): Promise<FragmentSelectorShape> {\n    return QuerySourceSparql.SELECTOR_SHAPE;\n  }\n\n  public queryBindings(\n    operationIn: Algebra.Operation,\n    context: IActionContext,\n    options?: IQueryBindingsOptions,\n  ): BindingsStream {\n    // If bindings are passed, modify the operations\n    let operationPromise: Promise<Algebra.Operation>;\n    if (options?.joinBindings) {\n      operationPromise = QuerySourceSparql.addBindingsToOperation(this.bindMethod, operationIn, options.joinBindings);\n    } else {\n      operationPromise = Promise.resolve(operationIn);\n    }\n\n    const bindings: BindingsStream = new TransformIterator(async() => {\n      // Prepare queries\n      const operation = await operationPromise;\n      const variables: RDF.Variable[] = Util.inScopeVariables(operation);\n      const queryString = context.get<string>(KeysInitQuery.queryString);\n      const selectQuery: string = !options?.joinBindings && queryString ?\n        queryString :\n        QuerySourceSparql.operationToSelectQuery(operation, variables);\n\n      return this.queryBindingsRemote(this.url, selectQuery, variables, context);\n    }, { autoStart: false });\n    this.attachMetadata(bindings, context, operationPromise);\n\n    return bindings;\n  }\n\n  public queryQuads(operation: Algebra.Operation, context: IActionContext): AsyncIterator<RDF.Quad> {\n    this.lastSourceContext = this.context.merge(context);\n    const rawStream = this.endpointFetcher.fetchTriples(\n      this.url,\n      context.get(KeysInitQuery.queryString) ?? QuerySourceSparql.operationToQuery(operation),\n    );\n    this.lastSourceContext = undefined;\n    const quads = wrap<any>(rawStream, { autoStart: false, maxBufferSize: Number.POSITIVE_INFINITY });\n    this.attachMetadata(quads, context, Promise.resolve(operation.input));\n    return quads;\n  }\n\n  public queryBoolean(operation: Algebra.Ask, context: IActionContext): Promise<boolean> {\n    this.lastSourceContext = this.context.merge(context);\n    const promise = this.endpointFetcher.fetchAsk(\n      this.url,\n      context.get(KeysInitQuery.queryString) ?? QuerySourceSparql.operationToQuery(operation),\n    );\n    this.lastSourceContext = undefined;\n    return promise;\n  }\n\n  public queryVoid(operation: Algebra.Update, context: IActionContext): Promise<void> {\n    this.lastSourceContext = this.context.merge(context);\n    const promise = this.endpointFetcher.fetchUpdate(\n      this.url,\n      context.get(KeysInitQuery.queryString) ?? QuerySourceSparql.operationToQuery(operation),\n    );\n    this.lastSourceContext = undefined;\n    return promise;\n  }\n\n  protected attachMetadata(\n    target: AsyncIterator<any>,\n    context: IActionContext,\n    operationPromise: Promise<Algebra.Operation>,\n  ): void {\n    // Emit metadata containing the estimated count\n    let variablesCount: RDF.Variable[] = [];\n    // eslint-disable-next-line no-async-promise-executor,ts/no-misused-promises\n    new Promise<RDF.QueryResultCardinality>(async(resolve, reject) => {\n      // Prepare queries\n      let countQuery: string;\n      try {\n        const operation = await operationPromise;\n        variablesCount = Util.inScopeVariables(operation);\n        countQuery = QuerySourceSparql.operationToCountQuery(operation);\n\n        const cachedCardinality = this.cache?.get(countQuery);\n        if (cachedCardinality !== undefined) {\n          return resolve(cachedCardinality);\n        }\n\n        const timeoutHandler = setTimeout(() => resolve(COUNT_INFINITY), this.countTimeout);\n        const bindingsStream: BindingsStream = await this\n          .queryBindingsRemote(this.url, countQuery, [ VAR_COUNT ], context);\n        bindingsStream.on('data', (bindings: Bindings) => {\n          clearTimeout(timeoutHandler);\n          const count = bindings.get(VAR_COUNT);\n          const cardinality: RDF.QueryResultCardinality = { type: 'estimate', value: Number.POSITIVE_INFINITY };\n          if (count) {\n            const cardinalityValue: number = Number.parseInt(count.value, 10);\n            if (!Number.isNaN(cardinalityValue)) {\n              cardinality.type = 'exact';\n              cardinality.value = cardinalityValue;\n              this.cache?.set(countQuery, cardinality);\n            }\n          }\n          return resolve(cardinality);\n        });\n        bindingsStream.on('error', () => {\n          clearTimeout(timeoutHandler);\n          resolve(COUNT_INFINITY);\n        });\n        bindingsStream.on('end', () => {\n          clearTimeout(timeoutHandler);\n          resolve(COUNT_INFINITY);\n        });\n      } catch (error: unknown) {\n        return reject(error);\n      }\n    })\n      .then(cardinality => target.setProperty('metadata', {\n        cardinality,\n        canContainUndefs: false,\n        variables: variablesCount,\n      }))\n      .catch(() => target.setProperty('metadata', {\n        cardinality: COUNT_INFINITY,\n        canContainUndefs: false,\n        variables: variablesCount,\n      }));\n  }\n\n  /**\n   * Create an operation that includes the bindings from the given bindings stream.\n   * @param bindMethod A method for adding bindings to an operation.\n   * @param operation The operation to bind to.\n   * @param addBindings The bindings to add.\n   * @param addBindings.bindings The bindings stream.\n   * @param addBindings.metadata The bindings metadata.\n   */\n  public static async addBindingsToOperation(\n    bindMethod: BindMethod,\n    operation: Algebra.Operation,\n    addBindings: { bindings: BindingsStream; metadata: MetadataBindings },\n  ): Promise<Algebra.Operation> {\n    const bindings = await addBindings.bindings.toArray();\n\n    switch (bindMethod) {\n      case 'values':\n        return AF.createJoin([\n          AF.createValues(\n            addBindings.metadata.variables,\n            bindings.map(binding => Object.fromEntries([ ...binding ]\n              .map(([ key, value ]) => [ `?${key.value}`, <RDF.Literal | RDF.NamedNode> value ]))),\n          ),\n          operation,\n        ], false);\n      case 'union': { throw new Error('Not implemented yet: \"union\" case'); }\n      case 'filter': { throw new Error('Not implemented yet: \"filter\" case'); }\n    }\n  }\n\n  /**\n   * Convert an operation to a select query for this pattern.\n   * @param {Algebra.Operation} operation A query operation.\n   * @param {RDF.Variable[]} variables The variables in scope for the operation.\n   * @return {string} A select query string.\n   */\n  public static operationToSelectQuery(operation: Algebra.Operation, variables: RDF.Variable[]): string {\n    return QuerySourceSparql.operationToQuery(AF.createProject(operation, variables));\n  }\n\n  /**\n   * Convert an operation to a count query for the number of matching triples for this pattern.\n   * @param {Algebra.Operation} operation A query operation.\n   * @return {string} A count query string.\n   */\n  public static operationToCountQuery(operation: Algebra.Operation): string {\n    return QuerySourceSparql.operationToQuery(AF.createProject(\n      AF.createExtend(\n        AF.createGroup(\n          operation,\n          [],\n          [ AF.createBoundAggregate(\n            DF.variable('var0'),\n            'count',\n            AF.createWildcardExpression(),\n            false,\n          ) ],\n        ),\n        DF.variable('count'),\n        AF.createTermExpression(DF.variable('var0')),\n      ),\n      [ DF.variable('count') ],\n    ));\n  }\n\n  /**\n   * Convert an operation to a query for this pattern.\n   * @param {Algebra.Operation} operation A query operation.\n   * @return {string} A query string.\n   */\n  public static operationToQuery(operation: Algebra.Operation): string {\n    return toSparql(operation, { sparqlStar: true });\n  }\n\n  /**\n   * Send a SPARQL query to a SPARQL endpoint and retrieve its bindings as a stream.\n   * @param {string} endpoint A SPARQL endpoint URL.\n   * @param {string} query A SPARQL query string.\n   * @param {RDF.Variable[]} variables The expected variables.\n   * @param {IActionContext} context The source context.\n   * @return {BindingsStream} A stream of bindings.\n   */\n  public async queryBindingsRemote(\n    endpoint: string,\n    query: string,\n    variables: RDF.Variable[],\n    context: IActionContext,\n  ): Promise<BindingsStream> {\n    this.lastSourceContext = this.context.merge(context);\n    const rawStream = await this.endpointFetcher.fetchBindings(endpoint, query);\n    this.lastSourceContext = undefined;\n\n    const it = wrap<any>(rawStream, { autoStart: false, maxBufferSize: Number.POSITIVE_INFINITY })\n      .map<RDF.Bindings>((rawData: Record<string, RDF.Term>) => this.bindingsFactory.bindings(variables\n        .map((variable) => {\n          const value = rawData[`?${variable.value}`];\n          if (!value) {\n            it.emit('error', new Error(`The endpoint ${endpoint} failed to provide a binding for ${variable.value}.`));\n          }\n          return [ variable, value ];\n        })));\n    return it;\n  }\n\n  public toString(): string {\n    return `QuerySourceSparql(${this.url})`;\n  }\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorDereferenceRdf } from '@comunica/bus-dereference-rdf';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport { ActorQuerySourceIdentify } from '@comunica/bus-query-source-identify';\nimport type {\n  IActionQuerySourceIdentify,\n  IActorQuerySourceIdentifyOutput,\n  IActorQuerySourceIdentifyArgs,\n} from '@comunica/bus-query-source-identify';\nimport type { MediatorQuerySourceIdentifyHypermedia } from '@comunica/bus-query-source-identify-hypermedia';\nimport type { MediatorRdfMetadata } from '@comunica/bus-rdf-metadata';\nimport type { MediatorRdfMetadataAccumulate } from '@comunica/bus-rdf-metadata-accumulate';\nimport type { MediatorRdfMetadataExtract } from '@comunica/bus-rdf-metadata-extract';\nimport type { MediatorRdfResolveHypermediaLinks } from '@comunica/bus-rdf-resolve-hypermedia-links';\nimport type { MediatorRdfResolveHypermediaLinksQueue } from '@comunica/bus-rdf-resolve-hypermedia-links-queue';\nimport { KeysQuerySourceIdentify } from '@comunica/context-entries';\nimport { ActionContext } from '@comunica/core';\nimport type { IActorTest } from '@comunica/core';\nimport { QuerySourceHypermedia } from './QuerySourceHypermedia';\n\n/**\n * A comunica Hypermedia Query Source Identify Actor.\n */\nexport class ActorQuerySourceIdentifyHypermedia extends ActorQuerySourceIdentify {\n  public readonly mediatorDereferenceRdf: MediatorDereferenceRdf;\n  public readonly mediatorMetadata: MediatorRdfMetadata;\n  public readonly mediatorMetadataExtract: MediatorRdfMetadataExtract;\n  public readonly mediatorMetadataAccumulate: MediatorRdfMetadataAccumulate;\n  public readonly mediatorQuerySourceIdentifyHypermedia: MediatorQuerySourceIdentifyHypermedia;\n  public readonly mediatorRdfResolveHypermediaLinks: MediatorRdfResolveHypermediaLinks;\n  public readonly mediatorRdfResolveHypermediaLinksQueue: MediatorRdfResolveHypermediaLinksQueue;\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n  public readonly cacheSize: number;\n  public readonly maxIterators: number;\n  public readonly aggregateTraversalStore: boolean;\n\n  public constructor(args: IActorQuerySourceIdentifyHypermediaArgs) {\n    super(args);\n  }\n\n  public async test(action: IActionQuerySourceIdentify): Promise<IActorTest> {\n    if (typeof action.querySourceUnidentified.value !== 'string') {\n      throw new TypeError(`${this.name} requires a single query source with a URL value to be present in the context.`);\n    }\n    return true;\n  }\n\n  public async run(action: IActionQuerySourceIdentify): Promise<IActorQuerySourceIdentifyOutput> {\n    return {\n      querySource: {\n        source: new QuerySourceHypermedia(\n          this.cacheSize,\n          <string> action.querySourceUnidentified.value,\n          action.querySourceUnidentified.type,\n          this.maxIterators,\n          this.aggregateTraversalStore &&\n          Boolean(action.querySourceUnidentified.context?.get(KeysQuerySourceIdentify.traverse)),\n          {\n            mediatorMetadata: this.mediatorMetadata,\n            mediatorMetadataExtract: this.mediatorMetadataExtract,\n            mediatorMetadataAccumulate: this.mediatorMetadataAccumulate,\n            mediatorDereferenceRdf: this.mediatorDereferenceRdf,\n            mediatorQuerySourceIdentifyHypermedia: this.mediatorQuerySourceIdentifyHypermedia,\n            mediatorRdfResolveHypermediaLinks: this.mediatorRdfResolveHypermediaLinks,\n            mediatorRdfResolveHypermediaLinksQueue: this.mediatorRdfResolveHypermediaLinksQueue,\n          },\n          warningMessage => this.logWarn(action.context, warningMessage),\n          await BindingsFactory.create(this.mediatorMergeBindingsContext, action.context),\n        ),\n        context: action.querySourceUnidentified.context ?? new ActionContext(),\n      },\n    };\n  }\n}\n\nexport interface IActorQuerySourceIdentifyHypermediaArgs extends IActorQuerySourceIdentifyArgs {\n  /**\n   * The maximum number of entries in the LRU cache, set to 0 to disable.\n   * @range {integer}\n   * @default {100}\n   */\n  cacheSize: number;\n  /**\n   * The maximum number of links that can be followed in parallel.\n   * @default {64}\n   */\n  maxIterators: number;\n  /**\n   * If all discovered quads across all links from a traversal source should be indexed in an aggregated store,\n   * to speed up later calls.\n   * This only applies to sources annotated with KeysQuerySourceIdentify.traverse.\n   * @default {true}\n   */\n  aggregateTraversalStore: boolean;\n  /**\n   * The RDF dereference mediator\n   */\n  mediatorDereferenceRdf: MediatorDereferenceRdf;\n  /**\n   * The metadata mediator\n   */\n  mediatorMetadata: MediatorRdfMetadata;\n  /**\n   * The metadata extract mediator\n   */\n  mediatorMetadataExtract: MediatorRdfMetadataExtract;\n  /**\n   * The metadata accumulate mediator\n   */\n  mediatorMetadataAccumulate?: MediatorRdfMetadataAccumulate;\n  /**\n   * The hypermedia resolve mediator\n   */\n  mediatorQuerySourceIdentifyHypermedia: MediatorQuerySourceIdentifyHypermedia;\n  /**\n   * The hypermedia links resolve mediator\n   */\n  mediatorRdfResolveHypermediaLinks: MediatorRdfResolveHypermediaLinks;\n  /**\n   * The hypermedia links queue resolve mediator\n   */\n  mediatorRdfResolveHypermediaLinksQueue: MediatorRdfResolveHypermediaLinksQueue;\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import type { ILink } from '@comunica/bus-rdf-resolve-hypermedia-links';\nimport type { ILinkQueue } from '@comunica/bus-rdf-resolve-hypermedia-links-queue';\nimport { MetadataValidationState } from '@comunica/metadata';\nimport type { IQuerySource, IActionContext, MetadataBindings, IQueryBindingsOptions } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator, BufferedIteratorOptions } from 'asynciterator';\nimport { BufferedIterator } from 'asynciterator';\nimport type { Algebra } from 'sparqlalgebrajs';\n\nexport abstract class LinkedRdfSourcesAsyncRdfIterator extends BufferedIterator<RDF.Bindings> {\n  protected readonly operation: Algebra.Operation;\n  protected readonly queryBindingsOptions: IQueryBindingsOptions | undefined;\n  protected readonly context: IActionContext;\n\n  private readonly cacheSize: number;\n  protected readonly firstUrl: string;\n  private readonly maxIterators: number;\n  private readonly sourceStateGetter: SourceStateGetter;\n\n  protected started = false;\n  private readonly currentIterators: AsyncIterator<RDF.Bindings>[] = [];\n  private iteratorsPendingCreation = 0;\n  private iteratorsPendingTermination = 0;\n  // eslint-disable-next-line unicorn/no-useless-undefined\n  private accumulatedMetadata: Promise<MetadataBindings | undefined> = Promise.resolve(undefined);\n  private preflightMetadata: Promise<MetadataBindings> | undefined;\n\n  public constructor(\n    cacheSize: number,\n    operation: Algebra.Operation,\n    queryBindingsOptions: IQueryBindingsOptions | undefined,\n    context: IActionContext,\n    firstUrl: string,\n    maxIterators: number,\n    sourceStateGetter: SourceStateGetter,\n    options?: BufferedIteratorOptions,\n  ) {\n    super({ autoStart: false, ...options });\n    this._reading = false;\n    this.cacheSize = cacheSize;\n    this.operation = operation;\n    this.queryBindingsOptions = queryBindingsOptions;\n    this.context = context;\n    this.firstUrl = firstUrl;\n    this.maxIterators = maxIterators;\n    this.sourceStateGetter = sourceStateGetter;\n\n    if (this.maxIterators <= 0) {\n      throw new Error(`LinkedRdfSourcesAsyncRdfIterator.maxIterators must be larger than zero, but got ${this.maxIterators}`);\n    }\n  }\n\n  /**\n   * Start filling the buffer of this iterator.\n   */\n  public kickstart(): void {\n    if (!this.started) {\n      this._fillBufferAsync();\n    }\n  }\n\n  public override getProperty<P>(propertyName: string, callback?: (value: P) => void): P | undefined {\n    if (propertyName === 'metadata' && !this.started) {\n      // If the iterator has not started yet, forcefully fetch the metadata from the source without starting the\n      // iterator. This way, we keep the iterator lazy.\n      if (!this.preflightMetadata) {\n        this.preflightMetadata = new Promise((resolve, reject) => {\n          this.sourceStateGetter({ url: this.firstUrl }, {})\n            .then((sourceState) => {\n              // Don't pass query options, as we don't want to consume any passed iterators\n              const bindingsStream = sourceState.source.queryBindings(this.operation, this.context);\n              bindingsStream.getProperty('metadata', (metadata: MetadataBindings) => {\n                metadata.state = new MetadataValidationState();\n                bindingsStream.destroy();\n                this.accumulateMetadata(sourceState.metadata, metadata)\n                  .then((accumulatedMetadata) => {\n                    // Also merge fields that were not explicitly accumulated\n                    const returnMetadata = { ...sourceState.metadata, ...metadata, ...accumulatedMetadata };\n                    resolve(returnMetadata);\n                  })\n                  .catch(() => {\n                    resolve({\n                      ...sourceState.metadata,\n                      state: new MetadataValidationState(),\n                    });\n                  });\n              });\n            })\n            .catch(reject);\n        });\n      }\n      this.preflightMetadata\n        .then(metadata => this.setProperty('metadata', metadata))\n        .catch(() => {\n          // Ignore errors\n        });\n    }\n    return super.getProperty(propertyName, callback);\n  }\n\n  protected override _end(destroy?: boolean): void {\n    // Close all running iterators\n    for (const it of this.currentIterators) {\n      it.destroy();\n    }\n\n    super._end(destroy);\n  }\n\n  /**\n   * Get the internal link queue.\n   * The returned instance must always be the same.\n   */\n  public abstract getLinkQueue(): Promise<ILinkQueue>;\n\n  /**\n   * Determine the links to be followed from the current source given its metadata.\n   * @param metadata The metadata of a source.\n   */\n  protected abstract getSourceLinks(metadata: Record<string, any>): Promise<ILink[]>;\n\n  public override _read(count: number, done: () => void): void {\n    if (this.started) {\n      // Read from all current iterators\n      for (const iterator of this.currentIterators) {\n        while (count > 0) {\n          const read = iterator.read();\n          if (read === null) {\n            break;\n          } else {\n            count--;\n            this._push(read);\n          }\n        }\n        if (count <= 0) {\n          break;\n        }\n      }\n\n      // Schedule new iterators if needed\n      if (count >= 0 && this.canStartNewIterator()) {\n        // We can safely ignore skip catching the error, since we are guaranteed to have\n        // successfully got the source for this.firstUrl before.\n        // eslint-disable-next-line ts/no-floating-promises\n        this.sourceStateGetter({ url: this.firstUrl }, {})\n          .then((sourceState) => {\n            this.startIteratorsForNextUrls(sourceState.handledDatasets, false);\n            done();\n          });\n      } else {\n        done();\n      }\n    } else {\n      // The first time this is called, prepare the first source\n      this.started = true;\n\n      // Await the source to be set, and start the source iterator\n      this.sourceStateGetter({ url: this.firstUrl }, {})\n        .then((sourceState) => {\n          this.startIterator(sourceState);\n          done();\n        })\n        // Destroy should be async because it can be called before it is listened to\n        .catch(error => setTimeout(() => this.destroy(error)));\n    }\n  }\n\n  protected canStartNewIterator(): boolean {\n    return (this.currentIterators.length + this.iteratorsPendingCreation + this.iteratorsPendingTermination) <\n      this.maxIterators && (!this.canStartNewIteratorConsiderReadable() || !this.readable);\n  }\n\n  protected canStartNewIteratorConsiderReadable(): boolean {\n    return true;\n  }\n\n  protected areIteratorsRunning(): boolean {\n    return (this.currentIterators.length + this.iteratorsPendingCreation + this.iteratorsPendingTermination) > 0;\n  }\n\n  /**\n   * Append the fields from appendingMetadata into accumulatedMetadata.\n   * @param accumulatedMetadata The fields to append to.\n   * @param appendingMetadata The fields to append.\n   * @protected\n   */\n  protected abstract accumulateMetadata(\n    accumulatedMetadata: MetadataBindings,\n    appendingMetadata: MetadataBindings,\n  ): Promise<MetadataBindings>;\n\n  /**\n   * Start a new iterator for the given source.\n   * Once the iterator is done, it will either determine a new source, or it will close the linked iterator.\n   * @param {ISourceState} startSource The start source state.\n   */\n  protected startIterator(startSource: ISourceState): void {\n    // Delegate the quad pattern query to the given source\n    try {\n      const iterator = startSource.source.queryBindings(this.operation, this.context, this.queryBindingsOptions);\n      this.currentIterators.push(iterator);\n      let receivedEndEvent = false;\n      let receivedMetadata = false;\n\n      // Attach readers to the newly created iterator\n      (<any>iterator)._destination = this;\n      iterator.on('error', (error: Error) => this.destroy(error));\n      iterator.on('readable', () => this._fillBuffer());\n      iterator.on('end', () => {\n        this.currentIterators.splice(this.currentIterators.indexOf(iterator), 1);\n\n        // Indicate that this iterator still needs to flush its next-links.\n        // Without this, the linked iterator could sometimes be closed before next-links are obtained.\n        receivedEndEvent = true;\n        if (!receivedMetadata) {\n          this.iteratorsPendingTermination++;\n        }\n\n        // If the metadata was already received, handle the next URL in the queue\n        if (receivedMetadata) {\n          this.startIteratorsForNextUrls(startSource.handledDatasets, true);\n        }\n      });\n\n      // Listen for the metadata of the source\n      // The metadata property is guaranteed to be set\n      iterator.getProperty('metadata', (metadata: MetadataBindings) => {\n        // Accumulate the metadata object\n        this.accumulatedMetadata = this.accumulatedMetadata\n          .then(previousMetadata => (async() => {\n            if (!previousMetadata) {\n              previousMetadata = startSource.metadata;\n            }\n            return this.accumulateMetadata(previousMetadata, metadata);\n          })()\n            .then((accumulatedMetadata) => {\n              // Also merge fields that were not explicitly accumulated\n              const returnMetadata = { ...startSource.metadata, ...metadata, ...accumulatedMetadata };\n\n              // Create new metadata state\n              returnMetadata.state = new MetadataValidationState();\n\n              // Emit metadata, and invalidate any metadata that was set before\n              this.updateMetadata(returnMetadata);\n\n              // Invalidate any preflight metadata\n              if (this.preflightMetadata) {\n                this.preflightMetadata\n                  .then(metadataIn => metadataIn.state.invalidate())\n                  .catch(() => {\n                    // Ignore errors\n                  });\n              }\n\n              // Determine next urls, which will eventually become a next-next source.\n              this.getSourceLinks(returnMetadata)\n                .then((nextUrls: ILink[]) => Promise.all(nextUrls))\n                .then(async(nextUrls: ILink[]) => {\n                  // Append all next URLs to our queue\n                  const linkQueue = await this.getLinkQueue();\n                  for (const nextUrl of nextUrls) {\n                    linkQueue.push(nextUrl, startSource.link);\n                  }\n\n                  receivedMetadata = true;\n                  if (receivedEndEvent) {\n                    this.iteratorsPendingTermination--;\n                  }\n\n                  this.startIteratorsForNextUrls(startSource.handledDatasets, true);\n                }).catch(error => this.destroy(error));\n\n              return returnMetadata;\n            })).catch((error) => {\n            this.destroy(error);\n            return <MetadataBindings>{};\n          });\n      });\n    } catch (syncError: unknown) {\n      this.destroy(<Error> syncError);\n    }\n  }\n\n  protected updateMetadata(metadataNew: MetadataBindings): void {\n    const metadataToInvalidate = this.getProperty<MetadataBindings>('metadata');\n    this.setProperty('metadata', metadataNew);\n    metadataToInvalidate?.state.invalidate();\n  }\n\n  protected isRunning(): boolean {\n    return !this.done;\n  }\n\n  /**\n   * Check if a next URL is in the queue.\n   * If yes, start a new iterator.\n   * If no, close this iterator.\n   * @param handledDatasets\n   * @param canClose\n   */\n  protected startIteratorsForNextUrls(handledDatasets: Record<string, boolean>, canClose: boolean): void {\n    this.getLinkQueue()\n      .then((linkQueue) => {\n        // Create as many new iterators as possible\n        while (this.canStartNewIterator() && this.isRunning()) {\n          const nextLink = linkQueue.pop();\n          if (nextLink) {\n            this.iteratorsPendingCreation++;\n            this.sourceStateGetter(nextLink, handledDatasets)\n              .then((nextSourceState) => {\n                this.iteratorsPendingCreation--;\n                this.startIterator(nextSourceState);\n              })\n              .catch(error => this.emit('error', error));\n          } else {\n            break;\n          }\n        }\n\n        // Close, only if no other iterators are still running\n        if (canClose && this.isCloseable(linkQueue, true)) {\n          this.close();\n        }\n      })\n      .catch(error => this.destroy(error));\n  }\n\n  protected isCloseable(linkQueue: ILinkQueue, _requireQueueEmpty: boolean): boolean {\n    return linkQueue.isEmpty() && !this.areIteratorsRunning();\n  }\n}\n\n/**\n * The current state of a source.\n * This is needed for following links within a source.\n */\nexport interface ISourceState {\n  /**\n   * The link to this source.\n   */\n  link: ILink;\n  /**\n   * A source.\n   */\n  source: IQuerySource;\n  /**\n   * The source's initial metadata.\n   */\n  metadata: MetadataBindings;\n  /**\n   * All dataset identifiers that have been passed for this source.\n   */\n  handledDatasets: Record<string, boolean>;\n}\n\nexport type SourceStateGetter = (link: ILink, handledDatasets: Record<string, boolean>) => Promise<ISourceState>;\n","import type { MediatorRdfMetadataAccumulate } from '@comunica/bus-rdf-metadata-accumulate';\nimport type { ILink, MediatorRdfResolveHypermediaLinks } from '@comunica/bus-rdf-resolve-hypermedia-links';\nimport type {\n  ILinkQueue,\n  MediatorRdfResolveHypermediaLinksQueue,\n} from '@comunica/bus-rdf-resolve-hypermedia-links-queue';\nimport { KeysQueryOperation } from '@comunica/context-entries';\nimport type { IActionContext, IAggregatedStore, IQueryBindingsOptions, MetadataBindings } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport { Factory } from 'sparqlalgebrajs';\nimport type { SourceStateGetter, ISourceState } from './LinkedRdfSourcesAsyncRdfIterator';\nimport { LinkedRdfSourcesAsyncRdfIterator } from './LinkedRdfSourcesAsyncRdfIterator';\n\nconst DF = new DataFactory<RDF.BaseQuad>();\nconst AF = new Factory();\n\n/**\n * An quad iterator that can iterate over consecutive RDF sources\n * that are determined using the rdf-resolve-hypermedia-links bus.\n *\n * @see LinkedRdfSourcesAsyncRdfIterator\n */\nexport class MediatedLinkedRdfSourcesAsyncRdfIterator extends LinkedRdfSourcesAsyncRdfIterator {\n  private readonly mediatorMetadataAccumulate: MediatorRdfMetadataAccumulate;\n  private readonly mediatorRdfResolveHypermediaLinks: MediatorRdfResolveHypermediaLinks;\n  private readonly mediatorRdfResolveHypermediaLinksQueue: MediatorRdfResolveHypermediaLinksQueue;\n  private readonly forceSourceType?: string;\n  private readonly handledUrls: Record<string, boolean>;\n  private readonly aggregatedStore: IAggregatedStore | undefined;\n  private linkQueue: Promise<ILinkQueue> | undefined;\n  private wasForcefullyClosed = false;\n\n  public constructor(\n    cacheSize: number,\n    operation: Algebra.Operation,\n    queryBindingsOptions: IQueryBindingsOptions | undefined,\n    context: IActionContext,\n    forceSourceType: string | undefined,\n    firstUrl: string,\n    maxIterators: number,\n    sourceStateGetter: SourceStateGetter,\n    aggregatedStore: IAggregatedStore | undefined,\n    mediatorMetadataAccumulate: MediatorRdfMetadataAccumulate,\n    mediatorRdfResolveHypermediaLinks: MediatorRdfResolveHypermediaLinks,\n    mediatorRdfResolveHypermediaLinksQueue: MediatorRdfResolveHypermediaLinksQueue,\n  ) {\n    super(\n      cacheSize,\n      operation,\n      queryBindingsOptions,\n      context,\n      firstUrl,\n      maxIterators,\n      sourceStateGetter,\n      // Buffersize must be infinite for an aggregated store because it must keep filling until there are no more\n      // derived iterators in the aggregated store.\n      aggregatedStore ? { maxBufferSize: Number.POSITIVE_INFINITY } : undefined,\n    );\n    this.forceSourceType = forceSourceType;\n    this.mediatorMetadataAccumulate = mediatorMetadataAccumulate;\n    this.mediatorRdfResolveHypermediaLinks = mediatorRdfResolveHypermediaLinks;\n    this.mediatorRdfResolveHypermediaLinksQueue = mediatorRdfResolveHypermediaLinksQueue;\n    this.handledUrls = { [firstUrl]: true };\n    this.aggregatedStore = aggregatedStore;\n  }\n\n  // Mark the aggregated store as ended once we trigger the closing or destroying of this iterator.\n  // We don't override _end, because that would mean that we have to wait\n  // until the buffer of this iterator must be fully consumed, which will not always be the case.\n\n  public override close(): void {\n    if (!this.aggregatedStore) {\n      super.close();\n      return;\n    }\n\n    this.getLinkQueue()\n      .then((linkQueue) => {\n        if (this.isCloseable(linkQueue, false)) {\n          // Wait a tick before ending the aggregatedStore, to ensure that pending match() calls to it have started.\n          if (this.aggregatedStore) {\n            setTimeout(() => this.aggregatedStore!.end());\n          }\n          super.close();\n        } else {\n          this.wasForcefullyClosed = true;\n        }\n      })\n      .catch(error => super.destroy(error));\n  }\n\n  public override destroy(cause?: Error): void {\n    if (!this.aggregatedStore) {\n      super.destroy(cause);\n      return;\n    }\n\n    this.getLinkQueue()\n      .then((linkQueue) => {\n        if (cause ?? this.isCloseable(linkQueue, false)) {\n          // Wait a tick before ending the aggregatedStore, to ensure that pending match() calls to it have started.\n          if (this.aggregatedStore) {\n            setTimeout(() => this.aggregatedStore!.end());\n          }\n          super.destroy(cause);\n        } else {\n          this.wasForcefullyClosed = true;\n        }\n      })\n      .catch(error => super.destroy(error));\n  }\n\n  protected override isCloseable(linkQueue: ILinkQueue, requireQueueEmpty: boolean): boolean {\n    return (requireQueueEmpty ? linkQueue.isEmpty() : this.wasForcefullyClosed || linkQueue.isEmpty()) &&\n      !this.areIteratorsRunning();\n  }\n\n  protected override canStartNewIterator(): boolean {\n    // Also allow sub-iterators to be started if the aggregated store has at least one running iterator.\n    // We need this because there are cases where these running iterators will be consumed before this linked iterator.\n    return (!this.wasForcefullyClosed &&\n      // eslint-disable-next-line ts/prefer-nullish-coalescing\n      (this.aggregatedStore && this.aggregatedStore.hasRunningIterators())) || super.canStartNewIterator();\n  }\n\n  protected override canStartNewIteratorConsiderReadable(): boolean {\n    return !this.aggregatedStore;\n  }\n\n  protected override isRunning(): boolean {\n    // Same as above\n    // eslint-disable-next-line ts/prefer-nullish-coalescing\n    return (this.aggregatedStore && this.aggregatedStore.hasRunningIterators()) || !this.done;\n  }\n\n  public getLinkQueue(): Promise<ILinkQueue> {\n    if (!this.linkQueue) {\n      this.linkQueue = this.mediatorRdfResolveHypermediaLinksQueue\n        .mediate({ firstUrl: this.firstUrl, context: this.context })\n        .then(result => result.linkQueue);\n    }\n    return this.linkQueue;\n  }\n\n  protected async getSourceLinks(metadata: Record<string, any>): Promise<ILink[]> {\n    try {\n      const { links } = await this.mediatorRdfResolveHypermediaLinks.mediate({ context: this.context, metadata });\n\n      // Filter URLs to avoid cyclic next-page loops\n      return links.filter((link) => {\n        if (this.handledUrls[link.url]) {\n          return false;\n        }\n        this.handledUrls[link.url] = true;\n        return true;\n      });\n    } catch {\n      // No next URLs may be available, for example when we've reached the end of a Hydra next-page sequence.\n      return [];\n    }\n  }\n\n  protected override startIterator(startSource: ISourceState): void {\n    if (this.aggregatedStore && !this.aggregatedStore.containedSources.has(startSource.link.url)) {\n      // A source that has been cached due to earlier query executions may not be part of the aggregated store yet.\n      // In that case, we add all quads from that source to the aggregated store.\n      this.aggregatedStore?.containedSources.add(startSource.link.url);\n      const stream = startSource.source.queryBindings(\n        AF.createPattern(\n          DF.variable('s'),\n          DF.variable('p'),\n          DF.variable('o'),\n          DF.variable('g'),\n        ),\n        this.context.set(KeysQueryOperation.unionDefaultGraph, true),\n      ).map(bindings => DF.quad(\n        bindings.get('s')!,\n        bindings.get('p')!,\n        bindings.get('o')!,\n        bindings.get('g'),\n      ));\n      this.aggregatedStore.import(<RDF.Stream> stream)\n        .on('end', () => {\n          super.startIterator(startSource);\n        });\n    } else {\n      super.startIterator(startSource);\n    }\n  }\n\n  public async accumulateMetadata(\n    accumulatedMetadata: MetadataBindings,\n    appendingMetadata: MetadataBindings,\n  ): Promise<MetadataBindings> {\n    return <MetadataBindings> (await this.mediatorMetadataAccumulate.mediate({\n      mode: 'append',\n      accumulatedMetadata,\n      appendingMetadata,\n      context: this.context,\n    })).metadata;\n  }\n\n  protected override updateMetadata(metadataNew: MetadataBindings): void {\n    super.updateMetadata(metadataNew);\n    this.aggregatedStore?.setBaseMetadata(metadataNew, true);\n  }\n}\n","import { QuerySourceRdfJs } from '@comunica/actor-query-source-identify-rdfjs';\nimport type { BindingsFactory } from '@comunica/bindings-factory';\nimport type { IActorDereferenceRdfOutput, MediatorDereferenceRdf } from '@comunica/bus-dereference-rdf';\nimport type { MediatorQuerySourceIdentifyHypermedia } from '@comunica/bus-query-source-identify-hypermedia';\nimport type { IActorRdfMetadataOutput, MediatorRdfMetadata } from '@comunica/bus-rdf-metadata';\nimport type { MediatorRdfMetadataAccumulate } from '@comunica/bus-rdf-metadata-accumulate';\nimport type { MediatorRdfMetadataExtract } from '@comunica/bus-rdf-metadata-extract';\nimport type { ILink, MediatorRdfResolveHypermediaLinks } from '@comunica/bus-rdf-resolve-hypermedia-links';\nimport type { MediatorRdfResolveHypermediaLinksQueue } from '@comunica/bus-rdf-resolve-hypermedia-links-queue';\nimport { KeysQuerySourceIdentify } from '@comunica/context-entries';\nimport type {\n  BindingsStream,\n  FragmentSelectorShape,\n  IActionContext,\n  IAggregatedStore,\n  IQueryBindingsOptions,\n  IQuerySource,\n  MetadataBindings,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { TransformIterator } from 'asynciterator';\nimport { LRUCache } from 'lru-cache';\nimport { Readable } from 'readable-stream';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport type { ISourceState } from './LinkedRdfSourcesAsyncRdfIterator';\nimport { MediatedLinkedRdfSourcesAsyncRdfIterator } from './MediatedLinkedRdfSourcesAsyncRdfIterator';\nimport { StreamingStoreMetadata } from './StreamingStoreMetadata';\n\nexport class QuerySourceHypermedia implements IQuerySource {\n  public readonly referenceValue: string;\n  public readonly firstUrl: string;\n  public readonly forceSourceType?: string;\n  public readonly aggregateStore: boolean;\n  public readonly mediators: IMediatorArgs;\n  public readonly logWarning: (warningMessage: string) => void;\n  public readonly bindingsFactory: BindingsFactory;\n\n  /**\n   * A cache for source URLs to source states.\n   */\n  public sourcesState: LRUCache<string, Promise<ISourceState>>;\n\n  private readonly cacheSize: number;\n  private readonly maxIterators: number;\n\n  public constructor(\n    cacheSize: number,\n    firstUrl: string,\n    forceSourceType: string | undefined,\n    maxIterators: number,\n    aggregateStore: boolean,\n    mediators: IMediatorArgs,\n    logWarning: (warningMessage: string) => void,\n    bindingsFactory: BindingsFactory,\n  ) {\n    this.referenceValue = firstUrl;\n    this.cacheSize = cacheSize;\n    this.firstUrl = firstUrl;\n    this.forceSourceType = forceSourceType;\n    this.maxIterators = maxIterators;\n    this.mediators = mediators;\n    this.aggregateStore = aggregateStore;\n    this.logWarning = logWarning;\n    this.bindingsFactory = bindingsFactory;\n    this.sourcesState = new LRUCache<string, Promise<ISourceState>>({ max: this.cacheSize });\n  }\n\n  public async getSelectorShape(context: IActionContext): Promise<FragmentSelectorShape> {\n    const source = await this.getSourceCached({ url: this.firstUrl }, {}, context, this.getAggregateStore(context));\n    return source.source.getSelectorShape(context);\n  }\n\n  public queryBindings(\n    operation: Algebra.Operation,\n    context: IActionContext,\n    options?: IQueryBindingsOptions,\n  ): BindingsStream {\n    // Optimized match with aggregated store if enabled and started.\n    const aggregatedStore: IAggregatedStore | undefined = this.getAggregateStore(context);\n    if (aggregatedStore && operation.type === 'pattern' && aggregatedStore.started) {\n      return new QuerySourceRdfJs(aggregatedStore, this.bindingsFactory).queryBindings(operation, context);\n    }\n\n    // Initialize the sources state on first call\n    if (this.sourcesState.size === 0) {\n      this.getSourceCached({ url: this.firstUrl }, {}, context, aggregatedStore)\n        .catch(error => it.destroy(error));\n    }\n\n    const it: MediatedLinkedRdfSourcesAsyncRdfIterator = new MediatedLinkedRdfSourcesAsyncRdfIterator(\n      this.cacheSize,\n      operation,\n      options,\n      context,\n      this.forceSourceType,\n      this.firstUrl,\n      this.maxIterators,\n      (link, handledDatasets) => this.getSourceCached(link, handledDatasets, context, aggregatedStore),\n      aggregatedStore,\n      this.mediators.mediatorMetadataAccumulate,\n      this.mediators.mediatorRdfResolveHypermediaLinks,\n      this.mediators.mediatorRdfResolveHypermediaLinksQueue,\n    );\n    if (aggregatedStore) {\n      aggregatedStore.started = true;\n\n      // Kickstart this iterator when derived iterators are created from the aggregatedStore,\n      // otherwise the traversal process will not start if this iterator is not the first one to be consumed.\n      const listener = (): void => it.kickstart();\n      aggregatedStore.addIteratorCreatedListener(listener);\n      it.on('end', () => aggregatedStore.removeIteratorCreatedListener(listener));\n    }\n\n    return it;\n  }\n\n  public queryQuads(operation: Algebra.Operation, context: IActionContext): AsyncIterator<RDF.Quad> {\n    return new TransformIterator(async() => {\n      const source = await this.getSourceCached({ url: this.firstUrl }, {}, context, this.getAggregateStore(context));\n      return source.source.queryQuads(operation, context);\n    });\n  }\n\n  public async queryBoolean(operation: Algebra.Ask, context: IActionContext): Promise<boolean> {\n    const source = await this.getSourceCached({ url: this.firstUrl }, {}, context, this.getAggregateStore(context));\n    return await source.source.queryBoolean(operation, context);\n  }\n\n  public async queryVoid(operation: Algebra.Update, context: IActionContext): Promise<void> {\n    const source = await this.getSourceCached({ url: this.firstUrl }, {}, context, this.getAggregateStore(context));\n    return await source.source.queryVoid(operation, context);\n  }\n\n  /**\n   * Resolve a source for the given URL.\n   * @param link A source link.\n   * @param handledDatasets A hash of dataset identifiers that have already been handled.\n   * @param context The action context.\n   * @param aggregatedStore An optional aggregated store.\n   */\n  public async getSource(\n    link: ILink,\n    handledDatasets: Record<string, boolean>,\n    context: IActionContext,\n    aggregatedStore: IAggregatedStore | undefined,\n  ): Promise<ISourceState> {\n    // Include context entries from link\n    if (link.context) {\n      context = context.merge(link.context);\n    }\n\n    // Get the RDF representation of the given document\n    let url = link.url;\n    let quads: RDF.Stream;\n    let metadata: Record<string, any>;\n    try {\n      const dereferenceRdfOutput: IActorDereferenceRdfOutput = await this.mediators.mediatorDereferenceRdf\n        .mediate({ context, url });\n      url = dereferenceRdfOutput.url;\n\n      // Determine the metadata\n      const rdfMetadataOutput: IActorRdfMetadataOutput = await this.mediators.mediatorMetadata.mediate(\n        { context, url, quads: dereferenceRdfOutput.data, triples: dereferenceRdfOutput.metadata?.triples },\n      );\n\n      rdfMetadataOutput.data.on('error', () => {\n        // Silence errors in the data stream,\n        // as they will be emitted again in the metadata stream,\n        // and will result in a promise rejection anyways.\n        // If we don't do this, we end up with an unhandled error message\n      });\n\n      metadata = (await this.mediators.mediatorMetadataExtract.mediate({\n        context,\n        url,\n        // The problem appears to be conflicting metadata keys here\n        metadata: rdfMetadataOutput.metadata,\n        headers: dereferenceRdfOutput.headers,\n        requestTime: dereferenceRdfOutput.requestTime,\n      })).metadata;\n      quads = rdfMetadataOutput.data;\n\n      // Optionally filter the resulting data\n      if (link.transform) {\n        quads = await link.transform(quads);\n      }\n    } catch (error: unknown) {\n      // Make sure that dereference errors are only emitted once an actor really needs the read quads\n      // This for example allows SPARQL endpoints that error on service description fetching to still be source-forcible\n      quads = new Readable();\n      quads.read = () => {\n        setTimeout(() => quads.emit('error', error));\n        return null;\n      };\n      ({ metadata } = await this.mediators.mediatorMetadataAccumulate.mediate({ context, mode: 'initialize' }));\n\n      // Log as warning, because the quads above may not always be consumed (e.g. for SPARQL endpoints),\n      // so the user would not be notified of something going wrong otherwise.\n      this.logWarning(`Metadata extraction for ${url} failed: ${(<Error> error).message}`);\n    }\n\n    // Aggregate all discovered quads into a store.\n    aggregatedStore?.setBaseMetadata(<MetadataBindings> metadata, false);\n    aggregatedStore?.containedSources.add(link.url);\n    aggregatedStore?.import(quads);\n\n    // Determine the source\n    const { source, dataset } = await this.mediators.mediatorQuerySourceIdentifyHypermedia.mediate({\n      context,\n      forceSourceType: link.url === this.firstUrl ? this.forceSourceType : undefined,\n      handledDatasets,\n      metadata,\n      quads,\n      url,\n    });\n\n    if (dataset) {\n      // Mark the dataset as applied\n      // This is needed to make sure that things like QPF search forms are only applied once,\n      // and next page links are followed after that.\n      handledDatasets[dataset] = true;\n    }\n\n    return { link, source, metadata: <MetadataBindings> metadata, handledDatasets };\n  }\n\n  /**\n   * Resolve a source for the given URL.\n   * This will first try to retrieve the source from cache.\n   * @param link A source ILink.\n   * @param handledDatasets A hash of dataset identifiers that have already been handled.\n   * @param context The action context.\n   * @param aggregatedStore An optional aggregated store.\n   */\n  protected getSourceCached(\n    link: ILink,\n    handledDatasets: Record<string, boolean>,\n    context: IActionContext,\n    aggregatedStore: IAggregatedStore | undefined,\n  ): Promise<ISourceState> {\n    let source = this.sourcesState.get(link.url);\n    if (source) {\n      return source;\n    }\n    source = this.getSource(link, handledDatasets, context, aggregatedStore);\n    if (link.url === this.firstUrl || aggregatedStore === undefined) {\n      this.sourcesState.set(link.url, source);\n    }\n    return source;\n  }\n\n  public getAggregateStore(context: IActionContext): IAggregatedStore | undefined {\n    let aggregatedStore: IAggregatedStore | undefined;\n    if (this.aggregateStore) {\n      const aggregatedStores: Map<string, IAggregatedStore> | undefined = context\n        .get(KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores);\n      if (aggregatedStores) {\n        aggregatedStore = aggregatedStores.get(this.firstUrl);\n        if (!aggregatedStore) {\n          aggregatedStore = new StreamingStoreMetadata(\n            undefined,\n            async(accumulatedMetadata, appendingMetadata) => <MetadataBindings>\n              (await this.mediators.mediatorMetadataAccumulate.mediate({\n                mode: 'append',\n                accumulatedMetadata,\n                appendingMetadata,\n                context,\n              })).metadata,\n          );\n          aggregatedStores.set(this.firstUrl, aggregatedStore);\n        }\n        return aggregatedStore;\n      }\n    }\n  }\n\n  public toString(): string {\n    return `QuerySourceHypermedia(${this.firstUrl})`;\n  }\n}\n\nexport interface IMediatorArgs {\n  mediatorDereferenceRdf: MediatorDereferenceRdf;\n  mediatorMetadata: MediatorRdfMetadata;\n  mediatorMetadataExtract: MediatorRdfMetadataExtract;\n  mediatorMetadataAccumulate: MediatorRdfMetadataAccumulate;\n  mediatorQuerySourceIdentifyHypermedia: MediatorQuerySourceIdentifyHypermedia;\n  mediatorRdfResolveHypermediaLinks: MediatorRdfResolveHypermediaLinks;\n  mediatorRdfResolveHypermediaLinksQueue: MediatorRdfResolveHypermediaLinksQueue;\n}\n","// eslint-disable-next-line import/no-nodejs-modules\nimport type { EventEmitter } from 'node:events';\nimport { ClosableTransformIterator } from '@comunica/bus-query-operation';\nimport { MetadataValidationState } from '@comunica/metadata';\nimport type { MetadataQuads, IAggregatedStore, MetadataBindings } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { StreamingStore } from 'rdf-streaming-store';\n\n/**\n * A StreamingStore that returns an AsyncIterator with a valid MetadataQuads property.\n */\nexport class StreamingStoreMetadata extends StreamingStore implements IAggregatedStore {\n  public started = false;\n  public containedSources = new Set<string>();\n  public readonly runningIterators: Set<AsyncIterator<RDF.Quad>> = new Set<AsyncIterator<RDF.Quad>>();\n  protected readonly iteratorCreatedListeners: Set<() => void> = new Set();\n  protected readonly metadataAccumulator:\n  (accumulatedMetadata: MetadataBindings, appendingMetadata: MetadataBindings) => Promise<MetadataBindings>;\n\n  protected baseMetadata: MetadataBindings = {\n    state: new MetadataValidationState(),\n    cardinality: { type: 'exact', value: 0 },\n    canContainUndefs: false,\n    variables: [],\n  };\n\n  public constructor(\n    store: RDF.Store | undefined,\n    metadataAccumulator:\n    (accumulatedMetadata: MetadataBindings, appendingMetadata: MetadataBindings) => Promise<MetadataBindings>,\n  ) {\n    super(store);\n    this.metadataAccumulator = metadataAccumulator;\n  }\n\n  public override import(stream: RDF.Stream): EventEmitter {\n    if (!this.ended) {\n      super.import(stream);\n    }\n    return stream;\n  }\n\n  public hasRunningIterators(): boolean {\n    return this.runningIterators.size > 0;\n  }\n\n  public override match(\n    subject?: RDF.Term | null,\n    predicate?: RDF.Term | null,\n    object?: RDF.Term | null,\n    graph?: RDF.Term | null,\n  ): AsyncIterator<RDF.Quad> {\n    // Wrap the raw stream in an AsyncIterator\n    const rawStream = super.match(subject, predicate, object, graph);\n    const iterator = new ClosableTransformIterator<RDF.Quad, RDF.Quad>(\n      <any> rawStream,\n      {\n        autoStart: false,\n        onClose: () => {\n          // Running iterators are deleted once closed or destroyed\n          this.runningIterators.delete(iterator);\n        },\n      },\n    );\n\n    // Expose the metadata property containing the cardinality\n    let count = this.getStore().countQuads(subject!, predicate!, object!, graph!);\n    const metadata: MetadataQuads = {\n      state: new MetadataValidationState(),\n      cardinality: {\n        type: 'estimate',\n        value: count,\n      },\n      canContainUndefs: false,\n    };\n    iterator.setProperty('metadata', metadata);\n    iterator.setProperty('lastCount', count);\n\n    // Every time a new quad is pushed into the iterator, update the metadata\n    rawStream.on('quad', () => {\n      iterator.setProperty('lastCount', ++count);\n      this.updateMetadataState(iterator, count);\n    });\n\n    // Store all running iterators until they close or are destroyed\n    this.runningIterators.add(iterator);\n\n    // Invoke creation listeners\n    for (const listener of this.iteratorCreatedListeners) {\n      listener();\n    }\n\n    return iterator;\n  }\n\n  public setBaseMetadata(metadata: MetadataBindings, updateStates: boolean): void {\n    this.baseMetadata = { ...metadata };\n    this.baseMetadata.cardinality = { type: 'exact', value: 0 };\n\n    if (updateStates) {\n      for (const iterator of this.runningIterators) {\n        const count: number = iterator.getProperty('lastCount')!;\n        this.updateMetadataState(iterator, count);\n      }\n    }\n  }\n\n  protected updateMetadataState(iterator: AsyncIterator<RDF.Quad>, count: number): void {\n    // Append the given cardinality to the base metadata\n    const metadataNew: MetadataBindings = {\n      state: new MetadataValidationState(),\n      cardinality: {\n        type: 'estimate',\n        value: count,\n      },\n      canContainUndefs: false,\n      variables: [],\n    };\n\n    this.metadataAccumulator(this.baseMetadata, metadataNew)\n      .then((accumulatedMetadata) => {\n        accumulatedMetadata.state = new MetadataValidationState();\n\n        // Set the new metadata, and invalidate the previous state\n        const metadataToInvalidate = iterator.getProperty<MetadataQuads>('metadata');\n        iterator.setProperty('metadata', accumulatedMetadata);\n        metadataToInvalidate?.state.invalidate();\n      })\n      .catch(() => {\n        // Void errors\n      });\n  }\n\n  public addIteratorCreatedListener(listener: () => void): void {\n    this.iteratorCreatedListeners.add(listener);\n  }\n\n  public removeIteratorCreatedListener(listener: () => void): void {\n    this.iteratorCreatedListeners.delete(listener);\n  }\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type {\n  IActionQuerySourceIdentify,\n  IActorQuerySourceIdentifyOutput,\n  IActorQuerySourceIdentifyArgs,\n} from '@comunica/bus-query-source-identify';\nimport { ActorQuerySourceIdentify } from '@comunica/bus-query-source-identify';\nimport type { IActorTest } from '@comunica/core';\nimport { ActionContext } from '@comunica/core';\nimport type * as RDF from '@rdfjs/types';\nimport { QuerySourceRdfJs } from './QuerySourceRdfJs';\n\n/**\n * A comunica RDFJS Query Source Identify Actor.\n */\nexport class ActorQuerySourceIdentifyRdfJs extends ActorQuerySourceIdentify {\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorQuerySourceIdentifyRdfJsArgs) {\n    super(args);\n  }\n\n  public async test(action: IActionQuerySourceIdentify): Promise<IActorTest> {\n    const source = action.querySourceUnidentified;\n    if (source.type !== undefined && source.type !== 'rdfjs') {\n      throw new Error(`${this.name} requires a single query source with rdfjs type to be present in the context.`);\n    }\n    if (typeof source.value === 'string' || !('match' in source.value)) {\n      throw new Error(`${this.name} received an invalid rdfjs query source.`);\n    }\n    return true;\n  }\n\n  public async run(action: IActionQuerySourceIdentify): Promise<IActorQuerySourceIdentifyOutput> {\n    return {\n      querySource: {\n        source: new QuerySourceRdfJs(\n          <RDF.Source> action.querySourceUnidentified.value,\n          await BindingsFactory.create(this.mediatorMergeBindingsContext, action.context),\n        ),\n        context: action.querySourceUnidentified.context ?? new ActionContext(),\n      },\n    };\n  }\n}\n\nexport interface IActorQuerySourceIdentifyRdfJsArgs extends IActorQuerySourceIdentifyArgs {\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import type { BindingsFactory } from '@comunica/bindings-factory';\nimport { filterMatchingQuotedQuads, quadsToBindings } from '@comunica/bus-query-source-identify';\nimport { KeysQueryOperation } from '@comunica/context-entries';\nimport { MetadataValidationState } from '@comunica/metadata';\nimport type { IQuerySource, BindingsStream, IActionContext, FragmentSelectorShape } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { AsyncIterator, wrap as wrapAsyncIterator } from 'asynciterator';\nimport { DataFactory } from 'rdf-data-factory';\nimport { someTermsNested, filterTermsNested, someTerms, uniqTerms } from 'rdf-terms';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport { Factory } from 'sparqlalgebrajs';\nimport type { IRdfJsSourceExtended } from './IRdfJsSourceExtended';\n\nconst AF = new Factory();\nconst DF = new DataFactory<RDF.BaseQuad>();\n\nexport class QuerySourceRdfJs implements IQuerySource {\n  protected static readonly SELECTOR_SHAPE: FragmentSelectorShape = {\n    type: 'operation',\n    operation: {\n      operationType: 'pattern',\n      pattern: AF.createPattern(DF.variable('s'), DF.variable('p'), DF.variable('o')),\n    },\n    variablesOptional: [\n      DF.variable('s'),\n      DF.variable('p'),\n      DF.variable('o'),\n    ],\n  };\n\n  public referenceValue: string | RDF.Source;\n  protected readonly source: IRdfJsSourceExtended;\n  private readonly bindingsFactory: BindingsFactory;\n\n  public constructor(source: RDF.Source, bindingsFactory: BindingsFactory) {\n    this.source = source;\n    this.referenceValue = source;\n    this.bindingsFactory = bindingsFactory;\n  }\n\n  public static nullifyVariables(term: RDF.Term | undefined, quotedTripleFiltering: boolean): RDF.Term | undefined {\n    return !term || term.termType === 'Variable' || (!quotedTripleFiltering &&\n      term.termType === 'Quad' && someTermsNested(term, value => value.termType === 'Variable')) ?\n      undefined :\n      term;\n  }\n\n  public static hasDuplicateVariables(pattern: RDF.BaseQuad): boolean {\n    const variables = filterTermsNested(pattern, term => term.termType === 'Variable');\n    return variables.length > 1 && uniqTerms(variables).length < variables.length;\n  }\n\n  public async getSelectorShape(): Promise<FragmentSelectorShape> {\n    return QuerySourceRdfJs.SELECTOR_SHAPE;\n  }\n\n  public queryBindings(operation: Algebra.Operation, context: IActionContext): BindingsStream {\n    if (operation.type !== 'pattern') {\n      throw new Error(`Attempted to pass non-pattern operation '${operation.type}' to QuerySourceRdfJs`);\n    }\n\n    // Check if the source supports quoted triple filtering\n    const quotedTripleFiltering = Boolean(this.source.features?.quotedTripleFiltering);\n\n    // Create an async iterator from the matched quad stream\n    const rawStream = this.source.match(\n      QuerySourceRdfJs.nullifyVariables(operation.subject, quotedTripleFiltering),\n      QuerySourceRdfJs.nullifyVariables(operation.predicate, quotedTripleFiltering),\n      QuerySourceRdfJs.nullifyVariables(operation.object, quotedTripleFiltering),\n      QuerySourceRdfJs.nullifyVariables(operation.graph, quotedTripleFiltering),\n    );\n    let it: AsyncIterator<RDF.Quad> = rawStream instanceof AsyncIterator ?\n      rawStream :\n      wrapAsyncIterator<RDF.Quad>(rawStream, { autoStart: false });\n\n    // Perform post-match-filtering if the source does not support quoted triple filtering.\n    if (!quotedTripleFiltering) {\n      it = filterMatchingQuotedQuads(operation, it);\n    }\n\n    // Determine metadata\n    if (!it.getProperty('metadata')) {\n      this.setMetadata(it, operation)\n        .catch(error => it.destroy(error));\n    }\n\n    return quadsToBindings(\n      it,\n      operation,\n      this.bindingsFactory,\n      Boolean(context.get(KeysQueryOperation.unionDefaultGraph)),\n    );\n  }\n\n  protected async setMetadata(\n    it: AsyncIterator<RDF.Quad>,\n    operation: Algebra.Pattern,\n  ): Promise<void> {\n    // Check if the source supports quoted triple filtering\n    const quotedTripleFiltering = Boolean(this.source.features?.quotedTripleFiltering);\n\n    let cardinality: number;\n    if (this.source.countQuads) {\n      // If the source provides a dedicated method for determining cardinality, use that.\n      cardinality = await this.source.countQuads(\n        QuerySourceRdfJs.nullifyVariables(operation.subject, quotedTripleFiltering),\n        QuerySourceRdfJs.nullifyVariables(operation.predicate, quotedTripleFiltering),\n        QuerySourceRdfJs.nullifyVariables(operation.object, quotedTripleFiltering),\n        QuerySourceRdfJs.nullifyVariables(operation.graph, quotedTripleFiltering),\n      );\n    } else {\n      // Otherwise, fallback to a sub-optimal alternative where we just call match again to count the quads.\n      // WARNING: we can NOT reuse the original data stream here,\n      // because we may lose data elements due to things happening async.\n      let i = 0;\n      cardinality = await new Promise((resolve, reject) => {\n        const matches = this.source.match(\n          QuerySourceRdfJs.nullifyVariables(operation.subject, quotedTripleFiltering),\n          QuerySourceRdfJs.nullifyVariables(operation.predicate, quotedTripleFiltering),\n          QuerySourceRdfJs.nullifyVariables(operation.object, quotedTripleFiltering),\n          QuerySourceRdfJs.nullifyVariables(operation.graph, quotedTripleFiltering),\n        );\n        matches.on('error', reject);\n        matches.on('end', () => resolve(i));\n        matches.on('data', () => i++);\n      });\n    }\n\n    // If `match` would require filtering afterwards, our count will be an over-estimate.\n    const wouldRequirePostFiltering = (!quotedTripleFiltering &&\n        someTerms(operation, term => term.termType === 'Quad')) ||\n      QuerySourceRdfJs.hasDuplicateVariables(operation);\n\n    it.setProperty('metadata', {\n      state: new MetadataValidationState(),\n      cardinality: { type: wouldRequirePostFiltering ? 'estimate' : 'exact', value: cardinality },\n      canContainUndefs: false,\n    });\n  }\n\n  public queryQuads(\n    _operation: Algebra.Operation,\n    _context: IActionContext,\n  ): AsyncIterator<RDF.Quad> {\n    throw new Error('queryQuads is not implemented in QuerySourceQpf');\n  }\n\n  public queryBoolean(\n    _operation: Algebra.Ask,\n    _context: IActionContext,\n  ): Promise<boolean> {\n    throw new Error('queryBoolean is not implemented in QuerySourceQpf');\n  }\n\n  public queryVoid(\n    _operation: Algebra.Update,\n    _context: IActionContext,\n  ): Promise<void> {\n    throw new Error('queryVoid is not implemented in QuerySourceQpf');\n  }\n\n  public toString(): string {\n    return `QuerySourceRdfJs(${this.source.constructor.name})`;\n  }\n}\n","import type { IActionRdfJoinEntriesSort, IActorRdfJoinEntriesSortOutput } from '@comunica/bus-rdf-join-entries-sort';\nimport { ActorRdfJoinEntriesSort } from '@comunica/bus-rdf-join-entries-sort';\nimport type { IActorArgs, IActorTest } from '@comunica/core';\n\n/**\n * An actor that sorts join entries by increasing cardinality.\n */\nexport class ActorRdfJoinEntriesSortCardinality extends ActorRdfJoinEntriesSort {\n  public constructor(\n    args: IActorArgs<IActionRdfJoinEntriesSort, IActorTest, IActorRdfJoinEntriesSortOutput>,\n  ) {\n    super(args);\n  }\n\n  public async test(_action: IActionRdfJoinEntriesSort): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionRdfJoinEntriesSort): Promise<IActorRdfJoinEntriesSortOutput> {\n    const entries = [ ...action.entries ]\n      .sort((entryLeft, entryRight) => entryLeft.metadata.cardinality.value - entryRight.metadata.cardinality.value);\n    return { entries };\n  }\n}\n","import type { IActionRdfJoin, IActorRdfJoinOutputInner, IActorRdfJoinArgs } from '@comunica/bus-rdf-join';\nimport { ActorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type { Bindings, MetadataBindings } from '@comunica/types';\nimport { HashJoin } from 'asyncjoin';\n\n/**\n * A comunica Hash RDF Join Actor.\n */\nexport class ActorRdfJoinHash extends ActorRdfJoin {\n  public constructor(args: IActorRdfJoinArgs) {\n    super(args, {\n      logicalType: 'inner',\n      physicalName: 'hash',\n      limitEntries: 2,\n    });\n  }\n\n  public async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    const metadatas = await ActorRdfJoin.getMetadatas(action.entries);\n    const variables = ActorRdfJoin.overlappingVariables(metadatas);\n    const join = new HashJoin<Bindings, string, Bindings>(\n      action.entries[0].output.bindingsStream,\n      action.entries[1].output.bindingsStream,\n      entry => ActorRdfJoin.hash(entry, variables),\n      <any> ActorRdfJoin.joinBindings,\n    );\n    return {\n      result: {\n        type: 'bindings',\n        bindingsStream: join,\n        metadata: async() => await this.constructResultMetadata(action.entries, metadatas, action.context),\n      },\n    };\n  }\n\n  protected async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n    return {\n      iterations: metadatas[0].cardinality.value + metadatas[1].cardinality.value,\n      persistedItems: metadatas[0].cardinality.value,\n      blockingItems: metadatas[0].cardinality.value,\n      requestTime: requestInitialTimes[0] + metadatas[0].cardinality.value * requestItemTimes[0] +\n        requestInitialTimes[1] + metadatas[1].cardinality.value * requestItemTimes[1],\n    };\n  }\n}\n","import { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport type { IActionRdfJoin, IActorRdfJoinArgs, IActorRdfJoinOutputInner } from '@comunica/bus-rdf-join';\nimport { ActorRdfJoin, ChunkedIterator } from '@comunica/bus-rdf-join';\nimport type { MediatorRdfJoinEntriesSort } from '@comunica/bus-rdf-join-entries-sort';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type {\n  IJoinEntryWithMetadata,\n  IQueryOperationResultBindings,\n  IQuerySourceWrapper,\n  MetadataBindings,\n  IActionContext,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { UnionIterator } from 'asynciterator';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport { Factory } from 'sparqlalgebrajs';\n\nconst AF = new Factory();\n\n/**\n * A comunica Inner Multi Bind Source RDF Join Actor.\n */\nexport class ActorRdfJoinMultiBindSource extends ActorRdfJoin {\n  public readonly selectivityModifier: number;\n  public readonly blockSize: number;\n  public readonly mediatorJoinEntriesSort: MediatorRdfJoinEntriesSort;\n\n  public constructor(args: IActorRdfJoinInnerMultiBindSourceArgs) {\n    super(args, {\n      logicalType: 'inner',\n      physicalName: 'bind-source',\n      canHandleUndefs: true,\n    });\n  }\n\n  public async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    // Order the entries so we can pick the first one (usually the one with the lowest cardinality)\n    const entriesUnsorted = await ActorRdfJoin.getEntriesWithMetadatas(action.entries);\n    const entries = await this.sortJoinEntries(entriesUnsorted, action.context);\n\n    this.logDebug(\n      action.context,\n      'First entry for Bind Join Source: ',\n      () => ({ entry: entries[0].operation, metadata: entries[0].metadata }),\n    );\n\n    // Close the non-smallest streams\n    for (const [ i, element ] of entries.entries()) {\n      if (i !== 0) {\n        element.output.bindingsStream.close();\n      }\n    }\n\n    // Take the stream with the lowest cardinality\n    const smallestStream: IQueryOperationResultBindings = entries[0].output;\n    const smallestMetadata = entries[0].metadata;\n    const remainingEntries = [ ...entries ];\n    remainingEntries.splice(0, 1);\n\n    // Get source for remaining entries (guaranteed thanks to prior check in getJoinCoefficients())\n    const sourceWrapper: IQuerySourceWrapper = ActorQueryOperation.getOperationSource(remainingEntries[0].operation)!;\n\n    // Determine the operation to pass\n    const operation = this.createOperationFromEntries(remainingEntries);\n\n    // Slice the smallest stream into chunks according to the block size, so we avoid blocking too long.\n    const chunkedStreams: AsyncIterator<AsyncIterator<RDF.Bindings>> = new ChunkedIterator(\n      smallestStream.bindingsStream,\n      this.blockSize,\n      { autoStart: false },\n    );\n\n    // For each chunk, pass the query and the bindings to the source for execution\n    const bindingsStream = new UnionIterator(chunkedStreams.map(chunk => sourceWrapper.source.queryBindings(\n      operation,\n      sourceWrapper.context ? action.context.merge(sourceWrapper.context) : action.context,\n      { joinBindings: { bindings: chunk, metadata: smallestMetadata }},\n    )));\n\n    return {\n      result: {\n        type: 'bindings',\n        bindingsStream,\n        metadata: () => this.constructResultMetadata(entries, entries.map(entry => entry.metadata), action.context),\n      },\n      physicalPlanMetadata: {\n        bindIndex: entriesUnsorted.indexOf(entries[0]),\n      },\n    };\n  }\n\n  protected async sortJoinEntries(\n    entries: IJoinEntryWithMetadata[],\n    context: IActionContext,\n  ): Promise<IJoinEntryWithMetadata[]> {\n    entries = await ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort, entries, context);\n\n    // Prioritize entries with modified operations, so these are not re-executed\n    entries = entries.sort((entryLeft, entryRight) => {\n      if (entryLeft.operationModified && !entryRight.operationModified) {\n        return -1;\n      }\n      return 0;\n    });\n\n    return entries;\n  }\n\n  public async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    // Order the entries so we can pick the first one (usually the one with the lowest cardinality)\n    const entries = await this.sortJoinEntries(action.entries\n      .map((entry, i) => ({ ...entry, metadata: metadatas[i] })), action.context);\n    metadatas = entries.map(entry => entry.metadata);\n\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n\n    // Determine first stream and remaining ones\n    const remainingEntries = [ ...entries ];\n    const remainingRequestInitialTimes = [ ...requestInitialTimes ];\n    const remainingRequestItemTimes = [ ...requestItemTimes ];\n    remainingEntries.splice(0, 1);\n    remainingRequestInitialTimes.splice(0, 1);\n    remainingRequestItemTimes.splice(0, 1);\n\n    // Reject binding on operations without sources\n    const sources = remainingEntries.map(entry => ActorQueryOperation.getOperationSource(entry.operation));\n    if (sources.some(source => !source)) {\n      throw new Error(`Actor ${this.name} can not bind on remaining operations without source annotation`);\n    }\n\n    // Reject binding on operations with un-equal sources\n    if (sources.some(source => source !== sources[0])) {\n      throw new Error(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);\n    }\n\n    // Reject if the source can not handle bindings\n    const sourceWrapper: IQuerySourceWrapper = sources[0]!;\n    const testingOperation = this.createOperationFromEntries(remainingEntries);\n    const selectorShape = await sourceWrapper.source.getSelectorShape(action.context);\n    if (!ActorQueryOperation\n      .doesShapeAcceptOperation(selectorShape, testingOperation, { joinBindings: true })) {\n      throw new Error(`Actor ${this.name} detected a source that can not handle passing down join bindings`);\n    }\n\n    // Determine selectivities of smallest entry with all other entries\n    const selectivities = await Promise.all(remainingEntries\n      .map(async entry => (await this.mediatorJoinSelectivity.mediate({\n        entries: [ entries[0], entry ],\n        context: action.context,\n      })).selectivity * this.selectivityModifier));\n\n    // Determine coefficients for remaining entries\n    const cardinalityRemaining = remainingEntries\n      .map((entry, i) => entry.metadata.cardinality.value * selectivities[i])\n      .reduce((sum, element) => sum + element, 0);\n\n    return {\n      iterations: 1,\n      persistedItems: metadatas[0].cardinality.value,\n      blockingItems: metadatas[0].cardinality.value,\n      requestTime: requestInitialTimes[0] + metadatas[0].cardinality.value * requestItemTimes[0] +\n        requestInitialTimes[1] + cardinalityRemaining * requestItemTimes[1],\n    };\n  }\n\n  public createOperationFromEntries(remainingEntries: IJoinEntryWithMetadata[]): Algebra.Operation {\n    if (remainingEntries.length === 1) {\n      return remainingEntries[0].operation;\n    }\n    return AF.createJoin(remainingEntries.map(entry => entry.operation), true);\n  }\n}\n\nexport interface IActorRdfJoinInnerMultiBindSourceArgs extends IActorRdfJoinArgs {\n  /**\n   * Multiplier for selectivity values\n   * @range {double}\n   * @default {0.0001}\n   */\n  selectivityModifier: number;\n  /**\n   * The maximum amount of bindings to send to the source per block.\n   * @default {16}\n   */\n  blockSize: number;\n  /**\n   * The join entries sort mediator\n   */\n  mediatorJoinEntriesSort: MediatorRdfJoinEntriesSort;\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { MediatorQueryOperation } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation, materializeOperation } from '@comunica/bus-query-operation';\nimport type {\n  IActionRdfJoin,\n  IActorRdfJoinOutputInner,\n  IActorRdfJoinArgs,\n} from '@comunica/bus-rdf-join';\nimport { ActorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { MediatorRdfJoinEntriesSort } from '@comunica/bus-rdf-join-entries-sort';\nimport { KeysQueryOperation } from '@comunica/context-entries';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type { Bindings, BindingsStream, IQueryOperationResultBindings, MetadataBindings } from '@comunica/types';\nimport { MultiTransformIterator, TransformIterator, UnionIterator } from 'asynciterator';\nimport { Factory, Algebra, Util } from 'sparqlalgebrajs';\n\n/**\n * A comunica Multi-way Bind RDF Join Actor.\n */\nexport class ActorRdfJoinMultiBind extends ActorRdfJoin {\n  public readonly bindOrder: BindOrder;\n  public readonly selectivityModifier: number;\n  public readonly mediatorJoinEntriesSort: MediatorRdfJoinEntriesSort;\n  public readonly mediatorQueryOperation: MediatorQueryOperation;\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public static readonly FACTORY = new Factory();\n\n  public constructor(args: IActorRdfJoinMultiBindArgs) {\n    super(args, {\n      logicalType: 'inner',\n      physicalName: 'bind',\n      canHandleUndefs: true,\n      isLeaf: false,\n    });\n  }\n\n  /**\n   * Create a new bindings stream that takes every binding of the base stream\n   * and binds it to the remaining patterns, evaluates those patterns, and emits all their bindings.\n   *\n   * @param bindOrder The order in which elements should be bound.\n   * @param baseStream The base stream.\n   * @param operations The operations to bind with each binding of the base stream.\n   * @param operationBinder A callback to retrieve the bindings stream of bound operations.\n   * @param optional If the original bindings should be emitted when the resulting bindings stream is empty.\n   * @return {BindingsStream}\n   */\n  public static createBindStream(\n    bindOrder: BindOrder,\n    baseStream: BindingsStream,\n    operations: Algebra.Operation[],\n    operationBinder: (boundOperations: Algebra.Operation[], operationBindings: Bindings)\n    => Promise<BindingsStream>,\n    optional: boolean,\n    bindingsFactory: BindingsFactory,\n  ): BindingsStream {\n    // Enable auto-start on sub-bindings during depth-first binding for best performance.\n    const autoStartSubBindings = bindOrder === 'depth-first';\n\n    // Create bindings function\n    const binder = (bindings: Bindings): BindingsStream => {\n      // We don't bind the filter because filters are always handled last,\n      // and we need to avoid binding filters of sub-queries, which are to be handled first. (see spec test bind10)\n      const subOperations = operations\n        .map(operation => materializeOperation(operation, bindings, bindingsFactory, { bindFilter: true }));\n      const bindingsMerger = (subBindings: Bindings): Bindings | undefined => subBindings.merge(bindings);\n      return new TransformIterator(async() => (await operationBinder(subOperations, bindings))\n        .transform({ map: bindingsMerger }), { maxBufferSize: 128, autoStart: autoStartSubBindings });\n    };\n\n    // Create an iterator that binds elements from the base stream in different orders\n    switch (bindOrder) {\n      case 'depth-first':\n        return new MultiTransformIterator(baseStream, { autoStart: false, multiTransform: binder, optional });\n      case 'breadth-first':\n        return new UnionIterator(baseStream.transform({\n          map: binder,\n          optional,\n        }), { autoStart: false });\n      default:\n        // eslint-disable-next-line ts/restrict-template-expressions\n        throw new Error(`Received request for unknown bind order: ${bindOrder}`);\n    }\n  }\n\n  public async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, action.context);\n\n    // Order the entries so we can pick the first one (usually the one with the lowest cardinality)\n    const entriesUnsorted = await ActorRdfJoin.getEntriesWithMetadatas(action.entries);\n    const entries = await ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort, entriesUnsorted, action.context);\n\n    this.logDebug(\n      action.context,\n      'First entry for Bind Join: ',\n      () => ({ entry: entries[0].operation, metadata: entries[0].metadata }),\n    );\n\n    // Close the non-smallest streams\n    for (const [ i, element ] of entries.entries()) {\n      if (i !== 0) {\n        element.output.bindingsStream.close();\n      }\n    }\n\n    // Take the stream with the lowest cardinality\n    const smallestStream: IQueryOperationResultBindings = entries[0].output;\n    const remainingEntries = [ ...entries ];\n    remainingEntries.splice(0, 1);\n\n    // Bind the remaining patterns for each binding in the stream\n    const subContext = action.context\n      .set(KeysQueryOperation.joinLeftMetadata, entries[0].metadata)\n      .set(KeysQueryOperation.joinRightMetadatas, remainingEntries.map(entry => entry.metadata));\n    const bindingsStream: BindingsStream = ActorRdfJoinMultiBind.createBindStream(\n      this.bindOrder,\n      smallestStream.bindingsStream,\n      remainingEntries.map(entry => entry.operation),\n      async(operations: Algebra.Operation[], operationBindings: Bindings) => {\n        // Send the materialized patterns to the mediator for recursive join evaluation.\n        const operation = operations.length === 1 ?\n          operations[0] :\n          ActorRdfJoinMultiBind.FACTORY.createJoin(operations);\n        const output = ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate(\n          { operation, context: subContext?.set(KeysQueryOperation.joinBindings, operationBindings) },\n        ));\n        return output.bindingsStream;\n      },\n      false,\n      bindingsFactory,\n    );\n\n    return {\n      result: {\n        type: 'bindings',\n        bindingsStream,\n        metadata: () => this.constructResultMetadata(entries, entries.map(entry => entry.metadata), action.context),\n      },\n      physicalPlanMetadata: {\n        bindIndex: entriesUnsorted.indexOf(entries[0]),\n        bindOperation: entries[0].operation,\n        bindOperationCardinality: entries[0].metadata.cardinality,\n        bindOrder: this.bindOrder,\n      },\n    };\n  }\n\n  public canBindWithOperation(operation: Algebra.Operation): boolean {\n    let valid = true;\n    Util.recurseOperation(operation, {\n      [Algebra.types.EXTEND](): boolean {\n        valid = false;\n        return false;\n      },\n      [Algebra.types.GROUP](): boolean {\n        valid = false;\n        return false;\n      },\n      // [Algebr\n    });\n\n    return valid;\n  }\n\n  public async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    // Order the entries so we can pick the first one (usually the one with the lowest cardinality)\n    const entries = await ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort, action.entries\n      .map((entry, i) => ({ ...entry, metadata: metadatas[i] })), action.context);\n    metadatas = entries.map(entry => entry.metadata);\n\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n\n    // Determine first stream and remaining ones\n    const remainingEntries = [ ...entries ];\n    const remainingRequestInitialTimes = [ ...requestInitialTimes ];\n    const remainingRequestItemTimes = [ ...requestItemTimes ];\n    remainingEntries.splice(0, 1);\n    remainingRequestInitialTimes.splice(0, 1);\n    remainingRequestItemTimes.splice(0, 1);\n\n    // Reject binding on some operation types\n    if (remainingEntries\n      .some(entry => !this.canBindWithOperation(entry.operation))) {\n      throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);\n    }\n\n    // Reject binding on modified operations, since using the output directly would be significantly more efficient.\n    if (remainingEntries.some(entry => entry.operationModified)) {\n      throw new Error(`Actor ${this.name} can not be used over remaining entries with modified operations`);\n    }\n\n    // Determine selectivities of smallest entry with all other entries\n    const selectivities = await Promise.all(remainingEntries\n      .map(async entry => (await this.mediatorJoinSelectivity.mediate({\n        entries: [ entries[0], entry ],\n        context: action.context,\n      })).selectivity * this.selectivityModifier));\n\n    // Determine coefficients for remaining entries\n    const cardinalityRemaining = remainingEntries\n      .map((entry, i) => entry.metadata.cardinality.value * selectivities[i])\n      .reduce((sum, element) => sum + element, 0);\n    const receiveInitialCostRemaining = remainingRequestInitialTimes\n      .reduce((sum, element) => sum + element, 0);\n    const receiveItemCostRemaining = remainingRequestItemTimes\n      .reduce((sum, element) => sum + element, 0);\n\n    return {\n      iterations: metadatas[0].cardinality.value * cardinalityRemaining,\n      persistedItems: 0,\n      blockingItems: 0,\n      requestTime: requestInitialTimes[0] +\n        metadatas[0].cardinality.value * (\n          requestItemTimes[0] +\n          receiveInitialCostRemaining +\n          cardinalityRemaining * receiveItemCostRemaining\n        ),\n    };\n  }\n}\n\nexport interface IActorRdfJoinMultiBindArgs extends IActorRdfJoinArgs {\n  /**\n   * The order in which elements should be bound\n   * @default {depth-first}\n   */\n  bindOrder: BindOrder;\n  /**\n   * Multiplier for selectivity values\n   * @range {double}\n   * @default {0.0001}\n   */\n  selectivityModifier: number;\n  /**\n   * The join entries sort mediator\n   */\n  mediatorJoinEntriesSort: MediatorRdfJoinEntriesSort;\n  /**\n   * The query operation mediator\n   */\n  mediatorQueryOperation: MediatorQueryOperation;\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n\nexport type BindOrder = 'depth-first' | 'breadth-first';\n","import type { IActionRdfJoin, IActorRdfJoinOutputInner, IActorRdfJoinArgs } from '@comunica/bus-rdf-join';\nimport { ActorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport { MetadataValidationState } from '@comunica/metadata';\nimport type { MetadataBindings } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { ArrayIterator } from 'asynciterator';\n\n/**\n * A comunica Multi Empty RDF Join Actor.\n */\nexport class ActorRdfJoinMultiEmpty extends ActorRdfJoin {\n  public constructor(args: IActorRdfJoinArgs) {\n    super(args, {\n      logicalType: 'inner',\n      physicalName: 'multi-empty',\n      canHandleUndefs: true,\n    });\n  }\n\n  public override async test(action: IActionRdfJoin): Promise<IMediatorTypeJoinCoefficients> {\n    if ((await ActorRdfJoin.getMetadatas(action.entries))\n      .every(metadata => ActorRdfJoin.getCardinality(metadata).value > 0)) {\n      throw new Error(`Actor ${this.name} can only join entries where at least one is empty`);\n    }\n    return super.test(action);\n  }\n\n  protected override async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    // Close all entries\n    for (const entry of action.entries) {\n      entry.output.bindingsStream.close();\n    }\n\n    return {\n      result: {\n        bindingsStream: new ArrayIterator<RDF.Bindings>([], { autoStart: false }),\n        metadata: async() => ({\n          state: new MetadataValidationState(),\n          cardinality: { type: 'exact', value: 0 },\n          canContainUndefs: false,\n          variables: ActorRdfJoin.joinVariables(await ActorRdfJoin.getMetadatas(action.entries)),\n        }),\n        type: 'bindings',\n      },\n    };\n  }\n\n  protected async getJoinCoefficients(\n    _action: IActionRdfJoin,\n    _metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    return {\n      iterations: 0,\n      persistedItems: 0,\n      blockingItems: 0,\n      requestTime: 0,\n    };\n  }\n}\n","import { bindingsToString } from '@comunica/bindings-factory';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport type {\n  IActionRdfJoin,\n  IActorRdfJoinArgs,\n  MediatorRdfJoin,\n  IActorRdfJoinOutputInner,\n} from '@comunica/bus-rdf-join';\nimport { ChunkedIterator, ActorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { MediatorRdfJoinEntriesSort } from '@comunica/bus-rdf-join-entries-sort';\nimport { KeysRdfJoin } from '@comunica/context-entries';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type {\n  BindingsStream,\n  IActionContext,\n  IJoinEntry,\n  IJoinEntryWithMetadata,\n  IQuerySourceWrapper,\n  MetadataBindings,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { UnionIterator } from 'asynciterator';\nimport { Factory } from 'sparqlalgebrajs';\n\n/**\n * A comunica Inner Multi Smallest Filter Bindings RDF Join Actor.\n */\nexport class ActorRdfJoinMultiSmallestFilterBindings extends ActorRdfJoin {\n  public readonly selectivityModifier: number;\n  public readonly blockSize: number;\n  public readonly mediatorJoinEntriesSort: MediatorRdfJoinEntriesSort;\n  public readonly mediatorJoin: MediatorRdfJoin;\n\n  public static readonly FACTORY = new Factory();\n  public constructor(args: IActorRdfJoinMultiSmallestFilterBindingsArgs) {\n    super(args, {\n      logicalType: 'inner',\n      physicalName: 'multi-smallest-filter-bindings',\n      limitEntries: 2,\n      limitEntriesMin: true,\n      isLeaf: false,\n    });\n  }\n\n  /**\n   * Order the given join entries using the join-entries-sort bus.\n   * @param {IJoinEntryWithMetadata[]} entries An array of join entries.\n   * @param context The action context.\n   * @return {IJoinEntryWithMetadata[]} The sorted join entries.\n   */\n  public async sortJoinEntries(\n    entries: IJoinEntryWithMetadata[],\n    context: IActionContext,\n  ): Promise<{ first: IJoinEntryWithMetadata; second: IJoinEntryWithMetadata; remaining: IJoinEntryWithMetadata[] }> {\n    let { entries: entriesSorted } = await this.mediatorJoinEntriesSort.mediate({ entries, context });\n\n    // Prioritize entries with modified operations, so these are not re-executed\n    entriesSorted = entriesSorted.sort((entryLeft, entryRight) => {\n      if (entryLeft.operationModified && !entryRight.operationModified) {\n        return -1;\n      }\n      return 0;\n    });\n\n    const first = entriesSorted.splice(0, 1)[0];\n\n    // Let second entry first be prioritized for sharing as many variables with first as possible,\n    // then having the fewest variables,\n    // and then having the lowest cardinality.\n    let second: IJoinEntryWithMetadata | undefined;\n    let secondIndex = -1;\n    let secondSharedVariables = 0;\n    for (const [ i, entry ] of entriesSorted.entries()) {\n      const sharedVariables = first.metadata.variables\n        .filter(variableFirst => entry.metadata.variables\n          .some(variableSecond => variableFirst.equals(variableSecond))).length;\n      if (!second || (sharedVariables > secondSharedVariables ||\n        (sharedVariables === secondSharedVariables &&\n          (entry.metadata.variables.length < second.metadata.variables.length ||\n            (entry.metadata.variables.length === second.metadata.variables.length &&\n              entry.metadata.cardinality.value < second.metadata.cardinality.value))))) {\n        second = entry;\n        secondIndex = i;\n        secondSharedVariables = sharedVariables;\n      }\n    }\n\n    if (secondSharedVariables === 0) {\n      throw new Error(`Actor ${this.name} can only join with common variables`);\n    }\n\n    const remaining = entriesSorted;\n    remaining.splice(secondIndex, 1);\n    return { first, second: second!, remaining };\n  }\n\n  public async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    // Determine the two smallest streams by sorting (e.g. via cardinality)\n    const entriesUnsorted = await ActorRdfJoin.getEntriesWithMetadatas([ ...action.entries ]);\n    const { first, second: secondIn, remaining: remainingIn } = await this.sortJoinEntries(\n      entriesUnsorted,\n      action.context,\n    );\n\n    // Clone first stream, because we will use it twice\n    const smallestStream1 = first.output.bindingsStream;\n    first.output.bindingsStream = smallestStream1.clone();\n\n    // Project the first stream on common variables, and filter out duplicates\n    // The common variables array is guaranteed to be non-empty, due to the way the test of this actor is implemented.\n    const commonVariables = first.metadata.variables\n      .filter(variableFirst => secondIn.metadata.variables\n        .some(variableSecond => variableFirst.equals(variableSecond)));\n    const hashes: Record<string, boolean> = {};\n    const smallestStream1Projected: BindingsStream = smallestStream1.clone()\n      .map(binding => binding.filter((value, key) =>\n        commonVariables.some(commonVariable => commonVariable.equals(key))))\n      .filter((binding) => {\n        const hash: string = bindingsToString(binding);\n        return !(hash in hashes) && (hashes[hash] = true);\n      });\n\n    // Slice the first stream into chunks according to the block size, so we avoid blocking too long.\n    const chunkedStreams: AsyncIterator<AsyncIterator<RDF.Bindings>> = new ChunkedIterator(\n      smallestStream1Projected,\n      this.blockSize,\n      { autoStart: false },\n    );\n\n    // Push down bindings of first stream when querying for second stream\n    const sourceWrapper: IQuerySourceWrapper = ActorQueryOperation.getOperationSource(secondIn.operation)!;\n    const secondStream = new UnionIterator(chunkedStreams.map(chunk => sourceWrapper.source.queryBindings(\n      secondIn.operation,\n      sourceWrapper.context ? action.context.merge(sourceWrapper.context) : action.context,\n      { filterBindings: { bindings: chunk, metadata: first.metadata }},\n    )));\n    const second: IJoinEntry = {\n      output: {\n        type: 'bindings',\n        bindingsStream: secondStream,\n        metadata: secondIn.output.metadata,\n      },\n      operation: secondIn.operation,\n      operationModified: true,\n    };\n\n    // Destroy the unused original second stream\n    secondIn.output.bindingsStream.destroy();\n\n    // Join the two selected streams\n    const joinedEntry: IJoinEntry = {\n      output: ActorQueryOperation.getSafeBindings(await this.mediatorJoin\n        .mediate({\n          type: action.type,\n          entries: [ first, second ],\n          context: action.context.set(KeysRdfJoin.lastPhysicalJoin, this.physicalName),\n        })),\n      operation: ActorRdfJoinMultiSmallestFilterBindings.FACTORY\n        .createJoin([ first.operation, second.operation ], false),\n      operationModified: true,\n    };\n\n    // And then join the result with the remaining streams\n    const remaining: IJoinEntry[] = remainingIn;\n    remaining.unshift(joinedEntry);\n\n    return {\n      result: await this.mediatorJoin.mediate({\n        type: action.type,\n        entries: remaining,\n        context: action.context,\n      }),\n      physicalPlanMetadata: {\n        firstIndex: entriesUnsorted.indexOf(first),\n        secondIndex: entriesUnsorted.indexOf(secondIn),\n      },\n    };\n  }\n\n  public async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    // Avoid infinite recursion\n    if (action.context.get(KeysRdfJoin.lastPhysicalJoin) === this.physicalName) {\n      throw new Error(`Actor ${this.name} can not be called recursively`);\n    }\n\n    metadatas = [ ...metadatas ];\n    // Determine the two smallest streams by sorting (e.g. via cardinality)\n    const { first, second, remaining } = await this.sortJoinEntries(action.entries\n      .map((entry, i) => ({ ...entry, metadata: metadatas[i] })), action.context);\n\n    // Only pass if the second entry accepts filterBindings\n    const sourceWrapper: IQuerySourceWrapper | undefined = ActorQueryOperation.getOperationSource(second.operation);\n    if (!sourceWrapper) {\n      throw new Error(`Actor ${this.name} can only process if entries[1] has a source`);\n    }\n    const testingOperation = second.operation;\n    const selectorShape = await sourceWrapper.source.getSelectorShape(action.context);\n    if (!ActorQueryOperation\n      .doesShapeAcceptOperation(selectorShape, testingOperation, { filterBindings: true })) {\n      throw new Error(`Actor ${this.name} can only process if entries[1] accept filterBindings`);\n    }\n\n    // Determine cost coefficients\n    metadatas = [ first.metadata, second.metadata, ...remaining.map(remain => remain.metadata) ];\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n    const { selectivity } = await this.mediatorJoinSelectivity.mediate({\n      entries: [ first, second ],\n      context: action.context,\n    });\n    const cardinalityRemaining = remaining\n      .reduce((mul, remain) => mul * remain.metadata.cardinality.value * this.selectivityModifier, 1);\n\n    return {\n      iterations: selectivity * this.selectivityModifier *\n        second.metadata.cardinality.value * cardinalityRemaining,\n      persistedItems: first.metadata.cardinality.value,\n      blockingItems: first.metadata.cardinality.value,\n      requestTime: requestInitialTimes[0] + metadatas[0].cardinality.value * requestItemTimes[0] +\n        requestInitialTimes[1] + cardinalityRemaining * requestItemTimes[1],\n    };\n  }\n}\n\nexport interface IActorRdfJoinMultiSmallestFilterBindingsArgs extends IActorRdfJoinArgs {\n  /**\n   * Multiplier for selectivity values\n   * @range {double}\n   * @default {0.0001}\n   */\n  selectivityModifier: number;\n  /**\n   * The maximum amount of bindings to send to the source per block.\n   * @default {64}\n   */\n  blockSize: number;\n  /**\n   * The join entries sort mediator\n   */\n  mediatorJoinEntriesSort: MediatorRdfJoinEntriesSort;\n  /**\n   * A mediator for joining Bindings streams\n   */\n  mediatorJoin: MediatorRdfJoin;\n}\n","import {\n  ActorQueryOperation,\n} from '@comunica/bus-query-operation';\nimport type {\n  IActionRdfJoin,\n  IActorRdfJoinOutputInner,\n  IActorRdfJoinArgs,\n  MediatorRdfJoin,\n} from '@comunica/bus-rdf-join';\nimport { ActorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { MediatorRdfJoinEntriesSort } from '@comunica/bus-rdf-join-entries-sort';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type { MetadataBindings, IJoinEntry, IActionContext, IJoinEntryWithMetadata } from '@comunica/types';\nimport { Factory } from 'sparqlalgebrajs';\n\n/**\n * A Multi Smallest RDF Join Actor.\n * It accepts 3 or more streams, joins the smallest two, and joins the result with the remaining streams.\n */\nexport class ActorRdfJoinMultiSmallest extends ActorRdfJoin {\n  public readonly mediatorJoinEntriesSort: MediatorRdfJoinEntriesSort;\n  public readonly mediatorJoin: MediatorRdfJoin;\n\n  public static readonly FACTORY = new Factory();\n\n  public constructor(args: IActorRdfJoinMultiSmallestArgs) {\n    super(args, {\n      logicalType: 'inner',\n      physicalName: 'multi-smallest',\n      limitEntries: 3,\n      limitEntriesMin: true,\n      canHandleUndefs: true,\n      isLeaf: false,\n    });\n  }\n\n  /**\n   * Order the given join entries using the join-entries-sort bus.\n   * @param {IJoinEntryWithMetadata[]} entries An array of join entries.\n   * @param context The action context.\n   * @return {IJoinEntryWithMetadata[]} The sorted join entries.\n   */\n  public async sortJoinEntries(\n    entries: IJoinEntryWithMetadata[],\n    context: IActionContext,\n  ): Promise<IJoinEntryWithMetadata[]> {\n    return (await this.mediatorJoinEntriesSort.mediate({ entries, context })).entries;\n  }\n\n  protected async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    // Determine the two smallest streams by sorting (e.g. via cardinality)\n    const entries: IJoinEntry[] = await this.sortJoinEntries(\n      await ActorRdfJoin.getEntriesWithMetadatas([ ...action.entries ]),\n      action.context,\n    );\n    const smallestEntry1 = entries[0];\n    const smallestEntry2 = entries[1];\n    entries.splice(0, 2);\n\n    // Join the two selected streams, and then join the result with the remaining streams\n    const firstEntry: IJoinEntry = {\n      output: ActorQueryOperation.getSafeBindings(await this.mediatorJoin\n        .mediate({ type: action.type, entries: [ smallestEntry1, smallestEntry2 ], context: action.context })),\n      operation: ActorRdfJoinMultiSmallest.FACTORY\n        .createJoin([ smallestEntry1.operation, smallestEntry2.operation ], false),\n    };\n    entries.push(firstEntry);\n    return {\n      result: await this.mediatorJoin.mediate({\n        type: action.type,\n        entries,\n        context: action.context,\n      }),\n    };\n  }\n\n  protected async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    metadatas = [ ...metadatas ];\n    // Determine the two smallest streams by sorting (e.g. via cardinality)\n    const entriesWithMetadata = await this.sortJoinEntries(action.entries\n      .map((entry, i) => ({ ...entry, metadata: metadatas[i] })), action.context);\n    metadatas = entriesWithMetadata.map(entry => entry.metadata);\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n\n    return {\n      iterations: metadatas[0].cardinality.value * metadatas[1].cardinality.value *\n        metadatas.slice(2).reduce((acc, metadata) => acc * metadata.cardinality.value, 1),\n      persistedItems: 0,\n      blockingItems: 0,\n      requestTime: requestInitialTimes[0] + metadatas[0].cardinality.value * requestItemTimes[0] +\n        requestInitialTimes[1] + metadatas[1].cardinality.value * requestItemTimes[1] +\n        metadatas.slice(2).reduce((sum, metadata, i) => sum + requestInitialTimes.slice(2)[i] +\n          metadata.cardinality.value * requestItemTimes.slice(2)[i], 0),\n    };\n  }\n}\n\nexport interface IActorRdfJoinMultiSmallestArgs extends IActorRdfJoinArgs {\n  /**\n   * The join entries sort mediator\n   */\n  mediatorJoinEntriesSort: MediatorRdfJoinEntriesSort;\n  /**\n   * A mediator for joining Bindings streams\n   */\n  mediatorJoin: MediatorRdfJoin;\n}\n","import type { IActionRdfJoin, IActorRdfJoinOutputInner, IActorRdfJoinArgs } from '@comunica/bus-rdf-join';\nimport { ActorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type { Bindings, MetadataBindings } from '@comunica/types';\nimport { NestedLoopJoin } from 'asyncjoin';\n\n/**\n * A comunica NestedLoop RDF Join Actor.\n */\nexport class ActorRdfJoinNestedLoop extends ActorRdfJoin {\n  public constructor(args: IActorRdfJoinArgs) {\n    super(args, {\n      logicalType: 'inner',\n      physicalName: 'nested-loop',\n      limitEntries: 2,\n      canHandleUndefs: true,\n    });\n  }\n\n  protected async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    const join = new NestedLoopJoin<Bindings, Bindings, Bindings>(\n      action.entries[0].output.bindingsStream,\n      action.entries[1].output.bindingsStream,\n      <any> ActorRdfJoin.joinBindings,\n      { autoStart: false },\n    );\n    return {\n      result: {\n        type: 'bindings',\n        bindingsStream: join,\n        metadata: async() => await this.constructResultMetadata(\n          action.entries,\n          await ActorRdfJoin.getMetadatas(action.entries),\n          action.context,\n        ),\n      },\n    };\n  }\n\n  protected async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n    return {\n      iterations: metadatas[0].cardinality.value * metadatas[1].cardinality.value,\n      persistedItems: 0,\n      blockingItems: 0,\n      requestTime: requestInitialTimes[0] + metadatas[0].cardinality.value * requestItemTimes[0] +\n        requestInitialTimes[1] + metadatas[1].cardinality.value * requestItemTimes[1],\n    };\n  }\n}\n","import { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActionRdfJoin, IActorRdfJoinOutputInner, IActorRdfJoinArgs } from '@comunica/bus-rdf-join';\nimport { ActorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport { MetadataValidationState } from '@comunica/metadata';\nimport type * as RDF from '@rdfjs/types';\nimport { ArrayIterator } from 'asynciterator';\n\n/**\n * A comunica None RDF Join Actor.\n */\nexport class ActorRdfJoinNone extends ActorRdfJoin {\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorRdfJoinNoneArgs) {\n    super(args, {\n      logicalType: 'inner',\n      physicalName: 'none',\n      limitEntries: 0,\n    });\n  }\n\n  public override async test(action: IActionRdfJoin): Promise<IMediatorTypeJoinCoefficients> {\n    // Allow joining of one or zero streams\n    if (action.entries.length > 0) {\n      throw new Error(`Actor ${this.name} can only join zero entries`);\n    }\n    return await this.getJoinCoefficients();\n  }\n\n  protected async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, action.context);\n    return {\n      result: {\n        bindingsStream: new ArrayIterator<RDF.Bindings>([ bindingsFactory.bindings() ], { autoStart: false }),\n        metadata: () => Promise.resolve({\n          state: new MetadataValidationState(),\n          cardinality: { type: 'exact', value: 1 },\n          canContainUndefs: false,\n          variables: [],\n        }),\n        type: 'bindings',\n      },\n    };\n  }\n\n  protected async getJoinCoefficients(): Promise<IMediatorTypeJoinCoefficients> {\n    return {\n      iterations: 0,\n      persistedItems: 0,\n      blockingItems: 0,\n      requestTime: 0,\n    };\n  }\n}\n\nexport interface IActorRdfJoinNoneArgs extends IActorRdfJoinArgs {\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n}\n","import type { IActionRdfJoin, IActorRdfJoinOutputInner, IActorRdfJoinArgs } from '@comunica/bus-rdf-join';\nimport { ActorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\n\n/**\n * A comunica Single RDF Join Actor.\n */\nexport class ActorRdfJoinSingle extends ActorRdfJoin {\n  public constructor(args: IActorRdfJoinArgs) {\n    super(args, {\n      logicalType: 'inner',\n      physicalName: 'single',\n      limitEntries: 1,\n    });\n    this.includeInLogs = false;\n  }\n\n  public override async test(action: IActionRdfJoin): Promise<IMediatorTypeJoinCoefficients> {\n    // Allow joining of one or zero streams\n    if (action.entries.length !== 1) {\n      throw new Error(`Actor ${this.name} can only join a single entry`);\n    }\n    return await this.getJoinCoefficients();\n  }\n\n  protected async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    return {\n      result: action.entries[0].output,\n    };\n  }\n\n  protected async getJoinCoefficients(): Promise<IMediatorTypeJoinCoefficients> {\n    return {\n      iterations: 0,\n      persistedItems: 0,\n      blockingItems: 0,\n      requestTime: 0,\n    };\n  }\n}\n","import type { IActionRdfJoin, IActorRdfJoinOutputInner, IActorRdfJoinArgs } from '@comunica/bus-rdf-join';\nimport { ActorRdfJoin } from '@comunica/bus-rdf-join';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type { Bindings, MetadataBindings } from '@comunica/types';\nimport { SymmetricHashJoin } from 'asyncjoin';\n\n/**\n * A comunica Hash RDF Join Actor.\n */\nexport class ActorRdfJoinSymmetricHash extends ActorRdfJoin {\n  public constructor(args: IActorRdfJoinSymmetricHashArgs) {\n    super(args, {\n      logicalType: 'inner',\n      physicalName: 'symmetric-hash',\n      limitEntries: 2,\n    });\n  }\n\n  public async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    const metadatas = await ActorRdfJoin.getMetadatas(action.entries);\n    const variables = ActorRdfJoin.overlappingVariables(metadatas);\n    const join = new SymmetricHashJoin<Bindings, string, Bindings>(\n      action.entries[0].output.bindingsStream,\n      action.entries[1].output.bindingsStream,\n      entry => ActorRdfJoinSymmetricHash.hash(entry, variables),\n      <any> ActorRdfJoin.joinBindings,\n    );\n    return {\n      result: {\n        type: 'bindings',\n        bindingsStream: join,\n        metadata: async() => await this.constructResultMetadata(action.entries, metadatas, action.context),\n      },\n    };\n  }\n\n  protected async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n    return {\n      iterations: metadatas[0].cardinality.value + metadatas[1].cardinality.value,\n      persistedItems: metadatas[0].cardinality.value + metadatas[1].cardinality.value,\n      blockingItems: 0,\n      requestTime: requestInitialTimes[0] + metadatas[0].cardinality.value * requestItemTimes[0] +\n        requestInitialTimes[1] + metadatas[1].cardinality.value * requestItemTimes[1],\n    };\n  }\n}\n\nexport interface IActorRdfJoinSymmetricHashArgs extends IActorRdfJoinArgs {\n}\n","import { ClosableTransformIterator } from '@comunica/bus-query-operation';\nimport type { IActionRdfJoin, IActorRdfJoinOutputInner, IActorRdfJoinArgs } from '@comunica/bus-rdf-join';\nimport {\n  ActorRdfJoin,\n} from '@comunica/bus-rdf-join';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type { MetadataBindings } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { BindingsIndex } from './BindingsIndex';\n\n/**\n * A comunica Minus Hash RDF Join Actor.\n */\nexport class ActorRdfJoinMinusHashUndef extends ActorRdfJoin {\n  public constructor(args: IActorRdfJoinArgs) {\n    super(args, {\n      logicalType: 'minus',\n      physicalName: 'hash-undef',\n      limitEntries: 2,\n      canHandleUndefs: true,\n    });\n  }\n\n  public async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    const buffer = action.entries[1].output;\n    const output = action.entries[0].output;\n\n    const metadatas = await ActorRdfJoin.getMetadatas(action.entries);\n    const commonVariables: RDF.Variable[] = ActorRdfJoin.overlappingVariables(metadatas);\n    if (commonVariables.length > 0) {\n      /**\n       * To assure we've filtered all B (`buffer`) values from A (`output`) we wait until we've fetched all values of B.\n       * Then we save these triples in `index` and use it to filter our A-stream.\n       */\n      const index: BindingsIndex = new BindingsIndex(commonVariables);\n      const bindingsStream = new ClosableTransformIterator(async() => {\n        await new Promise((resolve) => {\n          buffer.bindingsStream.on('data', data => index.add(data));\n          buffer.bindingsStream.on('end', resolve);\n          buffer.bindingsStream.on('error', (error) => {\n            bindingsStream.emit('error', error);\n          });\n        });\n        return output.bindingsStream.filter(data => !index.contains(data));\n      }, {\n        autoStart: false,\n        onClose() {\n          buffer.bindingsStream.destroy();\n          output.bindingsStream.destroy();\n        },\n      });\n      return {\n        result: {\n          type: 'bindings',\n          bindingsStream,\n          async metadata() {\n            const bufferMetadata = await output.metadata();\n            const outputMetadata = await output.metadata();\n            return {\n              ...outputMetadata,\n              canContainUndefs: bufferMetadata.canContainUndefs || outputMetadata.canContainUndefs,\n            };\n          },\n        },\n      };\n    }\n    // Destroy the buffer stream since it is not needed when\n    // there are no common variables.\n    buffer.bindingsStream.destroy();\n    return {\n      result: output,\n    };\n  }\n\n  protected async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n    return {\n      // Slightly increase iteration cost, as operations in our BindingsIndex do not happen in constant time\n      // This enables the mediator to favor other minus actors,\n      // while this one will only be selected when streams contain undefs.\n      iterations: (metadatas[0].cardinality.value + metadatas[1].cardinality.value) * 1.01,\n      persistedItems: metadatas[0].cardinality.value,\n      blockingItems: metadatas[0].cardinality.value,\n      requestTime: requestInitialTimes[0] + metadatas[0].cardinality.value * requestItemTimes[0] +\n        requestInitialTimes[1] + metadatas[1].cardinality.value * requestItemTimes[1],\n    };\n  }\n}\n","import type { Bindings } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { termToString } from 'rdf-string';\n\n/**\n * A simple efficient tree-based index for maintaining bindings,\n * and checking whether or not a bindings is contained in this index.\n *\n * This will consider bindings with a variable term or a missing term\n * as a 'match-all' with other terms.\n */\nexport class BindingsIndex {\n  private readonly keys: RDF.Variable[];\n  private readonly data: IDataIndex = {};\n\n  public constructor(keys: RDF.Variable[]) {\n    this.keys = keys;\n  }\n\n  protected static hashTerm(term: RDF.Term | undefined): string {\n    return term && term.termType !== 'Variable' ? termToString(term) : '';\n  }\n\n  /**\n   * Add the given bindings to the index.\n   * @param {Bindings} bindings A bindings.\n   */\n  public add(bindings: Bindings): void {\n    if (this.isBindingsValid(bindings)) {\n      let dataIt = this.data;\n      for (const key of this.keys) {\n        const dataKey = BindingsIndex.hashTerm(bindings.get(key));\n        let subDataIt = dataIt[dataKey];\n        if (!subDataIt) {\n          subDataIt = dataIt[dataKey] = {};\n        }\n        dataIt = subDataIt;\n      }\n    }\n  }\n\n  /**\n   * Check if the given bindings is contained in this index.\n   * @param {Bindings} bindings A bindings.\n   * @return {boolean} If it exists in the index.\n   */\n  public contains(bindings: Bindings): boolean {\n    // Always return false if the bindings contain none of the expected keys\n    if (!this.isBindingsValid(bindings)) {\n      return false;\n    }\n\n    return this.containsRecursive(bindings, this.keys, [ this.data ]);\n  }\n\n  protected isBindingsValid(bindings: Bindings): boolean {\n    let validKeys = false;\n    for (const key of this.keys) {\n      if (bindings.get(key)) {\n        validKeys = true;\n        break;\n      }\n    }\n    return validKeys;\n  }\n\n  protected containsRecursive(bindings: Bindings, keys: RDF.Variable[], dataIndexes: IDataIndex[]): boolean {\n    if (keys.length === 0) {\n      return true;\n    }\n\n    let key: RDF.Variable;\n    // eslint-disable-next-line prefer-const\n    [ key, ...keys ] = keys;\n    for (const data of dataIndexes) {\n      // If the index contained a variable, all terms will match.\n      const dataKey = BindingsIndex.hashTerm(bindings.get(key));\n      if (dataKey) {\n        // Check the entry for the term, and the variable term.\n        const subDatas = [ data[dataKey], data[''] ].filter(Boolean);\n        if (subDatas.length === 0) {\n          continue;\n        }\n        if (this.containsRecursive(bindings, keys, subDatas)) {\n          return true;\n        }\n      } else {\n        // Iterate over all entries\n        let subDatas = Object.keys(data).map(subKey => data[subKey]);\n        if (subDatas.length === 0) {\n          subDatas = [{}];\n        }\n        if (this.containsRecursive(bindings, keys, subDatas)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n}\n\nexport interface IDataIndex {\n  [key: string]: IDataIndex;\n}\n","import { ClosableTransformIterator } from '@comunica/bus-query-operation';\nimport type { IActionRdfJoin, IActorRdfJoinOutputInner, IActorRdfJoinArgs } from '@comunica/bus-rdf-join';\nimport {\n  ActorRdfJoin,\n} from '@comunica/bus-rdf-join';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type { MetadataBindings } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\n\n/**\n * A comunica Minus Hash RDF Join Actor.\n */\nexport class ActorRdfJoinMinusHash extends ActorRdfJoin {\n  public constructor(args: IActorRdfJoinArgs) {\n    super(args, {\n      logicalType: 'minus',\n      physicalName: 'hash',\n      limitEntries: 2,\n    });\n  }\n\n  public async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    const buffer = action.entries[1].output;\n    const output = action.entries[0].output;\n\n    const metadatas = await ActorRdfJoin.getMetadatas(action.entries);\n    const commonVariables: RDF.Variable[] = ActorRdfJoin.overlappingVariables(metadatas);\n    if (commonVariables.length > 0) {\n      /**\n       * To assure we've filtered all B (`buffer`) values from A (`output`) we wait until we've fetched all values of B.\n       * Then we save these triples in `index` and use it to filter our A-stream.\n       */\n      const index: Record<string, boolean> = {};\n      const bindingsStream = new ClosableTransformIterator(async() => {\n        await new Promise((resolve) => {\n          buffer.bindingsStream.on('data', (data) => {\n            index[ActorRdfJoin.hash(data, commonVariables)] = true;\n          });\n          buffer.bindingsStream.on('end', resolve);\n          buffer.bindingsStream.on('error', (error) => {\n            bindingsStream.emit('error', error);\n          });\n        });\n        return output.bindingsStream.filter(data => !index[ActorRdfJoin.hash(data, commonVariables)]);\n      }, {\n        autoStart: false,\n        onClose() {\n          buffer.bindingsStream.destroy();\n          output.bindingsStream.destroy();\n        },\n      });\n      return {\n        result: {\n          type: 'bindings',\n          bindingsStream,\n          metadata: output.metadata,\n        },\n      };\n    }\n    // Destroy the buffer stream since it is not needed when\n    // there are no common variables.\n    buffer.bindingsStream.destroy();\n    return {\n      result: output,\n    };\n  }\n\n  protected async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n    return {\n      iterations: metadatas[0].cardinality.value + metadatas[1].cardinality.value,\n      persistedItems: metadatas[0].cardinality.value,\n      blockingItems: metadatas[0].cardinality.value,\n      requestTime: requestInitialTimes[0] + metadatas[0].cardinality.value * requestItemTimes[0] +\n        requestInitialTimes[1] + metadatas[1].cardinality.value * requestItemTimes[1],\n    };\n  }\n}\n","import type { BindOrder } from '@comunica/actor-rdf-join-inner-multi-bind';\nimport { ActorRdfJoinMultiBind } from '@comunica/actor-rdf-join-inner-multi-bind';\nimport { BindingsFactory } from '@comunica/bindings-factory';\nimport type { MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { MediatorQueryOperation } from '@comunica/bus-query-operation';\nimport { ActorQueryOperation } from '@comunica/bus-query-operation';\nimport type { IActionRdfJoin, IActorRdfJoinOutputInner, IActorRdfJoinArgs } from '@comunica/bus-rdf-join';\nimport { ActorRdfJoin } from '@comunica/bus-rdf-join';\nimport { KeysQueryOperation } from '@comunica/context-entries';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type { Bindings, BindingsStream, MetadataBindings } from '@comunica/types';\nimport { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica Optional Bind RDF Join Actor.\n */\nexport class ActorRdfJoinOptionalBind extends ActorRdfJoin {\n  public readonly bindOrder: BindOrder;\n  public readonly selectivityModifier: number;\n  public readonly mediatorQueryOperation: MediatorQueryOperation;\n  public readonly mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n  public constructor(args: IActorRdfJoinOptionalBindArgs) {\n    super(args, {\n      logicalType: 'optional',\n      physicalName: 'bind',\n      limitEntries: 2,\n      canHandleUndefs: true,\n      isLeaf: false,\n    });\n  }\n\n  protected async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    const bindingsFactory = await BindingsFactory.create(this.mediatorMergeBindingsContext, action.context);\n    // Close the right stream, since we don't need that one\n    action.entries[1].output.bindingsStream.close();\n\n    // Bind the right pattern for each binding in the stream\n    const subContext = action.context\n      .set(KeysQueryOperation.joinLeftMetadata, await action.entries[0].output.metadata())\n      .set(KeysQueryOperation.joinRightMetadatas, [ await action.entries[1].output.metadata() ]);\n    const bindingsStream: BindingsStream = ActorRdfJoinMultiBind.createBindStream(\n      this.bindOrder,\n      action.entries[0].output.bindingsStream,\n      [ action.entries[1].operation ],\n      async(operations: Algebra.Operation[], operationBindings: Bindings) => {\n        // Send the materialized patterns to the mediator for recursive join evaluation.\n        // Length of operations will always be 1\n        const operation = operations[0];\n        const output = ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate(\n          { operation, context: subContext?.set(KeysQueryOperation.joinBindings, operationBindings) },\n        ));\n        return output.bindingsStream;\n      },\n      true,\n      bindingsFactory,\n    );\n\n    return {\n      result: {\n        type: 'bindings',\n        bindingsStream,\n        metadata: async() => await this.constructResultMetadata(\n          action.entries,\n          await ActorRdfJoin.getMetadatas(action.entries),\n          action.context,\n          { canContainUndefs: true },\n        ),\n      },\n    };\n  }\n\n  public async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n\n    // Reject binding on some operation types\n    if (action.entries[1].operation.type === Algebra.types.EXTEND ||\n      action.entries[1].operation.type === Algebra.types.GROUP) {\n      throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);\n    }\n\n    // Determine selectivity of join\n    const selectivity = (await this.mediatorJoinSelectivity.mediate({\n      entries: action.entries,\n      context: action.context,\n    })).selectivity * this.selectivityModifier;\n\n    return {\n      iterations: metadatas[0].cardinality.value * metadatas[1].cardinality.value * selectivity,\n      persistedItems: 0,\n      blockingItems: 0,\n      requestTime: requestInitialTimes[0] +\n        metadatas[0].cardinality.value * selectivity * (\n          requestItemTimes[0] +\n          requestInitialTimes[1] +\n          metadatas[1].cardinality.value * requestItemTimes[1]\n        ),\n    };\n  }\n}\n\nexport interface IActorRdfJoinOptionalBindArgs extends IActorRdfJoinArgs {\n  /**\n   * The order in which elements should be bound\n   * @default {depth-first}\n   */\n  bindOrder: BindOrder;\n  /**\n   * Multiplier for selectivity values\n   * @range {double}\n   * @default {0.0001}\n   */\n  selectivityModifier: number;\n  /**\n   * The query operation mediator\n   */\n  mediatorQueryOperation: MediatorQueryOperation;\n  /**\n   * A mediator for creating binding context merge handlers\n   */\n  mediatorMergeBindingsContext: MediatorMergeBindingsContext;\n\n}\n","import type { IActionRdfJoin, IActorRdfJoinOutputInner, IActorRdfJoinArgs } from '@comunica/bus-rdf-join';\nimport {\n  ActorRdfJoin,\n} from '@comunica/bus-rdf-join';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type { Bindings, MetadataBindings } from '@comunica/types';\nimport { NestedLoopJoin } from 'asyncjoin';\n\n/**\n * A comunica Optional Nested Loop RDF Join Actor.\n */\nexport class ActorRdfJoinOptionalNestedLoop extends ActorRdfJoin {\n  public constructor(args: IActorRdfJoinArgs) {\n    super(args, {\n      logicalType: 'optional',\n      physicalName: 'nested-loop',\n      limitEntries: 2,\n      canHandleUndefs: true,\n    });\n  }\n\n  public async getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner> {\n    const join = new NestedLoopJoin<Bindings, Bindings, Bindings>(\n      action.entries[0].output.bindingsStream,\n      action.entries[1].output.bindingsStream,\n      <any> ActorRdfJoin.joinBindings,\n      { optional: true, autoStart: false },\n    );\n    return {\n      result: {\n        type: 'bindings',\n        bindingsStream: join,\n        metadata: async() => await this.constructResultMetadata(\n          action.entries,\n          await ActorRdfJoin.getMetadatas(action.entries),\n          action.context,\n          { canContainUndefs: true },\n        ),\n      },\n    };\n  }\n\n  protected async getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients> {\n    const requestInitialTimes = ActorRdfJoin.getRequestInitialTimes(metadatas);\n    const requestItemTimes = ActorRdfJoin.getRequestItemTimes(metadatas);\n    return {\n      iterations: metadatas[0].cardinality.value * metadatas[1].cardinality.value,\n      persistedItems: 0,\n      blockingItems: 0,\n      requestTime: requestInitialTimes[0] + metadatas[0].cardinality.value * requestItemTimes[0] +\n        requestInitialTimes[1] + metadatas[1].cardinality.value * requestItemTimes[1],\n    };\n  }\n}\n","import type { IActionRdfJoinSelectivity, IActorRdfJoinSelectivityOutput } from '@comunica/bus-rdf-join-selectivity';\nimport { ActorRdfJoinSelectivity } from '@comunica/bus-rdf-join-selectivity';\nimport type { IActorArgs } from '@comunica/core';\nimport type { IMediatorTypeAccuracy } from '@comunica/mediatortype-accuracy';\nimport { Algebra, Util } from 'sparqlalgebrajs';\n\n/**\n * A comunica Variable Counting RDF Join Selectivity Actor.\n * Based on the \"variable counting predicates\" heuristic from\n * \"SPARQL basic graph pattern optimization using selectivity estimation.\"\n */\nexport class ActorRdfJoinSelectivityVariableCounting extends ActorRdfJoinSelectivity {\n  // Calculated as sum of unbound join type costs times 2 (best-case)\n  public static MAX_PAIRWISE_COST = 41 * 2;\n\n  public constructor(\n    args: IActorArgs<IActionRdfJoinSelectivity, IMediatorTypeAccuracy, IActorRdfJoinSelectivityOutput>,\n  ) {\n    super(args);\n  }\n\n  public async test(_action: IActionRdfJoinSelectivity): Promise<IMediatorTypeAccuracy> {\n    return { accuracy: 0.5 };\n  }\n\n  public static getPatternCost(pattern: Algebra.Pattern | Algebra.Path): number {\n    let cost = 1;\n    if (pattern.subject.termType === 'Variable') {\n      cost += 4;\n    }\n    if (pattern.predicate.termType === 'Variable' || pattern.type === Algebra.types.PATH) {\n      cost += 1;\n    }\n    if (pattern.object.termType === 'Variable') {\n      cost += 2;\n    }\n    if (pattern.graph.termType === 'Variable') {\n      cost += 1;\n    }\n    return cost / 9;\n  }\n\n  public static getJoinTypes(\n    operation1: Algebra.Pattern | Algebra.Path,\n    operation2: Algebra.Pattern | Algebra.Path,\n  ): JoinTypes[] {\n    const joinTypes: JoinTypes[] = [];\n\n    // Check operation1.subject\n    if (operation1.subject.termType === 'Variable') {\n      if (operation1.subject.equals(operation2.subject)) {\n        joinTypes.push(JoinTypes.unboundSS);\n      }\n      if (operation2.type === 'pattern' && operation1.subject.equals(operation2.predicate)) {\n        joinTypes.push(JoinTypes.unboundSP);\n      }\n      if (operation1.subject.equals(operation2.object)) {\n        joinTypes.push(JoinTypes.unboundSO);\n      }\n      if (operation1.subject.equals(operation2.graph)) {\n        joinTypes.push(JoinTypes.unboundSG);\n      }\n    } else {\n      if (operation1.subject.equals(operation2.subject)) {\n        joinTypes.push(JoinTypes.boundSS);\n      }\n      if (operation2.type === 'pattern' && operation1.subject.equals(operation2.predicate)) {\n        joinTypes.push(JoinTypes.boundSP);\n      }\n      if (operation1.subject.equals(operation2.object)) {\n        joinTypes.push(JoinTypes.boundSO);\n      }\n      if (operation1.subject.equals(operation2.graph)) {\n        joinTypes.push(JoinTypes.boundSG);\n      }\n    }\n\n    // Check operation1.predicate\n    if (operation1.type === 'pattern') {\n      if (operation1.predicate.termType === 'Variable') {\n        if (operation1.predicate.equals(operation2.subject)) {\n          joinTypes.push(JoinTypes.unboundPS);\n        }\n        if (operation2.type === 'pattern' && operation1.predicate.equals(operation2.predicate)) {\n          joinTypes.push(JoinTypes.unboundPP);\n        }\n        if (operation1.predicate.equals(operation2.object)) {\n          joinTypes.push(JoinTypes.unboundPO);\n        }\n        if (operation1.predicate.equals(operation2.graph)) {\n          joinTypes.push(JoinTypes.unboundPG);\n        }\n      } else {\n        if (operation1.predicate.equals(operation2.subject)) {\n          joinTypes.push(JoinTypes.boundPS);\n        }\n        if (operation2.type === 'pattern' && operation1.predicate.equals(operation2.predicate)) {\n          joinTypes.push(JoinTypes.boundPP);\n        }\n        if (operation1.predicate.equals(operation2.object)) {\n          joinTypes.push(JoinTypes.boundPO);\n        }\n        if (operation1.predicate.equals(operation2.graph)) {\n          joinTypes.push(JoinTypes.boundPG);\n        }\n      }\n    }\n\n    // Check operation1.object\n    if (operation1.object.termType === 'Variable') {\n      if (operation1.object.equals(operation2.subject)) {\n        joinTypes.push(JoinTypes.unboundOS);\n      }\n      if (operation2.type === 'pattern' && operation1.object.equals(operation2.predicate)) {\n        joinTypes.push(JoinTypes.unboundOP);\n      }\n      if (operation1.object.equals(operation2.object)) {\n        joinTypes.push(JoinTypes.unboundOO);\n      }\n      if (operation1.object.equals(operation2.graph)) {\n        joinTypes.push(JoinTypes.unboundOG);\n      }\n    } else {\n      if (operation1.object.equals(operation2.subject)) {\n        joinTypes.push(JoinTypes.boundOS);\n      }\n      if (operation2.type === 'pattern' && operation1.object.equals(operation2.predicate)) {\n        joinTypes.push(JoinTypes.boundOP);\n      }\n      if (operation1.object.equals(operation2.object)) {\n        joinTypes.push(JoinTypes.boundOO);\n      }\n      if (operation1.object.equals(operation2.graph)) {\n        joinTypes.push(JoinTypes.boundOG);\n      }\n    }\n\n    // Check operation1.graph\n    if (operation1.graph.termType === 'Variable') {\n      if (operation1.graph.equals(operation2.subject)) {\n        joinTypes.push(JoinTypes.unboundGS);\n      }\n      if (operation2.type === 'pattern' && operation1.graph.equals(operation2.predicate)) {\n        joinTypes.push(JoinTypes.unboundGP);\n      }\n      if (operation1.graph.equals(operation2.object)) {\n        joinTypes.push(JoinTypes.unboundGO);\n      }\n      if (operation1.graph.equals(operation2.graph)) {\n        joinTypes.push(JoinTypes.unboundGG);\n      }\n    } else {\n      if (operation1.graph.equals(operation2.subject)) {\n        joinTypes.push(JoinTypes.boundGS);\n      }\n      if (operation2.type === 'pattern' && operation1.graph.equals(operation2.predicate)) {\n        joinTypes.push(JoinTypes.boundGP);\n      }\n      if (operation1.graph.equals(operation2.object)) {\n        joinTypes.push(JoinTypes.boundGO);\n      }\n      if (operation1.graph.equals(operation2.graph)) {\n        joinTypes.push(JoinTypes.boundGG);\n      }\n    }\n\n    return joinTypes;\n  }\n\n  public static getOperationsPairwiseJoinCost(\n    operation1: Algebra.Pattern | Algebra.Path,\n    operation2: Algebra.Pattern | Algebra.Path,\n  ): number {\n    let cost = ActorRdfJoinSelectivityVariableCounting.MAX_PAIRWISE_COST;\n\n    for (const joinType of ActorRdfJoinSelectivityVariableCounting.getJoinTypes(operation1, operation2)) {\n      switch (joinType) {\n        case JoinTypes.boundSS:\n          cost -= 2 * 2;\n          break;\n        case JoinTypes.boundSP:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.boundSO:\n          cost -= 1 * 2;\n          break;\n        case JoinTypes.boundSG:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.boundPS:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.boundPP:\n          // Special case: patterns with equal (bound) predicates have the highest cost\n          return 1;\n        case JoinTypes.boundPO:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.boundPG:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.boundOS:\n          cost -= 1 * 2;\n          break;\n        case JoinTypes.boundOP:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.boundOO:\n          cost -= 1 * 2;\n          break;\n        case JoinTypes.boundOG:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.boundGS:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.boundGP:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.boundGO:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.boundGG:\n          cost -= 3 * 2;\n          break;\n        case JoinTypes.unboundSS:\n          cost -= 2;\n          break;\n        case JoinTypes.unboundSP:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundSO:\n          cost -= 1;\n          break;\n        case JoinTypes.unboundSG:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundPS:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundPP:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundPO:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundPG:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundOS:\n          cost -= 1;\n          break;\n        case JoinTypes.unboundOP:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundOO:\n          cost -= 1;\n          break;\n        case JoinTypes.unboundOG:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundGS:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundGP:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundGO:\n          cost -= 3;\n          break;\n        case JoinTypes.unboundGG:\n          cost -= 3;\n          break;\n      }\n    }\n\n    return cost / ActorRdfJoinSelectivityVariableCounting.MAX_PAIRWISE_COST;\n  }\n\n  public static getOperationsJoinCost(operations: Algebra.Operation[]): number {\n    // Determine all operations that select values (patterns and paths)\n    const patterns: (Algebra.Pattern | Algebra.Path)[] = [];\n    for (const operation of operations) {\n      Util.recurseOperation(operation, {\n        [Algebra.types.PATTERN](pattern: Algebra.Pattern): boolean {\n          patterns.push(pattern);\n          return false;\n        },\n        [Algebra.types.PATH](path: Algebra.Path): boolean {\n          patterns.push(path);\n          return false;\n        },\n      });\n    }\n\n    // Determine pairwise costs\n    let totalCost = 0;\n    let costEntries = 0;\n    for (const pattern1 of patterns) {\n      for (const pattern2 of patterns) {\n        if (pattern1 !== pattern2) {\n          totalCost += ActorRdfJoinSelectivityVariableCounting.getOperationsPairwiseJoinCost(pattern1, pattern2);\n          costEntries++;\n        }\n      }\n    }\n\n    // If there are no overlapping patterns, the cost is 1\n    if (costEntries === 0) {\n      return 1;\n    }\n\n    // Combine all pairwise costs, and multiply with costs of each pattern separately\n    return totalCost / costEntries * patterns\n      .reduce((factor, pattern) => factor * ActorRdfJoinSelectivityVariableCounting.getPatternCost(pattern), 1);\n  }\n\n  public async run(action: IActionRdfJoinSelectivity): Promise<IActorRdfJoinSelectivityOutput> {\n    if (action.entries.length <= 1) {\n      return { selectivity: 1 };\n    }\n    return {\n      selectivity: ActorRdfJoinSelectivityVariableCounting\n        .getOperationsJoinCost(action.entries.map(entry => entry.operation)),\n    };\n  }\n}\n\nexport enum JoinTypes {\n  boundSS,\n  boundSP,\n  boundSO,\n  boundSG,\n  boundPS,\n  boundPP,\n  boundPO,\n  boundPG,\n  boundOS,\n  boundOP,\n  boundOO,\n  boundOG,\n  boundGS,\n  boundGP,\n  boundGO,\n  boundGG,\n\n  unboundSS,\n  unboundSP,\n  unboundSO,\n  unboundSG,\n  unboundPS,\n  unboundPP,\n  unboundPO,\n  unboundPG,\n  unboundOS,\n  unboundOP,\n  unboundOO,\n  unboundOG,\n  unboundGS,\n  unboundGP,\n  unboundGO,\n  unboundGG,\n}\n","import type {\n  IActionRdfMetadataAccumulate,\n  IActorRdfMetadataAccumulateOutput,\n  IActorRdfMetadataAccumulateArgs,\n} from '@comunica/bus-rdf-metadata-accumulate';\nimport { ActorRdfMetadataAccumulate } from '@comunica/bus-rdf-metadata-accumulate';\nimport type { IActorTest } from '@comunica/core';\n\n/**\n * A comunica CanContainUndefs RDF Metadata Accumulate Actor.\n */\nexport class ActorRdfMetadataAccumulateCanContainUndefs extends ActorRdfMetadataAccumulate {\n  public constructor(args: IActorRdfMetadataAccumulateArgs) {\n    super(args);\n  }\n\n  public async test(_action: IActionRdfMetadataAccumulate): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionRdfMetadataAccumulate): Promise<IActorRdfMetadataAccumulateOutput> {\n    // Return default value on initialize\n    if (action.mode === 'initialize') {\n      return { metadata: { canContainUndefs: false }};\n    }\n\n    // Otherwise, attempt to increment existing value\n    let canContainUndefs = action.accumulatedMetadata.canContainUndefs;\n    if (action.appendingMetadata.canContainUndefs) {\n      canContainUndefs = true;\n    }\n    return { metadata: { canContainUndefs }};\n  }\n}\n","import type {\n  IActionRdfMetadataAccumulate,\n  IActorRdfMetadataAccumulateOutput,\n  IActorRdfMetadataAccumulateArgs,\n} from '@comunica/bus-rdf-metadata-accumulate';\nimport { ActorRdfMetadataAccumulate } from '@comunica/bus-rdf-metadata-accumulate';\nimport type { IActorTest } from '@comunica/core';\nimport type { QueryResultCardinality } from '@comunica/types';\n\n/**\n * A comunica Cardinality RDF Metadata Accumulate Actor.\n */\nexport class ActorRdfMetadataAccumulateCardinality extends ActorRdfMetadataAccumulate {\n  public constructor(args: IActorRdfMetadataAccumulateArgs) {\n    super(args);\n  }\n\n  public async test(_action: IActionRdfMetadataAccumulate): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionRdfMetadataAccumulate): Promise<IActorRdfMetadataAccumulateOutput> {\n    // Return default value on initialize\n    if (action.mode === 'initialize') {\n      return { metadata: { cardinality: { type: 'exact', value: 0 }}};\n    }\n\n    // Otherwise, attempt to update existing value\n    const cardinality: QueryResultCardinality = { ...action.accumulatedMetadata.cardinality };\n\n    if (cardinality.dataset) {\n      if (action.appendingMetadata.cardinality.dataset) {\n        // If the accumulated cardinality is dataset-wide\n        if (cardinality.dataset !== action.appendingMetadata.cardinality.dataset &&\n          action.appendingMetadata.subsetOf === cardinality.dataset) {\n          // If the appending cardinality refers to the subset of a dataset,\n          // use the cardinality of the subset.\n          return { metadata: { cardinality: action.appendingMetadata.cardinality }};\n        }\n        if (cardinality.dataset === action.appendingMetadata.cardinality.dataset) {\n          // If the appending cardinality is for the same dataset,\n          // keep the accumulated cardinality unchanged.\n          return { metadata: { cardinality }};\n        }\n        // If the appending cardinality refers to another dataset,\n        // remove the dataset scopes.\n        delete cardinality.dataset;\n      } else {\n        // If the appending cardinality refers to a dataset subset,\n        // keep the accumulated cardinality unchanged.\n        return { metadata: { cardinality }};\n      }\n    }\n\n    if (!action.appendingMetadata.cardinality || !Number.isFinite(action.appendingMetadata.cardinality.value)) {\n      // We're already at infinite, so ignore any later metadata\n      cardinality.type = 'estimate';\n      cardinality.value = Number.POSITIVE_INFINITY;\n    } else {\n      if (action.appendingMetadata.cardinality.type === 'estimate') {\n        cardinality.type = 'estimate';\n      }\n      cardinality.value += action.appendingMetadata.cardinality.value;\n    }\n\n    return { metadata: { cardinality }};\n  }\n}\n","import type {\n  IActionRdfMetadataAccumulate,\n  IActorRdfMetadataAccumulateOutput,\n  IActorRdfMetadataAccumulateArgs,\n} from '@comunica/bus-rdf-metadata-accumulate';\nimport { ActorRdfMetadataAccumulate } from '@comunica/bus-rdf-metadata-accumulate';\nimport type { IActorTest } from '@comunica/core';\n\n/**\n * A comunica PageSize RDF Metadata Accumulate Actor.\n */\nexport class ActorRdfMetadataAccumulatePageSize extends ActorRdfMetadataAccumulate {\n  public constructor(args: IActorRdfMetadataAccumulateArgs) {\n    super(args);\n  }\n\n  public async test(_action: IActionRdfMetadataAccumulate): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionRdfMetadataAccumulate): Promise<IActorRdfMetadataAccumulateOutput> {\n    // Return nothing on initialize\n    if (action.mode === 'initialize') {\n      return { metadata: {}};\n    }\n\n    // Otherwise, attempt to increment existing value\n    return {\n      metadata: {\n        ...('pageSize' in action.accumulatedMetadata) || ('pageSize' in action.appendingMetadata) ?\n            {\n              pageSize: (action.accumulatedMetadata.pageSize ?? 0) + (action.appendingMetadata.pageSize ?? 0),\n            } :\n            {},\n      },\n    };\n  }\n}\n","import type {\n  IActionRdfMetadataAccumulate,\n  IActorRdfMetadataAccumulateOutput,\n  IActorRdfMetadataAccumulateArgs,\n} from '@comunica/bus-rdf-metadata-accumulate';\nimport { ActorRdfMetadataAccumulate } from '@comunica/bus-rdf-metadata-accumulate';\nimport type { IActorTest } from '@comunica/core';\n\n/**\n * A comunica RequestTime RDF Metadata Accumulate Actor.\n */\nexport class ActorRdfMetadataAccumulateRequestTime extends ActorRdfMetadataAccumulate {\n  public constructor(args: IActorRdfMetadataAccumulateArgs) {\n    super(args);\n  }\n\n  public async test(_action: IActionRdfMetadataAccumulate): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionRdfMetadataAccumulate): Promise<IActorRdfMetadataAccumulateOutput> {\n    // Return nothing on initialize\n    if (action.mode === 'initialize') {\n      return { metadata: {}};\n    }\n\n    // Otherwise, attempt to increment existing value\n    return {\n      metadata: {\n        ...('requestTime' in action.accumulatedMetadata) || ('requestTime' in action.appendingMetadata) ?\n            {\n              requestTime: (action.accumulatedMetadata.requestTime ?? 0) + (action.appendingMetadata.requestTime ?? 0),\n            } :\n            {},\n      },\n    };\n  }\n}\n","import type {\n  IActionRdfSerialize,\n  IActorRdfSerializeFixedMediaTypesArgs,\n  IActorRdfSerializeOutput,\n} from '@comunica/bus-rdf-serialize';\nimport {\n  ActorRdfSerializeFixedMediaTypes,\n} from '@comunica/bus-rdf-serialize';\nimport type { IActionContext } from '@comunica/types';\nimport { JsonLdSerializer } from 'jsonld-streaming-serializer';\n\n/**\n * A comunica Jsonld RDF Serialize Actor.\n */\nexport class ActorRdfSerializeJsonLd extends ActorRdfSerializeFixedMediaTypes {\n  /**\n   * The number of spaces that should be used to indent stringified JSON.\n   */\n  public readonly jsonStringifyIndentSpaces: number;\n\n  /**\n   * @param args -\n   *   \\ @defaultNested {{\n   *       \"application/ld+json\": 1.0\n   *     }} mediaTypePriorities\n   *   \\ @defaultNested {{\n   *       \"application/ld+json\": \"http://www.w3.org/ns/formats/JSON-LD\"\n   *     }} mediaTypeFormats\n   */\n  public constructor(args: IActorRdfSerializeJsonLdArgs) {\n    super(args);\n  }\n\n  public async runHandle(action: IActionRdfSerialize, _mediaType: string, _context: IActionContext):\n  Promise<IActorRdfSerializeOutput> {\n    const writer = new JsonLdSerializer(\n      { space: ' '.repeat(this.jsonStringifyIndentSpaces) },\n    );\n    let data: NodeJS.ReadableStream;\n    if ('pipe' in action.quadStream) {\n      // Prefer piping if possible, to maintain backpressure\n      action.quadStream.on('error', error => writer.emit('error', error));\n      data = (<any> action.quadStream).pipe(writer);\n    } else {\n      data = <any> writer.import(action.quadStream);\n    }\n    return { data };\n  }\n}\n\nexport interface IActorRdfSerializeJsonLdArgs extends IActorRdfSerializeFixedMediaTypesArgs {\n  /**\n   * The number of spaces that should be used to indent stringified JSON.\n   * @range {integer}\n   * @default {2}\n   */\n  jsonStringifyIndentSpaces: number;\n}\n","import type {\n  IActionRdfSerialize,\n  IActorRdfSerializeFixedMediaTypesArgs,\n  IActorRdfSerializeOutput,\n} from '@comunica/bus-rdf-serialize';\nimport {\n  ActorRdfSerializeFixedMediaTypes,\n} from '@comunica/bus-rdf-serialize';\nimport { StreamWriter } from 'n3';\n\n/**\n * A comunica N3 RDF Serialize Actor.\n */\nexport class ActorRdfSerializeN3 extends ActorRdfSerializeFixedMediaTypes {\n  /**\n   * @param args -\n   *   \\ @defaultNested {{\n   *       \"application/n-quads\": 1.0,\n   *       \"application/trig\": 0.95,\n   *       \"application/n-triples\": 0.8,\n   *       \"text/turtle\": 0.6,\n   *       \"text/n3\": 0.35\n   *     }} mediaTypePriorities\n   *   \\ @defaultNested {{\n   *       \"application/n-quads\": \"http://www.w3.org/ns/formats/N-Quads\",\n   *       \"application/trig\": \"http://www.w3.org/ns/formats/TriG\",\n   *       \"application/n-triples\": \"http://www.w3.org/ns/formats/N-Triples\",\n   *       \"text/turtle\": \"http://www.w3.org/ns/formats/Turtle\",\n   *       \"text/n3\": \"http://www.w3.org/ns/formats/N3\"\n   *     }} mediaTypeFormats\n   */\n  public constructor(args: IActorRdfSerializeFixedMediaTypesArgs) {\n    super(args);\n  }\n\n  public async runHandle(action: IActionRdfSerialize, mediaType: string):\n  Promise<IActorRdfSerializeOutput> {\n    const writer = new StreamWriter({ format: mediaType });\n    let data: NodeJS.ReadableStream;\n    if ('pipe' in action.quadStream) {\n      // Prefer piping if possible, to maintain backpressure\n      action.quadStream.on('error', error => writer.emit('error', error));\n      data = (<any> action.quadStream).pipe(writer);\n    } else {\n      data = <any> writer.import(action.quadStream);\n    }\n    return { data, triples: mediaType === 'text/turtle' ||\n      mediaType === 'application/n-triples' ||\n      mediaType === 'text/n3' };\n  }\n}\n","import type {\n  IActionRdfSerialize,\n  IActorRdfSerializeFixedMediaTypesArgs,\n  IActorRdfSerializeOutput,\n} from '@comunica/bus-rdf-serialize';\nimport {\n  ActorRdfSerializeFixedMediaTypes,\n} from '@comunica/bus-rdf-serialize';\nimport arrayifyStream from 'arrayify-stream';\nimport { Readable } from 'readable-stream';\nimport { write } from 'shaclc-write';\n\n/**\n * A comunica SHACL Compact Syntax RDF Serialize Actor.\n */\nexport class ActorRdfSerializeShaclc extends ActorRdfSerializeFixedMediaTypes {\n  /**\n   * @param args -\n   *   \\ @defaultNested {{\n   *       \"text/shaclc\": 1.0,\n   *       \"text/shaclc-ext\": 0.5\n   *     }} mediaTypePriorities\n   *   \\ @defaultNested {{\n   *       \"text/shaclc\": \"http://www.w3.org/ns/formats/Shaclc\",\n   *       \"text/shaclc-ext\": \"http://www.w3.org/ns/formats/ShaclcExtended\"\n   *     }} mediaTypeFormats\n   */\n  public constructor(args: IActorRdfSerializeFixedMediaTypesArgs) {\n    super(args);\n  }\n\n  public async runHandle(action: IActionRdfSerialize, mediaType: string): Promise<IActorRdfSerializeOutput> {\n    const data = new Readable();\n    data._read = () => {\n      // Do nothing\n    };\n\n    try {\n      const prefixes: Record<string, string> = {};\n      action.quadStream.on('prefix', (prefix, iri) => {\n        prefixes[prefix] = iri;\n      });\n\n      const { text } = await write(\n        await arrayifyStream(action.quadStream),\n        { errorOnUnused: true, extendedSyntax: mediaType === 'text/shaclc-ext', prefixes },\n      );\n      data.push(text);\n      data.push(null);\n    } catch (error: unknown) {\n      // Push the error into the stream\n      data._read = () => {\n        data.emit('error', error);\n      };\n    }\n\n    return {\n      data,\n      triples: true,\n    };\n  }\n}\n","import type {\n  IActionRdfUpdateQuads,\n  IActorRdfUpdateQuadsArgs,\n  IQuadDestination,\n} from '@comunica/bus-rdf-update-quads';\nimport { ActorRdfUpdateQuadsDestination, getContextDestination } from '@comunica/bus-rdf-update-quads';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { RdfJsQuadDestination } from './RdfJsQuadDestination';\n\n/**\n * A comunica RDFJS Store RDF Update Quads Actor.\n */\nexport class ActorRdfUpdateQuadsRdfJsStore extends ActorRdfUpdateQuadsDestination {\n  public constructor(args: IActorRdfUpdateQuadsArgs) {\n    super(args);\n  }\n\n  public override async test(action: IActionRdfUpdateQuads): Promise<IActorTest> {\n    const destination = getContextDestination(action.context);\n    if (!destination || typeof destination === 'string' ||\n      (!('remove' in destination) && 'value' in destination && !(<RDF.Store> destination.value).remove)) {\n      throw new Error(`${this.name} received an invalid rdfjsStore.`);\n    }\n    return true;\n  }\n\n  protected async getDestination(context: IActionContext): Promise<IQuadDestination> {\n    const destination: any = <any> getContextDestination(context);\n    return new RdfJsQuadDestination('remove' in destination ? destination : destination.value);\n  }\n}\n","import type { IQuadDestination } from '@comunica/bus-rdf-update-quads';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { promisifyEventEmitter } from 'event-emitter-promisify';\nimport { DataFactory } from 'rdf-data-factory';\nimport { stringToTerm, termToString } from 'rdf-string';\n\nconst DF = new DataFactory();\n\n/**\n * A quad destination that wraps around an {@link RDF.Store}.\n */\nexport class RdfJsQuadDestination implements IQuadDestination {\n  private readonly store: RDF.Store;\n\n  public constructor(store: RDF.Store) {\n    this.store = store;\n  }\n\n  public delete(quads: AsyncIterator<RDF.Quad>): Promise<void> {\n    return promisifyEventEmitter(this.store.remove(quads));\n  }\n\n  public insert(quads: AsyncIterator<RDF.Quad>): Promise<void> {\n    return promisifyEventEmitter(this.store.import(quads));\n  }\n\n  public async deleteGraphs(\n    graphs: RDF.DefaultGraph | 'NAMED' | 'ALL' | RDF.NamedNode[],\n    _requireExistence: boolean,\n    _dropGraphs: boolean,\n  ): Promise<void> {\n    switch (graphs) {\n      case 'ALL':\n        /* eslint-disable no-fallthrough */\n        // Remove the default graph\n        await promisifyEventEmitter(this.store.deleteGraph(DF.defaultGraph()));\n        // Drop through to remove all named graphs\n      case 'NAMED':\n        /* eslint-enable no-fallthrough */\n        // Warning: this is sub-optimal!\n        // Query ALL quads to determine all named graphs\n        // eslint-disable-next-line no-case-declarations\n        const allQuads = this.store.match();\n        // eslint-disable-next-line no-case-declarations\n        const namedGraphs: Record<string, boolean> = {};\n        allQuads.on('data', (quad: RDF.Quad) => {\n          if (quad.graph.termType !== 'DefaultGraph') {\n            namedGraphs[termToString(quad.graph)] = true;\n          }\n        });\n        await promisifyEventEmitter(allQuads);\n\n        // Delete all named graphs\n        await Promise.all(Object.keys(namedGraphs)\n          .map(namedGraph => promisifyEventEmitter(this.store\n            .deleteGraph(<RDF.NamedNode> stringToTerm(namedGraph)))));\n        break;\n      default:\n        // Delete the default graph or a named graph\n        for (const graph of Array.isArray(graphs) ? graphs : [ graphs ]) {\n          await promisifyEventEmitter(this.store.deleteGraph(graph));\n        }\n    }\n  }\n\n  public async createGraphs(graphs: RDF.NamedNode[], requireNonExistence: boolean): Promise<void> {\n    // We don't have to create anything, since RDF/JS stores don't record empty graphs.\n\n    // The only check we have to do is error on existence\n    if (requireNonExistence) {\n      for (const graph of graphs) {\n        const eventEmitter = this.store.match(undefined, undefined, undefined, graph);\n        await new Promise<void>((resolve, reject) => {\n          eventEmitter.once('data', () => {\n            reject(new Error(`Unable to create graph ${graph.value} as it already exists`));\n          });\n          eventEmitter.on('end', resolve);\n          eventEmitter.on('error', reject);\n        });\n      }\n    }\n  }\n}\n","import type { IBindingsContextMergeHandler } from '@comunica/bus-merge-bindings-context';\nimport { ActionContext } from '@comunica/core';\nimport type { IActionContext, IActionContextKey } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { Map } from 'immutable';\nimport { bindingsToString } from './bindingsToString';\n\n/**\n * An immutable.js-based Bindings object.\n */\nexport class Bindings implements RDF.Bindings {\n  public readonly type = 'bindings';\n\n  private readonly dataFactory: RDF.DataFactory;\n  private readonly entries: Map<string, RDF.Term>;\n  private readonly contextHolder: IContextHolder | undefined;\n\n  public constructor(dataFactory: RDF.DataFactory, entries: Map<string, RDF.Term>, contextHolder?: IContextHolder) {\n    this.dataFactory = dataFactory;\n    this.entries = entries;\n    this.contextHolder = contextHolder;\n  }\n\n  public has(key: RDF.Variable | string): boolean {\n    return this.entries.has(typeof key === 'string' ? key : key.value);\n  }\n\n  public get(key: RDF.Variable | string): RDF.Term | undefined {\n    return this.entries.get(typeof key === 'string' ? key : key.value);\n  }\n\n  public set(key: RDF.Variable | string, value: RDF.Term): Bindings {\n    return new Bindings(\n      this.dataFactory,\n      this.entries.set(typeof key === 'string' ? key : key.value, value),\n      this.contextHolder,\n    );\n  }\n\n  public delete(key: RDF.Variable | string): Bindings {\n    return new Bindings(\n      this.dataFactory,\n      this.entries.delete(typeof key === 'string' ? key : key.value),\n      this.contextHolder,\n    );\n  }\n\n  public keys(): Iterable<RDF.Variable> {\n    return this.mapIterable<string, RDF.Variable>(\n      this.iteratorToIterable(this.entries.keys()),\n      key => this.dataFactory.variable!(key),\n    );\n  }\n\n  public values(): Iterable<RDF.Term> {\n    return this.iteratorToIterable(this.entries.values());\n  }\n\n  public forEach(fn: (value: RDF.Term, key: RDF.Variable) => any): void {\n    for (const [ key, value ] of this.entries.entries()) {\n      fn(value, this.dataFactory.variable!(key));\n    }\n  }\n\n  public get size(): number {\n    return this.entries.size;\n  }\n\n  public [Symbol.iterator](): Iterator<[RDF.Variable, RDF.Term]> {\n    return this.mapIterable<[string, RDF.Term], [RDF.Variable, RDF.Term]>(\n      this.iteratorToIterable(<Iterator<[string, RDF.Term]>> this.entries.entries()),\n      ([ key, value ]) => [ this.dataFactory.variable!(key), value ],\n    )[Symbol.iterator]();\n  }\n\n  public equals(other: RDF.Bindings | null | undefined): boolean {\n    if (!other) {\n      return false;\n    }\n    if (this === other) {\n      return true;\n    }\n\n    // First check if size is equal\n    if (this.size !== other.size) {\n      return false;\n    }\n\n    // Then check if keys and values are equal\n    for (const key of this.keys()) {\n      if (!this.get(key)?.equals(other.get(key))) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  public filter(fn: (value: RDF.Term, key: RDF.Variable) => boolean): Bindings {\n    return new Bindings(this.dataFactory, Map(<any> this.entries\n      .filter((value, key) => fn(value, this.dataFactory.variable!(key)))), this.contextHolder);\n  }\n\n  public map(fn: (value: RDF.Term, key: RDF.Variable) => RDF.Term): Bindings {\n    return new Bindings(this.dataFactory, Map(<any> this.entries\n      .map((value, key) => fn(value, this.dataFactory.variable!(key)))), this.contextHolder);\n  }\n\n  public merge(other: RDF.Bindings | Bindings): Bindings | undefined {\n    // Determine the union of keys\n    const keys = new Set([\n      ...this.iteratorToIterable(this.entries.keys()),\n      ...[ ...other.keys() ].map(key => key.value),\n    ]);\n\n    // Collect entries\n    const entries: [string, RDF.Term][] = [];\n    for (const key of keys) {\n      const left = this.entries.get(key)!;\n      const right = other.get(this.dataFactory.variable!(key));\n      if (left && right && !left.equals(right)) {\n        return;\n      }\n      const value = left || right;\n      entries.push([ key, value ]);\n    }\n\n    return this.createBindingsWithContexts(entries, other);\n  }\n\n  public mergeWith(\n    merger: (self: RDF.Term, other: RDF.Term, key: RDF.Variable) => RDF.Term,\n    other: RDF.Bindings | Bindings,\n  ): Bindings {\n    // Determine the union of keys\n    const keys = new Set([\n      ...this.iteratorToIterable(this.entries.keys()),\n      ...[ ...other.keys() ].map(key => key.value),\n    ]);\n\n    // Collect entries\n    const entries: [string, RDF.Term][] = [];\n    for (const key of keys) {\n      const variable = this.dataFactory.variable!(key);\n      const left = this.entries.get(key)!;\n      const right = other.get(variable);\n      let value: RDF.Term;\n      if (left && right && !left.equals(right)) {\n        value = merger(left, right, variable);\n      } else {\n        value = left || right;\n      }\n      entries.push([ key, value ]);\n    }\n\n    return this.createBindingsWithContexts(entries, other);\n  }\n\n  protected createBindingsWithContexts(entries: [string, RDF.Term][], other: RDF.Bindings | Bindings): Bindings {\n    // If any context is empty, we skip merging contexts\n    if (this.contextHolder && this.contextHolder.context) {\n      let mergedContext = this.contextHolder.context;\n      // Only merge if the other has a context\n      if ('contextHolder' in other && other.contextHolder && other.contextHolder.context) {\n        mergedContext = Bindings\n          .mergeContext(this.contextHolder.contextMergeHandlers, mergedContext, other.contextHolder.context);\n      }\n      return new Bindings(\n        this.dataFactory,\n        Map(entries),\n        { contextMergeHandlers: this.contextHolder.contextMergeHandlers, context: mergedContext },\n      );\n    }\n\n    // Otherwise, use optional context from other\n    return new Bindings(this.dataFactory, Map(entries), (<Bindings> other).contextHolder);\n  }\n\n  private static mergeContext(\n    contextMergeHandlers: Record<string, IBindingsContextMergeHandler<any>>,\n    context: IActionContext,\n    otherContext: IActionContext,\n  ): IActionContext {\n    // All keys can contain duplicates, we prevent this by checking our built datamap for duplicates\n    const allKeys = [ ...context.keys(), ...otherContext.keys() ];\n    // Map we build up with merged context values\n    const newContextData: Record<string, any> = {};\n    const handledKeys: Record<string, number> = {};\n\n    // Set of names of keys in other context to allow for constant time lookup\n    const keysSetOtherContext = new Set(\n      otherContext.keys().map(key => key.name),\n    );\n    const keysBothContext = context.keys().filter(\n      key => keysSetOtherContext.has(key.name),\n    );\n\n    for (const key of allKeys) {\n      // If duplicate key, we continue iterating\n      if (handledKeys[key.name] === 1) {\n        continue;\n      }\n\n      // We've processed this key and shouldn't repeat it\n      handledKeys[key.name] = 1;\n\n      // Determine whether this key occurs in both contexts\n      const occursInBoth = keysBothContext.some(x => x.name === key.name);\n\n      // If we execute this function, we already check for existence of context merge handlers\n      // This if statement is first as the most likely case for non-empty contexts is that we have mergehandlers\n      // and both contexts have an entry\n      if (contextMergeHandlers[key.name] && occursInBoth) {\n        newContextData[key.name] = contextMergeHandlers[key.name]\n          .run(context.get(key), otherContext.get(key));\n        continue;\n      }\n      // If we have no merge handler, but both contexts have entries for key, we don't add it to new context\n      if (!contextMergeHandlers[key.name] && occursInBoth) {\n        continue;\n      }\n\n      // If key doesn't occur in own context, it must be in other context\n      // (if we get to this point, the key doesn't occur in both)\n      if (!context.get(key)) {\n        newContextData[key.name] = otherContext.get(key);\n        continue;\n      }\n      // This could likely be else statement, but don't want to risk it\n      if (!otherContext.get(key)) {\n        newContextData[key.name] = context.get(key);\n      }\n    }\n    return new ActionContext(newContextData);\n  }\n\n  public setContextEntry<V>(key: IActionContextKey<V>, value: any): Bindings {\n    return this.setContextEntryRaw(key, value);\n  }\n\n  public setContextEntryRaw<V>(key: IActionContextKey<V>, value: any): Bindings {\n    if (this.contextHolder && this.contextHolder.context) {\n      return new Bindings(\n        this.dataFactory,\n        this.entries,\n        {\n          contextMergeHandlers: this.contextHolder.contextMergeHandlers,\n          context: this.contextHolder.context.set(key, value),\n        },\n      );\n    }\n    return new Bindings(\n      this.dataFactory,\n      this.entries,\n      {\n        contextMergeHandlers: this.contextHolder?.contextMergeHandlers ?? {},\n        context: new ActionContext().set(key, value),\n      },\n    );\n  }\n\n  public deleteContextEntry<V>(key: IActionContextKey<V>): Bindings {\n    return this.deleteContextEntryRaw(key);\n  }\n\n  public deleteContextEntryRaw<V>(key: IActionContextKey<V>): Bindings {\n    if (this.contextHolder) {\n      return new Bindings(\n        this.dataFactory,\n        this.entries,\n        {\n          contextMergeHandlers: this.contextHolder.contextMergeHandlers,\n          context: this.contextHolder.context?.delete(key),\n        },\n      );\n    }\n    return new Bindings(this.dataFactory, this.entries);\n  }\n\n  public getContext(): IActionContext | undefined {\n    return this.contextHolder?.context;\n  }\n\n  public getContextEntry<V>(key: IActionContextKey<V>): V | undefined {\n    return this.getContext()?.get(key);\n  }\n\n  public toString(): string {\n    return bindingsToString(this);\n  }\n\n  protected* mapIterable<T, U>(iterable: Iterable<T>, callback: (value: T) => U): Iterable<U> {\n    for (const x of iterable) {\n      yield callback(x);\n    }\n  }\n\n  protected iteratorToIterable<T>(iterator: Iterator<T>): Iterable<T> {\n    return {\n      [Symbol.iterator]: () => iterator,\n    };\n  }\n}\n\nexport interface IContextHolder {\n  contextMergeHandlers: Record<string, IBindingsContextMergeHandler<any>>;\n  context?: IActionContext;\n}\n","import type { IBindingsContextMergeHandler, MediatorMergeBindingsContext } from '@comunica/bus-merge-bindings-context';\nimport type { IActionContext } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { Map } from 'immutable';\nimport { DataFactory } from 'rdf-data-factory';\nimport { Bindings } from './Bindings';\n\n/**\n * A Bindings factory that provides Bindings backed by immutable.js.\n */\nexport class BindingsFactory implements RDF.BindingsFactory {\n  private readonly dataFactory: RDF.DataFactory;\n  private readonly contextMergeHandlers: Record<string, IBindingsContextMergeHandler<any>> | undefined;\n\n  public constructor(\n    dataFactory: DataFactory = new DataFactory(),\n    contextMergeHandlers?: Record<string, IBindingsContextMergeHandler<any>>,\n  ) {\n    this.dataFactory = dataFactory;\n    this.contextMergeHandlers = contextMergeHandlers;\n  }\n\n  public static async create(\n    mediatorMergeBindingsContext: MediatorMergeBindingsContext,\n    context: IActionContext,\n  ): Promise<BindingsFactory> {\n    return new BindingsFactory(\n      new DataFactory(),\n      (await mediatorMergeBindingsContext.mediate({ context })).mergeHandlers,\n    );\n  }\n\n  public bindings(entries: [RDF.Variable, RDF.Term][] = []): Bindings {\n    return new Bindings(\n      this.dataFactory,\n      Map(entries.map(([ key, value ]) => [ key.value, value ])),\n      this.contextMergeHandlers ? { contextMergeHandlers: this.contextMergeHandlers } : undefined,\n    );\n  }\n\n  public fromBindings(bindings: RDF.Bindings): Bindings {\n    return this.bindings([ ...bindings ]);\n  }\n\n  public fromRecord(record: Record<string, RDF.Term>): Bindings {\n    return this.bindings(Object.entries(record).map(([ key, value ]) => [ this.dataFactory.variable!(key), value ]));\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport { termToString } from 'rdf-string';\n\n/**\n * Stringify a bindings object.\n * @param bindings A bindings object.\n */\nexport function bindingsToString(bindings: RDF.Bindings): string {\n  const raw: Record<string, string> = {};\n  for (const key of bindings.keys()) {\n    raw[key.value] = termToString(bindings.get(key))!;\n  }\n  return JSON.stringify(raw, null, '  ');\n}\n","import type { IAction, IActorArgs, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { IActionContext } from '@comunica/types';\n\n/**\n * A comunica actor for context-preprocess events.\n *\n * Actor types:\n * * Input:  IAction:      A context that will be processed.\n * * Test:   <none>\n * * Output: IActorContextPreprocessOutput: The resulting context.\n *\n * @see IActionContextPreprocess\n * @see IActorContextPreprocessOutput\n */\nexport abstract class ActorContextPreprocess\n  extends Actor<IActionContextPreprocess, IActorTest, IActorContextPreprocessOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorContextPreprocessArgs) {\n    super(args);\n  }\n}\n\nexport interface IActionContextPreprocess extends IAction {\n  /**\n   * If the query processing is being initialized.\n   * This is typically used for setting query-wide defaults.\n   * This will be false for initializing source-specific contexts.\n   */\n  initialize?: boolean;\n}\n\nexport interface IActorContextPreprocessOutput extends IActorOutput {\n  /**\n   * A context object.\n   * Can be null.\n   */\n  context: IActionContext;\n}\n\nexport type IActorContextPreprocessArgs = IActorArgs<\nIActionContextPreprocess,\nIActorTest,\nIActorContextPreprocessOutput\n>;\n\nexport type MediatorContextPreprocess = Mediate<IActionContextPreprocess, IActorContextPreprocessOutput>;\n","import type { IAction, IActorArgs, IActorOutput, IActorTest, Mediator } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { Bindings } from '@comunica/types';\n\n/**\n * A comunica actor for hash-bindings events.\n *\n * Actor types:\n * * Input:  IActionHashBindings:      Metadata for selecting a hash function.\n * * Test:   IActorTest:\n * * Output: IActorHashBindingsOutput: The resulting hash function.\n *\n * @see IActionHashBindings\n * @see IActorHashBindingsTest\n * @see IActorHashBindingsOutput\n */\nexport abstract class ActorHashBindings\n  extends Actor<IActionHashBindings, IActorTest, IActorHashBindingsOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorHashBindingsArgs) {\n    super(args);\n  }\n}\n\nexport interface IActionHashBindings extends IAction {\n  /**\n   * If hash collisions are allowed.\n   */\n  allowHashCollisions: boolean;\n}\n\nexport interface IActorHashBindingsOutput extends IActorOutput {\n  /**\n   * A string-based hash of the given object.\n   * @param {Bindings} bindings The bindings to hash.\n   * @return {string} The object's hash.\n   */\n  hashFunction: HashFunction;\n\n  /**\n   * If hash collisions are possible with the given hash function.\n   */\n  hashCollisions: boolean;\n}\n\nexport type HashFunction = (bindings: Bindings) => string;\n\nexport type IActorHashBindingsArgs = IActorArgs<IActionHashBindings, IActorTest, IActorHashBindingsOutput>;\n\nexport type MediatorHashBindings = Mediator<\nActor<IActionHashBindings, IActorTest, IActorHashBindingsOutput>,\nIActionHashBindings,\nIActorTest,\nIActorHashBindingsOutput\n>;\n","import type { IAction, IActorArgs, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\n\n/**\n * A comunica actor for http-invalidate events.\n *\n * Actor types:\n * * Input:  IActionHttpInvalidate:      An action for invalidating the cached contents of given URL.\n * * Test:   <none>\n * * Output: IActorHttpInvalidateOutput: An empty response.\n *\n * @see IActionHttpInvalidate\n * @see IActorHttpInvalidateOutput\n */\nexport abstract class ActorHttpInvalidate extends Actor<IActionHttpInvalidate, IActorTest, IActorHttpInvalidateOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorHttpInvalidateArgs) {\n    super(args);\n  }\n}\n\nexport interface IActionHttpInvalidate extends IAction {\n  /**\n   * The URL that requires invalidation.\n   * If not provided, then _all_ URLs need to be invalidated.\n   */\n  url?: string;\n}\n\nexport interface IActorHttpInvalidateOutput extends IActorOutput {\n\n}\n\nexport type IActorHttpInvalidateArgs = IActorArgs<IActionHttpInvalidate, IActorTest, IActorHttpInvalidateOutput>;\n\nexport type MediatorHttpInvalidate = Mediate<IActionHttpInvalidate, IActorHttpInvalidateOutput>;\n","import type { IActorTest } from '@comunica/core';\nimport type {\n  IActionHttpInvalidate,\n  IActorHttpInvalidateOutput,\n  IActorHttpInvalidateArgs,\n} from './ActorHttpInvalidate';\nimport { ActorHttpInvalidate } from './ActorHttpInvalidate';\n\n/**\n * An ActorHttpInvalidate actor that allows listeners to be attached.\n *\n * @see ActorHttpInvalidate\n */\nexport class ActorHttpInvalidateListenable extends ActorHttpInvalidate {\n  private readonly invalidateListeners: IInvalidateListener[] = [];\n\n  public constructor(args: IActorHttpInvalidateArgs) {\n    super(args);\n    this.invalidateListeners = [];\n  }\n\n  public addInvalidateListener(listener: IInvalidateListener): void {\n    this.invalidateListeners.push(listener);\n  }\n\n  public async test(_action: IActionHttpInvalidate): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionHttpInvalidate): Promise<IActorHttpInvalidateOutput> {\n    for (const listener of this.invalidateListeners) {\n      listener(action);\n    }\n    return {};\n  }\n}\n\n/**\n * Called when a {@link IActionHttpInvalidate} is received.\n */\nexport type IInvalidateListener = (action: IActionHttpInvalidate) => void;\n","import type { IAction, IActorOutput, IActorTest, IActorArgs, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { Readable } from 'readable-stream';\n\n/**\n * A base actor for listening to init events.\n *\n * Actor types:\n * * Input:  IActionInit:      Contains process information\n *                             such as the list of arguments,\n *                             environment variables and input stream.\n * * Test:   <none>\n * * Output: IActorOutputInit: Contains process output streams.\n *\n * @see IActionInit\n */\nexport abstract class ActorInit extends Actor<IActionInit, IActorTest, IActorOutputInit> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorInitArgs) {\n    super(args);\n  }\n}\n\n/**\n * The init input, which contains the program arguments.\n */\nexport interface IActionInit extends IAction {\n  /**\n   * The list of program arguments.\n   */\n  argv: string[];\n  /**\n   * The mapping of environment variables.\n   */\n  env: Record<string, string | undefined>;\n  /**\n   * A standard input stream.\n   */\n  stdin: Readable;\n}\n\nexport interface IActorOutputInit extends IActorOutput {\n  /**\n   * A standard error output stream.\n   */\n  stderr?: Readable;\n  /**\n   * A standard output stream.\n   */\n  stdout?: Readable;\n}\n\nexport type IActorInitArgs = IActorArgs<IActionInit, IActorTest, IActorOutputInit>;\n\nexport type MediatorInit = Mediate<IActionInit, IActorOutputInit>;\n","import type { IAction, IActorArgs, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { IActionContext } from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica actor for optimize-query-operation events.\n *\n * Actor types:\n * * Input:  IActionOptimizeQueryOperation:      An incoming SPARQL operation.\n * * Test:   <none>\n * * Output: IActorOptimizeQueryOperationOutput: A (possibly optimized) outgoing SPARQL operation.\n *\n * @see IActionOptimizeQueryOperation\n * @see IActorOptimizeQueryOperationOutput\n */\nexport abstract class ActorOptimizeQueryOperation\n  extends Actor<IActionOptimizeQueryOperation, IActorTest, IActorOptimizeQueryOperationOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorOptimizeQueryOperationArgs) {\n    super(args);\n  }\n}\n\nexport interface IActionOptimizeQueryOperation extends IAction {\n  operation: Algebra.Operation;\n}\n\nexport interface IActorOptimizeQueryOperationOutput extends IActorOutput {\n  operation: Algebra.Operation;\n  context: IActionContext;\n}\n\nexport type IActorOptimizeQueryOperationArgs = IActorArgs<\nIActionOptimizeQueryOperation,\nIActorTest,\nIActorOptimizeQueryOperationOutput\n>;\n\nexport type MediatorOptimizeQueryOperation = Mediate<\nIActionOptimizeQueryOperation,\nIActorOptimizeQueryOperationOutput\n>;\n","import type { BindingsFactory } from '@comunica/bindings-factory';\nimport { KeysInitQuery, KeysQueryOperation } from '@comunica/context-entries';\nimport type { IActorArgs, IActorTest, IAction, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport { BlankNodeBindingsScoped } from '@comunica/data-factory';\nimport type {\n  IQueryOperationResult,\n  IQueryOperationResultBindings,\n  IQueryOperationResultBoolean,\n  IQueryOperationResultQuads,\n  IQueryOperationResultVoid,\n  Bindings,\n  IActionContext,\n  FunctionArgumentsCache,\n  IQuerySourceWrapper,\n  FragmentSelectorShape,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport { materializeOperation } from './Bindings';\n\n/**\n * A counter that keeps track blank node generated through BNODE() SPARQL\n * expressions.\n *\n * @type {number}\n */\nlet bnodeCounter = 0;\n\n/**\n * A comunica actor for query-operation events.\n *\n * Actor types:\n * * Input:  IActionQueryOperation:      A SPARQL Algebra operation.\n * * Test:   <none>\n * * Output: IActorQueryOperationOutput: A bindings stream.\n *\n * @see IActionQueryOperation\n * @see IQueryOperationResult\n */\nexport abstract class ActorQueryOperation extends Actor<IActionQueryOperation, IActorTest, IQueryOperationResult> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cbqo:components/BusQueryOperation.jsonld#BusQueryOperation>} bus\n   */\n  protected constructor(args: IActorQueryOperationArgs) {\n    super(args);\n  }\n\n  /**\n   * Safely cast a query operation output to a bindings output.\n   * This will throw a runtime error if the output is of the incorrect type.\n   * @param {IQueryOperationResult} output A query operation output.\n   * @return {IQueryOperationResultBindings} A bindings query operation output.\n   */\n  public static getSafeBindings(output: IQueryOperationResult): IQueryOperationResultBindings {\n    ActorQueryOperation.validateQueryOutput(output, 'bindings');\n    return <IQueryOperationResultBindings> output;\n  }\n\n  /**\n   * Safely cast a query operation output to a quads output.\n   * This will throw a runtime error if the output is of the incorrect type.\n   * @param {IQueryOperationResult} output A query operation output.\n   * @return {IQueryOperationResultQuads} A quads query operation output.\n   */\n  public static getSafeQuads(output: IQueryOperationResult): IQueryOperationResultQuads {\n    ActorQueryOperation.validateQueryOutput(output, 'quads');\n    return <IQueryOperationResultQuads> output;\n  }\n\n  /**\n   * Safely cast a query operation output to a boolean output.\n   * This will throw a runtime error if the output is of the incorrect type.\n   * @param {IQueryOperationResult} output A query operation output.\n   * @return {IQueryOperationResultBoolean} A boolean query operation output.\n   */\n  public static getSafeBoolean(output: IQueryOperationResult): IQueryOperationResultBoolean {\n    ActorQueryOperation.validateQueryOutput(output, 'boolean');\n    return <IQueryOperationResultBoolean> output;\n  }\n\n  /**\n   * Safely cast a query operation output to a void output.\n   * This will throw a runtime error if the output is of the incorrect type.\n   * @param {IQueryOperationResult} output A query operation output.\n   * @return {IQueryOperationResultVoid} A void query operation output.\n   */\n  public static getSafeVoid(output: IQueryOperationResult): IQueryOperationResultVoid {\n    ActorQueryOperation.validateQueryOutput(output, 'void');\n    return <IQueryOperationResultVoid> output;\n  }\n\n  /**\n   * Throw an error if the output type does not match the expected type.\n   * @param {IQueryOperationResult} output A query operation output.\n   * @param {string} expectedType The expected output type.\n   */\n  public static validateQueryOutput(output: IQueryOperationResult, expectedType: IQueryOperationResult['type']): void {\n    if (output.type !== expectedType) {\n      throw new Error(`Invalid query output type: Expected '${expectedType}' but got '${output.type}'`);\n    }\n  }\n\n  protected static getBaseExpressionContext(context: IActionContext): IBaseExpressionContext {\n    const now: Date | undefined = context.get(KeysInitQuery.queryTimestamp);\n    const baseIRI: string | undefined = context.get(KeysInitQuery.baseIRI);\n    const functionArgumentsCache: FunctionArgumentsCache = context.get(KeysInitQuery.functionArgumentsCache) ?? {};\n\n    // Handle two variants of providing extension functions\n    if (context.has(KeysInitQuery.extensionFunctionCreator) && context.has(KeysInitQuery.extensionFunctions)) {\n      throw new Error('Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context');\n    }\n    let extensionFunctionCreator: ((functionNamedNode: RDF.NamedNode) =>\n    ((args: RDF.Term[]) => Promise<RDF.Term>) | undefined) | undefined = context\n      .get(KeysInitQuery.extensionFunctionCreator);\n    // Convert dictionary-based variant to callback\n    const extensionFunctions: (Record<string, (args: RDF.Term[]) => Promise<RDF.Term>>) | undefined = context\n      .get(KeysInitQuery.extensionFunctions);\n    if (extensionFunctions) {\n      extensionFunctionCreator = functionNamedNode => extensionFunctions[functionNamedNode.value];\n    }\n\n    return { now, baseIRI, extensionFunctionCreator, functionArgumentsCache };\n  }\n\n  /**\n   * Create an options object that can be used to construct a expression-evaluator synchronous evaluator.\n   * @param context An action context.\n   * @param _mediatorQueryOperation An optional query query operation mediator.\n   *                                If defined, the existence resolver will be defined as `exists`.\n   */\n  public static getExpressionContext(context: IActionContext, _mediatorQueryOperation?: MediatorQueryOperation):\n  ISyncExpressionContext {\n    return {\n      ...this.getBaseExpressionContext(context),\n      bnode: (input?: string) => new BlankNodeBindingsScoped(input ?? `BNODE_${bnodeCounter++}`),\n    };\n  }\n\n  /**\n   * Create an options object that can be used to construct a expression-evaluator asynchronous evaluator.\n   * @param context An action context.\n   * @param mediatorQueryOperation A query query operation mediator for resolving `exists`.\n   * @param bindingsFactory The bindings factory.\n   */\n  public static getAsyncExpressionContext(\n    context: IActionContext,\n    mediatorQueryOperation: MediatorQueryOperation,\n    bindingsFactory: BindingsFactory,\n  ):\n    IAsyncExpressionContext {\n    return {\n      ...this.getBaseExpressionContext(context),\n      bnode: (input?: string) => Promise.resolve(new BlankNodeBindingsScoped(input ?? `BNODE_${bnodeCounter++}`)),\n      exists: ActorQueryOperation.createExistenceResolver(context, mediatorQueryOperation, bindingsFactory),\n    };\n  }\n\n  /**\n   * Create an existence resolver for usage within an expression context.\n   * @param context An action context.\n   * @param mediatorQueryOperation A query operation mediator.\n   * @param bindingsFactory The bindings factory.\n   */\n  public static createExistenceResolver(\n    context: IActionContext,\n    mediatorQueryOperation: MediatorQueryOperation,\n    bindingsFactory: BindingsFactory,\n  ):\n    (expr: Algebra.ExistenceExpression, bindings: Bindings) => Promise<boolean> {\n    return async(expr, bindings) => {\n      const operation = materializeOperation(expr.input, bindings, bindingsFactory);\n\n      const outputRaw = await mediatorQueryOperation.mediate({ operation, context });\n      const output = ActorQueryOperation.getSafeBindings(outputRaw);\n      return expr.not !== ((await output.bindingsStream.take(1).toArray()).length === 1);\n    };\n  }\n\n  /**\n   * Throw an error if the context contains the readOnly flag.\n   * @param context An action context.\n   */\n  public static throwOnReadOnly(context: IActionContext): void {\n    if (context.get(KeysQueryOperation.readOnly)) {\n      throw new Error(`Attempted a write operation in read-only mode`);\n    }\n  }\n\n  /**\n   * Obtain the query source attached to the given operation.\n   * @param operation An algebra operation.\n   */\n  public static getOperationSource(operation: Algebra.Operation): IQuerySourceWrapper | undefined {\n    return <IQuerySourceWrapper> operation.metadata?.scopedSource;\n  }\n\n  /**\n   * Assign a source wrapper to the given operation.\n   * The operation is copied and returned.\n   * @param operation An operation.\n   * @param source A source wrapper.\n   */\n  public static assignOperationSource<O extends Algebra.Operation>(operation: O, source: IQuerySourceWrapper): O {\n    operation = { ...operation };\n    operation.metadata = operation.metadata ? { ...operation.metadata } : {};\n    operation.metadata.scopedSource = source;\n    return operation;\n  }\n\n  /**\n   * Remove the source wrapper from the given operation.\n   * The operation is mutated.\n   * @param operation An operation.\n   */\n  public static removeOperationSource(operation: Algebra.Operation): void {\n    delete operation.metadata?.scopedSource;\n    if (operation.metadata && Object.keys(operation.metadata).length === 0) {\n      delete operation.metadata;\n    }\n  }\n\n  /**\n   * Check if the given shape accepts the given query operation.\n   * @param shape A shape to test the query operation against.\n   * @param operation A query operation to test.\n   * @param options Additional options to consider.\n   * @param options.joinBindings If additional bindings will be pushed down to the source for joining.\n   * @param options.filterBindings If additional bindings will be pushed down to the source for filtering.\n   */\n  public static doesShapeAcceptOperation(\n    shape: FragmentSelectorShape,\n    operation: Algebra.Operation,\n    options?: {\n      joinBindings?: boolean;\n      filterBindings?: boolean;\n    },\n  ): boolean {\n    if (shape.type === 'conjunction') {\n      return shape.children.every(child => ActorQueryOperation.doesShapeAcceptOperation(child, operation, options));\n    }\n    if (shape.type === 'disjunction') {\n      return shape.children.some(child => ActorQueryOperation.doesShapeAcceptOperation(child, operation, options));\n    }\n    if (shape.type === 'arity') {\n      return ActorQueryOperation.doesShapeAcceptOperation(shape.child, operation, options);\n    }\n\n    if ((options?.joinBindings && !shape.joinBindings) ?? (options?.filterBindings && !shape.filterBindings)) {\n      return false;\n    }\n\n    if (shape.operation.operationType === 'type') {\n      return shape.operation.type === 'project' || shape.operation.type === operation.type;\n    }\n    return shape.operation.pattern.type === operation.type;\n  }\n}\n\nexport interface IActionQueryOperation extends IAction {\n  /**\n   * The query operation to handle.\n   */\n  operation: Algebra.Operation;\n}\n\nexport type IActorQueryOperationArgs = IActorArgs<IActionQueryOperation, IActorTest, IQueryOperationResult>;\n\nexport type MediatorQueryOperation = Mediate<IActionQueryOperation, IQueryOperationResult>;\n\nexport interface IBaseExpressionContext {\n  now?: Date;\n  baseIRI?: string;\n  extensionFunctionCreator?: (functionNamedNode: RDF.NamedNode) =>\n  ((args: RDF.Term[]) => Promise<RDF.Term>) | undefined;\n  functionArgumentsCache?: FunctionArgumentsCache;\n}\n\nexport interface ISyncExpressionContext extends IBaseExpressionContext {\n  bnode: (input?: string | undefined) => RDF.BlankNode;\n}\n\nexport interface IAsyncExpressionContext extends IBaseExpressionContext {\n  bnode: (input?: string | undefined) => Promise<RDF.BlankNode>;\n  exists?: (expr: Algebra.ExistenceExpression, bindings: Bindings) => Promise<boolean>;\n}\n","import { KeysInitQuery, KeysQueryOperation } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport { cachifyMetadata } from '@comunica/metadata';\nimport type {\n  IQueryOperationResult,\n  IPhysicalQueryPlanLogger,\n  IActionContext,\n  IMetadata,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport type { IActionQueryOperation, IActorQueryOperationArgs } from './ActorQueryOperation';\nimport { ActorQueryOperation } from './ActorQueryOperation';\n\n/**\n * A base implementation for query operation actors for a specific operation type.\n */\nexport abstract class ActorQueryOperationTyped<O extends Algebra.Operation> extends ActorQueryOperation {\n  public readonly operationName: string;\n\n  protected constructor(args: IActorQueryOperationArgs, operationName: string) {\n    super(<any> { ...args, operationName });\n    if (!this.operationName) {\n      throw new Error('A valid \"operationName\" argument must be provided.');\n    }\n  }\n\n  public async test(action: IActionQueryOperation): Promise<IActorTest> {\n    if (!action.operation) {\n      throw new Error('Missing field \\'operation\\' in a query operation action.');\n    }\n    if (action.operation.type !== this.operationName) {\n      throw new Error(`Actor ${this.name} only supports ${this.operationName} operations, but got ${\n        action.operation.type}`);\n    }\n    const operation: O = <O> action.operation;\n    return this.testOperation(operation, action.context);\n  }\n\n  public async run(action: IActionQueryOperation): Promise<IQueryOperationResult> {\n    // Log to physical plan\n    const physicalQueryPlanLogger: IPhysicalQueryPlanLogger | undefined = action.context\n      .get(KeysInitQuery.physicalQueryPlanLogger);\n    if (physicalQueryPlanLogger) {\n      physicalQueryPlanLogger.logOperation(\n        action.operation.type,\n        undefined,\n        action.operation,\n        action.context.get(KeysInitQuery.physicalQueryPlanNode),\n        this.name,\n        {},\n      );\n      action.context = action.context.set(KeysInitQuery.physicalQueryPlanNode, action.operation);\n    }\n\n    const operation: O = <O> action.operation;\n    const subContext = action.context.set(KeysQueryOperation.operation, operation);\n    const output: IQueryOperationResult = await this.runOperation(operation, subContext);\n    if ('metadata' in output) {\n      output.metadata = <any>\n        cachifyMetadata<IMetadata<RDF.QuadTermName | RDF.Variable>, RDF.QuadTermName | RDF.Variable>(output.metadata);\n    }\n    return output;\n  }\n\n  protected abstract testOperation(operation: O, context: IActionContext): Promise<IActorTest>;\n\n  protected abstract runOperation(operation: O, context: IActionContext):\n  Promise<IQueryOperationResult>;\n}\n","import type { Algebra } from 'sparqlalgebrajs';\nimport type { IActorQueryOperationArgs, MediatorQueryOperation } from './ActorQueryOperation';\nimport { ActorQueryOperationTyped } from './ActorQueryOperationTyped';\n\n/**\n * A base implementation for query operation actors for a specific operation type that have a query operation mediator.\n */\nexport abstract class ActorQueryOperationTypedMediated<O extends Algebra.Operation> extends ActorQueryOperationTyped<O>\n  implements IActorQueryOperationTypedMediatedArgs {\n  public readonly mediatorQueryOperation: MediatorQueryOperation;\n\n  public constructor(args: IActorQueryOperationTypedMediatedArgs, operationName: string) {\n    super(args, operationName);\n  }\n}\n\nexport interface IActorQueryOperationTypedMediatedArgs extends IActorQueryOperationArgs {\n  mediatorQueryOperation: MediatorQueryOperation;\n}\n","import type { IActorTest, IBusArgs } from '@comunica/core';\nimport { BusIndexed } from '@comunica/core';\nimport type { IQueryOperationResult } from '@comunica/types';\nimport type { ActorQueryOperation, IActionQueryOperation } from './ActorQueryOperation';\n\n/**\n * Indexed bus for query operations.\n */\nexport class BusQueryOperation\n  extends BusIndexed<ActorQueryOperation, IActionQueryOperation, IActorTest, IQueryOperationResult> {\n  public constructor(args: IBusArgs) {\n    super({\n      ...args,\n      actorIdentifierFields: [ 'operationName' ],\n      actionIdentifierFields: [ 'operation', 'type' ],\n    });\n  }\n}\n","import type { AsyncIterator, TransformIteratorOptions } from 'asynciterator';\nimport { TransformIterator } from 'asynciterator';\n\ndeclare type MaybePromise<T> = T | Promise<T>;\ndeclare type SourceExpression<T> = MaybePromise<AsyncIterator<T>> | (() => MaybePromise<AsyncIterator<T>>);\n\n/**\n * A TransformIterator with a callback for when this iterator is closed in any way.\n */\nexport class ClosableTransformIterator<S, D = S> extends TransformIterator<S, D> {\n  private readonly onClose: () => void;\n\n  public constructor(source: SourceExpression<S>, options: TransformIteratorOptions<S> & { onClose: () => void }) {\n    super(source, options);\n    this.onClose = options.onClose;\n  }\n\n  protected override _end(destroy: boolean): void {\n    this.onClose();\n    super._end(destroy);\n  }\n}\n","import type { IAction, IActorArgs, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type * as RDF from '@rdfjs/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica actor for query-parse events.\n *\n * Actor types:\n * * Input:  IActionSparqlParse:      A SPARQL query string.\n * * Test:   <none>\n * * Output: IActorSparqlParseOutput: A parsed query in SPARQL query algebra.\n *\n * @see IActionQueryParse\n * @see IActorQueryParseOutput\n */\nexport abstract class ActorQueryParse extends Actor<IActionQueryParse, IActorTest, IActorQueryParseOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorQueryParseArgs) {\n    super(args);\n  }\n}\n\nexport interface IActionQueryParse extends IAction {\n  /**\n   * A query.\n   */\n  query: string;\n  /**\n   * The query format.\n   */\n  queryFormat?: RDF.QueryFormat;\n  /**\n   * The query's default base IRI.\n   */\n  baseIRI?: string;\n}\n\nexport interface IActorQueryParseOutput extends IActorOutput {\n  /**\n   * A parsed query in SPARQL algebra.\n   */\n  operation: Algebra.Operation;\n  /**\n   * An optionally overridden base IRI.\n   */\n  baseIRI?: string;\n}\n\nexport type IActorQueryParseArgs = IActorArgs<IActionQueryParse, IActorTest, IActorQueryParseOutput>;\n\nexport type MediatorQueryParse = Mediate<IActionQueryParse, IActorQueryParseOutput>;\n","import type { IAction, IActorArgs, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { QueryFormatType, IQueryExplained, IActionContext, IQueryOperationResult } from '@comunica/types';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * A comunica actor for query-process events.\n *\n * Actor types:\n * * Input:  IActionQueryProcess:      The input query to process.\n * * Test:   <none>\n * * Output: IActorQueryProcessOutput: Output of the query processing.\n *\n * @see IActionQueryProcess\n * @see IActorQueryProcessOutput\n */\nexport abstract class ActorQueryProcess extends Actor<IActionQueryProcess, IActorTest, IActorQueryProcessOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorQueryProcessArgs) {\n    super(args);\n  }\n}\n\nexport interface IActionQueryProcess extends IAction {\n  /**\n   * The query to process.\n   */\n  query: QueryFormatType;\n}\n\nexport interface IActorQueryProcessOutput extends IActorOutput {\n  /**\n   * Result of the query processing.\n   */\n  result: IQueryOperationResult | IQueryExplained;\n}\n\nexport type IActorQueryProcessArgs = IActorArgs<\nIActionQueryProcess,\nIActorTest,\nIActorQueryProcessOutput\n>;\n\nexport type MediatorQueryProcess = Mediate<\nIActionQueryProcess,\nIActorQueryProcessOutput\n>;\n\nexport interface IQueryProcessSequential {\n  parse: (query: QueryFormatType, context: IActionContext) => Promise<IQueryProcessSequentialOutput>;\n  optimize: (operation: Algebra.Operation, context: IActionContext) => Promise<IQueryProcessSequentialOutput>;\n  evaluate: (operation: Algebra.Operation, context: IActionContext) => Promise<IQueryOperationResult>;\n}\n\nexport interface IQueryProcessSequentialOutput {\n  operation: Algebra.Operation;\n  context: IActionContext;\n}\n","import type {\n  IActionAbstractMediaTyped,\n  IActionAbstractMediaTypedHandle,\n  IActionAbstractMediaTypedMediaTypeFormats,\n  IActionAbstractMediaTypedMediaTypes,\n  IActorArgsMediaTyped,\n  IActorOutputAbstractMediaTyped,\n  IActorOutputAbstractMediaTypedHandle,\n  IActorOutputAbstractMediaTypedMediaTypeFormats,\n  IActorOutputAbstractMediaTypedMediaTypes,\n  IActorTestAbstractMediaTyped,\n  IActorTestAbstractMediaTypedHandle,\n  IActorTestAbstractMediaTypedMediaTypeFormats,\n  IActorTestAbstractMediaTypedMediaTypes,\n} from '@comunica/actor-abstract-mediatyped';\nimport {\n  ActorAbstractMediaTyped,\n} from '@comunica/actor-abstract-mediatyped';\nimport type { IAction, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport type { IQueryOperationResultBase, IActionContext } from '@comunica/types';\n\n/**\n * A comunica actor for query-result-serialize events.\n *\n * Actor types:\n * * Input:  IActionSparqlSerialize:      SPARQL bindings or a quad stream.\n * * Test:   <none>\n * * Output: IActorQueryResultSerializeOutput: A text stream.\n *\n * @see IActionSparqlSerialize\n * @see IActorQueryResultSerializeOutput\n */\nexport abstract class ActorQueryResultSerialize\n  extends ActorAbstractMediaTyped<IActionSparqlSerialize, IActorTest, IActorQueryResultSerializeOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorQueryResultSerializeArgs) {\n    super(args);\n  }\n}\n\nexport type IActionRootQueryResultSerialize = IActionAbstractMediaTyped<IActionSparqlSerialize>;\nexport type IActorTestRootQueryResultSerialize = IActorTestAbstractMediaTyped<IActorTest>;\nexport type IActorOutputRootQueryResultSerialize = IActorOutputAbstractMediaTyped<IActorQueryResultSerializeOutput>;\n\nexport type IActionQueryResultSerializeHandle = IActionAbstractMediaTypedHandle<IActionSparqlSerialize>;\nexport type IActorTestQueryResultSerializeHandle = IActorTestAbstractMediaTypedHandle<IActorTest>;\nexport type IActorOutputQueryResultSerializeHandle = IActorOutputAbstractMediaTypedHandle<\nIActorQueryResultSerializeOutput\n>;\n\nexport type IActionQueryResultSerializeMediaTypes = IActionAbstractMediaTypedMediaTypes;\nexport type IActorTestQueryResultSerializeMediaTypes = IActorTestAbstractMediaTypedMediaTypes;\nexport type IActorOutputQueryResultSerializeMediaTypes = IActorOutputAbstractMediaTypedMediaTypes;\n\nexport type IActionQueryResultSerializeMediaTypeFormats = IActionAbstractMediaTypedMediaTypeFormats;\nexport type IActorTestQueryResultSerializeMediaTypeFormats = IActorTestAbstractMediaTypedMediaTypeFormats;\nexport type IActorOutputQueryResultSerializeMediaTypeFormats = IActorOutputAbstractMediaTypedMediaTypeFormats;\n\nexport interface IActionSparqlSerialize extends IAction, IQueryOperationResultBase {\n  context: IActionContext;\n}\n\nexport interface IActorQueryResultSerializeOutput extends IActorOutput {\n  /**\n   * A readable string stream in a certain SPARQL serialization that was serialized.\n   */\n  data: NodeJS.ReadableStream;\n}\n\nexport type IActorQueryResultSerializeArgs = IActorArgsMediaTyped<\nIActionSparqlSerialize,\nIActorTest,\nIActorQueryResultSerializeOutput\n>;\n\nexport type MediatorQueryResultSerializeHandle = Mediate<\nIActionQueryResultSerializeHandle,\nIActorOutputQueryResultSerializeHandle,\nIActorTestQueryResultSerializeHandle\n>;\n\nexport type MediatorQueryResultSerializeMediaTypes = Mediate<\nIActionQueryResultSerializeMediaTypes,\nIActorOutputQueryResultSerializeMediaTypes,\nIActorTestQueryResultSerializeMediaTypes\n>;\n\nexport type MediatorQueryResultSerializeMediaTypeFormats = Mediate<\n  IActionQueryResultSerializeMediaTypeFormats,\nIActorOutputQueryResultSerializeMediaTypeFormats,\nIActorTestQueryResultSerializeMediaTypeFormats\n>;\n","import type { IActorArgsMediaTypedFixed } from '@comunica/actor-abstract-mediatyped';\nimport { ActorAbstractMediaTypedFixed } from '@comunica/actor-abstract-mediatyped';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext } from '@comunica/types';\nimport type {\n  IActionSparqlSerialize,\n  IActorQueryResultSerializeOutput,\n  ActorQueryResultSerialize,\n} from './ActorQueryResultSerialize';\n\n/**\n * A base actor for listening to SPARQL serialize events that has fixed media types.\n *\n * Actor types:\n * * Input:  IActionSparqlSerializeOrMediaType:      A serialize input or a media type input.\n * * Test:   <none>\n * * Output: IActorQueryResultSerializeOutputOrMediaType: The serialized quads.\n *\n * @see IActionInit\n */\nexport abstract class ActorQueryResultSerializeFixedMediaTypes extends ActorAbstractMediaTypedFixed<\nIActionSparqlSerialize,\nIActorTest,\nIActorQueryResultSerializeOutput\n>\n  implements IActorQueryResultSerializeFixedMediaTypesArgs, ActorQueryResultSerialize {\n  /* eslint-disable max-len */\n  /**\n   * TODO: rm this (and eslint-disable) once we remove the abstract media typed actor\n   * @param args - @defaultNested {<cbqrs:components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorQueryResultSerializeFixedMediaTypesArgs) {\n    super(args);\n  }\n  /* eslint-enable max-len */\n\n  public async testHandleChecked(_action: IActionSparqlSerialize, _context: IActionContext): Promise<boolean> {\n    return true;\n  }\n}\n\nexport interface IActorQueryResultSerializeFixedMediaTypesArgs\n  extends IActorArgsMediaTypedFixed<IActionSparqlSerialize, IActorTest, IActorQueryResultSerializeOutput> {}\n","import type { IAction, IActorArgs, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { IQuerySourceWrapper, QuerySourceUnidentifiedExpanded } from '@comunica/types';\n\n/**\n * A comunica actor for query-source-identify events.\n *\n * Actor types:\n * * Input:  IActionQuerySourceIdentify:      An unidentified query source.\n * * Test:   <none>\n * * Output: IActorQuerySourceIdentifyOutput: An identified query source.\n *\n * @see IActionQuerySourceIdentify\n * @see IActorQuerySourceIdentifyOutput\n */\nexport abstract class ActorQuerySourceIdentify\n  extends Actor<IActionQuerySourceIdentify, IActorTest, IActorQuerySourceIdentifyOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorQuerySourceIdentifyArgs) {\n    super(args);\n  }\n}\n\nexport interface IActionQuerySourceIdentify extends IAction {\n  /**\n   * An unidentified query source.\n   */\n  querySourceUnidentified: QuerySourceUnidentifiedExpanded;\n}\n\nexport interface IActorQuerySourceIdentifyOutput extends IActorOutput {\n  /**\n   * An identified query source.\n   */\n  querySource: IQuerySourceWrapper;\n}\n\nexport type IActorQuerySourceIdentifyArgs = IActorArgs<\nIActionQuerySourceIdentify,\nIActorTest,\nIActorQuerySourceIdentifyOutput\n>;\n\nexport type MediatorQuerySourceIdentify = Mediate<\nIActionQuerySourceIdentify,\nIActorQuerySourceIdentifyOutput\n>;\n","import type { BindingsFactory } from '@comunica/bindings-factory';\nimport { ClosableTransformIterator } from '@comunica/bus-query-operation';\nimport { validateMetadataQuads } from '@comunica/metadata';\nimport type { BindingsStream, MetadataBindings, MetadataQuads, TermsOrder } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport { DataFactory } from 'rdf-data-factory';\nimport { termToString } from 'rdf-string';\nimport type { QuadTermName } from 'rdf-terms';\nimport {\n  forEachTermsNested,\n  getTermsNested,\n  getValueNestedPath,\n  reduceTermsNested,\n  someTerms,\n  uniqTerms,\n} from 'rdf-terms';\nimport { matchPatternMappings } from 'rdf-terms/lib/QuadTermUtil';\nimport type { Algebra } from 'sparqlalgebrajs';\n\nconst DF = new DataFactory();\n\n/**\n * Convert an iterator of quads to an iterator of bindings.\n * @param quads The quads to convert.\n * @param pattern The pattern to get variables from to determine bindings.\n *                All quads are also assumed to match the pattern.\n * @param bindingsFactory The factory for creating bindings.\n * @param unionDefaultGraph If union default graph mode is enabled.\n *                          If true, variable graphs will match all graphs, including the default graph.\n *                          If false, variable graphs will only match named graphs, and not the default graph.\n */\nexport function quadsToBindings(\n  quads: AsyncIterator<RDF.Quad>,\n  pattern: Algebra.Pattern,\n  bindingsFactory: BindingsFactory,\n  unionDefaultGraph: boolean,\n): BindingsStream {\n  const variables = getVariables(pattern);\n\n  // If non-default-graph triples need to be filtered out\n  const filterNonDefaultQuads = pattern.graph.termType === 'Variable' && !unionDefaultGraph;\n\n  // Detect duplicate variables in the pattern\n  const duplicateElementLinks: Record<string, QuadTermName[][]> | undefined = getDuplicateElementLinks(pattern);\n\n  // Convenience datastructure for mapping quad elements to variables\n  const elementVariables: Record<string, string> = reduceTermsNested(\n    pattern,\n    (acc: Record<string, string>, term: RDF.Term, keys: QuadTermName[]) => {\n      if (term.termType === 'Variable') {\n        acc[keys.join('_')] = term.value;\n      }\n      return acc;\n    },\n    {},\n  );\n\n  // Optionally filter, and construct bindings\n  const it = new ClosableTransformIterator(async() => {\n    let filteredOutput = quads;\n\n    // SPARQL query semantics allow graph variables to only match with named graphs, excluding the default graph\n    // But this is not the case when using union default graph semantics\n    if (filterNonDefaultQuads) {\n      filteredOutput = filteredOutput.filter(quad => quad.graph.termType !== 'DefaultGraph');\n    }\n\n    // If there are duplicate variables in the search pattern,\n    // make sure that we filter out the triples that don't have equal values for those triple elements,\n    // as the rdf-resolve-quad-pattern bus ignores variable names.\n    if (duplicateElementLinks) {\n      filteredOutput = filteredOutput.filter((quad) => {\n        for (const keyLeft in duplicateElementLinks) {\n          const keysLeft: QuadTermName[] = <QuadTermName[]> keyLeft.split('_');\n          const valueLeft = getValueNestedPath(quad, keysLeft);\n          for (const keysRight of duplicateElementLinks[keyLeft]) {\n            if (!valueLeft.equals(getValueNestedPath(quad, keysRight))) {\n              return false;\n            }\n          }\n        }\n        return true;\n      });\n    }\n\n    return filteredOutput.map<RDF.Bindings>(quad => bindingsFactory\n      .bindings(Object.keys(elementVariables).map((key) => {\n        const keys: QuadTermName[] = <any>key.split('_');\n        const variable = elementVariables[key];\n        const term = getValueNestedPath(quad, keys);\n        return [ DF.variable(variable), term ];\n      })));\n  }, {\n    autoStart: false,\n    onClose: () => quads.destroy(),\n  });\n\n  // Set the metadata property\n  setMetadata(it, quads, elementVariables, variables, filterNonDefaultQuads || Boolean(duplicateElementLinks));\n\n  return it;\n}\n\n/**\n * Check if a term is a variable.\n * @param {RDF.Term} term An RDF term.\n * @return {any} If the term is a variable or blank node.\n */\nexport function isTermVariable(term: RDF.Term): term is RDF.Variable {\n  return term.termType === 'Variable';\n}\n\n/**\n * Get all variables in the given pattern.\n * No duplicates are returned.\n * @param {RDF.BaseQuad} pattern A quad pattern.\n */\nexport function getVariables(pattern: RDF.BaseQuad): RDF.Variable[] {\n  return uniqTerms(getTermsNested(pattern).filter(isTermVariable));\n}\n\n/**\n * A helper function to find a hash with quad elements that have duplicate variables.\n *\n * @param {RDF.Quad} pattern A quad pattern.\n *\n * @return {{[p: string]: string[]}} If no equal variable names are present in the four terms, this returns undefined.\n *                                   Otherwise, this maps quad elements paths (['subject'], ['predicate'], ['object'],\n *                                   ['graph'])\n *                                   to the list of quad elements it shares a variable name with.\n *                                   For quoted triples, paths such as ['subject', 'object'] may occur.\n *                                   If no links for a certain element exist, this element will\n *                                   not be included in the hash.\n *                                   Note 1: Quad elements will never have a link to themselves.\n *                                           So this can never occur: { subject: [[ 'subject']] },\n *                                           instead 'null' would be returned.\n *                                   Note 2: Links only exist in one direction,\n *                                           this means that { subject: [[ 'predicate']], predicate: [[ 'subject' ]] }\n *                                           will not occur, instead only { subject: [[ 'predicate']] }\n *                                           will be returned.\n *                                   Note 3: Keys can also be paths, but they are delimited by '_', such as:\n *                                           { subject_object_subject: [[ 'predicate']] }\n */\nexport function getDuplicateElementLinks(pattern: RDF.BaseQuad): Record<string, QuadTermName[][]> | undefined {\n  // Collect a variable to quad elements mapping.\n  const variableElements: Record<string, QuadTermName[][]> = {};\n  let duplicateVariables = false;\n  forEachTermsNested(pattern, (value, keys) => {\n    if (value.termType === 'Variable') {\n      const val = termToString(value);\n      const length = (variableElements[val] || (variableElements[val] = [])).push(keys);\n      duplicateVariables = duplicateVariables || length > 1;\n    }\n  });\n\n  if (!duplicateVariables) {\n    return;\n  }\n\n  // Collect quad element to elements with equal variables mapping.\n  const duplicateElementLinks: Record<string, QuadTermName[][]> = {};\n  for (const variable in variableElements) {\n    const elements = variableElements[variable];\n    const remainingElements = elements.slice(1);\n    // Only store the elements that have at least one equal element.\n    if (remainingElements.length > 0) {\n      duplicateElementLinks[elements[0].join('_')] = remainingElements;\n    }\n  }\n\n  return duplicateElementLinks;\n}\n\n/**\n * Set the metadata of the bindings stream derived from the metadata of the quads stream.\n *\n * @param {BindingsStream} bindings The bindings stream that will receive the metadata property.\n * @param {AsyncIterator<Quad>} quads The quads stream that is guaranteed to emit the metadata property.\n * @param elementVariables Mapping of quad term name to variable name.\n * @param variables Variables to include in the metadata\n * @param forceEstimateCardinality Set the cardinality to estimate\n * @return {() => Promise<{[p: string]: any}>} A lazy promise behind a callback resolving to a metadata object.\n */\nexport function setMetadata(\n  bindings: BindingsStream,\n  quads: AsyncIterator<RDF.Quad>,\n  elementVariables: Record<string, string>,\n  variables: RDF.Variable[],\n  forceEstimateCardinality: boolean,\n): void {\n  const getMetadataCb = (metadataRaw: Record<string, any>): void => {\n    if (!('canContainUndefs' in metadataRaw)) {\n      metadataRaw.canContainUndefs = false;\n    }\n    if (forceEstimateCardinality) {\n      metadataRaw.cardinality.type = 'estimate';\n    }\n    bindings.setProperty(\n      'metadata',\n      quadsMetadataToBindingsMetadata(validateMetadataQuads(metadataRaw), elementVariables, variables),\n    );\n\n    // Propagate metadata invalidations\n    if (metadataRaw.state) {\n      metadataRaw.state.addInvalidateListener(() => {\n        setMetadata(bindings, quads, elementVariables, variables, forceEstimateCardinality);\n      });\n    }\n  };\n\n  const metadata = quads.getProperty('metadata');\n  if (metadata) {\n    // This is to enforce sync metadata setting, because AsyncIterator will always call it async,\n    // even if the property was already defined.\n    getMetadataCb(metadata);\n  } else {\n    quads.getProperty('metadata', getMetadataCb);\n  }\n}\n\n/**\n * Convert the metadata of quads to the metadata of bindings.\n * @param metadataQuads Quads metadata.\n * @param elementVariables A mapping from quad elements to variables.\n * @param variables The variables in the bindings.\n */\nexport function quadsMetadataToBindingsMetadata(\n  metadataQuads: MetadataQuads,\n  elementVariables: Record<string, string>,\n  variables: RDF.Variable[],\n): MetadataBindings {\n  return {\n    ...metadataQuads,\n    canContainUndefs: false,\n    order: metadataQuads.order ?\n      quadsOrderToBindingsOrder(metadataQuads.order, elementVariables) :\n      undefined,\n    availableOrders: metadataQuads.availableOrders ?\n      metadataQuads.availableOrders.map(orderDef => ({\n        cost: orderDef.cost,\n        terms: quadsOrderToBindingsOrder(orderDef.terms, elementVariables),\n      })) :\n      undefined,\n    variables,\n  };\n}\n\n/**\n * Convert the quads order metadata element to a bindings order metadata element.\n * @param quadsOrder Quads order.\n * @param elementVariables A mapping from quad elements to variables.\n */\nexport function quadsOrderToBindingsOrder(\n  quadsOrder: TermsOrder<RDF.QuadTermName>,\n  elementVariables: Record<string, string>,\n): TermsOrder<RDF.Variable> {\n  const mappedVariables: Record<string, boolean> = {};\n  return <TermsOrder<RDF.Variable>> quadsOrder.map((entry) => {\n    // Omit entries that do not map to a variable\n    const variableName = elementVariables[entry.term];\n    if (!variableName) {\n      // eslint-disable-next-line array-callback-return\n      return;\n    }\n\n    // Omit entries that have been mapped already\n    if (mappedVariables[variableName]) {\n      // eslint-disable-next-line array-callback-return\n      return;\n    }\n\n    mappedVariables[variableName] = true;\n    return {\n      term: DF.variable(variableName),\n      direction: entry.direction,\n    };\n  }).filter(Boolean);\n}\n\n/**\n * Perform post-match-filtering if the source does not support quoted triple filtering,\n * but we have a variable inside a quoted triple.\n * @param pattern The current quad pattern operation.\n * @param it The iterator to filter.\n */\nexport function filterMatchingQuotedQuads(pattern: RDF.BaseQuad, it: AsyncIterator<RDF.Quad>): AsyncIterator<RDF.Quad> {\n  if (someTerms(pattern, term => term.termType === 'Quad')) {\n    it = it.filter(quad => matchPatternMappings(quad, pattern));\n  }\n  return it;\n}\n","import type { IAction, IActorArgs, IActorOutput, Mediate, IActorTest } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { IJoinEntryWithMetadata } from '@comunica/types';\n\n/**\n * A comunica actor for rdf-join-entries-sort events.\n *\n * Actor types:\n * * Input:  IActionRdfJoinEntriesSort:      Join entries.\n * * Test:   IActorTest:                     Test result.\n * * Output: IActorRdfJoinEntriesSortOutput: The sorted join entries.\n *\n * @see IActionRdfJoinEntriesSort\n * @see IActorTest\n * @see IActorRdfJoinEntriesSortOutput\n */\nexport abstract class ActorRdfJoinEntriesSort\n  extends Actor<IActionRdfJoinEntriesSort, IActorTest, IActorRdfJoinEntriesSortOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorRdfJoinEntriesSortArgs) {\n    super(args);\n  }\n}\n\nexport interface IActionRdfJoinEntriesSort extends IAction {\n  /**\n   * The array of streams to join.\n   */\n  entries: IJoinEntryWithMetadata[];\n}\n\nexport interface IActorRdfJoinEntriesSortOutput extends IActorOutput {\n  /**\n   * The array of sorted streams.\n   */\n  entries: IJoinEntryWithMetadata[];\n}\n\nexport type IActorRdfJoinEntriesSortArgs = IActorArgs<\nIActionRdfJoinEntriesSort,\nIActorTest,\nIActorRdfJoinEntriesSortOutput\n>;\n\nexport type MediatorRdfJoinEntriesSort = Mediate<\nIActionRdfJoinEntriesSort,\nIActorRdfJoinEntriesSortOutput\n>;\n","import type { IAction, IActorArgs, IActorOutput, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { IMediatorTypeAccuracy } from '@comunica/mediatortype-accuracy';\nimport type { IJoinEntry } from '@comunica/types';\n\n/**\n * A comunica actor for rdf-join-selectivity events.\n *\n * Actor types:\n * * Input:  IActionRdfJoinSelectivity:      Join entries.\n * * Test:   IMediatorTypeAccuracy:          The accuracy of the selectivity calculator.\n * * Output: IActorRdfJoinSelectivityOutput: The calculated join selectivity.\n *\n * @see IActionRdfJoinSelectivity\n * @see IActorRdfJoinSelectivityTest\n * @see IActorRdfJoinSelectivityOutput\n */\nexport abstract class ActorRdfJoinSelectivity\n  extends Actor<IActionRdfJoinSelectivity, IMediatorTypeAccuracy, IActorRdfJoinSelectivityOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorRdfJoinSelectivityArgs) {\n    super(args);\n  }\n}\n\nexport interface IActionRdfJoinSelectivity extends IAction {\n  /**\n   * The array of streams to join.\n   */\n  entries: IJoinEntry[];\n}\n\nexport interface IActorRdfJoinSelectivityOutput extends IActorOutput {\n  /**\n   * A selectivity factor in the range [0, 1].\n   * A value close to 1 indicates a low selectivity,\n   * which means that the operations in the join entries are highly unrelated.\n   * A value close to 0 indicates a high selectivity,\n   * which means that the operations in the join entries are highly related, and have a high chance of reducing .\n   */\n  selectivity: number;\n}\n\nexport type IActorRdfJoinSelectivityArgs = IActorArgs<\nIActionRdfJoinSelectivity,\nIMediatorTypeAccuracy,\nIActorRdfJoinSelectivityOutput\n>;\n\nexport type MediatorRdfJoinSelectivity = Mediate<\nIActionRdfJoinSelectivity,\nIActorRdfJoinSelectivityOutput,\nIMediatorTypeAccuracy\n>;\n","import type { MediatorRdfJoinEntriesSort } from '@comunica/bus-rdf-join-entries-sort';\nimport type {\n  MediatorRdfJoinSelectivity,\n} from '@comunica/bus-rdf-join-selectivity';\nimport { KeysInitQuery } from '@comunica/context-entries';\nimport type { IAction, IActorArgs, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport { cachifyMetadata, MetadataValidationState } from '@comunica/metadata';\nimport type {\n  IQueryOperationResultBindings,\n  MetadataBindings,\n  IPhysicalQueryPlanLogger,\n  Bindings,\n  IActionContext,\n  IJoinEntry,\n  IJoinEntryWithMetadata,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport { instrumentIterator } from './instrumentIterator';\n\nconst DF = new DataFactory();\n\n/**\n * A comunica actor for joining 2 binding streams.\n *\n * Actor types:\n * * Input:  IActionRdfJoin:                The streams that need to be joined.\n * * Test:   IMediatorTypeJoinCoefficients: Join coefficients.\n * * Output: IActorRdfJoinOutput:           The resulting joined stream.\n *\n * @see IActionRdfJoin\n * @see IActorQueryOperationOutput\n */\nexport abstract class ActorRdfJoin\n  extends Actor<IActionRdfJoin, IMediatorTypeJoinCoefficients, IQueryOperationResultBindings> {\n  public readonly mediatorJoinSelectivity: MediatorRdfJoinSelectivity;\n\n  /**\n   * If this actor will be logged in the debugger and physical query plan logger\n   */\n  public includeInLogs = true;\n  public readonly logicalType: LogicalJoinType;\n  public readonly physicalName: string;\n  /**\n   * Can be used by subclasses to indicate the max or min number of streams that can be joined.\n   * 0 for infinity.\n   * By default, this indicates the max number, but can be inverted by setting limitEntriesMin to true.\n   */\n  protected readonly limitEntries: number;\n  /**\n   * If true, the limitEntries field is a lower limit,\n   * otherwise, it is an upper limit.\n   */\n  protected readonly limitEntriesMin: boolean;\n  /**\n   * If this actor can handle undefs in the bindings.\n   */\n  protected readonly canHandleUndefs: boolean;\n  /**\n   * If this join operator will not invoke any other join or query operations below,\n   * and can therefore be considered a leaf of the join plan.\n   */\n  protected readonly isLeaf: boolean;\n\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   * @param options - Actor-specific join options.\n   */\n  public constructor(args: IActorRdfJoinArgs, options: IActorRdfJoinInternalOptions) {\n    super(args);\n    this.logicalType = options.logicalType;\n    this.physicalName = options.physicalName;\n    this.limitEntries = options.limitEntries ?? Number.POSITIVE_INFINITY;\n    this.limitEntriesMin = options.limitEntriesMin ?? false;\n    this.canHandleUndefs = options.canHandleUndefs ?? false;\n    this.isLeaf = options.isLeaf ?? true;\n  }\n\n  /**\n   * Creates a hash of the given bindings by concatenating the results of the given variables.\n   * This function will not sort the variables and expects them to be in the same order for every call.\n   * @param {Bindings} bindings\n   * @param {string[]} variables\n   * @returns {string} A hash string.\n   */\n  public static hash(bindings: Bindings, variables: RDF.Variable[]): string {\n    return variables\n      .map((variable) => {\n        const term = bindings.get(variable);\n        if (term) {\n          return term.value;\n        }\n        return '';\n      })\n      .join('');\n  }\n\n  /**\n   * Returns an array containing all the variable names that occur in all bindings streams.\n   * @param {MetadataBindings[]} metadatas An array of optional metadata objects for the entries.\n   * @returns {RDF.Variable[]} An array of variables.\n   */\n  public static overlappingVariables(metadatas: MetadataBindings[]): RDF.Variable[] {\n    const variables = metadatas.map(metadata => metadata.variables);\n    let baseArray = variables[0];\n    for (const array of variables.slice(1)) {\n      baseArray = baseArray.filter(el => array.some(value => value.value === el.value));\n    }\n    return baseArray;\n  }\n\n  /**\n   * Returns the variables that will occur in the joined bindings.\n   * @param {MetadataBindings[]} metadatas An array of metadata objects for the entries.\n   * @returns {RDF.Variable[]} An array of joined variables.\n   */\n  public static joinVariables(metadatas: MetadataBindings[]): RDF.Variable[] {\n    return [ ...new Set(metadatas.flatMap(metadata => metadata.variables.map(variable => variable.value))) ]\n      .map(variable => DF.variable(variable));\n  }\n\n  /**\n   * Returns the result of joining bindings, or `null` if no join is possible.\n   * @param {Bindings[]} bindings\n   * @returns {Bindings}\n   */\n\n  public static joinBindings(...bindings: Bindings[]): Bindings | null {\n    if (bindings.length === 0) {\n      return null;\n    }\n    if (bindings.length === 1) {\n      return bindings[0];\n    }\n\n    let acc: Bindings = bindings[0];\n    for (const binding of bindings.slice(1)) {\n      const merged = acc.merge(binding);\n      if (!merged) {\n        return null;\n      }\n      acc = merged;\n    }\n    return acc;\n  }\n\n  /**\n   * Get the estimated number of items from the given metadata.\n   * @param {Record<string, any>} metadata A metadata object.\n   * @return {number} The estimated number of items, or `Infinity` if cardinality is falsy.\n   */\n  public static getCardinality(metadata: MetadataBindings): RDF.QueryResultCardinality {\n    return metadata.cardinality;\n  }\n\n  /**\n   * Obtain the metadata from all given join entries.\n   * @param entries Join entries.\n   */\n  public static async getMetadatas(entries: IJoinEntry[]): Promise<MetadataBindings[]> {\n    return await Promise.all(entries.map(entry => entry.output.metadata()));\n  }\n\n  /**\n   * Obtain the join entries witt metadata from all given join entries.\n   * @param entries Join entries.\n   */\n  public static async getEntriesWithMetadatas(entries: IJoinEntry[]): Promise<IJoinEntryWithMetadata[]> {\n    const metadatas = await ActorRdfJoin.getMetadatas(entries);\n    return entries.map((entry, i) => ({ ...entry, metadata: metadatas[i] }));\n  }\n\n  /**\n   * Calculate the time to initiate a request for the given metadata entries.\n   * @param metadatas An array of checked metadata.\n   */\n  public static getRequestInitialTimes(metadatas: MetadataBindings[]): number[] {\n    return metadatas.map(metadata => metadata.pageSize ? 0 : metadata.requestTime ?? 0);\n  }\n\n  /**\n   * Calculate the time to receive a single item for the given metadata entries.\n   * @param metadatas An array of checked metadata.\n   */\n  public static getRequestItemTimes(metadatas: MetadataBindings[]): number[] {\n    return metadatas\n      .map(metadata => metadata.pageSize ? (metadata.requestTime ?? 0) / metadata.pageSize : 0);\n  }\n\n  /**\n   * Construct a metadata validation state for the given metadata entries.\n   * @param metadatas An array of checked metadata.\n   */\n  public constructState(metadatas: MetadataBindings[]): MetadataValidationState {\n    // Propagate metadata invalidations\n    const state = new MetadataValidationState();\n    const invalidateListener = (): void => state.invalidate();\n    for (const metadata of metadatas) {\n      metadata.state.addInvalidateListener(invalidateListener);\n    }\n    return state;\n  }\n\n  /**\n   * Helper function to create a new metadata object for the join result.\n   * For required metadata entries that are not provided, sane defaults are calculated.\n   * @param entries Join entries.\n   * @param metadatas Metadata of the join entries.\n   * @param context The action context.\n   * @param partialMetadata Partial metadata entries.\n   */\n  public async constructResultMetadata(\n    entries: IJoinEntry[],\n    metadatas: MetadataBindings[],\n    context: IActionContext,\n    partialMetadata: Partial<MetadataBindings> = {},\n  ): Promise<MetadataBindings> {\n    let cardinalityJoined: RDF.QueryResultCardinality;\n    if (partialMetadata.cardinality) {\n      cardinalityJoined = partialMetadata.cardinality;\n    } else {\n      cardinalityJoined = metadatas\n        .reduce((acc: RDF.QueryResultCardinality, metadata) => {\n          const cardinalityThis = ActorRdfJoin.getCardinality(metadata);\n          return {\n            type: cardinalityThis.type === 'estimate' ? 'estimate' : acc.type,\n            value: acc.value * cardinalityThis.value,\n          };\n        }, { type: 'exact', value: 1 });\n      cardinalityJoined.value *= (await this.mediatorJoinSelectivity.mediate({ entries, context })).selectivity;\n    }\n\n    return {\n      state: this.constructState(metadatas),\n      ...partialMetadata,\n      cardinality: {\n        type: cardinalityJoined.type,\n        value: cardinalityJoined.value,\n      },\n      canContainUndefs: partialMetadata.canContainUndefs ?? metadatas.some(metadata => metadata.canContainUndefs),\n      variables: ActorRdfJoin.joinVariables(metadatas),\n    };\n  }\n\n  /**\n   * Order the given join entries using the join-entries-sort bus.\n   * @param {MediatorRdfJoinEntriesSort} mediatorJoinEntriesSort A mediator for sorting join entries.\n   * @param {IJoinEntryWithMetadata[]} entries An array of join entries.\n   * @param context The action context.\n   * @return {IJoinEntryWithMetadata[]} The sorted join entries.\n   */\n  public static async sortJoinEntries(\n    mediatorJoinEntriesSort: MediatorRdfJoinEntriesSort,\n    entries: IJoinEntryWithMetadata[],\n    context: IActionContext,\n  ): Promise<IJoinEntryWithMetadata[]> {\n    // If there is a stream that can contain undefs, we don't modify the join order.\n    const canContainUndefs = entries.some(entry => entry.metadata.canContainUndefs);\n    if (canContainUndefs) {\n      return entries;\n    }\n\n    // Calculate number of occurrences of each variable\n    const variableOccurrences: Record<string, number> = {};\n    for (const entry of entries) {\n      for (const variable of entry.metadata.variables) {\n        let counter = variableOccurrences[variable.value];\n        if (!counter) {\n          counter = 0;\n        }\n        variableOccurrences[variable.value] = ++counter;\n      }\n    }\n\n    // Determine variables that occur in at least two join entries\n    const multiOccurrenceVariables: string[] = [];\n    for (const [ variable, count ] of Object.entries(variableOccurrences)) {\n      if (count >= 2) {\n        multiOccurrenceVariables.push(variable);\n      }\n    }\n\n    // Reject if no entries have common variables\n    if (multiOccurrenceVariables.length === 0) {\n      throw new Error(`Bind join can only join entries with at least one common variable`);\n    }\n\n    // Determine entries without common variables\n    // These will be placed in the back of the sorted array\n    const entriesWithoutCommonVariables: IJoinEntryWithMetadata[] = [];\n    for (const entry of entries) {\n      let hasCommon = false;\n      for (const variable of entry.metadata.variables) {\n        if (multiOccurrenceVariables.includes(variable.value)) {\n          hasCommon = true;\n          break;\n        }\n      }\n      if (!hasCommon) {\n        entriesWithoutCommonVariables.push(entry);\n      }\n    }\n\n    return (await mediatorJoinEntriesSort.mediate({ entries, context })).entries\n      .sort((entryLeft, entryRight) => {\n        // Sort to make sure that entries without common variables come last in the array.\n        // For all other entries, the original order is kept.\n        const leftWithoutCommonVariables = entriesWithoutCommonVariables.includes(entryLeft);\n        const rightWithoutCommonVariables = entriesWithoutCommonVariables.includes(entryRight);\n        if (leftWithoutCommonVariables === rightWithoutCommonVariables) {\n          return 0;\n        }\n        return leftWithoutCommonVariables ?\n          1 :\n            -1;\n      });\n  }\n\n  /**\n   * Default test function for join actors.\n   * Checks whether all iterators have metadata.\n   * If yes: call the abstract getIterations method, if not: return Infinity.\n   * @param {IActionRdfJoin} action The input action containing the relevant iterators\n   * @returns {Promise<IMediatorTypeJoinCoefficients>} The join coefficients.\n   */\n  public async test(action: IActionRdfJoin): Promise<IMediatorTypeJoinCoefficients> {\n    // Validate logical join type\n    if (action.type !== this.logicalType) {\n      throw new Error(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${action.type}' was given.`);\n    }\n\n    // Don't allow joining of one or zero streams\n    if (action.entries.length <= 1) {\n      throw new Error(`${this.name} requires at least two join entries.`);\n    }\n\n    // Check if this actor can handle the given number of streams\n    if (this.limitEntriesMin ? action.entries.length < this.limitEntries : action.entries.length > this.limitEntries) {\n      throw new Error(`${this.name} requires ${this.limitEntries\n      } join entries at ${this.limitEntriesMin ? 'least' : 'most'\n      }. The input contained ${action.entries.length}.`);\n    }\n\n    // Check if all streams are bindings streams\n    for (const entry of action.entries) {\n      if (entry.output.type !== 'bindings') {\n        // eslint-disable-next-line ts/restrict-template-expressions\n        throw new Error(`Invalid type of a join entry: Expected 'bindings' but got '${entry.output.type}'`);\n      }\n    }\n\n    const metadatas = await ActorRdfJoin.getMetadatas(action.entries);\n\n    // Check if this actor can handle undefs\n    if (!this.canHandleUndefs) {\n      for (const metadata of metadatas) {\n        if (metadata.canContainUndefs) {\n          throw new Error(`Actor ${this.name} can not join streams containing undefs`);\n        }\n      }\n    }\n\n    return await this.getJoinCoefficients(action, metadatas);\n  }\n\n  /**\n   * Returns default input for 0 or 1 entries. Calls the getOutput function otherwise\n   * @param {IActionRdfJoin} action\n   * @returns {Promise<IQueryOperationResultBindings>} A bindings result.\n   */\n  public async run(action: IActionRdfJoin): Promise<IQueryOperationResultBindings> {\n    // Prepare logging to physical plan\n    // This must be called before getOutput, because we need to override the plan node in the context\n    let parentPhysicalQueryPlanNode;\n    if (action.context.has(KeysInitQuery.physicalQueryPlanLogger)) {\n      parentPhysicalQueryPlanNode = action.context.get(KeysInitQuery.physicalQueryPlanNode);\n      action.context = action.context.set(KeysInitQuery.physicalQueryPlanNode, action);\n    }\n\n    // Log to physical plan\n    const physicalQueryPlanLogger: IPhysicalQueryPlanLogger | undefined = action.context.get(KeysInitQuery\n      .physicalQueryPlanLogger);\n    let planMetadata: any;\n    if (this.includeInLogs && physicalQueryPlanLogger) {\n      planMetadata = {};\n      // Stash non-join children, as they will be unstashed later in sub-joins.\n      physicalQueryPlanLogger.stashChildren(\n        parentPhysicalQueryPlanNode,\n        node => node.logicalOperator.startsWith('join'),\n      );\n      physicalQueryPlanLogger.logOperation(\n        `join-${this.logicalType}`,\n        this.physicalName,\n        action,\n        parentPhysicalQueryPlanNode,\n        this.name,\n        planMetadata,\n      );\n    }\n\n    // Get action output\n    const { result, physicalPlanMetadata } = await this.getOutput(action);\n    const metadatas = await ActorRdfJoin.getMetadatas(action.entries);\n\n    // Fill in the physical plan metadata after determining action output\n    if (planMetadata) {\n      // eslint-disable-next-line ts/no-floating-promises\n      instrumentIterator(result.bindingsStream)\n        .then((counters) => {\n          physicalQueryPlanLogger!.appendMetadata(action, {\n            cardinalityReal: counters.count,\n            timeSelf: counters.timeSelf,\n            timeLife: counters.timeLife,\n          });\n        });\n\n      Object.assign(planMetadata, physicalPlanMetadata);\n      const cardinalities = metadatas.map(ActorRdfJoin.getCardinality);\n      planMetadata.cardinalities = cardinalities;\n      planMetadata.joinCoefficients = await this.getJoinCoefficients(action, metadatas);\n\n      // If this is a leaf operation, include join entries in plan metadata.\n      if (this.isLeaf) {\n        for (let i = 0; i < action.entries.length; i++) {\n          const entry = action.entries[i];\n          physicalQueryPlanLogger!.unstashChild(\n            entry.operation,\n            action,\n          );\n          physicalQueryPlanLogger!.appendMetadata(entry.operation, { cardinality: cardinalities[i] });\n        }\n      }\n    }\n\n    // Cache metadata\n    result.metadata = cachifyMetadata(result.metadata);\n\n    return result;\n  }\n\n  /**\n   * Returns the resulting output for joining the given entries.\n   * This is called after removing the trivial cases in run.\n   * @param {IActionRdfJoin} action\n   * @returns {Promise<IActorRdfJoinOutputInner>}\n   */\n  protected abstract getOutput(action: IActionRdfJoin): Promise<IActorRdfJoinOutputInner>;\n\n  /**\n   * Calculate the join coefficients.\n   * @param {IActionRdfJoin} action Join action\n   * @param metadatas Array of resolved metadata objects.\n   * @returns {IMediatorTypeJoinCoefficients} The join coefficient estimates.\n   */\n  protected abstract getJoinCoefficients(\n    action: IActionRdfJoin,\n    metadatas: MetadataBindings[],\n  ): Promise<IMediatorTypeJoinCoefficients>;\n}\n\nexport interface IActorRdfJoinArgs\n  extends IActorArgs<IActionRdfJoin, IMediatorTypeJoinCoefficients, IQueryOperationResultBindings> {\n  mediatorJoinSelectivity: MediatorRdfJoinSelectivity;\n}\n\nexport interface IActorRdfJoinInternalOptions {\n  /**\n   * The logical join type this actor can handle.\n   */\n  logicalType: LogicalJoinType;\n  /**\n   * The physical name of join operation this actor implements.\n   * This is used for debug and query plan logs.\n   */\n  physicalName: string;\n  /**\n   * Can be used by subclasses to indicate the max or min number of streams that can be joined.\n   * 0 for infinity.\n   * By default, this indicates the max number, but can be inverted by setting limitEntriesMin to true.\n   */\n  limitEntries?: number;\n  /**\n   * If true, the limitEntries field is a lower limit,\n   * otherwise, it is an upper limit.\n   * Defaults to false.\n   */\n  limitEntriesMin?: boolean;\n  /**\n   * If this actor can handle undefs in the bindings.\n   * Defaults to false.\n   */\n  canHandleUndefs?: boolean;\n  /**\n   * If this join operator will not invoke any other join or query operations below,\n   * and can therefore be considered a leaf of the join plan.\n   * Defaults to true.\n   */\n  isLeaf?: boolean;\n}\n\n/**\n * Represents a logical join type.\n */\nexport type LogicalJoinType = 'inner' | 'optional' | 'minus';\n\nexport interface IActionRdfJoin extends IAction {\n  /**\n   * The logical join type.\n   */\n  type: LogicalJoinType;\n  /**\n   * The array of streams to join.\n   */\n  entries: IJoinEntry[];\n}\n\nexport interface IActorRdfJoinOutputInner {\n  /**\n   * The join result.\n   */\n  result: IQueryOperationResultBindings;\n  /**\n   * Optional metadata that will be included as metadata within the physical query plan output.\n   */\n  physicalPlanMetadata?: any;\n}\n\nexport type MediatorRdfJoin = Mediate<IActionRdfJoin, IQueryOperationResultBindings, IMediatorTypeJoinCoefficients>;\n","import type { AsyncIterator, TransformIteratorOptions } from 'asynciterator';\nimport { ArrayIterator, TransformIterator } from 'asynciterator';\n\n/**\n * Splits an iterator into chunks based on a given block size.\n */\nexport class ChunkedIterator<T> extends TransformIterator<T, AsyncIterator<T>> {\n  protected readonly blockSize: number;\n  protected chunk: T[] = [];\n\n  public constructor(source: AsyncIterator<T>, blockSize: number, options?: TransformIteratorOptions<T>) {\n    super(source, options);\n    this.blockSize = blockSize;\n  }\n\n  protected consumeChunkAsIterator(): AsyncIterator<T> {\n    const it = new ArrayIterator(this.chunk, { autoStart: false });\n    this.chunk = [];\n    return it;\n  }\n\n  protected override _transform(item: T, done: () => void, push: (i: AsyncIterator<T>) => void): void {\n    this.chunk.push(item);\n    if (this.chunk.length >= this.blockSize) {\n      push(this.consumeChunkAsIterator());\n    }\n    done();\n  }\n\n  protected override _flush(done: () => void): void {\n    if (this.chunk.length > 0) {\n      this._push(this.consumeChunkAsIterator());\n    }\n    super._flush(done);\n  }\n}\n","import type { AsyncIterator } from 'asynciterator';\n\nexport type IteratorCounters = {\n  /**\n   * The total time spent within `_read` and `read`.\n   */\n  timeSelf: number;\n  /**\n   * The time between creation and ending.\n   */\n  timeLife: number;\n  /**\n   * The number of elements produced.\n   */\n  count: number;\n};\n\n/**\n * Profile an iterator by monkey-patching its `_read` and `read` methods.\n * @param iterator\n */\nexport function instrumentIterator(iterator: AsyncIterator<any>): Promise<IteratorCounters> {\n  const counters: IteratorCounters = {\n    count: 0,\n    timeSelf: 0,\n    timeLife: 0,\n  };\n  instrumentIteratorInner(iterator, counters, true);\n  return new Promise((resolve) => {\n    iterator.on('end', () => {\n      resolve(counters);\n    });\n  });\n}\n\nfunction instrumentIteratorInner(\n  iterator: AsyncIterator<any>,\n  counter: { timeSelf: number; timeLife: number; count: number },\n  top: boolean,\n): void {\n  if (!('_profileInstrumented' in iterator)) {\n    // Only patch an iterator once.\n    (<any>iterator)._profileInstrumented = true;\n\n    // Patch _read\n    if ('_read' in iterator) {\n      const readOld: any = iterator._read;\n      iterator._read = (count: number, done: () => void) => {\n        const startTime = performance.now();\n        readOld.call(iterator, count, () => {\n          counter.timeSelf += performance.now() - startTime;\n          done();\n        });\n      };\n    }\n\n    // Patch read\n    if ('read' in iterator) {\n      // eslint-disable-next-line ts/unbound-method\n      const readOld: any = iterator.read;\n      iterator.read = () => {\n        const startTime = performance.now();\n        const ret = readOld.call(iterator);\n        if (top && ret) {\n          counter.count++;\n        }\n        counter.timeSelf += performance.now() - startTime;\n        return ret;\n      };\n    }\n\n    // Measure total time\n    if (top) {\n      const startTime = performance.now();\n      iterator.on('end', () => {\n        counter.timeLife = performance.now() - startTime;\n      });\n    }\n\n    // Also patch children\n    if ('_source' in iterator) {\n      instrumentIteratorInner(<any>iterator._source, counter, false);\n    }\n  }\n}\n","import type { IAction, IActorArgs, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type { MetadataBindings } from '@comunica/types';\n\n/**\n * A comunica actor for rdf-metadata-accumulate events.\n *\n * Actor types:\n * * Input:  IActionRdfMetadataAccumulate:      The metadata objects to accumulate,\n *                                              or a trigger for initializing a new value.\n * * Test:   <none>\n * * Output: IActorRdfMetadataAccumulateOutput: The accumulated metadata object.\n *\n * @see IActionRdfMetadataAccumulate\n * @see IActorRdfMetadataAccumulateOutput\n */\nexport abstract class ActorRdfMetadataAccumulate\n  extends Actor<IActionRdfMetadataAccumulate, IActorTest, IActorRdfMetadataAccumulateOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorRdfMetadataAccumulateArgs) {\n    super(args);\n  }\n}\n\nexport type IActionRdfMetadataAccumulate = IActionRdfMetadataAccumulateInitialize | IActionRdfMetadataAccumulateAppend;\n\nexport interface IActionRdfMetadataAccumulateInitialize extends IAction {\n  /**\n   * Indicates that metadata fields should be initialized to default values.\n   */\n  mode: 'initialize';\n}\n\nexport interface IActionRdfMetadataAccumulateAppend extends IAction {\n  /**\n   * Indicates that metadata fields should be accumulated.\n   * The initialize step is guaranteed to have been called before this on the `accumulatedMetadata` object.\n   */\n  mode: 'append';\n  /**\n   * The metadata object that already has some accumulated fields.\n   * This object should not be mutated.\n   */\n  accumulatedMetadata: MetadataBindings;\n  /**\n   * The metadata object with fields to append.\n   * This object should not be mutated.\n   */\n  appendingMetadata: MetadataBindings;\n}\n\nexport interface IActorRdfMetadataAccumulateOutput extends IActorOutput {\n  /**\n   * The initialized or accumulated metadata object.\n   * This should only contain those fields that are applicable to this actor.\n   */\n  metadata: Partial<MetadataBindings>;\n}\n\nexport type IActorRdfMetadataAccumulateArgs = IActorArgs<\nIActionRdfMetadataAccumulate,\nIActorTest,\nIActorRdfMetadataAccumulateOutput\n>;\n\nexport type MediatorRdfMetadataAccumulate = Mediate<\nIActionRdfMetadataAccumulate,\nIActorRdfMetadataAccumulateOutput\n>;\n","import type {\n  IActionAbstractMediaTyped,\n  IActorArgsMediaTyped,\n  IActorTestAbstractMediaTyped,\n  IActorOutputAbstractMediaTypedHandle,\n  IActionAbstractMediaTypedHandle,\n  IActionAbstractMediaTypedMediaTypeFormats,\n  IActionAbstractMediaTypedMediaTypes,\n  IActorOutputAbstractMediaTypedMediaTypeFormats,\n  IActorOutputAbstractMediaTypedMediaTypes,\n  IActorTestAbstractMediaTypedHandle,\n  IActorTestAbstractMediaTypedMediaTypeFormats,\n  IActorTestAbstractMediaTypedMediaTypes,\n} from '@comunica/actor-abstract-mediatyped';\nimport {\n  ActorAbstractMediaTyped,\n} from '@comunica/actor-abstract-mediatyped';\nimport type { IAction, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport type * as RDF from '@rdfjs/types';\n\n/**\n * A comunica actor for RDF parse events.\n *\n * Actor types:\n * * Input:  IActionRdfSerialize:      A serialize input or a media type input.\n * * Test:   <none>\n * * Output: IActorRdfSerializeOutput: The serialized quads.\n *\n * @see IActionRdfSerialize\n * @see IActorRdfSerializeOutput\n */\nexport abstract class ActorRdfSerialize extends\n  ActorAbstractMediaTyped<IActionRdfSerialize, IActorTest, IActorRdfSerializeOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorRdfSerializeArgs) {\n    super(args);\n  }\n}\n\nexport type IActionRootRdfSerialize = IActionAbstractMediaTyped<IActionRdfSerialize>;\nexport type IActorTestRootRdfSerialize = IActorTestAbstractMediaTyped<IActorTest>;\nexport type IActorOutputRootRdfSerialize = IActorOutputAbstractMediaTypedHandle<IActorRdfSerializeOutput>;\n\nexport type IActionRdfSerializeHandle = IActionAbstractMediaTypedHandle<IActionRdfSerialize>;\nexport type IActorTestRdfSerializeHandle = IActorTestAbstractMediaTypedHandle<IActorTest>;\nexport type IActorOutputRdfSerializeHandle = IActorOutputAbstractMediaTypedHandle<IActorRdfSerializeOutput>;\n\nexport type IActionRdfSerializeMediaTypes = IActionAbstractMediaTypedMediaTypes;\nexport type IActorTestRdfSerializeMediaTypes = IActorTestAbstractMediaTypedMediaTypes;\nexport type IActorOutputRdfSerializeMediaTypes = IActorOutputAbstractMediaTypedMediaTypes;\n\nexport type IActionRdfSerializeMediaTypeFormats = IActionAbstractMediaTypedMediaTypeFormats;\nexport type IActorTestRdfSerializeMediaTypeFormats = IActorTestAbstractMediaTypedMediaTypeFormats;\nexport type IActorOutputRdfSerializeMediaTypeFormats = IActorOutputAbstractMediaTypedMediaTypeFormats;\n\nexport interface IActionRdfSerialize extends IAction {\n  /**\n   * The stream of quads.\n   */\n  quadStream: RDF.Stream;\n}\n\nexport interface IActorRdfSerializeOutput extends IActorOutput {\n  /**\n   * A readable string stream in a certain RDF serialization that was serialized.\n   */\n  data: NodeJS.ReadableStream;\n  /**\n   * An optional field indicating if the given output stream uses a triple-based serialization,\n   * in which everything is serialized in the default graph.\n   * If falsy, the quad stream contain actual quads, otherwise they should be interpreted as triples.\n   */\n  triples?: boolean;\n}\n\nexport type IActorRdfSerializeArgs = IActorArgsMediaTyped<IActionRdfSerialize, IActorTest, IActorRdfSerializeOutput>;\n\nexport type MediatorRdfSerializeHandle = Mediate<\nIActionRdfSerializeHandle,\nIActorOutputRdfSerializeHandle,\nIActorTestRdfSerializeHandle\n>;\n\nexport type MediatorRdfSerialize = Mediate<\nIActionRootRdfSerialize,\nIActorOutputRootRdfSerialize,\nIActorTestRootRdfSerialize\n>;\n\nexport type MediatorRdfSerializeMediaTypes = Mediate<\nIActionRdfSerializeMediaTypes,\nIActorOutputRdfSerializeMediaTypes,\nIActorTestRdfSerializeMediaTypes\n>;\n\nexport type MediatorRdfSerializeMediaTypeFormats = Mediate<\nIActionRdfSerializeMediaTypeFormats,\nIActorOutputRdfSerializeMediaTypeFormats,\nIActorTestRdfSerializeMediaTypeFormats\n>;\n","import type { IActorArgsMediaTypedFixed } from '@comunica/actor-abstract-mediatyped';\nimport { ActorAbstractMediaTypedFixed } from '@comunica/actor-abstract-mediatyped';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionRdfSerialize, IActorRdfSerializeOutput, ActorRdfSerialize } from './ActorRdfSerialize';\n\n/**\n * A base actor for listening to RDF serialize events that has fixed media types.\n *\n * Actor types:\n * * Input:  IActionRdfSerializeOrMediaType:      A serialize input or a media type input.\n * * Test:   <none>\n * * Output: IActorRdfSerializeOutputOrMediaType: The serialized quads.\n *\n * @see IActionInit\n */\nexport abstract class ActorRdfSerializeFixedMediaTypes extends ActorAbstractMediaTypedFixed<\nIActionRdfSerialize,\nIActorTest,\nIActorRdfSerializeOutput\n>\n  implements IActorRdfSerializeFixedMediaTypesArgs, ActorRdfSerialize {\n  /* eslint-disable max-len */\n  /**\n   * TODO: rm this (and eslint-disable) once we remove the abstract media typed actor\n   * @param args - @defaultNested {<cbrs:components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorRdfSerializeFixedMediaTypesArgs) {\n    super(args);\n  }\n  /* eslint-enable max-len */\n\n  public async testHandleChecked(): Promise<boolean> {\n    return true;\n  }\n}\n\nexport type IActorRdfSerializeFixedMediaTypesArgs = IActorArgsMediaTypedFixed<\nIActionRdfSerialize,\nIActorTest,\nIActorRdfSerializeOutput\n>;\n","import type { IAction, IActorArgs, IActorOutput, IActorTest, Mediate } from '@comunica/core';\nimport { Actor } from '@comunica/core';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\n\n/**\n * A comunica actor for rdf-update-quads events.\n *\n * Actor types:\n * * Input:  IActionRdfUpdateQuads:      Quad insertion and deletion streams.\n * * Test:   <none>\n * * Output: IActorRdfUpdateQuadsOutput: A promise resolving when the update operation is done.\n *\n * @see IActionRdfUpdateQuads\n * @see IActorRdfUpdateQuadsOutput\n */\nexport abstract class ActorRdfUpdateQuads extends Actor<IActionRdfUpdateQuads, IActorTest, IActorRdfUpdateQuadsOutput> {\n  /**\n   * @param args - @defaultNested {<default_bus> a <cc:components/Bus.jsonld#Bus>} bus\n   */\n  public constructor(args: IActorRdfUpdateQuadsArgs) {\n    super(args);\n  }\n}\n\nexport interface IActionRdfUpdateQuads extends IAction {\n  /**\n   * An optional stream of quads to insert.\n   */\n  quadStreamInsert?: AsyncIterator<RDF.Quad>;\n  /**\n   * An optional stream of quads to delete.\n   */\n  quadStreamDelete?: AsyncIterator<RDF.Quad>;\n  /**\n   * An optional deletion of graphs.\n   */\n  deleteGraphs?: {\n    /**\n     * The graph(s) in which all triples must be removed.\n     */\n    graphs: RDF.DefaultGraph | 'NAMED' | 'ALL' | RDF.NamedNode[];\n    /**\n     * If true, and the graph does not exist, an error must be emitted.\n     *\n     * Should only be considered on destinations that record empty graphs.\n     */\n    requireExistence: boolean;\n    /**\n     * If the graph itself should also be dropped.\n     * Should not happen on the 'DEFAULT' graph.\n     *\n     * Should only be considered on destinations that record empty graphs.\n     */\n    dropGraphs: boolean;\n  };\n  /**\n   * An optional creation of (empty) graphs.\n   */\n  createGraphs?: {\n    /**\n     * The graph names to create.\n     */\n    graphs: RDF.NamedNode[];\n    /**\n     * If true, an error MUST be thrown when the graph already exists.\n     *\n     * For destinations that do not record empty graphs,\n     * this should only throw if at least one quad with the given quad already exists.\n     */\n    requireNonExistence: boolean;\n  };\n}\n\nexport interface IActorRdfUpdateQuadsOutput extends IActorOutput {\n  /**\n   * Async function that resolves when the update operation is done.\n   */\n  execute: () => Promise<void>;\n}\n\nexport type IActorRdfUpdateQuadsArgs = IActorArgs<IActionRdfUpdateQuads, IActorTest, IActorRdfUpdateQuadsOutput>;\n\nexport type MediatorRdfUpdateQuads = Mediate<IActionRdfUpdateQuads, IActorRdfUpdateQuadsOutput>;\n","import { deskolemizeQuad } from '@comunica/actor-context-preprocess-query-source-skolemize';\nimport { KeysQuerySourceIdentify, KeysRdfUpdateQuads } from '@comunica/context-entries';\nimport type { IActorTest } from '@comunica/core';\nimport type { IActionContext } from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { AsyncIterator } from 'asynciterator';\nimport type { IActionRdfUpdateQuads, IActorRdfUpdateQuadsOutput } from './ActorRdfUpdateQuads';\nimport { ActorRdfUpdateQuads } from './ActorRdfUpdateQuads';\nimport type { IQuadDestination } from './IQuadDestination';\n\nexport function deskolemizeStream(stream: AsyncIterator<RDF.Quad> | undefined, id: string):\nAsyncIterator<RDF.Quad> | undefined {\n  return stream?.map(quad => deskolemizeQuad(quad, id));\n}\n\nexport function deskolemize(action: IActionRdfUpdateQuads): IActionRdfUpdateQuads {\n  const destination = action.context.get(KeysRdfUpdateQuads.destination);\n  const id = action.context.get<Map<any, string>>(KeysQuerySourceIdentify.sourceIds)?.get(destination);\n  if (!id) {\n    return action;\n  }\n  return {\n    ...action,\n    quadStreamInsert: deskolemizeStream(action.quadStreamInsert, id),\n    quadStreamDelete: deskolemizeStream(action.quadStreamDelete, id),\n  };\n}\n\n/**\n * A base implementation for rdf-update-quads events\n * that wraps around an {@link IQuadDestination}.\n *\n * @see IQuadDestination\n */\nexport abstract class ActorRdfUpdateQuadsDestination extends ActorRdfUpdateQuads {\n  public async test(_action: IActionRdfUpdateQuads): Promise<IActorTest> {\n    return true;\n  }\n\n  public async run(action: IActionRdfUpdateQuads): Promise<IActorRdfUpdateQuadsOutput> {\n    const destination = await this.getDestination(action.context);\n    return await this.getOutput(destination, deskolemize(action));\n  }\n\n  /**\n   * Get the output of the given action on a destination.\n   * @param {IQuadDestination} destination A quad destination, possibly lazy.\n   * @param {IActionRdfUpdateQuads} action The action.\n   */\n  protected async getOutput(\n    destination: IQuadDestination,\n    action: IActionRdfUpdateQuads,\n  ): Promise<IActorRdfUpdateQuadsOutput> {\n    const execute = async(): Promise<void> => {\n      await (action.quadStreamDelete ? destination.delete(action.quadStreamDelete) : Promise.resolve());\n      await (action.deleteGraphs ?\n        destination.deleteGraphs(\n          action.deleteGraphs.graphs,\n          action.deleteGraphs.requireExistence,\n          action.deleteGraphs.dropGraphs,\n        ) :\n        Promise.resolve());\n      await (action.createGraphs ?\n        destination.createGraphs(action.createGraphs.graphs, action.createGraphs.requireNonExistence) :\n        Promise.resolve());\n      await (action.quadStreamInsert ? destination.insert(action.quadStreamInsert) : Promise.resolve());\n    };\n    return { execute };\n  }\n\n  /**\n   * Get a destination instance for the given context.\n   * @param {ActionContext} context Optional context data.\n   * @return {Promise<IQuadDestination>} A promise that resolves to a destination.\n   */\n  protected abstract getDestination(context: IActionContext): Promise<IQuadDestination>;\n}\n","import { ActionContextKey, CONTEXT_KEY_LOGGER } from '@comunica/core';\nimport type {\n  Bindings,\n  IPhysicalQueryPlanLogger,\n  QueryExplainMode,\n  IProxyHandler,\n  ICliArgsHandler,\n  IDataDestination,\n  MetadataBindings,\n  FunctionArgumentsCache,\n  IAggregatedStore,\n  QuerySourceUnidentified,\n  IQuerySourceWrapper,\n  QuerySourceReference,\n} from '@comunica/types';\nimport type * as RDF from '@rdfjs/types';\nimport type { IDocumentLoader } from 'jsonld-context-parser';\nimport type { Algebra } from 'sparqlalgebrajs';\n\n/**\n * When adding entries to this file, also add a shortcut for them in the contextKeyShortcuts TSDoc comment in\n * ActorInitQueryBase in @comunica/actor-init-query if it makes sense to use this entry externally.\n * Also, add this shortcut to IQueryContextCommon in @comunica/types.\n */\n\nexport const KeysCore = {\n  // We create the core context keys in @comunica/core to avoid a cyclic dependency\n  /**\n   * A logger instance.\n   */\n  log: CONTEXT_KEY_LOGGER,\n};\n\nexport const KeysHttp = {\n  /**\n   * Include credentials flags.\n   */\n  includeCredentials: new ActionContextKey<boolean>('@comunica/bus-http:include-credentials'),\n  /**\n   * Authentication for a source as a \"username:password\"-pair.\n   */\n  auth: new ActionContextKey<string>('@comunica/bus-http:auth'),\n  /**\n   * Fetch function implementation.\n   */\n  fetch: new ActionContextKey<typeof fetch>('@comunica/bus-http:fetch'),\n  /**\n   * HTTP request timeout in milliseconds.\n   */\n  httpTimeout: new ActionContextKey<number>('@comunica/bus-http:http-timeout'),\n  /**\n   * Makes the HTTP timeout not only apply until the response starts streaming in\n   * but until the response is fully consumed.\n   */\n  httpBodyTimeout: new ActionContextKey<boolean>('@comunica/bus-http:http-body-timeout'),\n  /**\n   * Number of retries to make on failed network calls. This only takes effect\n   * on errors thrown during the initial fetch() call and not while streaming the body.\n   */\n  httpRetryCount: new ActionContextKey<number>('@comunica/bus-http:http-retry-count'),\n  /**\n   * Delay in milliseconds to wait between fetch retries. Requires httpRetryCount to be set.\n   */\n  httpRetryDelay: new ActionContextKey<number>('@comunica/bus-http:http-retry-delay'),\n  /**\n   * Retry fetch, if server replies with a 5xx error response. Requires httpRetryCount to be set.\n   */\n  httpRetryOnServerError: new ActionContextKey<number>('@comunica/bus-http:http-retry-on-server-error'),\n};\n\nexport const KeysHttpWayback = {\n  /**\n   * Use the WayBack machine to get the most recent representation of a file if a link is broken.\n   * @default false\n   */\n  recoverBrokenLinks: new ActionContextKey<boolean>('@comunica/bus-http:recover-broken-links'),\n};\n\nexport const KeysHttpMemento = {\n  /**\n   * The desired datetime for Memento datetime-negotiation.\n   */\n  datetime: new ActionContextKey<Date>('@comunica/actor-http-memento:datetime'),\n};\n\nexport const KeysHttpProxy = {\n  /**\n   * Interface.\n   */\n  httpProxyHandler: new ActionContextKey<IProxyHandler>('@comunica/actor-http-proxy:httpProxyHandler'),\n};\n\nexport const KeysInitQuery = {\n  /**\n   * The unidentified sources to query over.\n   */\n  querySourcesUnidentified: new ActionContextKey<QuerySourceUnidentified[]>(\n    '@comunica/actor-init-query:querySourcesUnidentified',\n  ),\n  /**\n   * Variables that have to be pre-bound to values in the query.\n   */\n  initialBindings: new ActionContextKey<RDF.Bindings>('@comunica/actor-init-query:initialBindings'),\n  /**\n   * The provided query's format.\n   * Defaults to { language: 'sparql', version: '1.1' }\n   */\n  queryFormat: new ActionContextKey<RDF.QueryFormat>('@comunica/actor-init-query:queryFormat'),\n  /**\n   * Which GraphQL bindings should be singularized.\n   */\n  graphqlSingularizeVariables: new ActionContextKey<any>('@comunica/actor-init-query:singularizeVariables'),\n  /**\n   * If HTTP and parsing failures are ignored.\n   */\n  lenient: new ActionContextKey<boolean>('@comunica/actor-init-query:lenient'),\n  /**\n   * The original query string.\n   */\n  queryString: new ActionContextKey<string>('@comunica/actor-init-query:queryString'),\n  /**\n   * The original parsed query.\n   */\n  query: new ActionContextKey<Algebra.Operation>('@comunica/actor-init-query:query'),\n  /**\n   * The query's base IRI.\n   */\n  baseIRI: new ActionContextKey<string>('@comunica/actor-init-query:baseIRI'),\n  /**\n   * Object to cache function argument overload resolutions.\n   * Defaults to an object that is reused across query executions.\n   */\n  functionArgumentsCache: new ActionContextKey<FunctionArgumentsCache>(\n    '@comunica/actor-init-query:functionArgumentsCache',\n  ),\n  /**\n   * A timestamp representing the current time.\n   *                 This is required for certain SPARQL operations such as NOW().\n   */\n  queryTimestamp: new ActionContextKey<Date>('@comunica/actor-init-query:queryTimestamp'),\n  /**\n   * @range {functionNamedNode: RDF.NamedNode) => ((args: RDF.Term[]) => Promise<RDF.Term>) | undefined}\n   * Extension function creator for a given function IRI.\n   * Returned value should be an async function implementation.\n   * Undefined may be returned if no implementation exists for the given function IRI.\n   *\n   * The dictionary-based extensionFunctions context entry may be used instead, but not simultaneously.\n   */\n  extensionFunctionCreator: new ActionContextKey<\n  (functionNamedNode: RDF.NamedNode) => ((args: RDF.Term[]) => Promise<RDF.Term>) | undefined\n    >('@comunica/actor-init-query:extensionFunctionCreator'),\n  /**\n   * Dictionary of extension functions.\n   * Key is the IRI of the function, and value is the async function implementation.\n   *\n   * The callback-based extensionFunctionCreator context entry may be used instead, but not simultaneously.\n   */\n  extensionFunctions: new ActionContextKey<\n  Record<string, (args: RDF.Term[]) => Promise<RDF.Term>>\n    >('@comunica/actor-init-query:extensionFunctions'),\n  /**\n   * Enables manipulation of the CLI arguments and their processing.\n   */\n  cliArgsHandlers: new ActionContextKey<ICliArgsHandler[]>('@comunica/actor-init-query:cliArgsHandlers'),\n  /**\n   * Explain mode of the query. Can be 'parsed', 'logical', 'physical', or 'physical-json'.\n   */\n  explain: new ActionContextKey<QueryExplainMode>('@comunica/actor-init-query:explain'),\n  /**\n   * Logs the used physical operators\n   */\n  physicalQueryPlanLogger: new ActionContextKey<IPhysicalQueryPlanLogger>(\n    '@comunica/actor-init-query:physicalQueryPlanLogger',\n  ),\n  /**\n   * The current physical operator within the query plan.\n   *              This is used to pass parent-child relationships for invoking the query plan logger.\n   */\n  physicalQueryPlanNode: new ActionContextKey<any>('@comunica/actor-init-query:physicalQueryPlanNode'),\n  /**\n   * A JSON-LD context\n   */\n  jsonLdContext: new ActionContextKey<any>('@context'),\n  /**\n   * A boolean value denoting whether caching is disabled or not.\n   */\n  noCache: new ActionContextKey<boolean>('@comunica/actor-init-query:noCache'),\n};\n\nexport const KeysQueryOperation = {\n  /**\n   * Context entry for the current query operation.\n   */\n  operation: new ActionContextKey<string>('@comunica/bus-query-operation:operation'),\n  /**\n   * @type {any} The metadata from the left streams within a join operation.\n   */\n  joinLeftMetadata: new ActionContextKey<MetadataBindings>('@comunica/bus-query-operation:joinLeftMetadata'),\n  /**\n   * An array of metadata from the right streams within a join operation.\n   */\n  joinRightMetadatas: new ActionContextKey<MetadataBindings[]>('@comunica/bus-query-operation:joinRightMetadatas'),\n  /**\n   * Indicates the bindings that were used to bind the operation.\n   */\n  joinBindings: new ActionContextKey<Bindings>('@comunica/bus-query-operation:joinBindings'),\n  /**\n   * Flag for indicating that only read operations are allowed, defaults to false.\n   */\n  readOnly: new ActionContextKey<boolean>('@comunica/bus-query-operation:readOnly'),\n  /**\n   * An internal context entry to mark that a property path with arbitrary length and a distinct key is being processed.\n   */\n  isPathArbitraryLengthDistinctKey: new ActionContextKey<boolean>(\n    '@comunica/bus-query-operation:isPathArbitraryLengthDistinct',\n  ),\n  /**\n   * An indicator that the stream will be limited to the given number of elements afterwards.\n   */\n  limitIndicator: new ActionContextKey<number>('@comunica/bus-query-operation:limitIndicator'),\n  /**\n   * If the default graph should also contain the union of all named graphs.\n   */\n  unionDefaultGraph: new ActionContextKey<boolean>('@comunica/bus-query-operation:unionDefaultGraph'),\n  /**\n   * The sources to query over.\n   */\n  querySources: new ActionContextKey<IQuerySourceWrapper[]>('@comunica/bus-query-operation:querySources'),\n};\n\nexport const KeysRdfParseJsonLd = {\n  /**\n   * @range {IDocumentLoader}\n   */\n  documentLoader: new ActionContextKey<IDocumentLoader>('@comunica/actor-rdf-parse-jsonld:documentLoader'),\n  /**\n   * @range {boolean}\n   */\n  strictValues: new ActionContextKey<boolean>('@comunica/actor-rdf-parse-jsonld:strictValues'),\n  /**\n   * @range {Record<string, any>}\n   */\n  parserOptions: new ActionContextKey<Record<string, any>>('@comunica/actor-rdf-parse-jsonld:parserOptions'),\n};\n\nexport const KeysRdfParseHtmlScript = {\n  /**\n   * An internal context flag to determine if the engine is already processing an HTML script tag.\n   */\n  processingHtmlScript: new ActionContextKey<boolean>('@comunica/actor-rdf-parse-html-script:processingHtmlScript'),\n  /**\n   * If all HTML script tags must be considered.\n   */\n  extractAllScripts: new ActionContextKey<boolean>('extractAllScripts'),\n};\n\nexport const KeysQuerySourceIdentify = {\n  /**\n   * A map containing unique IDs for each source\n   */\n  sourceIds: new ActionContextKey<Map<QuerySourceReference, string>>(\n    '@comunica/bus-query-source-identify:sourceIds',\n  ),\n  /**\n   * Hypermedia sources mapping to their aggregated store.\n   */\n  hypermediaSourcesAggregatedStores: new ActionContextKey<Map<string, IAggregatedStore>>(\n    '@comunica/bus-query-source-identify:hypermediaSourcesAggregatedStores',\n  ),\n  /**\n   * If links may be traversed from this source.\n   * This means that sources annotated with this flag are considered incomplete until all links have been traversed.\n   */\n  traverse: new ActionContextKey<boolean>('@comunica/bus-query-source-identify:traverse'),\n};\n\nexport const KeysRdfUpdateQuads = {\n  /**\n   * A data destination.\n   */\n  destination: new ActionContextKey<IDataDestination>('@comunica/bus-rdf-update-quads:destination'),\n};\n\nexport const KeysRdfJoin = {\n  /**\n   * The last physical join actor that was executed.\n   */\n  lastPhysicalJoin: new ActionContextKey<string>('@comunica/bus-rdf-join:lastPhysicalJoin'),\n};\n","import type { IActionContext, IActionContextKey } from '@comunica/types';\nimport { Map } from 'immutable';\n\n/**\n * Implementation of {@link IActionContext} using Immutable.js.\n */\nexport class ActionContext implements IActionContext {\n  private readonly map: Map<string, any>;\n\n  public constructor(data: Record<string, any> = {}) {\n    this.map = Map<string, any>(data);\n  }\n\n  /**\n   * Will only set the value if the key is not already set.\n   */\n  public setDefault<V>(key: IActionContextKey<V>, value: V): IActionContext {\n    return this.has(key) ? this : this.set(key, value);\n  }\n\n  public set<V>(key: IActionContextKey<V>, value: V): IActionContext {\n    return this.setRaw(key.name, value);\n  }\n\n  public setRaw(key: string, value: any): IActionContext {\n    return new ActionContext(this.map.set(key, value));\n  }\n\n  public delete<V>(key: IActionContextKey<V>): IActionContext {\n    return new ActionContext(this.map.delete(key.name));\n  }\n\n  public get<V>(key: IActionContextKey<V>): V | undefined {\n    return this.getRaw(key.name);\n  }\n\n  public getRaw(key: string): any | undefined {\n    return this.map.get(key);\n  }\n\n  public getSafe<V>(key: IActionContextKey<V>): V {\n    if (!this.has(key)) {\n      throw new Error(`Context entry ${key.name} is required but not available`);\n    }\n    return <V> this.get(key);\n  }\n\n  public has<V>(key: IActionContextKey<V>): boolean {\n    return this.hasRaw(key.name);\n  }\n\n  public hasRaw(key: string): boolean {\n    return this.map.has(key);\n  }\n\n  public merge(...contexts: IActionContext[]): IActionContext {\n    // eslint-disable-next-line ts/no-this-alias\n    let context: IActionContext = this;\n    for (const source of contexts) {\n      for (const key of source.keys()) {\n        context = context.set(key, source.get(key));\n      }\n    }\n    return context;\n  }\n\n  public keys(): IActionContextKey<any>[] {\n    return [ ...<any> this.map.keys() ]\n      .map(keyName => new ActionContextKey(keyName));\n  }\n\n  public toJS(): any {\n    return this.map.toJS();\n  }\n\n  public toString(): string {\n    return `ActionContext(${JSON.stringify(this.map.toJS())})`;\n  }\n\n  public [Symbol.for('nodejs.util.inspect.custom')](): string {\n    return `ActionContext(${JSON.stringify(this.map.toJS(), null, '  ')})`;\n  }\n\n  /**\n   * Convert the given object to an action context object if it is not an action context object yet.\n   * If it already is an action context object, return the object as-is.\n   * @param maybeActionContext An action context or record.\n   * @return {ActionContext} An action context object.\n   */\n  public static ensureActionContext(maybeActionContext?: IActionContext | Record<string, any>): IActionContext {\n    return maybeActionContext instanceof ActionContext ?\n      maybeActionContext :\n      new ActionContext(Map(maybeActionContext ?? {}));\n  }\n}\n\n/**\n * Simple implementation of {@link IActionContextKey}.\n */\nexport class ActionContextKey<V> implements IActionContextKey<V> {\n  /**\n   * A unique context key name.\n   */\n  public readonly name: string;\n\n  public constructor(name: string) {\n    this.name = name;\n  }\n}\n","import type { Actor, IAction, IActorOutput, IActorTest } from './Actor';\nimport type { Bus } from './Bus';\n\n/**\n * An ActionObserver can passively listen to {@link Actor#run} inputs and outputs for all actors on a certain bus.\n *\n * ActionObserver should not edit inputs and outputs,\n * they should be considered immutable.\n *\n * @see Actor\n * @see Bus\n *\n * @template I The input type of an actor.\n * @template O The output type of an actor.\n */\nexport abstract class ActionObserver<I extends IAction, O extends IActorOutput> {\n  public readonly name: string;\n  public readonly bus: Bus<Actor<I, IActorTest, O>, I, IActorTest, O>;\n\n  /**\n   * All enumerable properties from the `args` object are inherited to this observer.\n   *\n   * The observer will NOT automatically subscribe to the given bus when this constructor is called.\n   *\n   * @param {IActionObserverArgs<I extends IAction, O extends IActorOutput>} args Arguments object\n   * @throws When required arguments are missing.\n   */\n  protected constructor(args: IActionObserverArgs<I, O>) {\n    Object.assign(this, args);\n  }\n\n  /**\n   * Invoked when an action was run by an actor.\n   *\n   * @param actor               The action on which the {@link Actor#run} method was invoked.\n   * @param {I}          action The original action input.\n   * @param {Promise<O>} output A promise resolving to the final action output.\n   */\n  public abstract onRun(actor: Actor<I, IActorTest, O>, action: I, output: Promise<O>): void;\n}\n\nexport interface IActionObserverArgs<I extends IAction, O extends IActorOutput> {\n\n  /**\n   * The name for this observer.\n   * @default {<rdf:subject>}\n   */\n  name: string;\n\n  /**\n   * The bus this observer can subscribe to.\n   */\n  bus: Bus<Actor<I, IActorTest, O>, I, IActorTest, O>;\n}\n","import type { IActionContext, Logger } from '@comunica/types';\nimport type { Bus } from './Bus';\nimport { CONTEXT_KEY_LOGGER } from './ContextEntries';\n\n/**\n * An actor can act on messages of certain types and provide output of a certain type.\n *\n * The flow of an actor is as follows:\n * 1. Send a message to {@link Actor#test} to test if an actor can run that action.\n * 2. If the actor can reply to the message, let the actor run the action using {@link Actor#run}.\n *\n * An actor is typically subscribed to a bus,\n * using which the applicability to an action can be tested.\n *\n * @see Bus\n *\n * @template I The input type of an actor.\n * @template T The test type of an actor.\n * @template O The output type of an actor.\n */\nexport abstract class Actor<I extends IAction, T extends IActorTest, O extends IActorOutput> implements\n    IActorArgs<I, T, O> {\n  public readonly name: string;\n  public readonly bus: Bus<Actor<I, T, O>, I, T, O>;\n  public readonly beforeActors: Actor<I, T, O>[] = [];\n\n  /**\n   * All enumerable properties from the `args` object are inherited to this actor.\n   *\n   * The actor will subscribe to the given bus when this constructor is called.\n   *\n   * @param {IActorArgs<I extends IAction, T extends IActorTest, O extends IActorOutput>} args Arguments object\n   * @param {string} args.name The name for this actor.\n   * @param {Bus<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest, O extends IActorOutput>} args.bus\n   *        The bus this actor subscribes to.\n   * @throws When required arguments are missing.\n   */\n  protected constructor(args: IActorArgs<I, T, O>) {\n    Object.assign(this, args);\n    this.bus.subscribe(this);\n    if (this.beforeActors.length > 0) {\n      this.bus.addDependencies(this, this.beforeActors);\n    }\n  }\n\n  /**\n   * Get the logger from the given context.\n   * @param {ActionContext} context An optional context.\n   * @return {Logger} The logger or undefined.\n   */\n  public static getContextLogger(context: IActionContext): Logger | undefined {\n    return context.get(CONTEXT_KEY_LOGGER);\n  }\n\n  /**\n   * Check if this actor can run the given action,\n   * without actually running it.\n   *\n   * @param {I} action The action to test.\n   * @return {Promise<T>} A promise that resolves to the test result.\n   */\n  public abstract test(action: I): Promise<T>;\n\n  /**\n   * Run the given action on this actor.\n   *\n   * In most cases, this method should not be called directly.\n   * Instead, {@link #runObservable} should be called.\n   *\n   * @param {I} action The action to run.\n   * @return {Promise<T>} A promise that resolves to the run result.\n   */\n  public abstract run(action: I): Promise<O>;\n\n  /**\n   * Run the given action on this actor\n   * AND invokes the {@link Bus#onRun} method.\n   *\n   * @param {I} action The action to run.\n   * @return {Promise<T>} A promise that resolves to the run result.\n   */\n  public runObservable(action: I): Promise<O> {\n    const output: Promise<O> = this.run(action);\n    this.bus.onRun(this, action, output);\n    return output;\n  }\n\n  /**\n   * Initialize this actor.\n   * This should be used for doing things that take a while,\n   * such as opening files.\n   *\n   * @return {Promise<void>} A promise that resolves when the actor has been initialized.\n   */\n  public async initialize(): Promise<any> {\n    return true;\n  }\n\n  /**\n   * Deinitialize this actor.\n   * This should be used for cleaning up things when the application is shut down,\n   * such as closing files and removing temporary files.\n   *\n   * @return {Promise<void>} A promise that resolves when the actor has been deinitialized.\n   */\n  public async deinitialize(): Promise<any> {\n    return true;\n  }\n\n  /* Proxy methods for the (optional) logger that is defined in the context */\n\n  protected getDefaultLogData(context: IActionContext, data?: (() => any)): any {\n    const dataActual = data ? data() : {};\n    dataActual.actor = this.name;\n    return dataActual;\n  }\n\n  protected logTrace(context: IActionContext, message: string, data?: (() => any)): void {\n    const logger: Logger | undefined = Actor.getContextLogger(context);\n    if (logger) {\n      logger.trace(message, this.getDefaultLogData(context, data));\n    }\n  }\n\n  protected logDebug(context: IActionContext, message: string, data?: (() => any)): void {\n    const logger: Logger | undefined = Actor.getContextLogger(context);\n    if (logger) {\n      logger.debug(message, this.getDefaultLogData(context, data));\n    }\n  }\n\n  protected logInfo(context: IActionContext, message: string, data?: (() => any)): void {\n    const logger: Logger | undefined = Actor.getContextLogger(context);\n    if (logger) {\n      logger.info(message, this.getDefaultLogData(context, data));\n    }\n  }\n\n  protected logWarn(context: IActionContext, message: string, data?: (() => any)): void {\n    const logger: Logger | undefined = Actor.getContextLogger(context);\n    if (logger) {\n      logger.warn(message, this.getDefaultLogData(context, data));\n    }\n  }\n\n  protected logError(context: IActionContext, message: string, data?: (() => any)): void {\n    const logger: Logger | undefined = Actor.getContextLogger(context);\n    if (logger) {\n      logger.error(message, this.getDefaultLogData(context, data));\n    }\n  }\n\n  protected logFatal(context: IActionContext, message: string, data?: (() => any)): void {\n    const logger: Logger | undefined = Actor.getContextLogger(context);\n    if (logger) {\n      logger.fatal(message, this.getDefaultLogData(context, data));\n    }\n  }\n}\n\nexport interface IActorArgs<I extends IAction, T extends IActorTest, O extends IActorOutput> {\n  /**\n   * The name for this actor.\n   * @default {<rdf:subject>}\n   */\n  name: string;\n  /**\n   * The bus this actor subscribes to.\n   */\n  bus: Bus<Actor<I, T, O>, I, T, O>;\n  /**\n   * Actor that must be registered in the bus before this actor.\n   */\n  beforeActors?: Actor<I, T, O>[];\n}\n\n/**\n * Data interface for the type of action.\n */\nexport interface IAction {\n  /**\n   * The input context that is passed through by actors.\n   */\n  context: IActionContext;\n}\n\n/**\n * Data interface for the type of an actor test result.\n */\nexport interface IActorTest {\n\n}\n\n/**\n * Data interface for the type of an actor run result.\n */\nexport interface IActorOutput {\n\n}\n","import type { ActionObserver } from './ActionObserver';\nimport type { Actor, IAction, IActorOutput, IActorTest } from './Actor';\n\n/**\n * A publish-subscribe bus for sending actions to actors\n * to test whether or not they can run an action.\n *\n * This bus does not run the action itself,\n * for that a {@link Mediator} can be used.\n *\n * @see Actor\n * @see Mediator\n *\n * @template A The actor type that can subscribe to the sub.\n * @template I The input type of an actor.\n * @template T The test type of an actor.\n * @template O The output type of an actor.\n */\nexport class Bus<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest, O extends IActorOutput> implements\n    IBusArgs {\n  public readonly name: string;\n  protected readonly actors: A[] = [];\n  protected readonly observers: ActionObserver<I, O>[] = [];\n  // Mapping from dependency (after) to dependents (before)\n  protected readonly dependencyLinks: Map<A, A[]> = new Map();\n\n  /**\n   * All enumerable properties from the `args` object are inherited to this bus.\n   *\n   * @param {IBusArgs} args Arguments object\n   * @param {string} args.name The name for the bus\n   * @throws When required arguments are missing.\n   */\n  public constructor(args: IBusArgs) {\n    Object.assign(this, args);\n  }\n\n  /**\n   * Subscribe the given actor to the bus.\n   * After this, the given actor can be unsubscribed from the bus by calling {@link Bus#unsubscribe}.\n   *\n   * An actor that is subscribed multiple times will exist that amount of times in the bus.\n   *\n   * @param {A} actor The actor to subscribe.\n   */\n  public subscribe(actor: A): void {\n    this.actors.push(actor);\n    this.reorderForDependencies();\n  }\n\n  /**\n   * Subscribe the given observer to the bus.\n   * After this, the given observer can be unsubscribed from the bus by calling {@link Bus#unsubscribeObserver}.\n   *\n   * An observer that is subscribed multiple times will exist that amount of times in the bus.\n   *\n   * @param {ActionObserver<I, O>} observer The observer to subscribe.\n   */\n  public subscribeObserver(observer: ActionObserver<I, O>): void {\n    this.observers.push(observer);\n  }\n\n  /**\n   * Unsubscribe the given actor from the bus.\n   *\n   * An actor that is subscribed multiple times will be unsubscribed only once.\n   *\n   * @param {A} actor The actor to unsubscribe\n   * @return {boolean} If the given actor was successfully unsubscribed,\n   *         otherwise it was not subscribed before.\n   */\n  public unsubscribe(actor: A): boolean {\n    const index: number = this.actors.indexOf(actor);\n    if (index >= 0) {\n      this.actors.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Unsubscribe the given observer from the bus.\n   *\n   * An observer that is subscribed multiple times will be unsubscribed only once.\n   *\n   * @param {ActionObserver<I, O>} observer The observer to unsubscribe.\n   * @return {boolean} If the given observer was successfully unsubscribed,\n   *         otherwise it was not subscribed before.\n   */\n  public unsubscribeObserver(observer: ActionObserver<I, O>): boolean {\n    const index: number = this.observers.indexOf(observer);\n    if (index >= 0) {\n      this.observers.splice(index, 1);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Publish an action to all actors in the bus to test if they can run the action.\n   *\n   * @param {I} action An action to publish\n   * @return {IActorReply<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest,\n   *         O extends IActorOutput>[]}\n   *         An array of reply objects. Each object contains a reference to the actor,\n   *         and a promise to its {@link Actor#test} result.\n   */\n  public publish(action: I): IActorReply<A, I, T, O>[] {\n    return this.actors.map((actor: A): IActorReply<A, I, T, O> => ({ actor, reply: actor.test(action) }));\n  }\n\n  /**\n   * Invoked when an action was run by an actor.\n   *\n   * @param actor               The action on which the {@link Actor#run} method was invoked.\n   * @param {I}          action The original action input.\n   * @param {Promise<O>} output A promise resolving to the final action output.\n   */\n  public onRun(actor: Actor<I, T, O>, action: I, output: Promise<O>): void {\n    for (const observer of this.observers) {\n      observer.onRun(actor, action, output);\n    }\n  }\n\n  /**\n   * Indicate that the given actor has the given actor dependencies.\n   *\n   * This will ensure that the given actor will be present in the bus *before* the given dependencies.\n   *\n   * @param {A} dependent A dependent actor that will be placed before the given actors.\n   * @param {A[]} dependencies Actor dependencies that will be placed after the given actor.\n   */\n  public addDependencies(dependent: A, dependencies: A[]): void {\n    for (const dependency of dependencies) {\n      let existingDependencies = this.dependencyLinks.get(dependency);\n      if (!existingDependencies) {\n        existingDependencies = [];\n        this.dependencyLinks.set(dependency, existingDependencies);\n      }\n      existingDependencies.push(dependent);\n    }\n    this.reorderForDependencies();\n  }\n\n  /**\n   * Reorder the bus based on all present dependencies.\n   */\n  public reorderForDependencies(): void {\n    if (this.dependencyLinks.size > 0) {\n      const actorsAfter = [];\n\n      // Temporarily remove all actors that have dependencies\n      for (const actorAfter of this.dependencyLinks.keys()) {\n        const dependentPos = this.actors.indexOf(actorAfter);\n        if (dependentPos >= 0) {\n          this.actors.splice(dependentPos, 1);\n          actorsAfter.push(actorAfter);\n        }\n      }\n\n      // Iteratively append actors based on the first dependency link\n      // that has all of its dependencies available in the array\n      while (actorsAfter.length > 0) {\n        // Find the first actor that has all of its dependencies available.\n        let activeActorAfterId = -1;\n        for (let i = 0; i < actorsAfter.length; i++) {\n          let validLink = true;\n          for (const dependency of this.dependencyLinks.get(actorsAfter[i])!) {\n            if (!this.actors.includes(dependency) && actorsAfter.includes(dependency)) {\n              validLink = false;\n              break;\n            }\n          }\n          if (validLink) {\n            activeActorAfterId = i;\n            break;\n          }\n        }\n\n        // If none of the pending links are possible, there must be a cyclic dependency\n        if (activeActorAfterId < 0) {\n          throw new Error(`Cyclic dependency links detected in bus ${this.name}`);\n        }\n\n        // The dependent may not be available (yet), so we don't add it to the array (yet).\n        const activeActorAfter = actorsAfter.splice(activeActorAfterId, 1)[0];\n        this.actors.push(activeActorAfter);\n      }\n    }\n  }\n}\n\nexport interface IBusArgs {\n  /**\n   * The name for this bus.\n   * @default {<rdf:subject>}\n   */\n  name: string;\n}\n\n/**\n * Data interface for holding an actor and a promise to a reply from that actor.\n */\nexport interface IActorReply<\n  A extends Actor<I, T, O>,\nI extends IAction,\nT extends IActorTest,\nO extends IActorOutput,\n> {\n  actor: A;\n  reply: Promise<T>;\n}\n\nexport type IReply<\n  I extends IAction = IAction,\n  O extends IActorOutput = IActorOutput,\n  T extends IActorTest = IActorTest,\n> = IActorReply<Actor<I, T, O>, I, T, O>;\n\nexport type IBus<I extends IAction = IAction, O extends IActorOutput = IActorOutput, T extends IActorTest = IActorTest>\n= Bus<Actor<I, T, O>, I, T, O>;\n","import type { Actor, IAction, IActorOutput, IActorTest } from './Actor';\nimport type { IActorReply, IBusArgs } from './Bus';\nimport { Bus } from './Bus';\n\n/**\n * A bus that indexes identified actors,\n * so that actions with a corresponding identifier can be published more efficiently.\n *\n * Multiple actors with the same identifier can be subscribed.\n *\n * If actors or actions do not have a valid identifier,\n * then this will fallback to the normal bus behaviour.\n *\n * @see Bus\n *\n * @template A The actor type that can subscribe to the sub.\n * @template I The input type of an actor.\n * @template T The test type of an actor.\n * @template O The output type of an actor.\n */\nexport class BusIndexed<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest, O extends IActorOutput>\n  extends Bus<A, I, T, O> {\n  protected readonly actorsIndex: Record<string, A[]> = {};\n  protected readonly actorIdentifierFields: string[];\n  protected readonly actionIdentifierFields: string[];\n\n  /**\n   * All enumerable properties from the `args` object are inherited to this bus.\n   *\n   * @param {IBusIndexedArgs} args Arguments object\n   * @param {string} args.name The name for the bus\n   * @throws When required arguments are missing.\n   */\n  public constructor(args: IBusIndexedArgs) {\n    super(args);\n  }\n\n  public override subscribe(actor: A): void {\n    const actorId = this.getActorIdentifier(actor) || '_undefined_';\n    let actors = this.actorsIndex[actorId];\n    if (!actors) {\n      actors = this.actorsIndex[actorId] = [];\n    }\n    actors.push(actor);\n    super.subscribe(actor);\n  }\n\n  public override unsubscribe(actor: A): boolean {\n    const actorId = this.getActorIdentifier(actor) || '_undefined_';\n    const actors = this.actorsIndex[actorId];\n    if (actors) {\n      const i = actors.indexOf(actor);\n      if (i >= 0) {\n        actors.splice(i, 1);\n      }\n      if (actors.length === 0) {\n        delete this.actorsIndex[actorId];\n      }\n    }\n    return super.unsubscribe(actor);\n  }\n\n  public override publish(action: I): IActorReply<A, I, T, O>[] {\n    const actionId = this.getActionIdentifier(action);\n    if (actionId) {\n      const actors = [ ...this.actorsIndex[actionId] || [], ...this.actorsIndex._undefined_ || [] ];\n      return actors.map((actor: A): IActorReply<A, I, T, O> => ({ actor, reply: actor.test(action) }));\n    }\n    return super.publish(action);\n  }\n\n  protected getActorIdentifier(actor: A): string {\n    return this.actorIdentifierFields.reduce((object: any, field): A => object[field], actor);\n  }\n\n  protected getActionIdentifier(action: I): string {\n    return this.actionIdentifierFields.reduce((object: any, field): A => object[field], action);\n  }\n}\n\nexport interface IBusIndexedArgs extends IBusArgs {\n  actorIdentifierFields: string[];\n  actionIdentifierFields: string[];\n}\n","import type { Logger } from '@comunica/types';\nimport { ActionContextKey } from './ActionContext';\n\nexport const CONTEXT_KEY_LOGGER = new ActionContextKey<Logger>('@comunica/core:log');\n","import type { Actor, IAction, IActorOutput, IActorTest } from './Actor';\nimport type { Bus, IActorReply } from './Bus';\n\n/**\n * A mediator can mediate an action over a bus of actors.\n *\n * It does the following:\n * 1. Accepts an action in {@link Mediator#mediate}.\n * 2. Sends the action to the bus to test its applicability on all actors.\n * 3. It _mediates_ over these test results.\n * 4. It selects the _best_ actor.\n * 5. The action is run by the _best_ actor, and the result if returned.\n *\n * The _mediates_ and _best_ parts are filled in by subclasses of this abstract Mediator class.\n *\n * @template A The type of actor to mediator over.\n * @template I The input type of an actor.\n * @template T The test type of an actor.\n * @template O The output type of an actor.\n */\nexport abstract class Mediator<\n  A extends Actor<I, T, O>,\nI extends IAction,\nT extends IActorTest,\nO extends IActorOutput,\n> implements IMediatorArgs<A, I, T, O> {\n  public readonly name: string;\n  public readonly bus: Bus<A, I, T, O>;\n\n  /**\n   * All enumerable properties from the `args` object are inherited to this mediator.\n   *\n   * @param {IMediatorArgs<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest,\n   * O extends IActorOutput>} args Arguments object\n   * @param {string} args.name The name for this mediator.\n   * @param {Bus<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest, O extends IActorOutput>} args.bus\n   *        The bus this mediator will mediate over.\n   * @throws When required arguments are missing.\n   */\n  protected constructor(args: IMediatorArgs<A, I, T, O>) {\n    Object.assign(this, args);\n  }\n\n  /**\n   * Publish the given action in the bus.\n   *\n   * This will send the test action on all actors in the bus.\n   * All actor replies will be returned.\n   *\n   * @param {I} action The action to mediate for.\n   * @return {IActorReply<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest, O extends IActorOutput>[]}\n   * The list of actor replies.\n   */\n  public publish(action: I): IActorReply<A, I, T, O>[] {\n    // Test all actors in the bus\n    const actors: IActorReply<A, I, T, O>[] = this.bus.publish(action);\n    if (actors.length === 0) {\n      throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);\n    }\n    return actors;\n  }\n\n  /**\n   * Mediate for the given action to get an actor.\n   *\n   * This will send the test action on all actors in the bus.\n   * The actor that tests _best_ will be returned.\n   *\n   * @param {I} action The action to mediate for.\n   * @return {Promise<O extends IActorOutput>} A promise that resolves to the _best_ actor.\n   */\n  public async mediateActor(action: I): Promise<A> {\n    // Mediate to one actor and run that actor.\n    return await this.mediateWith(action, this.publish(action));\n  }\n\n  /**\n   * Mediate for the given action.\n   *\n   * This will send the test action on all actors in the bus.\n   * The action will be run on the actor that tests _best_,\n   * of which the result will be returned.\n   *\n   * @param {I} action The action to mediate for.\n   * @return {Promise<O extends IActorOutput>} A promise that resolves to the mediation result.\n   */\n  public async mediate(action: I): Promise<O> {\n    // Mediate to one actor and run the action on it\n    const actor: A = await this.mediateActor(action);\n    return actor.runObservable(action);\n  }\n\n  /**\n   * Mediate for the given action with the given actor test results for the action.\n   *\n   * One actor must be returned that provided the _best_ test result.\n   * How '_best_' is interpreted, depends on the implementation of the Mediator.\n   *\n   * @param {I} action The action to mediate for.\n   * @param {IActorReply<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest,\n   * O extends IActorOutput>[]} testResults The actor test results for the action.\n   * @return {Promise<A extends Actor<I, T, O>>} A promise that resolves to the _best_ actor.\n   */\n  protected abstract mediateWith(action: I, testResults: IActorReply<A, I, T, O>[]): Promise<A>;\n}\n\nexport interface IMediatorArgs<\n  A extends Actor<I, T, O>,\nI extends IAction,\nT extends IActorTest,\nO extends IActorOutput,\n> {\n  /**\n   * The name for this mediator.\n   * @default {<rdf:subject>}\n   */\n  name: string;\n  /**\n   * The bus this mediator will mediate over.\n   */\n  bus: Bus<A, I, T, O>;\n}\n\nexport type Mediate<I extends IAction, O extends IActorOutput, T extends IActorTest = IActorTest> =\nMediator<Actor<I, T, O>, I, T, O>;\n","import type * as RDF from '@rdfjs/types';\n\n/**\n * A blank node that is scoped to a set of bindings.\n */\nexport class BlankNodeBindingsScoped implements RDF.BlankNode {\n  public readonly termType = 'BlankNode';\n  public readonly singleBindingsScope = true;\n  public readonly value: string;\n\n  public constructor(value: string) {\n    this.value = value;\n  }\n\n  public equals(other: RDF.Term | null | undefined): boolean {\n    // eslint-disable-next-line no-implicit-coercion\n    return !!other && other.termType === 'BlankNode' && other.value === this.value;\n  }\n}\n","import type * as RDF from '@rdfjs/types';\n\n/**\n * A blank node that is scoped to a certain source.\n */\nexport class BlankNodeScoped implements RDF.BlankNode {\n  public readonly termType = 'BlankNode';\n  public readonly value: string;\n  /**\n   * This value can be obtained by consumers in query results,\n   * so that this can be passed into another query as an IRI,\n   * in order to obtain more results relating to this (blank) node.\n   */\n  public readonly skolemized: RDF.NamedNode;\n\n  public constructor(value: string, skolemized: RDF.NamedNode) {\n    this.value = value;\n    this.skolemized = skolemized;\n  }\n\n  public equals(other: RDF.Term | null | undefined): boolean {\n    // eslint-disable-next-line no-implicit-coercion\n    return !!other && other.termType === 'BlankNode' && other.value === this.value;\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport * as RdfString from 'rdf-string';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport type { ICompleteSharedContext } from '../evaluators/evaluatorHelpers/BaseExpressionEvaluator';\nimport type * as E from '../expressions';\nimport { TermTransformer } from '../transformers/TermTransformer';\nimport type { ITermTransformer } from '../transformers/TermTransformer';\nimport { TypeAlias } from '../util/Consts';\nimport { isSubTypeOf } from '../util/TypeHandling';\nimport type { IAggregatorComponentClass } from '.';\n\nexport abstract class AggregatorComponent {\n  public abstract put(bindings: RDF.Term | undefined): void;\n  public abstract result(): RDF.Term | undefined;\n\n  protected separator: string;\n  protected termTransformer: ITermTransformer;\n\n  public static emptyValue(): RDF.Term | undefined {\n    return undefined;\n  }\n\n  public constructor(expr: Algebra.AggregateExpression, protected sharedContext: ICompleteSharedContext) {\n    this.separator = expr.separator || ' ';\n    this.termTransformer = new TermTransformer(sharedContext.superTypeProvider);\n  }\n\n  protected termToNumericOrError(term: RDF.Term): E.NumericLiteral {\n    if (term.termType !== 'Literal') {\n      throw new Error(`Term with value ${term.value} has type ${term.termType} and is not a numeric literal`);\n    } else if (\n      !isSubTypeOf(term.datatype.value, TypeAlias.SPARQL_NUMERIC, this.sharedContext.superTypeProvider)\n    ) {\n      throw new Error(`Term datatype ${term.datatype.value} with value ${term.value} has type ${term.termType} and is not a numeric literal`);\n    }\n    return <E.NumericLiteral> this.termTransformer.transformLiteral(term);\n  }\n}\n\n/**\n * A base aggregator that can handle distinct and possibly wildcards.\n */\nexport class Aggregator {\n  protected distinct: boolean;\n  protected variableValues: Map<string, Set<string>> = new Map();\n\n  public constructor(expr: Algebra.AggregateExpression, protected aggregatorComponent: AggregatorComponent) {\n    this.distinct = expr.distinct;\n  }\n\n  public static emptyValue(component: IAggregatorComponentClass): RDF.Term | undefined {\n    return component.emptyValue();\n  }\n\n  public result(): RDF.Term | undefined {\n    return this.aggregatorComponent.result();\n  }\n\n  public put(bindings: RDF.Term, variable = ''): void {\n    if (!this.canSkip(bindings, variable)) {\n      this.aggregatorComponent.put(bindings);\n      this.addSeen(bindings, variable);\n    }\n  }\n\n  private canSkip(term: RDF.Term, variable: string): boolean {\n    const set = this.variableValues.get(variable);\n    return this.distinct && set !== undefined && set.has(RdfString.termToString(term));\n  }\n\n  private addSeen(term: RDF.Term, variable: string): void {\n    if (this.distinct) {\n      if (!this.variableValues.has(variable)) {\n        this.variableValues.set(variable, new Set());\n      }\n      this.variableValues.get(variable)!.add(RdfString.termToString(term));\n    }\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport * as E from '../expressions';\nimport { regularFunctions } from '../functions';\nimport { integer } from '../functions/Helpers';\nimport * as C from '../util/Consts';\nimport { AggregatorComponent } from './Aggregator';\n\ninterface IAverageState {\n  sum: E.NumericLiteral;\n  count: number;\n}\n\nexport class Average extends AggregatorComponent {\n  private readonly summer = regularFunctions[C.RegularOperator.ADDITION];\n  private readonly divider = regularFunctions[C.RegularOperator.DIVISION];\n  private state: IAverageState | undefined = undefined;\n\n  public static override emptyValue(): RDF.Term {\n    return integer(0).toRDF();\n  }\n\n  public put(term: RDF.Term): void {\n    if (this.state === undefined) {\n      const sum = this.termToNumericOrError(term);\n      this.state = { sum, count: 1 };\n    } else {\n      const internalTerm = this.termToNumericOrError(term);\n      this.state.sum = <E.NumericLiteral> this.summer.apply([ this.state.sum, internalTerm ], this.sharedContext);\n      this.state.count++;\n    }\n  }\n\n  public result(): RDF.Term {\n    if (this.state === undefined) {\n      return Average.emptyValue();\n    }\n    const count = new E.IntegerLiteral(this.state.count);\n    const result = this.divider.apply([ this.state.sum, count ], this.sharedContext);\n    return result.toRDF();\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport { integer } from '../functions/Helpers';\nimport { AggregatorComponent } from './Aggregator';\n\nexport class Count extends AggregatorComponent {\n  private state: number | undefined = undefined;\n  public static override emptyValue(): RDF.Term {\n    return integer(0).toRDF();\n  }\n\n  public put(): void {\n    if (this.state === undefined) {\n      this.state = 0;\n    }\n    this.state++;\n  }\n\n  public result(): RDF.Term {\n    if (this.state === undefined) {\n      return Count.emptyValue();\n    }\n    return integer(this.state).toRDF();\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport { langString, string } from '../functions/Helpers';\nimport { AggregatorComponent } from './Aggregator';\n\nexport class GroupConcat extends AggregatorComponent {\n  private state: string | undefined = undefined;\n  private lastLanguageValid = true;\n  private lastLanguage: string | undefined = undefined;\n\n  public static override emptyValue(): RDF.Term {\n    return string('').toRDF();\n  }\n\n  public put(term: RDF.Term): void {\n    if (this.state === undefined) {\n      this.state = term.value;\n      if (term.termType === 'Literal') {\n        this.lastLanguage = term.language;\n      }\n    } else {\n      this.state += this.separator + term.value;\n      if (this.lastLanguageValid && term.termType === 'Literal' && this.lastLanguage !== term.language) {\n        this.lastLanguageValid = false;\n        this.lastLanguage = undefined;\n      }\n    }\n  }\n\n  public result(): RDF.Term {\n    if (this.state === undefined) {\n      return GroupConcat.emptyValue();\n    }\n    if (this.lastLanguageValid && this.lastLanguage) {\n      return langString(this.state, this.lastLanguage).toRDF();\n    }\n    return string(this.state).toRDF();\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport { orderTypes } from '../util/Ordering';\nimport { AggregatorComponent } from './Aggregator';\n\nexport class Max extends AggregatorComponent {\n  private state: RDF.Term | undefined = undefined;\n\n  public put(term: RDF.Term): void {\n    if (term.termType !== 'Literal') {\n      throw new Error(`Term with value ${term.value} has type ${term.termType} and is not a literal`);\n    }\n    if (this.state === undefined) {\n      this.state = term;\n    } else if (orderTypes(this.state, term) === -1) {\n      this.state = term;\n    }\n  }\n\n  public result(): RDF.Term | undefined {\n    if (this.state === undefined) {\n      return Max.emptyValue();\n    }\n    return this.state;\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport { orderTypes } from '../util/Ordering';\nimport { AggregatorComponent } from './Aggregator';\n\nexport class Min extends AggregatorComponent {\n  private state: RDF.Term | undefined = undefined;\n\n  public put(term: RDF.Term): void {\n    if (term.termType !== 'Literal') {\n      throw new Error(`Term with value ${term.value} has type ${term.termType} and is not a literal`);\n    }\n    if (this.state === undefined) {\n      this.state = term;\n    } else if (orderTypes(this.state, term) === 1) {\n      this.state = term;\n    }\n  }\n\n  public result(): RDF.Term | undefined {\n    if (this.state === undefined) {\n      return Min.emptyValue();\n    }\n    return this.state;\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport { AggregatorComponent } from './Aggregator';\n\nexport class Sample extends AggregatorComponent {\n  private state: RDF.Term | undefined = undefined;\n\n  public put(term: RDF.Term): void {\n    // First value is our sample\n    if (this.state === undefined) {\n      this.state = term;\n    }\n  }\n\n  public result(): RDF.Term | undefined {\n    if (this.state === undefined) {\n      return Sample.emptyValue();\n    }\n    return this.state;\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport type * as E from '../expressions';\nimport { regularFunctions } from '../functions';\nimport { integer } from '../functions/Helpers';\nimport * as C from '../util/Consts';\nimport { AggregatorComponent } from './Aggregator';\n\ntype SumState = E.NumericLiteral;\n\nexport class Sum extends AggregatorComponent {\n  private state: SumState | undefined = undefined;\n  private readonly summer = regularFunctions[C.RegularOperator.ADDITION];\n\n  public static override emptyValue(): RDF.Term {\n    return integer(0).toRDF();\n  }\n\n  public put(term: RDF.Term): void {\n    if (this.state === undefined) {\n      this.state = this.termToNumericOrError(term);\n    } else {\n      const internalTerm = this.termToNumericOrError(term);\n      this.state = <E.NumericLiteral> this.summer.apply([ this.state, internalTerm ], this.sharedContext);\n    }\n  }\n\n  public result(): RDF.Term {\n    if (this.state === undefined) {\n      return Sum.emptyValue();\n    }\n    return this.state.toRDF();\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport * as RdfString from 'rdf-string';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport { integer } from '../functions/Helpers';\n\n/**\n * Implementation of the COUNT aggregator on a wildcard.\n * We choose to make this is separate class, because it would pollute the code of the other aggregators.\n */\nexport class WildcardCountAggregator {\n  private readonly distinct: boolean;\n\n  // Key: string representation of a ',' separated list of terms.\n  // Value: string representation of a ',' separated list of variables sorted by name.\n  private readonly bindingValues: Map<string, Set<string>> = new Map();\n  private counter = 0;\n\n  public constructor(expr: Algebra.AggregateExpression) {\n    this.distinct = expr.distinct;\n  }\n\n  public putBindings(bindings: RDF.Bindings): void {\n    if (!this.handleDistinct(bindings)) {\n      this.counter += 1;\n    }\n  }\n\n  public static emptyValue(): RDF.Term {\n    return integer(0).toRDF();\n  }\n\n  public result(): RDF.Term {\n    return integer(this.counter).toRDF();\n  }\n\n  /**\n   * Returns true if the given bindings should be skipped.\n   * @param bindings\n   * @private\n   */\n  private handleDistinct(bindings: RDF.Bindings): boolean {\n    if (this.distinct) {\n      const bindingList: [RDF.Variable, RDF.Term][] = [ ...bindings ];\n      bindingList.sort((first, snd) => first[0].value.localeCompare(snd[0].value));\n      const variables = bindingList.map(([ variable ]) => variable.value).join(',');\n      const terms = bindingList.map(([ , term ]) => RdfString.termToString(term)).join(',');\n\n      const set = this.bindingValues.get(variables);\n      const result = set !== undefined && set.has(terms);\n\n      // Add to the set:\n      if (!set) {\n        this.bindingValues.set(variables, new Set());\n      }\n      this.bindingValues.get(variables)!.add(terms);\n\n      return result;\n    }\n    return false;\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport { BaseAggregateEvaluator } from './evaluatorHelpers/BaseAggregateEvaluator';\nimport type { ISyncEvaluatorContext } from './SyncEvaluator';\nimport { SyncEvaluator } from './SyncEvaluator';\n\n// TODO: Support hooks & change name to SyncAggregateEvaluator\nexport class AggregateEvaluator extends BaseAggregateEvaluator {\n  private readonly evaluator: SyncEvaluator;\n\n  public constructor(expr: Algebra.AggregateExpression, context?: ISyncEvaluatorContext, throwError?: boolean) {\n    super(expr, SyncEvaluator.completeContext(context ?? {}), throwError);\n    this.evaluator = new SyncEvaluator(expr.expression, context);\n  }\n\n  public put(bindings: RDF.Bindings): void {\n    if (this.errorOccurred) {\n      return;\n    }\n    if (this.isWildcard) {\n      this.wildcardAggregator!.putBindings(bindings);\n    } else {\n      try {\n        const startTerm = this.evaluator.evaluate(bindings);\n        this.aggregator.put(startTerm);\n      } catch (error: unknown) {\n        this.safeThrow(error);\n      }\n    }\n  }\n\n  protected safeThrow(err: unknown): void {\n    if (this.throwError) {\n      throw err;\n    } else {\n      this.errorOccurred = true;\n    }\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport type { IAsyncEvaluatorContext } from './AsyncEvaluator';\nimport { AsyncEvaluator } from './AsyncEvaluator';\nimport { BaseAggregateEvaluator } from './evaluatorHelpers/BaseAggregateEvaluator';\n\nexport class AsyncAggregateEvaluator extends BaseAggregateEvaluator {\n  private readonly evaluator: AsyncEvaluator;\n\n  public constructor(expr: Algebra.AggregateExpression, context?: IAsyncEvaluatorContext, throwError?: boolean) {\n    super(expr, AsyncEvaluator.completeContext(context ?? {}), throwError);\n    this.evaluator = new AsyncEvaluator(expr.expression, context);\n    this.errorOccurred = false;\n  }\n\n  public async put(bindings: RDF.Bindings): Promise<void> {\n    if (this.errorOccurred) {\n      return;\n    }\n    if (this.isWildcard) {\n      this.wildcardAggregator!.putBindings(bindings);\n    } else {\n      try {\n        const startTerm = await this.evaluator.evaluate(bindings);\n        if (!startTerm || this.errorOccurred) {\n          return;\n        }\n        this.aggregator.put(startTerm);\n      } catch (error: unknown) {\n        this.safeThrow(error);\n      }\n    }\n  }\n\n  protected safeThrow(err: unknown): void {\n    if (this.throwError) {\n      throw err;\n    } else {\n      this.errorOccurred = true;\n    }\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport { LRUCache } from 'lru-cache';\nimport type { Algebra as Alg } from 'sparqlalgebrajs';\nimport type * as E from '../expressions/Expressions';\nimport { AlgebraTransformer } from '../transformers/AlgebraTransformer';\nimport type { IExpressionEvaluator } from '../Types';\nimport { extractTimeZone } from '../util/DateTimeHelpers';\nimport type { ICompleteAsyncEvaluatorContext } from './evaluatorHelpers/AsyncRecursiveEvaluator';\nimport { AsyncRecursiveEvaluator } from './evaluatorHelpers/AsyncRecursiveEvaluator';\nimport type { ISharedContext } from './evaluatorHelpers/BaseExpressionEvaluator';\n\nexport type AsyncExtensionFunction = (args: RDF.Term[]) => Promise<RDF.Term>;\nexport type AsyncExtensionFunctionCreator = (functionNamedNode: RDF.NamedNode) => AsyncExtensionFunction | undefined;\n\nexport interface IAsyncEvaluatorContext extends ISharedContext {\n  exists?: (expression: Alg.ExistenceExpression, mapping: RDF.Bindings) => Promise<boolean>;\n  aggregate?: (expression: Alg.AggregateExpression) => Promise<RDF.Term>;\n  bnode?: (input?: string) => Promise<RDF.BlankNode>;\n  extensionFunctionCreator?: AsyncExtensionFunctionCreator;\n}\n\nexport class AsyncEvaluator {\n  private readonly expr: E.Expression;\n  private readonly evaluator: IExpressionEvaluator<E.Expression, Promise<E.TermExpression>>;\n\n  public static completeContext(context: IAsyncEvaluatorContext): ICompleteAsyncEvaluatorContext {\n    const now = context.now ?? new Date(Date.now());\n    return {\n      now,\n      baseIRI: context.baseIRI ?? undefined,\n      functionArgumentsCache: context.functionArgumentsCache ?? {},\n      superTypeProvider: {\n        cache: context.typeCache ?? new LRUCache({ max: 1_000 }),\n        discoverer: context.getSuperType ?? (() => 'term'),\n      },\n      extensionFunctionCreator: context.extensionFunctionCreator,\n      exists: context.exists,\n      aggregate: context.aggregate,\n      bnode: context.bnode,\n      defaultTimeZone: context.defaultTimeZone ?? extractTimeZone(now),\n    };\n  }\n\n  public constructor(public algExpr: Alg.Expression, context: IAsyncEvaluatorContext = {}) {\n    // eslint-disable-next-line unicorn/no-useless-undefined\n    const creator = context.extensionFunctionCreator ?? (() => undefined);\n    const baseContext = AsyncEvaluator.completeContext(context);\n\n    const transformer = new AlgebraTransformer({\n      type: 'async',\n      creator,\n      ...baseContext,\n    });\n    this.expr = transformer.transformAlgebra(algExpr);\n\n    this.evaluator = new AsyncRecursiveEvaluator(baseContext, transformer);\n  }\n\n  public async evaluate(mapping: RDF.Bindings): Promise<RDF.Term> {\n    const result = await this.evaluator.evaluate(this.expr, mapping);\n    return result.toRDF();\n  }\n\n  public async evaluateAsEBV(mapping: RDF.Bindings): Promise<boolean> {\n    const result = await this.evaluator.evaluate(this.expr, mapping);\n    return result.coerceEBV();\n  }\n\n  public async evaluateAsInternal(mapping: RDF.Bindings): Promise<E.TermExpression> {\n    return await this.evaluator.evaluate(this.expr, mapping);\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport { LRUCache } from 'lru-cache';\nimport type { Algebra as Alg } from 'sparqlalgebrajs';\nimport type * as E from '../expressions/Expressions';\nimport { AlgebraTransformer } from '../transformers/AlgebraTransformer';\nimport type { IExpressionEvaluator } from '../Types';\nimport { extractTimeZone } from '../util/DateTimeHelpers';\nimport type { ISharedContext } from './evaluatorHelpers/BaseExpressionEvaluator';\nimport type { ICompleteSyncEvaluatorContext } from './evaluatorHelpers/SyncRecursiveEvaluator';\nimport { SyncRecursiveEvaluator } from './evaluatorHelpers/SyncRecursiveEvaluator';\n\nexport interface ISyncEvaluatorContext extends ISharedContext {\n  exists?: (expression: Alg.ExistenceExpression, mapping: RDF.Bindings) => boolean;\n  aggregate?: (expression: Alg.AggregateExpression) => RDF.Term;\n  bnode?: (input?: string) => RDF.BlankNode;\n  extensionFunctionCreator?: SyncExtensionFunctionCreator;\n}\n\nexport type SyncExtensionFunction = (args: RDF.Term[]) => RDF.Term;\nexport type SyncExtensionFunctionCreator = (functionNamedNode: RDF.NamedNode) => SyncExtensionFunction | undefined;\n\nexport class SyncEvaluator {\n  private readonly expr: E.Expression;\n  private readonly evaluator: IExpressionEvaluator<E.Expression, E.TermExpression>;\n\n  public static completeContext(context: ISyncEvaluatorContext): ICompleteSyncEvaluatorContext {\n    const now = context.now ?? new Date(Date.now());\n    return {\n      now,\n      baseIRI: context.baseIRI ?? undefined,\n      functionArgumentsCache: context.functionArgumentsCache ?? {},\n      superTypeProvider: {\n        cache: context.typeCache ?? new LRUCache({ max: 1_000 }),\n        discoverer: context.getSuperType ?? (() => 'term'),\n      },\n      extensionFunctionCreator: context.extensionFunctionCreator,\n      exists: context.exists,\n      aggregate: context.aggregate,\n      bnode: context.bnode,\n      defaultTimeZone: context.defaultTimeZone ?? extractTimeZone(now),\n    };\n  }\n\n  public constructor(public algExpr: Alg.Expression, public context: ISyncEvaluatorContext = {}) {\n    // eslint-disable-next-line unicorn/no-useless-undefined\n    const creator = context.extensionFunctionCreator ?? (() => undefined);\n    const baseContext = SyncEvaluator.completeContext(context);\n\n    const transformer = new AlgebraTransformer({\n      type: 'sync',\n      creator,\n      ...baseContext,\n    });\n    this.expr = transformer.transformAlgebra(algExpr);\n\n    this.evaluator = new SyncRecursiveEvaluator(baseContext, transformer);\n  }\n\n  public evaluate(mapping: RDF.Bindings): RDF.Term {\n    const result = this.evaluator.evaluate(this.expr, mapping);\n    return result.toRDF();\n  }\n\n  public evaluateAsEBV(mapping: RDF.Bindings): boolean {\n    const result = this.evaluator.evaluate(this.expr, mapping);\n    return result.coerceEBV();\n  }\n\n  public evaluateAsInternal(mapping: RDF.Bindings): E.TermExpression {\n    return this.evaluator.evaluate(this.expr, mapping);\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport type { Algebra as Alg } from 'sparqlalgebrajs';\nimport * as E from '../../expressions';\nimport type { AsyncExtension } from '../../expressions';\nimport type { EvalContextAsync } from '../../functions';\nimport type { ITermTransformer } from '../../transformers/TermTransformer';\nimport { TermTransformer } from '../../transformers/TermTransformer';\nimport type { IExpressionEvaluator } from '../../Types';\nimport * as Err from '../../util/Errors';\nimport type { ISuperTypeProvider } from '../../util/TypeHandling';\nimport type { AsyncExtensionFunctionCreator } from '../AsyncEvaluator';\nimport { BaseExpressionEvaluator } from './BaseExpressionEvaluator';\nimport type { ICompleteSharedContext } from './BaseExpressionEvaluator';\n\nexport interface ICompleteAsyncEvaluatorContext extends ICompleteSharedContext {\n  exists?: (expression: Alg.ExistenceExpression, mapping: RDF.Bindings) => Promise<boolean>;\n  aggregate?: (expression: Alg.AggregateExpression) => Promise<RDF.Term>;\n  bnode?: (input?: string) => Promise<RDF.BlankNode>;\n  extensionFunctionCreator?: AsyncExtensionFunctionCreator;\n}\n\nexport class AsyncRecursiveEvaluator extends BaseExpressionEvaluator\n  implements IExpressionEvaluator<E.Expression, Promise<E.Term>> {\n  protected openWorldType: ISuperTypeProvider;\n  private readonly subEvaluators: Record<string, (expr: E.Expression, mapping: RDF.Bindings) =>\n  Promise<E.Term> | E.Term> = {\n    // Shared\n      [E.ExpressionType.Term]: (expr, _mapping) => this.term(<E.Term> expr),\n      [E.ExpressionType.Variable]: (expr, mapping) => this.variable(<E.Variable> expr, mapping),\n\n      // Sync\n      [E.ExpressionType.Operator]: (expr, mapping) => this.evalOperator(<E.Operator> expr, mapping),\n      [E.ExpressionType.SpecialOperator]: (expr, mapping) => this\n        .evalSpecialOperator(<E.SpecialOperator> expr, mapping),\n      [E.ExpressionType.Named]: (expr, mapping) => this.evalNamed(<E.Named> expr, mapping),\n      [E.ExpressionType.Existence]: (expr, mapping) => this.evalExistence(<E.Existence> expr, mapping),\n      [E.ExpressionType.Aggregate]: (expr, _mapping) => this.evalAggregate(<E.Aggregate> expr),\n      [E.ExpressionType.AsyncExtension]: (expr, mapping) => this.evalAsyncExtension(<E.AsyncExtension> expr, mapping),\n    };\n\n  public constructor(private readonly context: ICompleteAsyncEvaluatorContext, termTransformer?: ITermTransformer) {\n    super(termTransformer ?? new TermTransformer(context.superTypeProvider));\n  }\n\n  public async evaluate(expr: E.Expression, mapping: RDF.Bindings): Promise<E.Term> {\n    const evaluator = this.subEvaluators[expr.expressionType];\n    if (!evaluator) {\n      throw new Err.InvalidExpressionType(expr);\n    }\n    return evaluator.bind(this)(expr, mapping);\n  }\n\n  private async evalOperator(expr: E.Operator, mapping: RDF.Bindings): Promise<E.Term> {\n    const argPromises = expr.args.map(arg => this.evaluate(arg, mapping));\n    const argResults = await Promise.all(argPromises);\n    return expr.apply(argResults);\n  }\n\n  private async evalSpecialOperator(expr: E.SpecialOperator, mapping: RDF.Bindings): Promise<E.Term> {\n    const evaluate = this.evaluate.bind(this);\n    const context: EvalContextAsync = {\n      args: expr.args,\n      mapping,\n\n      superTypeProvider: this.context.superTypeProvider,\n      now: this.context.now,\n      baseIRI: this.context.baseIRI,\n      functionArgumentsCache: this.context.functionArgumentsCache,\n\n      evaluate,\n      bnode: this.context.bnode,\n      defaultTimeZone: this.context.defaultTimeZone,\n    };\n    return expr.applyAsync(context);\n  }\n\n  private async _evalAsyncArgs(args: E.Expression[], mapping: RDF.Bindings): Promise<E.TermExpression[]> {\n    const argPromises = args.map(arg => this.evaluate(arg, mapping));\n    return await Promise.all(argPromises);\n  }\n\n  private async evalNamed(expr: E.Named, mapping: RDF.Bindings): Promise<E.Term> {\n    return expr.apply(await this._evalAsyncArgs(expr.args, mapping));\n  }\n\n  private async evalAsyncExtension(expr: AsyncExtension, mapping: RDF.Bindings): Promise<E.Term> {\n    return await expr.apply(await this._evalAsyncArgs(expr.args, mapping));\n  }\n\n  private async evalExistence(expr: E.Existence, mapping: RDF.Bindings): Promise<E.Term> {\n    if (!this.context.exists) {\n      throw new Err.NoExistenceHook();\n    }\n\n    return new E.BooleanLiteral(await this.context.exists(expr.expression, mapping));\n  }\n\n  // TODO: Remove?\n  private async evalAggregate(expr: E.Aggregate): Promise<E.Term> {\n    if (!this.context.aggregate) {\n      throw new Err.NoAggregator();\n    }\n\n    return this.termTransformer.transformRDFTermUnsafe(await this.context.aggregate(expr.expression));\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport { Algebra } from 'sparqlalgebrajs';\nimport { aggregators } from '../../aggregators';\nimport { Aggregator } from '../../aggregators/Aggregator';\nimport { WildcardCountAggregator } from '../../aggregators/WildcardCountAggregator';\nimport type { SetFunction } from '../../util/Consts';\nimport * as Err from '../../util/Errors';\nimport type { ICompleteSharedContext } from './BaseExpressionEvaluator';\n\nexport abstract class BaseAggregateEvaluator {\n  protected expression: Algebra.AggregateExpression;\n  protected aggregator: Aggregator;\n  protected throwError = false;\n  protected isWildcard = false;\n  protected wildcardAggregator: WildcardCountAggregator | undefined;\n  protected errorOccurred = false;\n\n  protected constructor(\n    expr: Algebra.AggregateExpression,\n    sharedContext: ICompleteSharedContext,\n    throwError?: boolean,\n  ) {\n    this.expression = expr;\n    this.aggregator = new Aggregator(expr, new aggregators[<SetFunction> expr.aggregator](expr, sharedContext));\n    this.throwError = throwError ?? false;\n    this.isWildcard = expr.expression.expressionType === Algebra.expressionTypes.WILDCARD;\n    if (this.isWildcard) {\n      this.wildcardAggregator = new WildcardCountAggregator(expr);\n    }\n  }\n\n  /**\n   * The spec says to throw an error when a set function is called on an empty\n   * set (unless explicitly mentioned otherwise like COUNT).\n   * However, aggregate error handling says to not bind the result in case of an\n   * error. So to simplify logic in the caller, we return undefined by default.\n   *\n   * @param expr the aggregate expression\n   * @param throwError whether this function should respect the spec and throw an error if no empty value is defined\n   */\n  public static emptyValue(expr: Algebra.AggregateExpression, throwError = false): RDF.Term | undefined {\n    let val: RDF.Term | undefined;\n    if (expr.expression.expressionType === Algebra.expressionTypes.WILDCARD) {\n      val = WildcardCountAggregator.emptyValue();\n    } else {\n      val = Aggregator.emptyValue(aggregators[<SetFunction> expr.aggregator]);\n    }\n    if (val === undefined && throwError) {\n      throw new Err.EmptyAggregateError();\n    }\n    return val;\n  }\n\n  public result(): RDF.Term | undefined {\n    if (this.errorOccurred) {\n      return undefined;\n    }\n    if (this.isWildcard) {\n      return this.wildcardAggregator!.result();\n    }\n    return this.aggregator.result();\n  }\n\n  /**\n   * Put a binding from the result stream in the aggregate state.\n   *\n   * If any binding evaluation errors, the corresponding aggregate variable should be unbound.\n   * If this happens, calling @see result() will return @constant undefined\n   *\n   * @param bindings the bindings to pass to the expression\n   */\n  public abstract put(bindings: RDF.Bindings): void | Promise<void>;\n\n  protected abstract safeThrow(err: unknown): void;\n}\n","import type * as RDF from '@rdfjs/types';\nimport type * as E from '../../expressions';\nimport { expressionToVar } from '../../functions/Helpers';\nimport type { FunctionArgumentsCache } from '../../functions/OverloadTree';\nimport type { ITermTransformer } from '../../transformers/TermTransformer';\nimport type { ITimeZoneRepresentation } from '../../util/DateTimeHelpers';\nimport * as Err from '../../util/Errors';\nimport type { ISuperTypeProvider, SuperTypeCallback, TypeCache } from '../../util/TypeHandling';\n\nexport interface ISharedContext {\n  now?: Date;\n  baseIRI?: string;\n  typeCache?: TypeCache;\n  getSuperType?: SuperTypeCallback;\n  functionArgumentsCache?: FunctionArgumentsCache;\n  defaultTimeZone?: ITimeZoneRepresentation;\n}\n\nexport interface ICompleteSharedContext {\n  now: Date;\n  baseIRI?: string;\n  functionArgumentsCache: FunctionArgumentsCache;\n  superTypeProvider: ISuperTypeProvider;\n  defaultTimeZone: ITimeZoneRepresentation;\n}\n\nexport class BaseExpressionEvaluator {\n  public constructor(protected readonly termTransformer: ITermTransformer) {}\n\n  protected term(expr: E.Term): E.Term {\n    return expr;\n  }\n\n  protected variable(expr: E.Variable, mapping: RDF.Bindings): E.Term {\n    const term = mapping.get(expressionToVar(expr));\n    if (!term) {\n      throw new Err.UnboundVariableError(expr.name, mapping);\n    }\n    return this.termTransformer.transformRDFTermUnsafe(term);\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport type { Algebra as Alg } from 'sparqlalgebrajs';\nimport * as E from '../../expressions';\nimport type { SyncExtension } from '../../expressions';\nimport type { EvalContextSync } from '../../functions';\nimport type { ITermTransformer } from '../../transformers/TermTransformer';\nimport { TermTransformer } from '../../transformers/TermTransformer';\nimport type { IExpressionEvaluator } from '../../Types';\nimport * as Err from '../../util/Errors';\nimport type { ISuperTypeProvider } from '../../util/TypeHandling';\nimport type { SyncExtensionFunctionCreator } from '../SyncEvaluator';\nimport type { ICompleteSharedContext } from './BaseExpressionEvaluator';\nimport { BaseExpressionEvaluator } from './BaseExpressionEvaluator';\n\nexport interface ICompleteSyncEvaluatorContext extends ICompleteSharedContext {\n  exists?: (expression: Alg.ExistenceExpression, mapping: RDF.Bindings) => boolean;\n  aggregate?: (expression: Alg.AggregateExpression) => RDF.Term;\n  bnode?: (input?: string) => RDF.BlankNode;\n  extensionFunctionCreator?: SyncExtensionFunctionCreator;\n}\n\nexport class SyncRecursiveEvaluator extends BaseExpressionEvaluator\n  implements IExpressionEvaluator<E.Expression, E.Term> {\n  protected openWorldType: ISuperTypeProvider;\n  private readonly subEvaluators: Record<string, (expr: E.Expression, mapping: RDF.Bindings) => E.Term> = {\n    // Shared\n    [E.ExpressionType.Term]: (expr, _mapping) => this.term(<E.Term> expr),\n    [E.ExpressionType.Variable]: (expr, mapping) => this.variable(<E.Variable> expr, mapping),\n\n    // Sync\n    [E.ExpressionType.Operator]: (expr, mapping) => this.evalOperator(<E.Operator> expr, mapping),\n    [E.ExpressionType.SpecialOperator]: (expr, mapping) => this.evalSpecialOperator(<E.SpecialOperator> expr, mapping),\n    [E.ExpressionType.Named]: (expr, mapping) => this.evalNamed(<E.Named> expr, mapping),\n    [E.ExpressionType.Existence]: (expr, mapping) => this.evalExistence(<E.Existence> expr, mapping),\n    [E.ExpressionType.Aggregate]: (expr, _mapping) => this.evalAggregate(<E.Aggregate> expr),\n    [E.ExpressionType.SyncExtension]: (expr, mapping) => this.evalSyncExtension(<E.SyncExtension> expr, mapping),\n  };\n\n  public constructor(private readonly context: ICompleteSyncEvaluatorContext, termTransformer?: ITermTransformer) {\n    super(termTransformer ?? new TermTransformer(context.superTypeProvider));\n  }\n\n  public evaluate(expr: E.Expression, mapping: RDF.Bindings): E.Term {\n    const evaluator = this.subEvaluators[expr.expressionType];\n    if (!evaluator) {\n      throw new Err.InvalidExpressionType(expr);\n    }\n    return evaluator.bind(this)(expr, mapping);\n  }\n\n  private evalOperator(expr: E.Operator, mapping: RDF.Bindings): E.Term {\n    const args = expr.args.map(arg => this.evaluate(arg, mapping));\n    return expr.apply(args);\n  }\n\n  private evalSpecialOperator(expr: E.SpecialOperator, mapping: RDF.Bindings): E.Term {\n    const evaluate = this.evaluate.bind(this);\n    const context: EvalContextSync = {\n      args: expr.args,\n      mapping,\n\n      superTypeProvider: this.context.superTypeProvider,\n      now: this.context.now,\n      baseIRI: this.context.baseIRI,\n      functionArgumentsCache: this.context.functionArgumentsCache,\n\n      evaluate,\n      bnode: this.context.bnode,\n      defaultTimeZone: this.context.defaultTimeZone,\n    };\n    return expr.applySynchronously(context);\n  }\n\n  private evalNamed(expr: E.Named, mapping: RDF.Bindings): E.Term {\n    const args = expr.args.map(arg => this.evaluate(arg, mapping));\n    return expr.apply(args);\n  }\n\n  private evalSyncExtension(expr: SyncExtension, mapping: RDF.Bindings): E.Term {\n    const args = expr.args.map(arg => this.evaluate(arg, mapping));\n    return expr.apply(args);\n  }\n\n  private evalExistence(expr: E.Existence, mapping: RDF.Bindings): E.Term {\n    if (!this.context.exists) {\n      throw new Err.NoExistenceHook();\n    }\n\n    return new E.BooleanLiteral(this.context.exists(expr.expression, mapping));\n  }\n\n  private evalAggregate(expr: E.Aggregate): E.Term {\n    if (!this.context.aggregate) {\n      throw new Err.NoAggregator();\n    }\n\n    return this.termTransformer.transformRDFTermUnsafe(this.context.aggregate(expr.expression));\n  }\n}\n","import type { Algebra as Alg } from 'sparqlalgebrajs';\n\nimport type { AggregateExpression } from './Expressions';\nimport {\n  ExpressionType,\n} from './Expressions';\n\nexport class Aggregate implements AggregateExpression {\n  public expressionType: ExpressionType.Aggregate = ExpressionType.Aggregate;\n\n  public constructor(\n    public name: string,\n    public expression: Alg.AggregateExpression,\n  ) {}\n}\n","import type * as RDF from '@rdfjs/types';\nimport type { AsyncExtensionApplication, AsyncExtensionExpression, Expression } from './Expressions';\nimport { ExpressionType } from './Expressions';\n\nexport class AsyncExtension implements AsyncExtensionExpression {\n  public expressionType: ExpressionType.AsyncExtension = ExpressionType.AsyncExtension;\n\n  public constructor(\n    public name: RDF.NamedNode,\n    public args: Expression[],\n    public apply: AsyncExtensionApplication,\n  ) {}\n}\n","import type { Algebra as Alg } from 'sparqlalgebrajs';\n\nimport type { ExistenceExpression } from './Expressions';\nimport { ExpressionType } from './Expressions';\n\nexport class Existence implements ExistenceExpression {\n  public expressionType: ExpressionType.Existence = ExpressionType.Existence;\n  public constructor(public expression: Alg.ExistenceExpression) {}\n}\n","import type * as RDF from '@rdfjs/types';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport type { EvalContextAsync, EvalContextSync } from '../functions';\n\nexport enum ExpressionType {\n  Aggregate = 'aggregate',\n  Existence = 'existence',\n  Named = 'named',\n  Operator = 'operator',\n  SpecialOperator = 'specialOperator',\n  Term = 'term',\n  Variable = 'variable',\n  AsyncExtension = 'asyncExtension',\n  SyncExtension = 'syncExtension',\n}\n\nexport type Expression =\n  AggregateExpression |\n  ExistenceExpression |\n  NamedExpression |\n  OperatorExpression |\n  SpecialOperatorExpression |\n  TermExpression |\n  VariableExpression |\n  AsyncExtensionExpression |\n  SyncExtensionExpression;\n\nexport interface IExpressionProps {\n  expressionType: ExpressionType;\n}\n\nexport type AggregateExpression = IExpressionProps & {\n  expressionType: ExpressionType.Aggregate;\n  name: string;\n  expression: Algebra.AggregateExpression;\n};\n\nexport type ExistenceExpression = IExpressionProps & {\n  expressionType: ExpressionType.Existence;\n  expression: Algebra.ExistenceExpression;\n};\n\nexport type NamedExpression = IExpressionProps & {\n  expressionType: ExpressionType.Named;\n  name: RDF.NamedNode;\n  apply: SimpleApplication;\n  args: Expression[];\n};\n\nexport type AsyncExtensionExpression = IExpressionProps & {\n  expressionType: ExpressionType.AsyncExtension;\n  name: RDF.NamedNode;\n  apply: AsyncExtensionApplication;\n  args: Expression[];\n};\n\nexport type SyncExtensionExpression = IExpressionProps & {\n  expressionType: ExpressionType.SyncExtension;\n  name: RDF.NamedNode;\n  apply: SimpleApplication;\n  args: Expression[];\n};\n\nexport type OperatorExpression = IExpressionProps & {\n  expressionType: ExpressionType.Operator;\n  args: Expression[];\n  apply: SimpleApplication;\n};\n\nexport type SpecialOperatorExpression = IExpressionProps & {\n  expressionType: ExpressionType.SpecialOperator;\n  args: Expression[];\n  applyAsync: SpecialApplicationAsync;\n  applySynchronously: SpecialApplicationSync;\n};\n\n// TODO: Create alias Term = TermExpression\nexport function asTermType(type: string): TermType | undefined {\n  if (type === 'namedNode' || type === 'literal' || type === 'blankNode' || type === 'quad') {\n    return type;\n  }\n  return undefined;\n}\nexport type TermType = 'namedNode' | 'literal' | 'blankNode' | 'quad';\nexport type TermExpression = IExpressionProps & {\n  expressionType: ExpressionType.Term;\n  termType: TermType;\n  str: () => string;\n  coerceEBV: () => boolean;\n  toRDF: () => RDF.Term;\n};\n\nexport type VariableExpression = IExpressionProps & {\n  expressionType: ExpressionType.Variable;\n  name: string;\n};\n\n// Export type Application = SimpleApplication | SpecialApplication;\nexport type SimpleApplication = (args: TermExpression[]) => TermExpression;\nexport type SimpleApplicationTuple<T> = (args: T) => TermExpression;\nexport type AsyncExtensionApplication = (args: TermExpression[]) => Promise<TermExpression>;\n\nexport type SpecialApplicationAsync = (context: EvalContextAsync) => Promise<TermExpression>;\n\nexport type SpecialApplicationSync = (context: EvalContextSync) => TermExpression;\n","import type * as RDF from '@rdfjs/types';\n\nimport type { Expression, NamedExpression, SimpleApplication } from './Expressions';\nimport {\n  ExpressionType,\n} from './Expressions';\n\nexport class Named implements NamedExpression {\n  public expressionType: ExpressionType.Named = ExpressionType.Named;\n\n  public constructor(\n    public name: RDF.NamedNode,\n    public args: Expression[],\n    public apply: SimpleApplication,\n  ) {}\n}\n","import type { Expression, OperatorExpression, SimpleApplication } from './Expressions';\nimport {\n  ExpressionType,\n} from './Expressions';\n\nexport class Operator implements OperatorExpression {\n  public expressionType: ExpressionType.Operator = ExpressionType.Operator;\n\n  public constructor(public args: Expression[], public apply: SimpleApplication) {}\n}\n","import type {\n  Expression,\n  SpecialApplicationAsync,\n  SpecialApplicationSync,\n  SpecialOperatorExpression,\n} from './Expressions';\nimport {\n  ExpressionType,\n} from './Expressions';\n\nexport class SpecialOperator implements SpecialOperatorExpression {\n  public expressionType: ExpressionType.SpecialOperator = ExpressionType.SpecialOperator;\n\n  public constructor(\n    public args: Expression[],\n    public applyAsync: SpecialApplicationAsync,\n    public applySynchronously: SpecialApplicationSync,\n  ) {}\n}\n","import type * as RDF from '@rdfjs/types';\nimport type { Expression, SimpleApplication, SyncExtensionExpression } from './Expressions';\nimport { ExpressionType } from './Expressions';\n\nexport class SyncExtension implements SyncExtensionExpression {\n  public expressionType: ExpressionType.SyncExtension = ExpressionType.SyncExtension;\n\n  public constructor(\n    public name: RDF.NamedNode,\n    public args: Expression[],\n    public apply: SimpleApplication,\n  ) {}\n}\n","import type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport { TermTransformer } from '../transformers/TermTransformer';\nimport * as C from '../util/Consts';\nimport { TypeAlias, TypeURL } from '../util/Consts';\n\nimport type {\n  IDateRepresentation,\n  IDateTimeRepresentation,\n  IDurationRepresentation,\n  ITimeRepresentation,\n  IYearMonthDurationRepresentation,\n} from '../util/DateTimeHelpers';\nimport * as Err from '../util/Errors';\nimport { serializeDateTime, serializeDuration, serializeTime, serializeDate } from '../util/Serialization';\nimport type { ISuperTypeProvider } from '../util/TypeHandling';\nimport { isSubTypeOf } from '../util/TypeHandling';\nimport type { TermExpression, TermType } from './Expressions';\nimport { ExpressionType } from './Expressions';\n\nconst DF = new DataFactory();\n\nexport abstract class Term implements TermExpression {\n  public expressionType: ExpressionType.Term = ExpressionType.Term;\n  public abstract termType: TermType;\n\n  public abstract toRDF(): RDF.Term;\n\n  public str(): string {\n    throw new Err.InvalidArgumentTypes([ this ], C.RegularOperator.STR);\n  }\n\n  public coerceEBV(): boolean {\n    throw new Err.EBVCoercionError(this);\n  }\n}\n\n// NamedNodes -----------------------------------------------------------------\nexport class NamedNode extends Term {\n  public termType: TermType = 'namedNode';\n  public constructor(public value: string) {\n    super();\n  }\n\n  public toRDF(): RDF.Term {\n    return DF.namedNode(this.value);\n  }\n\n  public override str(): string {\n    return this.value;\n  }\n}\n\n// BlankNodes -----------------------------------------------------------------\n\nexport class BlankNode extends Term {\n  public value: RDF.BlankNode;\n  public termType: TermType = 'blankNode';\n\n  public constructor(value: RDF.BlankNode | string) {\n    super();\n    this.value = typeof value === 'string' ? DF.blankNode(value) : value;\n  }\n\n  public toRDF(): RDF.Term {\n    return this.value;\n  }\n}\n\n// Quads -----------------------------------------------------------------\nexport class Quad extends Term {\n  public termType: TermType = 'quad';\n  private readonly transformer: TermTransformer;\n  private readonly valueTerm: RDF.BaseQuad;\n\n  public constructor(input: RDF.BaseQuad, superTypeProvider: ISuperTypeProvider) {\n    super();\n    this.transformer = new TermTransformer(superTypeProvider);\n    this.valueTerm = input;\n  }\n\n  public toRDF(): RDF.BaseQuad {\n    return this.valueTerm;\n  }\n\n  public get subject(): Term {\n    return this.transformer.transformRDFTermUnsafe(this.RDFsubject);\n  }\n\n  public get predicate(): Term {\n    return this.transformer.transformRDFTermUnsafe(this.RDFpredicate);\n  }\n\n  public get object(): Term {\n    return this.transformer.transformRDFTermUnsafe(this.RDFobject);\n  }\n\n  public get RDFsubject(): RDF.Term {\n    return this.toRDF().subject;\n  }\n\n  public get RDFpredicate(): RDF.Term {\n    return this.toRDF().predicate;\n  }\n\n  public get RDFobject(): RDF.Term {\n    return this.toRDF().object;\n  }\n}\n\n// Literals-- -----------------------------------------------------------------\nexport function isLiteralTermExpression(expr: TermExpression): Literal<any> | undefined {\n  if (expr.termType === 'literal') {\n    return <Literal<any>> expr;\n  }\n  return undefined;\n}\n\nexport interface ISerializable {\n  toString: () => string;\n}\n\nexport class Literal<T extends ISerializable> extends Term {\n  public termType = <const> 'literal';\n  /**\n   * @param typedValue internal representation of this literal's value\n   * @param dataType a string representing the datatype. Can be of type @see LiteralTypes or any URI\n   * @param strValue the string value of this literal. In other words, the string representing the RDF.literal value.\n   * @param language the language, mainly for language enabled strings like RDF_LANG_STRING\n   */\n  public constructor(\n    public typedValue: T,\n    public dataType: string,\n    public strValue?: string,\n    public language?: string,\n  ) {\n    super();\n  }\n\n  public toRDF(): RDF.Literal {\n    return DF.literal(\n      this.strValue ?? this.str(),\n      this.language ?? DF.namedNode(this.dataType),\n    );\n  }\n\n  public override str(): string {\n    return this.strValue ?? this.typedValue.toString();\n  }\n}\n\nexport abstract class NumericLiteral extends Literal<number> {\n  protected constructor(\n    public override typedValue: number,\n    dataType: string,\n    public override strValue?: string,\n    public override language?: string,\n  ) {\n    super(typedValue, dataType, strValue, language);\n  }\n\n  protected abstract specificFormatter(val: number): string;\n\n  public override coerceEBV(): boolean {\n    return Boolean(this.typedValue);\n  }\n\n  public override toRDF(): RDF.Literal {\n    const term = super.toRDF();\n    if (!Number.isFinite(this.typedValue)) {\n      term.value = term.value.replace('Infinity', 'INF');\n    }\n    return term;\n  }\n\n  public override str(): string {\n    return this.strValue ??\n      this.specificFormatter(this.typedValue);\n  }\n}\n\nexport class IntegerLiteral extends NumericLiteral {\n  public constructor(\n    public override typedValue: number,\n    dataType?: string,\n    public override strValue?: string,\n    public override language?: string,\n  ) {\n    super(typedValue, dataType ?? TypeURL.XSD_INTEGER, strValue, language);\n  }\n\n  protected specificFormatter(val: number): string {\n    return val.toFixed(0);\n  }\n}\n\nexport class DecimalLiteral extends NumericLiteral {\n  public constructor(\n    public override typedValue: number,\n    dataType?: string,\n    public override strValue?: string,\n    public override language?: string,\n  ) {\n    super(typedValue, dataType ?? TypeURL.XSD_DECIMAL, strValue, language);\n  }\n\n  protected specificFormatter(val: number): string {\n    return val.toString();\n  }\n}\n\nexport class FloatLiteral extends NumericLiteral {\n  public constructor(\n    public override typedValue: number,\n    dataType?: string,\n    public override strValue?: string,\n    public override language?: string,\n  ) {\n    super(typedValue, dataType ?? TypeURL.XSD_FLOAT, strValue, language);\n  }\n\n  protected specificFormatter(val: number): string {\n    return val.toString();\n  }\n}\n\nexport class DoubleLiteral extends NumericLiteral {\n  public constructor(\n    public override typedValue: number,\n    dataType?: string,\n    public override strValue?: string,\n    public override language?: string,\n  ) {\n    super(typedValue, dataType ?? TypeURL.XSD_DOUBLE, strValue, language);\n  }\n\n  protected specificFormatter(val: number): string {\n    if (!Number.isFinite(val)) {\n      if (val > 0) {\n        return 'INF';\n      }\n      if (val < 0) {\n        return '-INF';\n      }\n      return 'NaN';\n    }\n\n    const jsExponential = val.toExponential();\n    const [ jsMantisse, jsExponent ] = jsExponential.split('e');\n\n    // Leading + must be removed for integer\n    // https://www.w3.org/TR/xmlschema-2/#integer\n    const exponent = jsExponent.replace(/\\+/u, '');\n\n    // SPARQL test suite prefers trailing zero's\n    const mantisse = jsMantisse.includes('.') ?\n      jsMantisse :\n      `${jsMantisse}.0`;\n\n    return `${mantisse}E${exponent}`;\n  }\n}\n\nexport class BooleanLiteral extends Literal<boolean> {\n  public constructor(public override typedValue: boolean, public override strValue?: string, dataType?: string) {\n    super(typedValue, dataType ?? TypeURL.XSD_BOOLEAN, strValue);\n  }\n\n  public override coerceEBV(): boolean {\n    return this.typedValue;\n  }\n}\n\nexport class LangStringLiteral extends Literal<string> {\n  public constructor(public override typedValue: string, public override language: string, dataType?: string) {\n    super(typedValue, dataType ?? TypeURL.RDF_LANG_STRING, typedValue, language);\n  }\n\n  public override coerceEBV(): boolean {\n    return this.str().length > 0;\n  }\n}\n\n// https://www.w3.org/TR/2004/REC-rdf-concepts-20040210/#dfn-plain-literal\n// https://www.w3.org/TR/sparql11-query/#defn_SimpleLiteral\n// https://www.w3.org/TR/sparql11-query/#func-strings\n// This does not include language tagged literals\nexport class StringLiteral extends Literal<string> {\n  /**\n   * @param typedValue\n   * @param dataType Should be type that implements XSD_STRING\n   */\n  public constructor(public override typedValue: string, dataType?: string) {\n    super(typedValue, dataType ?? TypeURL.XSD_STRING, typedValue);\n  }\n\n  public override coerceEBV(): boolean {\n    return this.str().length > 0;\n  }\n}\n\nexport class DateTimeLiteral extends Literal<IDateTimeRepresentation> {\n  public constructor(\n    public override typedValue: IDateTimeRepresentation,\n    public override strValue?: string,\n    dataType?: string,\n  ) {\n    super(typedValue, dataType ?? TypeURL.XSD_DATE_TIME, strValue);\n  }\n\n  public override str(): string {\n    return serializeDateTime(this.typedValue);\n  }\n}\n\nexport class TimeLiteral extends Literal<ITimeRepresentation> {\n  public constructor(\n    public override typedValue: ITimeRepresentation,\n    public override strValue?: string,\n    dataType?: string,\n  ) {\n    super(typedValue, dataType ?? TypeURL.XSD_TIME, strValue);\n  }\n\n  public override str(): string {\n    return serializeTime(this.typedValue);\n  }\n}\n\nexport class DateLiteral extends Literal<IDateRepresentation> {\n  public constructor(\n    public override typedValue: IDateRepresentation,\n    public override strValue?: string,\n    dataType?: string,\n  ) {\n    super(typedValue, dataType ?? TypeURL.XSD_DATE, strValue);\n  }\n\n  public override str(): string {\n    return serializeDate(this.typedValue);\n  }\n}\n\nexport class DurationLiteral extends Literal<Partial<IDurationRepresentation>> {\n  public constructor(\n    public override typedValue: Partial<IDurationRepresentation>,\n    public override strValue?: string,\n    dataType?: string,\n  ) {\n    super(typedValue, dataType ?? TypeURL.XSD_DURATION, strValue);\n  }\n\n  public override str(): string {\n    return serializeDuration(this.typedValue);\n  }\n}\n\nexport class DayTimeDurationLiteral extends DurationLiteral {\n  public constructor(\n    public override typedValue: Partial<IDurationRepresentation>,\n    public override strValue?: string,\n    dataType?: string,\n  ) {\n    super(typedValue, strValue, dataType ?? TypeURL.XSD_DAY_TIME_DURATION);\n  }\n}\n\nexport class YearMonthDurationLiteral extends Literal<Partial<IYearMonthDurationRepresentation>> {\n  public constructor(\n    public override typedValue: Partial<IYearMonthDurationRepresentation>,\n    public override strValue?: string,\n    dataType?: string,\n  ) {\n    super(typedValue, dataType ?? TypeURL.XSD_YEAR_MONTH_DURATION, strValue);\n  }\n\n  public override str(): string {\n    return serializeDuration(this.typedValue, 'P0M');\n  }\n}\n\n/**\n * This class is used when a literal is parsed, and it's value is\n * an invalid lexical form for it's datatype. The spec defines value with\n * invalid lexical form are still valid terms, and as such we can not error\n * immediately. This class makes sure that the typedValue will remain undefined,\n * and the category 'nonlexical'. This way, only when operators apply to the\n * 'nonlexical' category, they will keep working, otherwise they will throw a\n * type error.\n * This seems to match the spec, except maybe for functions that accept\n * non-lexical values for their datatype.\n *\n * See:\n *  - https://www.w3.org/TR/xquery/#dt-type-error\n *  - https://www.w3.org/TR/rdf-concepts/#section-Literal-Value\n *  - https://www.w3.org/TR/xquery/#dt-ebv\n *  - ... some other more precise thing i can't find...\n */\nexport class NonLexicalLiteral extends Literal<{ toString: () => 'undefined' }> {\n  public constructor(\n    typedValue: undefined,\n    dataType: string,\n    private readonly openWorldType: ISuperTypeProvider,\n    strValue?: string,\n    language?: string,\n  ) {\n    super({ toString: () => 'undefined' }, dataType, strValue, language);\n  }\n\n  public override coerceEBV(): boolean {\n    const isNumericOrBool =\n      isSubTypeOf(this.dataType, TypeURL.XSD_BOOLEAN, this.openWorldType) ||\n      isSubTypeOf(this.dataType, TypeAlias.SPARQL_NUMERIC, this.openWorldType);\n    if (isNumericOrBool) {\n      return false;\n    }\n    throw new Err.EBVCoercionError(this);\n  }\n\n  public override toRDF(): RDF.Literal {\n    return DF.literal(\n      this.str(),\n      this.language ?? DF.namedNode(this.dataType),\n    );\n  }\n\n  public override str(): string {\n    return this.strValue ?? '';\n  }\n}\n\nexport function isNonLexicalLiteral(lit: Literal<any>): NonLexicalLiteral | undefined {\n  if (lit instanceof NonLexicalLiteral) {\n    return lit;\n  }\n  return undefined;\n}\n","import type { VariableExpression } from './Expressions';\nimport { ExpressionType } from './Expressions';\n\nexport class Variable implements VariableExpression {\n  public expressionType: ExpressionType.Variable = ExpressionType.Variable;\n  public name: string;\n  public constructor(name: string) {\n    this.name = name;\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport type { ICompleteSharedContext } from '../evaluators/evaluatorHelpers/BaseExpressionEvaluator';\nimport type * as E from '../expressions';\nimport type * as C from '../util/Consts';\nimport * as Err from '../util/Errors';\nimport type { ISuperTypeProvider } from '../util/TypeHandling';\nimport type { ImplementationFunction, OverloadTree, FunctionArgumentsCache } from './OverloadTree';\n\nexport interface IEvalSharedContext extends ICompleteSharedContext {\n  args: E.Expression[];\n  mapping: RDF.Bindings;\n}\nexport interface IEvalContext<Term, BNode> extends IEvalSharedContext {\n  bnode?: (input?: string) => BNode;\n  evaluate: (expr: E.Expression, mapping: RDF.Bindings) => Term;\n}\n\nexport type EvalContextAsync = IEvalContext<Promise<E.TermExpression>, Promise<RDF.BlankNode>>;\nexport type EvalContextSync = IEvalContext<E.TermExpression, RDF.BlankNode>;\n\n// ----------------------------------------------------------------------------\n// Overloaded Functions\n// ----------------------------------------------------------------------------\n\n// Function and operator arguments are 'flattened' in the SPARQL spec.\n// If the argument is a literal, the datatype often also matters.\nexport type ArgumentType = 'term' | E.TermType | C.TypeURL | C.TypeAlias;\n\nexport interface IOverloadedDefinition {\n  arity: number | number[];\n  overloads: OverloadTree;\n}\n\nexport abstract class BaseFunction<Operator> {\n  public arity: number | number[];\n  private readonly overloads: OverloadTree;\n\n  protected constructor(public operator: Operator, definition: IOverloadedDefinition) {\n    this.arity = definition.arity;\n    this.overloads = definition.overloads;\n  }\n\n  /**\n   * A function application works by monomorphing the function to a specific\n   * instance depending on the runtime types. We then just apply this function\n   * to the args.\n   */\n  public apply = (args: E.TermExpression[], context: ICompleteSharedContext):\n  E.TermExpression => {\n    const concreteFunction =\n      this.monomorph(args, context.superTypeProvider, context.functionArgumentsCache) ??\n      this.handleInvalidTypes(args);\n    return concreteFunction(context)(args);\n  };\n\n  protected abstract handleInvalidTypes(args: E.TermExpression[]): never;\n\n  /**\n   * We monomorph by checking the map of overloads for keys corresponding\n   * to the runtime types. We start by checking for an implementation for the\n   * most concrete types (integer, string, date, IRI), if we find none,\n   * we consider their term types (literal, blank, IRI), and lastly we consider\n   * all arguments as generic terms.\n   *\n   * Another option would be to populate the overloads with an implementation\n   * for every concrete type when the function is generic over termtypes or\n   * terms.\n   */\n  private monomorph(\n    args: E.TermExpression[],\n    superTypeProvider: ISuperTypeProvider,\n    functionArgumentsCache: FunctionArgumentsCache,\n  ): ImplementationFunction | undefined {\n    return this.overloads.search(args, superTypeProvider, functionArgumentsCache);\n  }\n}\n\n// Regular Functions ----------------------------------------------------------\n\n/**\n * Varying kinds of functions take arguments of different types on which the\n * specific behaviour is dependant. Although their behaviour is often varying,\n * it is always relatively simple, and better suited for synced behaviour.\n * The types of their arguments are always terms, but might differ in\n * their term-type (eg: iri, literal),\n * their specific literal type (eg: string, integer),\n * their arity (see BNODE),\n * or even their specific numeric type (eg: integer, float).\n *\n * Examples include:\n *  - Arithmetic operations such as: *, -, /, +\n *  - Bool operators such as: =, !=, <=, <, ...\n *  - Functions such as: str, IRI\n *\n * See also: https://www.w3.org/TR/sparql11-query/#func-rdfTerms\n * and https://www.w3.org/TR/sparql11-query/#OperatorMapping\n */\nexport class RegularFunction extends BaseFunction<C.RegularOperator> {\n  protected functionClass = <const> 'regular';\n\n  public constructor(op: C.RegularOperator, definition: IOverloadedDefinition) {\n    super(op, definition);\n  }\n\n  protected handleInvalidTypes(args: E.TermExpression[]): never {\n    throw new Err.InvalidArgumentTypes(args, this.operator);\n  }\n}\n\n// Named Functions ------------------------------------------------------------\nexport class NamedFunction extends BaseFunction<C.NamedOperator> {\n  protected functionClass = <const> 'named';\n\n  public constructor(op: C.NamedOperator, definition: IOverloadedDefinition) {\n    super(op, definition);\n  }\n\n  protected handleInvalidTypes(args: E.TermExpression[]): never {\n    throw new Err.InvalidArgumentTypes(args, this.operator);\n  }\n}\n\n// Special Functions ----------------------------------------------------------\n/**\n * Special Functions are those that don't really fit in sensible categories and\n * have extremely heterogeneous signatures that make them impossible to abstract\n * over. They are small in number, and their behaviour is often complex and open\n * for multiple correct implementations with different trade-offs.\n *\n * Due to their varying nature, they need all available information present\n * during evaluation. This reflects in the signature of the apply() method.\n *\n * They need access to an evaluator to be able to even implement their logic.\n * Especially relevant for IF, and the logical connectives.\n *\n * They can have both sync and async implementations, and both would make sense\n * in some contexts.\n */\nexport class SpecialFunction {\n  public functionClass = <const> 'special';\n  public arity: number;\n  public applySynchronously: E.SpecialApplicationSync;\n  public applyAsync: E.SpecialApplicationAsync;\n  public checkArity: (args: E.Expression[]) => boolean;\n\n  public constructor(public operator: C.SpecialOperator, definition: ISpecialDefinition) {\n    this.arity = definition.arity;\n    this.applySynchronously = definition.applySynchronously;\n    this.applyAsync = definition.applyAsync;\n    this.checkArity = definition.checkArity ?? defaultArityCheck(this.arity);\n  }\n}\n\nfunction defaultArityCheck(arity: number): (args: E.Expression[]) => boolean {\n  return (args: E.Expression[]): boolean => {\n    // Infinity is used to represent var-args, so it's always correct.\n    if (arity === Number.POSITIVE_INFINITY) {\n      return true;\n    }\n\n    return args.length === arity;\n  };\n}\n\nexport interface ISpecialDefinition {\n  arity: number;\n  applyAsync: E.SpecialApplicationAsync;\n  applySynchronously: E.SpecialApplicationSync;\n  checkArity?: (args: E.Expression[]) => boolean;\n}\n","/**\n * These helpers provide a (albeit inflexible) DSL for writing function\n * definitions for the SPARQL functions.\n */\nimport type * as RDF from '@rdfjs/types';\nimport { DataFactory } from 'rdf-data-factory';\nimport type { ICompleteSharedContext } from '../evaluators/evaluatorHelpers/BaseExpressionEvaluator';\nimport type { Literal, TermExpression, Quad, ISerializable } from '../expressions';\nimport * as E from '../expressions';\nimport { NonLexicalLiteral } from '../expressions';\nimport * as C from '../util/Consts';\nimport { TypeURL } from '../util/Consts';\nimport type { IDateTimeRepresentation } from '../util/DateTimeHelpers';\nimport * as Err from '../util/Errors';\nimport type { ArgumentType } from './Core';\nimport type { ImplementationFunction, ImplementationFunctionTuple } from './OverloadTree';\nimport { OverloadTree } from './OverloadTree';\n\ntype Term = E.TermExpression;\n\nconst DF = new DataFactory();\n\nexport function declare(identifier: string): Builder {\n  return new Builder(identifier);\n}\n\nexport class Builder {\n  private readonly overloadTree: OverloadTree;\n  private collected: boolean;\n\n  public constructor(identifier: string) {\n    this.overloadTree = new OverloadTree(identifier);\n    this.collected = false;\n  }\n\n  public collect(): OverloadTree {\n    if (this.collected) {\n      // Only 1 time allowed because we can't copy a tree. (And we don't need this).\n      throw new Error('Builders can only be collected once!');\n    }\n    this.collected = true;\n    return this.overloadTree;\n  }\n\n  private static wrapInvalidLexicalProtected(func: ImplementationFunction): ImplementationFunction {\n    return (context: ICompleteSharedContext) => (args: TermExpression[]) => {\n      for (const [ index, arg ] of args.entries()) {\n        if (arg instanceof NonLexicalLiteral) {\n          throw new Err.InvalidLexicalForm(args[index].toRDF());\n        }\n      }\n      return func(context)(args);\n    };\n  }\n\n  public set(\n    argTypes: [],\n    func: ImplementationFunctionTuple<[]>,\n    addInvalidHandling?: boolean,\n  ): Builder;\n  public set<T1 extends TermExpression>(\n    argTypes: [ArgumentType],\n    func: ImplementationFunctionTuple<[T1]>,\n    addInvalidHandling?: boolean,\n  ): Builder;\n  public set<T1 extends TermExpression, T2 extends TermExpression>(\n    argTypes: [ArgumentType, ArgumentType],\n    func: ImplementationFunctionTuple<[T1, T2]>,\n    addInvalidHandling?: boolean,\n  ): Builder;\n  public set<T1 extends TermExpression, T2 extends TermExpression, T3 extends TermExpression>(\n    argTypes: [ArgumentType, ArgumentType, ArgumentType],\n    func: ImplementationFunctionTuple<[T1, T2, T3]>,\n    addInvalidHandling?: boolean,\n  ): Builder;\n  public set<\n    T1 extends TermExpression,\n    T2 extends TermExpression,\n    T3 extends TermExpression,\n    T4 extends TermExpression,\n  >(\n    argTypes: [ArgumentType, ArgumentType, ArgumentType, ArgumentType],\n    func: ImplementationFunctionTuple<[T1, T2, T3, T4]>,\n    addInvalidHandling?: boolean,\n  ): Builder;\n  public set(argTypes: ArgumentType[], func: ImplementationFunction, addInvalidHandling?: boolean): Builder;\n  public set(argTypes: ArgumentType[], func: ImplementationFunction, addInvalidHandling = true): Builder {\n    this.overloadTree.addOverload(argTypes, addInvalidHandling ? Builder.wrapInvalidLexicalProtected(func) : func);\n    return this;\n  }\n\n  public copy({ from, to }: { from: ArgumentType[]; to: ArgumentType[] }): Builder {\n    const impl = this.overloadTree.getImplementationExact(from);\n    if (!impl) {\n      throw new Err.UnexpectedError(\n        'Tried to copy implementation, but types not found',\n        { from, to },\n      );\n    }\n    return this.set(to, impl);\n  }\n\n  public onUnary<T extends Term>(type: ArgumentType, op: (context: ICompleteSharedContext) =>\n  (val: T) => Term, addInvalidHandling = true): Builder {\n    return this.set([ type ], context => ([ val ]: [T]) => op(context)(val), addInvalidHandling);\n  }\n\n  public onUnaryTyped<T extends ISerializable>(\n    type: ArgumentType,\n    op: (context: ICompleteSharedContext) => (val: T) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set([ type ], context => ([ val ]: [E.Literal<T>]) => op(context)(val.typedValue), addInvalidHandling);\n  }\n\n  public onBinary<L extends Term, R extends Term>(\n    types: [ArgumentType, ArgumentType],\n    op: (context: ICompleteSharedContext) => (left: L, right: R) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(types, context => ([ left, right ]: [L, R]) => op(context)(left, right), addInvalidHandling);\n  }\n\n  public onBinaryTyped<L extends ISerializable, R extends ISerializable>(\n    types: [ArgumentType, ArgumentType],\n    op: (context: ICompleteSharedContext) => (left: L, right: R) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(\n      types,\n      context => ([ left, right ]: [E.Literal<L>, E.Literal<R>]) => op(context)(left.typedValue, right.typedValue),\n      addInvalidHandling,\n    );\n  }\n\n  public onTernaryTyped<A1 extends ISerializable, A2 extends ISerializable, A3 extends ISerializable>(\n    types: [ArgumentType, ArgumentType, ArgumentType],\n    op: (context: ICompleteSharedContext)\n    => (a1: A1, a2: A2, a3: A3) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(types, context => ([ a1, a2, a3 ]: [E.Literal<A1>, E.Literal<A2>, E.Literal<A3>]) =>\n      op(context)(a1.typedValue, a2.typedValue, a3.typedValue), addInvalidHandling);\n  }\n\n  public onTernary<A1 extends Term, A2 extends Term, A3 extends Term>(\n    types: [ArgumentType, ArgumentType, ArgumentType],\n    op: (context: ICompleteSharedContext) => (a1: A1, a2: A2, a3: A3) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(types, context => ([ a1, a2, a3 ]: [A1, A2, A3]) => op(context)(a1, a2, a3), addInvalidHandling);\n  }\n\n  public onQuaternaryTyped<\n    A1 extends ISerializable,\nA2 extends ISerializable,\nA3 extends ISerializable,\nA4 extends ISerializable,\n>(\n    types: [ArgumentType, ArgumentType, ArgumentType, ArgumentType],\n    op: (context: ICompleteSharedContext) => (a1: A1, a2: A2, a3: A3, a4: A4) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(types, context =>\n      ([ a1, a2, a3, a4 ]: [E.Literal<A1>, E.Literal<A2>, E.Literal<A3>, E.Literal<A4>]) =>\n        op(context)(a1.typedValue, a2.typedValue, a3.typedValue, a4.typedValue), addInvalidHandling);\n  }\n\n  public onTerm1<T extends Term>(\n    op: (context: ICompleteSharedContext) => (term: T) => Term,\naddInvalidHandling = false,\n  ): Builder {\n    return this.set(\n      [ 'term' ],\n      context => ([ term ]: [T]) => op(context)(term),\n      addInvalidHandling,\n    );\n  }\n\n  public onTerm3(op: (context: ICompleteSharedContext) => (t1: Term, t2: Term, t3: Term) => Term): Builder {\n    return this.set(\n      [ 'term', 'term', 'term' ],\n      context => ([ t1, t2, t3 ]: [Term, Term, Term]) => op(context)(t1, t2, t3),\n    );\n  }\n\n  public onQuad1(op: (context: ICompleteSharedContext) => (term: Term & Quad) => Term): Builder {\n    return this.set([ 'quad' ], context => ([ term ]: [Term & Quad]) => op(context)(term));\n  }\n\n  public onLiteral1<T extends ISerializable>(\n    op: (context: ICompleteSharedContext) => (lit: E.Literal<T>) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(\n      [ 'literal' ],\n      context => ([ term ]: [E.Literal<T>]) => op(context)(term),\n      addInvalidHandling,\n    );\n  }\n\n  public onBoolean1(\n    op: (context: ICompleteSharedContext) => (lit: E.BooleanLiteral) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(\n      [ C.TypeURL.XSD_BOOLEAN ],\n      context => ([ lit ]: [E.BooleanLiteral]) => op(context)(lit),\n      addInvalidHandling,\n    );\n  }\n\n  public onBoolean1Typed(\n    op: (context: ICompleteSharedContext) => (lit: boolean) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(\n      [ C.TypeURL.XSD_BOOLEAN ],\n      context => ([ lit ]: [E.BooleanLiteral]) => op(context)(lit.typedValue),\n      addInvalidHandling,\n    );\n  }\n\n  public onString1(\n    op: (context: ICompleteSharedContext) => (lit: E.Literal<string>) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(\n      [ C.TypeURL.XSD_STRING ],\n      context => ([ lit ]: [E.Literal<string>]) => op(context)(lit),\n      addInvalidHandling,\n    );\n  }\n\n  public onString1Typed(\n    op: (context: ICompleteSharedContext) => (lit: string) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(\n      [ C.TypeURL.XSD_STRING ],\n      context => ([ lit ]: [E.Literal<string>]) => op(context)(lit.typedValue),\n      addInvalidHandling,\n    );\n  }\n\n  public onLangString1(\n    op: (context: ICompleteSharedContext) => (lit: E.LangStringLiteral) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(\n      [ C.TypeURL.RDF_LANG_STRING ],\n      context => ([ lit ]: [E.LangStringLiteral]) => op(context)(lit),\n      addInvalidHandling,\n    );\n  }\n\n  public onStringly1(\n    op: (context: ICompleteSharedContext) => (lit: E.Literal<string>) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(\n      [ C.TypeAlias.SPARQL_STRINGLY ],\n      context => ([ lit ]: [E.Literal<string>]) => op(context)(lit),\n      addInvalidHandling,\n    );\n  }\n\n  public onStringly1Typed(\n    op: (context: ICompleteSharedContext) => (lit: string) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(\n      [ C.TypeAlias.SPARQL_STRINGLY ],\n      context => ([ lit ]: [E.Literal<string>]) => op(context)(lit.typedValue),\n      addInvalidHandling,\n    );\n  }\n\n  public onNumeric1(\n    op: (context: ICompleteSharedContext) => (val: E.NumericLiteral) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this.set(\n      [ C.TypeAlias.SPARQL_NUMERIC ],\n      context => ([ val ]: [E.NumericLiteral]) => op(context)(val),\n      addInvalidHandling,\n    );\n  }\n\n  public onDateTime1(\n    op: (context: ICompleteSharedContext) => (date: E.DateTimeLiteral) => Term,\naddInvalidHandling = true,\n  ): Builder {\n    return this\n      .set(\n        [ C.TypeURL.XSD_DATE_TIME ],\n        context => ([ val ]: [E.DateTimeLiteral]) => op(context)(val),\n        addInvalidHandling,\n      );\n  }\n\n  /**\n   * We return the base types and not the provided types because we don't want to create invalid terms.\n   * Providing negative number to a function unary - for example should not\n   * return a term of type negative number having a positive value.\n   * @param op the numeric operator performed\n   * @param addInvalidHandling whether to add invalid handling,\n   *   whether to add @param op in @see wrapInvalidLexicalProtected\n   */\n  public numericConverter(\n    op: (context: ICompleteSharedContext) => (val: number) => number,\naddInvalidHandling = true,\n  ): Builder {\n    const evalHelper = (context: ICompleteSharedContext) => (arg: Term): number =>\n      op(context)((<Literal<number>>arg).typedValue);\n    return this.onUnary(TypeURL.XSD_INTEGER, context => arg =>\n      integer(evalHelper(context)(arg)), addInvalidHandling)\n      .onUnary(TypeURL.XSD_DECIMAL, context => arg =>\n        decimal(evalHelper(context)(arg)), addInvalidHandling)\n      .onUnary(TypeURL.XSD_FLOAT, context => arg =>\n        float(evalHelper(context)(arg)), addInvalidHandling)\n      .onUnary(TypeURL.XSD_DOUBLE, context => arg =>\n        double(evalHelper(context)(arg)), addInvalidHandling);\n  }\n\n  /**\n   * !!! Be aware when using this function, it will create different overloads with different return types !!!\n   * Arithmetic operators take 2 numeric arguments, and return a single numerical\n   * value. The type of the return value is heavily dependent on the types of the\n   * input arguments. In JS everything is a double, but in SPARQL it is not.\n   *\n   * The different arguments are handled by type promotion and subtype substitution.\n   * The way numeric function arguments work is described here:\n   * https://www.w3.org/TR/xpath20/#mapping\n   * Above url is referenced in the sparql spec: https://www.w3.org/TR/sparql11-query/#OperatorMapping\n   */\n  public arithmetic(\n    op: (context: ICompleteSharedContext) => (left: number, right: number) => number,\naddInvalidHandling = true,\n  ): Builder {\n    const evalHelper = (context: ICompleteSharedContext) => (left: Term, right: Term): number =>\n      op(context)((<Literal<number>>left).typedValue, (<Literal<number>>right).typedValue);\n    return this.onBinary([ TypeURL.XSD_INTEGER, TypeURL.XSD_INTEGER ], context => (left, right) =>\n      integer(evalHelper(context)(left, right)), addInvalidHandling)\n      .onBinary([ TypeURL.XSD_DECIMAL, TypeURL.XSD_DECIMAL ], context => (left, right) =>\n        decimal(evalHelper(context)(left, right)), addInvalidHandling)\n      .onBinary([ TypeURL.XSD_FLOAT, TypeURL.XSD_FLOAT ], context => (left, right) =>\n        float(evalHelper(context)(left, right)), addInvalidHandling)\n      .onBinary([ TypeURL.XSD_DOUBLE, TypeURL.XSD_DOUBLE ], context => (left, right) =>\n        double(evalHelper(context)(left, right)), addInvalidHandling);\n  }\n\n  public numberTest(test: (context: ICompleteSharedContext) => (left: number, right: number) => boolean): Builder {\n    return this.numeric(context => ([ left, right ]: E.NumericLiteral[]) => {\n      const result = test(context)(left.typedValue, right.typedValue);\n      return bool(result);\n    });\n  }\n\n  public stringTest(\n    test: (context: ICompleteSharedContext) => (left: string, right: string) => boolean,\naddInvalidHandling = true,\n  ): Builder {\n    return this\n      .set(\n        [ C.TypeURL.XSD_STRING, C.TypeURL.XSD_STRING ],\n        context => ([ left, right ]: E.StringLiteral[]) => {\n          const result = test(context)(left.typedValue, right.typedValue);\n          return bool(result);\n        },\n        addInvalidHandling,\n      );\n  }\n\n  public booleanTest(\n    test: (context: ICompleteSharedContext) => (left: boolean, right: boolean) => boolean,\naddInvalidHandling = true,\n  ): Builder {\n    return this\n      .set(\n        [ C.TypeURL.XSD_BOOLEAN, C.TypeURL.XSD_BOOLEAN ],\n        context => ([ left, right ]: E.BooleanLiteral[]) => {\n          const result = test(context)(left.typedValue, right.typedValue);\n          return bool(result);\n        },\n        addInvalidHandling,\n      );\n  }\n\n  public dateTimeTest(test: (context: ICompleteSharedContext)\n  => (left: IDateTimeRepresentation, right: IDateTimeRepresentation) => boolean, addInvalidHandling = true): Builder {\n    return this\n      .set(\n        [ C.TypeURL.XSD_DATE_TIME, C.TypeURL.XSD_DATE_TIME ],\n        context => ([ left, right ]: E.DateTimeLiteral[]) => {\n          const result = test(context)(left.typedValue, right.typedValue);\n          return bool(result);\n        },\n        addInvalidHandling,\n      );\n  }\n\n  public numeric<T extends TermExpression>(op: ImplementationFunctionTuple<[T, T]>): Builder {\n    return this.set([ C.TypeAlias.SPARQL_NUMERIC, C.TypeAlias.SPARQL_NUMERIC ], op);\n  }\n}\n\n// ----------------------------------------------------------------------------\n// Literal Construction helpers\n// ----------------------------------------------------------------------------\n\nexport function bool(val: boolean): E.BooleanLiteral {\n  return new E.BooleanLiteral(val);\n}\n\nexport function integer(num: number): E.IntegerLiteral {\n  return new E.IntegerLiteral(num);\n}\n\nexport function decimal(num: number): E.DecimalLiteral {\n  return new E.DecimalLiteral(num);\n}\n\nexport function float(num: number): E.FloatLiteral {\n  return new E.FloatLiteral(num);\n}\n\nexport function double(num: number): E.DoubleLiteral {\n  return new E.DoubleLiteral(num);\n}\n\nexport function string(str: string): E.StringLiteral {\n  return new E.StringLiteral(str);\n}\n\nexport function langString(str: string, lang: string): E.LangStringLiteral {\n  return new E.LangStringLiteral(str, lang);\n}\n\nexport function dateTime(date: IDateTimeRepresentation, str: string): E.DateTimeLiteral {\n  return new E.DateTimeLiteral(date, str);\n}\n\nexport function expressionToVar(variableExpression: E.VariableExpression): RDF.Variable {\n  return DF.variable(variableExpression.name.slice(1));\n}\n","import type { DateLiteral, DateTimeLiteral, TimeLiteral } from '../expressions';\nimport * as E from '../expressions';\nimport { DurationLiteral } from '../expressions';\nimport type * as C from '../util/Consts';\nimport { TypeURL } from '../util/Consts';\nimport { trimToDayTimeDuration, trimToYearMonthDuration } from '../util/DateTimeHelpers';\nimport * as Err from '../util/Errors';\nimport {\n  parseDate,\n  parseDateTime,\n  parseDayTimeDuration,\n  parseDuration,\n  parseTime,\n  parseYearMonthDuration,\n  parseXSDDecimal,\n  parseXSDFloat,\n  parseXSDInteger,\n} from '../util/Parsing';\n\nimport type { IOverloadedDefinition } from './Core';\nimport { bool, dateTime, decimal, declare, double, float, integer, string } from './Helpers';\n\ntype Term = E.TermExpression;\n\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\n// Begin definitions.\n\n// ----------------------------------------------------------------------------\n// XPath Constructor functions\n// https://www.w3.org/TR/sparql11-query/#\n// https://www.w3.org/TR/xpath-functions/#casting-from-primitive-to-primitive\n// ----------------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/xpath-functions/#casting-to-string\n */\nconst xsdToString = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_STRING)\n    .onNumeric1(() => (val: E.NumericLiteral) => string(float(val.typedValue).str()))\n    .onBoolean1Typed(() => val => string(bool(val).str()))\n    .onTerm1(() => (val: E.StringLiteral) => string(val.str()))\n    .collect(),\n};\n\nconst xsdToFloat = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_FLOAT)\n    .onNumeric1(() => (val: E.NumericLiteral) => float(val.typedValue))\n    .onBoolean1Typed(() => val => float(val ? 1 : 0))\n    .onUnary(TypeURL.XSD_STRING, () => (val: E.StringLiteral) => {\n      const result = parseXSDFloat(val.str());\n      if (result === undefined) {\n        throw new Err.CastError(val, TypeURL.XSD_FLOAT);\n      }\n      return float(result);\n    }, false)\n    .collect(),\n};\n\nconst xsdToDouble = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_DOUBLE)\n    .onNumeric1(() => (val: E.NumericLiteral) => double(val.typedValue))\n    .onBoolean1Typed(() => val => double(val ? 1 : 0))\n    .onUnary(TypeURL.XSD_STRING, () => (val: E.Term) => {\n      const result = parseXSDFloat(val.str());\n      if (result === undefined) {\n        throw new Err.CastError(val, TypeURL.XSD_DOUBLE);\n      }\n      return double(result);\n    }, false)\n    .collect(),\n};\n\nconst xsdToDecimal = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_DECIMAL)\n    .onNumeric1(() => (val: E.Term) => {\n      const result = parseXSDDecimal(val.str());\n      if (result === undefined) {\n        throw new Err.CastError(val, TypeURL.XSD_DECIMAL);\n      }\n      return decimal(result);\n    })\n    .onString1(() => (val: E.Term) => {\n      const str = val.str();\n      const result = /^([+-])?(\\d+(\\.\\d+)?)$/u.test(str) ? parseXSDDecimal(str) : undefined;\n      if (result === undefined) {\n        throw new Err.CastError(val, TypeURL.XSD_DECIMAL);\n      }\n      return decimal(result);\n    }, false)\n    .onBoolean1Typed(() => val => decimal(val ? 1 : 0))\n    .collect(),\n};\n\nconst xsdToInteger = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_INTEGER)\n    .onBoolean1Typed(() => val => integer(val ? 1 : 0))\n    .onNumeric1(() => (val: E.Term) => {\n      const result = parseXSDInteger(val.str());\n      if (result === undefined) {\n        throw new Err.CastError(val, TypeURL.XSD_INTEGER);\n      }\n      return integer(result);\n    }, false)\n    .onString1(() => (val: E.Term) => {\n      const str = val.str();\n      const result = /^\\d+$/u.test(str) ? parseXSDInteger(str) : undefined;\n      if (result === undefined) {\n        throw new Err.CastError(val, TypeURL.XSD_INTEGER);\n      }\n      return integer(result);\n    })\n    .collect(),\n};\n\nconst xsdToDatetime = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_DATE_TIME)\n    .onUnary(TypeURL.XSD_DATE_TIME, () => (val: E.DateTimeLiteral) => val)\n    .onUnary(TypeURL.XSD_STRING, () => (val: Term) =>\n      dateTime(parseDateTime(val.str()), val.str()), false)\n    .onUnary(TypeURL.XSD_DATE, () => (val: E.DateLiteral) =>\n      new E.DateTimeLiteral({ ...val.typedValue, hours: 0, minutes: 0, seconds: 0 }))\n    .collect(),\n};\n\nconst xsdToBoolean = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_BOOLEAN)\n    .onNumeric1(() => (val: E.NumericLiteral) => bool(val.coerceEBV()), true)\n    .onUnary(TypeURL.XSD_BOOLEAN, () => (val: Term) => bool(val.coerceEBV()), true)\n    .onUnary(TypeURL.XSD_STRING, () => (val: Term) => {\n      switch (val.str()) {\n        case 'true':\n          return bool(true);\n        case 'false':\n          return bool(false);\n        case '1':\n          return bool(true);\n        case '0':\n          return bool(false);\n        default:\n          throw new Err.CastError(val, TypeURL.XSD_BOOLEAN);\n      }\n    }, false)\n    .collect(),\n};\n\n// End definitions.\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\n\n// Additional definitions to implement https://github.com/w3c/sparql-12/blob/main/SEP/SEP-0002/sep-0002.md\n// The additional casts are listed in https://www.w3.org/TR/xpath-functions/#casting-from-primitive-to-primitive\nconst xsdToTime = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_TIME)\n    .onUnary(TypeURL.XSD_TIME, () => (val: TimeLiteral) => new E.TimeLiteral(val.typedValue, val.strValue))\n    .onUnary(TypeURL.XSD_DATE_TIME, () => (val: DateTimeLiteral) =>\n      new E.TimeLiteral(val.typedValue))\n    .onStringly1(() => (val: Term) => new E.TimeLiteral(parseTime(val.str())))\n    .collect(),\n};\n\nconst xsdToDate = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_DATE)\n    .onUnary(TypeURL.XSD_DATE, () => (val: DateLiteral) => new E.DateLiteral(val.typedValue, val.strValue))\n    .onUnary(TypeURL.XSD_DATE_TIME, () => (val: DateTimeLiteral) =>\n      new E.DateLiteral(val.typedValue))\n    .onStringly1(() => (val: E.Term) => new E.DateLiteral(parseDate(val.str())))\n    .collect(),\n};\n\nconst xsdToDuration = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_DURATION)\n    // https://www.w3.org/TR/xpath-functions/#casting-to-durations\n    .onUnary(TypeURL.XSD_DURATION, () => (val: E.DurationLiteral) =>\n      // Copy is needed to make sure the dataType is changed, even when the provided type was a subtype\n      new E.DurationLiteral(val.typedValue, val.strValue))\n    .onStringly1(() => (val: Term) =>\n      new DurationLiteral(parseDuration(val.str())))\n    .collect(),\n};\n\nconst xsdToDayTimeDuration = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_DAY_TIME_DURATION)\n    // https://www.w3.org/TR/xpath-functions/#casting-to-durations\n    .onUnary(TypeURL.XSD_DURATION, () => (val: E.DurationLiteral) =>\n      // Copy is needed to make sure the dataType is changed, even when the provided type was a subtype\n      new E.DayTimeDurationLiteral(trimToDayTimeDuration(val.typedValue)))\n    .onStringly1(() => (val: Term) =>\n      new E.DayTimeDurationLiteral(parseDayTimeDuration(val.str())))\n    .collect(),\n};\n\nconst xsdToYearMonthDuration = {\n  arity: 1,\n  overloads: declare(TypeURL.XSD_YEAR_MONTH_DURATION)\n    // https://www.w3.org/TR/xpath-functions/#casting-to-durations\n    .onUnary(TypeURL.XSD_DURATION, () => (val: E.DurationLiteral) =>\n      // Copy is needed to make sure the dataType is changed, even when the provided type was a subtype\n      new E.YearMonthDurationLiteral(trimToYearMonthDuration(val.typedValue)))\n    .onStringly1(() => (val: Term) =>\n      new E.YearMonthDurationLiteral(parseYearMonthDuration(val.str())))\n    .collect(),\n};\n\nexport const namedDefinitions: Record<C.NamedOperator, IOverloadedDefinition> = {\n  // --------------------------------------------------------------------------\n  // XPath Constructor functions\n  // https://www.w3.org/TR/sparql11-query/#FunctionMapping\n  // --------------------------------------------------------------------------\n  [TypeURL.XSD_STRING]: xsdToString,\n  [TypeURL.XSD_FLOAT]: xsdToFloat,\n  [TypeURL.XSD_DOUBLE]: xsdToDouble,\n  [TypeURL.XSD_DECIMAL]: xsdToDecimal,\n  [TypeURL.XSD_INTEGER]: xsdToInteger,\n  [TypeURL.XSD_DATE_TIME]: xsdToDatetime,\n  [TypeURL.XSD_DATE]: xsdToDate,\n  [TypeURL.XSD_BOOLEAN]: xsdToBoolean,\n  [TypeURL.XSD_TIME]: xsdToTime,\n  [TypeURL.XSD_DURATION]: xsdToDuration,\n  [TypeURL.XSD_DAY_TIME_DURATION]: xsdToDayTimeDuration,\n  [TypeURL.XSD_YEAR_MONTH_DURATION]: xsdToYearMonthDuration,\n};\n","import type { ICompleteSharedContext } from '../evaluators/evaluatorHelpers/BaseExpressionEvaluator';\nimport type * as E from '../expressions';\nimport { isLiteralTermExpression, TermExpression } from '../expressions';\nimport type { KnownLiteralTypes } from '../util/Consts';\nimport type { GeneralSuperTypeDict, ISuperTypeProvider, OverrideType } from '../util/TypeHandling';\nimport {\n  asGeneralType,\n  asKnownLiteralType,\n  asOverrideType,\n  getSuperTypes,\n  superTypeDictTable,\n  typePromotion,\n} from '../util/TypeHandling';\nimport type { ArgumentType } from './Core';\n\nexport type SearchStack = OverloadTree[];\nexport type ImplementationFunction = (sharedContext: ICompleteSharedContext) => E.SimpleApplication;\nexport type ImplementationFunctionTuple<T> = (sharedContext: ICompleteSharedContext) => E.SimpleApplicationTuple<T>;\ninterface IFunctionArgumentsCacheObj {\n  func?: ImplementationFunction;\n  cache?: FunctionArgumentsCache;\n}\nexport type FunctionArgumentsCache = Record<string, IFunctionArgumentsCacheObj>;\n/**\n * Maps argument types on their specific implementation in a tree like structure.\n * When adding any functionality to this class, make sure you add it to SpecialFunctions as well.\n */\nexport class OverloadTree {\n  private implementation?: ImplementationFunction | undefined;\n  // We need this field. e.g. decimal decimal should be kept even when double double is added.\n  // We use promotion count to check priority.\n  private promotionCount?: number | undefined;\n  private readonly generalOverloads: Record<'term' | E.TermType, OverloadTree>;\n  private readonly literalOverLoads: [OverrideType, OverloadTree][];\n  private readonly depth: number;\n\n  public constructor(private readonly identifier: string, depth?: number) {\n    this.implementation = undefined;\n    this.generalOverloads = Object.create(null);\n    this.literalOverLoads = [];\n    this.depth = depth ?? 0;\n    this.promotionCount = undefined;\n  }\n\n  private getSubtree(overrideType: ArgumentType): OverloadTree | undefined {\n    const generalType = asGeneralType(overrideType);\n    if (generalType) {\n      return this.generalOverloads[generalType];\n    }\n    for (const [ type, overloadTree ] of this.literalOverLoads) {\n      if (overrideType === type) {\n        return overloadTree;\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Get the implementation for the types that exactly match @param args .\n   */\n  public getImplementationExact(args: ArgumentType[]): ImplementationFunction | undefined {\n    // eslint-disable-next-line ts/no-this-alias\n    let node: OverloadTree | undefined = this;\n    for (const expression of args) {\n      node = node.getSubtree(expression);\n      if (!node) {\n        return undefined;\n      }\n    }\n    return node.implementation;\n  }\n\n  /**\n   * Searches in a depth first way for the best matching overload. considering this a the tree's root.\n   * @param args the arguments to the function.\n   * @param superTypeProvider\n   * @param functionArgumentsCache\n   */\n  public search(\n    args: E.TermExpression[],\n    superTypeProvider: ISuperTypeProvider,\n    functionArgumentsCache: FunctionArgumentsCache,\n  ):\n    ImplementationFunction | undefined {\n    let cacheIter: IFunctionArgumentsCacheObj | undefined = functionArgumentsCache[this.identifier];\n    let searchIndex = 0;\n    while (searchIndex < args.length && cacheIter?.cache) {\n      const term = args[searchIndex];\n      const literalExpression = isLiteralTermExpression(term);\n      cacheIter = cacheIter.cache[literalExpression ? literalExpression.dataType : term.termType];\n      searchIndex++;\n    }\n    if (searchIndex === args.length && cacheIter?.func) {\n      return cacheIter.func;\n    }\n\n    // SearchStack is a stack of all node's that need to be checked for implementation.\n    // It provides an easy way to keep order in our search.\n    const searchStack: { node: OverloadTree; index: number }[] = [];\n    const startIndex = 0;\n    if (args.length === 0) {\n      return this.implementation;\n    }\n    // GetSubTreeWithArg return a SearchStack containing the node's that should be contacted next.\n    // We also log the index since there is no other way to remember this index.\n    // the provided stack should be pushed on top of our search stack since it also has it's order.\n    searchStack.push(...this.getSubTreeWithArg(args[startIndex], superTypeProvider).map(node =>\n      ({ node, index: startIndex + 1 })));\n    while (searchStack.length > 0) {\n      const { index, node } = <{ node: OverloadTree; index: number }>searchStack.pop();\n      // We check the implementation because it would be possible a path is created but not implemented.\n      // ex: f(double, double, double) and f(term, term). and calling f(double, double).\n      if (index === args.length && node.implementation) {\n        this.addToCache(functionArgumentsCache, args, node.implementation);\n        return node.implementation;\n      }\n      searchStack.push(...node.getSubTreeWithArg(args[index], superTypeProvider).map(item =>\n        ({ node: item, index: index + 1 })));\n    }\n    // Calling a function with one argument but finding no implementation should return no implementation.\n    // Not even the one with no arguments.\n    return undefined;\n  }\n\n  private addToCache(\n    functionArgumentsCache: FunctionArgumentsCache,\n    args: E.TermExpression[],\n    func?: ImplementationFunction | undefined,\n  ): void {\n    function getDefault(lruCache: FunctionArgumentsCache, key: string): IFunctionArgumentsCacheObj {\n      if (!(key in lruCache)) {\n        lruCache[key] = {};\n      }\n      return lruCache[key];\n    }\n    let cache = getDefault(functionArgumentsCache, this.identifier);\n    for (const term of args) {\n      const literalExpression = isLiteralTermExpression(term);\n      const key = literalExpression ? literalExpression.dataType : term.termType;\n      cache.cache = cache.cache ?? {};\n      cache = getDefault(cache.cache, key);\n    }\n    cache.func = func;\n  }\n\n  /**\n   * Adds an overload to the tree structure considering this as the tree's root.\n   * @param argumentTypes a list of argumentTypes that would need to be provided in\n   * the same order to get the implementation.\n   * @param func the implementation for this overload.\n   */\n  public addOverload(argumentTypes: ArgumentType[], func: ImplementationFunction): void {\n    this._addOverload([ ...argumentTypes ], func, 0);\n  }\n\n  private _addOverload(argumentTypes: ArgumentType[], func: ImplementationFunction, promotionCount: number): void {\n    const [ argumentType, ..._argumentTypes ] = argumentTypes;\n    if (!argumentType) {\n      if (this.promotionCount === undefined || promotionCount <= this.promotionCount) {\n        this.promotionCount = promotionCount;\n        this.implementation = func;\n      }\n      return;\n    }\n    let nextTree = this.getSubtree(argumentType);\n    if (!nextTree) {\n      const newNode = new OverloadTree(this.identifier, this.depth + 1);\n      const generalType = asGeneralType(argumentType);\n      if (generalType) {\n        this.generalOverloads[generalType] = newNode;\n      }\n      const overrideType = asOverrideType(argumentType);\n      if (overrideType) {\n        this.literalOverLoads.push([ overrideType, newNode ]);\n      }\n      nextTree = newNode;\n    }\n    nextTree._addOverload(_argumentTypes, func, promotionCount);\n\n    if (typePromotion[argumentType]) {\n      for (const ret of typePromotion[argumentType]!) {\n        this.addPromotedOverload(\n          ret.typeToPromote,\n          func,\n          ret.conversionFunction,\n          _argumentTypes,\n          promotionCount,\n        );\n      }\n    }\n  }\n\n  private addPromotedOverload(\n    typeToPromote: OverrideType,\n    func: ImplementationFunction,\n    conversionFunction: (arg: E.TermExpression) => E.TermExpression,\n    argumentTypes: ArgumentType[],\n    promotionCount: number,\n  ): void {\n    let nextTree = this.getSubtree(typeToPromote);\n    if (!nextTree) {\n      const newNode = new OverloadTree(this.identifier, this.depth + 1);\n      this.literalOverLoads.push([ typeToPromote, newNode ]);\n      nextTree = newNode;\n    }\n    nextTree._addOverload(argumentTypes, funcConf => args => func(funcConf)([\n      ...args.slice(0, this.depth),\n      conversionFunction(args[this.depth]),\n      ...args.slice(this.depth + 1, args.length),\n    ]), promotionCount + 1);\n  }\n\n  /**\n   * @param arg term to try and match to possible overloads of this node.\n   * @param openWorldType interface allowing to discover relations between types.\n   * @returns SearchStack a stack with top element the next node that should be asked for implementation or overload.\n   */\n  private getSubTreeWithArg(arg: E.TermExpression, openWorldType: ISuperTypeProvider): SearchStack {\n    const res: SearchStack = [];\n    const literalExpression = isLiteralTermExpression(arg);\n    // These types refer to Type exported by lib/util/Consts.ts\n    if (this.generalOverloads.term) {\n      res.push(this.generalOverloads.term);\n    }\n    // TermTypes are defined in E.TermType.\n    if (this.generalOverloads[arg.termType]) {\n      res.push(this.generalOverloads[arg.termType]);\n    }\n    if (literalExpression) {\n      // Defending implementation. Mainly the scary sort.\n      // This function has cost O(n) + O(m * log(m)) with n = amount of overloads and m = amount of matched overloads\n      // We map over each of the overloads, filter only the once that can be used (this is normally 1 or 2).\n      // The sort function on an array with 1 or 2 arguments will be negligible.\n      const concreteType = asKnownLiteralType(literalExpression.dataType);\n      let subExtensionTable: GeneralSuperTypeDict;\n      if (concreteType) {\n        // Concrete dataType is known by expression-evaluator.\n        subExtensionTable = superTypeDictTable[concreteType];\n      } else {\n        // Datatype is a custom datatype\n        subExtensionTable = getSuperTypes(literalExpression.dataType, openWorldType);\n      }\n      const matches: [number, OverloadTree][] = this.literalOverLoads.filter(([ matchType, _ ]) =>\n        matchType in subExtensionTable)\n        .map(([ matchType, tree ]) => [ subExtensionTable[<KnownLiteralTypes> matchType], tree ]);\n      // eslint-disable-next-line unused-imports/no-unused-vars\n      matches.sort(([ prioA, matchTypeA ], [ prioB, matchTypeB ]) => prioA - prioB);\n      res.push(...matches.map(([ _, sortedType ]) => sortedType));\n    }\n    return res;\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport { BigNumber } from 'bignumber.js';\nimport { sha1, sha256, sha384, sha512 } from 'hash.js';\nimport { DataFactory } from 'rdf-data-factory';\nimport { resolve as resolveRelativeIri } from 'relative-to-absolute-iri';\nimport { hash as md5 } from 'spark-md5';\nimport * as uuid from 'uuid';\n\nimport type { ICompleteSharedContext } from '../evaluators/evaluatorHelpers/BaseExpressionEvaluator';\nimport * as E from '../expressions';\nimport type { Quad } from '../expressions';\nimport { TermTransformer } from '../transformers/TermTransformer';\nimport * as C from '../util/Consts';\nimport { RegularOperator, TypeAlias, TypeURL } from '../util/Consts';\nimport type { IDayTimeDurationRepresentation } from '../util/DateTimeHelpers';\nimport {\n  dayTimeDurationsToSeconds,\n  defaultedDateTimeRepresentation,\n  defaultedDayTimeDurationRepresentation,\n  defaultedDurationRepresentation,\n  defaultedYearMonthDurationRepresentation,\n  extractRawTimeZone,\n  negateDuration,\n  toDateTimeRepresentation,\n  toUTCDate,\n  yearMonthDurationsToMonths,\n} from '../util/DateTimeHelpers';\nimport * as Err from '../util/Errors';\nimport { orderTypes } from '../util/Ordering';\nimport { addDurationToDateTime, elapsedDuration } from '../util/SpecAlgos';\nimport type { IOverloadedDefinition } from './Core';\nimport { RegularFunction } from './Core';\nimport { bool, decimal, declare, double, integer, langString, string } from './Helpers';\nimport * as X from './XPathFunctions';\nimport { regularFunctions } from '.';\n\nconst DF = new DataFactory<RDF.BaseQuad>();\n\ntype Term = E.TermExpression;\n\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\n// Begin definitions\n\n// ----------------------------------------------------------------------------\n// Operator Mapping\n// https://www.w3.org/TR/sparql11-query/#OperatorMapping\n// ----------------------------------------------------------------------------\n\nconst not = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.NOT)\n    .onTerm1(() => val => bool(!val.coerceEBV()))\n    .collect(),\n};\n\nconst unaryPlus = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.UPLUS)\n    .numericConverter(() => val => val)\n    .collect(),\n};\n\nconst unaryMinus = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.UMINUS)\n    .numericConverter(() => val => -val)\n    .collect(),\n};\n\nconst multiplication = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.MULTIPLICATION)\n    .arithmetic(() => (left, right) => new BigNumber(left).times(right).toNumber())\n    .collect(),\n};\n\nconst division = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.DIVISION)\n    .arithmetic(() => (left, right) => new BigNumber(left).div(right).toNumber())\n    .onBinaryTyped(\n      [ TypeURL.XSD_INTEGER, TypeURL.XSD_INTEGER ],\n      () => (left: number, right: number) => {\n        if (right === 0) {\n          throw new Err.ExpressionError('Integer division by 0');\n        }\n        return decimal(new BigNumber(left).div(right).toNumber());\n      },\n    )\n    .collect(),\n};\n\nconst addition = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.ADDITION)\n    .arithmetic(() => (left, right) => new BigNumber(left).plus(right).toNumber())\n    .set([ TypeURL.XSD_DATE_TIME, TypeURL.XSD_DAY_TIME_DURATION ], () =>\n      ([ date, dur ]: [ E.DateTimeLiteral, E.DayTimeDurationLiteral ]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-add-dayTimeDuration-to-dateTime\n        new E.DateTimeLiteral(addDurationToDateTime(date.typedValue, defaultedDurationRepresentation(dur.typedValue))))\n    .copy({\n      from: [ TypeURL.XSD_DATE_TIME, TypeURL.XSD_DAY_TIME_DURATION ],\n      to: [ TypeURL.XSD_DATE_TIME, TypeURL.XSD_YEAR_MONTH_DURATION ],\n    })\n    .set([ TypeURL.XSD_DATE, TypeURL.XSD_DAY_TIME_DURATION ], () =>\n      ([ date, dur ]: [E.DateLiteral, E.DurationLiteral]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-add-dayTimeDuration-to-date\n        new E.DateLiteral(\n          addDurationToDateTime(\n            defaultedDateTimeRepresentation(date.typedValue),\n            defaultedDurationRepresentation(dur.typedValue),\n          ),\n        ))\n    .copy({\n      from: [ TypeURL.XSD_DATE, TypeURL.XSD_DAY_TIME_DURATION ],\n      to: [ TypeURL.XSD_DATE, TypeURL.XSD_YEAR_MONTH_DURATION ],\n    })\n    .set([ TypeURL.XSD_TIME, TypeURL.XSD_DAY_TIME_DURATION ], () =>\n      ([ time, dur ]: [E.TimeLiteral, E.DurationLiteral]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-add-dayTimeDuration-to-time\n        new E.TimeLiteral(\n          addDurationToDateTime(\n            defaultedDateTimeRepresentation(time.typedValue),\n            defaultedDurationRepresentation(dur.typedValue),\n          ),\n        ))\n    .copy({\n      from: [ TypeURL.XSD_TIME, TypeURL.XSD_DAY_TIME_DURATION ],\n      to: [ TypeURL.XSD_TIME, TypeURL.XSD_YEAR_MONTH_DURATION ],\n    })\n    .collect(),\n};\n\nconst subtraction = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.SUBTRACTION)\n    .arithmetic(() => (left, right) => new BigNumber(left).minus(right).toNumber())\n    .set([ TypeURL.XSD_DATE_TIME, TypeURL.XSD_DATE_TIME ], ({ defaultTimeZone }) =>\n      ([ date1, date2 ]: [ E.DateTimeLiteral, E.DateTimeLiteral ]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-subtract-dateTimes;\n        new E.DayTimeDurationLiteral(elapsedDuration(date1.typedValue, date2.typedValue, defaultTimeZone)))\n    .copy({ from: [ TypeURL.XSD_DATE_TIME, TypeURL.XSD_DATE_TIME ], to: [ TypeURL.XSD_DATE, TypeURL.XSD_DATE ]})\n    .copy({ from: [ TypeURL.XSD_DATE_TIME, TypeURL.XSD_DATE_TIME ], to: [ TypeURL.XSD_TIME, TypeURL.XSD_TIME ]})\n    .set([ TypeURL.XSD_DATE_TIME, TypeURL.XSD_DAY_TIME_DURATION ], () =>\n      ([ date, dur ]: [ E.DateTimeLiteral, E.DayTimeDurationLiteral ]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-subtract-dayTimeDuration-from-dateTime\n        new E.DateTimeLiteral(addDurationToDateTime(\n          date.typedValue,\n          defaultedDurationRepresentation(negateDuration(dur.typedValue)),\n        )))\n    .copy({\n      from: [ TypeURL.XSD_DATE_TIME, TypeURL.XSD_DAY_TIME_DURATION ],\n      to: [ TypeURL.XSD_DATE_TIME, TypeURL.XSD_YEAR_MONTH_DURATION ],\n    })\n    .set([ TypeURL.XSD_DATE, TypeURL.XSD_DAY_TIME_DURATION ], () =>\n      ([ date, dur ]: [ E.DateLiteral, E.DayTimeDurationLiteral ]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-subtract-dayTimeDuration-from-date\n        new E.DateLiteral(addDurationToDateTime(\n          defaultedDateTimeRepresentation(date.typedValue),\n          defaultedDurationRepresentation(negateDuration(dur.typedValue)),\n        )))\n    .copy({\n      from: [ TypeURL.XSD_DATE, TypeURL.XSD_DAY_TIME_DURATION ],\n      to: [ TypeURL.XSD_DATE, TypeURL.XSD_YEAR_MONTH_DURATION ],\n    })\n    .set([ TypeURL.XSD_TIME, TypeURL.XSD_DAY_TIME_DURATION ], () =>\n      ([ time, dur ]: [ E.TimeLiteral, E.DayTimeDurationLiteral ]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-subtract-dayTimeDuration-from-date\n        new E.TimeLiteral(addDurationToDateTime(\n          defaultedDateTimeRepresentation(time.typedValue),\n          defaultedDurationRepresentation(negateDuration(dur.typedValue)),\n        )))\n    .collect(),\n};\n\n// https://www.w3.org/TR/sparql11-query/#func-RDFterm-equal\nconst equality = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.EQUAL)\n    .numberTest(() => (left, right) => left === right)\n    .stringTest(() => (left, right) => left.localeCompare(right) === 0)\n    .set(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.RDF_LANG_STRING ],\n      () => ([ left, right ]: E.LangStringLiteral[]) => bool(left.str() === right.str() &&\n        left.language === right.language),\n    )\n    // Fall through: a TypeURL.XSD_STRING is never equal to a TypeURL.RDF_LANG_STRING.\n    .set([ TypeAlias.SPARQL_STRINGLY, TypeAlias.SPARQL_STRINGLY ], () => () => bool(false))\n    .booleanTest(() => (left, right) => left === right)\n    .dateTimeTest(({ defaultTimeZone }) => (left, right) =>\n      toUTCDate(left, defaultTimeZone).getTime() === toUTCDate(right, defaultTimeZone).getTime())\n    .copy({\n      // https://www.w3.org/TR/xpath-functions/#func-date-equal\n      from: [ TypeURL.XSD_DATE_TIME, TypeURL.XSD_DATE_TIME ],\n      to: [ TypeURL.XSD_DATE, TypeURL.XSD_DATE ],\n    })\n    .set(\n      [ 'quad', 'quad' ],\n      context => ([ left, right ]) => {\n        const op: RegularFunction = new RegularFunction(RegularOperator.EQUAL, equality);\n        return bool(\n          (<E.BooleanLiteral> op.apply([ (<Quad> left).subject, (<Quad> right).subject ], context)).coerceEBV() &&\n          (<E.BooleanLiteral> op.apply([ (<Quad> left).predicate, (<Quad> right).predicate ], context)).coerceEBV() &&\n          (<E.BooleanLiteral> op.apply([ (<Quad> left).object, (<Quad> right).object ], context)).coerceEBV(),\n        );\n      },\n      false,\n    )\n    .set(\n      [ 'term', 'term' ],\n      () => ([ left, right ]) => bool(RDFTermEqual(left, right)),\n      false,\n    )\n    .set([ TypeURL.XSD_DURATION, TypeURL.XSD_DURATION ], () =>\n      ([ dur1, dur2 ]: [ E.DurationLiteral, E.DurationLiteral ]) =>\n        bool(yearMonthDurationsToMonths(defaultedYearMonthDurationRepresentation(dur1.typedValue)) ===\n          yearMonthDurationsToMonths(defaultedYearMonthDurationRepresentation(dur2.typedValue)) &&\n          dayTimeDurationsToSeconds(defaultedDayTimeDurationRepresentation(dur1.typedValue)) ===\n          dayTimeDurationsToSeconds(defaultedDayTimeDurationRepresentation(dur2.typedValue))))\n    .set([ TypeURL.XSD_TIME, TypeURL.XSD_TIME ], ({ defaultTimeZone }) =>\n      ([ time1, time2 ]: [E.TimeLiteral, E.TimeLiteral]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-time-equal\n        bool(toUTCDate(defaultedDateTimeRepresentation(time1.typedValue), defaultTimeZone).getTime() ===\n          toUTCDate(defaultedDateTimeRepresentation(time2.typedValue), defaultTimeZone).getTime()))\n    .collect(),\n};\n\nfunction RDFTermEqual(_left: Term, _right: Term): boolean {\n  const left = _left.toRDF();\n  const right = _right.toRDF();\n  const val = left.equals(right);\n  if (!val && (left.termType === 'Literal') && (right.termType === 'Literal')) {\n    throw new Err.RDFEqualTypeError([ _left, _right ]);\n  }\n  return val;\n}\n\nconst inequality = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.NOT_EQUAL)\n    .set([ 'term', 'term' ], context =>\n      ([ first, second ]) =>\n        bool(!(<E.BooleanLiteral> regularFunctions[C.RegularOperator.EQUAL]\n          .apply([ first, second ], context)).typedValue))\n    .collect(),\n};\n\nconst lesserThan = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.LT)\n    .numberTest(() => (left, right) => left < right)\n    .stringTest(() => (left, right) => left.localeCompare(right) === -1)\n    .booleanTest(() => (left, right) => left < right)\n    .set(\n      [ 'quad', 'quad' ],\n      () => ([ left, right ]) => bool(orderTypes(left.toRDF(), right.toRDF(), true) === -1),\n      false,\n    )\n    .dateTimeTest(({ defaultTimeZone }) => (left, right) =>\n      toUTCDate(left, defaultTimeZone).getTime() < toUTCDate(right, defaultTimeZone).getTime())\n    .copy({\n      // https://www.w3.org/TR/xpath-functions/#func-date-less-than\n      from: [ TypeURL.XSD_DATE_TIME, TypeURL.XSD_DATE_TIME ],\n      to: [ TypeURL.XSD_DATE, TypeURL.XSD_DATE ],\n    })\n    .set([ TypeURL.XSD_YEAR_MONTH_DURATION, TypeURL.XSD_YEAR_MONTH_DURATION ], () =>\n      ([ dur1L, dur2L ]: [E.YearMonthDurationLiteral, E.YearMonthDurationLiteral]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-yearMonthDuration-less-than\n        bool(yearMonthDurationsToMonths(defaultedYearMonthDurationRepresentation(dur1L.typedValue)) <\n          yearMonthDurationsToMonths(defaultedYearMonthDurationRepresentation(dur2L.typedValue))))\n    .set([ TypeURL.XSD_DAY_TIME_DURATION, TypeURL.XSD_DAY_TIME_DURATION ], () =>\n      ([ dur1, dur2 ]: [E.DayTimeDurationLiteral, E.DayTimeDurationLiteral]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-dayTimeDuration-greater-than\n        bool(dayTimeDurationsToSeconds(defaultedDayTimeDurationRepresentation(dur1.typedValue)) <\n          dayTimeDurationsToSeconds(defaultedDayTimeDurationRepresentation(dur2.typedValue))))\n    .set([ TypeURL.XSD_TIME, TypeURL.XSD_TIME ], ({ defaultTimeZone }) =>\n      ([ time1, time2 ]: [E.TimeLiteral, E.TimeLiteral]) =>\n        // https://www.w3.org/TR/xpath-functions/#func-time-less-than\n        bool(toUTCDate(defaultedDateTimeRepresentation(time1.typedValue), defaultTimeZone).getTime() <\n          toUTCDate(defaultedDateTimeRepresentation(time2.typedValue), defaultTimeZone).getTime()))\n    .collect(),\n};\n\nconst greaterThan = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.GT)\n    .set([ 'term', 'term' ], context =>\n      ([ first, second ]) =>\n        // X < Y -> Y > X\n        regularFunctions[C.RegularOperator.LT].apply([ second, first ], context))\n    .collect(),\n};\n\nconst lesserThanEqual = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.LTE)\n    .set([ 'term', 'term' ], context =>\n      ([ first, second ]) =>\n        // X <= Y -> X < Y || X = Y\n        // First check if the first is lesser than the second, then check if they are equal.\n        // Doing this, the correct error will be thrown, each type that has a lesserThanEqual has a matching lesserThan.\n        bool(\n          (<E.BooleanLiteral> regularFunctions[C.RegularOperator.LT].apply([ first, second ], context)).typedValue ||\n          (<E.BooleanLiteral> regularFunctions[C.RegularOperator.EQUAL].apply([ first, second ], context)).typedValue,\n        ))\n    .collect(),\n};\n\nconst greaterThanEqual = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.GTE)\n    .set([ 'term', 'term' ], context =>\n      ([ first, second ]) =>\n        // X >= Y -> Y <= X\n        regularFunctions[C.RegularOperator.LTE].apply([ second, first ], context))\n    .collect(),\n};\n\n// ----------------------------------------------------------------------------\n// Functions on RDF Terms\n// https://www.w3.org/TR/sparql11-query/#func-rdfTerms\n// ----------------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-isIRI\n */\nconst isIRI = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.IS_IRI)\n    .onTerm1(() => term => bool(term.termType === 'namedNode'))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-isBlank\n */\nconst isBlank = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.IS_BLANK)\n    .onTerm1(() => term => bool(term.termType === 'blankNode'))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-isLiteral\n */\nconst isLiteral = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.IS_LITERAL)\n    .onTerm1(() => term => bool(term.termType === 'literal'))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-isNumeric\n */\nconst isNumeric = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.IS_NUMERIC)\n    .onNumeric1(() => () => bool(true))\n    .onTerm1(() => () => bool(false))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-str\n */\nconst STR = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.STR)\n    .onTerm1(() => term => string(term.str()))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-lang\n */\nconst lang = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.LANG)\n    .onLiteral1(() => lit => string(lit.language ?? ''))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-datatype\n */\nconst datatype = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.DATATYPE)\n    .onLiteral1(() => lit => new E.NamedNode(lit.dataType))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-iri\n */\nconst IRI = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.IRI)\n    .set([ 'namedNode' ], context => (args) => {\n      const lit = <E.NamedNode> args[0];\n      const iri = resolveRelativeIri(lit.str(), context.baseIRI ?? '');\n      return new E.NamedNode(iri);\n    })\n    .onString1(context => (lit) => {\n      const iri = resolveRelativeIri(lit.str(), context.baseIRI ?? '');\n      return new E.NamedNode(iri);\n    })\n    .collect(),\n};\n\n// See special functions\n// const BNODE = {};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-strdt\n */\nconst STRDT = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.STRDT).set(\n    [ TypeURL.XSD_STRING, 'namedNode' ],\n    ({ superTypeProvider }) => ([ str, iri ]: [E.StringLiteral, E.NamedNode]) => {\n      const lit = DF.literal(str.typedValue, DF.namedNode(iri.value));\n      return new TermTransformer(superTypeProvider).transformLiteral(lit);\n    },\n  ).collect(),\n};\n/**\n * https://www.w3.org/TR/sparql11-query/#func-strlang\n */\nconst STRLANG = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.STRLANG)\n    .onBinaryTyped(\n      [ TypeURL.XSD_STRING, TypeURL.XSD_STRING ],\n      () => (val: string, language: string) => new E.LangStringLiteral(val, language.toLowerCase()),\n    )\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-uuid\n */\nconst UUID = {\n  arity: 0,\n  overloads: declare(C.RegularOperator.UUID)\n    .set([], () => () => new E.NamedNode(`urn:uuid:${uuid.v4()}`))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-struuid\n */\nconst STRUUID = {\n  arity: 0,\n  overloads: declare(C.RegularOperator.STRUUID)\n    .set([], () => () => string(uuid.v4()))\n    .collect(),\n};\n\n// ----------------------------------------------------------------------------\n// Functions on strings\n// https://www.w3.org/TR/sparql11-query/#func-forms\n// ----------------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-strlen\n */\nconst STRLEN = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.STRLEN)\n    .onStringly1(() => str => integer([ ...str.typedValue ].length))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-substr\n */\nconst SUBSTR = {\n  arity: [ 2, 3 ],\n  overloads: declare(C.RegularOperator.SUBSTR)\n    .onBinaryTyped(\n      [ TypeURL.XSD_STRING, TypeURL.XSD_INTEGER ],\n      () => (source: string, startingLoc: number) => string([ ...source ].slice(startingLoc - 1).join('')),\n    )\n    .onBinary(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.XSD_INTEGER ],\n      () => (source: E.LangStringLiteral, startingLoc: E.NumericLiteral) => {\n        const sub = [ ...source.typedValue ].slice(startingLoc.typedValue - 1).join('');\n        return langString(sub, source.language);\n      },\n    )\n    .onTernaryTyped([\n      TypeURL.XSD_STRING,\n      TypeURL.XSD_INTEGER,\n      TypeURL.XSD_INTEGER,\n    ], () => (source: string, startingLoc: number, length: number) =>\n      string([ ...source ].slice(startingLoc - 1, length + startingLoc - 1).join('')))\n    .onTernary([\n      TypeURL.RDF_LANG_STRING,\n      TypeURL.XSD_INTEGER,\n      TypeURL.XSD_INTEGER,\n    ], () => (source: E.LangStringLiteral, startingLoc: E.NumericLiteral, length: E.NumericLiteral) => {\n      const sub = [ ...source.typedValue ]\n        .slice(startingLoc.typedValue - 1, length.typedValue + startingLoc.typedValue - 1).join('');\n      return langString(sub, source.language);\n    })\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-ucase\n */\nconst UCASE = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.UCASE)\n    .onString1Typed(() => lit => string(lit.toUpperCase()))\n    .onLangString1(() => lit => langString(lit.typedValue.toUpperCase(), lit.language))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-lcase\n */\nconst LCASE = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.LCASE)\n    .onString1Typed(() => lit => string(lit.toLowerCase()))\n    .onLangString1(() => lit => langString(lit.typedValue.toLowerCase(), lit.language))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-strstarts\n * for this and the following functions you'll see (string, langstring) is not allowed. This behaviour is defined in:\n * https://www.w3.org/TR/sparql11-query/#func-arg-compatibility\n */\nconst STRSTARTS = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.STRSTARTS)\n    .onBinaryTyped(\n      [ TypeAlias.SPARQL_STRINGLY, TypeURL.XSD_STRING ],\n      () => (arg1: string, arg2: string) => bool(arg1.startsWith(arg2)),\n    )\n    .onBinary(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.RDF_LANG_STRING ],\n      () => (arg1: E.LangStringLiteral, arg2: E.LangStringLiteral) => {\n        if (arg1.language !== arg2.language) {\n          throw new Err.IncompatibleLanguageOperation(arg1, arg2);\n        }\n        return bool(arg1.typedValue.startsWith(arg2.typedValue));\n      },\n    )\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-strends\n */\nconst STRENDS = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.STRENDS)\n    .onBinaryTyped(\n      [ TypeAlias.SPARQL_STRINGLY, TypeURL.XSD_STRING ],\n      () => (arg1: string, arg2: string) => bool(arg1.endsWith(arg2)),\n    )\n    .onBinary(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.RDF_LANG_STRING ],\n      () => (arg1: E.LangStringLiteral, arg2: E.LangStringLiteral) => {\n        if (arg1.language !== arg2.language) {\n          throw new Err.IncompatibleLanguageOperation(arg1, arg2);\n        }\n        return bool(arg1.typedValue.endsWith(arg2.typedValue));\n      },\n    )\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-contains\n */\nconst CONTAINS = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.CONTAINS)\n    .onBinaryTyped(\n      [ TypeAlias.SPARQL_STRINGLY, TypeURL.XSD_STRING ],\n      () => (arg1: string, arg2: string) => bool(arg1.includes(arg2)),\n    )\n    .onBinary(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.RDF_LANG_STRING ],\n      () => (arg1: E.LangStringLiteral, arg2: E.LangStringLiteral) => {\n        if (arg1.language !== arg2.language) {\n          throw new Err.IncompatibleLanguageOperation(arg1, arg2);\n        }\n        return bool(arg1.typedValue.includes(arg2.typedValue));\n      },\n    )\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-strbefore\n */\nconst STRBEFORE = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.STRBEFORE)\n    .onBinaryTyped(\n      [ TypeURL.XSD_STRING, TypeURL.XSD_STRING ],\n      () => (arg1: string, arg2: string) => string(arg1.slice(0, Math.max(0, arg1.indexOf(arg2)))),\n    )\n    .onBinary(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.XSD_STRING ],\n      () => (arg1: E.LangStringLiteral, arg2: E.StringLiteral) => {\n        const [ a1, a2 ] = [ arg1.typedValue, arg2.typedValue ];\n        const sub = arg1.typedValue.slice(0, Math.max(0, a1.indexOf(a2)));\n        return sub || !a2 ? langString(sub, arg1.language) : string(sub);\n      },\n    )\n    .onBinary(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.RDF_LANG_STRING ],\n      () => (arg1: E.LangStringLiteral, arg2: E.LangStringLiteral) => {\n        if (arg1.language !== arg2.language) {\n          throw new Err.IncompatibleLanguageOperation(arg1, arg2);\n        }\n        const [ a1, a2 ] = [ arg1.typedValue, arg2.typedValue ];\n        const sub = arg1.typedValue.slice(0, Math.max(0, a1.indexOf(a2)));\n        return sub || !a2 ? langString(sub, arg1.language) : string(sub);\n      },\n    )\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-strafter\n */\nconst STRAFTER = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.STRAFTER)\n    .onBinaryTyped(\n      [ TypeURL.XSD_STRING, TypeURL.XSD_STRING ],\n      () => (arg1: string, arg2: string) => string(arg1.slice(arg1.indexOf(arg2)).slice(arg2.length)),\n    )\n    .onBinary(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.XSD_STRING ],\n      () => (arg1: E.LangStringLiteral, arg2: E.StringLiteral) => {\n        const [ a1, a2 ] = [ arg1.typedValue, arg2.typedValue ];\n        const sub = a1.slice(a1.indexOf(a2)).slice(a2.length);\n        return sub || !a2 ? langString(sub, arg1.language) : string(sub);\n      },\n    )\n    .onBinary(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.RDF_LANG_STRING ],\n      () => (arg1: E.LangStringLiteral, arg2: E.LangStringLiteral) => {\n        if (arg1.language !== arg2.language) {\n          throw new Err.IncompatibleLanguageOperation(arg1, arg2);\n        }\n        const [ a1, a2 ] = [ arg1.typedValue, arg2.typedValue ];\n        const sub = a1.slice(a1.indexOf(a2)).slice(a2.length);\n        return sub || !a2 ? langString(sub, arg1.language) : string(sub);\n      },\n    )\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-encode\n */\nconst ENCODE_FOR_URI = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.ENCODE_FOR_URI)\n    .onStringly1Typed(() => val => string(encodeURI(val))).collect(),\n};\n\n// See special operators\n// const CONCAT = {}\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-langMatches\n */\nconst langmatches = {\n  arity: 2,\n  overloads: declare(C.RegularOperator.LANG_MATCHES)\n    .onBinaryTyped(\n      [ TypeURL.XSD_STRING, TypeURL.XSD_STRING ],\n      () => (tag: string, range: string) => bool(X.langMatches(tag, range)),\n    ).collect(),\n};\n\nfunction regex2(): (text: string, pattern: string) => E.BooleanLiteral {\n  return (text: string, pattern: string) => bool(X.matches(text, pattern));\n}\nfunction regex3(): (text: string, pattern: string, flags: string) => E.BooleanLiteral {\n  return (text: string, pattern: string, flags: string) => bool(X.matches(text, pattern, flags));\n}\n/**\n * https://www.w3.org/TR/sparql11-query/#func-regex\n */\nconst REGEX = {\n  arity: [ 2, 3 ],\n  overloads: declare(C.RegularOperator.REGEX)\n    .onBinaryTyped([ TypeAlias.SPARQL_STRINGLY, TypeURL.XSD_STRING ], regex2)\n    .onTernaryTyped([ TypeAlias.SPARQL_STRINGLY, TypeURL.XSD_STRING, TypeURL.XSD_STRING ], regex3)\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-replace\n */\nconst REPLACE = {\n  arity: [ 3, 4 ],\n  overloads: declare(C.RegularOperator.REPLACE)\n    .onTernaryTyped(\n      [ TypeURL.XSD_STRING, TypeURL.XSD_STRING, TypeURL.XSD_STRING ],\n      () => (arg: string, pattern: string, replacement: string) =>\n        string(X.replace(arg, pattern, replacement)),\n    )\n    .set(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.XSD_STRING, TypeURL.XSD_STRING ],\n      () => ([ arg, pattern, replacement ]: [E.LangStringLiteral, E.StringLiteral, E.StringLiteral]) => {\n        const result = X.replace(arg.typedValue, pattern.typedValue, replacement.typedValue);\n        return langString(result, arg.language);\n      },\n    )\n    .onQuaternaryTyped(\n      [ TypeURL.XSD_STRING, TypeURL.XSD_STRING, TypeURL.XSD_STRING, TypeURL.XSD_STRING ],\n      () => (arg: string, pattern: string, replacement: string, flags: string) =>\n        string(X.replace(arg, pattern, replacement, flags)),\n    )\n    .set(\n      [ TypeURL.RDF_LANG_STRING, TypeURL.XSD_STRING, TypeURL.XSD_STRING, TypeURL.XSD_STRING ],\n      () => ([ arg, pattern, replacement, flags ]:\n      [E.LangStringLiteral, E.StringLiteral, E.StringLiteral, E.StringLiteral]) => {\n        const result = X.replace(arg.typedValue, pattern.typedValue, replacement.typedValue, flags.typedValue);\n        return langString(result, arg.language);\n      },\n    )\n    .collect(),\n};\n\n// ----------------------------------------------------------------------------\n// Functions on numerics\n// https://www.w3.org/TR/sparql11-query/#func-numerics\n// ----------------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-abs\n */\nconst abs = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.ABS)\n    .numericConverter(() => num => Math.abs(num))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-round\n */\nconst round = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.ROUND)\n    .numericConverter(() => num => Math.round(num))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-ceil\n */\nconst ceil = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.CEIL)\n    .numericConverter(() => num => Math.ceil(num))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-floor\n */\nconst floor = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.FLOOR)\n    .numericConverter(() => num => Math.floor(num))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#idp2130040\n */\nconst rand = {\n  arity: 0,\n  overloads: declare(C.RegularOperator.RAND)\n    .set([], () => () => double(Math.random()))\n    .collect(),\n};\n\n// ----------------------------------------------------------------------------\n// Functions on Dates and Times\n// https://www.w3.org/TR/sparql11-query/#func-date-time\n// ----------------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-now\n */\nconst now = {\n  arity: 0,\n  overloads: declare(C.RegularOperator.NOW).set([], (sharedContext: ICompleteSharedContext) => () =>\n    new E.DateTimeLiteral(toDateTimeRepresentation(\n      { date: sharedContext.now, timeZone: sharedContext.defaultTimeZone },\n    ))).collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-year\n */\nconst year = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.YEAR)\n    .onDateTime1(\n      () => date => integer(date.typedValue.year),\n    )\n    .set([ TypeURL.XSD_DATE ], () => ([ date ]: [E.DateLiteral ]) => integer(date.typedValue.year))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-month\n */\nconst month = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.MONTH)\n    .onDateTime1(\n      () => date => integer(date.typedValue.month),\n    )\n    .set([ TypeURL.XSD_DATE ], () => ([ date ]: [ E.DateLiteral]) => integer(date.typedValue.month))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-day\n */\nconst day = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.DAY)\n    .onDateTime1(\n      () => date => integer(date.typedValue.day),\n    )\n    .set([ TypeURL.XSD_DATE ], () => ([ date ]: [ E.DateLiteral]) => integer(date.typedValue.day))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-hours\n */\nconst hours = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.HOURS)\n    .onDateTime1(\n      () => date => integer(date.typedValue.hours),\n    )\n    .set([ TypeURL.XSD_TIME ], () => ([ time ]: [ E.TimeLiteral]) => integer(time.typedValue.hours))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-minutes\n */\nconst minutes = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.MINUTES)\n    .onDateTime1(() => date => integer(date.typedValue.minutes))\n    .set([ TypeURL.XSD_TIME ], () => ([ time ]: [ E.TimeLiteral]) => integer(time.typedValue.minutes))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-seconds\n */\nconst seconds = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.SECONDS)\n    .onDateTime1(() => date => decimal(date.typedValue.seconds))\n    .set([ TypeURL.XSD_TIME ], () => ([ time ]: [ E.TimeLiteral]) => integer(time.typedValue.seconds))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-timezone\n */\nconst timezone = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.TIMEZONE)\n    .onDateTime1(\n      () => (date) => {\n        const duration: Partial<IDayTimeDurationRepresentation> = {\n          hours: date.typedValue.zoneHours,\n          minutes: date.typedValue.zoneMinutes,\n        };\n        if (duration.hours === undefined && duration.minutes === undefined) {\n          throw new Err.InvalidTimezoneCall(date.str());\n        }\n        return new E.DayTimeDurationLiteral(duration);\n      },\n    )\n    .copy({ from: [ TypeURL.XSD_DATE_TIME ], to: [ TypeURL.XSD_DATE ]})\n    .copy({ from: [ TypeURL.XSD_DATE_TIME ], to: [ TypeURL.XSD_TIME ]})\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-tz\n */\nconst tz = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.TZ)\n    .onDateTime1(\n      () => date => string(extractRawTimeZone(date.str())),\n    )\n    .copy({ from: [ TypeURL.XSD_DATE_TIME ], to: [ TypeURL.XSD_DATE ]})\n    .copy({ from: [ TypeURL.XSD_DATE_TIME ], to: [ TypeURL.XSD_TIME ]})\n    .collect(),\n};\n\n// ----------------------------------------------------------------------------\n// Hash functions\n// https://www.w3.org/TR/sparql11-query/#func-hash\n// ----------------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-md5\n */\nconst MD5 = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.MD5)\n    .onString1Typed(() => str => string(md5(str)))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-sha1\n */\nconst SHA1 = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.SHA1)\n    .onString1Typed(() => str => string(sha1().update(str).digest('hex')))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-sha256\n */\nconst SHA256 = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.SHA256)\n    .onString1Typed(() => str => string(sha256().update(str).digest('hex')))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-sha384\n */\nconst SHA384 = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.SHA384)\n    .onString1Typed(() => str => string(sha384().update(str).digest('hex')))\n    .collect(),\n};\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-sha512\n */\nconst SHA512 = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.SHA512)\n    .onString1Typed(() => str => string(sha512().update(str).digest('hex')))\n    .collect(),\n};\n\n// ----------------------------------------------------------------------------\n// Functions for quoted triples\n// https://w3c.github.io/rdf-star/cg-spec/editors_draft.html#triple-function\n// ----------------------------------------------------------------------------\n\n/**\n * https://w3c.github.io/rdf-star/cg-spec/editors_draft.html#triple-function\n */\nconst triple = {\n  arity: 3,\n  overloads: declare(C.RegularOperator.TRIPLE)\n    .onTerm3(\n      context => (...args) => new E.Quad(\n        DF.quad(args[0].toRDF(), args[1].toRDF(), args[2].toRDF()),\n        context.superTypeProvider,\n      ),\n    )\n    .collect(),\n};\n\n/**\n * https://w3c.github.io/rdf-star/cg-spec/editors_draft.html#subject\n */\nconst subject = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.SUBJECT)\n    .onQuad1(() => quad => quad.subject)\n    .collect(),\n};\n\n/**\n * https://w3c.github.io/rdf-star/cg-spec/editors_draft.html#predicate\n */\nconst predicate = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.PREDICATE)\n    .onQuad1(() => quad => quad.predicate)\n    .collect(),\n};\n\n/**\n * https://w3c.github.io/rdf-star/cg-spec/editors_draft.html#object\n */\nconst object = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.OBJECT)\n    .onQuad1(() => quad => quad.object)\n    .collect(),\n};\n\n/**\n * https://w3c.github.io/rdf-star/cg-spec/editors_draft.html#istriple\n */\nconst istriple = {\n  arity: 1,\n  overloads: declare(C.RegularOperator.IS_TRIPLE)\n    .onTerm1(() => term => bool(term.termType === 'quad'))\n    .collect(),\n};\n\n// End definitions.\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\n\n/**\n * Collect all the definitions from above into an object\n */\nexport const definitions: Record<C.RegularOperator, IOverloadedDefinition> = {\n  // --------------------------------------------------------------------------\n  // Operator Mapping\n  // https://www.w3.org/TR/sparql11-query/#OperatorMapping\n  // --------------------------------------------------------------------------\n  '!': not,\n  uplus: unaryPlus,\n  uminus: unaryMinus,\n  '*': multiplication,\n  '/': division,\n  '+': addition,\n  '-': subtraction,\n  '=': equality,\n  '!=': inequality,\n  '<': lesserThan,\n  '>': greaterThan,\n  '<=': lesserThanEqual,\n  '>=': greaterThanEqual,\n\n  // --------------------------------------------------------------------------\n  // Functions on RDF Terms\n  // https://www.w3.org/TR/sparql11-query/#func-rdfTerms\n  // --------------------------------------------------------------------------\n  isiri: isIRI,\n  isuri: isIRI,\n  isblank: isBlank,\n  isliteral: isLiteral,\n  isnumeric: isNumeric,\n  str: STR,\n  lang,\n  datatype,\n  iri: IRI,\n  uri: IRI,\n  // 'BNODE': BNODE (see special operators),\n  strdt: STRDT,\n  strlang: STRLANG,\n  uuid: UUID,\n  struuid: STRUUID,\n\n  // --------------------------------------------------------------------------\n  // Functions on strings\n  // https://www.w3.org/TR/sparql11-query/#func-forms\n  // --------------------------------------------------------------------------\n  strlen: STRLEN,\n  substr: SUBSTR,\n  ucase: UCASE,\n  lcase: LCASE,\n  strstarts: STRSTARTS,\n  strends: STRENDS,\n  contains: CONTAINS,\n  strbefore: STRBEFORE,\n  strafter: STRAFTER,\n  encode_for_uri: ENCODE_FOR_URI,\n  // 'concat': CONCAT (see special operators)\n  langmatches,\n  regex: REGEX,\n  replace: REPLACE,\n\n  // --------------------------------------------------------------------------\n  // Functions on numerics\n  // https://www.w3.org/TR/sparql11-query/#func-numerics\n  // --------------------------------------------------------------------------\n  abs,\n  round,\n  ceil,\n  floor,\n  rand,\n\n  // --------------------------------------------------------------------------\n  // Functions on Dates and Times\n  // https://www.w3.org/TR/sparql11-query/#func-date-time\n  // --------------------------------------------------------------------------\n  now,\n  year,\n  month,\n  day,\n  hours,\n  minutes,\n  seconds,\n  timezone,\n  tz,\n\n  // --------------------------------------------------------------------------\n  // Hash functions\n  // https://www.w3.org/TR/sparql11-query/#func-hash\n  // --------------------------------------------------------------------------\n  md5: MD5,\n  sha1: SHA1,\n  sha256: SHA256,\n  sha384: SHA384,\n  sha512: SHA512,\n\n  // --------------------------------------------------------------------------\n  // Functions for quoted triples\n  // https://w3c.github.io/rdf-star/cg-spec/editors_draft.html#triple-function\n  // --------------------------------------------------------------------------\n  triple,\n  subject,\n  predicate,\n  object,\n  istriple,\n};\n","import type * as RDF from '@rdfjs/types';\nimport * as uuid from 'uuid';\nimport * as E from '../expressions';\nimport * as C from '../util/Consts';\nimport * as Err from '../util/Errors';\nimport { bool, declare, expressionToVar, langString, string } from './Helpers';\nimport type { EvalContextAsync, EvalContextSync, OverloadTree } from '.';\nimport { regularFunctions, specialFunctions } from '.';\n\ntype Term = E.TermExpression;\ntype PTerm = Promise<E.TermExpression>;\n\n// ----------------------------------------------------------------------------\n// Functional forms\n// ----------------------------------------------------------------------------\n\n// BOUND ----------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-bound\n * This function doesn't require type promotion or subtype-substitution, everything works on TermExpression\n */\nconst bound: ISpecialDefinition = {\n  arity: 1,\n  async applyAsync({ args, mapping }: EvalContextAsync): PTerm {\n    return bound_({ args, mapping });\n  },\n  applySynchronously({ args, mapping }: EvalContextSync): Term {\n    return bound_({ args, mapping });\n  },\n};\n\nfunction bound_({ args, mapping }: { args: E.Expression[]; mapping: RDF.Bindings }): E.BooleanLiteral {\n  const variable = <E.VariableExpression> args[0];\n  if (variable.expressionType !== E.ExpressionType.Variable) {\n    throw new Err.InvalidArgumentTypes(args, C.SpecialOperator.BOUND);\n  }\n  const val = mapping.has(expressionToVar(variable));\n  return bool(val);\n}\n\n// IF -------------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-if\n * This function doesn't require type promotion or subtype-substitution, everything works on TermExpression\n */\nconst ifSPARQL: ISpecialDefinition = {\n  arity: 3,\n  async applyAsync({ args, mapping, evaluate }: EvalContextAsync): PTerm {\n    const valFirst = await evaluate(args[0], mapping);\n    const ebv = valFirst.coerceEBV();\n    return ebv ?\n      evaluate(args[1], mapping) :\n      evaluate(args[2], mapping);\n  },\n  applySynchronously({ args, mapping, evaluate }: EvalContextSync): Term {\n    const valFirst = evaluate(args[0], mapping);\n    const ebv = valFirst.coerceEBV();\n    return ebv ?\n      evaluate(args[1], mapping) :\n      evaluate(args[2], mapping);\n  },\n};\n\n// COALESCE -------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-coalesce\n * This function doesn't require type promotion or subtype-substitution, everything works on TermExpression\n */\nconst coalesce: ISpecialDefinition = {\n  arity: Number.POSITIVE_INFINITY,\n  async applyAsync({ args, mapping, evaluate }: EvalContextAsync): PTerm {\n    const errors: Error[] = [];\n    for (const expr of args) {\n      try {\n        return await evaluate(expr, mapping);\n      } catch (error: unknown) {\n        errors.push(<Error> error);\n      }\n    }\n    throw new Err.CoalesceError(errors);\n  },\n  applySynchronously({ args, mapping, evaluate }: EvalContextSync): Term {\n    const errors: Error[] = [];\n    for (const expr of args) {\n      try {\n        return evaluate(expr, mapping);\n      } catch (error: unknown) {\n        errors.push(<Error> error);\n      }\n    }\n    throw new Err.CoalesceError(errors);\n  },\n};\n\n// Logical-or (||) ------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-logical-or\n * This function doesn't require type promotion or subtype-substitution, everything works on TermExpression\n */\nconst logicalOr: ISpecialDefinition = {\n  arity: 2,\n  async applyAsync({ args, mapping, evaluate }: EvalContextAsync): PTerm {\n    const [ leftExpr, rightExpr ] = args;\n    try {\n      const leftTerm = await evaluate(leftExpr, mapping);\n      const left = leftTerm.coerceEBV();\n      if (left) {\n        return bool(true);\n      }\n      const rightTerm = await evaluate(rightExpr, mapping);\n      const right = rightTerm.coerceEBV();\n      return bool(right);\n    } catch (error: unknown) {\n      const rightErrorTerm = await evaluate(rightExpr, mapping);\n      const rightError = rightErrorTerm.coerceEBV();\n      if (!rightError) {\n        throw error;\n      }\n      return bool(true);\n    }\n  },\n  applySynchronously({ args, mapping, evaluate }: EvalContextSync): Term {\n    const [ leftExpr, rightExpr ] = args;\n    try {\n      const leftTerm = evaluate(leftExpr, mapping);\n      const left = leftTerm.coerceEBV();\n      if (left) {\n        return bool(true);\n      }\n      const rightTerm = evaluate(rightExpr, mapping);\n      const right = rightTerm.coerceEBV();\n      return bool(right);\n    } catch (error: unknown) {\n      const rightErrorTerm = evaluate(rightExpr, mapping);\n      const rightError = rightErrorTerm.coerceEBV();\n      if (!rightError) {\n        throw error;\n      }\n      return bool(true);\n    }\n  },\n};\n\n// Logical-and (&&) -----------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-logical-and\n * This function doesn't require type promotion or subtype-substitution, everything works on TermExpression\n */\nconst logicalAnd: ISpecialDefinition = {\n  arity: 2,\n  async applyAsync({ args, mapping, evaluate }: EvalContextAsync): PTerm {\n    const [ leftExpr, rightExpr ] = args;\n    try {\n      const leftTerm = await evaluate(leftExpr, mapping);\n      const left = leftTerm.coerceEBV();\n      if (!left) {\n        return bool(false);\n      }\n      const rightTerm = await evaluate(rightExpr, mapping);\n      const right = rightTerm.coerceEBV();\n      return bool(right);\n    } catch (error: unknown) {\n      const rightErrorTerm = await evaluate(rightExpr, mapping);\n      const rightError = rightErrorTerm.coerceEBV();\n      if (rightError) {\n        throw error;\n      }\n      return bool(false);\n    }\n  },\n  applySynchronously({ args, mapping, evaluate }: EvalContextSync): Term {\n    const [ leftExpr, rightExpr ] = args;\n    try {\n      const leftTerm = evaluate(leftExpr, mapping);\n      const left = leftTerm.coerceEBV();\n      if (!left) {\n        return bool(false);\n      }\n      const rightTerm = evaluate(rightExpr, mapping);\n      const right = rightTerm.coerceEBV();\n      return bool(right);\n    } catch (error: unknown) {\n      const rightErrorTerm = evaluate(rightExpr, mapping);\n      const rightError = rightErrorTerm.coerceEBV();\n      if (rightError) {\n        throw error;\n      }\n      return bool(false);\n    }\n  },\n};\n\n// SameTerm -------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-sameTerm\n * This function doesn't require type promotion or subtype-substitution, everything works on TermExpression\n */\nconst sameTerm: ISpecialDefinition = {\n  arity: 2,\n  async applyAsync({ args, mapping, evaluate }: EvalContextAsync): PTerm {\n    const [ leftExpr, rightExpr ] = args.map(arg => evaluate(arg, mapping));\n    const [ left, right ] = await Promise.all([ leftExpr, rightExpr ]);\n    return bool(left.toRDF().equals(right.toRDF()));\n  },\n  applySynchronously({ args, mapping, evaluate }: EvalContextSync): Term {\n    const [ left, right ] = args.map(arg => evaluate(arg, mapping));\n    return bool(left.toRDF().equals(right.toRDF()));\n  },\n};\n\n// IN -------------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-in\n * This function doesn't require type promotion or subtype-substitution, everything works on TermExpression\n */\nconst inSPARQL: ISpecialDefinition = {\n  arity: Number.POSITIVE_INFINITY,\n  checkArity(args: E.Expression[]) {\n    return args.length > 0;\n  },\n  async applyAsync(context: EvalContextAsync): PTerm {\n    const { args, mapping, evaluate } = context;\n    const [ leftExpr, ...remaining ] = args;\n    const left = await evaluate(leftExpr, mapping);\n    return inRecursiveAsync(left, { ...context, args: remaining }, []);\n  },\n  applySynchronously(context: EvalContextSync): Term {\n    const { args, mapping, evaluate } = context;\n    const [ leftExpr, ...remaining ] = args;\n    const left = evaluate(leftExpr, mapping);\n    return inRecursiveSync(left, { ...context, args: remaining }, []);\n  },\n};\n\nasync function inRecursiveAsync(\n  needle: Term,\n  context: EvalContextAsync,\n  results: (Error | false)[],\n): PTerm {\n  const { args, mapping, evaluate } = context;\n  if (args.length === 0) {\n    const noErrors = results.every(val => !val);\n    return noErrors ? bool(false) : Promise.reject(new Err.InError(results));\n  }\n\n  try {\n    const nextExpression = args.shift();\n    // We know this will not be undefined because we check args.length === 0\n    const next = await evaluate(nextExpression!, mapping);\n    const isEqual = regularFunctions[C.RegularOperator.EQUAL];\n    if ((<E.BooleanLiteral> isEqual.apply([ needle, next ], context)).typedValue) {\n      return bool(true);\n    }\n    return inRecursiveAsync(needle, context, [ ...results, false ]);\n  } catch (error: unknown) {\n    return inRecursiveAsync(needle, context, [ ...results, <Error> error ]);\n  }\n}\n\nfunction inRecursiveSync(\n  needle: Term,\n  context: EvalContextSync,\n  results: (Error | false)[],\n): Term {\n  const { args, mapping, evaluate } = context;\n  if (args.length === 0) {\n    const noErrors = results.every(val => !val);\n    if (noErrors) {\n      return bool(false);\n    }\n    throw new Err.InError(results);\n  }\n\n  try {\n    const nextExpression = args.shift();\n    // We know this will not be undefined because we check args.length === 0\n    const next = evaluate(nextExpression!, mapping);\n    const isEqual = regularFunctions[C.RegularOperator.EQUAL];\n    if ((<E.BooleanLiteral> isEqual.apply([ needle, next ], context)).typedValue) {\n      return bool(true);\n    }\n    return inRecursiveSync(needle, context, [ ...results, false ]);\n  } catch (error: unknown) {\n    return inRecursiveSync(needle, context, [ ...results, <Error> error ]);\n  }\n}\n\n// NOT IN ---------------------------------------------------------------------\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-not-in\n * This function doesn't require type promotion or subtype-substitution, everything works on TermExpression\n */\nconst notInSPARQL: ISpecialDefinition = {\n  arity: Number.POSITIVE_INFINITY,\n  checkArity(args: E.Expression[]) {\n    return args.length > 0;\n  },\n  async applyAsync(context: EvalContextAsync): PTerm {\n    const _in = specialFunctions[C.SpecialOperator.IN];\n    const isIn = await _in.applyAsync(context);\n    return bool(!(<E.BooleanLiteral> isIn).typedValue);\n  },\n  applySynchronously(context: EvalContextSync): Term {\n    const _in = specialFunctions[C.SpecialOperator.IN];\n    const isIn = _in.applySynchronously(context);\n    return bool(!(<E.BooleanLiteral> isIn).typedValue);\n  },\n};\n\n// ----------------------------------------------------------------------------\n// Annoying functions\n// ----------------------------------------------------------------------------\n\n// CONCAT ---------------------------------------------------------------------\n\n/**\n * This OverloadTree with the constant function will handle both type promotion and subtype-substitution\n */\nconst concatTree: OverloadTree = declare(C.SpecialOperator.CONCAT).onStringly1(() => expr => expr)\n  .collect();\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-concat\n */\nconst concat: ISpecialDefinition = {\n  arity: Number.POSITIVE_INFINITY,\n  async applyAsync(context: EvalContextAsync): PTerm {\n    const { args, mapping, evaluate, functionArgumentsCache, superTypeProvider } = context;\n    const pLits: Promise<E.Literal<string>>[] = args\n      .map(async expr => evaluate(expr, mapping))\n      .map(async(pTerm) => {\n        const operation = concatTree.search([ await pTerm ], superTypeProvider, functionArgumentsCache);\n        if (!operation) {\n          throw new Err.InvalidArgumentTypes(args, C.SpecialOperator.CONCAT);\n        }\n        return <E.Literal<string>> operation(context)([ await pTerm ]);\n      });\n    const lits = await Promise.all(pLits);\n    const strings = lits.map(lit => lit.typedValue);\n    const joined = strings.join('');\n    const lang = langAllEqual(lits) ? lits[0].language : undefined;\n    return lang ? langString(joined, lang) : string(joined);\n  },\n\n  applySynchronously(context: EvalContextSync): Term {\n    const { args, mapping, evaluate, superTypeProvider, functionArgumentsCache } = context;\n    const lits = args\n      .map(expr => evaluate(expr, mapping))\n      .map((pTerm) => {\n        const operation = concatTree.search([ pTerm ], superTypeProvider, functionArgumentsCache);\n        if (!operation) {\n          throw new Err.InvalidArgumentTypes(args, C.SpecialOperator.CONCAT);\n        }\n        return <E.Literal<string>> operation(context)([ pTerm ]);\n      });\n    const strings = lits.map(lit => lit.typedValue);\n    const joined = strings.join('');\n    const lang = langAllEqual(lits) ? lits[0].language : undefined;\n    return lang ? langString(joined, lang) : string(joined);\n  },\n};\n\nfunction langAllEqual(lits: E.Literal<string>[]): boolean {\n  return lits.length > 0 && lits.every(lit => lit.language === lits[0].language);\n}\n\n// ----------------------------------------------------------------------------\n// Context dependant functions\n// ----------------------------------------------------------------------------\n\n// BNODE ---------------------------------------------------------------------\n\n/**\n * This OverloadTree with the constant function will handle both type promotion and subtype-substitution\n */\nconst bnodeTree = declare(C.SpecialOperator.BNODE).onString1(() => arg => arg).collect();\n\n/**\n * https://www.w3.org/TR/sparql11-query/#func-bnode\n * id has to be distinct over all id's in dataset\n */\nconst BNODE: ISpecialDefinition = {\n  arity: Number.POSITIVE_INFINITY,\n  checkArity(args: E.Expression[]) {\n    return args.length === 0 || args.length === 1;\n  },\n  async applyAsync(context: EvalContextAsync): PTerm {\n    const { args, mapping, evaluate, superTypeProvider, functionArgumentsCache } = context;\n    const input = args.length === 1 ?\n      await evaluate(args[0], mapping) :\n      undefined;\n\n    let strInput: string | undefined;\n    if (input) {\n      const operation = bnodeTree.search([ input ], superTypeProvider, functionArgumentsCache);\n      if (!operation) {\n        throw new Err.InvalidArgumentTypes(args, C.SpecialOperator.BNODE);\n      }\n      strInput = operation(context)([ input ]).str();\n    }\n\n    if (context.bnode) {\n      const bnode = await context.bnode(strInput);\n      return new E.BlankNode(bnode);\n    }\n\n    return BNODE_(strInput);\n  },\n  applySynchronously(context: EvalContextSync): Term {\n    const { args, mapping, evaluate, superTypeProvider, functionArgumentsCache } = context;\n    const input = args.length === 1 ?\n      evaluate(args[0], mapping) :\n      undefined;\n\n    let strInput: string | undefined;\n    if (input) {\n      const operation = bnodeTree.search([ input ], superTypeProvider, functionArgumentsCache);\n      if (!operation) {\n        throw new Err.InvalidArgumentTypes(args, C.SpecialOperator.BNODE);\n      }\n      strInput = operation(context)([ input ]).str();\n    }\n\n    if (context.bnode) {\n      const bnode = context.bnode(strInput);\n      return new E.BlankNode(bnode);\n    }\n\n    return BNODE_(strInput);\n  },\n};\n\nfunction BNODE_(input?: string): E.BlankNode {\n  return new E.BlankNode(input ?? uuid.v4());\n}\n\n// ----------------------------------------------------------------------------\n// Wrap these declarations into functions\n// ----------------------------------------------------------------------------\n\nexport interface ISpecialDefinition {\n  arity: number;\n  applyAsync: E.SpecialApplicationAsync;\n  applySynchronously: E.SpecialApplicationSync;\n  checkArity?: (args: E.Expression[]) => boolean;\n}\n\nexport const specialDefinitions: Record<C.SpecialOperator, ISpecialDefinition> = {\n  // --------------------------------------------------------------------------\n  // Functional Forms\n  // https://www.w3.org/TR/sparql11-query/#func-forms\n  // --------------------------------------------------------------------------\n  bound,\n  if: ifSPARQL,\n  coalesce,\n  '&&': logicalAnd,\n  '||': logicalOr,\n  sameterm: sameTerm,\n  in: inSPARQL,\n  notin: notInSPARQL,\n\n  // Annoying functions\n  concat,\n\n  // Context dependent functions\n  bnode: BNODE,\n};\n","// https://www.w3.org/TR/xpath-functions/#func-matches\n// https://www.w3.org/TR/xpath-functions/#flags\nexport function matches(text: string, pattern: string, flags?: string): boolean {\n  // TODO: Only flags 'i' and 'm' match between XPath and JS.\n  // 's', 'x', 'q', would need proper implementation.\n  const reg = new RegExp(pattern, flags);\n  return reg.test(text);\n}\n\n// TODO: Fix flags\n// https://www.w3.org/TR/xpath-functions/#func-replace\nexport function replace(arg: string, pattern: string, replacement: string, flags?: string): string {\n  let reg = new RegExp(pattern, flags);\n  if (!reg.global) {\n    const flags_ = flags ?? '';\n    reg = new RegExp(pattern, `${flags_}g`);\n  }\n  return arg.replace(reg, replacement);\n}\n\n// TODO: Not an XPath function\n// TODO: Publish as package\n// https://www.ietf.org/rfc/rfc4647.txt\n// https://www.w3.org/TR/sparql11-query/#func-langMatches\nexport function langMatches(tag: string, range: string): boolean {\n  const langTags = tag.split('-');\n  const rangeTags = range.split('-');\n\n  if (!_matchLangTag(rangeTags[0], langTags[0]) &&\n    !_isWildCard(langTags[0])) {\n    return false;\n  }\n\n  let lI = 1;\n  let rI = 1;\n  while (rI < rangeTags.length) {\n    if (_isWildCard(rangeTags[rI])) {\n      rI++;\n      continue;\n    }\n    if (lI === langTags.length) {\n      return false;\n    }\n    if (_matchLangTag(rangeTags[rI], langTags[lI])) {\n      lI++;\n      rI++;\n      continue;\n    }\n    if (langTags[lI].length === 1) {\n      return false;\n    }\n    lI++;\n  }\n  return true;\n}\n\nfunction _isWildCard(tag: string): boolean {\n  return tag === '*';\n}\n\nfunction _matchLangTag(left: string, right: string): boolean {\n  const matchInitial = new RegExp(`/${left}/`, 'iu');\n  return matchInitial.test(`/${right}/`);\n}\n","import { Algebra as Alg } from 'sparqlalgebrajs';\nimport type { AsyncExtensionFunction, AsyncExtensionFunctionCreator } from '../evaluators/AsyncEvaluator';\nimport type { ICompleteSharedContext } from '../evaluators/evaluatorHelpers/BaseExpressionEvaluator';\nimport type { SyncExtensionFunction, SyncExtensionFunctionCreator } from '../evaluators/SyncEvaluator';\nimport * as E from '../expressions';\nimport type { AsyncExtensionApplication, SimpleApplication } from '../expressions';\nimport { namedFunctions, regularFunctions, specialFunctions } from '../functions';\nimport * as C from '../util/Consts';\nimport * as Err from '../util/Errors';\nimport { ExtensionFunctionError } from '../util/Errors';\nimport type { ITermTransformer } from './TermTransformer';\nimport { TermTransformer } from './TermTransformer';\n\ntype FunctionCreatorConfig = { type: 'sync'; creator: SyncExtensionFunctionCreator } |\n{ type: 'async'; creator: AsyncExtensionFunctionCreator };\n\ntype AlgebraTransformConfig = ICompleteSharedContext & FunctionCreatorConfig;\n\nexport interface IAlgebraTransformer extends ITermTransformer {\n  transformAlgebra: (expr: Alg.Expression) => E.Expression;\n}\n\nexport class AlgebraTransformer extends TermTransformer implements IAlgebraTransformer {\n  private readonly creatorConfig: FunctionCreatorConfig;\n  public constructor(protected readonly algebraConfig: AlgebraTransformConfig) {\n    super(algebraConfig.superTypeProvider);\n    this.creatorConfig = <FunctionCreatorConfig> { type: algebraConfig.type, creator: algebraConfig.creator };\n  }\n\n  public transformAlgebra(expr: Alg.Expression): E.Expression {\n    const types = Alg.expressionTypes;\n\n    switch (expr.expressionType) {\n      case types.TERM:\n        return this.transformTerm(expr);\n      case types.OPERATOR:\n        return this.transformOperator(expr);\n      case types.NAMED:\n        return this.transformNamed(expr);\n      case types.EXISTENCE:\n        return AlgebraTransformer.transformExistence(expr);\n      case types.AGGREGATE:\n        return AlgebraTransformer.transformAggregate(expr);\n      case types.WILDCARD:\n        return AlgebraTransformer.transformWildcard(expr);\n    }\n  }\n\n  private static transformWildcard(term: Alg.WildcardExpression): E.Expression {\n    return new E.NamedNode(term.wildcard.value);\n  }\n\n  private transformOperator(expr: Alg.OperatorExpression): E.OperatorExpression | E.SpecialOperatorExpression {\n    const operator = expr.operator.toLowerCase();\n    if (C.SpecialOperators.has(operator)) {\n      const specialOp = <C.SpecialOperator>operator;\n      const specialArgs = expr.args.map(arg => this.transformAlgebra(arg));\n      const specialFunc = specialFunctions[specialOp];\n      if (!specialFunc.checkArity(specialArgs)) {\n        throw new Err.InvalidArity(specialArgs, specialOp);\n      }\n      return new E.SpecialOperator(specialArgs, specialFunc.applyAsync, specialFunc.applySynchronously);\n    }\n    if (!C.Operators.has(operator)) {\n      throw new Err.UnknownOperator(expr.operator);\n    }\n    const regularOp = <C.RegularOperator>operator;\n    const regularArgs = expr.args.map(arg => this.transformAlgebra(arg));\n    const regularFunc = regularFunctions[regularOp];\n    if (!AlgebraTransformer.hasCorrectArity(regularArgs, regularFunc.arity)) {\n      throw new Err.InvalidArity(regularArgs, regularOp);\n    }\n    return new E.Operator(regularArgs, args => regularFunc.apply(args, this.algebraConfig));\n  }\n\n  private wrapSyncFunction(func: SyncExtensionFunction, name: string): SimpleApplication {\n    return (args) => {\n      try {\n        const res = func(args.map(arg => arg.toRDF()));\n        return this.transformRDFTermUnsafe(res);\n      } catch (error: unknown) {\n        throw new ExtensionFunctionError(name, error);\n      }\n    };\n  }\n\n  private wrapAsyncFunction(func: AsyncExtensionFunction, name: string): AsyncExtensionApplication {\n    return async(args) => {\n      try {\n        const res = await func(args.map(arg => arg.toRDF()));\n        return this.transformRDFTermUnsafe(res);\n      } catch (error: unknown) {\n        throw new ExtensionFunctionError(name, error);\n      }\n    };\n  }\n\n  // TODO: Support passing functions to override default behaviour;\n  private transformNamed(expr: Alg.NamedExpression):\n  E.NamedExpression | E.AsyncExtensionExpression | E.SyncExtensionExpression {\n    const funcName = expr.name.value;\n    const namedArgs = expr.args.map(arg => this.transformAlgebra(arg));\n    if (C.NamedOperators.has(<C.NamedOperator>funcName)) {\n      // Return a basic named expression\n      const op = <C.NamedOperator>expr.name.value;\n      const namedFunc = namedFunctions[op];\n      return new E.Named(expr.name, namedArgs, args => namedFunc.apply(args, this.algebraConfig));\n    }\n    if (this.creatorConfig.type === 'sync') {\n      // Expression might be extension function, check this for the sync\n      const syncExtensionFunc = this.creatorConfig.creator(expr.name);\n      if (syncExtensionFunc) {\n        const simpleAppl = this.wrapSyncFunction(syncExtensionFunc, expr.name.value);\n        return new E.SyncExtension(expr.name, namedArgs, simpleAppl);\n      }\n    } else {\n      // The expression might be an extension function, check this for the async case\n      const asyncExtensionFunc = this.creatorConfig.creator(expr.name);\n      if (asyncExtensionFunc) {\n        const asyncAppl = this.wrapAsyncFunction(asyncExtensionFunc, expr.name.value);\n        return new E.AsyncExtension(expr.name, namedArgs, asyncAppl);\n      }\n    }\n    throw new Err.UnknownNamedOperator(expr.name.value);\n  }\n\n  private static hasCorrectArity(args: E.Expression[], arity: number | number[]): boolean {\n    // If the function has overloaded arity, the actual arity needs to be present.\n    if (Array.isArray(arity)) {\n      return arity.includes(args.length);\n    }\n\n    return args.length === arity;\n  }\n\n  public static transformAggregate(expr: Alg.AggregateExpression): E.Aggregate {\n    const name = expr.aggregator;\n    return new E.Aggregate(name, expr);\n  }\n\n  public static transformExistence(expr: Alg.ExistenceExpression): E.Existence {\n    return new E.Existence(expr);\n  }\n}\n","import type * as RDF from '@rdfjs/types';\nimport * as RDFString from 'rdf-string';\nimport type { Algebra as Alg } from 'sparqlalgebrajs';\nimport { Algebra } from 'sparqlalgebrajs';\nimport * as E from '../expressions';\nimport { TypeURL } from '../util/Consts';\nimport * as Err from '../util/Errors';\nimport { isExpressionError } from '../util/Errors';\nimport {\n  parseDate,\n  parseDateTime,\n  parseDayTimeDuration,\n  parseDuration,\n  parseTime,\n  parseYearMonthDuration,\n} from '../util/Parsing';\nimport * as P from '../util/Parsing';\nimport { getSuperTypeDict } from '../util/TypeHandling';\nimport type { ISuperTypeProvider, GeneralSuperTypeDict } from '../util/TypeHandling';\n\nexport interface ITermTransformer {\n  transformRDFTermUnsafe: (term: RDF.Term) => E.Term;\n  transformLiteral: (lit: RDF.Literal) => E.Literal<any>;\n}\n\nexport class TermTransformer implements ITermTransformer {\n  public constructor(protected readonly superTypeProvider: ISuperTypeProvider) {}\n\n  /**\n   * Transforms an RDF term to the internal representation of a term,\n   * assuming it is not a variable, which would be an expression (internally).\n   *\n   * @param term RDF term to transform into internal representation of a term\n   */\n  public transformRDFTermUnsafe(term: RDF.Term): E.Term {\n    return <E.Term> this.transformTerm({\n      term,\n      type: Algebra.types.EXPRESSION,\n      expressionType: Algebra.expressionTypes.TERM,\n    });\n  }\n\n  protected transformTerm(term: Alg.TermExpression): E.Expression {\n    if (!term.term) {\n      throw new Err.InvalidExpression(term);\n    }\n\n    switch (term.term.termType) {\n      case 'Variable':\n        return new E.Variable(RDFString.termToString(term.term));\n      case 'Literal':\n        return this.transformLiteral(term.term);\n      case 'NamedNode':\n        return new E.NamedNode(term.term.value);\n      case 'BlankNode':\n        return new E.BlankNode(term.term.value);\n      case 'Quad':\n        return new E.Quad(term.term, this.superTypeProvider);\n      default:\n        throw new Err.InvalidTermType(term);\n    }\n  }\n\n  /**\n   * @param lit the rdf literal we want to transform to an internal Literal expression.\n   */\n  public transformLiteral(lit: RDF.Literal): E.Literal<any> {\n    // Both here and within the switch we transform to LangStringLiteral or StringLiteral.\n    // We do this when we detect a simple literal being used.\n    // Original issue regarding this behaviour: https://github.com/w3c/sparql-12/issues/112\n    if (!lit.datatype || [ null, undefined, '' ].includes(lit.datatype.value)) {\n      return lit.language ?\n        new E.LangStringLiteral(lit.value, lit.language) :\n        new E.StringLiteral(lit.value);\n    }\n\n    const dataType = lit.datatype.value;\n    const superTypeDict: GeneralSuperTypeDict = getSuperTypeDict(dataType, this.superTypeProvider);\n\n    // The order of checking matters! Check most specific types first!\n    try {\n      if (TypeURL.XSD_STRING in superTypeDict) {\n        return new E.StringLiteral(lit.value, dataType);\n      }\n      if (TypeURL.RDF_LANG_STRING in superTypeDict) {\n        return new E.LangStringLiteral(lit.value, lit.language);\n      }\n      if (TypeURL.XSD_YEAR_MONTH_DURATION in superTypeDict) {\n        return new E.YearMonthDurationLiteral(parseYearMonthDuration(lit.value), lit.value, dataType);\n      }\n      if (TypeURL.XSD_DAY_TIME_DURATION in superTypeDict) {\n        return new E.DayTimeDurationLiteral(parseDayTimeDuration(lit.value), lit.value, dataType);\n      }\n      if (TypeURL.XSD_DURATION in superTypeDict) {\n        return new E.DurationLiteral(parseDuration(lit.value), lit.value, dataType);\n      }\n      if (TypeURL.XSD_DATE_TIME in superTypeDict) {\n        const dateVal: Date = new Date(lit.value);\n        if (Number.isNaN(dateVal.getTime())) {\n          return new E.NonLexicalLiteral(undefined, dataType, this.superTypeProvider, lit.value);\n        }\n        return new E.DateTimeLiteral(parseDateTime(lit.value), lit.value, dataType);\n      }\n      if (TypeURL.XSD_DATE in superTypeDict) {\n        return new E.DateLiteral(parseDate(lit.value), lit.value, dataType);\n      }\n      if (TypeURL.XSD_TIME in superTypeDict) {\n        return new E.TimeLiteral(parseTime(lit.value), lit.value, dataType);\n      }\n      if (TypeURL.XSD_BOOLEAN in superTypeDict) {\n        if (lit.value !== 'true' && lit.value !== 'false' && lit.value !== '1' && lit.value !== '0') {\n          return new E.NonLexicalLiteral(undefined, dataType, this.superTypeProvider, lit.value);\n        }\n        return new E.BooleanLiteral(lit.value === 'true' || lit.value === '1', lit.value);\n      }\n      if (TypeURL.XSD_DECIMAL in superTypeDict) {\n        const intVal: number | undefined = P.parseXSDDecimal(lit.value);\n        if (intVal === undefined) {\n          return new E.NonLexicalLiteral(undefined, dataType, this.superTypeProvider, lit.value);\n        }\n        if (TypeURL.XSD_INTEGER in superTypeDict) {\n          return new E.IntegerLiteral(intVal, dataType, lit.value);\n        }\n        // If type is not an integer it's just a decimal.\n        return new E.DecimalLiteral(intVal, dataType, lit.value);\n      }\n      const isFloat = TypeURL.XSD_FLOAT in superTypeDict;\n      const isDouble = TypeURL.XSD_DOUBLE in superTypeDict;\n      if (isFloat || isDouble) {\n        const doubleVal: number | undefined = P.parseXSDFloat(lit.value);\n        if (doubleVal === undefined) {\n          return new E.NonLexicalLiteral(undefined, dataType, this.superTypeProvider, lit.value);\n        }\n        if (isFloat) {\n          return new E.FloatLiteral(doubleVal, dataType, lit.value);\n        }\n        return new E.DoubleLiteral(doubleVal, dataType, lit.value);\n      }\n      return new E.Literal<string>(lit.value, dataType, lit.value);\n    } catch (error: unknown) {\n      if (error instanceof Error && isExpressionError(error)) {\n        return new E.NonLexicalLiteral(undefined, dataType, this.superTypeProvider, lit.value);\n      }\n      throw error;\n    }\n  }\n}\n","export type KnownLiteralTypes = TypeAlias | TypeURL;\n\nexport enum TypeAlias {\n  // Numeric is everything defined in https://www.w3.org/TR/sparql11-query/#operandDataTypes\n  SPARQL_NUMERIC = 'SPARQL_NUMERIC',\n  /**\n   * Stringly is everything defined in https://www.w3.org/TR/sparql11-query/#func-strings\n   * In other words it is a simple literal, a plain literal with language tag, or a literal with datatype xsd:string\n   * In other words, since expression-evaluator transforms a simple literal to xsd_string.\n   * It is RDF_LANG_STRING or XSD_STRING.\n   * Reasons for this are mentioned here: w3c/sparql-12#112\n   */\n  SPARQL_STRINGLY = 'SPARQL_STRINGLY',\n}\n\nexport enum TypeURL {\n  XSD_ANY_URI = 'http://www.w3.org/2001/XMLSchema#anyURI',\n  XSD_STRING = 'http://www.w3.org/2001/XMLSchema#string',\n  RDF_LANG_STRING = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#langString',\n\n  XSD_BOOLEAN = 'http://www.w3.org/2001/XMLSchema#boolean',\n\n  XSD_DATE_TIME = 'http://www.w3.org/2001/XMLSchema#dateTime',\n  XSD_DATE_TIME_STAMP = 'http://www.w3.org/2001/XMLSchema#dateTimeStamp',\n  XSD_DATE = 'http://www.w3.org/2001/XMLSchema#date',\n\n  XSD_G_MONTH = 'http://www.w3.org/2001/XMLSchema#gMonth',\n  XSD_G_MONTHDAY = 'http://www.w3.org/2001/XMLSchema#gMonthDay',\n  XSD_G_YEAR = 'http://www.w3.org/2001/XMLSchema#gYear',\n  XSD_G_YEAR_MONTH = 'http://www.w3.org/2001/XMLSchema#gYearMonth',\n  XSD_TIME = 'http://www.w3.org/2001/XMLSchema#time',\n  XSD_G_DAY = 'http://www.w3.org/2001/XMLSchema#gDay',\n\n  // Numeric types\n  XSD_DECIMAL = 'http://www.w3.org/2001/XMLSchema#decimal',\n  XSD_FLOAT = 'http://www.w3.org/2001/XMLSchema#float',\n  XSD_DOUBLE = 'http://www.w3.org/2001/XMLSchema#double',\n\n  // Derived numeric types\n  XSD_INTEGER = 'http://www.w3.org/2001/XMLSchema#integer',\n\n  XSD_NON_POSITIVE_INTEGER = 'http://www.w3.org/2001/XMLSchema#nonPositiveInteger',\n  XSD_NEGATIVE_INTEGER = 'http://www.w3.org/2001/XMLSchema#negativeInteger',\n\n  XSD_LONG = 'http://www.w3.org/2001/XMLSchema#long',\n  XSD_INT = 'http://www.w3.org/2001/XMLSchema#int',\n  XSD_SHORT = 'http://www.w3.org/2001/XMLSchema#short',\n  XSD_BYTE = 'http://www.w3.org/2001/XMLSchema#byte',\n\n  XSD_NON_NEGATIVE_INTEGER = 'http://www.w3.org/2001/XMLSchema#nonNegativeInteger',\n  XSD_POSITIVE_INTEGER = 'http://www.w3.org/2001/XMLSchema#positiveInteger',\n  XSD_UNSIGNED_LONG = 'http://www.w3.org/2001/XMLSchema#unsignedLong',\n  XSD_UNSIGNED_INT = 'http://www.w3.org/2001/XMLSchema#unsignedInt',\n  XSD_UNSIGNED_SHORT = 'http://www.w3.org/2001/XMLSchema#unsignedShort',\n  XSD_UNSIGNED_BYTE = 'http://www.w3.org/2001/XMLSchema#unsignedByte',\n\n  // Derived String Type\n  XSD_NORMALIZED_STRING = 'http://www.w3.org/2001/XMLSchema#normalizedString',\n  XSD_TOKEN = 'http://www.w3.org/2001/XMLSchema#token',\n  XSD_LANGUAGE = 'http://www.w3.org/2001/XMLSchema#language',\n  XSD_NM_TOKEN = 'http://www.w3.org/2001/XMLSchema#NMTOKEN',\n\n  XSD_NAME = 'http://www.w3.org/2001/XMLSchema#name',\n  XSD_NC_NAME = 'http://www.w3.org/2001/XMLSchema#NCName',\n  XSD_ENTITY = 'http://www.w3.org/2001/XMLSchema#ENTITY',\n  XSD_ID = 'http://www.w3.org/2001/XMLSchema#ID',\n  XSD_ID_REF = 'http://www.w3.org/2001/XMLSchema#IDREF',\n\n  // Other types\n  XSD_DURATION = 'http://www.w3.org/2001/XMLSchema#duration',\n  XSD_YEAR_MONTH_DURATION = 'http://www.w3.org/2001/XMLSchema#yearMonthDuration',\n  XSD_DAY_TIME_DURATION = 'http://www.w3.org/2001/XMLSchema#dayTimeDuration',\n}\n\n// ----------------------------------------------------------------------------\n// Operators\n// ----------------------------------------------------------------------------\n\nexport type Operator = RegularOperator | SpecialOperator;\n\n// TODO: Remove unneeded double typing\nexport enum RegularOperator {\n  // Operator mapping\n  // https://www.w3.org/TR/sparql11-query/#OperatorMapping\n  NOT = '!',\n  UMINUS = 'uminus',\n  UPLUS = 'uplus',\n  // LOGICAL_AND // See SpecialOperators\n  // LOGICAL_OR  // See SpecialOperators\n\n  EQUAL = '=',\n  NOT_EQUAL = '!=',\n  LT = '<',\n  GT = '>',\n  LTE = '<=',\n  GTE = '>=',\n\n  MULTIPLICATION = '*',\n  DIVISION = '/',\n  ADDITION = '+',\n  SUBTRACTION = '-',\n\n  // Functional Forms\n  // https://www.w3.org/TR/sparql11-query/#func-forms\n  // See SpecialOperators\n\n  // Functions on RDF Terms\n  // https://www.w3.org/TR/sparql11-query/#func-rdfTerms\n  IS_IRI = 'isiri',\n  IS_URI = 'isuri',\n  IS_BLANK = 'isblank',\n  IS_LITERAL = 'isliteral',\n  IS_NUMERIC = 'isnumeric',\n  STR = 'str',\n  LANG = 'lang',\n  DATATYPE = 'datatype',\n  IRI = 'iri',\n  URI = 'uri',\n  // BNODE = 'BNODE', (see special operators)\n  STRDT = 'strdt',\n  STRLANG = 'strlang',\n  UUID = 'uuid',\n  STRUUID = 'struuid',\n\n  // Functions on strings\n  // https://www.w3.org/TR/sparql11-query/#func-strings\n  STRLEN = 'strlen',\n  SUBSTR = 'substr',\n  UCASE = 'ucase',\n  LCASE = 'lcase',\n  STRSTARTS = 'strstarts',\n  STRENDS = 'strends',\n  CONTAINS = 'contains',\n  STRBEFORE = 'strbefore',\n  STRAFTER = 'strafter',\n  ENCODE_FOR_URI = 'encode_for_uri',\n  // CONCAT = 'concat' (see special operators)\n  LANG_MATCHES = 'langmatches',\n  REGEX = 'regex',\n  REPLACE = 'replace',\n\n  // Functions on numerics\n  // https://www.w3.org/TR/sparql11-query/#func-numerics\n  ABS = 'abs',\n  ROUND = 'round',\n  CEIL = 'ceil',\n  FLOOR = 'floor',\n  RAND = 'rand',\n\n  // Functions on Dates and Times\n  // https://www.w3.org/TR/sparql11-query/#func-date-time\n  NOW = 'now',\n  YEAR = 'year',\n  MONTH = 'month',\n  DAY = 'day',\n  HOURS = 'hours',\n  MINUTES = 'minutes',\n  SECONDS = 'seconds',\n  TIMEZONE = 'timezone',\n  TZ = 'tz',\n  // Hash functions\n  // https://www.w3.org/TR/sparql11-query/#func-hash\n  MD5 = 'md5',\n  SHA1 = 'sha1',\n  SHA256 = 'sha256',\n  SHA384 = 'sha384',\n  SHA512 = 'sha512',\n\n  // XPath Constructor functions\n  // https://www.w3.org/TR/sparql11-query/#FunctionMapping\n  // See Named Operators\n\n  // Functions for quoted triples\n  // https://w3c.github.io/rdf-star/cg-spec/editors_draft.html#triple-function\n  TRIPLE = 'triple',\n  SUBJECT = 'subject',\n  PREDICATE = 'predicate',\n  OBJECT = 'object',\n  IS_TRIPLE = 'istriple',\n}\n\nexport enum SpecialOperator {\n  // Functional Forms\n  // https://www.w3.org/TR/sparql11-query/#func-forms\n  BOUND = 'bound',\n  IF = 'if',\n  COALESCE = 'coalesce',\n  // EXISTENCE = 'existence',\n  LOGICAL_OR = '||',\n  LOGICAL_AND = '&&',\n  // EQUAL = '=', // See RegularOperators\n  SAME_TERM = 'sameterm',\n  IN = 'in',\n  NOT_IN = 'notin',\n\n  // Annoying functions - Has variable arity\n  CONCAT = 'concat',\n\n  // Context dependant functions\n  BNODE = 'bnode',\n}\n\nexport const RegularOperators: Set<string> = new Set(Object.values(RegularOperator));\nexport const SpecialOperators: Set<string> = new Set(Object.values(SpecialOperator));\nexport const Operators = new Set([ ...RegularOperators, ...SpecialOperators ]);\n\nexport enum SetFunction {\n  COUNT = 'count',\n  SUM = 'sum',\n  MIN = 'min',\n  MAX = 'max',\n  AVG = 'avg',\n  GROUP_CONCAT = 'group_concat',\n  SAMPLE = 'sample',\n}\nexport const SetFunctions = new Set(Object.values(SetFunction));\n\nexport type NamedOperator =\n  // XPath Constructor functions\n  // https://www.w3.org/TR/sparql11-query/#FunctionMapping\n  TypeURL.XSD_STRING\n  | TypeURL.XSD_FLOAT\n  | TypeURL.XSD_DOUBLE\n  | TypeURL.XSD_DECIMAL\n  | TypeURL.XSD_INTEGER\n  | TypeURL.XSD_DATE_TIME\n  | TypeURL.XSD_DATE\n  | TypeURL.XSD_BOOLEAN\n  | TypeURL.XSD_TIME\n  | TypeURL.XSD_DURATION\n  | TypeURL.XSD_DAY_TIME_DURATION\n  | TypeURL.XSD_YEAR_MONTH_DURATION;\n\nexport const NamedOperators = new Set([\n  TypeURL.XSD_STRING,\n  TypeURL.XSD_FLOAT,\n  TypeURL.XSD_DOUBLE,\n  TypeURL.XSD_DECIMAL,\n  TypeURL.XSD_INTEGER,\n  TypeURL.XSD_DATE_TIME,\n  TypeURL.XSD_DATE,\n  TypeURL.XSD_BOOLEAN,\n  TypeURL.XSD_TIME,\n  TypeURL.XSD_DURATION,\n  TypeURL.XSD_DAY_TIME_DURATION,\n  TypeURL.XSD_YEAR_MONTH_DURATION,\n]);\n","export interface ITimeZoneRepresentation {\n  // https://www.w3.org/TR/xpath-functions/#func-implicit-timezone\n  // Type is a dayTimeDuration.\n  // We use a separate dataType since it makes TS type modifications and JS object copying easier.\n  zoneHours: number;\n  zoneMinutes: number;\n}\n\nexport interface IDateRepresentation extends Partial<ITimeZoneRepresentation> {\n  year: number;\n  month: number;\n  day: number;\n}\n\nexport interface ITimeRepresentation extends Partial<ITimeZoneRepresentation> {\n  hours: number;\n  minutes: number;\n  seconds: number;\n}\n\nexport interface IDayTimeDurationRepresentation {\n  hours: number;\n  minutes: number;\n  seconds: number;\n  day: number;\n}\n\nexport interface IYearMonthDurationRepresentation {\n  year: number;\n  month: number;\n}\n\nexport type IDurationRepresentation = IYearMonthDurationRepresentation & IDayTimeDurationRepresentation;\nexport type IDateTimeRepresentation = IDateRepresentation & ITimeRepresentation;\n\n// Important is to notice JS and XSD datatypes have different defaulted values\n// | Field | Default in JS | Default in XSD_DayTime | Default in XSD_Duration |\n// | Month | 0             | 1                      | 0                       |\n// | Day   | 1             | 1                      | 0                       |\n\nexport function defaultedDayTimeDurationRepresentation(rep: Partial<IDayTimeDurationRepresentation>):\nIDayTimeDurationRepresentation {\n  return {\n    day: rep.day ?? 0,\n    hours: rep.hours ?? 0,\n    minutes: rep.minutes ?? 0,\n    seconds: rep.seconds ?? 0,\n  };\n}\n\nexport function defaultedYearMonthDurationRepresentation(rep: Partial<IYearMonthDurationRepresentation>):\nIYearMonthDurationRepresentation {\n  return {\n    year: rep.year ?? 0,\n    month: rep.month ?? 0,\n  };\n}\n\nexport function defaultedDurationRepresentation(\n  rep: Partial<IDurationRepresentation>,\n): IDurationRepresentation {\n  return {\n    ...defaultedDayTimeDurationRepresentation(rep),\n    ...defaultedYearMonthDurationRepresentation(rep),\n  };\n}\n\nexport function simplifyDurationRepresentation(rep: Partial<IDurationRepresentation>):\nPartial<IDurationRepresentation> {\n  const temp = defaultedDurationRepresentation(rep);\n  const res: Partial<IDurationRepresentation> = {};\n\n  // Simplify year part\n  const years = temp.year + Math.trunc(temp.month / 12);\n  if (years) {\n    res.year = years;\n    temp.month %= 12;\n  }\n  if (temp.month) {\n    res.month = temp.month;\n  }\n\n  // Simplify day part\n  const days = temp.day + Math.trunc(temp.hours / 24) +\n    Math.trunc(temp.minutes / (24 * 60)) + Math.trunc(temp.seconds / (24 * 60 * 60));\n  if (days) {\n    res.day = days;\n    temp.hours %= 24;\n    temp.minutes %= 24 * 60;\n    temp.seconds %= 24 * 60 * 60;\n  }\n  const hours = temp.hours + Math.trunc(temp.minutes / 60) +\n    Math.trunc(temp.seconds / (60 * 60));\n  if (hours) {\n    res.hours = hours;\n    temp.minutes %= 60;\n    temp.seconds %= 60 * 60;\n  }\n  const minutes = temp.minutes + Math.trunc(temp.seconds / 60);\n  if (minutes) {\n    res.minutes = minutes;\n    temp.seconds %= 60;\n  }\n  if (temp.seconds) {\n    res.seconds = temp.seconds;\n  }\n  return res;\n}\n\nexport function defaultedDateTimeRepresentation(rep: Partial<IDateTimeRepresentation>): IDateTimeRepresentation {\n  return {\n    ...rep,\n    day: rep.day ?? 1,\n    hours: rep.hours ?? 0,\n    month: rep.month ?? 1,\n    year: rep.year ?? 0,\n    seconds: rep.seconds ?? 0,\n    minutes: rep.minutes ?? 0,\n  };\n}\n\nexport function toDateTimeRepresentation({ date, timeZone }:\n{ date: Date; timeZone: ITimeZoneRepresentation }): IDateTimeRepresentation {\n  return {\n    year: date.getFullYear(),\n    month: date.getMonth() + 1,\n    day: date.getDate(),\n    hours: date.getHours(),\n    minutes: date.getMinutes(),\n    seconds: date.getSeconds(),\n    zoneHours: timeZone.zoneHours,\n    zoneMinutes: timeZone.zoneMinutes,\n  };\n}\n\nexport function negateDuration(dur: Partial<IDurationRepresentation>): Partial<IDurationRepresentation> {\n  return {\n    year: dur.year === undefined ? undefined : -1 * dur.year,\n    month: dur.month === undefined ? undefined : -1 * dur.month,\n    day: dur.day === undefined ? undefined : -1 * dur.day,\n    hours: dur.hours === undefined ? undefined : -1 * dur.hours,\n    minutes: dur.minutes === undefined ? undefined : -1 * dur.minutes,\n    seconds: dur.seconds === undefined ? undefined : -1 * dur.seconds,\n  };\n}\n\nexport function toJSDate(date: IDateTimeRepresentation): Date {\n  // The given hours will be assumed to be local time.\n  const res = new Date(\n    date.year,\n    date.month - 1,\n    date.day,\n    date.hours,\n    date.minutes,\n    Math.trunc(date.seconds),\n    (date.seconds % 1) * 1_000,\n  );\n  if (date.year >= 0 && date.year < 100) {\n    // Special rule of date has gone int action:\n\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/Date#individual_date_and_time_component_values\n\n    const jumpDeltaOfDate = 1_900;\n    res.setFullYear(res.getFullYear() - jumpDeltaOfDate);\n  }\n  return res;\n}\n\nexport function toUTCDate(date: Partial<IDateTimeRepresentation>, defaultTimezone: ITimeZoneRepresentation): Date {\n  const localTime = toJSDate(defaultedDateTimeRepresentation(date));\n  // This date has been constructed in machine local time, now we alter it to become UTC and convert to correct timezone\n\n  // Correction needed from local machine timezone to UTC\n  const minutesCorrectionLocal = localTime.getTimezoneOffset();\n  // Correction needed from UTC to provided timeZone\n  const hourCorrectionUTC = date.zoneHours ?? defaultTimezone.zoneHours;\n  const minutesCorrectionUTC = date.zoneMinutes ?? defaultTimezone.zoneMinutes;\n  return new Date(\n    localTime.getTime() - (minutesCorrectionLocal + hourCorrectionUTC * 60 + minutesCorrectionUTC) * 60 * 1_000,\n  );\n}\n\nexport function trimToYearMonthDuration(dur: Partial<IDurationRepresentation>):\nPartial<IYearMonthDurationRepresentation> {\n  return {\n    year: dur.year,\n    month: dur.month,\n  };\n}\n\nexport function trimToDayTimeDuration(dur: Partial<IDurationRepresentation>): Partial<IDayTimeDurationRepresentation> {\n  return {\n    day: dur.day,\n    hours: dur.hours,\n    minutes: dur.minutes,\n    seconds: dur.seconds,\n  };\n}\n\nexport function yearMonthDurationsToMonths(dur: IYearMonthDurationRepresentation): number {\n  return dur.year * 12 + dur.month;\n}\n\nexport function dayTimeDurationsToSeconds(dur: IDayTimeDurationRepresentation): number {\n  return (((dur.day * 24) + dur.hours) * 60 + dur.minutes) * 60 + dur.seconds;\n}\n\nexport function extractRawTimeZone(zoneContained: string): string {\n  const extraction = /(Z|([+-]\\d\\d:\\d\\d))?$/u.exec(zoneContained);\n  // It is safe to cast here because the empty string can always match.\n  return extraction![0];\n}\n\nexport function extractTimeZone(date: Date): ITimeZoneRepresentation {\n  return {\n    zoneHours: date.getTimezoneOffset() / 60,\n    zoneMinutes: date.getTimezoneOffset() % 60,\n  };\n}\n","import type * as RDF from '@rdfjs/types';\nimport type { Algebra } from 'sparqlalgebrajs';\nimport type * as E from '../expressions';\nimport type * as C from './Consts';\n\n/**\n * This class of error will be thrown when an expression errors.\n * Various reasons this could happen are:\n *   - invalid types for the given operator\n *   - unbound variables\n *   - invalid lexical forms\n *   - ...\n *\n * The distinction is made so that one can catch this specific type\n * and handle it accordingly to the SPARQL spec (relevant for e.g. FILTER, EXTEND),\n * while others (programming errors) can be re-thrown.\n *\n * @see isExpressionError\n */\nexport class ExpressionError extends Error {}\n\n/**\n * Checks whether a given error is an {@link ExpressionError}.\n * Also useful for mocking in tests for covering all branches.\n *\n * @see ExpressionError\n */\nexport function isExpressionError(error: Error): boolean {\n  return error instanceof ExpressionError;\n}\n\n/**\n * A literal has an invalid lexical form for the datatype it is accompanied by.\n * This error is only thrown when the term is as function argument that requires\n * a valid lexical form.\n */\nexport class InvalidLexicalForm extends ExpressionError {\n  public constructor(public arg: RDF.Term) {\n    super(`Invalid lexical form '${pp(arg)}'`);\n  }\n}\n\n/**\n * A variable in the expression was not bound.\n */\nexport class UnboundVariableError extends ExpressionError {\n  public constructor(public variable: string, public bindings: RDF.Bindings) {\n    super(`Unbound variable '${pp(variable)}'`);\n  }\n}\n\n/**\n * An invalid term was being coerced to an Effective Boolean Value.\n *\n * See the {@link https://www.w3.org/TR/sparql11-query/#ebv | SPARQL docs}\n * on EBVs.\n */\nexport class EBVCoercionError extends ExpressionError {\n  public constructor(public arg: E.Term) {\n    super(`Cannot coerce term to EBV '${pp(arg)}'`);\n  }\n}\n\n/**\n * An equality test was done on literals with unsupported datatypes.\n *\n * See {@link https://www.w3.org/TR/sparql11-query/#func-RDFterm-equal | term equality spec}.\n */\nexport class RDFEqualTypeError extends ExpressionError {\n  public constructor(public args: E.Expression[]) {\n    super('Equality test for literals with unsupported datatypes');\n  }\n}\n\n/**\n * All the expressions in a COALESCE call threw errors.\n */\nexport class CoalesceError extends ExpressionError {\n  public constructor(public errors: Error[]) {\n    super('All COALESCE arguments threw errors');\n  }\n}\n\n/**\n * No arguments to an IN call where equal, and at least one threw an error.\n */\nexport class InError extends ExpressionError {\n  public constructor(public errors: (Error | false)[]) {\n    super(\n      `Some argument to IN errorred and none where equal. ${\n\n        errors.map(err => `(${err.toString()}) `).join('and ')}`,\n    );\n  }\n}\n\n/**\n * Literals were passed to an operator that doesn't support their datatypes.\n */\nexport class InvalidArgumentTypes extends ExpressionError {\n  public constructor(public args: E.Expression[], public op: C.Operator | C.NamedOperator) {\n    super(`Argument types not valid for operator: '${pp(op)}' with '${pp(args)}`);\n  }\n}\n\n/**\n * Terms were being compared that are not supported.\n */\nexport class InvalidCompareArgumentTypes extends ExpressionError {\n  public constructor(public arg0: RDF.Term, public arg1: RDF.Term) {\n    super(`Compared argument types are supported: '${arg0.termType}' and '${arg1.termType}'`);\n  }\n}\n\n/**\n * An invalid typecast happened.\n */\nexport class CastError<T> extends ExpressionError {\n  public constructor(public arg: T, cast: C.TypeURL) {\n    super(`Invalid cast: '${pp(arg)}' to '${pp(cast)}'`);\n  }\n}\n\nexport class InvalidTimezoneCall extends ExpressionError {\n  public constructor(public dateString: string) {\n    super(`TIMEZONE call on ${dateString} which has no timezone`);\n  }\n}\n\nexport class IncompatibleLanguageOperation extends ExpressionError {\n  public constructor(public arg1: E.LangStringLiteral, public arg2: E.LangStringLiteral) {\n    super(`Operation on incompatible language literals '${pp(arg1)}' and '${pp(arg2)}'`);\n  }\n}\n\nexport class EmptyAggregateError extends ExpressionError {\n  public constructor() {\n    super('Empty aggregate expression');\n  }\n}\n\nexport class ParseError extends ExpressionError {\n  public constructor(str: string, type: string) {\n    super(`Failed to parse ${str} as ${type}.`);\n  }\n}\n\n// Non Expression Errors ------------------------------------------------------\n\n/**\n * An error that arises when we detect a 'should-be-impossible' state.\n * Given that this error is thrown, it clearly wasn't impossible, and some\n * mistake has been made.\n */\nexport class UnexpectedError<T> extends Error {\n  public constructor(message: string, public payload?: T) {\n    super(`Programmer Error '${message}'`);\n  }\n}\n\nexport class InvalidArity extends Error {\n  public constructor(public args: E.Expression[], public op: C.Operator) {\n    super(`The number of args does not match the arity of the operator '${pp(op)}'.`);\n  }\n}\n\nexport class InvalidExpression<T> extends Error {\n  public constructor(expr: T) {\n    super(`Invalid SPARQL Expression '${pp(expr)}'`);\n  }\n}\n\nexport class InvalidExpressionType<T> extends Error {\n  public constructor(public expr: T) {\n    super(`Invalid expression type for SPARQL Expression '${pp(expr)}'`);\n  }\n}\n\nexport class InvalidTermType extends Error {\n  public constructor(public term: Algebra.TermExpression) {\n    super(`Invalid term type for term '${pp(term)}'`);\n  }\n}\n\nexport class UnknownOperator extends Error {\n  public constructor(name: string) {\n    super(`Unknown operator: '${pp(name)}`);\n  }\n}\n\nexport class UnknownNamedOperator extends Error {\n  public constructor(name: string) {\n    super(`Unknown named operator: '${pp(name)}'`);\n  }\n}\n\nexport class ExtensionFunctionError extends Error {\n  public constructor(name: string, functionError: unknown) {\n    if (functionError instanceof Error) {\n      super(`Error thrown in ${name}: ${functionError.message}${functionError.stack ? `\\n${functionError.stack}` : ''}`);\n    } else {\n      super(`Error thrown in ${name}`);\n    }\n  }\n}\n\nexport class NoAggregator extends Error {\n  public constructor(name?: string) {\n    super(`Aggregate expression ${pp(name)} found, but no aggregate hook provided.`);\n  }\n}\n\nexport class NoExistenceHook extends Error {\n  public constructor() {\n    super('EXISTS found, but no existence hook provided.');\n  }\n}\n\nfunction pp<T>(object: T): string {\n  return JSON.stringify(object);\n}\n","import type * as RDF from '@rdfjs/types';\nimport { LRUCache } from 'lru-cache';\nimport type * as E from '../expressions';\nimport { regularFunctions } from '../functions';\nimport { TermTransformer } from '../transformers/TermTransformer';\nimport * as C from './Consts';\nimport * as Err from './Errors';\nimport type { SuperTypeCallback, TypeCache } from './TypeHandling';\n\n// Determine the relative numerical order of the two given terms.\n// In accordance with https://www.w3.org/TR/sparql11-query/#modOrderBy\nexport function orderTypes(\n  termA: RDF.Term | undefined,\n  termB: RDF.Term | undefined,\n  strict = false,\n  typeDiscoveryCallback?: SuperTypeCallback,\n  typeCache?: TypeCache,\n): -1 | 0 | 1 {\n  // Check if terms are the same by reference\n  if (termA === termB) {\n    return 0;\n  }\n\n  // We handle undefined that is lower than everything else.\n  if (termA === undefined) {\n    return -1;\n  }\n  if (termB === undefined) {\n    return 1;\n  }\n\n  //\n  if (termA.termType !== termB.termType) {\n    return _TERM_ORDERING_PRIORITY[termA.termType] < _TERM_ORDERING_PRIORITY[termB.termType] ? -1 : 1;\n  }\n\n  // Check exact term equality\n  if (termA.equals(termB)) {\n    return 0;\n  }\n\n  // Handle quoted triples\n  if (termA.termType === 'Quad' && termB.termType === 'Quad') {\n    const orderSubject = orderTypes(\n      termA.subject,\n      termB.subject,\n      strict,\n      typeDiscoveryCallback,\n      typeCache,\n    );\n    if (orderSubject !== 0) {\n      return orderSubject;\n    }\n    const orderPredicate = orderTypes(\n      termA.predicate,\n      termB.predicate,\n      strict,\n      typeDiscoveryCallback,\n      typeCache,\n    );\n    if (orderPredicate !== 0) {\n      return orderPredicate;\n    }\n    const orderObject = orderTypes(\n      termA.object,\n      termB.object,\n      strict,\n      typeDiscoveryCallback,\n      typeCache,\n    );\n    if (orderObject !== 0) {\n      return orderObject;\n    }\n    return orderTypes(\n      termA.graph,\n      termB.graph,\n      strict,\n      typeDiscoveryCallback,\n      typeCache,\n    );\n  }\n\n  // Handle literals\n  if (termA.termType === 'Literal') {\n    return orderLiteralTypes(termA, <RDF.Literal>termB, typeDiscoveryCallback, typeCache);\n  }\n\n  // Handle all other types\n  if (strict) {\n    throw new Err.InvalidCompareArgumentTypes(termA, termB);\n  }\n  return comparePrimitives(termA.value, termB.value);\n}\n\nfunction orderLiteralTypes(\n  litA: RDF.Literal,\n  litB: RDF.Literal,\n  typeDiscoveryCallback?: SuperTypeCallback,\n  typeCache?: TypeCache,\n): -1 | 0 | 1 {\n  const isGreater = regularFunctions[C.RegularOperator.GT];\n  const isEqual = regularFunctions[C.RegularOperator.EQUAL];\n  const context = {\n    now: new Date(),\n    functionArgumentsCache: {},\n    superTypeProvider: {\n      discoverer: typeDiscoveryCallback ?? (() => 'term'),\n      cache: typeCache ?? new LRUCache({ max: 1_000 }),\n    },\n    defaultTimeZone: { zoneHours: 0, zoneMinutes: 0 },\n  };\n\n  const termTransformer = new TermTransformer(context.superTypeProvider);\n  const myLitA = termTransformer.transformLiteral(litA);\n  const myLitB = termTransformer.transformLiteral(litB);\n\n  try {\n    if ((<E.BooleanLiteral> isEqual.apply([ myLitA, myLitB ], context)).typedValue) {\n      return 0;\n    }\n    if ((<E.BooleanLiteral> isGreater.apply([ myLitA, myLitB ], context)).typedValue) {\n      return 1;\n    }\n    return -1;\n  } catch {\n    // Fallback to string-based comparison\n    const compareType = comparePrimitives(myLitA.dataType, myLitB.dataType);\n    if (compareType !== 0) {\n      return compareType;\n    }\n    return comparePrimitives(myLitA.str(), myLitB.str());\n  }\n}\n\nfunction comparePrimitives(valueA: any, valueB: any): -1 | 0 | 1 {\n  return valueA === valueB ? 0 : (valueA < valueB ? -1 : 1);\n}\n\n// SPARQL specifies that blankNode < namedNode < literal.\nconst _TERM_ORDERING_PRIORITY = {\n  Variable: 0,\n  BlankNode: 1,\n  NamedNode: 2,\n  Literal: 3,\n  Quad: 4,\n  DefaultGraph: 5,\n};\n","// TODO: Find a library for this, because this is basically an xsd datatypes parser\n\nimport type {\n  IDateRepresentation,\n  IDateTimeRepresentation,\n  IDayTimeDurationRepresentation,\n  IDurationRepresentation,\n  ITimeRepresentation,\n  ITimeZoneRepresentation,\n  IYearMonthDurationRepresentation,\n} from './DateTimeHelpers';\n\nimport { simplifyDurationRepresentation } from './DateTimeHelpers';\nimport { ParseError } from './Errors';\nimport { maximumDayInMonthFor } from './SpecAlgos';\n\n/**\n * TODO: Fix decently\n * Parses float datatypes (double, float).\n *\n * All invalid lexical values return undefined.\n *\n * @param value the string to interpret as a number\n */\nexport function parseXSDFloat(value: string): number | undefined {\n  const numb = Number(value);\n  if (Number.isNaN(numb)) {\n    if (value === 'NaN') {\n      return Number.NaN;\n    }\n    if (value === 'INF' || value === '+INF') {\n      return Number.POSITIVE_INFINITY;\n    }\n    if (value === '-INF') {\n      return Number.NEGATIVE_INFINITY;\n    }\n    return undefined;\n  }\n  return numb;\n}\n\n/**\n * Parses decimal datatypes (decimal, int, byte, nonPositiveInteger, etc...).\n *\n * All other values, including NaN, INF, and floating point numbers all\n * return undefined;\n *\n * @param value the string to interpret as a number\n */\nexport function parseXSDDecimal(value: string): number | undefined {\n  const numb = Number(value);\n  return Number.isNaN(numb) ? undefined : numb;\n}\n\n/**\n * Parses integer datatypes (decimal, int, byte, nonPositiveInteger, etc...).\n *\n * All other values, including NaN, INF, and floating point numbers all\n * return undefined;\n *\n * @param value the string to interpret as a number\n */\nexport function parseXSDInteger(value: string): number | undefined {\n  const numb: number = Number.parseInt(value, 10);\n  return Number.isNaN(numb) ? undefined : numb;\n}\n\nexport function parseDateTime(dateTimeStr: string): IDateTimeRepresentation {\n  // https://www.w3.org/TR/xmlschema-2/#dateTime\n  const [ date, time ] = dateTimeStr.split('T');\n  return { ...parseDate(date), ...__parseTime(time) };\n}\n\nfunction parseTimeZone(timeZoneStr: string): Partial<ITimeZoneRepresentation> {\n  // https://www.w3.org/TR/xmlschema-2/#dateTime-timezones\n  if (timeZoneStr === '') {\n    return { zoneHours: undefined, zoneMinutes: undefined };\n  }\n  if (timeZoneStr === 'Z') {\n    return { zoneHours: 0, zoneMinutes: 0 };\n  }\n  const timeZoneStrings = timeZoneStr.replaceAll(/^([+|-])(\\d\\d):(\\d\\d)$/gu, '$11!$2!$3').split('!');\n  const timeZone = timeZoneStrings.map(Number);\n  return {\n    zoneHours: timeZone[0] * timeZone[1],\n    zoneMinutes: timeZone[0] * timeZone[2],\n  };\n}\n\nexport function parseDate(dateStr: string): IDateRepresentation {\n  // https://www.w3.org/TR/xmlschema-2/#date-lexical-representation\n  const formatted = dateStr.replaceAll(\n    /^(-)?([123456789]*\\d{4})-(\\d\\d)-(\\d\\d)(Z|([+-]\\d\\d:\\d\\d))?$/gu,\n    '$11!$2!$3!$4!$5',\n  );\n  if (formatted === dateStr) {\n    throw new ParseError(dateStr, 'date');\n  }\n  const dateStrings = formatted.split('!');\n  const date = dateStrings.slice(0, -1).map(Number);\n\n  const res = {\n    year: date[0] * date[1],\n    month: date[2],\n    day: date[3],\n    ...parseTimeZone(dateStrings[4]),\n  };\n  if (!(res.month >= 1 && res.month <= 12) || !(res.day >= 1 && res.day <= maximumDayInMonthFor(res.year, res.month))) {\n    throw new ParseError(dateStr, 'date');\n  }\n  return res;\n}\n\nfunction __parseTime(timeStr: string): ITimeRepresentation {\n  // https://www.w3.org/TR/xmlschema-2/#time-lexical-repr\n  const formatted = timeStr.replaceAll(/^(\\d\\d):(\\d\\d):(\\d\\d(\\.\\d+)?)(Z|([+-]\\d\\d:\\d\\d))?$/gu, '$1!$2!$3!$5');\n  if (formatted === timeStr) {\n    throw new ParseError(timeStr, 'time');\n  }\n  const timeStrings = formatted.split('!');\n  const time = timeStrings.slice(0, -1).map(Number);\n\n  const res = {\n    hours: time[0],\n    minutes: time[1],\n    seconds: time[2],\n    ...parseTimeZone(timeStrings[3]),\n  };\n\n  if (res.seconds >= 60 || res.minutes >= 60 || res.hours > 24 ||\n    (res.hours === 24 && (res.minutes !== 0 || res.seconds !== 0))) {\n    throw new ParseError(timeStr, 'time');\n  }\n  return res;\n}\n\n// We make a separation in internal and external since dateTime will have hour-date rollover,\n// but time just does modulo the time.\nexport function parseTime(timeStr: string): ITimeRepresentation {\n  // https://www.w3.org/TR/xmlschema-2/#time-lexical-repr\n  const res = __parseTime(timeStr);\n  res.hours %= 24;\n  return res;\n}\n\nexport function parseDuration(durationStr: string): Partial<IDurationRepresentation> {\n  // https://www.w3.org/TR/xmlschema-2/#duration-lexical-repr\n  const [ dayNotation, timeNotation ] = durationStr.split('T');\n\n  // Handle date part\n  const formattedDayDur = dayNotation.replaceAll(/^(-)?P(\\d+Y)?(\\d+M)?(\\d+D)?$/gu, '$11S!$2!$3!$4');\n  if (formattedDayDur === dayNotation) {\n    throw new ParseError(durationStr, 'duration');\n  }\n\n  const durationStrings = formattedDayDur.split('!');\n  if (timeNotation !== undefined) {\n    const formattedTimeDur = timeNotation.replaceAll(/^(\\d+H)?(\\d+M)?(\\d+(\\.\\d+)?S)?$/gu, '$1!$2!$3');\n\n    if (timeNotation === '' || timeNotation === formattedTimeDur) {\n      throw new ParseError(durationStr, 'duration');\n    }\n    durationStrings.push(...formattedTimeDur.split('!'));\n  }\n  const duration = durationStrings.map(str => str.slice(0, -1));\n  if (!duration.slice(1).some(Boolean)) {\n    throw new ParseError(durationStr, 'duration');\n  }\n\n  const sign = <-1 | 1> Number(duration[0]);\n  return simplifyDurationRepresentation({\n    year: duration[1] ? sign * Number(duration[1]) : undefined,\n    month: duration[2] ? sign * Number(duration[2]) : undefined,\n    day: duration[3] ? sign * Number(duration[3]) : undefined,\n    hours: duration[4] ? sign * Number(duration[4]) : undefined,\n    minutes: duration[5] ? sign * Number(duration[5]) : undefined,\n    seconds: duration[6] ? sign * Number(duration[6]) : undefined,\n  });\n}\n\nexport function parseYearMonthDuration(durationStr: string): Partial<IYearMonthDurationRepresentation> {\n  const res = parseDuration(durationStr);\n  if ([ 'hours', 'minutes', 'seconds', 'day' ].some(key => Boolean((<any> res)[key]))) {\n    throw new ParseError(durationStr, 'yearMonthDuration');\n  }\n  return res;\n}\n\nexport function parseDayTimeDuration(durationStr: string): Partial<IDayTimeDurationRepresentation> {\n  const res = parseDuration(durationStr);\n  if ([ 'year', 'month' ].some(key => Boolean((<any> res)[key]))) {\n    throw new ParseError(durationStr, 'dayTimeDuration');\n  }\n  return res;\n}\n","import type {\n  IDateRepresentation,\n  IDateTimeRepresentation,\n  IDurationRepresentation,\n  ITimeRepresentation,\n  ITimeZoneRepresentation,\n} from './DateTimeHelpers';\n\nfunction numSerializer(num: number, min = 2): string {\n  return num.toLocaleString(undefined, { minimumIntegerDigits: min, useGrouping: false });\n}\n\nexport function serializeDateTime(date: IDateTimeRepresentation): string {\n  // https://www.w3.org/TR/xmlschema-2/#dateTime\n  // Extraction is needed because the date serializer can not add timezone y\n  return `${serializeDate({ year: date.year, month: date.month, day: date.day })}T${serializeTime(date)}`;\n}\n\nfunction serializeTimeZone(tz: Partial<ITimeZoneRepresentation>): string {\n  // https://www.w3.org/TR/xmlschema-2/#dateTime-timezones\n  if (tz.zoneHours === undefined || tz.zoneMinutes === undefined) {\n    return '';\n  }\n  if (tz.zoneHours === 0 && tz.zoneMinutes === 0) {\n    return 'Z';\n  }\n  // SerializeTimeZone({ zoneHours: 5, zoneMinutes: 4 }) returns +05:04\n  return `${tz.zoneHours >= 0 ? `+${numSerializer(tz.zoneHours)}` : numSerializer(tz.zoneHours)}:${numSerializer(Math.abs(tz.zoneMinutes))}`;\n}\n\nexport function serializeDate(date: IDateRepresentation): string {\n  // https://www.w3.org/TR/xmlschema-2/#date-lexical-representation\n  return `${numSerializer(date.year, 4)}-${numSerializer(date.month)}-${numSerializer(date.day)}${serializeTimeZone(date)}`;\n}\n\nexport function serializeTime(time: ITimeRepresentation): string {\n  // https://www.w3.org/TR/xmlschema-2/#time-lexical-repr\n  return `${numSerializer(time.hours)}:${numSerializer(time.minutes)}:${numSerializer(time.seconds)}${serializeTimeZone(time)}`;\n}\n\nexport function serializeDuration(dur: Partial<IDurationRepresentation>, zeroString: 'PT0S' | 'P0M' = 'PT0S'): string {\n  // https://www.w3.org/TR/xmlschema-2/#duration-lexical-repr\n  if (!Object.values(dur).some(val => (val || 0) !== 0)) {\n    return zeroString;\n  }\n\n  const sign = Object.values(dur).some(val => (val || 0) < 0) ? '-' : '';\n  const year = dur.year ? `${Math.abs(dur.year)}Y` : '';\n  const month = dur.month ? `${Math.abs(dur.month)}M` : '';\n  const day = dur.day ? `${Math.abs(dur.day)}D` : '';\n\n  const dayNotation = `${sign}P${year}${month}${day}`;\n  // eslint-disable-next-line ts/prefer-nullish-coalescing\n  if (!(dur.hours || dur.minutes || dur.seconds)) {\n    return dayNotation;\n  }\n\n  const hour = dur.hours ? `${Math.abs(dur.hours)}H` : '';\n  const minute = dur.minutes ? `${Math.abs(dur.minutes)}M` : '';\n  const second = dur.seconds ? `${Math.abs(dur.seconds)}S` : '';\n\n  return `${dayNotation}T${hour}${minute}${second}`;\n}\n","import type {\n  IDurationRepresentation,\n  IDateTimeRepresentation,\n  ITimeZoneRepresentation,\n} from './DateTimeHelpers';\nimport { toUTCDate } from './DateTimeHelpers';\n\nfunction fDiv(arg: number, high: number, low = 0): { intDiv: number; remainder: number } {\n  // Adds the 4 spec functions into one since they are highly related,\n  // and fQuotient and modulo are almost always called in pairs.\n  const first = arg - low;\n  const second = high - low;\n  const intDiv = Math.floor(first / second);\n  return { intDiv, remainder: arg - intDiv * second };\n}\n\nexport function maximumDayInMonthFor(yearValue: number, monthValue: number): number {\n  const { intDiv: additionalYears, remainder: month } = fDiv(monthValue, 13, 1);\n  const year = yearValue + additionalYears;\n\n  if ([ 1, 3, 5, 7, 8, 10, 12 ].includes(month)) {\n    return 31;\n  }\n  if ([ 4, 6, 9, 11 ].includes(month)) {\n    return 30;\n  }\n  if (month === 2 && (\n    fDiv(year, 400).remainder === 0 ||\n    (fDiv(year, 100).remainder !== 0 && fDiv(year, 4).remainder === 0))) {\n    return 29;\n  }\n  return 28;\n}\n\n// https://www.w3.org/TR/xmlschema-2/#adding-durations-to-dateTimes\nexport function addDurationToDateTime(date: IDateTimeRepresentation, duration: IDurationRepresentation):\nIDateTimeRepresentation {\n  // Used to cary over optional fields like timezone\n  const newDate: IDateTimeRepresentation = { ...date };\n\n  // Month\n  let tempDiv = fDiv(date.month + duration.month, 13, 1);\n  newDate.month = tempDiv.remainder;\n  // Year\n  newDate.year = date.year + duration.year + tempDiv.intDiv;\n  // Seconds\n  tempDiv = fDiv(date.seconds + duration.seconds, 60);\n  newDate.seconds = tempDiv.remainder;\n  // Minutes\n  tempDiv = fDiv(date.minutes + duration.minutes + tempDiv.intDiv, 60);\n  newDate.minutes = tempDiv.remainder;\n  // Hours\n  tempDiv = fDiv(date.hours + duration.hours + tempDiv.intDiv, 24);\n  newDate.hours = tempDiv.remainder;\n\n  // We skip a part of the spec code since: Defined spec code can not happen since it would be an invalid literal\n\n  newDate.day = date.day + duration.day + tempDiv.intDiv;\n\n  while (true) {\n    let carry;\n    if (newDate.day < 1) {\n      newDate.day += maximumDayInMonthFor(newDate.year, newDate.month - 1);\n      carry = -1;\n    } else if (newDate.day > maximumDayInMonthFor(newDate.year, newDate.month)) {\n      newDate.day -= maximumDayInMonthFor(newDate.year, newDate.month);\n      carry = 1;\n    } else {\n      break;\n    }\n    tempDiv = fDiv(newDate.month + carry, 13, 1);\n    newDate.month = tempDiv.remainder;\n    newDate.year += tempDiv.intDiv;\n  }\n  return newDate;\n}\n\nexport function elapsedDuration(\n  first: IDateTimeRepresentation,\n  second: IDateTimeRepresentation,\n  defaultTimeZone: ITimeZoneRepresentation,\n): Partial<IDurationRepresentation> {\n  const d1 = toUTCDate(first, defaultTimeZone);\n  const d2 = toUTCDate(second, defaultTimeZone);\n  const diff = d1.getTime() - d2.getTime();\n  return {\n    day: Math.floor(diff / (1_000 * 60 * 60 * 24)),\n    hours: Math.floor((diff % (1_000 * 60 * 60 * 24)) / (1_000 * 60 * 60)),\n    minutes: Math.floor(diff % (1_000 * 60 * 60) / (1_000 * 60)),\n    seconds: diff % (1_000 * 60),\n  };\n}\n","import type { LRUCache } from 'lru-cache';\nimport type * as E from '../expressions';\nimport { asTermType } from '../expressions';\nimport type { ArgumentType } from '../functions';\nimport { double, float, string } from '../functions/Helpers';\nimport type { KnownLiteralTypes } from './Consts';\nimport { TypeAlias, TypeURL } from './Consts';\n\nexport type OverrideType = KnownLiteralTypes | 'term';\n\n/**\n * Types that are not mentioned just map to 'term'.\n * When editing this, make sure type promotion and substitution don't start interfering.\n * e.g. when saying something like string -> stringly -> anyUri -> term.\n * This would make substitution on types that promote to each other possible. We and the specs don't want that!\n * A DAG will be created based on this. Make sure it doesn't have any cycles!\n */\nexport const extensionTableInput: Record<KnownLiteralTypes, OverrideType> = {\n  // Datetime types\n  [TypeURL.XSD_DATE_TIME_STAMP]: TypeURL.XSD_DATE_TIME,\n\n  // Duration types\n  [TypeURL.XSD_DAY_TIME_DURATION]: TypeURL.XSD_DURATION,\n  [TypeURL.XSD_YEAR_MONTH_DURATION]: TypeURL.XSD_DURATION,\n\n  // Stringly types\n  [TypeURL.RDF_LANG_STRING]: TypeAlias.SPARQL_STRINGLY,\n  [TypeURL.XSD_STRING]: TypeAlias.SPARQL_STRINGLY,\n\n  // String types\n  [TypeURL.XSD_NORMALIZED_STRING]: TypeURL.XSD_STRING,\n  [TypeURL.XSD_TOKEN]: TypeURL.XSD_NORMALIZED_STRING,\n  [TypeURL.XSD_LANGUAGE]: TypeURL.XSD_TOKEN,\n  [TypeURL.XSD_NM_TOKEN]: TypeURL.XSD_TOKEN,\n  [TypeURL.XSD_NAME]: TypeURL.XSD_TOKEN,\n  [TypeURL.XSD_NC_NAME]: TypeURL.XSD_NAME,\n  [TypeURL.XSD_ENTITY]: TypeURL.XSD_NC_NAME,\n  [TypeURL.XSD_ID]: TypeURL.XSD_NC_NAME,\n  [TypeURL.XSD_ID_REF]: TypeURL.XSD_NC_NAME,\n\n  // Numeric types\n  // https://www.w3.org/TR/sparql11-query/#operandDataTypes\n  // > numeric denotes typed literals with datatypes xsd:integer, xsd:decimal, xsd:float, and xsd:double\n  [TypeURL.XSD_DOUBLE]: TypeAlias.SPARQL_NUMERIC,\n  [TypeURL.XSD_FLOAT]: TypeAlias.SPARQL_NUMERIC,\n  [TypeURL.XSD_DECIMAL]: TypeAlias.SPARQL_NUMERIC,\n\n  // Decimal types\n  [TypeURL.XSD_INTEGER]: TypeURL.XSD_DECIMAL,\n\n  [TypeURL.XSD_NON_POSITIVE_INTEGER]: TypeURL.XSD_INTEGER,\n  [TypeURL.XSD_NEGATIVE_INTEGER]: TypeURL.XSD_NON_POSITIVE_INTEGER,\n\n  [TypeURL.XSD_LONG]: TypeURL.XSD_INTEGER,\n  [TypeURL.XSD_INT]: TypeURL.XSD_LONG,\n  [TypeURL.XSD_SHORT]: TypeURL.XSD_INT,\n  [TypeURL.XSD_BYTE]: TypeURL.XSD_SHORT,\n\n  [TypeURL.XSD_NON_NEGATIVE_INTEGER]: TypeURL.XSD_INTEGER,\n  [TypeURL.XSD_POSITIVE_INTEGER]: TypeURL.XSD_NON_NEGATIVE_INTEGER,\n  [TypeURL.XSD_UNSIGNED_LONG]: TypeURL.XSD_NON_NEGATIVE_INTEGER,\n  [TypeURL.XSD_UNSIGNED_INT]: TypeURL.XSD_UNSIGNED_LONG,\n  [TypeURL.XSD_UNSIGNED_SHORT]: TypeURL.XSD_UNSIGNED_INT,\n  [TypeURL.XSD_UNSIGNED_BYTE]: TypeURL.XSD_UNSIGNED_SHORT,\n\n  [TypeURL.XSD_DATE_TIME]: 'term',\n  [TypeURL.XSD_BOOLEAN]: 'term',\n  [TypeURL.XSD_DATE]: 'term',\n  [TypeURL.XSD_G_MONTH]: 'term',\n  [TypeURL.XSD_G_MONTHDAY]: 'term',\n  [TypeURL.XSD_G_YEAR]: 'term',\n  [TypeURL.XSD_G_YEAR_MONTH]: 'term',\n  [TypeURL.XSD_TIME]: 'term',\n  [TypeURL.XSD_G_DAY]: 'term',\n  [TypeURL.XSD_DURATION]: 'term',\n  [TypeAlias.SPARQL_NUMERIC]: 'term',\n  [TypeAlias.SPARQL_STRINGLY]: 'term',\n  [TypeURL.XSD_ANY_URI]: 'term',\n};\ntype SuperTypeDict = Record<KnownLiteralTypes, number> & { __depth: number };\ntype SuperTypeDictTable = Record<KnownLiteralTypes, SuperTypeDict>;\n// The key 'term' is not included in these keys. Something that is just a term will map to number 0.\nexport type GeneralSuperTypeDict = Record<string, number> & { __depth: number };\nexport const superTypeDictTable: SuperTypeDictTable = Object.create(null);\n\n/**\n * This will return the super types of a type and cache them.\n * @param type IRI we will decide the super types of.\n * @param openWorldType the enabler that provides a way to find super types.\n */\nexport function getSuperTypes(type: string, openWorldType: ISuperTypeProvider): GeneralSuperTypeDict {\n  const cached = openWorldType.cache.get(type);\n  if (cached) {\n    return cached;\n  }\n  const value = openWorldType.discoverer(type);\n  if (value === 'term') {\n    const res: GeneralSuperTypeDict = Object.create(null);\n    res.__depth = 0;\n    res[type] = 0;\n    openWorldType.cache.set(type, res);\n    return res;\n  }\n  let subExtension: GeneralSuperTypeDict;\n  const knownValue = asKnownLiteralType(value);\n  if (knownValue) {\n    subExtension = { ...superTypeDictTable[knownValue] };\n  } else {\n    subExtension = { ...getSuperTypes(value, openWorldType) };\n  }\n  subExtension.__depth++;\n  subExtension[type] = subExtension.__depth;\n  openWorldType.cache.set(type, subExtension);\n  return subExtension;\n}\n\n// No circular structure allowed! & No other keys allowed!\nexport function extensionTableInit(): void {\n  for (const [ _key, value ] of Object.entries(extensionTableInput)) {\n    const key = <KnownLiteralTypes>_key;\n    if (superTypeDictTable[key]) {\n      continue;\n    }\n    extensionTableBuilderInitKey(key, value, superTypeDictTable);\n  }\n}\nextensionTableInit();\n\nfunction extensionTableBuilderInitKey(key: KnownLiteralTypes, value: OverrideType, res: SuperTypeDictTable): void {\n  if (value === 'term' || value === undefined) {\n    const baseRes: SuperTypeDict = Object.create(null);\n    baseRes.__depth = 0;\n    baseRes[key] = 0;\n    res[key] = baseRes;\n    return;\n  }\n  if (!res[value]) {\n    extensionTableBuilderInitKey(value, extensionTableInput[value], res);\n  }\n  res[key] = { ...res[value], [key]: res[value].__depth + 1, __depth: res[value].__depth + 1 };\n}\n\nexport const typeAliasCheck: Record<TypeAlias, boolean> = Object.create(null);\nfunction initTypeAliasCheck(): void {\n  for (const val of Object.values(TypeAlias)) {\n    typeAliasCheck[val] = true;\n  }\n}\ninitTypeAliasCheck();\n\nexport function asTypeAlias(type: string): TypeAlias | undefined {\n  if (type in typeAliasCheck) {\n    return <TypeAlias> type;\n  }\n  return undefined;\n}\n\nexport function asKnownLiteralType(type: string): KnownLiteralTypes | undefined {\n  if (type in superTypeDictTable) {\n    return <KnownLiteralTypes> type;\n  }\n  return undefined;\n}\n\nexport function asOverrideType(type: string): OverrideType | undefined {\n  if (asKnownLiteralType(type) ?? type === 'term') {\n    return <OverrideType> type;\n  }\n  return undefined;\n}\n\nexport function asGeneralType(type: string): 'term' | E.TermType | undefined {\n  if (type === 'term' || asTermType(type)) {\n    return <'term' | E.TermType> type;\n  }\n  return undefined;\n}\n\nexport type TypeCache = LRUCache<string, GeneralSuperTypeDict>;\nexport type SuperTypeCallback = (unknownType: string) => string;\nexport interface ISuperTypeProvider {\n  cache: TypeCache;\n  discoverer: SuperTypeCallback;\n}\n\n/**\n * Internal type of @see isSubTypeOf This only takes knownTypes but doesn't need an enabler\n */\nexport function isInternalSubType(baseType: OverrideType, argumentType: KnownLiteralTypes): boolean {\n  return baseType !== 'term' &&\n    (superTypeDictTable[baseType] && superTypeDictTable[baseType][argumentType] !== undefined);\n}\n\n/**\n * This function can be used to check the base type is a restriction on a type in the dict.\n * If we want to check if type x is a restriction on string we do this by calling:\n * 'http://www.w3.org/2001/XMLSchema#string' in getSuperTypeDict(X, superTypeProvider)\n * @param baseType\n * @param superTypeProvider\n */\nexport function getSuperTypeDict(baseType: string, superTypeProvider: ISuperTypeProvider): GeneralSuperTypeDict {\n  const concreteType: KnownLiteralTypes | undefined = asKnownLiteralType(baseType);\n  if (concreteType) {\n    // Concrete dataType is known by expression-evaluator.\n    return superTypeDictTable[concreteType];\n  }\n  // Datatype is a custom datatype\n  return getSuperTypes(baseType, superTypeProvider);\n}\n\n/**\n * This function needs to be O(1)! The execution time of this function is vital!\n * We define typeA isSubtypeOf typeA as true.\n * If you find yourself using this function a lot (e.g. in a case) please use getSuperTypeDict instead.\n * @param baseType type you want to provide.\n * @param argumentType type you want to provide @param baseType to.\n * @param superTypeProvider the enabler to discover super types of unknown types.\n */\nexport function isSubTypeOf(\n  baseType: string,\n  argumentType: KnownLiteralTypes,\n  superTypeProvider: ISuperTypeProvider,\n): boolean {\n  if (baseType === 'term') {\n    return false;\n  }\n  return getSuperTypeDict(baseType, superTypeProvider)[argumentType] !== undefined;\n}\n\n// Defined by https://www.w3.org/TR/xpath-31/#promotion .\n// e.g. When a function takes a string, it can also accept a XSD_ANY_URI if it's cast first.\nexport const typePromotion: Partial<Record<ArgumentType, {\n  typeToPromote: KnownLiteralTypes;\n  conversionFunction: (arg: E.TermExpression) => E.TermExpression;\n}[]>> = {\n  [TypeURL.XSD_STRING]: [\n    { typeToPromote: TypeURL.XSD_ANY_URI, conversionFunction: arg => string(arg.str()) },\n  ],\n  [TypeURL.XSD_DOUBLE]: [\n    { typeToPromote: TypeURL.XSD_FLOAT, conversionFunction: arg => double((<E.NumericLiteral>arg).typedValue) },\n    // TODO: in case of decimal a round needs to happen.\n    { typeToPromote: TypeURL.XSD_DECIMAL, conversionFunction: arg => double((<E.NumericLiteral>arg).typedValue) },\n  ],\n  [TypeURL.XSD_FLOAT]: [\n    // TODO: in case of decimal a round needs to happen.\n    { typeToPromote: TypeURL.XSD_DECIMAL, conversionFunction: arg => float((<E.NumericLiteral>arg).typedValue) },\n  ],\n};\n","import { Logger } from '@comunica/types';\n\n/**\n * A logger that voids everything.\n */\nexport class LoggerVoid extends Logger {\n  public debug(): void {\n    // Void\n  }\n\n  public error(): void {\n    // Void\n  }\n\n  public fatal(): void {\n    // Void\n  }\n\n  public info(): void {\n    // Void\n  }\n\n  public trace(): void {\n    // Void\n  }\n\n  public warn(): void {\n    // Void\n  }\n}\n","import type { Actor, IAction, IActorOutput, IActorReply, IActorTest, IMediatorArgs } from '@comunica/core';\nimport { Mediator } from '@comunica/core';\n\n/**\n * A comunica mediator that runs all actors that resolve their test.\n * This mediator will always resolve to the first actor's output.\n */\nexport class MediatorAll<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest, O extends IActorOutput>\n  extends Mediator<A, I, T, O> {\n  public constructor(args: IMediatorArgs<A, I, T, O>) {\n    super(args);\n  }\n\n  public override async mediate(action: I): Promise<O> {\n    // Collect all actors that resolve their test\n    const validActors: A[] = [];\n    let testResults: IActorReply<A, I, T, O>[];\n    try {\n      testResults = this.publish(action);\n    } catch {\n      testResults = [];\n    }\n    for (const testResult of testResults) {\n      try {\n        await testResult.reply;\n        validActors.push(testResult.actor);\n      } catch {\n        // Ignore errors\n      }\n    }\n\n    // Send action to all valid actors\n    const outputs = await Promise.all(validActors.map(actor => actor.runObservable(action)));\n\n    return outputs[0];\n  }\n\n  protected async mediateWith(): Promise<A> {\n    throw new Error('Unsupported operation: MediatorAll#mediateWith');\n  }\n}\n","import type { Actor, IAction, IActorOutput, IActorReply, IActorTest, IMediatorArgs } from '@comunica/core';\nimport { Mediator } from '@comunica/core';\nimport type { IActionContext } from '@comunica/types';\n\n/**\n * A comunica mediator that goes over all actors in sequence and forwards I/O.\n * This required the action input and the actor output to be of the same type.\n */\nexport class MediatorCombinePipeline<\n  A extends Actor<H, T, H>,\nH extends IAction | (IActorOutput & { context: IActionContext }),\nT extends IActorTest,\n>\n  extends Mediator<A, H, T, H> {\n  public readonly filterErrors: boolean | undefined;\n  public readonly order: 'increasing' | 'decreasing' | undefined;\n  public readonly field: string | undefined;\n\n  public constructor(args: IMediatorCombinePipelineArgs<A, H, T, H>) {\n    super(args);\n  }\n\n  public override async mediate(action: H): Promise<H> {\n    let testResults: IActorReply<A, H, T, H>[] | { actor: A; reply: T }[];\n    try {\n      testResults = this.publish(action);\n    } catch {\n      // If no actors are available, just return the input as output\n      return action;\n    }\n\n    if (this.filterErrors) {\n      const _testResults: IActorReply<A, H, T, H>[] = [];\n      for (const result of testResults) {\n        try {\n          await result.reply;\n          _testResults.push(result);\n        } catch {\n          // Ignore errors\n        }\n      }\n      testResults = _testResults;\n    }\n\n    // Delegate test errors.\n    testResults = await Promise.all(testResults.map(async({ actor, reply }) => ({ actor, reply: await reply })));\n\n    // Order the test results if ordering is enabled\n    if (this.order) {\n      // A function used to extract an ordering value from a test result\n      const getOrder = (elem: T): number => {\n        // If there is a field key use it, otherwise use the input\n        // element for ordering\n        const value = this.field ? (<any> elem)[this.field] : elem;\n\n        // Check the ordering value is a number\n        if (typeof value !== 'number') {\n          throw new TypeError('Cannot order elements that are not numbers.');\n        }\n        return value;\n      };\n\n      testResults = testResults.sort((actor1, actor2) =>\n        (this.order === 'increasing' ? 1 : -1) *\n        (getOrder(actor1.reply) - getOrder(actor2.reply)));\n    }\n\n    // Pass action to first actor,\n    // and each actor output as input to the following actor.\n    let handle: H = action;\n    for (const { actor } of testResults) {\n      handle = { ...handle, ...await actor.runObservable(handle) };\n    }\n\n    // Return the final actor output\n    return handle;\n  }\n\n  protected mediateWith(): Promise<A> {\n    throw new Error('Method not supported.');\n  }\n}\n\nexport interface IMediatorCombinePipelineArgs<\n  A extends Actor<I, T, O>,\nI extends IAction,\nT extends IActorTest,\nO extends IActorOutput,\n>\n  extends IMediatorArgs<A, I, T, O> {\n  /**\n   * If actors that throw test errors should be ignored\n   */\n  filterErrors?: boolean;\n  /**\n   * The field to use for ordering (if the ordering strategy is chosen).\n   * Leave undefined if the test output is a number rather than an object.\n   */\n  field?: string;\n  /**\n   * The strategy of ordering the pipeline (increasing or decreasing).\n   * For choosing to leave the order of the pipeline unchanged, leave this undefined.\n   * For choosing to order by increasing values: 'increasing'.\n   * For choosing to order by decreasing values: 'decreasing'.\n   */\n  order?: 'increasing' | 'decreasing' | undefined;\n}\n","import type { Actor, IAction, IActorOutput, IActorReply, IActorTest, IMediatorArgs } from '@comunica/core';\nimport { Mediator } from '@comunica/core';\n\n/**\n * A comunica mediator that takes the union of all actor results.\n *\n * The actors that are registered first will have priority on setting overlapping fields.\n */\nexport class MediatorCombineUnion<\n  A extends Actor<I, T, O>,\nI extends IAction,\nT extends IActorTest,\nO extends IActorOutput,\n>\n  extends Mediator<A, I, T, O>\n  implements IMediatorCombineUnionArgs<A, I, T, O> {\n  public readonly filterErrors: boolean | undefined;\n  public readonly field: string;\n  public readonly combiner: (results: O[]) => O;\n\n  public constructor(args: IMediatorCombineUnionArgs<A, I, T, O>) {\n    super(args);\n    this.combiner = this.createCombiner();\n  }\n\n  public override async mediate(action: I): Promise<O> {\n    let testResults: IActorReply<A, I, T, O>[];\n    try {\n      testResults = this.publish(action);\n    } catch {\n      testResults = [];\n    }\n\n    if (this.filterErrors) {\n      const _testResults: IActorReply<A, I, T, O>[] = [];\n      for (const result of testResults) {\n        try {\n          await result.reply;\n          _testResults.push(result);\n        } catch {\n          // Ignore errors\n        }\n      }\n      testResults = _testResults;\n    }\n\n    // Delegate test errors.\n    await Promise.all(testResults.map(({ reply }) => reply));\n\n    // Run action on all actors.\n    const results: O[] = await Promise.all(testResults.map(result => result.actor.runObservable(action)));\n\n    // Return the combined results.\n    return this.combiner(results);\n  }\n\n  protected mediateWith(): Promise<A> {\n    throw new Error('Method not supported.');\n  }\n\n  protected createCombiner(): (results: O[]) => O {\n    return (results: O[]) => {\n      const data: any = {};\n      data[this.field] = {};\n      // eslint-disable-next-line unicorn/prefer-spread\n      [{}].concat(results.map((result: any) => result[this.field]))\n        // eslint-disable-next-line unicorn/no-array-for-each\n        .forEach((value) => {\n          data[this.field] = { ...value, ...data[this.field] };\n        });\n      return data;\n    };\n  }\n}\n\nexport interface IMediatorCombineUnionArgs<\n  A extends Actor<I, T, O>,\nI extends IAction,\nT extends IActorTest,\nO extends IActorOutput,\n>\n  extends IMediatorArgs<A, I, T, O> {\n  /**\n   * If actors that throw test errors should be ignored\n   */\n  filterErrors?: boolean;\n  /**\n   * The field name of the test result field over which must be mediated.\n   */\n  field: string;\n}\n","import type { ActorRdfJoin, IActionRdfJoin } from '@comunica/bus-rdf-join';\nimport { KeysQueryOperation } from '@comunica/context-entries';\nimport type { IActorReply, IMediatorArgs } from '@comunica/core';\nimport { Actor, Mediator } from '@comunica/core';\nimport type { IMediatorTypeJoinCoefficients } from '@comunica/mediatortype-join-coefficients';\nimport type { IQueryOperationResult } from '@comunica/types';\n\n/**\n * A mediator that mediates over actors implementing the Join Coefficients mediator type and assigns fixed weights\n * to calculate an overall score and pick the actor with the lowest score.\n */\nexport class MediatorJoinCoefficientsFixed\n  extends Mediator<ActorRdfJoin, IActionRdfJoin, IMediatorTypeJoinCoefficients, IQueryOperationResult> {\n  public readonly cpuWeight: number;\n  public readonly memoryWeight: number;\n  public readonly timeWeight: number;\n  public readonly ioWeight: number;\n\n  public constructor(args: IMediatorJoinCoefficientsFixedArgs) {\n    super(args);\n  }\n\n  protected async mediateWith(\n    action: IActionRdfJoin,\n    testResults: IActorReply<ActorRdfJoin, IActionRdfJoin, IMediatorTypeJoinCoefficients, IQueryOperationResult>[],\n  ): Promise<ActorRdfJoin> {\n    // Obtain test results\n    const errors: Error[] = [];\n    const promises = testResults\n      .map(({ reply }) => reply)\n      .map(promise => promise.catch((error) => {\n        errors.push(error);\n      }));\n    const coefficients = await Promise.all(promises);\n\n    // Calculate costs\n    let costs: (number | undefined)[] = coefficients\n      // eslint-disable-next-line array-callback-return\n      .map((coeff) => {\n        if (coeff) {\n          return coeff.iterations * this.cpuWeight +\n            coeff.persistedItems * this.memoryWeight +\n            coeff.blockingItems * this.timeWeight +\n            coeff.requestTime * this.ioWeight;\n        }\n      });\n    const maxCost = Math.max(...(<number[]> costs.filter(cost => cost !== undefined)));\n\n    // If we have a limit indicator in the context,\n    // increase cost of entries that have a number of iterations that is higher than the limit AND persist items.\n    // In these cases, join operators that produce results early on will be preferred.\n    const limitIndicator: number | undefined = action.context.get(KeysQueryOperation.limitIndicator);\n    if (limitIndicator) {\n      costs = costs.map((cost, i) => {\n        if (cost !== undefined && (<any> coefficients[i]).persistedItems > 0 &&\n\n          (<any> coefficients[i]).iterations > limitIndicator) {\n          return cost + maxCost;\n        }\n        return cost;\n      });\n    }\n\n    // Determine index with lowest cost\n    let minIndex = -1;\n    let minValue = Number.POSITIVE_INFINITY;\n    for (const [ i, cost ] of costs.entries()) {\n      if (cost !== undefined && (minIndex === -1 || cost < minValue)) {\n        minIndex = i;\n        minValue = cost;\n      }\n    }\n\n    // Reject if all actors rejected\n    if (minIndex < 0) {\n      throw new Error(`All actors rejected their test in ${this.name}\\n${\n        errors.map(error => error.message).join('\\n')}`);\n    }\n\n    // Return actor with lowest cost\n    const bestActor = testResults[minIndex].actor;\n\n    // Emit calculations in logger\n    if (bestActor.includeInLogs) {\n      Actor.getContextLogger(action.context)?.debug(`Determined physical join operator '${bestActor.logicalType}-${bestActor.physicalName}'`, {\n        entries: action.entries.length,\n        variables: await Promise.all(action.entries\n          .map(async entry => (await entry.output.metadata()).variables.map(variable => variable.value))),\n        costs: Object.fromEntries(costs.map((coeff, i) => [\n          `${testResults[i].actor.logicalType}-${testResults[i].actor.physicalName}`,\n          coeff,\n        ])),\n        coefficients: Object.fromEntries(coefficients.map((coeff, i) => [\n          `${testResults[i].actor.logicalType}-${testResults[i].actor.physicalName}`,\n          coeff,\n        ])),\n      });\n    }\n\n    return bestActor;\n  }\n}\n\nexport interface IMediatorJoinCoefficientsFixedArgs\n  extends IMediatorArgs<ActorRdfJoin, IActionRdfJoin, IMediatorTypeJoinCoefficients, IQueryOperationResult> {\n  /**\n   * Weight for the CPU cost\n   */\n  cpuWeight: number;\n  /**\n   * Weight for the memory cost\n   */\n  memoryWeight: number;\n  /**\n   * Weight for the execution time cost\n   */\n  timeWeight: number;\n  /**\n   * Weight for the I/O cost\n   */\n  ioWeight: number;\n}\n","import type { Actor, IAction, IActorOutput, IActorReply, IActorTest, IMediatorArgs } from '@comunica/core';\nimport { Mediator } from '@comunica/core';\n\n/**\n * A mediator that can mediate over a single number field.\n *\n * It takes the required 'field' and 'type' parameters.\n * The 'field' parameter represents the field name of the test result field over which must be mediated.\n * The 'type' parameter\n */\nexport class MediatorNumber<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest, O extends IActorOutput>\n  extends Mediator<A, I, T, O> implements IMediatorNumberArgs<A, I, T, O> {\n  public readonly field: string;\n  public readonly type: 'min' | 'max';\n  public readonly ignoreErrors: boolean;\n  public readonly indexPicker: (tests: T[]) => number;\n\n  public constructor(args: IMediatorNumberArgs<A, I, T, O>) {\n    super(args);\n    this.indexPicker = this.createIndexPicker();\n  }\n\n  /**\n   * @return {(tests: T[]) => number} A function that returns the index of the test result\n   *                                  that has been chosen by this mediator.\n   */\n  protected createIndexPicker(): (tests: (T | undefined)[]) => number {\n    switch (this.type) {\n      case 'min':\n        return (tests: (T | undefined)[]): number => tests.reduce((prev, curr, i) => {\n          const val: number = this.getOrDefault((<any> curr)[this.field], Number.POSITIVE_INFINITY);\n          return val !== null && (Number.isNaN(prev[0]) || prev[0] > val) ? [ val, i ] : prev;\n        }, [ Number.NaN, -1 ])[1];\n      case 'max':\n        return (tests: (T | undefined)[]): number => tests.reduce((prev, curr, i) => {\n          const val: number = this.getOrDefault((<any> curr)[this.field], Number.NEGATIVE_INFINITY);\n          return val !== null && (Number.isNaN(prev[0]) || prev[0] < val) ? [ val, i ] : prev;\n        }, [ Number.NaN, -1 ])[1];\n      default:\n        // eslint-disable-next-line ts/restrict-template-expressions\n        throw new Error(`No valid \"type\" value was given, must be either 'min' or 'max', but got: ${this.type}`);\n    }\n  }\n\n  protected getOrDefault(value: number | undefined, defaultValue: number): number {\n    // eslint-disable-next-line ts/prefer-nullish-coalescing\n    return value === undefined ? defaultValue : value;\n  }\n\n  protected async mediateWith(action: I, testResults: IActorReply<A, I, T, O>[]): Promise<A> {\n    let promises = testResults.map(({ reply }) => reply);\n    const errors: Error[] = [];\n    if (this.ignoreErrors) {\n      const dummy: any = {};\n      dummy[this.field] = null;\n      // eslint-disable-next-line ts/no-floating-promises\n      promises = promises.map(promise => promise.catch((error) => {\n        errors.push(error);\n        return dummy;\n      }));\n    }\n    const results = await Promise.all(promises);\n    const index = this.indexPicker(results);\n    if (index < 0) {\n      throw new Error(`All actors rejected their test in ${this.name}\\n${\n        errors.map(error => error.message).join('\\n')}`);\n    }\n    return testResults[index].actor;\n  }\n}\n\nexport interface IMediatorNumberArgs<\n  A extends Actor<I, T, O>,\nI extends IAction,\nT extends IActorTest,\nO extends IActorOutput,\n>\n  extends IMediatorArgs<A, I, T, O> {\n  /**\n   * The field name of the test result field over which must be mediated.\n   */\n  field: string;\n  /**\n   * The way how the index should be selected.\n   * For choosing the minimum value: 'min'.\n   * For choosing the maximum value: 'max'.\n   */\n  type: 'min' | 'max';\n\n  /**\n   * If actors that throw test errors should be ignored\n   */\n  ignoreErrors?: boolean;\n}\n","import type { Actor, IAction, IActorOutput, IActorReply, IActorTest, IMediatorArgs } from '@comunica/core';\nimport { Mediator } from '@comunica/core';\n\n/**\n * A mediator that picks the first actor that resolves its test.\n */\nexport class MediatorRace<A extends Actor<I, T, O>, I extends IAction, T extends IActorTest, O extends IActorOutput>\n  extends Mediator<A, I, T, O> {\n  public constructor(args: IMediatorArgs<A, I, T, O>) {\n    super(args);\n  }\n\n  protected mediateWith(action: I, testResults: IActorReply<A, I, T, O>[]): Promise<A> {\n    return new Promise((resolve, reject) => {\n      const errors: Error[] = [];\n      for (const testResult of testResults) {\n        testResult.reply.then(() => {\n          resolve(testResult.actor);\n        }).catch((error) => {\n          // Reject if all replies were rejected\n          errors.push(error);\n          if (errors.length === testResults.length) {\n            reject(new Error(`${this.name} mediated over all rejecting actors:\\n${\n              errors.map(subError => subError.message).join('\\n')}`));\n          }\n        });\n      }\n    });\n  }\n}\n","import type { IMetadataValidationState } from '@comunica/types';\n\n/**\n * Reusable implementation for metadata validation states.\n */\nexport class MetadataValidationState implements IMetadataValidationState {\n  private readonly invalidateListeners: (() => void)[] = [];\n  public valid = true;\n\n  public addInvalidateListener(listener: () => void): void {\n    this.invalidateListeners.push(listener);\n  }\n\n  public invalidate(): void {\n    if (this.valid) {\n      this.valid = false;\n      for (const invalidateListener of this.invalidateListeners) {\n        invalidateListener();\n      }\n    }\n  }\n}\n","/**\n * A logger accepts messages from different levels\n * and emits them in a certain way.\n */\nexport abstract class Logger {\n  /**\n   * All available logging levels.\n   * @type {{trace: number; debug: number; info: number; warn: number; error: number; fatal: number}}\n   */\n\n  public static readonly LEVELS: Record<string, number> = {\n    trace: 0,\n    debug: 1,\n    info: 2,\n    warn: 3,\n    error: 4,\n    fatal: 5,\n  };\n\n  /**\n   * Convert a string-based logging level to a numerical logging level.\n   * @param level A string-based logging level\n   * @return The numerical logging level, or undefined.\n   */\n  public static getLevelOrdinal(level: string): number {\n    return Logger.LEVELS[level];\n  }\n\n  public abstract trace(message: string, data?: any): void;\n  public abstract debug(message: string, data?: any): void;\n  public abstract info(message: string, data?: any): void;\n  public abstract warn(message: string, data?: any): void;\n  public abstract error(message: string, data?: any): void;\n  public abstract fatal(message: string, data?: any): void;\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n",";(function (globalObject) {\r\n  'use strict';\r\n\r\n/*\r\n *      bignumber.js v9.1.2\r\n *      A JavaScript library for arbitrary-precision arithmetic.\r\n *      https://github.com/MikeMcl/bignumber.js\r\n *      Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>\r\n *      MIT Licensed.\r\n *\r\n *      BigNumber.prototype methods     |  BigNumber methods\r\n *                                      |\r\n *      absoluteValue            abs    |  clone\r\n *      comparedTo                      |  config               set\r\n *      decimalPlaces            dp     |      DECIMAL_PLACES\r\n *      dividedBy                div    |      ROUNDING_MODE\r\n *      dividedToIntegerBy       idiv   |      EXPONENTIAL_AT\r\n *      exponentiatedBy          pow    |      RANGE\r\n *      integerValue                    |      CRYPTO\r\n *      isEqualTo                eq     |      MODULO_MODE\r\n *      isFinite                        |      POW_PRECISION\r\n *      isGreaterThan            gt     |      FORMAT\r\n *      isGreaterThanOrEqualTo   gte    |      ALPHABET\r\n *      isInteger                       |  isBigNumber\r\n *      isLessThan               lt     |  maximum              max\r\n *      isLessThanOrEqualTo      lte    |  minimum              min\r\n *      isNaN                           |  random\r\n *      isNegative                      |  sum\r\n *      isPositive                      |\r\n *      isZero                          |\r\n *      minus                           |\r\n *      modulo                   mod    |\r\n *      multipliedBy             times  |\r\n *      negated                         |\r\n *      plus                            |\r\n *      precision                sd     |\r\n *      shiftedBy                       |\r\n *      squareRoot               sqrt   |\r\n *      toExponential                   |\r\n *      toFixed                         |\r\n *      toFormat                        |\r\n *      toFraction                      |\r\n *      toJSON                          |\r\n *      toNumber                        |\r\n *      toPrecision                     |\r\n *      toString                        |\r\n *      valueOf                         |\r\n *\r\n */\r\n\r\n\r\n  var BigNumber,\r\n    isNumeric = /^-?(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?$/i,\r\n    mathceil = Math.ceil,\r\n    mathfloor = Math.floor,\r\n\r\n    bignumberError = '[BigNumber Error] ',\r\n    tooManyDigits = bignumberError + 'Number primitive has more than 15 significant digits: ',\r\n\r\n    BASE = 1e14,\r\n    LOG_BASE = 14,\r\n    MAX_SAFE_INTEGER = 0x1fffffffffffff,         // 2^53 - 1\r\n    // MAX_INT32 = 0x7fffffff,                   // 2^31 - 1\r\n    POWS_TEN = [1, 10, 100, 1e3, 1e4, 1e5, 1e6, 1e7, 1e8, 1e9, 1e10, 1e11, 1e12, 1e13],\r\n    SQRT_BASE = 1e7,\r\n\r\n    // EDITABLE\r\n    // The limit on the value of DECIMAL_PLACES, TO_EXP_NEG, TO_EXP_POS, MIN_EXP, MAX_EXP, and\r\n    // the arguments to toExponential, toFixed, toFormat, and toPrecision.\r\n    MAX = 1E9;                                   // 0 to MAX_INT32\r\n\r\n\r\n  /*\r\n   * Create and return a BigNumber constructor.\r\n   */\r\n  function clone(configObject) {\r\n    var div, convertBase, parseNumeric,\r\n      P = BigNumber.prototype = { constructor: BigNumber, toString: null, valueOf: null },\r\n      ONE = new BigNumber(1),\r\n\r\n\r\n      //----------------------------- EDITABLE CONFIG DEFAULTS -------------------------------\r\n\r\n\r\n      // The default values below must be integers within the inclusive ranges stated.\r\n      // The values can also be changed at run-time using BigNumber.set.\r\n\r\n      // The maximum number of decimal places for operations involving division.\r\n      DECIMAL_PLACES = 20,                     // 0 to MAX\r\n\r\n      // The rounding mode used when rounding to the above decimal places, and when using\r\n      // toExponential, toFixed, toFormat and toPrecision, and round (default value).\r\n      // UP         0 Away from zero.\r\n      // DOWN       1 Towards zero.\r\n      // CEIL       2 Towards +Infinity.\r\n      // FLOOR      3 Towards -Infinity.\r\n      // HALF_UP    4 Towards nearest neighbour. If equidistant, up.\r\n      // HALF_DOWN  5 Towards nearest neighbour. If equidistant, down.\r\n      // HALF_EVEN  6 Towards nearest neighbour. If equidistant, towards even neighbour.\r\n      // HALF_CEIL  7 Towards nearest neighbour. If equidistant, towards +Infinity.\r\n      // HALF_FLOOR 8 Towards nearest neighbour. If equidistant, towards -Infinity.\r\n      ROUNDING_MODE = 4,                       // 0 to 8\r\n\r\n      // EXPONENTIAL_AT : [TO_EXP_NEG , TO_EXP_POS]\r\n\r\n      // The exponent value at and beneath which toString returns exponential notation.\r\n      // Number type: -7\r\n      TO_EXP_NEG = -7,                         // 0 to -MAX\r\n\r\n      // The exponent value at and above which toString returns exponential notation.\r\n      // Number type: 21\r\n      TO_EXP_POS = 21,                         // 0 to MAX\r\n\r\n      // RANGE : [MIN_EXP, MAX_EXP]\r\n\r\n      // The minimum exponent value, beneath which underflow to zero occurs.\r\n      // Number type: -324  (5e-324)\r\n      MIN_EXP = -1e7,                          // -1 to -MAX\r\n\r\n      // The maximum exponent value, above which overflow to Infinity occurs.\r\n      // Number type:  308  (1.7976931348623157e+308)\r\n      // For MAX_EXP > 1e7, e.g. new BigNumber('1e100000000').plus(1) may be slow.\r\n      MAX_EXP = 1e7,                           // 1 to MAX\r\n\r\n      // Whether to use cryptographically-secure random number generation, if available.\r\n      CRYPTO = false,                          // true or false\r\n\r\n      // The modulo mode used when calculating the modulus: a mod n.\r\n      // The quotient (q = a / n) is calculated according to the corresponding rounding mode.\r\n      // The remainder (r) is calculated as: r = a - n * q.\r\n      //\r\n      // UP        0 The remainder is positive if the dividend is negative, else is negative.\r\n      // DOWN      1 The remainder has the same sign as the dividend.\r\n      //             This modulo mode is commonly known as 'truncated division' and is\r\n      //             equivalent to (a % n) in JavaScript.\r\n      // FLOOR     3 The remainder has the same sign as the divisor (Python %).\r\n      // HALF_EVEN 6 This modulo mode implements the IEEE 754 remainder function.\r\n      // EUCLID    9 Euclidian division. q = sign(n) * floor(a / abs(n)).\r\n      //             The remainder is always positive.\r\n      //\r\n      // The truncated division, floored division, Euclidian division and IEEE 754 remainder\r\n      // modes are commonly used for the modulus operation.\r\n      // Although the other rounding modes can also be used, they may not give useful results.\r\n      MODULO_MODE = 1,                         // 0 to 9\r\n\r\n      // The maximum number of significant digits of the result of the exponentiatedBy operation.\r\n      // If POW_PRECISION is 0, there will be unlimited significant digits.\r\n      POW_PRECISION = 0,                       // 0 to MAX\r\n\r\n      // The format specification used by the BigNumber.prototype.toFormat method.\r\n      FORMAT = {\r\n        prefix: '',\r\n        groupSize: 3,\r\n        secondaryGroupSize: 0,\r\n        groupSeparator: ',',\r\n        decimalSeparator: '.',\r\n        fractionGroupSize: 0,\r\n        fractionGroupSeparator: '\\xA0',        // non-breaking space\r\n        suffix: ''\r\n      },\r\n\r\n      // The alphabet used for base conversion. It must be at least 2 characters long, with no '+',\r\n      // '-', '.', whitespace, or repeated character.\r\n      // '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$_'\r\n      ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyz',\r\n      alphabetHasNormalDecimalDigits = true;\r\n\r\n\r\n    //------------------------------------------------------------------------------------------\r\n\r\n\r\n    // CONSTRUCTOR\r\n\r\n\r\n    /*\r\n     * The BigNumber constructor and exported function.\r\n     * Create and return a new instance of a BigNumber object.\r\n     *\r\n     * v {number|string|BigNumber} A numeric value.\r\n     * [b] {number} The base of v. Integer, 2 to ALPHABET.length inclusive.\r\n     */\r\n    function BigNumber(v, b) {\r\n      var alphabet, c, caseChanged, e, i, isNum, len, str,\r\n        x = this;\r\n\r\n      // Enable constructor call without `new`.\r\n      if (!(x instanceof BigNumber)) return new BigNumber(v, b);\r\n\r\n      if (b == null) {\r\n\r\n        if (v && v._isBigNumber === true) {\r\n          x.s = v.s;\r\n\r\n          if (!v.c || v.e > MAX_EXP) {\r\n            x.c = x.e = null;\r\n          } else if (v.e < MIN_EXP) {\r\n            x.c = [x.e = 0];\r\n          } else {\r\n            x.e = v.e;\r\n            x.c = v.c.slice();\r\n          }\r\n\r\n          return;\r\n        }\r\n\r\n        if ((isNum = typeof v == 'number') && v * 0 == 0) {\r\n\r\n          // Use `1 / n` to handle minus zero also.\r\n          x.s = 1 / v < 0 ? (v = -v, -1) : 1;\r\n\r\n          // Fast path for integers, where n < 2147483648 (2**31).\r\n          if (v === ~~v) {\r\n            for (e = 0, i = v; i >= 10; i /= 10, e++);\r\n\r\n            if (e > MAX_EXP) {\r\n              x.c = x.e = null;\r\n            } else {\r\n              x.e = e;\r\n              x.c = [v];\r\n            }\r\n\r\n            return;\r\n          }\r\n\r\n          str = String(v);\r\n        } else {\r\n\r\n          if (!isNumeric.test(str = String(v))) return parseNumeric(x, str, isNum);\r\n\r\n          x.s = str.charCodeAt(0) == 45 ? (str = str.slice(1), -1) : 1;\r\n        }\r\n\r\n        // Decimal point?\r\n        if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n\r\n        // Exponential form?\r\n        if ((i = str.search(/e/i)) > 0) {\r\n\r\n          // Determine exponent.\r\n          if (e < 0) e = i;\r\n          e += +str.slice(i + 1);\r\n          str = str.substring(0, i);\r\n        } else if (e < 0) {\r\n\r\n          // Integer.\r\n          e = str.length;\r\n        }\r\n\r\n      } else {\r\n\r\n        // '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n        intCheck(b, 2, ALPHABET.length, 'Base');\r\n\r\n        // Allow exponential notation to be used with base 10 argument, while\r\n        // also rounding to DECIMAL_PLACES as with other bases.\r\n        if (b == 10 && alphabetHasNormalDecimalDigits) {\r\n          x = new BigNumber(v);\r\n          return round(x, DECIMAL_PLACES + x.e + 1, ROUNDING_MODE);\r\n        }\r\n\r\n        str = String(v);\r\n\r\n        if (isNum = typeof v == 'number') {\r\n\r\n          // Avoid potential interpretation of Infinity and NaN as base 44+ values.\r\n          if (v * 0 != 0) return parseNumeric(x, str, isNum, b);\r\n\r\n          x.s = 1 / v < 0 ? (str = str.slice(1), -1) : 1;\r\n\r\n          // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n          if (BigNumber.DEBUG && str.replace(/^0\\.0*|\\./, '').length > 15) {\r\n            throw Error\r\n             (tooManyDigits + v);\r\n          }\r\n        } else {\r\n          x.s = str.charCodeAt(0) === 45 ? (str = str.slice(1), -1) : 1;\r\n        }\r\n\r\n        alphabet = ALPHABET.slice(0, b);\r\n        e = i = 0;\r\n\r\n        // Check that str is a valid base b number.\r\n        // Don't use RegExp, so alphabet can contain special characters.\r\n        for (len = str.length; i < len; i++) {\r\n          if (alphabet.indexOf(c = str.charAt(i)) < 0) {\r\n            if (c == '.') {\r\n\r\n              // If '.' is not the first character and it has not be found before.\r\n              if (i > e) {\r\n                e = len;\r\n                continue;\r\n              }\r\n            } else if (!caseChanged) {\r\n\r\n              // Allow e.g. hexadecimal 'FF' as well as 'ff'.\r\n              if (str == str.toUpperCase() && (str = str.toLowerCase()) ||\r\n                  str == str.toLowerCase() && (str = str.toUpperCase())) {\r\n                caseChanged = true;\r\n                i = -1;\r\n                e = 0;\r\n                continue;\r\n              }\r\n            }\r\n\r\n            return parseNumeric(x, String(v), isNum, b);\r\n          }\r\n        }\r\n\r\n        // Prevent later check for length on converted number.\r\n        isNum = false;\r\n        str = convertBase(str, b, 10, x.s);\r\n\r\n        // Decimal point?\r\n        if ((e = str.indexOf('.')) > -1) str = str.replace('.', '');\r\n        else e = str.length;\r\n      }\r\n\r\n      // Determine leading zeros.\r\n      for (i = 0; str.charCodeAt(i) === 48; i++);\r\n\r\n      // Determine trailing zeros.\r\n      for (len = str.length; str.charCodeAt(--len) === 48;);\r\n\r\n      if (str = str.slice(i, ++len)) {\r\n        len -= i;\r\n\r\n        // '[BigNumber Error] Number primitive has more than 15 significant digits: {n}'\r\n        if (isNum && BigNumber.DEBUG &&\r\n          len > 15 && (v > MAX_SAFE_INTEGER || v !== mathfloor(v))) {\r\n            throw Error\r\n             (tooManyDigits + (x.s * v));\r\n        }\r\n\r\n         // Overflow?\r\n        if ((e = e - i - 1) > MAX_EXP) {\r\n\r\n          // Infinity.\r\n          x.c = x.e = null;\r\n\r\n        // Underflow?\r\n        } else if (e < MIN_EXP) {\r\n\r\n          // Zero.\r\n          x.c = [x.e = 0];\r\n        } else {\r\n          x.e = e;\r\n          x.c = [];\r\n\r\n          // Transform base\r\n\r\n          // e is the base 10 exponent.\r\n          // i is where to slice str to get the first element of the coefficient array.\r\n          i = (e + 1) % LOG_BASE;\r\n          if (e < 0) i += LOG_BASE;  // i < 1\r\n\r\n          if (i < len) {\r\n            if (i) x.c.push(+str.slice(0, i));\r\n\r\n            for (len -= LOG_BASE; i < len;) {\r\n              x.c.push(+str.slice(i, i += LOG_BASE));\r\n            }\r\n\r\n            i = LOG_BASE - (str = str.slice(i)).length;\r\n          } else {\r\n            i -= len;\r\n          }\r\n\r\n          for (; i--; str += '0');\r\n          x.c.push(+str);\r\n        }\r\n      } else {\r\n\r\n        // Zero.\r\n        x.c = [x.e = 0];\r\n      }\r\n    }\r\n\r\n\r\n    // CONSTRUCTOR PROPERTIES\r\n\r\n\r\n    BigNumber.clone = clone;\r\n\r\n    BigNumber.ROUND_UP = 0;\r\n    BigNumber.ROUND_DOWN = 1;\r\n    BigNumber.ROUND_CEIL = 2;\r\n    BigNumber.ROUND_FLOOR = 3;\r\n    BigNumber.ROUND_HALF_UP = 4;\r\n    BigNumber.ROUND_HALF_DOWN = 5;\r\n    BigNumber.ROUND_HALF_EVEN = 6;\r\n    BigNumber.ROUND_HALF_CEIL = 7;\r\n    BigNumber.ROUND_HALF_FLOOR = 8;\r\n    BigNumber.EUCLID = 9;\r\n\r\n\r\n    /*\r\n     * Configure infrequently-changing library-wide settings.\r\n     *\r\n     * Accept an object with the following optional properties (if the value of a property is\r\n     * a number, it must be an integer within the inclusive range stated):\r\n     *\r\n     *   DECIMAL_PLACES   {number}           0 to MAX\r\n     *   ROUNDING_MODE    {number}           0 to 8\r\n     *   EXPONENTIAL_AT   {number|number[]}  -MAX to MAX  or  [-MAX to 0, 0 to MAX]\r\n     *   RANGE            {number|number[]}  -MAX to MAX (not zero)  or  [-MAX to -1, 1 to MAX]\r\n     *   CRYPTO           {boolean}          true or false\r\n     *   MODULO_MODE      {number}           0 to 9\r\n     *   POW_PRECISION       {number}           0 to MAX\r\n     *   ALPHABET         {string}           A string of two or more unique characters which does\r\n     *                                       not contain '.'.\r\n     *   FORMAT           {object}           An object with some of the following properties:\r\n     *     prefix                 {string}\r\n     *     groupSize              {number}\r\n     *     secondaryGroupSize     {number}\r\n     *     groupSeparator         {string}\r\n     *     decimalSeparator       {string}\r\n     *     fractionGroupSize      {number}\r\n     *     fractionGroupSeparator {string}\r\n     *     suffix                 {string}\r\n     *\r\n     * (The values assigned to the above FORMAT object properties are not checked for validity.)\r\n     *\r\n     * E.g.\r\n     * BigNumber.config({ DECIMAL_PLACES : 20, ROUNDING_MODE : 4 })\r\n     *\r\n     * Ignore properties/parameters set to null or undefined, except for ALPHABET.\r\n     *\r\n     * Return an object with the properties current values.\r\n     */\r\n    BigNumber.config = BigNumber.set = function (obj) {\r\n      var p, v;\r\n\r\n      if (obj != null) {\r\n\r\n        if (typeof obj == 'object') {\r\n\r\n          // DECIMAL_PLACES {number} Integer, 0 to MAX inclusive.\r\n          // '[BigNumber Error] DECIMAL_PLACES {not a primitive number|not an integer|out of range}: {v}'\r\n          if (obj.hasOwnProperty(p = 'DECIMAL_PLACES')) {\r\n            v = obj[p];\r\n            intCheck(v, 0, MAX, p);\r\n            DECIMAL_PLACES = v;\r\n          }\r\n\r\n          // ROUNDING_MODE {number} Integer, 0 to 8 inclusive.\r\n          // '[BigNumber Error] ROUNDING_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n          if (obj.hasOwnProperty(p = 'ROUNDING_MODE')) {\r\n            v = obj[p];\r\n            intCheck(v, 0, 8, p);\r\n            ROUNDING_MODE = v;\r\n          }\r\n\r\n          // EXPONENTIAL_AT {number|number[]}\r\n          // Integer, -MAX to MAX inclusive or\r\n          // [integer -MAX to 0 inclusive, 0 to MAX inclusive].\r\n          // '[BigNumber Error] EXPONENTIAL_AT {not a primitive number|not an integer|out of range}: {v}'\r\n          if (obj.hasOwnProperty(p = 'EXPONENTIAL_AT')) {\r\n            v = obj[p];\r\n            if (v && v.pop) {\r\n              intCheck(v[0], -MAX, 0, p);\r\n              intCheck(v[1], 0, MAX, p);\r\n              TO_EXP_NEG = v[0];\r\n              TO_EXP_POS = v[1];\r\n            } else {\r\n              intCheck(v, -MAX, MAX, p);\r\n              TO_EXP_NEG = -(TO_EXP_POS = v < 0 ? -v : v);\r\n            }\r\n          }\r\n\r\n          // RANGE {number|number[]} Non-zero integer, -MAX to MAX inclusive or\r\n          // [integer -MAX to -1 inclusive, integer 1 to MAX inclusive].\r\n          // '[BigNumber Error] RANGE {not a primitive number|not an integer|out of range|cannot be zero}: {v}'\r\n          if (obj.hasOwnProperty(p = 'RANGE')) {\r\n            v = obj[p];\r\n            if (v && v.pop) {\r\n              intCheck(v[0], -MAX, -1, p);\r\n              intCheck(v[1], 1, MAX, p);\r\n              MIN_EXP = v[0];\r\n              MAX_EXP = v[1];\r\n            } else {\r\n              intCheck(v, -MAX, MAX, p);\r\n              if (v) {\r\n                MIN_EXP = -(MAX_EXP = v < 0 ? -v : v);\r\n              } else {\r\n                throw Error\r\n                 (bignumberError + p + ' cannot be zero: ' + v);\r\n              }\r\n            }\r\n          }\r\n\r\n          // CRYPTO {boolean} true or false.\r\n          // '[BigNumber Error] CRYPTO not true or false: {v}'\r\n          // '[BigNumber Error] crypto unavailable'\r\n          if (obj.hasOwnProperty(p = 'CRYPTO')) {\r\n            v = obj[p];\r\n            if (v === !!v) {\r\n              if (v) {\r\n                if (typeof crypto != 'undefined' && crypto &&\r\n                 (crypto.getRandomValues || crypto.randomBytes)) {\r\n                  CRYPTO = v;\r\n                } else {\r\n                  CRYPTO = !v;\r\n                  throw Error\r\n                   (bignumberError + 'crypto unavailable');\r\n                }\r\n              } else {\r\n                CRYPTO = v;\r\n              }\r\n            } else {\r\n              throw Error\r\n               (bignumberError + p + ' not true or false: ' + v);\r\n            }\r\n          }\r\n\r\n          // MODULO_MODE {number} Integer, 0 to 9 inclusive.\r\n          // '[BigNumber Error] MODULO_MODE {not a primitive number|not an integer|out of range}: {v}'\r\n          if (obj.hasOwnProperty(p = 'MODULO_MODE')) {\r\n            v = obj[p];\r\n            intCheck(v, 0, 9, p);\r\n            MODULO_MODE = v;\r\n          }\r\n\r\n          // POW_PRECISION {number} Integer, 0 to MAX inclusive.\r\n          // '[BigNumber Error] POW_PRECISION {not a primitive number|not an integer|out of range}: {v}'\r\n          if (obj.hasOwnProperty(p = 'POW_PRECISION')) {\r\n            v = obj[p];\r\n            intCheck(v, 0, MAX, p);\r\n            POW_PRECISION = v;\r\n          }\r\n\r\n          // FORMAT {object}\r\n          // '[BigNumber Error] FORMAT not an object: {v}'\r\n          if (obj.hasOwnProperty(p = 'FORMAT')) {\r\n            v = obj[p];\r\n            if (typeof v == 'object') FORMAT = v;\r\n            else throw Error\r\n             (bignumberError + p + ' not an object: ' + v);\r\n          }\r\n\r\n          // ALPHABET {string}\r\n          // '[BigNumber Error] ALPHABET invalid: {v}'\r\n          if (obj.hasOwnProperty(p = 'ALPHABET')) {\r\n            v = obj[p];\r\n\r\n            // Disallow if less than two characters,\r\n            // or if it contains '+', '-', '.', whitespace, or a repeated character.\r\n            if (typeof v == 'string' && !/^.?$|[+\\-.\\s]|(.).*\\1/.test(v)) {\r\n              alphabetHasNormalDecimalDigits = v.slice(0, 10) == '0123456789';\r\n              ALPHABET = v;\r\n            } else {\r\n              throw Error\r\n               (bignumberError + p + ' invalid: ' + v);\r\n            }\r\n          }\r\n\r\n        } else {\r\n\r\n          // '[BigNumber Error] Object expected: {v}'\r\n          throw Error\r\n           (bignumberError + 'Object expected: ' + obj);\r\n        }\r\n      }\r\n\r\n      return {\r\n        DECIMAL_PLACES: DECIMAL_PLACES,\r\n        ROUNDING_MODE: ROUNDING_MODE,\r\n        EXPONENTIAL_AT: [TO_EXP_NEG, TO_EXP_POS],\r\n        RANGE: [MIN_EXP, MAX_EXP],\r\n        CRYPTO: CRYPTO,\r\n        MODULO_MODE: MODULO_MODE,\r\n        POW_PRECISION: POW_PRECISION,\r\n        FORMAT: FORMAT,\r\n        ALPHABET: ALPHABET\r\n      };\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if v is a BigNumber instance, otherwise return false.\r\n     *\r\n     * If BigNumber.DEBUG is true, throw if a BigNumber instance is not well-formed.\r\n     *\r\n     * v {any}\r\n     *\r\n     * '[BigNumber Error] Invalid BigNumber: {v}'\r\n     */\r\n    BigNumber.isBigNumber = function (v) {\r\n      if (!v || v._isBigNumber !== true) return false;\r\n      if (!BigNumber.DEBUG) return true;\r\n\r\n      var i, n,\r\n        c = v.c,\r\n        e = v.e,\r\n        s = v.s;\r\n\r\n      out: if ({}.toString.call(c) == '[object Array]') {\r\n\r\n        if ((s === 1 || s === -1) && e >= -MAX && e <= MAX && e === mathfloor(e)) {\r\n\r\n          // If the first element is zero, the BigNumber value must be zero.\r\n          if (c[0] === 0) {\r\n            if (e === 0 && c.length === 1) return true;\r\n            break out;\r\n          }\r\n\r\n          // Calculate number of digits that c[0] should have, based on the exponent.\r\n          i = (e + 1) % LOG_BASE;\r\n          if (i < 1) i += LOG_BASE;\r\n\r\n          // Calculate number of digits of c[0].\r\n          //if (Math.ceil(Math.log(c[0] + 1) / Math.LN10) == i) {\r\n          if (String(c[0]).length == i) {\r\n\r\n            for (i = 0; i < c.length; i++) {\r\n              n = c[i];\r\n              if (n < 0 || n >= BASE || n !== mathfloor(n)) break out;\r\n            }\r\n\r\n            // Last element cannot be zero, unless it is the only element.\r\n            if (n !== 0) return true;\r\n          }\r\n        }\r\n\r\n      // Infinity/NaN\r\n      } else if (c === null && e === null && (s === null || s === 1 || s === -1)) {\r\n        return true;\r\n      }\r\n\r\n      throw Error\r\n        (bignumberError + 'Invalid BigNumber: ' + v);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new BigNumber whose value is the maximum of the arguments.\r\n     *\r\n     * arguments {number|string|BigNumber}\r\n     */\r\n    BigNumber.maximum = BigNumber.max = function () {\r\n      return maxOrMin(arguments, -1);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new BigNumber whose value is the minimum of the arguments.\r\n     *\r\n     * arguments {number|string|BigNumber}\r\n     */\r\n    BigNumber.minimum = BigNumber.min = function () {\r\n      return maxOrMin(arguments, 1);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new BigNumber with a random value equal to or greater than 0 and less than 1,\r\n     * and with dp, or DECIMAL_PLACES if dp is omitted, decimal places (or less if trailing\r\n     * zeros are produced).\r\n     *\r\n     * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n     *\r\n     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp}'\r\n     * '[BigNumber Error] crypto unavailable'\r\n     */\r\n    BigNumber.random = (function () {\r\n      var pow2_53 = 0x20000000000000;\r\n\r\n      // Return a 53 bit integer n, where 0 <= n < 9007199254740992.\r\n      // Check if Math.random() produces more than 32 bits of randomness.\r\n      // If it does, assume at least 53 bits are produced, otherwise assume at least 30 bits.\r\n      // 0x40000000 is 2^30, 0x800000 is 2^23, 0x1fffff is 2^21 - 1.\r\n      var random53bitInt = (Math.random() * pow2_53) & 0x1fffff\r\n       ? function () { return mathfloor(Math.random() * pow2_53); }\r\n       : function () { return ((Math.random() * 0x40000000 | 0) * 0x800000) +\r\n         (Math.random() * 0x800000 | 0); };\r\n\r\n      return function (dp) {\r\n        var a, b, e, k, v,\r\n          i = 0,\r\n          c = [],\r\n          rand = new BigNumber(ONE);\r\n\r\n        if (dp == null) dp = DECIMAL_PLACES;\r\n        else intCheck(dp, 0, MAX);\r\n\r\n        k = mathceil(dp / LOG_BASE);\r\n\r\n        if (CRYPTO) {\r\n\r\n          // Browsers supporting crypto.getRandomValues.\r\n          if (crypto.getRandomValues) {\r\n\r\n            a = crypto.getRandomValues(new Uint32Array(k *= 2));\r\n\r\n            for (; i < k;) {\r\n\r\n              // 53 bits:\r\n              // ((Math.pow(2, 32) - 1) * Math.pow(2, 21)).toString(2)\r\n              // 11111 11111111 11111111 11111111 11100000 00000000 00000000\r\n              // ((Math.pow(2, 32) - 1) >>> 11).toString(2)\r\n              //                                     11111 11111111 11111111\r\n              // 0x20000 is 2^21.\r\n              v = a[i] * 0x20000 + (a[i + 1] >>> 11);\r\n\r\n              // Rejection sampling:\r\n              // 0 <= v < 9007199254740992\r\n              // Probability that v >= 9e15, is\r\n              // 7199254740992 / 9007199254740992 ~= 0.0008, i.e. 1 in 1251\r\n              if (v >= 9e15) {\r\n                b = crypto.getRandomValues(new Uint32Array(2));\r\n                a[i] = b[0];\r\n                a[i + 1] = b[1];\r\n              } else {\r\n\r\n                // 0 <= v <= 8999999999999999\r\n                // 0 <= (v % 1e14) <= 99999999999999\r\n                c.push(v % 1e14);\r\n                i += 2;\r\n              }\r\n            }\r\n            i = k / 2;\r\n\r\n          // Node.js supporting crypto.randomBytes.\r\n          } else if (crypto.randomBytes) {\r\n\r\n            // buffer\r\n            a = crypto.randomBytes(k *= 7);\r\n\r\n            for (; i < k;) {\r\n\r\n              // 0x1000000000000 is 2^48, 0x10000000000 is 2^40\r\n              // 0x100000000 is 2^32, 0x1000000 is 2^24\r\n              // 11111 11111111 11111111 11111111 11111111 11111111 11111111\r\n              // 0 <= v < 9007199254740992\r\n              v = ((a[i] & 31) * 0x1000000000000) + (a[i + 1] * 0x10000000000) +\r\n                 (a[i + 2] * 0x100000000) + (a[i + 3] * 0x1000000) +\r\n                 (a[i + 4] << 16) + (a[i + 5] << 8) + a[i + 6];\r\n\r\n              if (v >= 9e15) {\r\n                crypto.randomBytes(7).copy(a, i);\r\n              } else {\r\n\r\n                // 0 <= (v % 1e14) <= 99999999999999\r\n                c.push(v % 1e14);\r\n                i += 7;\r\n              }\r\n            }\r\n            i = k / 7;\r\n          } else {\r\n            CRYPTO = false;\r\n            throw Error\r\n             (bignumberError + 'crypto unavailable');\r\n          }\r\n        }\r\n\r\n        // Use Math.random.\r\n        if (!CRYPTO) {\r\n\r\n          for (; i < k;) {\r\n            v = random53bitInt();\r\n            if (v < 9e15) c[i++] = v % 1e14;\r\n          }\r\n        }\r\n\r\n        k = c[--i];\r\n        dp %= LOG_BASE;\r\n\r\n        // Convert trailing digits to zeros according to dp.\r\n        if (k && dp) {\r\n          v = POWS_TEN[LOG_BASE - dp];\r\n          c[i] = mathfloor(k / v) * v;\r\n        }\r\n\r\n        // Remove trailing elements which are zero.\r\n        for (; c[i] === 0; c.pop(), i--);\r\n\r\n        // Zero?\r\n        if (i < 0) {\r\n          c = [e = 0];\r\n        } else {\r\n\r\n          // Remove leading elements which are zero and adjust exponent accordingly.\r\n          for (e = -1 ; c[0] === 0; c.splice(0, 1), e -= LOG_BASE);\r\n\r\n          // Count the digits of the first element of c to determine leading zeros, and...\r\n          for (i = 1, v = c[0]; v >= 10; v /= 10, i++);\r\n\r\n          // adjust the exponent accordingly.\r\n          if (i < LOG_BASE) e -= LOG_BASE - i;\r\n        }\r\n\r\n        rand.e = e;\r\n        rand.c = c;\r\n        return rand;\r\n      };\r\n    })();\r\n\r\n\r\n    /*\r\n     * Return a BigNumber whose value is the sum of the arguments.\r\n     *\r\n     * arguments {number|string|BigNumber}\r\n     */\r\n    BigNumber.sum = function () {\r\n      var i = 1,\r\n        args = arguments,\r\n        sum = new BigNumber(args[0]);\r\n      for (; i < args.length;) sum = sum.plus(args[i++]);\r\n      return sum;\r\n    };\r\n\r\n\r\n    // PRIVATE FUNCTIONS\r\n\r\n\r\n    // Called by BigNumber and BigNumber.prototype.toString.\r\n    convertBase = (function () {\r\n      var decimal = '0123456789';\r\n\r\n      /*\r\n       * Convert string of baseIn to an array of numbers of baseOut.\r\n       * Eg. toBaseOut('255', 10, 16) returns [15, 15].\r\n       * Eg. toBaseOut('ff', 16, 10) returns [2, 5, 5].\r\n       */\r\n      function toBaseOut(str, baseIn, baseOut, alphabet) {\r\n        var j,\r\n          arr = [0],\r\n          arrL,\r\n          i = 0,\r\n          len = str.length;\r\n\r\n        for (; i < len;) {\r\n          for (arrL = arr.length; arrL--; arr[arrL] *= baseIn);\r\n\r\n          arr[0] += alphabet.indexOf(str.charAt(i++));\r\n\r\n          for (j = 0; j < arr.length; j++) {\r\n\r\n            if (arr[j] > baseOut - 1) {\r\n              if (arr[j + 1] == null) arr[j + 1] = 0;\r\n              arr[j + 1] += arr[j] / baseOut | 0;\r\n              arr[j] %= baseOut;\r\n            }\r\n          }\r\n        }\r\n\r\n        return arr.reverse();\r\n      }\r\n\r\n      // Convert a numeric string of baseIn to a numeric string of baseOut.\r\n      // If the caller is toString, we are converting from base 10 to baseOut.\r\n      // If the caller is BigNumber, we are converting from baseIn to base 10.\r\n      return function (str, baseIn, baseOut, sign, callerIsToString) {\r\n        var alphabet, d, e, k, r, x, xc, y,\r\n          i = str.indexOf('.'),\r\n          dp = DECIMAL_PLACES,\r\n          rm = ROUNDING_MODE;\r\n\r\n        // Non-integer.\r\n        if (i >= 0) {\r\n          k = POW_PRECISION;\r\n\r\n          // Unlimited precision.\r\n          POW_PRECISION = 0;\r\n          str = str.replace('.', '');\r\n          y = new BigNumber(baseIn);\r\n          x = y.pow(str.length - i);\r\n          POW_PRECISION = k;\r\n\r\n          // Convert str as if an integer, then restore the fraction part by dividing the\r\n          // result by its base raised to a power.\r\n\r\n          y.c = toBaseOut(toFixedPoint(coeffToString(x.c), x.e, '0'),\r\n           10, baseOut, decimal);\r\n          y.e = y.c.length;\r\n        }\r\n\r\n        // Convert the number as integer.\r\n\r\n        xc = toBaseOut(str, baseIn, baseOut, callerIsToString\r\n         ? (alphabet = ALPHABET, decimal)\r\n         : (alphabet = decimal, ALPHABET));\r\n\r\n        // xc now represents str as an integer and converted to baseOut. e is the exponent.\r\n        e = k = xc.length;\r\n\r\n        // Remove trailing zeros.\r\n        for (; xc[--k] == 0; xc.pop());\r\n\r\n        // Zero?\r\n        if (!xc[0]) return alphabet.charAt(0);\r\n\r\n        // Does str represent an integer? If so, no need for the division.\r\n        if (i < 0) {\r\n          --e;\r\n        } else {\r\n          x.c = xc;\r\n          x.e = e;\r\n\r\n          // The sign is needed for correct rounding.\r\n          x.s = sign;\r\n          x = div(x, y, dp, rm, baseOut);\r\n          xc = x.c;\r\n          r = x.r;\r\n          e = x.e;\r\n        }\r\n\r\n        // xc now represents str converted to baseOut.\r\n\r\n        // THe index of the rounding digit.\r\n        d = e + dp + 1;\r\n\r\n        // The rounding digit: the digit to the right of the digit that may be rounded up.\r\n        i = xc[d];\r\n\r\n        // Look at the rounding digits and mode to determine whether to round up.\r\n\r\n        k = baseOut / 2;\r\n        r = r || d < 0 || xc[d + 1] != null;\r\n\r\n        r = rm < 4 ? (i != null || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n              : i > k || i == k &&(rm == 4 || r || rm == 6 && xc[d - 1] & 1 ||\r\n               rm == (x.s < 0 ? 8 : 7));\r\n\r\n        // If the index of the rounding digit is not greater than zero, or xc represents\r\n        // zero, then the result of the base conversion is zero or, if rounding up, a value\r\n        // such as 0.00001.\r\n        if (d < 1 || !xc[0]) {\r\n\r\n          // 1^-dp or 0\r\n          str = r ? toFixedPoint(alphabet.charAt(1), -dp, alphabet.charAt(0)) : alphabet.charAt(0);\r\n        } else {\r\n\r\n          // Truncate xc to the required number of decimal places.\r\n          xc.length = d;\r\n\r\n          // Round up?\r\n          if (r) {\r\n\r\n            // Rounding up may mean the previous digit has to be rounded up and so on.\r\n            for (--baseOut; ++xc[--d] > baseOut;) {\r\n              xc[d] = 0;\r\n\r\n              if (!d) {\r\n                ++e;\r\n                xc = [1].concat(xc);\r\n              }\r\n            }\r\n          }\r\n\r\n          // Determine trailing zeros.\r\n          for (k = xc.length; !xc[--k];);\r\n\r\n          // E.g. [4, 11, 15] becomes 4bf.\r\n          for (i = 0, str = ''; i <= k; str += alphabet.charAt(xc[i++]));\r\n\r\n          // Add leading zeros, decimal point and trailing zeros as required.\r\n          str = toFixedPoint(str, e, alphabet.charAt(0));\r\n        }\r\n\r\n        // The caller will add the sign.\r\n        return str;\r\n      };\r\n    })();\r\n\r\n\r\n    // Perform division in the specified base. Called by div and convertBase.\r\n    div = (function () {\r\n\r\n      // Assume non-zero x and k.\r\n      function multiply(x, k, base) {\r\n        var m, temp, xlo, xhi,\r\n          carry = 0,\r\n          i = x.length,\r\n          klo = k % SQRT_BASE,\r\n          khi = k / SQRT_BASE | 0;\r\n\r\n        for (x = x.slice(); i--;) {\r\n          xlo = x[i] % SQRT_BASE;\r\n          xhi = x[i] / SQRT_BASE | 0;\r\n          m = khi * xlo + xhi * klo;\r\n          temp = klo * xlo + ((m % SQRT_BASE) * SQRT_BASE) + carry;\r\n          carry = (temp / base | 0) + (m / SQRT_BASE | 0) + khi * xhi;\r\n          x[i] = temp % base;\r\n        }\r\n\r\n        if (carry) x = [carry].concat(x);\r\n\r\n        return x;\r\n      }\r\n\r\n      function compare(a, b, aL, bL) {\r\n        var i, cmp;\r\n\r\n        if (aL != bL) {\r\n          cmp = aL > bL ? 1 : -1;\r\n        } else {\r\n\r\n          for (i = cmp = 0; i < aL; i++) {\r\n\r\n            if (a[i] != b[i]) {\r\n              cmp = a[i] > b[i] ? 1 : -1;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n\r\n        return cmp;\r\n      }\r\n\r\n      function subtract(a, b, aL, base) {\r\n        var i = 0;\r\n\r\n        // Subtract b from a.\r\n        for (; aL--;) {\r\n          a[aL] -= i;\r\n          i = a[aL] < b[aL] ? 1 : 0;\r\n          a[aL] = i * base + a[aL] - b[aL];\r\n        }\r\n\r\n        // Remove leading zeros.\r\n        for (; !a[0] && a.length > 1; a.splice(0, 1));\r\n      }\r\n\r\n      // x: dividend, y: divisor.\r\n      return function (x, y, dp, rm, base) {\r\n        var cmp, e, i, more, n, prod, prodL, q, qc, rem, remL, rem0, xi, xL, yc0,\r\n          yL, yz,\r\n          s = x.s == y.s ? 1 : -1,\r\n          xc = x.c,\r\n          yc = y.c;\r\n\r\n        // Either NaN, Infinity or 0?\r\n        if (!xc || !xc[0] || !yc || !yc[0]) {\r\n\r\n          return new BigNumber(\r\n\r\n           // Return NaN if either NaN, or both Infinity or 0.\r\n           !x.s || !y.s || (xc ? yc && xc[0] == yc[0] : !yc) ? NaN :\r\n\r\n            // Return 0 if x is 0 or y is Infinity, or return Infinity as y is 0.\r\n            xc && xc[0] == 0 || !yc ? s * 0 : s / 0\r\n         );\r\n        }\r\n\r\n        q = new BigNumber(s);\r\n        qc = q.c = [];\r\n        e = x.e - y.e;\r\n        s = dp + e + 1;\r\n\r\n        if (!base) {\r\n          base = BASE;\r\n          e = bitFloor(x.e / LOG_BASE) - bitFloor(y.e / LOG_BASE);\r\n          s = s / LOG_BASE | 0;\r\n        }\r\n\r\n        // Result exponent may be one less then the current value of e.\r\n        // The coefficients of the BigNumbers from convertBase may have trailing zeros.\r\n        for (i = 0; yc[i] == (xc[i] || 0); i++);\r\n\r\n        if (yc[i] > (xc[i] || 0)) e--;\r\n\r\n        if (s < 0) {\r\n          qc.push(1);\r\n          more = true;\r\n        } else {\r\n          xL = xc.length;\r\n          yL = yc.length;\r\n          i = 0;\r\n          s += 2;\r\n\r\n          // Normalise xc and yc so highest order digit of yc is >= base / 2.\r\n\r\n          n = mathfloor(base / (yc[0] + 1));\r\n\r\n          // Not necessary, but to handle odd bases where yc[0] == (base / 2) - 1.\r\n          // if (n > 1 || n++ == 1 && yc[0] < base / 2) {\r\n          if (n > 1) {\r\n            yc = multiply(yc, n, base);\r\n            xc = multiply(xc, n, base);\r\n            yL = yc.length;\r\n            xL = xc.length;\r\n          }\r\n\r\n          xi = yL;\r\n          rem = xc.slice(0, yL);\r\n          remL = rem.length;\r\n\r\n          // Add zeros to make remainder as long as divisor.\r\n          for (; remL < yL; rem[remL++] = 0);\r\n          yz = yc.slice();\r\n          yz = [0].concat(yz);\r\n          yc0 = yc[0];\r\n          if (yc[1] >= base / 2) yc0++;\r\n          // Not necessary, but to prevent trial digit n > base, when using base 3.\r\n          // else if (base == 3 && yc0 == 1) yc0 = 1 + 1e-15;\r\n\r\n          do {\r\n            n = 0;\r\n\r\n            // Compare divisor and remainder.\r\n            cmp = compare(yc, rem, yL, remL);\r\n\r\n            // If divisor < remainder.\r\n            if (cmp < 0) {\r\n\r\n              // Calculate trial digit, n.\r\n\r\n              rem0 = rem[0];\r\n              if (yL != remL) rem0 = rem0 * base + (rem[1] || 0);\r\n\r\n              // n is how many times the divisor goes into the current remainder.\r\n              n = mathfloor(rem0 / yc0);\r\n\r\n              //  Algorithm:\r\n              //  product = divisor multiplied by trial digit (n).\r\n              //  Compare product and remainder.\r\n              //  If product is greater than remainder:\r\n              //    Subtract divisor from product, decrement trial digit.\r\n              //  Subtract product from remainder.\r\n              //  If product was less than remainder at the last compare:\r\n              //    Compare new remainder and divisor.\r\n              //    If remainder is greater than divisor:\r\n              //      Subtract divisor from remainder, increment trial digit.\r\n\r\n              if (n > 1) {\r\n\r\n                // n may be > base only when base is 3.\r\n                if (n >= base) n = base - 1;\r\n\r\n                // product = divisor * trial digit.\r\n                prod = multiply(yc, n, base);\r\n                prodL = prod.length;\r\n                remL = rem.length;\r\n\r\n                // Compare product and remainder.\r\n                // If product > remainder then trial digit n too high.\r\n                // n is 1 too high about 5% of the time, and is not known to have\r\n                // ever been more than 1 too high.\r\n                while (compare(prod, rem, prodL, remL) == 1) {\r\n                  n--;\r\n\r\n                  // Subtract divisor from product.\r\n                  subtract(prod, yL < prodL ? yz : yc, prodL, base);\r\n                  prodL = prod.length;\r\n                  cmp = 1;\r\n                }\r\n              } else {\r\n\r\n                // n is 0 or 1, cmp is -1.\r\n                // If n is 0, there is no need to compare yc and rem again below,\r\n                // so change cmp to 1 to avoid it.\r\n                // If n is 1, leave cmp as -1, so yc and rem are compared again.\r\n                if (n == 0) {\r\n\r\n                  // divisor < remainder, so n must be at least 1.\r\n                  cmp = n = 1;\r\n                }\r\n\r\n                // product = divisor\r\n                prod = yc.slice();\r\n                prodL = prod.length;\r\n              }\r\n\r\n              if (prodL < remL) prod = [0].concat(prod);\r\n\r\n              // Subtract product from remainder.\r\n              subtract(rem, prod, remL, base);\r\n              remL = rem.length;\r\n\r\n               // If product was < remainder.\r\n              if (cmp == -1) {\r\n\r\n                // Compare divisor and new remainder.\r\n                // If divisor < new remainder, subtract divisor from remainder.\r\n                // Trial digit n too low.\r\n                // n is 1 too low about 5% of the time, and very rarely 2 too low.\r\n                while (compare(yc, rem, yL, remL) < 1) {\r\n                  n++;\r\n\r\n                  // Subtract divisor from remainder.\r\n                  subtract(rem, yL < remL ? yz : yc, remL, base);\r\n                  remL = rem.length;\r\n                }\r\n              }\r\n            } else if (cmp === 0) {\r\n              n++;\r\n              rem = [0];\r\n            } // else cmp === 1 and n will be 0\r\n\r\n            // Add the next digit, n, to the result array.\r\n            qc[i++] = n;\r\n\r\n            // Update the remainder.\r\n            if (rem[0]) {\r\n              rem[remL++] = xc[xi] || 0;\r\n            } else {\r\n              rem = [xc[xi]];\r\n              remL = 1;\r\n            }\r\n          } while ((xi++ < xL || rem[0] != null) && s--);\r\n\r\n          more = rem[0] != null;\r\n\r\n          // Leading zero?\r\n          if (!qc[0]) qc.splice(0, 1);\r\n        }\r\n\r\n        if (base == BASE) {\r\n\r\n          // To calculate q.e, first get the number of digits of qc[0].\r\n          for (i = 1, s = qc[0]; s >= 10; s /= 10, i++);\r\n\r\n          round(q, dp + (q.e = i + e * LOG_BASE - 1) + 1, rm, more);\r\n\r\n        // Caller is convertBase.\r\n        } else {\r\n          q.e = e;\r\n          q.r = +more;\r\n        }\r\n\r\n        return q;\r\n      };\r\n    })();\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of BigNumber n in fixed-point or exponential\r\n     * notation rounded to the specified decimal places or significant digits.\r\n     *\r\n     * n: a BigNumber.\r\n     * i: the index of the last digit required (i.e. the digit that may be rounded up).\r\n     * rm: the rounding mode.\r\n     * id: 1 (toExponential) or 2 (toPrecision).\r\n     */\r\n    function format(n, i, rm, id) {\r\n      var c0, e, ne, len, str;\r\n\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n\r\n      if (!n.c) return n.toString();\r\n\r\n      c0 = n.c[0];\r\n      ne = n.e;\r\n\r\n      if (i == null) {\r\n        str = coeffToString(n.c);\r\n        str = id == 1 || id == 2 && (ne <= TO_EXP_NEG || ne >= TO_EXP_POS)\r\n         ? toExponential(str, ne)\r\n         : toFixedPoint(str, ne, '0');\r\n      } else {\r\n        n = round(new BigNumber(n), i, rm);\r\n\r\n        // n.e may have changed if the value was rounded up.\r\n        e = n.e;\r\n\r\n        str = coeffToString(n.c);\r\n        len = str.length;\r\n\r\n        // toPrecision returns exponential notation if the number of significant digits\r\n        // specified is less than the number of digits necessary to represent the integer\r\n        // part of the value in fixed-point notation.\r\n\r\n        // Exponential notation.\r\n        if (id == 1 || id == 2 && (i <= e || e <= TO_EXP_NEG)) {\r\n\r\n          // Append zeros?\r\n          for (; len < i; str += '0', len++);\r\n          str = toExponential(str, e);\r\n\r\n        // Fixed-point notation.\r\n        } else {\r\n          i -= ne;\r\n          str = toFixedPoint(str, e, '0');\r\n\r\n          // Append zeros?\r\n          if (e + 1 > len) {\r\n            if (--i > 0) for (str += '.'; i--; str += '0');\r\n          } else {\r\n            i += e - len;\r\n            if (i > 0) {\r\n              if (e + 1 == len) str += '.';\r\n              for (; i--; str += '0');\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return n.s < 0 && c0 ? '-' + str : str;\r\n    }\r\n\r\n\r\n    // Handle BigNumber.max and BigNumber.min.\r\n    // If any number is NaN, return NaN.\r\n    function maxOrMin(args, n) {\r\n      var k, y,\r\n        i = 1,\r\n        x = new BigNumber(args[0]);\r\n\r\n      for (; i < args.length; i++) {\r\n        y = new BigNumber(args[i]);\r\n        if (!y.s || (k = compare(x, y)) === n || k === 0 && x.s === n) {\r\n          x = y;\r\n        }\r\n      }\r\n\r\n      return x;\r\n    }\r\n\r\n\r\n    /*\r\n     * Strip trailing zeros, calculate base 10 exponent and check against MIN_EXP and MAX_EXP.\r\n     * Called by minus, plus and times.\r\n     */\r\n    function normalise(n, c, e) {\r\n      var i = 1,\r\n        j = c.length;\r\n\r\n       // Remove trailing zeros.\r\n      for (; !c[--j]; c.pop());\r\n\r\n      // Calculate the base 10 exponent. First get the number of digits of c[0].\r\n      for (j = c[0]; j >= 10; j /= 10, i++);\r\n\r\n      // Overflow?\r\n      if ((e = i + e * LOG_BASE - 1) > MAX_EXP) {\r\n\r\n        // Infinity.\r\n        n.c = n.e = null;\r\n\r\n      // Underflow?\r\n      } else if (e < MIN_EXP) {\r\n\r\n        // Zero.\r\n        n.c = [n.e = 0];\r\n      } else {\r\n        n.e = e;\r\n        n.c = c;\r\n      }\r\n\r\n      return n;\r\n    }\r\n\r\n\r\n    // Handle values that fail the validity test in BigNumber.\r\n    parseNumeric = (function () {\r\n      var basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i,\r\n        dotAfter = /^([^.]+)\\.$/,\r\n        dotBefore = /^\\.([^.]+)$/,\r\n        isInfinityOrNaN = /^-?(Infinity|NaN)$/,\r\n        whitespaceOrPlus = /^\\s*\\+(?=[\\w.])|^\\s+|\\s+$/g;\r\n\r\n      return function (x, str, isNum, b) {\r\n        var base,\r\n          s = isNum ? str : str.replace(whitespaceOrPlus, '');\r\n\r\n        // No exception on Infinity or NaN.\r\n        if (isInfinityOrNaN.test(s)) {\r\n          x.s = isNaN(s) ? null : s < 0 ? -1 : 1;\r\n        } else {\r\n          if (!isNum) {\r\n\r\n            // basePrefix = /^(-?)0([xbo])(?=\\w[\\w.]*$)/i\r\n            s = s.replace(basePrefix, function (m, p1, p2) {\r\n              base = (p2 = p2.toLowerCase()) == 'x' ? 16 : p2 == 'b' ? 2 : 8;\r\n              return !b || b == base ? p1 : m;\r\n            });\r\n\r\n            if (b) {\r\n              base = b;\r\n\r\n              // E.g. '1.' to '1', '.1' to '0.1'\r\n              s = s.replace(dotAfter, '$1').replace(dotBefore, '0.$1');\r\n            }\r\n\r\n            if (str != s) return new BigNumber(s, base);\r\n          }\r\n\r\n          // '[BigNumber Error] Not a number: {n}'\r\n          // '[BigNumber Error] Not a base {b} number: {n}'\r\n          if (BigNumber.DEBUG) {\r\n            throw Error\r\n              (bignumberError + 'Not a' + (b ? ' base ' + b : '') + ' number: ' + str);\r\n          }\r\n\r\n          // NaN\r\n          x.s = null;\r\n        }\r\n\r\n        x.c = x.e = null;\r\n      }\r\n    })();\r\n\r\n\r\n    /*\r\n     * Round x to sd significant digits using rounding mode rm. Check for over/under-flow.\r\n     * If r is truthy, it is known that there are more digits after the rounding digit.\r\n     */\r\n    function round(x, sd, rm, r) {\r\n      var d, i, j, k, n, ni, rd,\r\n        xc = x.c,\r\n        pows10 = POWS_TEN;\r\n\r\n      // if x is not Infinity or NaN...\r\n      if (xc) {\r\n\r\n        // rd is the rounding digit, i.e. the digit after the digit that may be rounded up.\r\n        // n is a base 1e14 number, the value of the element of array x.c containing rd.\r\n        // ni is the index of n within x.c.\r\n        // d is the number of digits of n.\r\n        // i is the index of rd within n including leading zeros.\r\n        // j is the actual index of rd within n (if < 0, rd is a leading zero).\r\n        out: {\r\n\r\n          // Get the number of digits of the first element of xc.\r\n          for (d = 1, k = xc[0]; k >= 10; k /= 10, d++);\r\n          i = sd - d;\r\n\r\n          // If the rounding digit is in the first element of xc...\r\n          if (i < 0) {\r\n            i += LOG_BASE;\r\n            j = sd;\r\n            n = xc[ni = 0];\r\n\r\n            // Get the rounding digit at index j of n.\r\n            rd = mathfloor(n / pows10[d - j - 1] % 10);\r\n          } else {\r\n            ni = mathceil((i + 1) / LOG_BASE);\r\n\r\n            if (ni >= xc.length) {\r\n\r\n              if (r) {\r\n\r\n                // Needed by sqrt.\r\n                for (; xc.length <= ni; xc.push(0));\r\n                n = rd = 0;\r\n                d = 1;\r\n                i %= LOG_BASE;\r\n                j = i - LOG_BASE + 1;\r\n              } else {\r\n                break out;\r\n              }\r\n            } else {\r\n              n = k = xc[ni];\r\n\r\n              // Get the number of digits of n.\r\n              for (d = 1; k >= 10; k /= 10, d++);\r\n\r\n              // Get the index of rd within n.\r\n              i %= LOG_BASE;\r\n\r\n              // Get the index of rd within n, adjusted for leading zeros.\r\n              // The number of leading zeros of n is given by LOG_BASE - d.\r\n              j = i - LOG_BASE + d;\r\n\r\n              // Get the rounding digit at index j of n.\r\n              rd = j < 0 ? 0 : mathfloor(n / pows10[d - j - 1] % 10);\r\n            }\r\n          }\r\n\r\n          r = r || sd < 0 ||\r\n\r\n          // Are there any non-zero digits after the rounding digit?\r\n          // The expression  n % pows10[d - j - 1]  returns all digits of n to the right\r\n          // of the digit at j, e.g. if n is 908714 and j is 2, the expression gives 714.\r\n           xc[ni + 1] != null || (j < 0 ? n : n % pows10[d - j - 1]);\r\n\r\n          r = rm < 4\r\n           ? (rd || r) && (rm == 0 || rm == (x.s < 0 ? 3 : 2))\r\n           : rd > 5 || rd == 5 && (rm == 4 || r || rm == 6 &&\r\n\r\n            // Check whether the digit to the left of the rounding digit is odd.\r\n            ((i > 0 ? j > 0 ? n / pows10[d - j] : 0 : xc[ni - 1]) % 10) & 1 ||\r\n             rm == (x.s < 0 ? 8 : 7));\r\n\r\n          if (sd < 1 || !xc[0]) {\r\n            xc.length = 0;\r\n\r\n            if (r) {\r\n\r\n              // Convert sd to decimal places.\r\n              sd -= x.e + 1;\r\n\r\n              // 1, 0.1, 0.01, 0.001, 0.0001 etc.\r\n              xc[0] = pows10[(LOG_BASE - sd % LOG_BASE) % LOG_BASE];\r\n              x.e = -sd || 0;\r\n            } else {\r\n\r\n              // Zero.\r\n              xc[0] = x.e = 0;\r\n            }\r\n\r\n            return x;\r\n          }\r\n\r\n          // Remove excess digits.\r\n          if (i == 0) {\r\n            xc.length = ni;\r\n            k = 1;\r\n            ni--;\r\n          } else {\r\n            xc.length = ni + 1;\r\n            k = pows10[LOG_BASE - i];\r\n\r\n            // E.g. 56700 becomes 56000 if 7 is the rounding digit.\r\n            // j > 0 means i > number of leading zeros of n.\r\n            xc[ni] = j > 0 ? mathfloor(n / pows10[d - j] % pows10[j]) * k : 0;\r\n          }\r\n\r\n          // Round up?\r\n          if (r) {\r\n\r\n            for (; ;) {\r\n\r\n              // If the digit to be rounded up is in the first element of xc...\r\n              if (ni == 0) {\r\n\r\n                // i will be the length of xc[0] before k is added.\r\n                for (i = 1, j = xc[0]; j >= 10; j /= 10, i++);\r\n                j = xc[0] += k;\r\n                for (k = 1; j >= 10; j /= 10, k++);\r\n\r\n                // if i != k the length has increased.\r\n                if (i != k) {\r\n                  x.e++;\r\n                  if (xc[0] == BASE) xc[0] = 1;\r\n                }\r\n\r\n                break;\r\n              } else {\r\n                xc[ni] += k;\r\n                if (xc[ni] != BASE) break;\r\n                xc[ni--] = 0;\r\n                k = 1;\r\n              }\r\n            }\r\n          }\r\n\r\n          // Remove trailing zeros.\r\n          for (i = xc.length; xc[--i] === 0; xc.pop());\r\n        }\r\n\r\n        // Overflow? Infinity.\r\n        if (x.e > MAX_EXP) {\r\n          x.c = x.e = null;\r\n\r\n        // Underflow? Zero.\r\n        } else if (x.e < MIN_EXP) {\r\n          x.c = [x.e = 0];\r\n        }\r\n      }\r\n\r\n      return x;\r\n    }\r\n\r\n\r\n    function valueOf(n) {\r\n      var str,\r\n        e = n.e;\r\n\r\n      if (e === null) return n.toString();\r\n\r\n      str = coeffToString(n.c);\r\n\r\n      str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n        ? toExponential(str, e)\r\n        : toFixedPoint(str, e, '0');\r\n\r\n      return n.s < 0 ? '-' + str : str;\r\n    }\r\n\r\n\r\n    // PROTOTYPE/INSTANCE METHODS\r\n\r\n\r\n    /*\r\n     * Return a new BigNumber whose value is the absolute value of this BigNumber.\r\n     */\r\n    P.absoluteValue = P.abs = function () {\r\n      var x = new BigNumber(this);\r\n      if (x.s < 0) x.s = 1;\r\n      return x;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return\r\n     *   1 if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n     *   -1 if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n     *   0 if they have the same value,\r\n     *   or null if the value of either is NaN.\r\n     */\r\n    P.comparedTo = function (y, b) {\r\n      return compare(this, new BigNumber(y, b));\r\n    };\r\n\r\n\r\n    /*\r\n     * If dp is undefined or null or true or false, return the number of decimal places of the\r\n     * value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n     *\r\n     * Otherwise, if dp is a number, return a new BigNumber whose value is the value of this\r\n     * BigNumber rounded to a maximum of dp decimal places using rounding mode rm, or\r\n     * ROUNDING_MODE if rm is omitted.\r\n     *\r\n     * [dp] {number} Decimal places: integer, 0 to MAX inclusive.\r\n     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n     *\r\n     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n     */\r\n    P.decimalPlaces = P.dp = function (dp, rm) {\r\n      var c, n, v,\r\n        x = this;\r\n\r\n      if (dp != null) {\r\n        intCheck(dp, 0, MAX);\r\n        if (rm == null) rm = ROUNDING_MODE;\r\n        else intCheck(rm, 0, 8);\r\n\r\n        return round(new BigNumber(x), dp + x.e + 1, rm);\r\n      }\r\n\r\n      if (!(c = x.c)) return null;\r\n      n = ((v = c.length - 1) - bitFloor(this.e / LOG_BASE)) * LOG_BASE;\r\n\r\n      // Subtract the number of trailing zeros of the last number.\r\n      if (v = c[v]) for (; v % 10 == 0; v /= 10, n--);\r\n      if (n < 0) n = 0;\r\n\r\n      return n;\r\n    };\r\n\r\n\r\n    /*\r\n     *  n / 0 = I\r\n     *  n / N = N\r\n     *  n / I = 0\r\n     *  0 / n = 0\r\n     *  0 / 0 = N\r\n     *  0 / N = N\r\n     *  0 / I = 0\r\n     *  N / n = N\r\n     *  N / 0 = N\r\n     *  N / N = N\r\n     *  N / I = N\r\n     *  I / n = I\r\n     *  I / 0 = I\r\n     *  I / N = N\r\n     *  I / I = N\r\n     *\r\n     * Return a new BigNumber whose value is the value of this BigNumber divided by the value of\r\n     * BigNumber(y, b), rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n     */\r\n    P.dividedBy = P.div = function (y, b) {\r\n      return div(this, new BigNumber(y, b), DECIMAL_PLACES, ROUNDING_MODE);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new BigNumber whose value is the integer part of dividing the value of this\r\n     * BigNumber by the value of BigNumber(y, b).\r\n     */\r\n    P.dividedToIntegerBy = P.idiv = function (y, b) {\r\n      return div(this, new BigNumber(y, b), 0, 1);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a BigNumber whose value is the value of this BigNumber exponentiated by n.\r\n     *\r\n     * If m is present, return the result modulo m.\r\n     * If n is negative round according to DECIMAL_PLACES and ROUNDING_MODE.\r\n     * If POW_PRECISION is non-zero and m is not present, round to POW_PRECISION using ROUNDING_MODE.\r\n     *\r\n     * The modular power operation works efficiently when x, n, and m are integers, otherwise it\r\n     * is equivalent to calculating x.exponentiatedBy(n).modulo(m) with a POW_PRECISION of 0.\r\n     *\r\n     * n {number|string|BigNumber} The exponent. An integer.\r\n     * [m] {number|string|BigNumber} The modulus.\r\n     *\r\n     * '[BigNumber Error] Exponent not an integer: {n}'\r\n     */\r\n    P.exponentiatedBy = P.pow = function (n, m) {\r\n      var half, isModExp, i, k, more, nIsBig, nIsNeg, nIsOdd, y,\r\n        x = this;\r\n\r\n      n = new BigNumber(n);\r\n\r\n      // Allow NaN and Infinity, but not other non-integers.\r\n      if (n.c && !n.isInteger()) {\r\n        throw Error\r\n          (bignumberError + 'Exponent not an integer: ' + valueOf(n));\r\n      }\r\n\r\n      if (m != null) m = new BigNumber(m);\r\n\r\n      // Exponent of MAX_SAFE_INTEGER is 15.\r\n      nIsBig = n.e > 14;\r\n\r\n      // If x is NaN, Infinity, 0 or 1, or n is Infinity, NaN or 0.\r\n      if (!x.c || !x.c[0] || x.c[0] == 1 && !x.e && x.c.length == 1 || !n.c || !n.c[0]) {\r\n\r\n        // The sign of the result of pow when x is negative depends on the evenness of n.\r\n        // If +n overflows to Infinity, the evenness of n would be not be known.\r\n        y = new BigNumber(Math.pow(+valueOf(x), nIsBig ? n.s * (2 - isOdd(n)) : +valueOf(n)));\r\n        return m ? y.mod(m) : y;\r\n      }\r\n\r\n      nIsNeg = n.s < 0;\r\n\r\n      if (m) {\r\n\r\n        // x % m returns NaN if abs(m) is zero, or m is NaN.\r\n        if (m.c ? !m.c[0] : !m.s) return new BigNumber(NaN);\r\n\r\n        isModExp = !nIsNeg && x.isInteger() && m.isInteger();\r\n\r\n        if (isModExp) x = x.mod(m);\r\n\r\n      // Overflow to Infinity: >=2**1e10 or >=1.0000024**1e15.\r\n      // Underflow to 0: <=0.79**1e10 or <=0.9999975**1e15.\r\n      } else if (n.e > 9 && (x.e > 0 || x.e < -1 || (x.e == 0\r\n        // [1, 240000000]\r\n        ? x.c[0] > 1 || nIsBig && x.c[1] >= 24e7\r\n        // [80000000000000]  [99999750000000]\r\n        : x.c[0] < 8e13 || nIsBig && x.c[0] <= 9999975e7))) {\r\n\r\n        // If x is negative and n is odd, k = -0, else k = 0.\r\n        k = x.s < 0 && isOdd(n) ? -0 : 0;\r\n\r\n        // If x >= 1, k = Infinity.\r\n        if (x.e > -1) k = 1 / k;\r\n\r\n        // If n is negative return 0, else return Infinity.\r\n        return new BigNumber(nIsNeg ? 1 / k : k);\r\n\r\n      } else if (POW_PRECISION) {\r\n\r\n        // Truncating each coefficient array to a length of k after each multiplication\r\n        // equates to truncating significant digits to POW_PRECISION + [28, 41],\r\n        // i.e. there will be a minimum of 28 guard digits retained.\r\n        k = mathceil(POW_PRECISION / LOG_BASE + 2);\r\n      }\r\n\r\n      if (nIsBig) {\r\n        half = new BigNumber(0.5);\r\n        if (nIsNeg) n.s = 1;\r\n        nIsOdd = isOdd(n);\r\n      } else {\r\n        i = Math.abs(+valueOf(n));\r\n        nIsOdd = i % 2;\r\n      }\r\n\r\n      y = new BigNumber(ONE);\r\n\r\n      // Performs 54 loop iterations for n of 9007199254740991.\r\n      for (; ;) {\r\n\r\n        if (nIsOdd) {\r\n          y = y.times(x);\r\n          if (!y.c) break;\r\n\r\n          if (k) {\r\n            if (y.c.length > k) y.c.length = k;\r\n          } else if (isModExp) {\r\n            y = y.mod(m);    //y = y.minus(div(y, m, 0, MODULO_MODE).times(m));\r\n          }\r\n        }\r\n\r\n        if (i) {\r\n          i = mathfloor(i / 2);\r\n          if (i === 0) break;\r\n          nIsOdd = i % 2;\r\n        } else {\r\n          n = n.times(half);\r\n          round(n, n.e + 1, 1);\r\n\r\n          if (n.e > 14) {\r\n            nIsOdd = isOdd(n);\r\n          } else {\r\n            i = +valueOf(n);\r\n            if (i === 0) break;\r\n            nIsOdd = i % 2;\r\n          }\r\n        }\r\n\r\n        x = x.times(x);\r\n\r\n        if (k) {\r\n          if (x.c && x.c.length > k) x.c.length = k;\r\n        } else if (isModExp) {\r\n          x = x.mod(m);    //x = x.minus(div(x, m, 0, MODULO_MODE).times(m));\r\n        }\r\n      }\r\n\r\n      if (isModExp) return y;\r\n      if (nIsNeg) y = ONE.div(y);\r\n\r\n      return m ? y.mod(m) : k ? round(y, POW_PRECISION, ROUNDING_MODE, more) : y;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new BigNumber whose value is the value of this BigNumber rounded to an integer\r\n     * using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n     *\r\n     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n     *\r\n     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {rm}'\r\n     */\r\n    P.integerValue = function (rm) {\r\n      var n = new BigNumber(this);\r\n      if (rm == null) rm = ROUNDING_MODE;\r\n      else intCheck(rm, 0, 8);\r\n      return round(n, n.e + 1, rm);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is equal to the value of BigNumber(y, b),\r\n     * otherwise return false.\r\n     */\r\n    P.isEqualTo = P.eq = function (y, b) {\r\n      return compare(this, new BigNumber(y, b)) === 0;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is a finite number, otherwise return false.\r\n     */\r\n    P.isFinite = function () {\r\n      return !!this.c;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is greater than the value of BigNumber(y, b),\r\n     * otherwise return false.\r\n     */\r\n    P.isGreaterThan = P.gt = function (y, b) {\r\n      return compare(this, new BigNumber(y, b)) > 0;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is greater than or equal to the value of\r\n     * BigNumber(y, b), otherwise return false.\r\n     */\r\n    P.isGreaterThanOrEqualTo = P.gte = function (y, b) {\r\n      return (b = compare(this, new BigNumber(y, b))) === 1 || b === 0;\r\n\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is an integer, otherwise return false.\r\n     */\r\n    P.isInteger = function () {\r\n      return !!this.c && bitFloor(this.e / LOG_BASE) > this.c.length - 2;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is less than the value of BigNumber(y, b),\r\n     * otherwise return false.\r\n     */\r\n    P.isLessThan = P.lt = function (y, b) {\r\n      return compare(this, new BigNumber(y, b)) < 0;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is less than or equal to the value of\r\n     * BigNumber(y, b), otherwise return false.\r\n     */\r\n    P.isLessThanOrEqualTo = P.lte = function (y, b) {\r\n      return (b = compare(this, new BigNumber(y, b))) === -1 || b === 0;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is NaN, otherwise return false.\r\n     */\r\n    P.isNaN = function () {\r\n      return !this.s;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is negative, otherwise return false.\r\n     */\r\n    P.isNegative = function () {\r\n      return this.s < 0;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is positive, otherwise return false.\r\n     */\r\n    P.isPositive = function () {\r\n      return this.s > 0;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return true if the value of this BigNumber is 0 or -0, otherwise return false.\r\n     */\r\n    P.isZero = function () {\r\n      return !!this.c && this.c[0] == 0;\r\n    };\r\n\r\n\r\n    /*\r\n     *  n - 0 = n\r\n     *  n - N = N\r\n     *  n - I = -I\r\n     *  0 - n = -n\r\n     *  0 - 0 = 0\r\n     *  0 - N = N\r\n     *  0 - I = -I\r\n     *  N - n = N\r\n     *  N - 0 = N\r\n     *  N - N = N\r\n     *  N - I = N\r\n     *  I - n = I\r\n     *  I - 0 = I\r\n     *  I - N = N\r\n     *  I - I = N\r\n     *\r\n     * Return a new BigNumber whose value is the value of this BigNumber minus the value of\r\n     * BigNumber(y, b).\r\n     */\r\n    P.minus = function (y, b) {\r\n      var i, j, t, xLTy,\r\n        x = this,\r\n        a = x.s;\r\n\r\n      y = new BigNumber(y, b);\r\n      b = y.s;\r\n\r\n      // Either NaN?\r\n      if (!a || !b) return new BigNumber(NaN);\r\n\r\n      // Signs differ?\r\n      if (a != b) {\r\n        y.s = -b;\r\n        return x.plus(y);\r\n      }\r\n\r\n      var xe = x.e / LOG_BASE,\r\n        ye = y.e / LOG_BASE,\r\n        xc = x.c,\r\n        yc = y.c;\r\n\r\n      if (!xe || !ye) {\r\n\r\n        // Either Infinity?\r\n        if (!xc || !yc) return xc ? (y.s = -b, y) : new BigNumber(yc ? x : NaN);\r\n\r\n        // Either zero?\r\n        if (!xc[0] || !yc[0]) {\r\n\r\n          // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n          return yc[0] ? (y.s = -b, y) : new BigNumber(xc[0] ? x :\r\n\r\n           // IEEE 754 (2008) 6.3: n - n = -0 when rounding to -Infinity\r\n           ROUNDING_MODE == 3 ? -0 : 0);\r\n        }\r\n      }\r\n\r\n      xe = bitFloor(xe);\r\n      ye = bitFloor(ye);\r\n      xc = xc.slice();\r\n\r\n      // Determine which is the bigger number.\r\n      if (a = xe - ye) {\r\n\r\n        if (xLTy = a < 0) {\r\n          a = -a;\r\n          t = xc;\r\n        } else {\r\n          ye = xe;\r\n          t = yc;\r\n        }\r\n\r\n        t.reverse();\r\n\r\n        // Prepend zeros to equalise exponents.\r\n        for (b = a; b--; t.push(0));\r\n        t.reverse();\r\n      } else {\r\n\r\n        // Exponents equal. Check digit by digit.\r\n        j = (xLTy = (a = xc.length) < (b = yc.length)) ? a : b;\r\n\r\n        for (a = b = 0; b < j; b++) {\r\n\r\n          if (xc[b] != yc[b]) {\r\n            xLTy = xc[b] < yc[b];\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      // x < y? Point xc to the array of the bigger number.\r\n      if (xLTy) {\r\n        t = xc;\r\n        xc = yc;\r\n        yc = t;\r\n        y.s = -y.s;\r\n      }\r\n\r\n      b = (j = yc.length) - (i = xc.length);\r\n\r\n      // Append zeros to xc if shorter.\r\n      // No need to add zeros to yc if shorter as subtract only needs to start at yc.length.\r\n      if (b > 0) for (; b--; xc[i++] = 0);\r\n      b = BASE - 1;\r\n\r\n      // Subtract yc from xc.\r\n      for (; j > a;) {\r\n\r\n        if (xc[--j] < yc[j]) {\r\n          for (i = j; i && !xc[--i]; xc[i] = b);\r\n          --xc[i];\r\n          xc[j] += BASE;\r\n        }\r\n\r\n        xc[j] -= yc[j];\r\n      }\r\n\r\n      // Remove leading zeros and adjust exponent accordingly.\r\n      for (; xc[0] == 0; xc.splice(0, 1), --ye);\r\n\r\n      // Zero?\r\n      if (!xc[0]) {\r\n\r\n        // Following IEEE 754 (2008) 6.3,\r\n        // n - n = +0  but  n - n = -0  when rounding towards -Infinity.\r\n        y.s = ROUNDING_MODE == 3 ? -1 : 1;\r\n        y.c = [y.e = 0];\r\n        return y;\r\n      }\r\n\r\n      // No need to check for Infinity as +x - +y != Infinity && -x - -y != Infinity\r\n      // for finite x and y.\r\n      return normalise(y, xc, ye);\r\n    };\r\n\r\n\r\n    /*\r\n     *   n % 0 =  N\r\n     *   n % N =  N\r\n     *   n % I =  n\r\n     *   0 % n =  0\r\n     *  -0 % n = -0\r\n     *   0 % 0 =  N\r\n     *   0 % N =  N\r\n     *   0 % I =  0\r\n     *   N % n =  N\r\n     *   N % 0 =  N\r\n     *   N % N =  N\r\n     *   N % I =  N\r\n     *   I % n =  N\r\n     *   I % 0 =  N\r\n     *   I % N =  N\r\n     *   I % I =  N\r\n     *\r\n     * Return a new BigNumber whose value is the value of this BigNumber modulo the value of\r\n     * BigNumber(y, b). The result depends on the value of MODULO_MODE.\r\n     */\r\n    P.modulo = P.mod = function (y, b) {\r\n      var q, s,\r\n        x = this;\r\n\r\n      y = new BigNumber(y, b);\r\n\r\n      // Return NaN if x is Infinity or NaN, or y is NaN or zero.\r\n      if (!x.c || !y.s || y.c && !y.c[0]) {\r\n        return new BigNumber(NaN);\r\n\r\n      // Return x if y is Infinity or x is zero.\r\n      } else if (!y.c || x.c && !x.c[0]) {\r\n        return new BigNumber(x);\r\n      }\r\n\r\n      if (MODULO_MODE == 9) {\r\n\r\n        // Euclidian division: q = sign(y) * floor(x / abs(y))\r\n        // r = x - qy    where  0 <= r < abs(y)\r\n        s = y.s;\r\n        y.s = 1;\r\n        q = div(x, y, 0, 3);\r\n        y.s = s;\r\n        q.s *= s;\r\n      } else {\r\n        q = div(x, y, 0, MODULO_MODE);\r\n      }\r\n\r\n      y = x.minus(q.times(y));\r\n\r\n      // To match JavaScript %, ensure sign of zero is sign of dividend.\r\n      if (!y.c[0] && MODULO_MODE == 1) y.s = x.s;\r\n\r\n      return y;\r\n    };\r\n\r\n\r\n    /*\r\n     *  n * 0 = 0\r\n     *  n * N = N\r\n     *  n * I = I\r\n     *  0 * n = 0\r\n     *  0 * 0 = 0\r\n     *  0 * N = N\r\n     *  0 * I = N\r\n     *  N * n = N\r\n     *  N * 0 = N\r\n     *  N * N = N\r\n     *  N * I = N\r\n     *  I * n = I\r\n     *  I * 0 = N\r\n     *  I * N = N\r\n     *  I * I = I\r\n     *\r\n     * Return a new BigNumber whose value is the value of this BigNumber multiplied by the value\r\n     * of BigNumber(y, b).\r\n     */\r\n    P.multipliedBy = P.times = function (y, b) {\r\n      var c, e, i, j, k, m, xcL, xlo, xhi, ycL, ylo, yhi, zc,\r\n        base, sqrtBase,\r\n        x = this,\r\n        xc = x.c,\r\n        yc = (y = new BigNumber(y, b)).c;\r\n\r\n      // Either NaN, Infinity or 0?\r\n      if (!xc || !yc || !xc[0] || !yc[0]) {\r\n\r\n        // Return NaN if either is NaN, or one is 0 and the other is Infinity.\r\n        if (!x.s || !y.s || xc && !xc[0] && !yc || yc && !yc[0] && !xc) {\r\n          y.c = y.e = y.s = null;\r\n        } else {\r\n          y.s *= x.s;\r\n\r\n          // Return Infinity if either is Infinity.\r\n          if (!xc || !yc) {\r\n            y.c = y.e = null;\r\n\r\n          // Return 0 if either is 0.\r\n          } else {\r\n            y.c = [0];\r\n            y.e = 0;\r\n          }\r\n        }\r\n\r\n        return y;\r\n      }\r\n\r\n      e = bitFloor(x.e / LOG_BASE) + bitFloor(y.e / LOG_BASE);\r\n      y.s *= x.s;\r\n      xcL = xc.length;\r\n      ycL = yc.length;\r\n\r\n      // Ensure xc points to longer array and xcL to its length.\r\n      if (xcL < ycL) {\r\n        zc = xc;\r\n        xc = yc;\r\n        yc = zc;\r\n        i = xcL;\r\n        xcL = ycL;\r\n        ycL = i;\r\n      }\r\n\r\n      // Initialise the result array with zeros.\r\n      for (i = xcL + ycL, zc = []; i--; zc.push(0));\r\n\r\n      base = BASE;\r\n      sqrtBase = SQRT_BASE;\r\n\r\n      for (i = ycL; --i >= 0;) {\r\n        c = 0;\r\n        ylo = yc[i] % sqrtBase;\r\n        yhi = yc[i] / sqrtBase | 0;\r\n\r\n        for (k = xcL, j = i + k; j > i;) {\r\n          xlo = xc[--k] % sqrtBase;\r\n          xhi = xc[k] / sqrtBase | 0;\r\n          m = yhi * xlo + xhi * ylo;\r\n          xlo = ylo * xlo + ((m % sqrtBase) * sqrtBase) + zc[j] + c;\r\n          c = (xlo / base | 0) + (m / sqrtBase | 0) + yhi * xhi;\r\n          zc[j--] = xlo % base;\r\n        }\r\n\r\n        zc[j] = c;\r\n      }\r\n\r\n      if (c) {\r\n        ++e;\r\n      } else {\r\n        zc.splice(0, 1);\r\n      }\r\n\r\n      return normalise(y, zc, e);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new BigNumber whose value is the value of this BigNumber negated,\r\n     * i.e. multiplied by -1.\r\n     */\r\n    P.negated = function () {\r\n      var x = new BigNumber(this);\r\n      x.s = -x.s || null;\r\n      return x;\r\n    };\r\n\r\n\r\n    /*\r\n     *  n + 0 = n\r\n     *  n + N = N\r\n     *  n + I = I\r\n     *  0 + n = n\r\n     *  0 + 0 = 0\r\n     *  0 + N = N\r\n     *  0 + I = I\r\n     *  N + n = N\r\n     *  N + 0 = N\r\n     *  N + N = N\r\n     *  N + I = N\r\n     *  I + n = I\r\n     *  I + 0 = I\r\n     *  I + N = N\r\n     *  I + I = I\r\n     *\r\n     * Return a new BigNumber whose value is the value of this BigNumber plus the value of\r\n     * BigNumber(y, b).\r\n     */\r\n    P.plus = function (y, b) {\r\n      var t,\r\n        x = this,\r\n        a = x.s;\r\n\r\n      y = new BigNumber(y, b);\r\n      b = y.s;\r\n\r\n      // Either NaN?\r\n      if (!a || !b) return new BigNumber(NaN);\r\n\r\n      // Signs differ?\r\n       if (a != b) {\r\n        y.s = -b;\r\n        return x.minus(y);\r\n      }\r\n\r\n      var xe = x.e / LOG_BASE,\r\n        ye = y.e / LOG_BASE,\r\n        xc = x.c,\r\n        yc = y.c;\r\n\r\n      if (!xe || !ye) {\r\n\r\n        // Return Infinity if either Infinity.\r\n        if (!xc || !yc) return new BigNumber(a / 0);\r\n\r\n        // Either zero?\r\n        // Return y if y is non-zero, x if x is non-zero, or zero if both are zero.\r\n        if (!xc[0] || !yc[0]) return yc[0] ? y : new BigNumber(xc[0] ? x : a * 0);\r\n      }\r\n\r\n      xe = bitFloor(xe);\r\n      ye = bitFloor(ye);\r\n      xc = xc.slice();\r\n\r\n      // Prepend zeros to equalise exponents. Faster to use reverse then do unshifts.\r\n      if (a = xe - ye) {\r\n        if (a > 0) {\r\n          ye = xe;\r\n          t = yc;\r\n        } else {\r\n          a = -a;\r\n          t = xc;\r\n        }\r\n\r\n        t.reverse();\r\n        for (; a--; t.push(0));\r\n        t.reverse();\r\n      }\r\n\r\n      a = xc.length;\r\n      b = yc.length;\r\n\r\n      // Point xc to the longer array, and b to the shorter length.\r\n      if (a - b < 0) {\r\n        t = yc;\r\n        yc = xc;\r\n        xc = t;\r\n        b = a;\r\n      }\r\n\r\n      // Only start adding at yc.length - 1 as the further digits of xc can be ignored.\r\n      for (a = 0; b;) {\r\n        a = (xc[--b] = xc[b] + yc[b] + a) / BASE | 0;\r\n        xc[b] = BASE === xc[b] ? 0 : xc[b] % BASE;\r\n      }\r\n\r\n      if (a) {\r\n        xc = [a].concat(xc);\r\n        ++ye;\r\n      }\r\n\r\n      // No need to check for zero, as +x + +y != 0 && -x + -y != 0\r\n      // ye = MAX_EXP + 1 possible\r\n      return normalise(y, xc, ye);\r\n    };\r\n\r\n\r\n    /*\r\n     * If sd is undefined or null or true or false, return the number of significant digits of\r\n     * the value of this BigNumber, or null if the value of this BigNumber is Infinity or NaN.\r\n     * If sd is true include integer-part trailing zeros in the count.\r\n     *\r\n     * Otherwise, if sd is a number, return a new BigNumber whose value is the value of this\r\n     * BigNumber rounded to a maximum of sd significant digits using rounding mode rm, or\r\n     * ROUNDING_MODE if rm is omitted.\r\n     *\r\n     * sd {number|boolean} number: significant digits: integer, 1 to MAX inclusive.\r\n     *                     boolean: whether to count integer-part trailing zeros: true or false.\r\n     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n     *\r\n     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n     */\r\n    P.precision = P.sd = function (sd, rm) {\r\n      var c, n, v,\r\n        x = this;\r\n\r\n      if (sd != null && sd !== !!sd) {\r\n        intCheck(sd, 1, MAX);\r\n        if (rm == null) rm = ROUNDING_MODE;\r\n        else intCheck(rm, 0, 8);\r\n\r\n        return round(new BigNumber(x), sd, rm);\r\n      }\r\n\r\n      if (!(c = x.c)) return null;\r\n      v = c.length - 1;\r\n      n = v * LOG_BASE + 1;\r\n\r\n      if (v = c[v]) {\r\n\r\n        // Subtract the number of trailing zeros of the last element.\r\n        for (; v % 10 == 0; v /= 10, n--);\r\n\r\n        // Add the number of digits of the first element.\r\n        for (v = c[0]; v >= 10; v /= 10, n++);\r\n      }\r\n\r\n      if (sd && x.e + 1 > n) n = x.e + 1;\r\n\r\n      return n;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a new BigNumber whose value is the value of this BigNumber shifted by k places\r\n     * (powers of 10). Shift to the right if n > 0, and to the left if n < 0.\r\n     *\r\n     * k {number} Integer, -MAX_SAFE_INTEGER to MAX_SAFE_INTEGER inclusive.\r\n     *\r\n     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {k}'\r\n     */\r\n    P.shiftedBy = function (k) {\r\n      intCheck(k, -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER);\r\n      return this.times('1e' + k);\r\n    };\r\n\r\n\r\n    /*\r\n     *  sqrt(-n) =  N\r\n     *  sqrt(N) =  N\r\n     *  sqrt(-I) =  N\r\n     *  sqrt(I) =  I\r\n     *  sqrt(0) =  0\r\n     *  sqrt(-0) = -0\r\n     *\r\n     * Return a new BigNumber whose value is the square root of the value of this BigNumber,\r\n     * rounded according to DECIMAL_PLACES and ROUNDING_MODE.\r\n     */\r\n    P.squareRoot = P.sqrt = function () {\r\n      var m, n, r, rep, t,\r\n        x = this,\r\n        c = x.c,\r\n        s = x.s,\r\n        e = x.e,\r\n        dp = DECIMAL_PLACES + 4,\r\n        half = new BigNumber('0.5');\r\n\r\n      // Negative/NaN/Infinity/zero?\r\n      if (s !== 1 || !c || !c[0]) {\r\n        return new BigNumber(!s || s < 0 && (!c || c[0]) ? NaN : c ? x : 1 / 0);\r\n      }\r\n\r\n      // Initial estimate.\r\n      s = Math.sqrt(+valueOf(x));\r\n\r\n      // Math.sqrt underflow/overflow?\r\n      // Pass x to Math.sqrt as integer, then adjust the exponent of the result.\r\n      if (s == 0 || s == 1 / 0) {\r\n        n = coeffToString(c);\r\n        if ((n.length + e) % 2 == 0) n += '0';\r\n        s = Math.sqrt(+n);\r\n        e = bitFloor((e + 1) / 2) - (e < 0 || e % 2);\r\n\r\n        if (s == 1 / 0) {\r\n          n = '5e' + e;\r\n        } else {\r\n          n = s.toExponential();\r\n          n = n.slice(0, n.indexOf('e') + 1) + e;\r\n        }\r\n\r\n        r = new BigNumber(n);\r\n      } else {\r\n        r = new BigNumber(s + '');\r\n      }\r\n\r\n      // Check for zero.\r\n      // r could be zero if MIN_EXP is changed after the this value was created.\r\n      // This would cause a division by zero (x/t) and hence Infinity below, which would cause\r\n      // coeffToString to throw.\r\n      if (r.c[0]) {\r\n        e = r.e;\r\n        s = e + dp;\r\n        if (s < 3) s = 0;\r\n\r\n        // Newton-Raphson iteration.\r\n        for (; ;) {\r\n          t = r;\r\n          r = half.times(t.plus(div(x, t, dp, 1)));\r\n\r\n          if (coeffToString(t.c).slice(0, s) === (n = coeffToString(r.c)).slice(0, s)) {\r\n\r\n            // The exponent of r may here be one less than the final result exponent,\r\n            // e.g 0.0009999 (e-4) --> 0.001 (e-3), so adjust s so the rounding digits\r\n            // are indexed correctly.\r\n            if (r.e < e) --s;\r\n            n = n.slice(s - 3, s + 1);\r\n\r\n            // The 4th rounding digit may be in error by -1 so if the 4 rounding digits\r\n            // are 9999 or 4999 (i.e. approaching a rounding boundary) continue the\r\n            // iteration.\r\n            if (n == '9999' || !rep && n == '4999') {\r\n\r\n              // On the first iteration only, check to see if rounding up gives the\r\n              // exact result as the nines may infinitely repeat.\r\n              if (!rep) {\r\n                round(t, t.e + DECIMAL_PLACES + 2, 0);\r\n\r\n                if (t.times(t).eq(x)) {\r\n                  r = t;\r\n                  break;\r\n                }\r\n              }\r\n\r\n              dp += 4;\r\n              s += 4;\r\n              rep = 1;\r\n            } else {\r\n\r\n              // If rounding digits are null, 0{0,4} or 50{0,3}, check for exact\r\n              // result. If not, then there are further digits and m will be truthy.\r\n              if (!+n || !+n.slice(1) && n.charAt(0) == '5') {\r\n\r\n                // Truncate to the first rounding digit.\r\n                round(r, r.e + DECIMAL_PLACES + 2, 1);\r\n                m = !r.times(r).eq(x);\r\n              }\r\n\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      return round(r, r.e + DECIMAL_PLACES + 1, ROUNDING_MODE, m);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of this BigNumber in exponential notation and\r\n     * rounded using ROUNDING_MODE to dp fixed decimal places.\r\n     *\r\n     * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n     *\r\n     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n     */\r\n    P.toExponential = function (dp, rm) {\r\n      if (dp != null) {\r\n        intCheck(dp, 0, MAX);\r\n        dp++;\r\n      }\r\n      return format(this, dp, rm, 1);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of this BigNumber in fixed-point notation rounding\r\n     * to dp fixed decimal places using rounding mode rm, or ROUNDING_MODE if rm is omitted.\r\n     *\r\n     * Note: as with JavaScript's number type, (-0).toFixed(0) is '0',\r\n     * but e.g. (-0.00001).toFixed(0) is '-0'.\r\n     *\r\n     * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n     *\r\n     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n     */\r\n    P.toFixed = function (dp, rm) {\r\n      if (dp != null) {\r\n        intCheck(dp, 0, MAX);\r\n        dp = dp + this.e + 1;\r\n      }\r\n      return format(this, dp, rm);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of this BigNumber in fixed-point notation rounded\r\n     * using rm or ROUNDING_MODE to dp decimal places, and formatted according to the properties\r\n     * of the format or FORMAT object (see BigNumber.set).\r\n     *\r\n     * The formatting object may contain some or all of the properties shown below.\r\n     *\r\n     * FORMAT = {\r\n     *   prefix: '',\r\n     *   groupSize: 3,\r\n     *   secondaryGroupSize: 0,\r\n     *   groupSeparator: ',',\r\n     *   decimalSeparator: '.',\r\n     *   fractionGroupSize: 0,\r\n     *   fractionGroupSeparator: '\\xA0',      // non-breaking space\r\n     *   suffix: ''\r\n     * };\r\n     *\r\n     * [dp] {number} Decimal places. Integer, 0 to MAX inclusive.\r\n     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n     * [format] {object} Formatting options. See FORMAT pbject above.\r\n     *\r\n     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {dp|rm}'\r\n     * '[BigNumber Error] Argument not an object: {format}'\r\n     */\r\n    P.toFormat = function (dp, rm, format) {\r\n      var str,\r\n        x = this;\r\n\r\n      if (format == null) {\r\n        if (dp != null && rm && typeof rm == 'object') {\r\n          format = rm;\r\n          rm = null;\r\n        } else if (dp && typeof dp == 'object') {\r\n          format = dp;\r\n          dp = rm = null;\r\n        } else {\r\n          format = FORMAT;\r\n        }\r\n      } else if (typeof format != 'object') {\r\n        throw Error\r\n          (bignumberError + 'Argument not an object: ' + format);\r\n      }\r\n\r\n      str = x.toFixed(dp, rm);\r\n\r\n      if (x.c) {\r\n        var i,\r\n          arr = str.split('.'),\r\n          g1 = +format.groupSize,\r\n          g2 = +format.secondaryGroupSize,\r\n          groupSeparator = format.groupSeparator || '',\r\n          intPart = arr[0],\r\n          fractionPart = arr[1],\r\n          isNeg = x.s < 0,\r\n          intDigits = isNeg ? intPart.slice(1) : intPart,\r\n          len = intDigits.length;\r\n\r\n        if (g2) {\r\n          i = g1;\r\n          g1 = g2;\r\n          g2 = i;\r\n          len -= i;\r\n        }\r\n\r\n        if (g1 > 0 && len > 0) {\r\n          i = len % g1 || g1;\r\n          intPart = intDigits.substr(0, i);\r\n          for (; i < len; i += g1) intPart += groupSeparator + intDigits.substr(i, g1);\r\n          if (g2 > 0) intPart += groupSeparator + intDigits.slice(i);\r\n          if (isNeg) intPart = '-' + intPart;\r\n        }\r\n\r\n        str = fractionPart\r\n         ? intPart + (format.decimalSeparator || '') + ((g2 = +format.fractionGroupSize)\r\n          ? fractionPart.replace(new RegExp('\\\\d{' + g2 + '}\\\\B', 'g'),\r\n           '$&' + (format.fractionGroupSeparator || ''))\r\n          : fractionPart)\r\n         : intPart;\r\n      }\r\n\r\n      return (format.prefix || '') + str + (format.suffix || '');\r\n    };\r\n\r\n\r\n    /*\r\n     * Return an array of two BigNumbers representing the value of this BigNumber as a simple\r\n     * fraction with an integer numerator and an integer denominator.\r\n     * The denominator will be a positive non-zero value less than or equal to the specified\r\n     * maximum denominator. If a maximum denominator is not specified, the denominator will be\r\n     * the lowest value necessary to represent the number exactly.\r\n     *\r\n     * [md] {number|string|BigNumber} Integer >= 1, or Infinity. The maximum denominator.\r\n     *\r\n     * '[BigNumber Error] Argument {not an integer|out of range} : {md}'\r\n     */\r\n    P.toFraction = function (md) {\r\n      var d, d0, d1, d2, e, exp, n, n0, n1, q, r, s,\r\n        x = this,\r\n        xc = x.c;\r\n\r\n      if (md != null) {\r\n        n = new BigNumber(md);\r\n\r\n        // Throw if md is less than one or is not an integer, unless it is Infinity.\r\n        if (!n.isInteger() && (n.c || n.s !== 1) || n.lt(ONE)) {\r\n          throw Error\r\n            (bignumberError + 'Argument ' +\r\n              (n.isInteger() ? 'out of range: ' : 'not an integer: ') + valueOf(n));\r\n        }\r\n      }\r\n\r\n      if (!xc) return new BigNumber(x);\r\n\r\n      d = new BigNumber(ONE);\r\n      n1 = d0 = new BigNumber(ONE);\r\n      d1 = n0 = new BigNumber(ONE);\r\n      s = coeffToString(xc);\r\n\r\n      // Determine initial denominator.\r\n      // d is a power of 10 and the minimum max denominator that specifies the value exactly.\r\n      e = d.e = s.length - x.e - 1;\r\n      d.c[0] = POWS_TEN[(exp = e % LOG_BASE) < 0 ? LOG_BASE + exp : exp];\r\n      md = !md || n.comparedTo(d) > 0 ? (e > 0 ? d : n1) : n;\r\n\r\n      exp = MAX_EXP;\r\n      MAX_EXP = 1 / 0;\r\n      n = new BigNumber(s);\r\n\r\n      // n0 = d1 = 0\r\n      n0.c[0] = 0;\r\n\r\n      for (; ;)  {\r\n        q = div(n, d, 0, 1);\r\n        d2 = d0.plus(q.times(d1));\r\n        if (d2.comparedTo(md) == 1) break;\r\n        d0 = d1;\r\n        d1 = d2;\r\n        n1 = n0.plus(q.times(d2 = n1));\r\n        n0 = d2;\r\n        d = n.minus(q.times(d2 = d));\r\n        n = d2;\r\n      }\r\n\r\n      d2 = div(md.minus(d0), d1, 0, 1);\r\n      n0 = n0.plus(d2.times(n1));\r\n      d0 = d0.plus(d2.times(d1));\r\n      n0.s = n1.s = x.s;\r\n      e = e * 2;\r\n\r\n      // Determine which fraction is closer to x, n0/d0 or n1/d1\r\n      r = div(n1, d1, e, ROUNDING_MODE).minus(x).abs().comparedTo(\r\n          div(n0, d0, e, ROUNDING_MODE).minus(x).abs()) < 1 ? [n1, d1] : [n0, d0];\r\n\r\n      MAX_EXP = exp;\r\n\r\n      return r;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return the value of this BigNumber converted to a number primitive.\r\n     */\r\n    P.toNumber = function () {\r\n      return +valueOf(this);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of this BigNumber rounded to sd significant digits\r\n     * using rounding mode rm or ROUNDING_MODE. If sd is less than the number of digits\r\n     * necessary to represent the integer part of the value in fixed-point notation, then use\r\n     * exponential notation.\r\n     *\r\n     * [sd] {number} Significant digits. Integer, 1 to MAX inclusive.\r\n     * [rm] {number} Rounding mode. Integer, 0 to 8 inclusive.\r\n     *\r\n     * '[BigNumber Error] Argument {not a primitive number|not an integer|out of range}: {sd|rm}'\r\n     */\r\n    P.toPrecision = function (sd, rm) {\r\n      if (sd != null) intCheck(sd, 1, MAX);\r\n      return format(this, sd, rm, 2);\r\n    };\r\n\r\n\r\n    /*\r\n     * Return a string representing the value of this BigNumber in base b, or base 10 if b is\r\n     * omitted. If a base is specified, including base 10, round according to DECIMAL_PLACES and\r\n     * ROUNDING_MODE. If a base is not specified, and this BigNumber has a positive exponent\r\n     * that is equal to or greater than TO_EXP_POS, or a negative exponent equal to or less than\r\n     * TO_EXP_NEG, return exponential notation.\r\n     *\r\n     * [b] {number} Integer, 2 to ALPHABET.length inclusive.\r\n     *\r\n     * '[BigNumber Error] Base {not a primitive number|not an integer|out of range}: {b}'\r\n     */\r\n    P.toString = function (b) {\r\n      var str,\r\n        n = this,\r\n        s = n.s,\r\n        e = n.e;\r\n\r\n      // Infinity or NaN?\r\n      if (e === null) {\r\n        if (s) {\r\n          str = 'Infinity';\r\n          if (s < 0) str = '-' + str;\r\n        } else {\r\n          str = 'NaN';\r\n        }\r\n      } else {\r\n        if (b == null) {\r\n          str = e <= TO_EXP_NEG || e >= TO_EXP_POS\r\n           ? toExponential(coeffToString(n.c), e)\r\n           : toFixedPoint(coeffToString(n.c), e, '0');\r\n        } else if (b === 10 && alphabetHasNormalDecimalDigits) {\r\n          n = round(new BigNumber(n), DECIMAL_PLACES + e + 1, ROUNDING_MODE);\r\n          str = toFixedPoint(coeffToString(n.c), n.e, '0');\r\n        } else {\r\n          intCheck(b, 2, ALPHABET.length, 'Base');\r\n          str = convertBase(toFixedPoint(coeffToString(n.c), e, '0'), 10, b, s, true);\r\n        }\r\n\r\n        if (s < 0 && n.c[0]) str = '-' + str;\r\n      }\r\n\r\n      return str;\r\n    };\r\n\r\n\r\n    /*\r\n     * Return as toString, but do not accept a base argument, and include the minus sign for\r\n     * negative zero.\r\n     */\r\n    P.valueOf = P.toJSON = function () {\r\n      return valueOf(this);\r\n    };\r\n\r\n\r\n    P._isBigNumber = true;\r\n\r\n    if (configObject != null) BigNumber.set(configObject);\r\n\r\n    return BigNumber;\r\n  }\r\n\r\n\r\n  // PRIVATE HELPER FUNCTIONS\r\n\r\n  // These functions don't need access to variables,\r\n  // e.g. DECIMAL_PLACES, in the scope of the `clone` function above.\r\n\r\n\r\n  function bitFloor(n) {\r\n    var i = n | 0;\r\n    return n > 0 || n === i ? i : i - 1;\r\n  }\r\n\r\n\r\n  // Return a coefficient array as a string of base 10 digits.\r\n  function coeffToString(a) {\r\n    var s, z,\r\n      i = 1,\r\n      j = a.length,\r\n      r = a[0] + '';\r\n\r\n    for (; i < j;) {\r\n      s = a[i++] + '';\r\n      z = LOG_BASE - s.length;\r\n      for (; z--; s = '0' + s);\r\n      r += s;\r\n    }\r\n\r\n    // Determine trailing zeros.\r\n    for (j = r.length; r.charCodeAt(--j) === 48;);\r\n\r\n    return r.slice(0, j + 1 || 1);\r\n  }\r\n\r\n\r\n  // Compare the value of BigNumbers x and y.\r\n  function compare(x, y) {\r\n    var a, b,\r\n      xc = x.c,\r\n      yc = y.c,\r\n      i = x.s,\r\n      j = y.s,\r\n      k = x.e,\r\n      l = y.e;\r\n\r\n    // Either NaN?\r\n    if (!i || !j) return null;\r\n\r\n    a = xc && !xc[0];\r\n    b = yc && !yc[0];\r\n\r\n    // Either zero?\r\n    if (a || b) return a ? b ? 0 : -j : i;\r\n\r\n    // Signs differ?\r\n    if (i != j) return i;\r\n\r\n    a = i < 0;\r\n    b = k == l;\r\n\r\n    // Either Infinity?\r\n    if (!xc || !yc) return b ? 0 : !xc ^ a ? 1 : -1;\r\n\r\n    // Compare exponents.\r\n    if (!b) return k > l ^ a ? 1 : -1;\r\n\r\n    j = (k = xc.length) < (l = yc.length) ? k : l;\r\n\r\n    // Compare digit by digit.\r\n    for (i = 0; i < j; i++) if (xc[i] != yc[i]) return xc[i] > yc[i] ^ a ? 1 : -1;\r\n\r\n    // Compare lengths.\r\n    return k == l ? 0 : k > l ^ a ? 1 : -1;\r\n  }\r\n\r\n\r\n  /*\r\n   * Check that n is a primitive number, an integer, and in range, otherwise throw.\r\n   */\r\n  function intCheck(n, min, max, name) {\r\n    if (n < min || n > max || n !== mathfloor(n)) {\r\n      throw Error\r\n       (bignumberError + (name || 'Argument') + (typeof n == 'number'\r\n         ? n < min || n > max ? ' out of range: ' : ' not an integer: '\r\n         : ' not a primitive number: ') + String(n));\r\n    }\r\n  }\r\n\r\n\r\n  // Assumes finite n.\r\n  function isOdd(n) {\r\n    var k = n.c.length - 1;\r\n    return bitFloor(n.e / LOG_BASE) == k && n.c[k] % 2 != 0;\r\n  }\r\n\r\n\r\n  function toExponential(str, e) {\r\n    return (str.length > 1 ? str.charAt(0) + '.' + str.slice(1) : str) +\r\n     (e < 0 ? 'e' : 'e+') + e;\r\n  }\r\n\r\n\r\n  function toFixedPoint(str, e, z) {\r\n    var len, zs;\r\n\r\n    // Negative exponent?\r\n    if (e < 0) {\r\n\r\n      // Prepend zeros.\r\n      for (zs = z + '.'; ++e; zs += z);\r\n      str = zs + str;\r\n\r\n    // Positive exponent\r\n    } else {\r\n      len = str.length;\r\n\r\n      // Append zeros.\r\n      if (++e > len) {\r\n        for (zs = z, e -= len; --e; zs += z);\r\n        str += zs;\r\n      } else if (e < len) {\r\n        str = str.slice(0, e) + '.' + str.slice(e);\r\n      }\r\n    }\r\n\r\n    return str;\r\n  }\r\n\r\n\r\n  // EXPORT\r\n\r\n\r\n  BigNumber = clone();\r\n  BigNumber['default'] = BigNumber.BigNumber = BigNumber;\r\n\r\n  // AMD.\r\n  if (typeof define == 'function' && define.amd) {\r\n    define(function () { return BigNumber; });\r\n\r\n  // Node.js and other environments that support module.exports.\r\n  } else if (typeof module != 'undefined' && module.exports) {\r\n    module.exports = BigNumber;\r\n\r\n  // Browser.\r\n  } else {\r\n    if (!globalObject) {\r\n      globalObject = typeof self != 'undefined' && self ? self : window;\r\n    }\r\n\r\n    globalObject.BigNumber = BigNumber;\r\n  }\r\n})(this);\r\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nconst base64 = require('base64-js')\nconst ieee754 = require('ieee754')\nconst customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nconst K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    const arr = new Uint8Array(1)\n    const proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  const buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  const valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  const b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(value[Symbol.toPrimitive]('string'), encodingOrOffset, length)\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  const length = byteLength(string, encoding) | 0\n  let buf = createBuffer(length)\n\n  const actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  const length = array.length < 0 ? 0 : checked(array.length) | 0\n  const buf = createBuffer(length)\n  for (let i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    const copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  let buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    const len = checked(obj.length) | 0\n    const buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  let x = a.length\n  let y = b.length\n\n  for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  let i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  const buffer = Buffer.allocUnsafe(length)\n  let pos = 0\n  for (i = 0; i < list.length; ++i) {\n    let buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        if (!Buffer.isBuffer(buf)) buf = Buffer.from(buf)\n        buf.copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  const len = string.length\n  const mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  let loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  const i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  const len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (let i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  const len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (let i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  const len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (let i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  const length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  let str = ''\n  const max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  let x = thisEnd - thisStart\n  let y = end - start\n  const len = Math.min(x, y)\n\n  const thisCopy = this.slice(thisStart, thisEnd)\n  const targetCopy = target.slice(start, end)\n\n  for (let i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  let indexSize = 1\n  let arrLength = arr.length\n  let valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  let i\n  if (dir) {\n    let foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      let found = true\n      for (let j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  const remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  const strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  let i\n  for (i = 0; i < length; ++i) {\n    const parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  const remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  let loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  const res = []\n\n  let i = start\n  while (i < end) {\n    const firstByte = buf[i]\n    let codePoint = null\n    let bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      let secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nconst MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  const len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  let res = ''\n  let i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  let ret = ''\n  end = Math.min(buf.length, end)\n\n  for (let i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  const len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  let out = ''\n  for (let i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  const bytes = buf.slice(start, end)\n  let res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (let i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  const len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  const newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  let val = this[offset + --byteLength]\n  let mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const lo = first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24\n\n  const hi = this[++offset] +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    last * 2 ** 24\n\n  return BigInt(lo) + (BigInt(hi) << BigInt(32))\n})\n\nBuffer.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const hi = first * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  const lo = this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last\n\n  return (BigInt(hi) << BigInt(32)) + BigInt(lo)\n})\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let val = this[offset]\n  let mul = 1\n  let i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  let i = byteLength\n  let mul = 1\n  let val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  const val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = this[offset + 4] +\n    this[offset + 5] * 2 ** 8 +\n    this[offset + 6] * 2 ** 16 +\n    (last << 24) // Overflow\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(first +\n    this[++offset] * 2 ** 8 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 24)\n})\n\nBuffer.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE (offset) {\n  offset = offset >>> 0\n  validateNumber(offset, 'offset')\n  const first = this[offset]\n  const last = this[offset + 7]\n  if (first === undefined || last === undefined) {\n    boundsError(offset, this.length - 8)\n  }\n\n  const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    this[++offset]\n\n  return (BigInt(val) << BigInt(32)) +\n    BigInt(this[++offset] * 2 ** 24 +\n    this[++offset] * 2 ** 16 +\n    this[++offset] * 2 ** 8 +\n    last)\n})\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let mul = 1\n  let i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    const maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction wrtBigUInt64LE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  lo = lo >> 8\n  buf[offset++] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  hi = hi >> 8\n  buf[offset++] = hi\n  return offset\n}\n\nfunction wrtBigUInt64BE (buf, value, offset, min, max) {\n  checkIntBI(value, min, max, buf, offset, 7)\n\n  let lo = Number(value & BigInt(0xffffffff))\n  buf[offset + 7] = lo\n  lo = lo >> 8\n  buf[offset + 6] = lo\n  lo = lo >> 8\n  buf[offset + 5] = lo\n  lo = lo >> 8\n  buf[offset + 4] = lo\n  let hi = Number(value >> BigInt(32) & BigInt(0xffffffff))\n  buf[offset + 3] = hi\n  hi = hi >> 8\n  buf[offset + 2] = hi\n  hi = hi >> 8\n  buf[offset + 1] = hi\n  hi = hi >> 8\n  buf[offset] = hi\n  return offset + 8\n}\n\nBuffer.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt('0xffffffffffffffff'))\n})\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = 0\n  let mul = 1\n  let sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    const limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  let i = byteLength - 1\n  let mul = 1\n  let sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE (value, offset = 0) {\n  return wrtBigUInt64LE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nBuffer.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE (value, offset = 0) {\n  return wrtBigUInt64BE(this, value, offset, -BigInt('0x8000000000000000'), BigInt('0x7fffffffffffffff'))\n})\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  const len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      const code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  let i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    const bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    const len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// CUSTOM ERRORS\n// =============\n\n// Simplified versions from Node, changed for Buffer-only usage\nconst errors = {}\nfunction E (sym, getMessage, Base) {\n  errors[sym] = class NodeError extends Base {\n    constructor () {\n      super()\n\n      Object.defineProperty(this, 'message', {\n        value: getMessage.apply(this, arguments),\n        writable: true,\n        configurable: true\n      })\n\n      // Add the error code to the name to include it in the stack trace.\n      this.name = `${this.name} [${sym}]`\n      // Access the stack to generate the error message including the error code\n      // from the name.\n      this.stack // eslint-disable-line no-unused-expressions\n      // Reset the name to the actual name.\n      delete this.name\n    }\n\n    get code () {\n      return sym\n    }\n\n    set code (value) {\n      Object.defineProperty(this, 'code', {\n        configurable: true,\n        enumerable: true,\n        value,\n        writable: true\n      })\n    }\n\n    toString () {\n      return `${this.name} [${sym}]: ${this.message}`\n    }\n  }\n}\n\nE('ERR_BUFFER_OUT_OF_BOUNDS',\n  function (name) {\n    if (name) {\n      return `${name} is outside of buffer bounds`\n    }\n\n    return 'Attempt to access memory outside buffer bounds'\n  }, RangeError)\nE('ERR_INVALID_ARG_TYPE',\n  function (name, actual) {\n    return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`\n  }, TypeError)\nE('ERR_OUT_OF_RANGE',\n  function (str, range, input) {\n    let msg = `The value of \"${str}\" is out of range.`\n    let received = input\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    }\n    msg += ` It must be ${range}. Received ${received}`\n    return msg\n  }, RangeError)\n\nfunction addNumericalSeparator (val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\n\n// CHECK FUNCTIONS\n// ===============\n\nfunction checkBounds (buf, offset, byteLength) {\n  validateNumber(offset, 'offset')\n  if (buf[offset] === undefined || buf[offset + byteLength] === undefined) {\n    boundsError(offset, buf.length - (byteLength + 1))\n  }\n}\n\nfunction checkIntBI (value, min, max, buf, offset, byteLength) {\n  if (value > max || value < min) {\n    const n = typeof min === 'bigint' ? 'n' : ''\n    let range\n    if (byteLength > 3) {\n      if (min === 0 || min === BigInt(0)) {\n        range = `>= 0${n} and < 2${n} ** ${(byteLength + 1) * 8}${n}`\n      } else {\n        range = `>= -(2${n} ** ${(byteLength + 1) * 8 - 1}${n}) and < 2 ** ` +\n                `${(byteLength + 1) * 8 - 1}${n}`\n      }\n    } else {\n      range = `>= ${min}${n} and <= ${max}${n}`\n    }\n    throw new errors.ERR_OUT_OF_RANGE('value', range, value)\n  }\n  checkBounds(buf, offset, byteLength)\n}\n\nfunction validateNumber (value, name) {\n  if (typeof value !== 'number') {\n    throw new errors.ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n}\n\nfunction boundsError (value, length, type) {\n  if (Math.floor(value) !== value) {\n    validateNumber(value, type)\n    throw new errors.ERR_OUT_OF_RANGE(type || 'offset', 'an integer', value)\n  }\n\n  if (length < 0) {\n    throw new errors.ERR_BUFFER_OUT_OF_BOUNDS()\n  }\n\n  throw new errors.ERR_OUT_OF_RANGE(type || 'offset',\n                                    `>= ${type ? 1 : 0} and <= ${length}`,\n                                    value)\n}\n\n// HELPER FUNCTIONS\n// ================\n\nconst INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  let codePoint\n  const length = string.length\n  let leadSurrogate = null\n  const bytes = []\n\n  for (let i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  let c, hi, lo\n  const byteArray = []\n  for (let i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  let i\n  for (i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nconst hexSliceLookupTable = (function () {\n  const alphabet = '0123456789abcdef'\n  const table = new Array(256)\n  for (let i = 0; i < 16; ++i) {\n    const i16 = i * 16\n    for (let j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n\n// Return not function with Error if BigInt not supported\nfunction defineBigIntMethod (fn) {\n  return typeof BigInt === 'undefined' ? BufferBigIntNotDefined : fn\n}\n\nfunction BufferBigIntNotDefined () {\n  throw new Error('BigInt not supported')\n}\n","/* jshint esversion: 6 */\n/* jslint node: true */\n'use strict';\n\nmodule.exports = function serialize (object) {\n  if (typeof object === 'number' && isNaN(object)) {\n    throw new Error('NaN is not allowed');\n  }\n\n  if (typeof object === 'number' && !isFinite(object)) {\n    throw new Error('Infinity is not allowed');\n  }\n\n  if (object === null || typeof object !== 'object') {\n    return JSON.stringify(object);\n  }\n\n  if (object.toJSON instanceof Function) {\n    return serialize(object.toJSON());\n  }\n\n  if (Array.isArray(object)) {\n    const values = object.reduce((t, cv, ci) => {\n      const comma = ci === 0 ? '' : ',';\n      const value = cv === undefined || typeof cv === 'symbol' ? null : cv;\n      return `${t}${comma}${serialize(value)}`;\n    }, '');\n    return `[${values}]`;\n  }\n\n  const values = Object.keys(object).sort().reduce((t, cv) => {\n    if (object[cv] === undefined ||\n        typeof object[cv] === 'symbol') {\n      return t;\n    }\n    const comma = t.length === 0 ? '' : ',';\n    return `${t}${comma}${serialize(cv)}:${serialize(object[cv])}`;\n  }, '');\n  return `{${values}}`;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.promisifyEventEmitter = void 0;\nfunction promisifyEventEmitter(event, result) {\n    return new Promise((resolve, reject) => {\n        event.on('end', () => resolve(result));\n        event.on('error', reject);\n    });\n}\nexports.promisifyEventEmitter = promisifyEventEmitter;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n  var envHasBigInt64Array = typeof BigInt64Array !== 'undefined';\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n    if ((a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      for (i of a.entries())\n        if (!equal(i[1], b.get(i[0]))) return false;\n      return true;\n    }\n\n    if ((a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      return true;\n    }\n\n    if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/SparqlEndpointFetcher\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SparqlEndpointFetcher = void 0;\nrequire(\"cross-fetch/polyfill\");\nconst sparqljs_1 = require(\"sparqljs\");\nconst sparqljson_parse_1 = require(\"sparqljson-parse\");\nconst sparqlxml_parse_1 = require(\"sparqlxml-parse\");\nconst stringifyStream = require(\"stream-to-string\");\nconst readable_web_to_node_stream_1 = require(\"@smessie/readable-web-to-node-stream\");\n// tslint:disable:no-var-requires\nconst n3 = require('n3');\nconst isStream = require('is-stream');\n/**\n * A SparqlEndpointFetcher can send queries to SPARQL endpoints,\n * and retrieve and parse the results.\n */\nclass SparqlEndpointFetcher {\n    constructor(args) {\n        args = args || {};\n        this.method = args.method || 'POST';\n        this.additionalUrlParams = args.additionalUrlParams || new URLSearchParams();\n        this.defaultHeaders = args.defaultHeaders || new Headers();\n        this.fetchCb = args.fetch;\n        this.sparqlJsonParser = new sparqljson_parse_1.SparqlJsonParser(args);\n        this.sparqlXmlParser = new sparqlxml_parse_1.SparqlXmlParser(args);\n        this.sparqlParsers = {\n            [SparqlEndpointFetcher.CONTENTTYPE_SPARQL_JSON]: {\n                parseBooleanStream: (sparqlResponseStream) => this.sparqlJsonParser.parseJsonBooleanStream(sparqlResponseStream),\n                parseResultsStream: (sparqlResponseStream) => this.sparqlJsonParser.parseJsonResultsStream(sparqlResponseStream),\n            },\n            [SparqlEndpointFetcher.CONTENTTYPE_SPARQL_XML]: {\n                parseBooleanStream: (sparqlResponseStream) => this.sparqlXmlParser.parseXmlBooleanStream(sparqlResponseStream),\n                parseResultsStream: (sparqlResponseStream) => this.sparqlXmlParser.parseXmlResultsStream(sparqlResponseStream),\n            },\n        };\n        this.timeout = args.timeout;\n    }\n    /**\n     * Get the query type of the given query.\n     *\n     * This will parse the query and thrown an exception on syntax errors.\n     *\n     * @param {string} query A query.\n     * @return {\"SELECT\" | \"ASK\" | \"CONSTRUCT\" | \"UNKNOWN\"} The query type.\n     */\n    getQueryType(query) {\n        const parsedQuery = new sparqljs_1.Parser({ sparqlStar: true }).parse(query);\n        return parsedQuery.type === 'query'\n            ? (parsedQuery.queryType === 'DESCRIBE' ? 'CONSTRUCT' : parsedQuery.queryType) : \"UNKNOWN\";\n    }\n    /**\n     * Get the query type of the given update query.\n     *\n     * This will parse the update query and thrown an exception on syntax errors.\n     *\n     * @param {string} query An update query.\n     * @return {'UNKNOWN' | UpdateTypes} The included update operations.\n     */\n    getUpdateTypes(query) {\n        const parsedQuery = new sparqljs_1.Parser({ sparqlStar: true }).parse(query);\n        if (parsedQuery.type === 'update') {\n            const operations = {};\n            for (const update of parsedQuery.updates) {\n                if ('type' in update) {\n                    operations[update.type] = true;\n                }\n                else {\n                    operations[update.updateType] = true;\n                }\n            }\n            return operations;\n        }\n        else {\n            return \"UNKNOWN\";\n        }\n        ;\n    }\n    ;\n    /**\n     * Send a SELECT query to the given endpoint URL and return the resulting bindings stream.\n     * @see IBindings\n     * @param {string} endpoint A SPARQL endpoint URL. (without the `?query=` suffix).\n     * @param {string} query    A SPARQL query string.\n     * @return {Promise<NodeJS.ReadableStream>} A stream of {@link IBindings}.\n     */\n    async fetchBindings(endpoint, query) {\n        const [contentType, responseStream] = await this\n            .fetchRawStream(endpoint, query, SparqlEndpointFetcher.CONTENTTYPE_SPARQL);\n        const parser = this.sparqlParsers[contentType];\n        if (!parser) {\n            throw new Error('Unknown SPARQL results content type: ' + contentType);\n        }\n        return parser.parseResultsStream(responseStream);\n    }\n    /**\n     * Send an ASK query to the given endpoint URL and return a promise resolving to the boolean answer.\n     * @param {string} endpoint A SPARQL endpoint URL. (without the `?query=` suffix).\n     * @param {string} query    A SPARQL query string.\n     * @return {Promise<boolean>} A boolean resolving to the answer.\n     */\n    async fetchAsk(endpoint, query) {\n        const [contentType, responseStream] = await this\n            .fetchRawStream(endpoint, query, SparqlEndpointFetcher.CONTENTTYPE_SPARQL);\n        const parser = this.sparqlParsers[contentType];\n        if (!parser) {\n            throw new Error('Unknown SPARQL results content type: ' + contentType);\n        }\n        return parser.parseBooleanStream(responseStream);\n    }\n    /**\n     * Send a CONSTRUCT/DESCRIBE query to the given endpoint URL and return the resulting triple stream.\n     * @param {string} endpoint A SPARQL endpoint URL. (without the `?query=` suffix).\n     * @param {string} query    A SPARQL query string.\n     * @return {Promise<Stream>} A stream of triples.\n     */\n    async fetchTriples(endpoint, query) {\n        const rawStream = (await this.fetchRawStream(endpoint, query, SparqlEndpointFetcher.CONTENTTYPE_TURTLE))[1];\n        return rawStream.pipe(new n3.StreamParser({ format: SparqlEndpointFetcher.CONTENTTYPE_TURTLE }));\n    }\n    /**\n     * Send an update query to the given endpoint URL using POST.\n     *\n     * @param {string} endpoint     A SPARQL endpoint URL. (without the `?query=` suffix).\n     * @param {string} query        A SPARQL query string.\n     */\n    async fetchUpdate(endpoint, query) {\n        const AbortController = globalThis.AbortController || await Promise.resolve().then(() => require('abort-controller'));\n        const abortController = new AbortController();\n        const defaultHeadersRaw = {};\n        this.defaultHeaders.forEach((value, key) => {\n            defaultHeadersRaw[key] = value;\n        });\n        const init = {\n            method: 'POST',\n            headers: Object.assign(Object.assign({}, defaultHeadersRaw), { 'content-type': 'application/sparql-update' }),\n            body: query,\n            signal: abortController.signal,\n        };\n        await this.handleFetchCall(endpoint, init, { ignoreBody: true });\n        abortController.abort();\n    }\n    /**\n     * Send a query to the given endpoint URL and return the resulting stream.\n     *\n     * This will only accept responses with the application/sparql-results+json content type.\n     *\n     * @param {string} endpoint     A SPARQL endpoint URL. (without the `?query=` suffix).\n     * @param {string} query        A SPARQL query string.\n     * @param {string} acceptHeader The HTTP accept to use.\n     * @return {Promise<[string, NodeJS.ReadableStream]>} The content type and SPARQL endpoint response stream.\n     */\n    async fetchRawStream(endpoint, query, acceptHeader) {\n        let url = this.method === 'POST' ? endpoint : endpoint + '?query=' + encodeURIComponent(query);\n        // Initiate request\n        const headers = new Headers(this.defaultHeaders);\n        let body;\n        headers.append('Accept', acceptHeader);\n        if (this.method === 'POST') {\n            headers.append('Content-Type', 'application/x-www-form-urlencoded');\n            body = new URLSearchParams();\n            body.set('query', query);\n            this.additionalUrlParams.forEach((value, key) => {\n                body.set(key, value);\n            });\n            headers.append('Content-Length', body.toString().length.toString());\n        }\n        else if (this.additionalUrlParams.toString() !== '') {\n            url += `&${this.additionalUrlParams.toString()}`;\n        }\n        return this.handleFetchCall(url, { headers, method: this.method, body });\n    }\n    /**\n     * Helper function to generalize internal fetch calls.\n     *\n     * @param {string}      url     The URL to call.\n     * @param {RequestInit} init    Options to pass along to the fetch call.\n     * @param {any}         options Other specific fetch options.\n     * @return {Promise<[string, NodeJS.ReadableStream]>} The content type and SPARQL endpoint response stream.\n     */\n    async handleFetchCall(url, init, options = {}) {\n        let timeoutId;\n        if (this.timeout) {\n            const controller = new AbortController();\n            init.signal = controller.signal;\n            timeoutId = setTimeout(() => controller.abort(), this.timeout);\n        }\n        const httpResponse = await (this.fetchCb || fetch)(url, init);\n        clearTimeout(timeoutId);\n        let responseStream;\n        // Handle response body\n        if (!options.ignoreBody) {\n            // Wrap WhatWG readable stream into a Node.js readable stream\n            // If the body already is a Node.js stream (in the case of node-fetch), don't do explicit conversion.\n            responseStream = isStream(httpResponse.body)\n                ? httpResponse.body : new readable_web_to_node_stream_1.ReadableWebToNodeStream(httpResponse.body);\n        }\n        // Determine the content type and emit it to the stream\n        let contentType = httpResponse.headers.get('Content-Type') || '';\n        if (contentType.indexOf(';') > 0) {\n            contentType = contentType.substr(0, contentType.indexOf(';'));\n        }\n        // Emit an error if the server returned an invalid response\n        if (!httpResponse.ok) {\n            const simpleUrl = /^[^?]*/u.exec(url)[0];\n            let bodyString = 'empty response';\n            if (responseStream) {\n                bodyString = await stringifyStream(responseStream);\n            }\n            throw new Error(`Invalid SPARQL endpoint response from ${simpleUrl} (HTTP status ${httpResponse.status}):\\n${bodyString}`);\n        }\n        return [contentType, responseStream];\n    }\n}\nSparqlEndpointFetcher.CONTENTTYPE_SPARQL_JSON = 'application/sparql-results+json';\nSparqlEndpointFetcher.CONTENTTYPE_SPARQL_XML = 'application/sparql-results+xml';\nSparqlEndpointFetcher.CONTENTTYPE_SPARQL = `${SparqlEndpointFetcher.CONTENTTYPE_SPARQL_JSON};q=1.0,${SparqlEndpointFetcher.CONTENTTYPE_SPARQL_XML};q=0.7`;\nSparqlEndpointFetcher.CONTENTTYPE_TURTLE = 'text/turtle';\nexports.SparqlEndpointFetcher = SparqlEndpointFetcher;\n//# sourceMappingURL=SparqlEndpointFetcher.js.map","(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(typeof self !== 'undefined' ? self : this);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/handler\"), exports);\n__exportStar(require(\"./lib/Converter\"), exports);\n__exportStar(require(\"./lib/IConvertContext\"), exports);\n__exportStar(require(\"./lib/IConvertSettings\"), exports);\n__exportStar(require(\"./lib/Util\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Converter = void 0;\nconst language_1 = require(\"graphql/language\");\nconst handler_1 = require(\"./handler\");\nconst directivenode_1 = require(\"./handler/directivenode\");\nconst IConvertContext_1 = require(\"./IConvertContext\");\nconst Util_1 = require(\"./Util\");\n/**\n * Translate GraphQL queries into SPARQL algebra.\n */\nclass Converter {\n    constructor(settings) {\n        settings = settings || {};\n        settings.variableDelimiter = settings.variableDelimiter || '_';\n        settings.expressionVariableCounter = settings.expressionVariableCounter || 0;\n        this.util = new Util_1.Util(settings);\n        this.initializeNodeHandlers(settings);\n    }\n    static registerNodeHandlers(util, settings) {\n        util.registerNodeHandler(new handler_1.NodeHandlerDocument(util, settings));\n        util.registerNodeHandler(new handler_1.NodeHandlerDefinitionOperation(util, settings));\n        util.registerNodeHandler(new handler_1.NodeHandlerDefinitionFragment(util, settings));\n        util.registerNodeHandler(new handler_1.NodeHandlerSelectionFragmentSpread(util, settings));\n        util.registerNodeHandler(new handler_1.NodeHandlerSelectionInlineFragment(util, settings));\n        util.registerNodeHandler(new handler_1.NodeHandlerSelectionField(util, settings));\n    }\n    static registerNodeValueHandlers(util, settings) {\n        util.registerNodeValueHandler(new handler_1.NodeValueHandlerVariable(util, settings));\n        util.registerNodeValueHandler(new handler_1.NodeValueHandlerInt(util, settings));\n        util.registerNodeValueHandler(new handler_1.NodeValueHandlerFloat(util, settings));\n        util.registerNodeValueHandler(new handler_1.NodeValueHandlerString(util, settings));\n        util.registerNodeValueHandler(new handler_1.NodeValueHandlerBoolean(util, settings));\n        util.registerNodeValueHandler(new handler_1.NodeValueHandlerNull(util, settings));\n        util.registerNodeValueHandler(new handler_1.NodeValueHandlerEnum(util, settings));\n        util.registerNodeValueHandler(new handler_1.NodeValueHandlerList(util, settings));\n        util.registerNodeValueHandler(new handler_1.NodeValueHandlerObject(util, settings));\n    }\n    static registerDirectiveNodeHandlers(util, settings) {\n        util.registerDirectiveNodeHandler(new directivenode_1.DirectiveNodeHandlerInclude(util, settings));\n        util.registerDirectiveNodeHandler(new directivenode_1.DirectiveNodeHandlerOptional(util, settings));\n        util.registerDirectiveNodeHandler(new directivenode_1.DirectiveNodeHandlerPlural(util, settings));\n        util.registerDirectiveNodeHandler(new directivenode_1.DirectiveNodeHandlerSingle(util, settings));\n        util.registerDirectiveNodeHandler(new directivenode_1.DirectiveNodeHandlerSkip(util, settings));\n    }\n    /**\n     * Translates a GraphQL query into SPARQL algebra.\n     * @param {string | DocumentNode} graphqlQuery A GraphQL query string or node.\n     * @param {IContext} context A JSON-LD context.\n     * @param {IConvertOptions} options An options object.\n     * @return {Promise<Operation>} A promise resolving to an operation.\n     */\n    graphqlToSparqlAlgebra(graphqlQuery, context, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.graphqlToSparqlAlgebraRawContext(graphqlQuery, yield this.util.contextParser.parse(context), options);\n        });\n    }\n    /**\n     * Translates a GraphQL query into SPARQL algebra.\n     * @param {string | DocumentNode} graphqlQuery A GraphQL query string or node.\n     * @param {IContext} context A JSON-LD context.\n     * @param {IConvertOptions} options An options object.\n     * @return {Operation} An operation.\n     */\n    graphqlToSparqlAlgebraRawContext(graphqlQuery, context, options) {\n        options = options || {};\n        const document = typeof graphqlQuery === 'string' ? (0, language_1.parse)(graphqlQuery) : graphqlQuery;\n        const fragmentDefinitions = this.indexFragments(document);\n        const convertContext = {\n            context,\n            fragmentDefinitions,\n            graph: this.util.dataFactory.defaultGraph(),\n            path: [],\n            singularizeState: IConvertContext_1.SingularizeState.PLURAL,\n            singularizeVariables: options.singularizeVariables || {},\n            subject: null,\n            terminalVariables: [],\n            variablesDict: options.variablesDict || {},\n            variablesMetaDict: {},\n        };\n        return this.util.handleNode(document, convertContext);\n    }\n    /**\n     * Create an index of all fragment definitions in the given document.\n     *\n     * This will assign a new array of definition nodes without fragment definition.\n     *\n     * @param {DocumentNode} document A document node.\n     * @return {{[p: string]: FragmentDefinitionNode}} An index of fragment definition nodes.\n     */\n    indexFragments(document) {\n        const fragmentDefinitions = {};\n        const newDefinitions = [];\n        for (const definition of document.definitions) {\n            if (definition.kind === 'FragmentDefinition') {\n                fragmentDefinitions[definition.name.value] = definition;\n            }\n            else {\n                newDefinitions.push(definition);\n            }\n        }\n        document.definitions = newDefinitions;\n        return fragmentDefinitions;\n    }\n    initializeNodeHandlers(settings) {\n        Converter.registerNodeHandlers(this.util, settings);\n        Converter.registerNodeValueHandlers(this.util, settings);\n        Converter.registerDirectiveNodeHandlers(this.util, settings);\n    }\n}\nexports.Converter = Converter;\n//# sourceMappingURL=Converter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SingularizeState = void 0;\n/**\n * A singularization state for variable values.\n */\nvar SingularizeState;\n(function (SingularizeState) {\n    /**\n     * If only a first matching value should be picked.\n     */\n    SingularizeState[SingularizeState[\"SINGLE\"] = 0] = \"SINGLE\";\n    /**\n     * If all matching values should be picked.\n     */\n    SingularizeState[SingularizeState[\"PLURAL\"] = 1] = \"PLURAL\";\n})(SingularizeState = exports.SingularizeState || (exports.SingularizeState = {}));\n//# sourceMappingURL=IConvertContext.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IConvertSettings.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Util = void 0;\nconst rdf_data_factory_1 = require(\"rdf-data-factory\");\nconst jsonld_context_parser_1 = require(\"jsonld-context-parser\");\nconst sparqlalgebrajs_1 = require(\"sparqlalgebrajs\");\n/**\n * Utilities for conversion.\n */\nclass Util {\n    constructor(settings) {\n        this.nodeHandlers = {};\n        this.nodeValueHandlers = {};\n        this.directiveNodeHandlers = {};\n        this.settings = settings;\n        this.dataFactory = settings.dataFactory || new rdf_data_factory_1.DataFactory();\n        this.operationFactory = new sparqlalgebrajs_1.Factory(this.dataFactory);\n        this.contextParser = new jsonld_context_parser_1.ContextParser();\n    }\n    /**\n     * Register a new {@link NodeHandlerAdapter}.\n     * @param {NodeHandlerAdapter<any>} nodeHandler A handler for converting GraphQL nodes to operations.\n     */\n    registerNodeHandler(nodeHandler) {\n        this.nodeHandlers[nodeHandler.targetKind] = nodeHandler;\n    }\n    /**\n     * Register a new {@link NodeValueHandlerAdapter}\n     * @param {NodeValueHandlerAdapter<any>} nodeValueHandler A handler for converting GraphQL value nodes\n     *                                                        to terms and patterns.\n     */\n    registerNodeValueHandler(nodeValueHandler) {\n        this.nodeValueHandlers[nodeValueHandler.targetKind] = nodeValueHandler;\n    }\n    /**\n     * Register a new {@link DirectiveNodeHandlerAdapter}\n     * @param {DirectiveNodeHandlerAdapter} directiveNodeHandler A handler for handling GraphQL directives.\n     */\n    registerDirectiveNodeHandler(directiveNodeHandler) {\n        this.directiveNodeHandlers[directiveNodeHandler.targetKind] = directiveNodeHandler;\n    }\n    /**\n     * Get the operation for the given GraphQL node.\n     * @param {T} node A GraphQL node.\n     * @param {IConvertContext} convertContext A conversion context.\n     * @return {Operation} A SPARQL algebra operation.\n     */\n    handleNode(node, convertContext) {\n        const nodeHandler = this.nodeHandlers[node.kind];\n        if (!nodeHandler) {\n            throw new Error(`Unsupported GraphQL node '${node.kind}'`);\n        }\n        return nodeHandler.handle(node, convertContext);\n    }\n    /**\n     * Get the terms and patterns for the given value node.\n     * @param {T} node A GraphQL node.\n     * @param {string} fieldName The name of the field or argument in which the value was encapsulated.\n     * @param {IConvertContext} convertContext A conversion context.\n     * @return {IValueNodeHandlerOutput} The RDF terms and patterns.\n     */\n    handleNodeValue(node, fieldName, convertContext) {\n        const nodeValueHandler = this.nodeValueHandlers[node.kind];\n        if (!nodeValueHandler) {\n            throw new Error(`Unsupported GraphQL value node '${node.kind}'`);\n        }\n        return nodeValueHandler.handle(node, fieldName, convertContext);\n    }\n    /**\n     * Get the handler output for the given directive.\n     * @param {IDirectiveContext} directiveContext The current directive context.\n     * @param {IConvertContext} convertContext A conversion context.\n     * @return {IDirectiveNodeHandlerOutput} The directive node handler output or null.\n     */\n    handleDirectiveNode(directiveContext, convertContext) {\n        const directiveNodeHandler = this.directiveNodeHandlers[directiveContext.directive.name.value];\n        if (!directiveNodeHandler) {\n            return null;\n        }\n        return directiveNodeHandler.handle(directiveContext, convertContext);\n    }\n    /**\n     * Join the given array of operations.\n     * If all operations are BGPs, then a single big BGP with all patterns from the given BGPs will be created.\n     * @param {Operation[]} operations An array of operations.\n     * @return {Operation} A single joined operation.\n     */\n    joinOperations(operations) {\n        if (operations.length === 1) {\n            return operations[0];\n        }\n        // Check if which operations are BGPs\n        const bgps = [];\n        const nonBgps = [];\n        for (const operation of operations) {\n            if (operation.type === 'bgp') {\n                bgps.push(operation);\n            }\n            else {\n                nonBgps.push(operation);\n            }\n        }\n        if (bgps.length === operations.length) {\n            // Create a big BGP from all BGPs\n            return this.joinOperationsAsBgp(bgps);\n        }\n        else if (bgps.length === operations.length - 1\n            && nonBgps[0].type === 'leftjoin'\n            && nonBgps[0].input[0].type === 'bgp') {\n            // Check if we have one left-join (with a BGP on the left), and the rest are BGPs.\n            // If so, merge the BGPS within the left-hand-side of the left-join.\n            const originalLeftJoin = nonBgps[0];\n            bgps.push(originalLeftJoin.input[0]);\n            return this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(bgps), originalLeftJoin.input[1]);\n        }\n        else if (nonBgps.length === operations.length) {\n            // Create nested joins\n            return this.joinOperationsAsNestedJoin(nonBgps);\n        }\n        else {\n            // Join as much BGPs together as possible, and join with the other operations\n            return this.joinOperationsAsNestedJoin([\n                this.joinOperationsAsBgp(bgps),\n                this.joinOperationsAsNestedJoin(nonBgps),\n            ]);\n        }\n    }\n    joinOperationsAsBgp(operations) {\n        return this.operationFactory.createBgp([].concat.apply([], operations\n            .map((op) => op.patterns)));\n    }\n    joinOperationsAsNestedJoin(operations) {\n        return this.operationFactory.createJoin(operations);\n    }\n    /**\n     * Append a field's label to a path.\n     * @param {string[]} path A path.\n     * @param {string} fieldLabel A field label.\n     * @return {string[]} A new path array.\n     */\n    appendFieldToPath(path, fieldLabel) {\n        return path.concat([fieldLabel]);\n    }\n    /**\n     * Get the label of a field by taking into account the alias.\n     * @param {FieldNode} field A field node.\n     * @return {string} The field name or alias.\n     */\n    getFieldLabel(field) {\n        return (field.alias ? field.alias : field.name).value;\n    }\n    /**\n     * Convert a field node to a variable built from the node name and the current path inside the context.\n     * @param {string} fieldLabel A field label.\n     * @param {IConvertContext} convertContext A convert context.\n     * @param {string} variableDelimiter A variable delimiter.\n     * @return {Variable} A variable.\n     */\n    nameToVariable(fieldLabel, convertContext) {\n        return this.dataFactory.variable((convertContext.path.length\n            ? convertContext.path.join(this.settings.variableDelimiter) + this.settings.variableDelimiter : '') + fieldLabel);\n    }\n    /**\n     * Convert a GraphQL term into a URI using the given context.\n     * @param {string} value A GraphQL term.\n     * @param {IContext} context A JSON-LD context.\n     * @return {NamedNode} A named node.\n     */\n    valueToNamedNode(value, context) {\n        const contextValue = context.expandTerm(value, true);\n        if (this.settings.requireContext && !contextValue) {\n            throw new Error('No context entry was found for ' + value);\n        }\n        return this.dataFactory.namedNode(contextValue || value);\n    }\n    /**\n     * Get an argument by name.\n     * This will return null if the argument could not be found.\n     * @param {ReadonlyArray<ArgumentNode>} args Arguments or null.\n     * @param {string} name The name of an argument.\n     * @return {ArgumentNode} The named argument.\n     */\n    getArgument(args, name) {\n        if (args) {\n            for (const argument of args) {\n                if (argument.name.value === name) {\n                    return argument;\n                }\n            }\n        }\n    }\n    /**\n     * Create a pattern with an rdf:type predicate.\n     * @param {Term} subject The subject.\n     * @param {NamedTypeNode} typeCondition The object name.\n     * @param {IConvertContext} convertContext A convert context.\n     * @return {Pattern} A pattern.\n     */\n    newTypePattern(subject, typeCondition, convertContext) {\n        return this.operationFactory.createPattern(subject, this.dataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'), this.valueToNamedNode(typeCondition.name.value, convertContext.context), convertContext.graph);\n    }\n    /**\n     * Create a quad pattern when the predicate is a name node that needs to be translated using the context.\n     * @param {Term} subject The subject.\n     * @param {NameNode} predicateName The name node for the predicate.\n     * @param {Term} object The object.\n     * @param {Term} graph The graph.\n     * @param {IContext} context A context.\n     * @return {Pattern} A quad pattern.\n     */\n    createQuadPattern(subject, predicateName, object, graph, context) {\n        const predicate = this.valueToNamedNode(predicateName.value, context);\n        if (context && context.getContextRaw()[predicateName.value]\n            && context.getContextRaw()[predicateName.value]['@reverse']) {\n            return this.operationFactory.createPattern(object, predicate, subject, graph);\n        }\n        return this.operationFactory.createPattern(subject, predicate, object, graph);\n    }\n    /**\n     * Create a quad path when the predicate is a list node with field alternatives\n     * that need to be translated using the context.\n     * @param {Term} subject The subject.\n     * @param {NameNode} predicateName The name node for the predicate.\n     * @param {Term} object The object.\n     * @param {Term} graph The graph.\n     * @param {IContext} context A context.\n     * @return {Path} A quad property path.\n     */\n    createQuadPath(subject, predicateName, predicateAlternatives, object, graph, context) {\n        const predicateInitial = this.valueToNamedNode(predicateName.value, context);\n        let pathSymbol = this.operationFactory.createLink(predicateInitial);\n        // Add all fields in the list as predicate alternatives\n        for (const predicateAlternative of predicateAlternatives.values) {\n            if (predicateAlternative.kind !== 'EnumValue') {\n                throw new Error('Invalid value type for \\'alt\\' argument, must be EnumValue, but got '\n                    + predicateAlternative.kind);\n            }\n            pathSymbol = this.operationFactory.createAlt([\n                pathSymbol,\n                this.operationFactory.createLink(this.valueToNamedNode(predicateAlternative.value, context)),\n            ]);\n        }\n        // Reverse the path based on the initial predicate\n        if (context && context.getContextRaw()[predicateName.value]\n            && context.getContextRaw()[predicateName.value]['@reverse']) {\n            return this.operationFactory.createPath(object, pathSymbol, subject, graph);\n        }\n        return this.operationFactory.createPath(subject, pathSymbol, object, graph);\n    }\n}\nexports.Util = Util;\n//# sourceMappingURL=Util.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeHandlerAdapter = void 0;\n/**\n * A handler for converting GraphQL nodes to operations.\n */\nclass NodeHandlerAdapter {\n    constructor(targetKind, util, settings) {\n        this.targetKind = targetKind;\n        this.util = util;\n        this.settings = settings;\n    }\n    /* ----- Node quad context ----- */\n    /**\n     * Get the quad context of a selection set node that should be used for the whole definition node.\n     *\n     * This is a pre-processing step of selection sets.\n     * Its only purpose is to determine the subject within a selection set,\n     * because this subject is needed to link with its parent.\n     * In a later phase, the selection set will be processed using the discovered subject,\n     * and the field identifying the subject will be ignored.\n     *\n     * @param {SelectionSetNode} selectionSet A selection set node.\n     * @param {string} fieldLabel A field label.\n     * @param {IConvertContext} convertContext A convert context.\n     * @return {INodeQuadContext} The subject, graph and auxiliary patterns.\n     */\n    getNodeQuadContextSelectionSet(selectionSet, fieldLabel, convertContext) {\n        const nodeQuadContext = {};\n        if (selectionSet) {\n            for (const selectionNode of selectionSet.selections) {\n                if (selectionNode.kind === 'Field') {\n                    const fieldNode = selectionNode;\n                    this.handleNodeQuadContextField(fieldNode, convertContext, nodeQuadContext, 'id', 'subject');\n                    this.handleNodeQuadContextField(fieldNode, convertContext, nodeQuadContext, 'graph', 'graph');\n                }\n            }\n        }\n        return nodeQuadContext;\n    }\n    /**\n     * Handles a single field for determining the node quad context.\n     * @param {FieldNode} fieldNode A field node.\n     * @param {IConvertContext} convertContext A convert context.\n     * @param {INodeQuadContext} nodeQuadContext The node quad context to populate.\n     * @param {string} fieldName The field name to check for.\n     * @param {'subject' | 'graph'} nodeQuadContextKey The key to fill into the node quad context.\n     */\n    handleNodeQuadContextField(fieldNode, convertContext, nodeQuadContext, fieldName, nodeQuadContextKey) {\n        if (!nodeQuadContext[nodeQuadContextKey] && fieldNode.name.value === fieldName) {\n            // Get (or set) the nodeQuadContextKey for fieldName fields\n            if (!nodeQuadContext[nodeQuadContextKey]) {\n                const argument = this.util.getArgument(fieldNode.arguments, '_');\n                if (argument) {\n                    const valueOutput = this.util.handleNodeValue(argument.value, fieldNode.name.value, convertContext);\n                    if (valueOutput.terms.length !== 1) {\n                        throw new Error(`Only single values can be set as ${fieldName}, but got ${valueOutput.terms\n                            .length} at ${fieldNode.name.value}`);\n                    }\n                    nodeQuadContext[nodeQuadContextKey] = valueOutput.terms[0];\n                    if (valueOutput.auxiliaryPatterns) {\n                        if (!nodeQuadContext.auxiliaryPatterns) {\n                            nodeQuadContext.auxiliaryPatterns = [];\n                        }\n                        nodeQuadContext.auxiliaryPatterns.concat(valueOutput.auxiliaryPatterns);\n                    }\n                }\n            }\n            if (!nodeQuadContext[nodeQuadContextKey]) {\n                const term = this.util.nameToVariable(this.util.getFieldLabel(fieldNode), convertContext);\n                convertContext.terminalVariables.push(term);\n                nodeQuadContext[nodeQuadContextKey] = term;\n            }\n        }\n    }\n    /* ----- Directives ----- */\n    /**\n     * Get an operation override defined by one of the directives.\n     *\n     * This should be called before a sub-operation is handled.\n     *\n     * @param {ReadonlyArray<DirectiveNode>} directives An option directives array.\n     * @param {string} fieldLabel The current field label.\n     * @param {IConvertContext} convertContext A convert context.\n     * @return {IDirectiveNodeHandlerOutput[]} The directive node handler outputs, or null if it should be ignored.\n     */\n    getDirectiveOutputs(directives, fieldLabel, convertContext) {\n        const outputs = [];\n        if (directives) {\n            for (const directive of directives) {\n                const output = this.util.handleDirectiveNode({ directive, fieldLabel }, convertContext);\n                if (output) {\n                    if (output.ignore) {\n                        return null;\n                    }\n                    outputs.push(output);\n                }\n            }\n        }\n        return outputs;\n    }\n    /**\n     * Handle the directive outputs with respect to an operation.\n     *\n     * This should be called after a sub-operation was handled.\n     *\n     * @param {IDirectiveNodeHandlerOutput[]} directiveOutputs\n     * @param {Operation} operation\n     * @return {Operation}\n     */\n    handleDirectiveOutputs(directiveOutputs, operation) {\n        for (const directiveOutput of directiveOutputs) {\n            if (directiveOutput.ignore) {\n                return this.util.operationFactory.createBgp([]);\n            }\n            if (directiveOutput.operationOverrider) {\n                operation = directiveOutput.operationOverrider(operation);\n            }\n        }\n        return operation;\n    }\n}\nexports.NodeHandlerAdapter = NodeHandlerAdapter;\n//# sourceMappingURL=NodeHandlerAdapter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeHandlerDefinitionAdapter = void 0;\nconst NodeHandlerAdapter_1 = require(\"./NodeHandlerAdapter\");\n/**\n * A handler for converting GraphQL definition nodes to operations.\n */\nclass NodeHandlerDefinitionAdapter extends NodeHandlerAdapter_1.NodeHandlerAdapter {\n    constructor(targetKind, util, settings) {\n        super(targetKind, util, settings);\n    }\n}\nexports.NodeHandlerDefinitionAdapter = NodeHandlerDefinitionAdapter;\n//# sourceMappingURL=NodeHandlerDefinitionAdapter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeHandlerDefinitionFragment = void 0;\nconst NodeHandlerDefinitionAdapter_1 = require(\"./NodeHandlerDefinitionAdapter\");\n/**\n * Errors if fragment definitions are found,\n * as these should have been processed away earlier.\n */\nclass NodeHandlerDefinitionFragment extends NodeHandlerDefinitionAdapter_1.NodeHandlerDefinitionAdapter {\n    constructor(util, settings) {\n        super('FragmentDefinition', util, settings);\n    }\n    handle(operationDefinition, convertContext) {\n        throw new Error('Illegal state: fragment definitions must be indexed and removed before processing');\n    }\n}\nexports.NodeHandlerDefinitionFragment = NodeHandlerDefinitionFragment;\n//# sourceMappingURL=NodeHandlerDefinitionFragment.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeHandlerDefinitionOperation = void 0;\nconst NodeHandlerDefinitionAdapter_1 = require(\"./NodeHandlerDefinitionAdapter\");\n/**\n * Converts GraphQL definitions to joined operations for all its selections.\n */\nclass NodeHandlerDefinitionOperation extends NodeHandlerDefinitionAdapter_1.NodeHandlerDefinitionAdapter {\n    constructor(util, settings) {\n        super('OperationDefinition', util, settings);\n    }\n    handle(operationDefinition, convertContext) {\n        if (operationDefinition.operation !== 'query') {\n            throw new Error('Unsupported definition operation: ' + operationDefinition.operation);\n        }\n        // We ignore the query name, as SPARQL doesn't support naming queries.\n        // Variables\n        if (operationDefinition.variableDefinitions) {\n            for (const variableDefinition of operationDefinition.variableDefinitions) {\n                const name = variableDefinition.variable.name.value;\n                // Put the default value in the context if it hasn't been defined yet.\n                if (variableDefinition.defaultValue) {\n                    if (!convertContext.variablesDict[name]) {\n                        convertContext.variablesDict[name] = variableDefinition.defaultValue;\n                    }\n                }\n                // Handle type\n                let typeNode = variableDefinition.type;\n                const mandatory = typeNode.kind === 'NonNullType';\n                if (mandatory) {\n                    typeNode = typeNode.type;\n                }\n                const list = typeNode.kind === 'ListType';\n                if (list) {\n                    typeNode = typeNode.type;\n                }\n                const type = typeNode.name.value;\n                convertContext.variablesMetaDict[name] = { mandatory, list, type };\n            }\n        }\n        // Directives\n        const directiveOutputs = this.getDirectiveOutputs(operationDefinition.directives, operationDefinition.name ? operationDefinition.name.value : '', convertContext);\n        if (!directiveOutputs) {\n            return this.util.operationFactory.createBgp([]);\n        }\n        // Handle the operation\n        const operation = this.util.joinOperations(operationDefinition.selectionSet.selections\n            .map((selectionNode) => this.util.handleNode(selectionNode, convertContext)));\n        // Override operation if needed\n        return this.handleDirectiveOutputs(directiveOutputs, operation);\n    }\n}\nexports.NodeHandlerDefinitionOperation = NodeHandlerDefinitionOperation;\n//# sourceMappingURL=NodeHandlerDefinitionOperation.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeHandlerDocument = void 0;\nconst sparqlalgebrajs_1 = require(\"sparqlalgebrajs\");\nconst NodeHandlerAdapter_1 = require(\"./NodeHandlerAdapter\");\n/**\n * Converts GraphQL documents to joined operations for all its definitions.\n */\nclass NodeHandlerDocument extends NodeHandlerAdapter_1.NodeHandlerAdapter {\n    constructor(util, settings) {\n        super('Document', util, settings);\n    }\n    handle(document, convertContext) {\n        const definitionOperations = document.definitions\n            .map((definition) => {\n            const subjectOutput = this.getNodeQuadContextDefinitionNode(definition, Object.assign(Object.assign({}, convertContext), { ignoreUnknownVariables: true }));\n            const queryParseContext = Object.assign(Object.assign({}, convertContext), { graph: subjectOutput.graph || convertContext.graph, subject: subjectOutput.subject || this.util.dataFactory.blankNode() });\n            let definitionOperation = this.util.handleNode(definition, queryParseContext);\n            if (subjectOutput && subjectOutput.auxiliaryPatterns) {\n                definitionOperation = this.util.joinOperations([\n                    definitionOperation,\n                    this.util.operationFactory.createBgp(subjectOutput.auxiliaryPatterns),\n                ]);\n            }\n            return definitionOperation;\n        });\n        const operation = this.util.operationFactory.createProject(definitionOperations.length === 1 ? definitionOperations[0] : this.util.operationFactory.createUnion(definitionOperations), convertContext.terminalVariables);\n        // Convert blank nodes to variables\n        return this.translateBlankNodesToVariables(operation);\n    }\n    /**\n     * Get the quad context of a definition node that should be used for the whole definition node.\n     * @param {DefinitionNode} definition A definition node.\n     * @param {IConvertContext} convertContext A convert context.\n     * @return {INodeQuadContext} The subject and optional auxiliary patterns.\n     */\n    getNodeQuadContextDefinitionNode(definition, convertContext) {\n        if (definition.kind === 'OperationDefinition') {\n            return this.getNodeQuadContextSelectionSet(definition.selectionSet, definition.name ? definition.name.value : '', convertContext);\n        }\n        throw new Error(`Unsupported definition: ${definition.kind}`);\n    }\n    /**\n     * Translates blank nodes inside the query to variables.\n     * @param {Project} operation The operation to translate.\n     * @return {Operation} The transformed operation.\n     */\n    translateBlankNodesToVariables(operation) {\n        const self = this;\n        const blankToVariableMapping = {};\n        const variablesRaw = Array.from(operation.variables)\n            .reduce((acc, variable) => {\n            acc[variable.value] = true;\n            return acc;\n        }, {});\n        return sparqlalgebrajs_1.Util.mapOperation(operation, {\n            path: (op, factory) => {\n                return {\n                    recurse: false,\n                    result: factory.createPath(blankToVariable(op.subject), op.predicate, blankToVariable(op.object), blankToVariable(op.graph)),\n                };\n            },\n            pattern: (op, factory) => {\n                return {\n                    recurse: false,\n                    result: factory.createPattern(blankToVariable(op.subject), blankToVariable(op.predicate), blankToVariable(op.object), blankToVariable(op.graph)),\n                };\n            },\n        });\n        function blankToVariable(term) {\n            if (term.termType === 'BlankNode') {\n                let variable = blankToVariableMapping[term.value];\n                if (!variable) {\n                    variable = sparqlalgebrajs_1.Util.createUniqueVariable(term.value, variablesRaw, self.util.dataFactory);\n                    variablesRaw[variable.value] = true;\n                    blankToVariableMapping[term.value] = variable;\n                }\n                return variable;\n            }\n            return term;\n        }\n    }\n}\nexports.NodeHandlerDocument = NodeHandlerDocument;\n//# sourceMappingURL=NodeHandlerDocument.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeHandlerSelectionAdapter = void 0;\nconst sparqlalgebrajs_1 = require(\"sparqlalgebrajs\");\nconst IConvertContext_1 = require(\"../IConvertContext\");\nconst NodeHandlerAdapter_1 = require(\"./NodeHandlerAdapter\");\n/**\n * A handler for converting GraphQL selection nodes to operations.\n */\nclass NodeHandlerSelectionAdapter extends NodeHandlerAdapter_1.NodeHandlerAdapter {\n    constructor(targetKind, util, settings) {\n        super(targetKind, util, settings);\n    }\n    /**\n     * Get the quad context of a field node that should be used for the whole definition node.\n     * @param {FieldNode} field A field node.\n     * @param {string} fieldLabel A field label.\n     * @param {IConvertContext} convertContext A convert context.\n     * @return {INodeQuadContext} The subject and optional auxiliary patterns.\n     */\n    getNodeQuadContextFieldNode(field, fieldLabel, convertContext) {\n        return this.getNodeQuadContextSelectionSet(field.selectionSet, fieldLabel, Object.assign(Object.assign({}, convertContext), { path: this.util.appendFieldToPath(convertContext.path, fieldLabel) }));\n    }\n    /**\n     * Convert a field node to an operation.\n     * @param {IConvertContext} convertContext A convert context.\n     * @param {FieldNode} fieldNode The field node to convert.\n     * @param {boolean} pushTerminalVariables If terminal variables should be created.\n     * @param {Pattern[]} auxiliaryPatterns Optional patterns that should be part of the BGP.\n     * @return {Operation} The reslting operation.\n     */\n    fieldToOperation(convertContext, fieldNode, pushTerminalVariables, auxiliaryPatterns) {\n        // If a deeper node is being selected, and if the current object should become the next subject\n        const nesting = pushTerminalVariables;\n        // Offset and limit can be changed using the magic arguments 'first' and 'offset'.\n        let offset = 0;\n        let limit;\n        // Ignore 'id' and 'graph' fields, because we have processed them earlier in getNodeQuadContextSelectionSet.\n        if (fieldNode.name.value === 'id' || fieldNode.name.value === 'graph') {\n            pushTerminalVariables = false;\n            // Validate all _-arguments, because even though they were handled before,\n            // the validity of variables could not be checked,\n            // as variablesMetaDict wasn't populated at that time yet.\n            if (fieldNode.arguments) {\n                for (const argument of fieldNode.arguments) {\n                    if (argument.name.value === '_') {\n                        this.util.handleNodeValue(argument.value, fieldNode.name.value, convertContext);\n                    }\n                }\n            }\n        }\n        // Determine the field label for variable naming, taking into account aliases\n        const fieldLabel = this.util.getFieldLabel(fieldNode);\n        // Handle the singular/plural scope\n        if (convertContext.singularizeState === IConvertContext_1.SingularizeState.SINGLE) {\n            convertContext.singularizeVariables[this.util.nameToVariable(fieldLabel, convertContext).value] = true;\n        }\n        // Handle meta fields\n        if (pushTerminalVariables) {\n            const operationOverride = this.handleMetaField(convertContext, fieldLabel, auxiliaryPatterns);\n            if (operationOverride) {\n                return operationOverride;\n            }\n        }\n        const operations = auxiliaryPatterns\n            ? [this.util.operationFactory.createBgp(auxiliaryPatterns)] : [];\n        // Define subject and object\n        const subjectOutput = this.getNodeQuadContextFieldNode(fieldNode, fieldLabel, convertContext);\n        let object = subjectOutput.subject || this.util.nameToVariable(fieldLabel, convertContext);\n        let graph = subjectOutput.graph || convertContext.graph;\n        if (subjectOutput.auxiliaryPatterns) {\n            operations.push(this.util.operationFactory.createBgp(subjectOutput.auxiliaryPatterns));\n        }\n        // Check if there is a '_' argument\n        // We do this before handling all other arguments so that the order of final triple patterns is sane.\n        let createQuadPattern = true;\n        let overrideObjectTerms = null;\n        if (pushTerminalVariables && fieldNode.arguments && fieldNode.arguments.length) {\n            for (const argument of fieldNode.arguments) {\n                if (argument.name.value === '_') {\n                    // '_'-arguments do not create an additional predicate link, but set the value directly.\n                    const valueOutput = this.util.handleNodeValue(argument.value, fieldNode.name.value, convertContext);\n                    overrideObjectTerms = valueOutput.terms;\n                    operations.push(this.util.operationFactory.createBgp(valueOutput.terms.map((term) => this.util.createQuadPattern(convertContext.subject, fieldNode.name, term, convertContext.graph, convertContext.context))));\n                    if (valueOutput.auxiliaryPatterns) {\n                        operations.push(this.util.operationFactory.createBgp(valueOutput.auxiliaryPatterns));\n                    }\n                    pushTerminalVariables = false;\n                    break;\n                }\n                else if (argument.name.value === 'graph') {\n                    // 'graph'-arguments do not create an additional predicate link, but set the graph.\n                    const valueOutput = this.util.handleNodeValue(argument.value, fieldNode.name.value, convertContext);\n                    if (valueOutput.terms.length !== 1) {\n                        throw new Error(`Only single values can be set as graph, but got ${valueOutput.terms\n                            .length} at ${fieldNode.name.value}`);\n                    }\n                    graph = valueOutput.terms[0];\n                    convertContext = Object.assign(Object.assign({}, convertContext), { graph });\n                    if (valueOutput.auxiliaryPatterns) {\n                        operations.push(this.util.operationFactory.createBgp(valueOutput.auxiliaryPatterns));\n                    }\n                    break;\n                }\n                else if (argument.name.value === 'alt') {\n                    // 'alt'-arguments do not create an additional predicate link, but create alt-property paths.\n                    let pathValue = argument.value;\n                    if (pathValue.kind !== 'ListValue') {\n                        pathValue = { kind: 'ListValue', values: [pathValue] };\n                    }\n                    operations.push(this.util.createQuadPath(convertContext.subject, fieldNode.name, pathValue, object, convertContext.graph, convertContext.context));\n                    createQuadPattern = false;\n                    break;\n                }\n            }\n        }\n        // Create at least a pattern for the parent node and the current path.\n        if (pushTerminalVariables && createQuadPattern) {\n            operations.push(this.util.operationFactory.createBgp([\n                this.util.createQuadPattern(convertContext.subject, fieldNode.name, object, convertContext.graph, convertContext.context),\n            ]));\n        }\n        // Create patterns for the node's arguments\n        if (fieldNode.arguments && fieldNode.arguments.length) {\n            for (const argument of fieldNode.arguments) {\n                if (argument.name.value === '_' || argument.name.value === 'graph' || argument.name.value === 'alt') {\n                    // no-op\n                }\n                else if (argument.name.value === 'first') {\n                    if (argument.value.kind !== 'IntValue') {\n                        throw new Error('Invalid value type for \\'first\\' argument: ' + argument.value.kind);\n                    }\n                    limit = parseInt(argument.value.value, 10);\n                }\n                else if (argument.name.value === 'offset') {\n                    if (argument.value.kind !== 'IntValue') {\n                        throw new Error('Invalid value type for \\'offset\\' argument: ' + argument.value.kind);\n                    }\n                    offset = parseInt(argument.value.value, 10);\n                }\n                else {\n                    const valueOutput = this.util.handleNodeValue(argument.value, argument.name.value, convertContext);\n                    operations.push(this.util.operationFactory.createBgp(valueOutput.terms.map((term) => this.util.createQuadPattern(object, argument.name, term, convertContext.graph, convertContext.context))));\n                    if (valueOutput.auxiliaryPatterns) {\n                        operations.push(this.util.operationFactory.createBgp(valueOutput.auxiliaryPatterns));\n                    }\n                }\n            }\n        }\n        // Directives\n        const directiveOutputs = this.getDirectiveOutputs(fieldNode.directives, fieldLabel, convertContext);\n        if (!directiveOutputs) {\n            return this.util.operationFactory.createBgp([]);\n        }\n        // Recursive call for nested selection sets\n        let operation = this.util.joinOperations(operations);\n        if (fieldNode.selectionSet && fieldNode.selectionSet.selections.length) {\n            // Override the object if needed\n            if (overrideObjectTerms) {\n                if (overrideObjectTerms.length !== 1) {\n                    throw new Error(`Only single values can be set as id, but got ${overrideObjectTerms\n                        .length} at ${fieldNode.name.value}`);\n                }\n                object = overrideObjectTerms[0];\n            }\n            // Change path value when there was an alias on this node.\n            const subConvertContext = Object.assign(Object.assign(Object.assign({}, convertContext), nesting ? { path: this.util.appendFieldToPath(convertContext.path, fieldLabel) } : {}), { graph, subject: nesting ? object : convertContext.subject });\n            // If the magic keyword 'totalCount' is present, include a count aggregator.\n            let totalCount = false;\n            const selections = fieldNode.selectionSet.selections\n                .filter((selection) => {\n                if (selection.kind === 'Field' && selection.name.value === 'totalCount') {\n                    totalCount = true;\n                    return false;\n                }\n                return true;\n            });\n            let joinedOperation = this.util.joinOperations(operations\n                .concat(selections.map((selectionNode) => this.util.handleNode(selectionNode, subConvertContext))));\n            // Modify the operation if there was a count selection\n            if (totalCount) {\n                // Create to a count aggregation\n                const expressionVariable = this.util.dataFactory.variable('var' + this.settings.expressionVariableCounter++);\n                const countOverVariable = this.util.dataFactory\n                    .variable(object.value + this.settings.variableDelimiter + 'totalCount');\n                const aggregator = this.util.operationFactory.createBoundAggregate(expressionVariable, 'count', this.util.operationFactory.createTermExpression(object), false);\n                const countProject = this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(operation, [], [aggregator]), countOverVariable, this.util.operationFactory.createTermExpression(expressionVariable)), [countOverVariable]);\n                convertContext.terminalVariables.push(countOverVariable);\n                // If no other selections exist (next to totalCount),\n                // then we just return the count operations as-is,\n                // otherwise, we join the count operation with all other selections\n                if (!selections.length) {\n                    joinedOperation = countProject;\n                }\n                else {\n                    joinedOperation = this.util.operationFactory.createJoin([\n                        this.util.operationFactory.createProject(joinedOperation, []),\n                        countProject,\n                    ]);\n                }\n            }\n            operation = joinedOperation;\n        }\n        else if (pushTerminalVariables && object.termType === 'Variable') {\n            // If no nested selection sets exist,\n            // consider the object variable as a terminal variable that should be selected.\n            convertContext.terminalVariables.push(object);\n        }\n        // Wrap the operation in a slice if a 'first' or 'offset' argument was provided.\n        if (offset || limit) {\n            operation = this.util.operationFactory.createSlice(this.util.operationFactory.createProject(operation, sparqlalgebrajs_1.Util.inScopeVariables(operation)), offset, limit);\n        }\n        // Override operation if needed\n        return this.handleDirectiveOutputs(directiveOutputs, operation);\n    }\n    /**\n     * Check if the given node is a meta field, for things like introspection.\n     * If so, return a new operation for this, otherwise, null is returned.\n     * @param {IConvertContext} convertContext A convert context.\n     * @param {Term} subject The subject.\n     * @param {string} fieldLabel The field label to convert.\n     * @param {Pattern[]} auxiliaryPatterns Optional patterns that should be part of the BGP.\n     * @return {Operation} An operation or undefined.\n     */\n    handleMetaField(convertContext, fieldLabel, auxiliaryPatterns) {\n        // TODO: in the future, we should add support for GraphQL wide range of introspection features:\n        // http://graphql.org/learn/introspection/\n        if (fieldLabel === '__typename') {\n            const object = this.util.nameToVariable(fieldLabel, convertContext);\n            convertContext.terminalVariables.push(object);\n            return this.util.operationFactory.createBgp([\n                this.util.operationFactory.createPattern(convertContext.subject, this.util.dataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'), this.util.nameToVariable(fieldLabel, convertContext), convertContext.graph),\n            ].concat(auxiliaryPatterns || []));\n        }\n    }\n}\nexports.NodeHandlerSelectionAdapter = NodeHandlerSelectionAdapter;\n//# sourceMappingURL=NodeHandlerSelectionAdapter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeHandlerSelectionField = void 0;\nconst NodeHandlerSelectionAdapter_1 = require(\"./NodeHandlerSelectionAdapter\");\n/**\n * Converts GraphQL fields to one or more quad patterns.\n */\nclass NodeHandlerSelectionField extends NodeHandlerSelectionAdapter_1.NodeHandlerSelectionAdapter {\n    constructor(util, settings) {\n        super('Field', util, settings);\n    }\n    handle(fieldNode, convertContext) {\n        return this.fieldToOperation(convertContext, fieldNode, true);\n    }\n}\nexports.NodeHandlerSelectionField = NodeHandlerSelectionField;\n//# sourceMappingURL=NodeHandlerSelectionField.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeHandlerSelectionFragmentSpread = void 0;\nconst NodeHandlerSelectionAdapter_1 = require(\"./NodeHandlerSelectionAdapter\");\n/**\n * Converts GraphQL fragment spread to one or more quad patterns with a given type within an optional.\n */\nclass NodeHandlerSelectionFragmentSpread extends NodeHandlerSelectionAdapter_1.NodeHandlerSelectionAdapter {\n    constructor(util, settings) {\n        super('FragmentSpread', util, settings);\n    }\n    handle(fragmentSpreadNode, convertContext) {\n        const fragmentDefinitionNode = convertContext\n            .fragmentDefinitions[fragmentSpreadNode.name.value];\n        if (!fragmentDefinitionNode) {\n            throw new Error('Undefined fragment definition: ' + fragmentSpreadNode.name.value);\n        }\n        // Wrap in an OPTIONAL, as this pattern should only apply if the type applies\n        const fieldNode = {\n            alias: undefined,\n            arguments: undefined,\n            directives: fragmentDefinitionNode.directives,\n            kind: 'Field',\n            name: fragmentSpreadNode.name,\n            selectionSet: fragmentDefinitionNode.selectionSet,\n        };\n        const auxiliaryPatterns = [\n            this.util.newTypePattern(convertContext.subject, fragmentDefinitionNode.typeCondition, convertContext),\n        ];\n        return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]), this.fieldToOperation(convertContext, fieldNode, false, auxiliaryPatterns));\n    }\n}\nexports.NodeHandlerSelectionFragmentSpread = NodeHandlerSelectionFragmentSpread;\n//# sourceMappingURL=NodeHandlerSelectionFragmentSpread.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeHandlerSelectionInlineFragment = void 0;\nconst NodeHandlerSelectionAdapter_1 = require(\"./NodeHandlerSelectionAdapter\");\n/**\n * Converts GraphQL inline fragment to one or more quad patterns with a given type within an optional.\n */\nclass NodeHandlerSelectionInlineFragment extends NodeHandlerSelectionAdapter_1.NodeHandlerSelectionAdapter {\n    constructor(util, settings) {\n        super('InlineFragment', util, settings);\n    }\n    handle(inlineFragmentNode, convertContext) {\n        // Wrap in an OPTIONAL, as this pattern should only apply if the type applies\n        const fieldNode = {\n            alias: undefined,\n            arguments: undefined,\n            directives: inlineFragmentNode.directives,\n            kind: 'Field',\n            name: { kind: 'Name', value: convertContext.subject.value },\n            selectionSet: inlineFragmentNode.selectionSet,\n        };\n        const auxiliaryPatterns = inlineFragmentNode.typeCondition\n            ? [this.util.newTypePattern(convertContext.subject, inlineFragmentNode.typeCondition, convertContext)] : [];\n        return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]), this.fieldToOperation(convertContext, fieldNode, false, auxiliaryPatterns));\n    }\n}\nexports.NodeHandlerSelectionInlineFragment = NodeHandlerSelectionInlineFragment;\n//# sourceMappingURL=NodeHandlerSelectionInlineFragment.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DirectiveNodeHandlerAdapter = void 0;\n/**\n * An abstract handler for GraphQL directives.\n */\nclass DirectiveNodeHandlerAdapter {\n    constructor(targetKind, util, settings) {\n        this.targetKind = targetKind;\n        this.util = util;\n        this.settings = settings;\n    }\n    /**\n     * Get the value of the 'if' argument in a directive.\n     * @param {DirectiveNode} directive A directive.\n     * @param {IConvertContext} convertContext A convert context.\n     * @return {Term} The term.\n     */\n    getDirectiveConditionalValue(directive, convertContext) {\n        const arg = this.util.getArgument(directive.arguments, 'if');\n        if (!arg) {\n            throw new Error(`The directive ${directive.name.value} is missing an if-argument.`);\n        }\n        const subValue = this.util.handleNodeValue(arg.value, arg.name.value, convertContext);\n        if (subValue.terms.length !== 1) {\n            throw new Error(`Can not apply the directive ${directive.name.value} with a list.`);\n        }\n        return subValue.terms[0];\n    }\n    /**\n     * If a `scope: all` directive param is present.\n     * @param {DirectiveNode} directive A directive.\n     * @return {boolean} If `scope: all` is present.\n     */\n    isDirectiveScopeAll(directive) {\n        const scopeArg = this.util.getArgument(directive.arguments, 'scope');\n        return scopeArg && scopeArg.value.kind === 'EnumValue' && scopeArg.value.value === 'all';\n    }\n}\nexports.DirectiveNodeHandlerAdapter = DirectiveNodeHandlerAdapter;\n//# sourceMappingURL=DirectiveNodeHandlerAdapter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DirectiveNodeHandlerInclude = void 0;\nconst DirectiveNodeHandlerAdapter_1 = require(\"./DirectiveNodeHandlerAdapter\");\n/**\n * A handler for include directives.\n */\nclass DirectiveNodeHandlerInclude extends DirectiveNodeHandlerAdapter_1.DirectiveNodeHandlerAdapter {\n    constructor(util, settings) {\n        super('include', util, settings);\n    }\n    handle(directiveContext, convertContext) {\n        const val = this.getDirectiveConditionalValue(directiveContext.directive, convertContext);\n        if (val.termType === 'Literal' && val.value === 'false') {\n            return { ignore: true };\n        }\n        return {};\n    }\n}\nexports.DirectiveNodeHandlerInclude = DirectiveNodeHandlerInclude;\n//# sourceMappingURL=DirectiveNodeHandlerInclude.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DirectiveNodeHandlerOptional = void 0;\nconst DirectiveNodeHandlerAdapter_1 = require(\"./DirectiveNodeHandlerAdapter\");\n/**\n * A handler for optional directives.\n */\nclass DirectiveNodeHandlerOptional extends DirectiveNodeHandlerAdapter_1.DirectiveNodeHandlerAdapter {\n    constructor(util, settings) {\n        super('optional', util, settings);\n    }\n    handle(directiveContext, convertContext) {\n        return {\n            operationOverrider: (operation) => this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]), operation),\n        };\n    }\n}\nexports.DirectiveNodeHandlerOptional = DirectiveNodeHandlerOptional;\n//# sourceMappingURL=DirectiveNodeHandlerOptional.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DirectiveNodeHandlerPlural = void 0;\nconst IConvertContext_1 = require(\"../../IConvertContext\");\nconst DirectiveNodeHandlerAdapter_1 = require(\"./DirectiveNodeHandlerAdapter\");\n/**\n * A handler for plural directives.\n */\nclass DirectiveNodeHandlerPlural extends DirectiveNodeHandlerAdapter_1.DirectiveNodeHandlerAdapter {\n    constructor(util, settings) {\n        super('plural', util, settings);\n    }\n    handle(directiveContext, convertContext) {\n        if (this.isDirectiveScopeAll(directiveContext.directive)) {\n            convertContext.singularizeState = IConvertContext_1.SingularizeState.PLURAL;\n        }\n        // Delete the existing entry, as this may have already been set before if we were in a single scope.\n        delete convertContext.singularizeVariables[this.util.nameToVariable(directiveContext.fieldLabel, convertContext).value];\n        return {};\n    }\n}\nexports.DirectiveNodeHandlerPlural = DirectiveNodeHandlerPlural;\n//# sourceMappingURL=DirectiveNodeHandlerPlural.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DirectiveNodeHandlerSingle = void 0;\nconst IConvertContext_1 = require(\"../../IConvertContext\");\nconst DirectiveNodeHandlerAdapter_1 = require(\"./DirectiveNodeHandlerAdapter\");\n/**\n * A handler for single directives.\n */\nclass DirectiveNodeHandlerSingle extends DirectiveNodeHandlerAdapter_1.DirectiveNodeHandlerAdapter {\n    constructor(util, settings) {\n        super('single', util, settings);\n    }\n    handle(directiveContext, convertContext) {\n        if (this.isDirectiveScopeAll(directiveContext.directive)) {\n            convertContext.singularizeState = IConvertContext_1.SingularizeState.SINGLE;\n        }\n        convertContext.singularizeVariables[this.util.nameToVariable(directiveContext.fieldLabel, convertContext).value] = true;\n        return {};\n    }\n}\nexports.DirectiveNodeHandlerSingle = DirectiveNodeHandlerSingle;\n//# sourceMappingURL=DirectiveNodeHandlerSingle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DirectiveNodeHandlerSkip = void 0;\nconst DirectiveNodeHandlerAdapter_1 = require(\"./DirectiveNodeHandlerAdapter\");\n/**\n * A handler for skip directives.\n */\nclass DirectiveNodeHandlerSkip extends DirectiveNodeHandlerAdapter_1.DirectiveNodeHandlerAdapter {\n    constructor(util, settings) {\n        super('skip', util, settings);\n    }\n    handle(directiveContext, convertContext) {\n        const val = this.getDirectiveConditionalValue(directiveContext.directive, convertContext);\n        if (val.termType === 'Literal' && val.value === 'true') {\n            return { ignore: true };\n        }\n        return {};\n    }\n}\nexports.DirectiveNodeHandlerSkip = DirectiveNodeHandlerSkip;\n//# sourceMappingURL=DirectiveNodeHandlerSkip.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./DirectiveNodeHandlerAdapter\"), exports);\n__exportStar(require(\"./DirectiveNodeHandlerInclude\"), exports);\n__exportStar(require(\"./DirectiveNodeHandlerOptional\"), exports);\n__exportStar(require(\"./DirectiveNodeHandlerPlural\"), exports);\n__exportStar(require(\"./DirectiveNodeHandlerSingle\"), exports);\n__exportStar(require(\"./DirectiveNodeHandlerSkip\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./directivenode\"), exports);\n__exportStar(require(\"./valuenode\"), exports);\n__exportStar(require(\"./NodeHandlerAdapter\"), exports);\n__exportStar(require(\"./NodeHandlerDefinitionAdapter\"), exports);\n__exportStar(require(\"./NodeHandlerDefinitionFragment\"), exports);\n__exportStar(require(\"./NodeHandlerDefinitionOperation\"), exports);\n__exportStar(require(\"./NodeHandlerDocument\"), exports);\n__exportStar(require(\"./NodeHandlerSelectionAdapter\"), exports);\n__exportStar(require(\"./NodeHandlerSelectionField\"), exports);\n__exportStar(require(\"./NodeHandlerSelectionFragmentSpread\"), exports);\n__exportStar(require(\"./NodeHandlerSelectionInlineFragment\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeValueHandlerAdapter = void 0;\n/**\n * A handler for converting GraphQL value nodes to terms and patterns.\n */\nclass NodeValueHandlerAdapter {\n    constructor(targetKind, util, settings) {\n        this.targetKind = targetKind;\n        this.util = util;\n        this.settings = settings;\n    }\n}\nexports.NodeValueHandlerAdapter = NodeValueHandlerAdapter;\n//# sourceMappingURL=NodeValueHandlerAdapter.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeValueHandlerBoolean = void 0;\nconst NodeValueHandlerAdapter_1 = require(\"./NodeValueHandlerAdapter\");\n/**\n * Converts GraphQL booleans to RDF boolean terms.\n */\nclass NodeValueHandlerBoolean extends NodeValueHandlerAdapter_1.NodeValueHandlerAdapter {\n    constructor(util, settings) {\n        super('BooleanValue', util, settings);\n        this.datatype = this.util.dataFactory.namedNode('http://www.w3.org/2001/XMLSchema#boolean');\n    }\n    handle(valueNode, fieldName, convertContext) {\n        return { terms: [this.util.dataFactory.literal(valueNode.value ? 'true' : 'false', this.datatype)] };\n    }\n}\nexports.NodeValueHandlerBoolean = NodeValueHandlerBoolean;\n//# sourceMappingURL=NodeValueHandlerBoolean.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeValueHandlerEnum = void 0;\nconst NodeValueHandlerAdapter_1 = require(\"./NodeValueHandlerAdapter\");\n/**\n * Converts GraphQL enums to RDF named nodes.\n */\nclass NodeValueHandlerEnum extends NodeValueHandlerAdapter_1.NodeValueHandlerAdapter {\n    constructor(util, settings) {\n        super('EnumValue', util, settings);\n    }\n    handle(valueNode, fieldName, convertContext) {\n        return { terms: [this.util.valueToNamedNode(valueNode.value, convertContext.context)] };\n    }\n}\nexports.NodeValueHandlerEnum = NodeValueHandlerEnum;\n//# sourceMappingURL=NodeValueHandlerEnum.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeValueHandlerFloat = void 0;\nconst NodeValueHandlerAdapter_1 = require(\"./NodeValueHandlerAdapter\");\n/**\n * Converts GraphQL floats to RDF float terms.\n */\nclass NodeValueHandlerFloat extends NodeValueHandlerAdapter_1.NodeValueHandlerAdapter {\n    constructor(util, settings) {\n        super('FloatValue', util, settings);\n        this.datatype = this.util.dataFactory.namedNode('http://www.w3.org/2001/XMLSchema#float');\n    }\n    handle(valueNode, fieldName, convertContext) {\n        return { terms: [this.util.dataFactory.literal(valueNode.value, this.datatype)] };\n    }\n}\nexports.NodeValueHandlerFloat = NodeValueHandlerFloat;\n//# sourceMappingURL=NodeValueHandlerFloat.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeValueHandlerInt = void 0;\nconst NodeValueHandlerAdapter_1 = require(\"./NodeValueHandlerAdapter\");\n/**\n * Converts GraphQL ints to RDF integer terms.\n */\nclass NodeValueHandlerInt extends NodeValueHandlerAdapter_1.NodeValueHandlerAdapter {\n    constructor(util, settings) {\n        super('IntValue', util, settings);\n        this.datatype = this.util.dataFactory.namedNode('http://www.w3.org/2001/XMLSchema#integer');\n    }\n    handle(valueNode, fieldName, convertContext) {\n        return { terms: [this.util.dataFactory.literal(valueNode.value, this.datatype)] };\n    }\n}\nexports.NodeValueHandlerInt = NodeValueHandlerInt;\n//# sourceMappingURL=NodeValueHandlerInt.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeValueHandlerList = void 0;\nconst NodeValueHandlerAdapter_1 = require(\"./NodeValueHandlerAdapter\");\n/**\n * Converts GraphQL lists to RDF lists if settings.arraysToRdfLists is true, otherwise it converts to multiple values.\n */\nclass NodeValueHandlerList extends NodeValueHandlerAdapter_1.NodeValueHandlerAdapter {\n    constructor(util, settings) {\n        super('ListValue', util, settings);\n        this.nodeFirst = this.util.dataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#first');\n        this.nodeRest = this.util.dataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#rest');\n        this.nodeNil = this.util.dataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#nil');\n    }\n    handle(valueNode, fieldName, convertContext) {\n        const listTerms = [];\n        let auxiliaryPatterns = [];\n        // Create terms for list values\n        for (const v of valueNode.values) {\n            const subValue = this.util.handleNodeValue(v, fieldName, convertContext);\n            for (const term of subValue.terms) {\n                listTerms.push(term);\n            }\n            if (subValue.auxiliaryPatterns) {\n                auxiliaryPatterns = auxiliaryPatterns.concat(subValue.auxiliaryPatterns);\n            }\n        }\n        if (this.settings.arraysToRdfLists) {\n            // Convert array to RDF list\n            // Create chained list structure\n            const firstListNode = this.util.dataFactory.blankNode();\n            let listNode = firstListNode;\n            let remaining = listTerms.length;\n            for (const term of listTerms) {\n                auxiliaryPatterns.push(this.util.operationFactory.createPattern(listNode, this.nodeFirst, term, convertContext.graph));\n                const nextListNode = --remaining === 0 ? this.nodeNil : this.util.dataFactory.blankNode();\n                auxiliaryPatterns.push(this.util.operationFactory.createPattern(listNode, this.nodeRest, nextListNode, convertContext.graph));\n                listNode = nextListNode;\n            }\n            return { terms: [firstListNode], auxiliaryPatterns };\n        }\n        else {\n            // Convert array to multiple terms that will be linked via the same predicate.\n            return { terms: listTerms, auxiliaryPatterns };\n        }\n    }\n}\nexports.NodeValueHandlerList = NodeValueHandlerList;\n//# sourceMappingURL=NodeValueHandlerList.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeValueHandlerNull = void 0;\nconst NodeValueHandlerAdapter_1 = require(\"./NodeValueHandlerAdapter\");\n/**\n * Converts GraphQL nulls to RDF nil terms.\n */\nclass NodeValueHandlerNull extends NodeValueHandlerAdapter_1.NodeValueHandlerAdapter {\n    constructor(util, settings) {\n        super('NullValue', util, settings);\n        this.nil = this.util.dataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#nil');\n    }\n    handle(valueNode, fieldName, convertContext) {\n        return { terms: [this.nil] };\n    }\n}\nexports.NodeValueHandlerNull = NodeValueHandlerNull;\n//# sourceMappingURL=NodeValueHandlerNull.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeValueHandlerObject = void 0;\nconst NodeValueHandlerAdapter_1 = require(\"./NodeValueHandlerAdapter\");\n/**\n * Converts GraphQL objects to triple patterns by converting keys to predicates and values to objects.\n */\nclass NodeValueHandlerObject extends NodeValueHandlerAdapter_1.NodeValueHandlerAdapter {\n    constructor(util, settings) {\n        super('ObjectValue', util, settings);\n    }\n    handle(valueNode, fieldName, convertContext) {\n        // Convert object keys to predicates and values to objects, and link them both with a new blank node.\n        const subject = this.util.dataFactory.blankNode();\n        let auxiliaryObjectPatterns = [];\n        for (const field of valueNode.fields) {\n            const subValue = this.util.handleNodeValue(field.value, fieldName, convertContext);\n            for (const term of subValue.terms) {\n                auxiliaryObjectPatterns.push(this.util.createQuadPattern(subject, field.name, term, convertContext.graph, convertContext.context));\n            }\n            if (subValue.auxiliaryPatterns) {\n                auxiliaryObjectPatterns = auxiliaryObjectPatterns.concat(subValue.auxiliaryPatterns);\n            }\n        }\n        return { terms: [subject], auxiliaryPatterns: auxiliaryObjectPatterns };\n    }\n}\nexports.NodeValueHandlerObject = NodeValueHandlerObject;\n//# sourceMappingURL=NodeValueHandlerObject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeValueHandlerString = void 0;\nconst NodeValueHandlerAdapter_1 = require(\"./NodeValueHandlerAdapter\");\n/**\n * Converts GraphQL strings to RDF string terms, which can have a custom language or datatype.\n */\nclass NodeValueHandlerString extends NodeValueHandlerAdapter_1.NodeValueHandlerAdapter {\n    constructor(util, settings) {\n        super('StringValue', util, settings);\n    }\n    handle(valueNode, fieldName, convertContext) {\n        const contextEntry = convertContext.context.getContextRaw()[fieldName];\n        let language;\n        let datatype;\n        if (contextEntry && typeof contextEntry !== 'string') {\n            if (contextEntry['@language']) {\n                language = contextEntry['@language'];\n            }\n            else if (contextEntry['@type']) {\n                datatype = this.util.dataFactory.namedNode(contextEntry['@type']);\n            }\n        }\n        return { terms: [this.util.dataFactory.literal(valueNode.value, language || datatype)] };\n    }\n}\nexports.NodeValueHandlerString = NodeValueHandlerString;\n//# sourceMappingURL=NodeValueHandlerString.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NodeValueHandlerVariable = void 0;\nconst NodeValueHandlerAdapter_1 = require(\"./NodeValueHandlerAdapter\");\n/**\n * Converts GraphQL variables to terms based on the contents of the variablesDict.\n */\nclass NodeValueHandlerVariable extends NodeValueHandlerAdapter_1.NodeValueHandlerAdapter {\n    constructor(util, settings) {\n        super('Variable', util, settings);\n    }\n    handle(valueNode, fieldName, convertContext) {\n        const id = valueNode.name.value;\n        const value = convertContext.variablesDict[id];\n        const meta = convertContext.variablesMetaDict[id];\n        // Handle missing values\n        if (!value) {\n            if (!convertContext.ignoreUnknownVariables && (!meta || meta.mandatory)) {\n                throw new Error(`Undefined variable: ${id}`);\n            }\n            else {\n                const variable = this.util.dataFactory.variable(id);\n                if (convertContext.terminalVariables.map((v) => v.value).indexOf(id) < 0) {\n                    convertContext.terminalVariables.push(variable);\n                }\n                return { terms: [variable] };\n            }\n        }\n        // Don't allow variables that refer to other variables\n        if (value.kind === 'Variable') {\n            throw new Error(`Variable refers to another variable: ${id}`);\n        }\n        if (meta) {\n            // Check the type\n            if (meta.list) {\n                // If we expect a list, check if we got a list.\n                if (value.kind !== 'ListValue') {\n                    throw new Error(`Expected a list, but got ${value.kind} for ${id}`);\n                }\n                // Check the type in the list\n                if (meta.type) {\n                    const listValue = value;\n                    for (const v of listValue.values) {\n                        if (v.kind !== meta.type) {\n                            throw new Error(`Expected ${meta.type}, but got ${v.kind} for ${id}`);\n                        }\n                    }\n                }\n            }\n            else if (meta.type) {\n                // This is allowed to be different (?)\n                /*if (value.kind !== meta.type) {\n                  throw new Error(`Expected ${meta.type}, but got ${value.kind} for ${id}`);\n                }*/\n            }\n        }\n        return this.util.handleNodeValue(value, fieldName, convertContext);\n    }\n}\nexports.NodeValueHandlerVariable = NodeValueHandlerVariable;\n//# sourceMappingURL=NodeValueHandlerVariable.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./NodeValueHandlerAdapter\"), exports);\n__exportStar(require(\"./NodeValueHandlerBoolean\"), exports);\n__exportStar(require(\"./NodeValueHandlerEnum\"), exports);\n__exportStar(require(\"./NodeValueHandlerFloat\"), exports);\n__exportStar(require(\"./NodeValueHandlerInt\"), exports);\n__exportStar(require(\"./NodeValueHandlerList\"), exports);\n__exportStar(require(\"./NodeValueHandlerNull\"), exports);\n__exportStar(require(\"./NodeValueHandlerObject\"), exports);\n__exportStar(require(\"./NodeValueHandlerString\"), exports);\n__exportStar(require(\"./NodeValueHandlerVariable\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.printError = printError;\nexports.GraphQLError = void 0;\n\nvar _isObjectLike = _interopRequireDefault(require(\"../jsutils/isObjectLike.js\"));\n\nvar _symbols = require(\"../polyfills/symbols.js\");\n\nvar _location = require(\"../language/location.js\");\n\nvar _printLocation = require(\"../language/printLocation.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n/**\n * A GraphQLError describes an Error found during the parse, validate, or\n * execute phases of performing a GraphQL operation. In addition to a message\n * and stack trace, it also includes information about the locations in a\n * GraphQL document and/or execution result that correspond to the Error.\n */\nvar GraphQLError = /*#__PURE__*/function (_Error) {\n  _inherits(GraphQLError, _Error);\n\n  var _super = _createSuper(GraphQLError);\n\n  /**\n   * An array of { line, column } locations within the source GraphQL document\n   * which correspond to this error.\n   *\n   * Errors during validation often contain multiple locations, for example to\n   * point out two things with the same name. Errors during execution include a\n   * single location, the field which produced the error.\n   *\n   * Enumerable, and appears in the result of JSON.stringify().\n   */\n\n  /**\n   * An array describing the JSON-path into the execution response which\n   * corresponds to this error. Only included for errors during execution.\n   *\n   * Enumerable, and appears in the result of JSON.stringify().\n   */\n\n  /**\n   * An array of GraphQL AST Nodes corresponding to this error.\n   */\n\n  /**\n   * The source GraphQL document for the first location of this error.\n   *\n   * Note that if this Error represents more than one node, the source may not\n   * represent nodes after the first node.\n   */\n\n  /**\n   * An array of character offsets within the source GraphQL document\n   * which correspond to this error.\n   */\n\n  /**\n   * The original error thrown from a field resolver during execution.\n   */\n\n  /**\n   * Extension fields to add to the formatted error.\n   */\n  function GraphQLError(message, nodes, source, positions, path, originalError, extensions) {\n    var _nodeLocations, _nodeLocations2, _nodeLocations3;\n\n    var _this;\n\n    _classCallCheck(this, GraphQLError);\n\n    _this = _super.call(this, message);\n    _this.name = 'GraphQLError';\n    _this.originalError = originalError !== null && originalError !== void 0 ? originalError : undefined; // Compute list of blame nodes.\n\n    _this.nodes = undefinedIfEmpty(Array.isArray(nodes) ? nodes : nodes ? [nodes] : undefined);\n    var nodeLocations = [];\n\n    for (var _i2 = 0, _ref3 = (_this$nodes = _this.nodes) !== null && _this$nodes !== void 0 ? _this$nodes : []; _i2 < _ref3.length; _i2++) {\n      var _this$nodes;\n\n      var _ref4 = _ref3[_i2];\n      var loc = _ref4.loc;\n\n      if (loc != null) {\n        nodeLocations.push(loc);\n      }\n    }\n\n    nodeLocations = undefinedIfEmpty(nodeLocations); // Compute locations in the source for the given nodes/positions.\n\n    _this.source = source !== null && source !== void 0 ? source : (_nodeLocations = nodeLocations) === null || _nodeLocations === void 0 ? void 0 : _nodeLocations[0].source;\n    _this.positions = positions !== null && positions !== void 0 ? positions : (_nodeLocations2 = nodeLocations) === null || _nodeLocations2 === void 0 ? void 0 : _nodeLocations2.map(function (loc) {\n      return loc.start;\n    });\n    _this.locations = positions && source ? positions.map(function (pos) {\n      return (0, _location.getLocation)(source, pos);\n    }) : (_nodeLocations3 = nodeLocations) === null || _nodeLocations3 === void 0 ? void 0 : _nodeLocations3.map(function (loc) {\n      return (0, _location.getLocation)(loc.source, loc.start);\n    });\n    _this.path = path !== null && path !== void 0 ? path : undefined;\n    var originalExtensions = originalError === null || originalError === void 0 ? void 0 : originalError.extensions;\n\n    if (extensions == null && (0, _isObjectLike.default)(originalExtensions)) {\n      _this.extensions = _objectSpread({}, originalExtensions);\n    } else {\n      _this.extensions = extensions !== null && extensions !== void 0 ? extensions : {};\n    } // By being enumerable, JSON.stringify will include bellow properties in the resulting output.\n    // This ensures that the simplest possible GraphQL service adheres to the spec.\n\n\n    Object.defineProperties(_assertThisInitialized(_this), {\n      message: {\n        enumerable: true\n      },\n      locations: {\n        enumerable: _this.locations != null\n      },\n      path: {\n        enumerable: _this.path != null\n      },\n      extensions: {\n        enumerable: _this.extensions != null && Object.keys(_this.extensions).length > 0\n      },\n      name: {\n        enumerable: false\n      },\n      nodes: {\n        enumerable: false\n      },\n      source: {\n        enumerable: false\n      },\n      positions: {\n        enumerable: false\n      },\n      originalError: {\n        enumerable: false\n      }\n    }); // Include (non-enumerable) stack trace.\n\n    if (originalError !== null && originalError !== void 0 && originalError.stack) {\n      Object.defineProperty(_assertThisInitialized(_this), 'stack', {\n        value: originalError.stack,\n        writable: true,\n        configurable: true\n      });\n      return _possibleConstructorReturn(_this);\n    } // istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\n\n\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(_assertThisInitialized(_this), GraphQLError);\n    } else {\n      Object.defineProperty(_assertThisInitialized(_this), 'stack', {\n        value: Error().stack,\n        writable: true,\n        configurable: true\n      });\n    }\n\n    return _this;\n  }\n\n  _createClass(GraphQLError, [{\n    key: \"toString\",\n    value: function toString() {\n      return printError(this);\n    } // FIXME: workaround to not break chai comparisons, should be remove in v16\n    // $FlowFixMe[unsupported-syntax] Flow doesn't support computed properties yet\n\n  }, {\n    key: _symbols.SYMBOL_TO_STRING_TAG,\n    get: function get() {\n      return 'Object';\n    }\n  }]);\n\n  return GraphQLError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nexports.GraphQLError = GraphQLError;\n\nfunction undefinedIfEmpty(array) {\n  return array === undefined || array.length === 0 ? undefined : array;\n}\n/**\n * Prints a GraphQLError to a string, representing useful location information\n * about the error's position in the source.\n */\n\n\nfunction printError(error) {\n  var output = error.message;\n\n  if (error.nodes) {\n    for (var _i4 = 0, _error$nodes2 = error.nodes; _i4 < _error$nodes2.length; _i4++) {\n      var node = _error$nodes2[_i4];\n\n      if (node.loc) {\n        output += '\\n\\n' + (0, _printLocation.printLocation)(node.loc);\n      }\n    }\n  } else if (error.source && error.locations) {\n    for (var _i6 = 0, _error$locations2 = error.locations; _i6 < _error$locations2.length; _i6++) {\n      var location = _error$locations2[_i6];\n      output += '\\n\\n' + (0, _printLocation.printSourceLocation)(error.source, location);\n    }\n  }\n\n  return output;\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.syntaxError = syntaxError;\n\nvar _GraphQLError = require(\"./GraphQLError.js\");\n\n/**\n * Produces a GraphQLError representing a syntax error, containing useful\n * descriptive information about the syntax error's position in the source.\n */\nfunction syntaxError(source, position, description) {\n  return new _GraphQLError.GraphQLError(\"Syntax Error: \".concat(description), undefined, source, [position]);\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = defineInspect;\n\nvar _invariant = _interopRequireDefault(require(\"./invariant.js\"));\n\nvar _nodejsCustomInspectSymbol = _interopRequireDefault(require(\"./nodejsCustomInspectSymbol.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * The `defineInspect()` function defines `inspect()` prototype method as alias of `toJSON`\n */\nfunction defineInspect(classObject) {\n  var fn = classObject.prototype.toJSON;\n  typeof fn === 'function' || (0, _invariant.default)(0);\n  classObject.prototype.inspect = fn; // istanbul ignore else (See: 'https://github.com/graphql/graphql-js/issues/2317')\n\n  if (_nodejsCustomInspectSymbol.default) {\n    classObject.prototype[_nodejsCustomInspectSymbol.default] = fn;\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = devAssert;\n\nfunction devAssert(condition, message) {\n  var booleanCondition = Boolean(condition); // istanbul ignore else (See transformation done in './resources/inlineInvariant.js')\n\n  if (!booleanCondition) {\n    throw new Error(message);\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = inspect;\n\nvar _nodejsCustomInspectSymbol = _interopRequireDefault(require(\"./nodejsCustomInspectSymbol.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nvar MAX_ARRAY_LENGTH = 10;\nvar MAX_RECURSIVE_DEPTH = 2;\n/**\n * Used to print values in error messages.\n */\n\nfunction inspect(value) {\n  return formatValue(value, []);\n}\n\nfunction formatValue(value, seenValues) {\n  switch (_typeof(value)) {\n    case 'string':\n      return JSON.stringify(value);\n\n    case 'function':\n      return value.name ? \"[function \".concat(value.name, \"]\") : '[function]';\n\n    case 'object':\n      if (value === null) {\n        return 'null';\n      }\n\n      return formatObjectValue(value, seenValues);\n\n    default:\n      return String(value);\n  }\n}\n\nfunction formatObjectValue(value, previouslySeenValues) {\n  if (previouslySeenValues.indexOf(value) !== -1) {\n    return '[Circular]';\n  }\n\n  var seenValues = [].concat(previouslySeenValues, [value]);\n  var customInspectFn = getCustomFn(value);\n\n  if (customInspectFn !== undefined) {\n    var customValue = customInspectFn.call(value); // check for infinite recursion\n\n    if (customValue !== value) {\n      return typeof customValue === 'string' ? customValue : formatValue(customValue, seenValues);\n    }\n  } else if (Array.isArray(value)) {\n    return formatArray(value, seenValues);\n  }\n\n  return formatObject(value, seenValues);\n}\n\nfunction formatObject(object, seenValues) {\n  var keys = Object.keys(object);\n\n  if (keys.length === 0) {\n    return '{}';\n  }\n\n  if (seenValues.length > MAX_RECURSIVE_DEPTH) {\n    return '[' + getObjectTag(object) + ']';\n  }\n\n  var properties = keys.map(function (key) {\n    var value = formatValue(object[key], seenValues);\n    return key + ': ' + value;\n  });\n  return '{ ' + properties.join(', ') + ' }';\n}\n\nfunction formatArray(array, seenValues) {\n  if (array.length === 0) {\n    return '[]';\n  }\n\n  if (seenValues.length > MAX_RECURSIVE_DEPTH) {\n    return '[Array]';\n  }\n\n  var len = Math.min(MAX_ARRAY_LENGTH, array.length);\n  var remaining = array.length - len;\n  var items = [];\n\n  for (var i = 0; i < len; ++i) {\n    items.push(formatValue(array[i], seenValues));\n  }\n\n  if (remaining === 1) {\n    items.push('... 1 more item');\n  } else if (remaining > 1) {\n    items.push(\"... \".concat(remaining, \" more items\"));\n  }\n\n  return '[' + items.join(', ') + ']';\n}\n\nfunction getCustomFn(object) {\n  var customInspectFn = object[String(_nodejsCustomInspectSymbol.default)];\n\n  if (typeof customInspectFn === 'function') {\n    return customInspectFn;\n  }\n\n  if (typeof object.inspect === 'function') {\n    return object.inspect;\n  }\n}\n\nfunction getObjectTag(object) {\n  var tag = Object.prototype.toString.call(object).replace(/^\\[object /, '').replace(/]$/, '');\n\n  if (tag === 'Object' && typeof object.constructor === 'function') {\n    var name = object.constructor.name;\n\n    if (typeof name === 'string' && name !== '') {\n      return name;\n    }\n  }\n\n  return tag;\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _inspect = _interopRequireDefault(require(\"./inspect.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n// See: https://expressjs.com/en/advanced/best-practice-performance.html#set-node_env-to-production\n// See: https://webpack.js.org/guides/production/\nvar _default = process.env.NODE_ENV === 'production' ? // istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\n// eslint-disable-next-line no-shadow\nfunction instanceOf(value, constructor) {\n  return value instanceof constructor;\n} : // eslint-disable-next-line no-shadow\nfunction instanceOf(value, constructor) {\n  if (value instanceof constructor) {\n    return true;\n  }\n\n  if (_typeof(value) === 'object' && value !== null) {\n    var _value$constructor;\n\n    var className = constructor.prototype[Symbol.toStringTag];\n    var valueClassName = // We still need to support constructor's name to detect conflicts with older versions of this library.\n    Symbol.toStringTag in value ? value[Symbol.toStringTag] : (_value$constructor = value.constructor) === null || _value$constructor === void 0 ? void 0 : _value$constructor.name;\n\n    if (className === valueClassName) {\n      var stringifiedValue = (0, _inspect.default)(value);\n      throw new Error(\"Cannot use \".concat(className, \" \\\"\").concat(stringifiedValue, \"\\\" from another module or realm.\\n\\nEnsure that there is only one instance of \\\"graphql\\\" in the node_modules\\ndirectory. If different versions of \\\"graphql\\\" are the dependencies of other\\nrelied on modules, use \\\"resolutions\\\" to ensure only one version is installed.\\n\\nhttps://yarnpkg.com/en/docs/selective-version-resolutions\\n\\nDuplicate \\\"graphql\\\" modules cannot be used at the same time since different\\nversions may have different capabilities and behavior. The data from one\\nversion used in the function from another could produce confusing and\\nspurious results.\"));\n    }\n  }\n\n  return false;\n};\n\nexports.default = _default;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = invariant;\n\nfunction invariant(condition, message) {\n  var booleanCondition = Boolean(condition); // istanbul ignore else (See transformation done in './resources/inlineInvariant.js')\n\n  if (!booleanCondition) {\n    throw new Error(message != null ? message : 'Unexpected invariant triggered.');\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isObjectLike;\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/**\n * Return true if `value` is object-like. A value is object-like if it's not\n * `null` and has a `typeof` result of \"object\".\n */\nfunction isObjectLike(value) {\n  return _typeof(value) == 'object' && value !== null;\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n// istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\nvar nodejsCustomInspectSymbol = typeof Symbol === 'function' && typeof Symbol.for === 'function' ? Symbol.for('nodejs.util.inspect.custom') : undefined;\nvar _default = nodejsCustomInspectSymbol;\nexports.default = _default;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isNode = isNode;\nexports.Token = exports.Location = void 0;\n\nvar _defineInspect = _interopRequireDefault(require(\"../jsutils/defineInspect.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Contains a range of UTF-8 character offsets and token references that\n * identify the region of the source from which the AST derived.\n */\nvar Location = /*#__PURE__*/function () {\n  /**\n   * The character offset at which this Node begins.\n   */\n\n  /**\n   * The character offset at which this Node ends.\n   */\n\n  /**\n   * The Token at which this Node begins.\n   */\n\n  /**\n   * The Token at which this Node ends.\n   */\n\n  /**\n   * The Source document the AST represents.\n   */\n  function Location(startToken, endToken, source) {\n    this.start = startToken.start;\n    this.end = endToken.end;\n    this.startToken = startToken;\n    this.endToken = endToken;\n    this.source = source;\n  }\n\n  var _proto = Location.prototype;\n\n  _proto.toJSON = function toJSON() {\n    return {\n      start: this.start,\n      end: this.end\n    };\n  };\n\n  return Location;\n}(); // Print a simplified form when appearing in `inspect` and `util.inspect`.\n\n\nexports.Location = Location;\n(0, _defineInspect.default)(Location);\n/**\n * Represents a range of characters represented by a lexical token\n * within a Source.\n */\n\nvar Token = /*#__PURE__*/function () {\n  /**\n   * The kind of Token.\n   */\n\n  /**\n   * The character offset at which this Node begins.\n   */\n\n  /**\n   * The character offset at which this Node ends.\n   */\n\n  /**\n   * The 1-indexed line number on which this Token appears.\n   */\n\n  /**\n   * The 1-indexed column number at which this Token begins.\n   */\n\n  /**\n   * For non-punctuation tokens, represents the interpreted value of the token.\n   */\n\n  /**\n   * Tokens exist as nodes in a double-linked-list amongst all tokens\n   * including ignored tokens. <SOF> is always the first node and <EOF>\n   * the last.\n   */\n  function Token(kind, start, end, line, column, prev, value) {\n    this.kind = kind;\n    this.start = start;\n    this.end = end;\n    this.line = line;\n    this.column = column;\n    this.value = value;\n    this.prev = prev;\n    this.next = null;\n  }\n\n  var _proto2 = Token.prototype;\n\n  _proto2.toJSON = function toJSON() {\n    return {\n      kind: this.kind,\n      value: this.value,\n      line: this.line,\n      column: this.column\n    };\n  };\n\n  return Token;\n}(); // Print a simplified form when appearing in `inspect` and `util.inspect`.\n\n\nexports.Token = Token;\n(0, _defineInspect.default)(Token);\n/**\n * @internal\n */\n\nfunction isNode(maybeNode) {\n  return maybeNode != null && typeof maybeNode.kind === 'string';\n}\n/**\n * The list of all possible AST node types.\n */\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.dedentBlockStringValue = dedentBlockStringValue;\nexports.getBlockStringIndentation = getBlockStringIndentation;\nexports.printBlockString = printBlockString;\n\n/**\n * Produces the value of a block string from its parsed raw value, similar to\n * CoffeeScript's block string, Python's docstring trim or Ruby's strip_heredoc.\n *\n * This implements the GraphQL spec's BlockStringValue() static algorithm.\n *\n * @internal\n */\nfunction dedentBlockStringValue(rawString) {\n  // Expand a block string's raw value into independent lines.\n  var lines = rawString.split(/\\r\\n|[\\n\\r]/g); // Remove common indentation from all lines but first.\n\n  var commonIndent = getBlockStringIndentation(rawString);\n\n  if (commonIndent !== 0) {\n    for (var i = 1; i < lines.length; i++) {\n      lines[i] = lines[i].slice(commonIndent);\n    }\n  } // Remove leading and trailing blank lines.\n\n\n  var startLine = 0;\n\n  while (startLine < lines.length && isBlank(lines[startLine])) {\n    ++startLine;\n  }\n\n  var endLine = lines.length;\n\n  while (endLine > startLine && isBlank(lines[endLine - 1])) {\n    --endLine;\n  } // Return a string of the lines joined with U+000A.\n\n\n  return lines.slice(startLine, endLine).join('\\n');\n}\n\nfunction isBlank(str) {\n  for (var i = 0; i < str.length; ++i) {\n    if (str[i] !== ' ' && str[i] !== '\\t') {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\n * @internal\n */\n\n\nfunction getBlockStringIndentation(value) {\n  var _commonIndent;\n\n  var isFirstLine = true;\n  var isEmptyLine = true;\n  var indent = 0;\n  var commonIndent = null;\n\n  for (var i = 0; i < value.length; ++i) {\n    switch (value.charCodeAt(i)) {\n      case 13:\n        //  \\r\n        if (value.charCodeAt(i + 1) === 10) {\n          ++i; // skip \\r\\n as one symbol\n        }\n\n      // falls through\n\n      case 10:\n        //  \\n\n        isFirstLine = false;\n        isEmptyLine = true;\n        indent = 0;\n        break;\n\n      case 9: //   \\t\n\n      case 32:\n        //  <space>\n        ++indent;\n        break;\n\n      default:\n        if (isEmptyLine && !isFirstLine && (commonIndent === null || indent < commonIndent)) {\n          commonIndent = indent;\n        }\n\n        isEmptyLine = false;\n    }\n  }\n\n  return (_commonIndent = commonIndent) !== null && _commonIndent !== void 0 ? _commonIndent : 0;\n}\n/**\n * Print a block string in the indented block form by adding a leading and\n * trailing blank line. However, if a block string starts with whitespace and is\n * a single-line, adding a leading blank line would strip that whitespace.\n *\n * @internal\n */\n\n\nfunction printBlockString(value) {\n  var indentation = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  var preferMultipleLines = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var isSingleLine = value.indexOf('\\n') === -1;\n  var hasLeadingSpace = value[0] === ' ' || value[0] === '\\t';\n  var hasTrailingQuote = value[value.length - 1] === '\"';\n  var hasTrailingSlash = value[value.length - 1] === '\\\\';\n  var printAsMultipleLines = !isSingleLine || hasTrailingQuote || hasTrailingSlash || preferMultipleLines;\n  var result = ''; // Format a multi-line block quote to account for leading space.\n\n  if (printAsMultipleLines && !(isSingleLine && hasLeadingSpace)) {\n    result += '\\n' + indentation;\n  }\n\n  result += indentation ? value.replace(/\\n/g, '\\n' + indentation) : value;\n\n  if (printAsMultipleLines) {\n    result += '\\n';\n  }\n\n  return '\"\"\"' + result.replace(/\"\"\"/g, '\\\\\"\"\"') + '\"\"\"';\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DirectiveLocation = void 0;\n\n/**\n * The set of allowed directive location values.\n */\nvar DirectiveLocation = Object.freeze({\n  // Request Definitions\n  QUERY: 'QUERY',\n  MUTATION: 'MUTATION',\n  SUBSCRIPTION: 'SUBSCRIPTION',\n  FIELD: 'FIELD',\n  FRAGMENT_DEFINITION: 'FRAGMENT_DEFINITION',\n  FRAGMENT_SPREAD: 'FRAGMENT_SPREAD',\n  INLINE_FRAGMENT: 'INLINE_FRAGMENT',\n  VARIABLE_DEFINITION: 'VARIABLE_DEFINITION',\n  // Type System Definitions\n  SCHEMA: 'SCHEMA',\n  SCALAR: 'SCALAR',\n  OBJECT: 'OBJECT',\n  FIELD_DEFINITION: 'FIELD_DEFINITION',\n  ARGUMENT_DEFINITION: 'ARGUMENT_DEFINITION',\n  INTERFACE: 'INTERFACE',\n  UNION: 'UNION',\n  ENUM: 'ENUM',\n  ENUM_VALUE: 'ENUM_VALUE',\n  INPUT_OBJECT: 'INPUT_OBJECT',\n  INPUT_FIELD_DEFINITION: 'INPUT_FIELD_DEFINITION'\n});\n/**\n * The enum type representing the directive location values.\n */\n\nexports.DirectiveLocation = DirectiveLocation;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"Source\", {\n  enumerable: true,\n  get: function get() {\n    return _source.Source;\n  }\n});\nObject.defineProperty(exports, \"getLocation\", {\n  enumerable: true,\n  get: function get() {\n    return _location.getLocation;\n  }\n});\nObject.defineProperty(exports, \"printLocation\", {\n  enumerable: true,\n  get: function get() {\n    return _printLocation.printLocation;\n  }\n});\nObject.defineProperty(exports, \"printSourceLocation\", {\n  enumerable: true,\n  get: function get() {\n    return _printLocation.printSourceLocation;\n  }\n});\nObject.defineProperty(exports, \"Kind\", {\n  enumerable: true,\n  get: function get() {\n    return _kinds.Kind;\n  }\n});\nObject.defineProperty(exports, \"TokenKind\", {\n  enumerable: true,\n  get: function get() {\n    return _tokenKind.TokenKind;\n  }\n});\nObject.defineProperty(exports, \"Lexer\", {\n  enumerable: true,\n  get: function get() {\n    return _lexer.Lexer;\n  }\n});\nObject.defineProperty(exports, \"parse\", {\n  enumerable: true,\n  get: function get() {\n    return _parser.parse;\n  }\n});\nObject.defineProperty(exports, \"parseValue\", {\n  enumerable: true,\n  get: function get() {\n    return _parser.parseValue;\n  }\n});\nObject.defineProperty(exports, \"parseType\", {\n  enumerable: true,\n  get: function get() {\n    return _parser.parseType;\n  }\n});\nObject.defineProperty(exports, \"print\", {\n  enumerable: true,\n  get: function get() {\n    return _printer.print;\n  }\n});\nObject.defineProperty(exports, \"visit\", {\n  enumerable: true,\n  get: function get() {\n    return _visitor.visit;\n  }\n});\nObject.defineProperty(exports, \"visitInParallel\", {\n  enumerable: true,\n  get: function get() {\n    return _visitor.visitInParallel;\n  }\n});\nObject.defineProperty(exports, \"getVisitFn\", {\n  enumerable: true,\n  get: function get() {\n    return _visitor.getVisitFn;\n  }\n});\nObject.defineProperty(exports, \"BREAK\", {\n  enumerable: true,\n  get: function get() {\n    return _visitor.BREAK;\n  }\n});\nObject.defineProperty(exports, \"Location\", {\n  enumerable: true,\n  get: function get() {\n    return _ast.Location;\n  }\n});\nObject.defineProperty(exports, \"Token\", {\n  enumerable: true,\n  get: function get() {\n    return _ast.Token;\n  }\n});\nObject.defineProperty(exports, \"isDefinitionNode\", {\n  enumerable: true,\n  get: function get() {\n    return _predicates.isDefinitionNode;\n  }\n});\nObject.defineProperty(exports, \"isExecutableDefinitionNode\", {\n  enumerable: true,\n  get: function get() {\n    return _predicates.isExecutableDefinitionNode;\n  }\n});\nObject.defineProperty(exports, \"isSelectionNode\", {\n  enumerable: true,\n  get: function get() {\n    return _predicates.isSelectionNode;\n  }\n});\nObject.defineProperty(exports, \"isValueNode\", {\n  enumerable: true,\n  get: function get() {\n    return _predicates.isValueNode;\n  }\n});\nObject.defineProperty(exports, \"isTypeNode\", {\n  enumerable: true,\n  get: function get() {\n    return _predicates.isTypeNode;\n  }\n});\nObject.defineProperty(exports, \"isTypeSystemDefinitionNode\", {\n  enumerable: true,\n  get: function get() {\n    return _predicates.isTypeSystemDefinitionNode;\n  }\n});\nObject.defineProperty(exports, \"isTypeDefinitionNode\", {\n  enumerable: true,\n  get: function get() {\n    return _predicates.isTypeDefinitionNode;\n  }\n});\nObject.defineProperty(exports, \"isTypeSystemExtensionNode\", {\n  enumerable: true,\n  get: function get() {\n    return _predicates.isTypeSystemExtensionNode;\n  }\n});\nObject.defineProperty(exports, \"isTypeExtensionNode\", {\n  enumerable: true,\n  get: function get() {\n    return _predicates.isTypeExtensionNode;\n  }\n});\nObject.defineProperty(exports, \"DirectiveLocation\", {\n  enumerable: true,\n  get: function get() {\n    return _directiveLocation.DirectiveLocation;\n  }\n});\n\nvar _source = require(\"./source.js\");\n\nvar _location = require(\"./location.js\");\n\nvar _printLocation = require(\"./printLocation.js\");\n\nvar _kinds = require(\"./kinds.js\");\n\nvar _tokenKind = require(\"./tokenKind.js\");\n\nvar _lexer = require(\"./lexer.js\");\n\nvar _parser = require(\"./parser.js\");\n\nvar _printer = require(\"./printer.js\");\n\nvar _visitor = require(\"./visitor.js\");\n\nvar _ast = require(\"./ast.js\");\n\nvar _predicates = require(\"./predicates.js\");\n\nvar _directiveLocation = require(\"./directiveLocation.js\");\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Kind = void 0;\n\n/**\n * The set of allowed kind values for AST nodes.\n */\nvar Kind = Object.freeze({\n  // Name\n  NAME: 'Name',\n  // Document\n  DOCUMENT: 'Document',\n  OPERATION_DEFINITION: 'OperationDefinition',\n  VARIABLE_DEFINITION: 'VariableDefinition',\n  SELECTION_SET: 'SelectionSet',\n  FIELD: 'Field',\n  ARGUMENT: 'Argument',\n  // Fragments\n  FRAGMENT_SPREAD: 'FragmentSpread',\n  INLINE_FRAGMENT: 'InlineFragment',\n  FRAGMENT_DEFINITION: 'FragmentDefinition',\n  // Values\n  VARIABLE: 'Variable',\n  INT: 'IntValue',\n  FLOAT: 'FloatValue',\n  STRING: 'StringValue',\n  BOOLEAN: 'BooleanValue',\n  NULL: 'NullValue',\n  ENUM: 'EnumValue',\n  LIST: 'ListValue',\n  OBJECT: 'ObjectValue',\n  OBJECT_FIELD: 'ObjectField',\n  // Directives\n  DIRECTIVE: 'Directive',\n  // Types\n  NAMED_TYPE: 'NamedType',\n  LIST_TYPE: 'ListType',\n  NON_NULL_TYPE: 'NonNullType',\n  // Type System Definitions\n  SCHEMA_DEFINITION: 'SchemaDefinition',\n  OPERATION_TYPE_DEFINITION: 'OperationTypeDefinition',\n  // Type Definitions\n  SCALAR_TYPE_DEFINITION: 'ScalarTypeDefinition',\n  OBJECT_TYPE_DEFINITION: 'ObjectTypeDefinition',\n  FIELD_DEFINITION: 'FieldDefinition',\n  INPUT_VALUE_DEFINITION: 'InputValueDefinition',\n  INTERFACE_TYPE_DEFINITION: 'InterfaceTypeDefinition',\n  UNION_TYPE_DEFINITION: 'UnionTypeDefinition',\n  ENUM_TYPE_DEFINITION: 'EnumTypeDefinition',\n  ENUM_VALUE_DEFINITION: 'EnumValueDefinition',\n  INPUT_OBJECT_TYPE_DEFINITION: 'InputObjectTypeDefinition',\n  // Directive Definitions\n  DIRECTIVE_DEFINITION: 'DirectiveDefinition',\n  // Type System Extensions\n  SCHEMA_EXTENSION: 'SchemaExtension',\n  // Type Extensions\n  SCALAR_TYPE_EXTENSION: 'ScalarTypeExtension',\n  OBJECT_TYPE_EXTENSION: 'ObjectTypeExtension',\n  INTERFACE_TYPE_EXTENSION: 'InterfaceTypeExtension',\n  UNION_TYPE_EXTENSION: 'UnionTypeExtension',\n  ENUM_TYPE_EXTENSION: 'EnumTypeExtension',\n  INPUT_OBJECT_TYPE_EXTENSION: 'InputObjectTypeExtension'\n});\n/**\n * The enum type representing the possible kind values of AST nodes.\n */\n\nexports.Kind = Kind;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isPunctuatorTokenKind = isPunctuatorTokenKind;\nexports.Lexer = void 0;\n\nvar _syntaxError = require(\"../error/syntaxError.js\");\n\nvar _ast = require(\"./ast.js\");\n\nvar _tokenKind = require(\"./tokenKind.js\");\n\nvar _blockString = require(\"./blockString.js\");\n\n/**\n * Given a Source object, creates a Lexer for that source.\n * A Lexer is a stateful stream generator in that every time\n * it is advanced, it returns the next token in the Source. Assuming the\n * source lexes, the final Token emitted by the lexer will be of kind\n * EOF, after which the lexer will repeatedly return the same EOF token\n * whenever called.\n */\nvar Lexer = /*#__PURE__*/function () {\n  /**\n   * The previously focused non-ignored token.\n   */\n\n  /**\n   * The currently focused non-ignored token.\n   */\n\n  /**\n   * The (1-indexed) line containing the current token.\n   */\n\n  /**\n   * The character offset at which the current line begins.\n   */\n  function Lexer(source) {\n    var startOfFileToken = new _ast.Token(_tokenKind.TokenKind.SOF, 0, 0, 0, 0, null);\n    this.source = source;\n    this.lastToken = startOfFileToken;\n    this.token = startOfFileToken;\n    this.line = 1;\n    this.lineStart = 0;\n  }\n  /**\n   * Advances the token stream to the next non-ignored token.\n   */\n\n\n  var _proto = Lexer.prototype;\n\n  _proto.advance = function advance() {\n    this.lastToken = this.token;\n    var token = this.token = this.lookahead();\n    return token;\n  }\n  /**\n   * Looks ahead and returns the next non-ignored token, but does not change\n   * the state of Lexer.\n   */\n  ;\n\n  _proto.lookahead = function lookahead() {\n    var token = this.token;\n\n    if (token.kind !== _tokenKind.TokenKind.EOF) {\n      do {\n        var _token$next;\n\n        // Note: next is only mutable during parsing, so we cast to allow this.\n        token = (_token$next = token.next) !== null && _token$next !== void 0 ? _token$next : token.next = readToken(this, token);\n      } while (token.kind === _tokenKind.TokenKind.COMMENT);\n    }\n\n    return token;\n  };\n\n  return Lexer;\n}();\n/**\n * @internal\n */\n\n\nexports.Lexer = Lexer;\n\nfunction isPunctuatorTokenKind(kind) {\n  return kind === _tokenKind.TokenKind.BANG || kind === _tokenKind.TokenKind.DOLLAR || kind === _tokenKind.TokenKind.AMP || kind === _tokenKind.TokenKind.PAREN_L || kind === _tokenKind.TokenKind.PAREN_R || kind === _tokenKind.TokenKind.SPREAD || kind === _tokenKind.TokenKind.COLON || kind === _tokenKind.TokenKind.EQUALS || kind === _tokenKind.TokenKind.AT || kind === _tokenKind.TokenKind.BRACKET_L || kind === _tokenKind.TokenKind.BRACKET_R || kind === _tokenKind.TokenKind.BRACE_L || kind === _tokenKind.TokenKind.PIPE || kind === _tokenKind.TokenKind.BRACE_R;\n}\n\nfunction printCharCode(code) {\n  return (// NaN/undefined represents access beyond the end of the file.\n    isNaN(code) ? _tokenKind.TokenKind.EOF : // Trust JSON for ASCII.\n    code < 0x007f ? JSON.stringify(String.fromCharCode(code)) : // Otherwise print the escaped form.\n    \"\\\"\\\\u\".concat(('00' + code.toString(16).toUpperCase()).slice(-4), \"\\\"\")\n  );\n}\n/**\n * Gets the next token from the source starting at the given position.\n *\n * This skips over whitespace until it finds the next lexable token, then lexes\n * punctuators immediately or calls the appropriate helper function for more\n * complicated tokens.\n */\n\n\nfunction readToken(lexer, prev) {\n  var source = lexer.source;\n  var body = source.body;\n  var bodyLength = body.length;\n  var pos = prev.end;\n\n  while (pos < bodyLength) {\n    var code = body.charCodeAt(pos);\n    var _line = lexer.line;\n\n    var _col = 1 + pos - lexer.lineStart; // SourceCharacter\n\n\n    switch (code) {\n      case 0xfeff: // <BOM>\n\n      case 9: //   \\t\n\n      case 32: //  <space>\n\n      case 44:\n        //  ,\n        ++pos;\n        continue;\n\n      case 10:\n        //  \\n\n        ++pos;\n        ++lexer.line;\n        lexer.lineStart = pos;\n        continue;\n\n      case 13:\n        //  \\r\n        if (body.charCodeAt(pos + 1) === 10) {\n          pos += 2;\n        } else {\n          ++pos;\n        }\n\n        ++lexer.line;\n        lexer.lineStart = pos;\n        continue;\n\n      case 33:\n        //  !\n        return new _ast.Token(_tokenKind.TokenKind.BANG, pos, pos + 1, _line, _col, prev);\n\n      case 35:\n        //  #\n        return readComment(source, pos, _line, _col, prev);\n\n      case 36:\n        //  $\n        return new _ast.Token(_tokenKind.TokenKind.DOLLAR, pos, pos + 1, _line, _col, prev);\n\n      case 38:\n        //  &\n        return new _ast.Token(_tokenKind.TokenKind.AMP, pos, pos + 1, _line, _col, prev);\n\n      case 40:\n        //  (\n        return new _ast.Token(_tokenKind.TokenKind.PAREN_L, pos, pos + 1, _line, _col, prev);\n\n      case 41:\n        //  )\n        return new _ast.Token(_tokenKind.TokenKind.PAREN_R, pos, pos + 1, _line, _col, prev);\n\n      case 46:\n        //  .\n        if (body.charCodeAt(pos + 1) === 46 && body.charCodeAt(pos + 2) === 46) {\n          return new _ast.Token(_tokenKind.TokenKind.SPREAD, pos, pos + 3, _line, _col, prev);\n        }\n\n        break;\n\n      case 58:\n        //  :\n        return new _ast.Token(_tokenKind.TokenKind.COLON, pos, pos + 1, _line, _col, prev);\n\n      case 61:\n        //  =\n        return new _ast.Token(_tokenKind.TokenKind.EQUALS, pos, pos + 1, _line, _col, prev);\n\n      case 64:\n        //  @\n        return new _ast.Token(_tokenKind.TokenKind.AT, pos, pos + 1, _line, _col, prev);\n\n      case 91:\n        //  [\n        return new _ast.Token(_tokenKind.TokenKind.BRACKET_L, pos, pos + 1, _line, _col, prev);\n\n      case 93:\n        //  ]\n        return new _ast.Token(_tokenKind.TokenKind.BRACKET_R, pos, pos + 1, _line, _col, prev);\n\n      case 123:\n        // {\n        return new _ast.Token(_tokenKind.TokenKind.BRACE_L, pos, pos + 1, _line, _col, prev);\n\n      case 124:\n        // |\n        return new _ast.Token(_tokenKind.TokenKind.PIPE, pos, pos + 1, _line, _col, prev);\n\n      case 125:\n        // }\n        return new _ast.Token(_tokenKind.TokenKind.BRACE_R, pos, pos + 1, _line, _col, prev);\n\n      case 34:\n        //  \"\n        if (body.charCodeAt(pos + 1) === 34 && body.charCodeAt(pos + 2) === 34) {\n          return readBlockString(source, pos, _line, _col, prev, lexer);\n        }\n\n        return readString(source, pos, _line, _col, prev);\n\n      case 45: //  -\n\n      case 48: //  0\n\n      case 49: //  1\n\n      case 50: //  2\n\n      case 51: //  3\n\n      case 52: //  4\n\n      case 53: //  5\n\n      case 54: //  6\n\n      case 55: //  7\n\n      case 56: //  8\n\n      case 57:\n        //  9\n        return readNumber(source, pos, code, _line, _col, prev);\n\n      case 65: //  A\n\n      case 66: //  B\n\n      case 67: //  C\n\n      case 68: //  D\n\n      case 69: //  E\n\n      case 70: //  F\n\n      case 71: //  G\n\n      case 72: //  H\n\n      case 73: //  I\n\n      case 74: //  J\n\n      case 75: //  K\n\n      case 76: //  L\n\n      case 77: //  M\n\n      case 78: //  N\n\n      case 79: //  O\n\n      case 80: //  P\n\n      case 81: //  Q\n\n      case 82: //  R\n\n      case 83: //  S\n\n      case 84: //  T\n\n      case 85: //  U\n\n      case 86: //  V\n\n      case 87: //  W\n\n      case 88: //  X\n\n      case 89: //  Y\n\n      case 90: //  Z\n\n      case 95: //  _\n\n      case 97: //  a\n\n      case 98: //  b\n\n      case 99: //  c\n\n      case 100: // d\n\n      case 101: // e\n\n      case 102: // f\n\n      case 103: // g\n\n      case 104: // h\n\n      case 105: // i\n\n      case 106: // j\n\n      case 107: // k\n\n      case 108: // l\n\n      case 109: // m\n\n      case 110: // n\n\n      case 111: // o\n\n      case 112: // p\n\n      case 113: // q\n\n      case 114: // r\n\n      case 115: // s\n\n      case 116: // t\n\n      case 117: // u\n\n      case 118: // v\n\n      case 119: // w\n\n      case 120: // x\n\n      case 121: // y\n\n      case 122:\n        // z\n        return readName(source, pos, _line, _col, prev);\n    }\n\n    throw (0, _syntaxError.syntaxError)(source, pos, unexpectedCharacterMessage(code));\n  }\n\n  var line = lexer.line;\n  var col = 1 + pos - lexer.lineStart;\n  return new _ast.Token(_tokenKind.TokenKind.EOF, bodyLength, bodyLength, line, col, prev);\n}\n/**\n * Report a message that an unexpected character was encountered.\n */\n\n\nfunction unexpectedCharacterMessage(code) {\n  if (code < 0x0020 && code !== 0x0009 && code !== 0x000a && code !== 0x000d) {\n    return \"Cannot contain the invalid character \".concat(printCharCode(code), \".\");\n  }\n\n  if (code === 39) {\n    // '\n    return 'Unexpected single quote character (\\'), did you mean to use a double quote (\")?';\n  }\n\n  return \"Cannot parse the unexpected character \".concat(printCharCode(code), \".\");\n}\n/**\n * Reads a comment token from the source file.\n *\n * #[\\u0009\\u0020-\\uFFFF]*\n */\n\n\nfunction readComment(source, start, line, col, prev) {\n  var body = source.body;\n  var code;\n  var position = start;\n\n  do {\n    code = body.charCodeAt(++position);\n  } while (!isNaN(code) && ( // SourceCharacter but not LineTerminator\n  code > 0x001f || code === 0x0009));\n\n  return new _ast.Token(_tokenKind.TokenKind.COMMENT, start, position, line, col, prev, body.slice(start + 1, position));\n}\n/**\n * Reads a number token from the source file, either a float\n * or an int depending on whether a decimal point appears.\n *\n * Int:   -?(0|[1-9][0-9]*)\n * Float: -?(0|[1-9][0-9]*)(\\.[0-9]+)?((E|e)(+|-)?[0-9]+)?\n */\n\n\nfunction readNumber(source, start, firstCode, line, col, prev) {\n  var body = source.body;\n  var code = firstCode;\n  var position = start;\n  var isFloat = false;\n\n  if (code === 45) {\n    // -\n    code = body.charCodeAt(++position);\n  }\n\n  if (code === 48) {\n    // 0\n    code = body.charCodeAt(++position);\n\n    if (code >= 48 && code <= 57) {\n      throw (0, _syntaxError.syntaxError)(source, position, \"Invalid number, unexpected digit after 0: \".concat(printCharCode(code), \".\"));\n    }\n  } else {\n    position = readDigits(source, position, code);\n    code = body.charCodeAt(position);\n  }\n\n  if (code === 46) {\n    // .\n    isFloat = true;\n    code = body.charCodeAt(++position);\n    position = readDigits(source, position, code);\n    code = body.charCodeAt(position);\n  }\n\n  if (code === 69 || code === 101) {\n    // E e\n    isFloat = true;\n    code = body.charCodeAt(++position);\n\n    if (code === 43 || code === 45) {\n      // + -\n      code = body.charCodeAt(++position);\n    }\n\n    position = readDigits(source, position, code);\n    code = body.charCodeAt(position);\n  } // Numbers cannot be followed by . or NameStart\n\n\n  if (code === 46 || isNameStart(code)) {\n    throw (0, _syntaxError.syntaxError)(source, position, \"Invalid number, expected digit but got: \".concat(printCharCode(code), \".\"));\n  }\n\n  return new _ast.Token(isFloat ? _tokenKind.TokenKind.FLOAT : _tokenKind.TokenKind.INT, start, position, line, col, prev, body.slice(start, position));\n}\n/**\n * Returns the new position in the source after reading digits.\n */\n\n\nfunction readDigits(source, start, firstCode) {\n  var body = source.body;\n  var position = start;\n  var code = firstCode;\n\n  if (code >= 48 && code <= 57) {\n    // 0 - 9\n    do {\n      code = body.charCodeAt(++position);\n    } while (code >= 48 && code <= 57); // 0 - 9\n\n\n    return position;\n  }\n\n  throw (0, _syntaxError.syntaxError)(source, position, \"Invalid number, expected digit but got: \".concat(printCharCode(code), \".\"));\n}\n/**\n * Reads a string token from the source file.\n *\n * \"([^\"\\\\\\u000A\\u000D]|(\\\\(u[0-9a-fA-F]{4}|[\"\\\\/bfnrt])))*\"\n */\n\n\nfunction readString(source, start, line, col, prev) {\n  var body = source.body;\n  var position = start + 1;\n  var chunkStart = position;\n  var code = 0;\n  var value = '';\n\n  while (position < body.length && !isNaN(code = body.charCodeAt(position)) && // not LineTerminator\n  code !== 0x000a && code !== 0x000d) {\n    // Closing Quote (\")\n    if (code === 34) {\n      value += body.slice(chunkStart, position);\n      return new _ast.Token(_tokenKind.TokenKind.STRING, start, position + 1, line, col, prev, value);\n    } // SourceCharacter\n\n\n    if (code < 0x0020 && code !== 0x0009) {\n      throw (0, _syntaxError.syntaxError)(source, position, \"Invalid character within String: \".concat(printCharCode(code), \".\"));\n    }\n\n    ++position;\n\n    if (code === 92) {\n      // \\\n      value += body.slice(chunkStart, position - 1);\n      code = body.charCodeAt(position);\n\n      switch (code) {\n        case 34:\n          value += '\"';\n          break;\n\n        case 47:\n          value += '/';\n          break;\n\n        case 92:\n          value += '\\\\';\n          break;\n\n        case 98:\n          value += '\\b';\n          break;\n\n        case 102:\n          value += '\\f';\n          break;\n\n        case 110:\n          value += '\\n';\n          break;\n\n        case 114:\n          value += '\\r';\n          break;\n\n        case 116:\n          value += '\\t';\n          break;\n\n        case 117:\n          {\n            // uXXXX\n            var charCode = uniCharCode(body.charCodeAt(position + 1), body.charCodeAt(position + 2), body.charCodeAt(position + 3), body.charCodeAt(position + 4));\n\n            if (charCode < 0) {\n              var invalidSequence = body.slice(position + 1, position + 5);\n              throw (0, _syntaxError.syntaxError)(source, position, \"Invalid character escape sequence: \\\\u\".concat(invalidSequence, \".\"));\n            }\n\n            value += String.fromCharCode(charCode);\n            position += 4;\n            break;\n          }\n\n        default:\n          throw (0, _syntaxError.syntaxError)(source, position, \"Invalid character escape sequence: \\\\\".concat(String.fromCharCode(code), \".\"));\n      }\n\n      ++position;\n      chunkStart = position;\n    }\n  }\n\n  throw (0, _syntaxError.syntaxError)(source, position, 'Unterminated string.');\n}\n/**\n * Reads a block string token from the source file.\n *\n * \"\"\"(\"?\"?(\\\\\"\"\"|\\\\(?!=\"\"\")|[^\"\\\\]))*\"\"\"\n */\n\n\nfunction readBlockString(source, start, line, col, prev, lexer) {\n  var body = source.body;\n  var position = start + 3;\n  var chunkStart = position;\n  var code = 0;\n  var rawValue = '';\n\n  while (position < body.length && !isNaN(code = body.charCodeAt(position))) {\n    // Closing Triple-Quote (\"\"\")\n    if (code === 34 && body.charCodeAt(position + 1) === 34 && body.charCodeAt(position + 2) === 34) {\n      rawValue += body.slice(chunkStart, position);\n      return new _ast.Token(_tokenKind.TokenKind.BLOCK_STRING, start, position + 3, line, col, prev, (0, _blockString.dedentBlockStringValue)(rawValue));\n    } // SourceCharacter\n\n\n    if (code < 0x0020 && code !== 0x0009 && code !== 0x000a && code !== 0x000d) {\n      throw (0, _syntaxError.syntaxError)(source, position, \"Invalid character within String: \".concat(printCharCode(code), \".\"));\n    }\n\n    if (code === 10) {\n      // new line\n      ++position;\n      ++lexer.line;\n      lexer.lineStart = position;\n    } else if (code === 13) {\n      // carriage return\n      if (body.charCodeAt(position + 1) === 10) {\n        position += 2;\n      } else {\n        ++position;\n      }\n\n      ++lexer.line;\n      lexer.lineStart = position;\n    } else if ( // Escape Triple-Quote (\\\"\"\")\n    code === 92 && body.charCodeAt(position + 1) === 34 && body.charCodeAt(position + 2) === 34 && body.charCodeAt(position + 3) === 34) {\n      rawValue += body.slice(chunkStart, position) + '\"\"\"';\n      position += 4;\n      chunkStart = position;\n    } else {\n      ++position;\n    }\n  }\n\n  throw (0, _syntaxError.syntaxError)(source, position, 'Unterminated string.');\n}\n/**\n * Converts four hexadecimal chars to the integer that the\n * string represents. For example, uniCharCode('0','0','0','f')\n * will return 15, and uniCharCode('0','0','f','f') returns 255.\n *\n * Returns a negative number on error, if a char was invalid.\n *\n * This is implemented by noting that char2hex() returns -1 on error,\n * which means the result of ORing the char2hex() will also be negative.\n */\n\n\nfunction uniCharCode(a, b, c, d) {\n  return char2hex(a) << 12 | char2hex(b) << 8 | char2hex(c) << 4 | char2hex(d);\n}\n/**\n * Converts a hex character to its integer value.\n * '0' becomes 0, '9' becomes 9\n * 'A' becomes 10, 'F' becomes 15\n * 'a' becomes 10, 'f' becomes 15\n *\n * Returns -1 on error.\n */\n\n\nfunction char2hex(a) {\n  return a >= 48 && a <= 57 ? a - 48 // 0-9\n  : a >= 65 && a <= 70 ? a - 55 // A-F\n  : a >= 97 && a <= 102 ? a - 87 // a-f\n  : -1;\n}\n/**\n * Reads an alphanumeric + underscore name from the source.\n *\n * [_A-Za-z][_0-9A-Za-z]*\n */\n\n\nfunction readName(source, start, line, col, prev) {\n  var body = source.body;\n  var bodyLength = body.length;\n  var position = start + 1;\n  var code = 0;\n\n  while (position !== bodyLength && !isNaN(code = body.charCodeAt(position)) && (code === 95 || // _\n  code >= 48 && code <= 57 || // 0-9\n  code >= 65 && code <= 90 || // A-Z\n  code >= 97 && code <= 122) // a-z\n  ) {\n    ++position;\n  }\n\n  return new _ast.Token(_tokenKind.TokenKind.NAME, start, position, line, col, prev, body.slice(start, position));\n} // _ A-Z a-z\n\n\nfunction isNameStart(code) {\n  return code === 95 || code >= 65 && code <= 90 || code >= 97 && code <= 122;\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getLocation = getLocation;\n\n/**\n * Represents a location in a Source.\n */\n\n/**\n * Takes a Source and a UTF-8 character offset, and returns the corresponding\n * line and column as a SourceLocation.\n */\nfunction getLocation(source, position) {\n  var lineRegexp = /\\r\\n|[\\n\\r]/g;\n  var line = 1;\n  var column = position + 1;\n  var match;\n\n  while ((match = lineRegexp.exec(source.body)) && match.index < position) {\n    line += 1;\n    column = position + 1 - (match.index + match[0].length);\n  }\n\n  return {\n    line: line,\n    column: column\n  };\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.parse = parse;\nexports.parseValue = parseValue;\nexports.parseType = parseType;\nexports.Parser = void 0;\n\nvar _syntaxError = require(\"../error/syntaxError.js\");\n\nvar _kinds = require(\"./kinds.js\");\n\nvar _ast = require(\"./ast.js\");\n\nvar _tokenKind = require(\"./tokenKind.js\");\n\nvar _source = require(\"./source.js\");\n\nvar _directiveLocation = require(\"./directiveLocation.js\");\n\nvar _lexer = require(\"./lexer.js\");\n\n/**\n * Given a GraphQL source, parses it into a Document.\n * Throws GraphQLError if a syntax error is encountered.\n */\nfunction parse(source, options) {\n  var parser = new Parser(source, options);\n  return parser.parseDocument();\n}\n/**\n * Given a string containing a GraphQL value (ex. `[42]`), parse the AST for\n * that value.\n * Throws GraphQLError if a syntax error is encountered.\n *\n * This is useful within tools that operate upon GraphQL Values directly and\n * in isolation of complete GraphQL documents.\n *\n * Consider providing the results to the utility function: valueFromAST().\n */\n\n\nfunction parseValue(source, options) {\n  var parser = new Parser(source, options);\n  parser.expectToken(_tokenKind.TokenKind.SOF);\n  var value = parser.parseValueLiteral(false);\n  parser.expectToken(_tokenKind.TokenKind.EOF);\n  return value;\n}\n/**\n * Given a string containing a GraphQL Type (ex. `[Int!]`), parse the AST for\n * that type.\n * Throws GraphQLError if a syntax error is encountered.\n *\n * This is useful within tools that operate upon GraphQL Types directly and\n * in isolation of complete GraphQL documents.\n *\n * Consider providing the results to the utility function: typeFromAST().\n */\n\n\nfunction parseType(source, options) {\n  var parser = new Parser(source, options);\n  parser.expectToken(_tokenKind.TokenKind.SOF);\n  var type = parser.parseTypeReference();\n  parser.expectToken(_tokenKind.TokenKind.EOF);\n  return type;\n}\n/**\n * This class is exported only to assist people in implementing their own parsers\n * without duplicating too much code and should be used only as last resort for cases\n * such as experimental syntax or if certain features could not be contributed upstream.\n *\n * It is still part of the internal API and is versioned, so any changes to it are never\n * considered breaking changes. If you still need to support multiple versions of the\n * library, please use the `versionInfo` variable for version detection.\n *\n * @internal\n */\n\n\nvar Parser = /*#__PURE__*/function () {\n  function Parser(source, options) {\n    var sourceObj = (0, _source.isSource)(source) ? source : new _source.Source(source);\n    this._lexer = new _lexer.Lexer(sourceObj);\n    this._options = options;\n  }\n  /**\n   * Converts a name lex token into a name parse node.\n   */\n\n\n  var _proto = Parser.prototype;\n\n  _proto.parseName = function parseName() {\n    var token = this.expectToken(_tokenKind.TokenKind.NAME);\n    return {\n      kind: _kinds.Kind.NAME,\n      value: token.value,\n      loc: this.loc(token)\n    };\n  } // Implements the parsing rules in the Document section.\n\n  /**\n   * Document : Definition+\n   */\n  ;\n\n  _proto.parseDocument = function parseDocument() {\n    var start = this._lexer.token;\n    return {\n      kind: _kinds.Kind.DOCUMENT,\n      definitions: this.many(_tokenKind.TokenKind.SOF, this.parseDefinition, _tokenKind.TokenKind.EOF),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * Definition :\n   *   - ExecutableDefinition\n   *   - TypeSystemDefinition\n   *   - TypeSystemExtension\n   *\n   * ExecutableDefinition :\n   *   - OperationDefinition\n   *   - FragmentDefinition\n   */\n  ;\n\n  _proto.parseDefinition = function parseDefinition() {\n    if (this.peek(_tokenKind.TokenKind.NAME)) {\n      switch (this._lexer.token.value) {\n        case 'query':\n        case 'mutation':\n        case 'subscription':\n          return this.parseOperationDefinition();\n\n        case 'fragment':\n          return this.parseFragmentDefinition();\n\n        case 'schema':\n        case 'scalar':\n        case 'type':\n        case 'interface':\n        case 'union':\n        case 'enum':\n        case 'input':\n        case 'directive':\n          return this.parseTypeSystemDefinition();\n\n        case 'extend':\n          return this.parseTypeSystemExtension();\n      }\n    } else if (this.peek(_tokenKind.TokenKind.BRACE_L)) {\n      return this.parseOperationDefinition();\n    } else if (this.peekDescription()) {\n      return this.parseTypeSystemDefinition();\n    }\n\n    throw this.unexpected();\n  } // Implements the parsing rules in the Operations section.\n\n  /**\n   * OperationDefinition :\n   *  - SelectionSet\n   *  - OperationType Name? VariableDefinitions? Directives? SelectionSet\n   */\n  ;\n\n  _proto.parseOperationDefinition = function parseOperationDefinition() {\n    var start = this._lexer.token;\n\n    if (this.peek(_tokenKind.TokenKind.BRACE_L)) {\n      return {\n        kind: _kinds.Kind.OPERATION_DEFINITION,\n        operation: 'query',\n        name: undefined,\n        variableDefinitions: [],\n        directives: [],\n        selectionSet: this.parseSelectionSet(),\n        loc: this.loc(start)\n      };\n    }\n\n    var operation = this.parseOperationType();\n    var name;\n\n    if (this.peek(_tokenKind.TokenKind.NAME)) {\n      name = this.parseName();\n    }\n\n    return {\n      kind: _kinds.Kind.OPERATION_DEFINITION,\n      operation: operation,\n      name: name,\n      variableDefinitions: this.parseVariableDefinitions(),\n      directives: this.parseDirectives(false),\n      selectionSet: this.parseSelectionSet(),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * OperationType : one of query mutation subscription\n   */\n  ;\n\n  _proto.parseOperationType = function parseOperationType() {\n    var operationToken = this.expectToken(_tokenKind.TokenKind.NAME);\n\n    switch (operationToken.value) {\n      case 'query':\n        return 'query';\n\n      case 'mutation':\n        return 'mutation';\n\n      case 'subscription':\n        return 'subscription';\n    }\n\n    throw this.unexpected(operationToken);\n  }\n  /**\n   * VariableDefinitions : ( VariableDefinition+ )\n   */\n  ;\n\n  _proto.parseVariableDefinitions = function parseVariableDefinitions() {\n    return this.optionalMany(_tokenKind.TokenKind.PAREN_L, this.parseVariableDefinition, _tokenKind.TokenKind.PAREN_R);\n  }\n  /**\n   * VariableDefinition : Variable : Type DefaultValue? Directives[Const]?\n   */\n  ;\n\n  _proto.parseVariableDefinition = function parseVariableDefinition() {\n    var start = this._lexer.token;\n    return {\n      kind: _kinds.Kind.VARIABLE_DEFINITION,\n      variable: this.parseVariable(),\n      type: (this.expectToken(_tokenKind.TokenKind.COLON), this.parseTypeReference()),\n      defaultValue: this.expectOptionalToken(_tokenKind.TokenKind.EQUALS) ? this.parseValueLiteral(true) : undefined,\n      directives: this.parseDirectives(true),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * Variable : $ Name\n   */\n  ;\n\n  _proto.parseVariable = function parseVariable() {\n    var start = this._lexer.token;\n    this.expectToken(_tokenKind.TokenKind.DOLLAR);\n    return {\n      kind: _kinds.Kind.VARIABLE,\n      name: this.parseName(),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * SelectionSet : { Selection+ }\n   */\n  ;\n\n  _proto.parseSelectionSet = function parseSelectionSet() {\n    var start = this._lexer.token;\n    return {\n      kind: _kinds.Kind.SELECTION_SET,\n      selections: this.many(_tokenKind.TokenKind.BRACE_L, this.parseSelection, _tokenKind.TokenKind.BRACE_R),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * Selection :\n   *   - Field\n   *   - FragmentSpread\n   *   - InlineFragment\n   */\n  ;\n\n  _proto.parseSelection = function parseSelection() {\n    return this.peek(_tokenKind.TokenKind.SPREAD) ? this.parseFragment() : this.parseField();\n  }\n  /**\n   * Field : Alias? Name Arguments? Directives? SelectionSet?\n   *\n   * Alias : Name :\n   */\n  ;\n\n  _proto.parseField = function parseField() {\n    var start = this._lexer.token;\n    var nameOrAlias = this.parseName();\n    var alias;\n    var name;\n\n    if (this.expectOptionalToken(_tokenKind.TokenKind.COLON)) {\n      alias = nameOrAlias;\n      name = this.parseName();\n    } else {\n      name = nameOrAlias;\n    }\n\n    return {\n      kind: _kinds.Kind.FIELD,\n      alias: alias,\n      name: name,\n      arguments: this.parseArguments(false),\n      directives: this.parseDirectives(false),\n      selectionSet: this.peek(_tokenKind.TokenKind.BRACE_L) ? this.parseSelectionSet() : undefined,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * Arguments[Const] : ( Argument[?Const]+ )\n   */\n  ;\n\n  _proto.parseArguments = function parseArguments(isConst) {\n    var item = isConst ? this.parseConstArgument : this.parseArgument;\n    return this.optionalMany(_tokenKind.TokenKind.PAREN_L, item, _tokenKind.TokenKind.PAREN_R);\n  }\n  /**\n   * Argument[Const] : Name : Value[?Const]\n   */\n  ;\n\n  _proto.parseArgument = function parseArgument() {\n    var start = this._lexer.token;\n    var name = this.parseName();\n    this.expectToken(_tokenKind.TokenKind.COLON);\n    return {\n      kind: _kinds.Kind.ARGUMENT,\n      name: name,\n      value: this.parseValueLiteral(false),\n      loc: this.loc(start)\n    };\n  };\n\n  _proto.parseConstArgument = function parseConstArgument() {\n    var start = this._lexer.token;\n    return {\n      kind: _kinds.Kind.ARGUMENT,\n      name: this.parseName(),\n      value: (this.expectToken(_tokenKind.TokenKind.COLON), this.parseValueLiteral(true)),\n      loc: this.loc(start)\n    };\n  } // Implements the parsing rules in the Fragments section.\n\n  /**\n   * Corresponds to both FragmentSpread and InlineFragment in the spec.\n   *\n   * FragmentSpread : ... FragmentName Directives?\n   *\n   * InlineFragment : ... TypeCondition? Directives? SelectionSet\n   */\n  ;\n\n  _proto.parseFragment = function parseFragment() {\n    var start = this._lexer.token;\n    this.expectToken(_tokenKind.TokenKind.SPREAD);\n    var hasTypeCondition = this.expectOptionalKeyword('on');\n\n    if (!hasTypeCondition && this.peek(_tokenKind.TokenKind.NAME)) {\n      return {\n        kind: _kinds.Kind.FRAGMENT_SPREAD,\n        name: this.parseFragmentName(),\n        directives: this.parseDirectives(false),\n        loc: this.loc(start)\n      };\n    }\n\n    return {\n      kind: _kinds.Kind.INLINE_FRAGMENT,\n      typeCondition: hasTypeCondition ? this.parseNamedType() : undefined,\n      directives: this.parseDirectives(false),\n      selectionSet: this.parseSelectionSet(),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * FragmentDefinition :\n   *   - fragment FragmentName on TypeCondition Directives? SelectionSet\n   *\n   * TypeCondition : NamedType\n   */\n  ;\n\n  _proto.parseFragmentDefinition = function parseFragmentDefinition() {\n    var _this$_options;\n\n    var start = this._lexer.token;\n    this.expectKeyword('fragment'); // Experimental support for defining variables within fragments changes\n    // the grammar of FragmentDefinition:\n    //   - fragment FragmentName VariableDefinitions? on TypeCondition Directives? SelectionSet\n\n    if (((_this$_options = this._options) === null || _this$_options === void 0 ? void 0 : _this$_options.experimentalFragmentVariables) === true) {\n      return {\n        kind: _kinds.Kind.FRAGMENT_DEFINITION,\n        name: this.parseFragmentName(),\n        variableDefinitions: this.parseVariableDefinitions(),\n        typeCondition: (this.expectKeyword('on'), this.parseNamedType()),\n        directives: this.parseDirectives(false),\n        selectionSet: this.parseSelectionSet(),\n        loc: this.loc(start)\n      };\n    }\n\n    return {\n      kind: _kinds.Kind.FRAGMENT_DEFINITION,\n      name: this.parseFragmentName(),\n      typeCondition: (this.expectKeyword('on'), this.parseNamedType()),\n      directives: this.parseDirectives(false),\n      selectionSet: this.parseSelectionSet(),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * FragmentName : Name but not `on`\n   */\n  ;\n\n  _proto.parseFragmentName = function parseFragmentName() {\n    if (this._lexer.token.value === 'on') {\n      throw this.unexpected();\n    }\n\n    return this.parseName();\n  } // Implements the parsing rules in the Values section.\n\n  /**\n   * Value[Const] :\n   *   - [~Const] Variable\n   *   - IntValue\n   *   - FloatValue\n   *   - StringValue\n   *   - BooleanValue\n   *   - NullValue\n   *   - EnumValue\n   *   - ListValue[?Const]\n   *   - ObjectValue[?Const]\n   *\n   * BooleanValue : one of `true` `false`\n   *\n   * NullValue : `null`\n   *\n   * EnumValue : Name but not `true`, `false` or `null`\n   */\n  ;\n\n  _proto.parseValueLiteral = function parseValueLiteral(isConst) {\n    var token = this._lexer.token;\n\n    switch (token.kind) {\n      case _tokenKind.TokenKind.BRACKET_L:\n        return this.parseList(isConst);\n\n      case _tokenKind.TokenKind.BRACE_L:\n        return this.parseObject(isConst);\n\n      case _tokenKind.TokenKind.INT:\n        this._lexer.advance();\n\n        return {\n          kind: _kinds.Kind.INT,\n          value: token.value,\n          loc: this.loc(token)\n        };\n\n      case _tokenKind.TokenKind.FLOAT:\n        this._lexer.advance();\n\n        return {\n          kind: _kinds.Kind.FLOAT,\n          value: token.value,\n          loc: this.loc(token)\n        };\n\n      case _tokenKind.TokenKind.STRING:\n      case _tokenKind.TokenKind.BLOCK_STRING:\n        return this.parseStringLiteral();\n\n      case _tokenKind.TokenKind.NAME:\n        this._lexer.advance();\n\n        switch (token.value) {\n          case 'true':\n            return {\n              kind: _kinds.Kind.BOOLEAN,\n              value: true,\n              loc: this.loc(token)\n            };\n\n          case 'false':\n            return {\n              kind: _kinds.Kind.BOOLEAN,\n              value: false,\n              loc: this.loc(token)\n            };\n\n          case 'null':\n            return {\n              kind: _kinds.Kind.NULL,\n              loc: this.loc(token)\n            };\n\n          default:\n            return {\n              kind: _kinds.Kind.ENUM,\n              value: token.value,\n              loc: this.loc(token)\n            };\n        }\n\n      case _tokenKind.TokenKind.DOLLAR:\n        if (!isConst) {\n          return this.parseVariable();\n        }\n\n        break;\n    }\n\n    throw this.unexpected();\n  };\n\n  _proto.parseStringLiteral = function parseStringLiteral() {\n    var token = this._lexer.token;\n\n    this._lexer.advance();\n\n    return {\n      kind: _kinds.Kind.STRING,\n      value: token.value,\n      block: token.kind === _tokenKind.TokenKind.BLOCK_STRING,\n      loc: this.loc(token)\n    };\n  }\n  /**\n   * ListValue[Const] :\n   *   - [ ]\n   *   - [ Value[?Const]+ ]\n   */\n  ;\n\n  _proto.parseList = function parseList(isConst) {\n    var _this = this;\n\n    var start = this._lexer.token;\n\n    var item = function item() {\n      return _this.parseValueLiteral(isConst);\n    };\n\n    return {\n      kind: _kinds.Kind.LIST,\n      values: this.any(_tokenKind.TokenKind.BRACKET_L, item, _tokenKind.TokenKind.BRACKET_R),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ObjectValue[Const] :\n   *   - { }\n   *   - { ObjectField[?Const]+ }\n   */\n  ;\n\n  _proto.parseObject = function parseObject(isConst) {\n    var _this2 = this;\n\n    var start = this._lexer.token;\n\n    var item = function item() {\n      return _this2.parseObjectField(isConst);\n    };\n\n    return {\n      kind: _kinds.Kind.OBJECT,\n      fields: this.any(_tokenKind.TokenKind.BRACE_L, item, _tokenKind.TokenKind.BRACE_R),\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ObjectField[Const] : Name : Value[?Const]\n   */\n  ;\n\n  _proto.parseObjectField = function parseObjectField(isConst) {\n    var start = this._lexer.token;\n    var name = this.parseName();\n    this.expectToken(_tokenKind.TokenKind.COLON);\n    return {\n      kind: _kinds.Kind.OBJECT_FIELD,\n      name: name,\n      value: this.parseValueLiteral(isConst),\n      loc: this.loc(start)\n    };\n  } // Implements the parsing rules in the Directives section.\n\n  /**\n   * Directives[Const] : Directive[?Const]+\n   */\n  ;\n\n  _proto.parseDirectives = function parseDirectives(isConst) {\n    var directives = [];\n\n    while (this.peek(_tokenKind.TokenKind.AT)) {\n      directives.push(this.parseDirective(isConst));\n    }\n\n    return directives;\n  }\n  /**\n   * Directive[Const] : @ Name Arguments[?Const]?\n   */\n  ;\n\n  _proto.parseDirective = function parseDirective(isConst) {\n    var start = this._lexer.token;\n    this.expectToken(_tokenKind.TokenKind.AT);\n    return {\n      kind: _kinds.Kind.DIRECTIVE,\n      name: this.parseName(),\n      arguments: this.parseArguments(isConst),\n      loc: this.loc(start)\n    };\n  } // Implements the parsing rules in the Types section.\n\n  /**\n   * Type :\n   *   - NamedType\n   *   - ListType\n   *   - NonNullType\n   */\n  ;\n\n  _proto.parseTypeReference = function parseTypeReference() {\n    var start = this._lexer.token;\n    var type;\n\n    if (this.expectOptionalToken(_tokenKind.TokenKind.BRACKET_L)) {\n      type = this.parseTypeReference();\n      this.expectToken(_tokenKind.TokenKind.BRACKET_R);\n      type = {\n        kind: _kinds.Kind.LIST_TYPE,\n        type: type,\n        loc: this.loc(start)\n      };\n    } else {\n      type = this.parseNamedType();\n    }\n\n    if (this.expectOptionalToken(_tokenKind.TokenKind.BANG)) {\n      return {\n        kind: _kinds.Kind.NON_NULL_TYPE,\n        type: type,\n        loc: this.loc(start)\n      };\n    }\n\n    return type;\n  }\n  /**\n   * NamedType : Name\n   */\n  ;\n\n  _proto.parseNamedType = function parseNamedType() {\n    var start = this._lexer.token;\n    return {\n      kind: _kinds.Kind.NAMED_TYPE,\n      name: this.parseName(),\n      loc: this.loc(start)\n    };\n  } // Implements the parsing rules in the Type Definition section.\n\n  /**\n   * TypeSystemDefinition :\n   *   - SchemaDefinition\n   *   - TypeDefinition\n   *   - DirectiveDefinition\n   *\n   * TypeDefinition :\n   *   - ScalarTypeDefinition\n   *   - ObjectTypeDefinition\n   *   - InterfaceTypeDefinition\n   *   - UnionTypeDefinition\n   *   - EnumTypeDefinition\n   *   - InputObjectTypeDefinition\n   */\n  ;\n\n  _proto.parseTypeSystemDefinition = function parseTypeSystemDefinition() {\n    // Many definitions begin with a description and require a lookahead.\n    var keywordToken = this.peekDescription() ? this._lexer.lookahead() : this._lexer.token;\n\n    if (keywordToken.kind === _tokenKind.TokenKind.NAME) {\n      switch (keywordToken.value) {\n        case 'schema':\n          return this.parseSchemaDefinition();\n\n        case 'scalar':\n          return this.parseScalarTypeDefinition();\n\n        case 'type':\n          return this.parseObjectTypeDefinition();\n\n        case 'interface':\n          return this.parseInterfaceTypeDefinition();\n\n        case 'union':\n          return this.parseUnionTypeDefinition();\n\n        case 'enum':\n          return this.parseEnumTypeDefinition();\n\n        case 'input':\n          return this.parseInputObjectTypeDefinition();\n\n        case 'directive':\n          return this.parseDirectiveDefinition();\n      }\n    }\n\n    throw this.unexpected(keywordToken);\n  };\n\n  _proto.peekDescription = function peekDescription() {\n    return this.peek(_tokenKind.TokenKind.STRING) || this.peek(_tokenKind.TokenKind.BLOCK_STRING);\n  }\n  /**\n   * Description : StringValue\n   */\n  ;\n\n  _proto.parseDescription = function parseDescription() {\n    if (this.peekDescription()) {\n      return this.parseStringLiteral();\n    }\n  }\n  /**\n   * SchemaDefinition : Description? schema Directives[Const]? { OperationTypeDefinition+ }\n   */\n  ;\n\n  _proto.parseSchemaDefinition = function parseSchemaDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('schema');\n    var directives = this.parseDirectives(true);\n    var operationTypes = this.many(_tokenKind.TokenKind.BRACE_L, this.parseOperationTypeDefinition, _tokenKind.TokenKind.BRACE_R);\n    return {\n      kind: _kinds.Kind.SCHEMA_DEFINITION,\n      description: description,\n      directives: directives,\n      operationTypes: operationTypes,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * OperationTypeDefinition : OperationType : NamedType\n   */\n  ;\n\n  _proto.parseOperationTypeDefinition = function parseOperationTypeDefinition() {\n    var start = this._lexer.token;\n    var operation = this.parseOperationType();\n    this.expectToken(_tokenKind.TokenKind.COLON);\n    var type = this.parseNamedType();\n    return {\n      kind: _kinds.Kind.OPERATION_TYPE_DEFINITION,\n      operation: operation,\n      type: type,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ScalarTypeDefinition : Description? scalar Name Directives[Const]?\n   */\n  ;\n\n  _proto.parseScalarTypeDefinition = function parseScalarTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('scalar');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    return {\n      kind: _kinds.Kind.SCALAR_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      directives: directives,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ObjectTypeDefinition :\n   *   Description?\n   *   type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition?\n   */\n  ;\n\n  _proto.parseObjectTypeDefinition = function parseObjectTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('type');\n    var name = this.parseName();\n    var interfaces = this.parseImplementsInterfaces();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseFieldsDefinition();\n    return {\n      kind: _kinds.Kind.OBJECT_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      interfaces: interfaces,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ImplementsInterfaces :\n   *   - implements `&`? NamedType\n   *   - ImplementsInterfaces & NamedType\n   */\n  ;\n\n  _proto.parseImplementsInterfaces = function parseImplementsInterfaces() {\n    var _this$_options2;\n\n    if (!this.expectOptionalKeyword('implements')) {\n      return [];\n    }\n\n    if (((_this$_options2 = this._options) === null || _this$_options2 === void 0 ? void 0 : _this$_options2.allowLegacySDLImplementsInterfaces) === true) {\n      var types = []; // Optional leading ampersand\n\n      this.expectOptionalToken(_tokenKind.TokenKind.AMP);\n\n      do {\n        types.push(this.parseNamedType());\n      } while (this.expectOptionalToken(_tokenKind.TokenKind.AMP) || this.peek(_tokenKind.TokenKind.NAME));\n\n      return types;\n    }\n\n    return this.delimitedMany(_tokenKind.TokenKind.AMP, this.parseNamedType);\n  }\n  /**\n   * FieldsDefinition : { FieldDefinition+ }\n   */\n  ;\n\n  _proto.parseFieldsDefinition = function parseFieldsDefinition() {\n    var _this$_options3;\n\n    // Legacy support for the SDL?\n    if (((_this$_options3 = this._options) === null || _this$_options3 === void 0 ? void 0 : _this$_options3.allowLegacySDLEmptyFields) === true && this.peek(_tokenKind.TokenKind.BRACE_L) && this._lexer.lookahead().kind === _tokenKind.TokenKind.BRACE_R) {\n      this._lexer.advance();\n\n      this._lexer.advance();\n\n      return [];\n    }\n\n    return this.optionalMany(_tokenKind.TokenKind.BRACE_L, this.parseFieldDefinition, _tokenKind.TokenKind.BRACE_R);\n  }\n  /**\n   * FieldDefinition :\n   *   - Description? Name ArgumentsDefinition? : Type Directives[Const]?\n   */\n  ;\n\n  _proto.parseFieldDefinition = function parseFieldDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    var name = this.parseName();\n    var args = this.parseArgumentDefs();\n    this.expectToken(_tokenKind.TokenKind.COLON);\n    var type = this.parseTypeReference();\n    var directives = this.parseDirectives(true);\n    return {\n      kind: _kinds.Kind.FIELD_DEFINITION,\n      description: description,\n      name: name,\n      arguments: args,\n      type: type,\n      directives: directives,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ArgumentsDefinition : ( InputValueDefinition+ )\n   */\n  ;\n\n  _proto.parseArgumentDefs = function parseArgumentDefs() {\n    return this.optionalMany(_tokenKind.TokenKind.PAREN_L, this.parseInputValueDef, _tokenKind.TokenKind.PAREN_R);\n  }\n  /**\n   * InputValueDefinition :\n   *   - Description? Name : Type DefaultValue? Directives[Const]?\n   */\n  ;\n\n  _proto.parseInputValueDef = function parseInputValueDef() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    var name = this.parseName();\n    this.expectToken(_tokenKind.TokenKind.COLON);\n    var type = this.parseTypeReference();\n    var defaultValue;\n\n    if (this.expectOptionalToken(_tokenKind.TokenKind.EQUALS)) {\n      defaultValue = this.parseValueLiteral(true);\n    }\n\n    var directives = this.parseDirectives(true);\n    return {\n      kind: _kinds.Kind.INPUT_VALUE_DEFINITION,\n      description: description,\n      name: name,\n      type: type,\n      defaultValue: defaultValue,\n      directives: directives,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * InterfaceTypeDefinition :\n   *   - Description? interface Name Directives[Const]? FieldsDefinition?\n   */\n  ;\n\n  _proto.parseInterfaceTypeDefinition = function parseInterfaceTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('interface');\n    var name = this.parseName();\n    var interfaces = this.parseImplementsInterfaces();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseFieldsDefinition();\n    return {\n      kind: _kinds.Kind.INTERFACE_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      interfaces: interfaces,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * UnionTypeDefinition :\n   *   - Description? union Name Directives[Const]? UnionMemberTypes?\n   */\n  ;\n\n  _proto.parseUnionTypeDefinition = function parseUnionTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('union');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var types = this.parseUnionMemberTypes();\n    return {\n      kind: _kinds.Kind.UNION_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      directives: directives,\n      types: types,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * UnionMemberTypes :\n   *   - = `|`? NamedType\n   *   - UnionMemberTypes | NamedType\n   */\n  ;\n\n  _proto.parseUnionMemberTypes = function parseUnionMemberTypes() {\n    return this.expectOptionalToken(_tokenKind.TokenKind.EQUALS) ? this.delimitedMany(_tokenKind.TokenKind.PIPE, this.parseNamedType) : [];\n  }\n  /**\n   * EnumTypeDefinition :\n   *   - Description? enum Name Directives[Const]? EnumValuesDefinition?\n   */\n  ;\n\n  _proto.parseEnumTypeDefinition = function parseEnumTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('enum');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var values = this.parseEnumValuesDefinition();\n    return {\n      kind: _kinds.Kind.ENUM_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      directives: directives,\n      values: values,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * EnumValuesDefinition : { EnumValueDefinition+ }\n   */\n  ;\n\n  _proto.parseEnumValuesDefinition = function parseEnumValuesDefinition() {\n    return this.optionalMany(_tokenKind.TokenKind.BRACE_L, this.parseEnumValueDefinition, _tokenKind.TokenKind.BRACE_R);\n  }\n  /**\n   * EnumValueDefinition : Description? EnumValue Directives[Const]?\n   *\n   * EnumValue : Name\n   */\n  ;\n\n  _proto.parseEnumValueDefinition = function parseEnumValueDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    return {\n      kind: _kinds.Kind.ENUM_VALUE_DEFINITION,\n      description: description,\n      name: name,\n      directives: directives,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * InputObjectTypeDefinition :\n   *   - Description? input Name Directives[Const]? InputFieldsDefinition?\n   */\n  ;\n\n  _proto.parseInputObjectTypeDefinition = function parseInputObjectTypeDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('input');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseInputFieldsDefinition();\n    return {\n      kind: _kinds.Kind.INPUT_OBJECT_TYPE_DEFINITION,\n      description: description,\n      name: name,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * InputFieldsDefinition : { InputValueDefinition+ }\n   */\n  ;\n\n  _proto.parseInputFieldsDefinition = function parseInputFieldsDefinition() {\n    return this.optionalMany(_tokenKind.TokenKind.BRACE_L, this.parseInputValueDef, _tokenKind.TokenKind.BRACE_R);\n  }\n  /**\n   * TypeSystemExtension :\n   *   - SchemaExtension\n   *   - TypeExtension\n   *\n   * TypeExtension :\n   *   - ScalarTypeExtension\n   *   - ObjectTypeExtension\n   *   - InterfaceTypeExtension\n   *   - UnionTypeExtension\n   *   - EnumTypeExtension\n   *   - InputObjectTypeDefinition\n   */\n  ;\n\n  _proto.parseTypeSystemExtension = function parseTypeSystemExtension() {\n    var keywordToken = this._lexer.lookahead();\n\n    if (keywordToken.kind === _tokenKind.TokenKind.NAME) {\n      switch (keywordToken.value) {\n        case 'schema':\n          return this.parseSchemaExtension();\n\n        case 'scalar':\n          return this.parseScalarTypeExtension();\n\n        case 'type':\n          return this.parseObjectTypeExtension();\n\n        case 'interface':\n          return this.parseInterfaceTypeExtension();\n\n        case 'union':\n          return this.parseUnionTypeExtension();\n\n        case 'enum':\n          return this.parseEnumTypeExtension();\n\n        case 'input':\n          return this.parseInputObjectTypeExtension();\n      }\n    }\n\n    throw this.unexpected(keywordToken);\n  }\n  /**\n   * SchemaExtension :\n   *  - extend schema Directives[Const]? { OperationTypeDefinition+ }\n   *  - extend schema Directives[Const]\n   */\n  ;\n\n  _proto.parseSchemaExtension = function parseSchemaExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('schema');\n    var directives = this.parseDirectives(true);\n    var operationTypes = this.optionalMany(_tokenKind.TokenKind.BRACE_L, this.parseOperationTypeDefinition, _tokenKind.TokenKind.BRACE_R);\n\n    if (directives.length === 0 && operationTypes.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: _kinds.Kind.SCHEMA_EXTENSION,\n      directives: directives,\n      operationTypes: operationTypes,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ScalarTypeExtension :\n   *   - extend scalar Name Directives[Const]\n   */\n  ;\n\n  _proto.parseScalarTypeExtension = function parseScalarTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('scalar');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n\n    if (directives.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: _kinds.Kind.SCALAR_TYPE_EXTENSION,\n      name: name,\n      directives: directives,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * ObjectTypeExtension :\n   *  - extend type Name ImplementsInterfaces? Directives[Const]? FieldsDefinition\n   *  - extend type Name ImplementsInterfaces? Directives[Const]\n   *  - extend type Name ImplementsInterfaces\n   */\n  ;\n\n  _proto.parseObjectTypeExtension = function parseObjectTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('type');\n    var name = this.parseName();\n    var interfaces = this.parseImplementsInterfaces();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseFieldsDefinition();\n\n    if (interfaces.length === 0 && directives.length === 0 && fields.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: _kinds.Kind.OBJECT_TYPE_EXTENSION,\n      name: name,\n      interfaces: interfaces,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * InterfaceTypeExtension :\n   *  - extend interface Name ImplementsInterfaces? Directives[Const]? FieldsDefinition\n   *  - extend interface Name ImplementsInterfaces? Directives[Const]\n   *  - extend interface Name ImplementsInterfaces\n   */\n  ;\n\n  _proto.parseInterfaceTypeExtension = function parseInterfaceTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('interface');\n    var name = this.parseName();\n    var interfaces = this.parseImplementsInterfaces();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseFieldsDefinition();\n\n    if (interfaces.length === 0 && directives.length === 0 && fields.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: _kinds.Kind.INTERFACE_TYPE_EXTENSION,\n      name: name,\n      interfaces: interfaces,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * UnionTypeExtension :\n   *   - extend union Name Directives[Const]? UnionMemberTypes\n   *   - extend union Name Directives[Const]\n   */\n  ;\n\n  _proto.parseUnionTypeExtension = function parseUnionTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('union');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var types = this.parseUnionMemberTypes();\n\n    if (directives.length === 0 && types.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: _kinds.Kind.UNION_TYPE_EXTENSION,\n      name: name,\n      directives: directives,\n      types: types,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * EnumTypeExtension :\n   *   - extend enum Name Directives[Const]? EnumValuesDefinition\n   *   - extend enum Name Directives[Const]\n   */\n  ;\n\n  _proto.parseEnumTypeExtension = function parseEnumTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('enum');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var values = this.parseEnumValuesDefinition();\n\n    if (directives.length === 0 && values.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: _kinds.Kind.ENUM_TYPE_EXTENSION,\n      name: name,\n      directives: directives,\n      values: values,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * InputObjectTypeExtension :\n   *   - extend input Name Directives[Const]? InputFieldsDefinition\n   *   - extend input Name Directives[Const]\n   */\n  ;\n\n  _proto.parseInputObjectTypeExtension = function parseInputObjectTypeExtension() {\n    var start = this._lexer.token;\n    this.expectKeyword('extend');\n    this.expectKeyword('input');\n    var name = this.parseName();\n    var directives = this.parseDirectives(true);\n    var fields = this.parseInputFieldsDefinition();\n\n    if (directives.length === 0 && fields.length === 0) {\n      throw this.unexpected();\n    }\n\n    return {\n      kind: _kinds.Kind.INPUT_OBJECT_TYPE_EXTENSION,\n      name: name,\n      directives: directives,\n      fields: fields,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * DirectiveDefinition :\n   *   - Description? directive @ Name ArgumentsDefinition? `repeatable`? on DirectiveLocations\n   */\n  ;\n\n  _proto.parseDirectiveDefinition = function parseDirectiveDefinition() {\n    var start = this._lexer.token;\n    var description = this.parseDescription();\n    this.expectKeyword('directive');\n    this.expectToken(_tokenKind.TokenKind.AT);\n    var name = this.parseName();\n    var args = this.parseArgumentDefs();\n    var repeatable = this.expectOptionalKeyword('repeatable');\n    this.expectKeyword('on');\n    var locations = this.parseDirectiveLocations();\n    return {\n      kind: _kinds.Kind.DIRECTIVE_DEFINITION,\n      description: description,\n      name: name,\n      arguments: args,\n      repeatable: repeatable,\n      locations: locations,\n      loc: this.loc(start)\n    };\n  }\n  /**\n   * DirectiveLocations :\n   *   - `|`? DirectiveLocation\n   *   - DirectiveLocations | DirectiveLocation\n   */\n  ;\n\n  _proto.parseDirectiveLocations = function parseDirectiveLocations() {\n    return this.delimitedMany(_tokenKind.TokenKind.PIPE, this.parseDirectiveLocation);\n  }\n  /*\n   * DirectiveLocation :\n   *   - ExecutableDirectiveLocation\n   *   - TypeSystemDirectiveLocation\n   *\n   * ExecutableDirectiveLocation : one of\n   *   `QUERY`\n   *   `MUTATION`\n   *   `SUBSCRIPTION`\n   *   `FIELD`\n   *   `FRAGMENT_DEFINITION`\n   *   `FRAGMENT_SPREAD`\n   *   `INLINE_FRAGMENT`\n   *\n   * TypeSystemDirectiveLocation : one of\n   *   `SCHEMA`\n   *   `SCALAR`\n   *   `OBJECT`\n   *   `FIELD_DEFINITION`\n   *   `ARGUMENT_DEFINITION`\n   *   `INTERFACE`\n   *   `UNION`\n   *   `ENUM`\n   *   `ENUM_VALUE`\n   *   `INPUT_OBJECT`\n   *   `INPUT_FIELD_DEFINITION`\n   */\n  ;\n\n  _proto.parseDirectiveLocation = function parseDirectiveLocation() {\n    var start = this._lexer.token;\n    var name = this.parseName();\n\n    if (_directiveLocation.DirectiveLocation[name.value] !== undefined) {\n      return name;\n    }\n\n    throw this.unexpected(start);\n  } // Core parsing utility functions\n\n  /**\n   * Returns a location object, used to identify the place in the source that created a given parsed object.\n   */\n  ;\n\n  _proto.loc = function loc(startToken) {\n    var _this$_options4;\n\n    if (((_this$_options4 = this._options) === null || _this$_options4 === void 0 ? void 0 : _this$_options4.noLocation) !== true) {\n      return new _ast.Location(startToken, this._lexer.lastToken, this._lexer.source);\n    }\n  }\n  /**\n   * Determines if the next token is of a given kind\n   */\n  ;\n\n  _proto.peek = function peek(kind) {\n    return this._lexer.token.kind === kind;\n  }\n  /**\n   * If the next token is of the given kind, return that token after advancing the lexer.\n   * Otherwise, do not change the parser state and throw an error.\n   */\n  ;\n\n  _proto.expectToken = function expectToken(kind) {\n    var token = this._lexer.token;\n\n    if (token.kind === kind) {\n      this._lexer.advance();\n\n      return token;\n    }\n\n    throw (0, _syntaxError.syntaxError)(this._lexer.source, token.start, \"Expected \".concat(getTokenKindDesc(kind), \", found \").concat(getTokenDesc(token), \".\"));\n  }\n  /**\n   * If the next token is of the given kind, return that token after advancing the lexer.\n   * Otherwise, do not change the parser state and return undefined.\n   */\n  ;\n\n  _proto.expectOptionalToken = function expectOptionalToken(kind) {\n    var token = this._lexer.token;\n\n    if (token.kind === kind) {\n      this._lexer.advance();\n\n      return token;\n    }\n\n    return undefined;\n  }\n  /**\n   * If the next token is a given keyword, advance the lexer.\n   * Otherwise, do not change the parser state and throw an error.\n   */\n  ;\n\n  _proto.expectKeyword = function expectKeyword(value) {\n    var token = this._lexer.token;\n\n    if (token.kind === _tokenKind.TokenKind.NAME && token.value === value) {\n      this._lexer.advance();\n    } else {\n      throw (0, _syntaxError.syntaxError)(this._lexer.source, token.start, \"Expected \\\"\".concat(value, \"\\\", found \").concat(getTokenDesc(token), \".\"));\n    }\n  }\n  /**\n   * If the next token is a given keyword, return \"true\" after advancing the lexer.\n   * Otherwise, do not change the parser state and return \"false\".\n   */\n  ;\n\n  _proto.expectOptionalKeyword = function expectOptionalKeyword(value) {\n    var token = this._lexer.token;\n\n    if (token.kind === _tokenKind.TokenKind.NAME && token.value === value) {\n      this._lexer.advance();\n\n      return true;\n    }\n\n    return false;\n  }\n  /**\n   * Helper function for creating an error when an unexpected lexed token is encountered.\n   */\n  ;\n\n  _proto.unexpected = function unexpected(atToken) {\n    var token = atToken !== null && atToken !== void 0 ? atToken : this._lexer.token;\n    return (0, _syntaxError.syntaxError)(this._lexer.source, token.start, \"Unexpected \".concat(getTokenDesc(token), \".\"));\n  }\n  /**\n   * Returns a possibly empty list of parse nodes, determined by the parseFn.\n   * This list begins with a lex token of openKind and ends with a lex token of closeKind.\n   * Advances the parser to the next lex token after the closing token.\n   */\n  ;\n\n  _proto.any = function any(openKind, parseFn, closeKind) {\n    this.expectToken(openKind);\n    var nodes = [];\n\n    while (!this.expectOptionalToken(closeKind)) {\n      nodes.push(parseFn.call(this));\n    }\n\n    return nodes;\n  }\n  /**\n   * Returns a list of parse nodes, determined by the parseFn.\n   * It can be empty only if open token is missing otherwise it will always return non-empty list\n   * that begins with a lex token of openKind and ends with a lex token of closeKind.\n   * Advances the parser to the next lex token after the closing token.\n   */\n  ;\n\n  _proto.optionalMany = function optionalMany(openKind, parseFn, closeKind) {\n    if (this.expectOptionalToken(openKind)) {\n      var nodes = [];\n\n      do {\n        nodes.push(parseFn.call(this));\n      } while (!this.expectOptionalToken(closeKind));\n\n      return nodes;\n    }\n\n    return [];\n  }\n  /**\n   * Returns a non-empty list of parse nodes, determined by the parseFn.\n   * This list begins with a lex token of openKind and ends with a lex token of closeKind.\n   * Advances the parser to the next lex token after the closing token.\n   */\n  ;\n\n  _proto.many = function many(openKind, parseFn, closeKind) {\n    this.expectToken(openKind);\n    var nodes = [];\n\n    do {\n      nodes.push(parseFn.call(this));\n    } while (!this.expectOptionalToken(closeKind));\n\n    return nodes;\n  }\n  /**\n   * Returns a non-empty list of parse nodes, determined by the parseFn.\n   * This list may begin with a lex token of delimiterKind followed by items separated by lex tokens of tokenKind.\n   * Advances the parser to the next lex token after last item in the list.\n   */\n  ;\n\n  _proto.delimitedMany = function delimitedMany(delimiterKind, parseFn) {\n    this.expectOptionalToken(delimiterKind);\n    var nodes = [];\n\n    do {\n      nodes.push(parseFn.call(this));\n    } while (this.expectOptionalToken(delimiterKind));\n\n    return nodes;\n  };\n\n  return Parser;\n}();\n/**\n * A helper function to describe a token as a string for debugging.\n */\n\n\nexports.Parser = Parser;\n\nfunction getTokenDesc(token) {\n  var value = token.value;\n  return getTokenKindDesc(token.kind) + (value != null ? \" \\\"\".concat(value, \"\\\"\") : '');\n}\n/**\n * A helper function to describe a token kind as a string for debugging.\n */\n\n\nfunction getTokenKindDesc(kind) {\n  return (0, _lexer.isPunctuatorTokenKind)(kind) ? \"\\\"\".concat(kind, \"\\\"\") : kind;\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isDefinitionNode = isDefinitionNode;\nexports.isExecutableDefinitionNode = isExecutableDefinitionNode;\nexports.isSelectionNode = isSelectionNode;\nexports.isValueNode = isValueNode;\nexports.isTypeNode = isTypeNode;\nexports.isTypeSystemDefinitionNode = isTypeSystemDefinitionNode;\nexports.isTypeDefinitionNode = isTypeDefinitionNode;\nexports.isTypeSystemExtensionNode = isTypeSystemExtensionNode;\nexports.isTypeExtensionNode = isTypeExtensionNode;\n\nvar _kinds = require(\"./kinds.js\");\n\nfunction isDefinitionNode(node) {\n  return isExecutableDefinitionNode(node) || isTypeSystemDefinitionNode(node) || isTypeSystemExtensionNode(node);\n}\n\nfunction isExecutableDefinitionNode(node) {\n  return node.kind === _kinds.Kind.OPERATION_DEFINITION || node.kind === _kinds.Kind.FRAGMENT_DEFINITION;\n}\n\nfunction isSelectionNode(node) {\n  return node.kind === _kinds.Kind.FIELD || node.kind === _kinds.Kind.FRAGMENT_SPREAD || node.kind === _kinds.Kind.INLINE_FRAGMENT;\n}\n\nfunction isValueNode(node) {\n  return node.kind === _kinds.Kind.VARIABLE || node.kind === _kinds.Kind.INT || node.kind === _kinds.Kind.FLOAT || node.kind === _kinds.Kind.STRING || node.kind === _kinds.Kind.BOOLEAN || node.kind === _kinds.Kind.NULL || node.kind === _kinds.Kind.ENUM || node.kind === _kinds.Kind.LIST || node.kind === _kinds.Kind.OBJECT;\n}\n\nfunction isTypeNode(node) {\n  return node.kind === _kinds.Kind.NAMED_TYPE || node.kind === _kinds.Kind.LIST_TYPE || node.kind === _kinds.Kind.NON_NULL_TYPE;\n}\n\nfunction isTypeSystemDefinitionNode(node) {\n  return node.kind === _kinds.Kind.SCHEMA_DEFINITION || isTypeDefinitionNode(node) || node.kind === _kinds.Kind.DIRECTIVE_DEFINITION;\n}\n\nfunction isTypeDefinitionNode(node) {\n  return node.kind === _kinds.Kind.SCALAR_TYPE_DEFINITION || node.kind === _kinds.Kind.OBJECT_TYPE_DEFINITION || node.kind === _kinds.Kind.INTERFACE_TYPE_DEFINITION || node.kind === _kinds.Kind.UNION_TYPE_DEFINITION || node.kind === _kinds.Kind.ENUM_TYPE_DEFINITION || node.kind === _kinds.Kind.INPUT_OBJECT_TYPE_DEFINITION;\n}\n\nfunction isTypeSystemExtensionNode(node) {\n  return node.kind === _kinds.Kind.SCHEMA_EXTENSION || isTypeExtensionNode(node);\n}\n\nfunction isTypeExtensionNode(node) {\n  return node.kind === _kinds.Kind.SCALAR_TYPE_EXTENSION || node.kind === _kinds.Kind.OBJECT_TYPE_EXTENSION || node.kind === _kinds.Kind.INTERFACE_TYPE_EXTENSION || node.kind === _kinds.Kind.UNION_TYPE_EXTENSION || node.kind === _kinds.Kind.ENUM_TYPE_EXTENSION || node.kind === _kinds.Kind.INPUT_OBJECT_TYPE_EXTENSION;\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.printLocation = printLocation;\nexports.printSourceLocation = printSourceLocation;\n\nvar _location = require(\"./location.js\");\n\n/**\n * Render a helpful description of the location in the GraphQL Source document.\n */\nfunction printLocation(location) {\n  return printSourceLocation(location.source, (0, _location.getLocation)(location.source, location.start));\n}\n/**\n * Render a helpful description of the location in the GraphQL Source document.\n */\n\n\nfunction printSourceLocation(source, sourceLocation) {\n  var firstLineColumnOffset = source.locationOffset.column - 1;\n  var body = whitespace(firstLineColumnOffset) + source.body;\n  var lineIndex = sourceLocation.line - 1;\n  var lineOffset = source.locationOffset.line - 1;\n  var lineNum = sourceLocation.line + lineOffset;\n  var columnOffset = sourceLocation.line === 1 ? firstLineColumnOffset : 0;\n  var columnNum = sourceLocation.column + columnOffset;\n  var locationStr = \"\".concat(source.name, \":\").concat(lineNum, \":\").concat(columnNum, \"\\n\");\n  var lines = body.split(/\\r\\n|[\\n\\r]/g);\n  var locationLine = lines[lineIndex]; // Special case for minified documents\n\n  if (locationLine.length > 120) {\n    var subLineIndex = Math.floor(columnNum / 80);\n    var subLineColumnNum = columnNum % 80;\n    var subLines = [];\n\n    for (var i = 0; i < locationLine.length; i += 80) {\n      subLines.push(locationLine.slice(i, i + 80));\n    }\n\n    return locationStr + printPrefixedLines([[\"\".concat(lineNum), subLines[0]]].concat(subLines.slice(1, subLineIndex + 1).map(function (subLine) {\n      return ['', subLine];\n    }), [[' ', whitespace(subLineColumnNum - 1) + '^'], ['', subLines[subLineIndex + 1]]]));\n  }\n\n  return locationStr + printPrefixedLines([// Lines specified like this: [\"prefix\", \"string\"],\n  [\"\".concat(lineNum - 1), lines[lineIndex - 1]], [\"\".concat(lineNum), locationLine], ['', whitespace(columnNum - 1) + '^'], [\"\".concat(lineNum + 1), lines[lineIndex + 1]]]);\n}\n\nfunction printPrefixedLines(lines) {\n  var existingLines = lines.filter(function (_ref) {\n    var _ = _ref[0],\n        line = _ref[1];\n    return line !== undefined;\n  });\n  var padLen = Math.max.apply(Math, existingLines.map(function (_ref2) {\n    var prefix = _ref2[0];\n    return prefix.length;\n  }));\n  return existingLines.map(function (_ref3) {\n    var prefix = _ref3[0],\n        line = _ref3[1];\n    return leftPad(padLen, prefix) + (line ? ' | ' + line : ' |');\n  }).join('\\n');\n}\n\nfunction whitespace(len) {\n  return Array(len + 1).join(' ');\n}\n\nfunction leftPad(len, str) {\n  return whitespace(len - str.length) + str;\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.print = print;\n\nvar _visitor = require(\"./visitor.js\");\n\nvar _blockString = require(\"./blockString.js\");\n\n/**\n * Converts an AST into a string, using one set of reasonable\n * formatting rules.\n */\nfunction print(ast) {\n  return (0, _visitor.visit)(ast, {\n    leave: printDocASTReducer\n  });\n}\n\nvar MAX_LINE_LENGTH = 80; // TODO: provide better type coverage in future\n\nvar printDocASTReducer = {\n  Name: function Name(node) {\n    return node.value;\n  },\n  Variable: function Variable(node) {\n    return '$' + node.name;\n  },\n  // Document\n  Document: function Document(node) {\n    return join(node.definitions, '\\n\\n') + '\\n';\n  },\n  OperationDefinition: function OperationDefinition(node) {\n    var op = node.operation;\n    var name = node.name;\n    var varDefs = wrap('(', join(node.variableDefinitions, ', '), ')');\n    var directives = join(node.directives, ' ');\n    var selectionSet = node.selectionSet; // Anonymous queries with no directives or variable definitions can use\n    // the query short form.\n\n    return !name && !directives && !varDefs && op === 'query' ? selectionSet : join([op, join([name, varDefs]), directives, selectionSet], ' ');\n  },\n  VariableDefinition: function VariableDefinition(_ref) {\n    var variable = _ref.variable,\n        type = _ref.type,\n        defaultValue = _ref.defaultValue,\n        directives = _ref.directives;\n    return variable + ': ' + type + wrap(' = ', defaultValue) + wrap(' ', join(directives, ' '));\n  },\n  SelectionSet: function SelectionSet(_ref2) {\n    var selections = _ref2.selections;\n    return block(selections);\n  },\n  Field: function Field(_ref3) {\n    var alias = _ref3.alias,\n        name = _ref3.name,\n        args = _ref3.arguments,\n        directives = _ref3.directives,\n        selectionSet = _ref3.selectionSet;\n    var prefix = wrap('', alias, ': ') + name;\n    var argsLine = prefix + wrap('(', join(args, ', '), ')');\n\n    if (argsLine.length > MAX_LINE_LENGTH) {\n      argsLine = prefix + wrap('(\\n', indent(join(args, '\\n')), '\\n)');\n    }\n\n    return join([argsLine, join(directives, ' '), selectionSet], ' ');\n  },\n  Argument: function Argument(_ref4) {\n    var name = _ref4.name,\n        value = _ref4.value;\n    return name + ': ' + value;\n  },\n  // Fragments\n  FragmentSpread: function FragmentSpread(_ref5) {\n    var name = _ref5.name,\n        directives = _ref5.directives;\n    return '...' + name + wrap(' ', join(directives, ' '));\n  },\n  InlineFragment: function InlineFragment(_ref6) {\n    var typeCondition = _ref6.typeCondition,\n        directives = _ref6.directives,\n        selectionSet = _ref6.selectionSet;\n    return join(['...', wrap('on ', typeCondition), join(directives, ' '), selectionSet], ' ');\n  },\n  FragmentDefinition: function FragmentDefinition(_ref7) {\n    var name = _ref7.name,\n        typeCondition = _ref7.typeCondition,\n        variableDefinitions = _ref7.variableDefinitions,\n        directives = _ref7.directives,\n        selectionSet = _ref7.selectionSet;\n    return (// Note: fragment variable definitions are experimental and may be changed\n      // or removed in the future.\n      \"fragment \".concat(name).concat(wrap('(', join(variableDefinitions, ', '), ')'), \" \") + \"on \".concat(typeCondition, \" \").concat(wrap('', join(directives, ' '), ' ')) + selectionSet\n    );\n  },\n  // Value\n  IntValue: function IntValue(_ref8) {\n    var value = _ref8.value;\n    return value;\n  },\n  FloatValue: function FloatValue(_ref9) {\n    var value = _ref9.value;\n    return value;\n  },\n  StringValue: function StringValue(_ref10, key) {\n    var value = _ref10.value,\n        isBlockString = _ref10.block;\n    return isBlockString ? (0, _blockString.printBlockString)(value, key === 'description' ? '' : '  ') : JSON.stringify(value);\n  },\n  BooleanValue: function BooleanValue(_ref11) {\n    var value = _ref11.value;\n    return value ? 'true' : 'false';\n  },\n  NullValue: function NullValue() {\n    return 'null';\n  },\n  EnumValue: function EnumValue(_ref12) {\n    var value = _ref12.value;\n    return value;\n  },\n  ListValue: function ListValue(_ref13) {\n    var values = _ref13.values;\n    return '[' + join(values, ', ') + ']';\n  },\n  ObjectValue: function ObjectValue(_ref14) {\n    var fields = _ref14.fields;\n    return '{' + join(fields, ', ') + '}';\n  },\n  ObjectField: function ObjectField(_ref15) {\n    var name = _ref15.name,\n        value = _ref15.value;\n    return name + ': ' + value;\n  },\n  // Directive\n  Directive: function Directive(_ref16) {\n    var name = _ref16.name,\n        args = _ref16.arguments;\n    return '@' + name + wrap('(', join(args, ', '), ')');\n  },\n  // Type\n  NamedType: function NamedType(_ref17) {\n    var name = _ref17.name;\n    return name;\n  },\n  ListType: function ListType(_ref18) {\n    var type = _ref18.type;\n    return '[' + type + ']';\n  },\n  NonNullType: function NonNullType(_ref19) {\n    var type = _ref19.type;\n    return type + '!';\n  },\n  // Type System Definitions\n  SchemaDefinition: addDescription(function (_ref20) {\n    var directives = _ref20.directives,\n        operationTypes = _ref20.operationTypes;\n    return join(['schema', join(directives, ' '), block(operationTypes)], ' ');\n  }),\n  OperationTypeDefinition: function OperationTypeDefinition(_ref21) {\n    var operation = _ref21.operation,\n        type = _ref21.type;\n    return operation + ': ' + type;\n  },\n  ScalarTypeDefinition: addDescription(function (_ref22) {\n    var name = _ref22.name,\n        directives = _ref22.directives;\n    return join(['scalar', name, join(directives, ' ')], ' ');\n  }),\n  ObjectTypeDefinition: addDescription(function (_ref23) {\n    var name = _ref23.name,\n        interfaces = _ref23.interfaces,\n        directives = _ref23.directives,\n        fields = _ref23.fields;\n    return join(['type', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  }),\n  FieldDefinition: addDescription(function (_ref24) {\n    var name = _ref24.name,\n        args = _ref24.arguments,\n        type = _ref24.type,\n        directives = _ref24.directives;\n    return name + (hasMultilineItems(args) ? wrap('(\\n', indent(join(args, '\\n')), '\\n)') : wrap('(', join(args, ', '), ')')) + ': ' + type + wrap(' ', join(directives, ' '));\n  }),\n  InputValueDefinition: addDescription(function (_ref25) {\n    var name = _ref25.name,\n        type = _ref25.type,\n        defaultValue = _ref25.defaultValue,\n        directives = _ref25.directives;\n    return join([name + ': ' + type, wrap('= ', defaultValue), join(directives, ' ')], ' ');\n  }),\n  InterfaceTypeDefinition: addDescription(function (_ref26) {\n    var name = _ref26.name,\n        interfaces = _ref26.interfaces,\n        directives = _ref26.directives,\n        fields = _ref26.fields;\n    return join(['interface', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  }),\n  UnionTypeDefinition: addDescription(function (_ref27) {\n    var name = _ref27.name,\n        directives = _ref27.directives,\n        types = _ref27.types;\n    return join(['union', name, join(directives, ' '), types && types.length !== 0 ? '= ' + join(types, ' | ') : ''], ' ');\n  }),\n  EnumTypeDefinition: addDescription(function (_ref28) {\n    var name = _ref28.name,\n        directives = _ref28.directives,\n        values = _ref28.values;\n    return join(['enum', name, join(directives, ' '), block(values)], ' ');\n  }),\n  EnumValueDefinition: addDescription(function (_ref29) {\n    var name = _ref29.name,\n        directives = _ref29.directives;\n    return join([name, join(directives, ' ')], ' ');\n  }),\n  InputObjectTypeDefinition: addDescription(function (_ref30) {\n    var name = _ref30.name,\n        directives = _ref30.directives,\n        fields = _ref30.fields;\n    return join(['input', name, join(directives, ' '), block(fields)], ' ');\n  }),\n  DirectiveDefinition: addDescription(function (_ref31) {\n    var name = _ref31.name,\n        args = _ref31.arguments,\n        repeatable = _ref31.repeatable,\n        locations = _ref31.locations;\n    return 'directive @' + name + (hasMultilineItems(args) ? wrap('(\\n', indent(join(args, '\\n')), '\\n)') : wrap('(', join(args, ', '), ')')) + (repeatable ? ' repeatable' : '') + ' on ' + join(locations, ' | ');\n  }),\n  SchemaExtension: function SchemaExtension(_ref32) {\n    var directives = _ref32.directives,\n        operationTypes = _ref32.operationTypes;\n    return join(['extend schema', join(directives, ' '), block(operationTypes)], ' ');\n  },\n  ScalarTypeExtension: function ScalarTypeExtension(_ref33) {\n    var name = _ref33.name,\n        directives = _ref33.directives;\n    return join(['extend scalar', name, join(directives, ' ')], ' ');\n  },\n  ObjectTypeExtension: function ObjectTypeExtension(_ref34) {\n    var name = _ref34.name,\n        interfaces = _ref34.interfaces,\n        directives = _ref34.directives,\n        fields = _ref34.fields;\n    return join(['extend type', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  },\n  InterfaceTypeExtension: function InterfaceTypeExtension(_ref35) {\n    var name = _ref35.name,\n        interfaces = _ref35.interfaces,\n        directives = _ref35.directives,\n        fields = _ref35.fields;\n    return join(['extend interface', name, wrap('implements ', join(interfaces, ' & ')), join(directives, ' '), block(fields)], ' ');\n  },\n  UnionTypeExtension: function UnionTypeExtension(_ref36) {\n    var name = _ref36.name,\n        directives = _ref36.directives,\n        types = _ref36.types;\n    return join(['extend union', name, join(directives, ' '), types && types.length !== 0 ? '= ' + join(types, ' | ') : ''], ' ');\n  },\n  EnumTypeExtension: function EnumTypeExtension(_ref37) {\n    var name = _ref37.name,\n        directives = _ref37.directives,\n        values = _ref37.values;\n    return join(['extend enum', name, join(directives, ' '), block(values)], ' ');\n  },\n  InputObjectTypeExtension: function InputObjectTypeExtension(_ref38) {\n    var name = _ref38.name,\n        directives = _ref38.directives,\n        fields = _ref38.fields;\n    return join(['extend input', name, join(directives, ' '), block(fields)], ' ');\n  }\n};\n\nfunction addDescription(cb) {\n  return function (node) {\n    return join([node.description, cb(node)], '\\n');\n  };\n}\n/**\n * Given maybeArray, print an empty string if it is null or empty, otherwise\n * print all items together separated by separator if provided\n */\n\n\nfunction join(maybeArray) {\n  var _maybeArray$filter$jo;\n\n  var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  return (_maybeArray$filter$jo = maybeArray === null || maybeArray === void 0 ? void 0 : maybeArray.filter(function (x) {\n    return x;\n  }).join(separator)) !== null && _maybeArray$filter$jo !== void 0 ? _maybeArray$filter$jo : '';\n}\n/**\n * Given array, print each item on its own line, wrapped in an\n * indented \"{ }\" block.\n */\n\n\nfunction block(array) {\n  return wrap('{\\n', indent(join(array, '\\n')), '\\n}');\n}\n/**\n * If maybeString is not null or empty, then wrap with start and end, otherwise print an empty string.\n */\n\n\nfunction wrap(start, maybeString) {\n  var end = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';\n  return maybeString != null && maybeString !== '' ? start + maybeString + end : '';\n}\n\nfunction indent(str) {\n  return wrap('  ', str.replace(/\\n/g, '\\n  '));\n}\n\nfunction isMultiline(str) {\n  return str.indexOf('\\n') !== -1;\n}\n\nfunction hasMultilineItems(maybeArray) {\n  return maybeArray != null && maybeArray.some(isMultiline);\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.isSource = isSource;\nexports.Source = void 0;\n\nvar _symbols = require(\"../polyfills/symbols.js\");\n\nvar _inspect = _interopRequireDefault(require(\"../jsutils/inspect.js\"));\n\nvar _devAssert = _interopRequireDefault(require(\"../jsutils/devAssert.js\"));\n\nvar _instanceOf = _interopRequireDefault(require(\"../jsutils/instanceOf.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * A representation of source input to GraphQL. The `name` and `locationOffset` parameters are\n * optional, but they are useful for clients who store GraphQL documents in source files.\n * For example, if the GraphQL input starts at line 40 in a file named `Foo.graphql`, it might\n * be useful for `name` to be `\"Foo.graphql\"` and location to be `{ line: 40, column: 1 }`.\n * The `line` and `column` properties in `locationOffset` are 1-indexed.\n */\nvar Source = /*#__PURE__*/function () {\n  function Source(body) {\n    var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'GraphQL request';\n    var locationOffset = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      line: 1,\n      column: 1\n    };\n    typeof body === 'string' || (0, _devAssert.default)(0, \"Body must be a string. Received: \".concat((0, _inspect.default)(body), \".\"));\n    this.body = body;\n    this.name = name;\n    this.locationOffset = locationOffset;\n    this.locationOffset.line > 0 || (0, _devAssert.default)(0, 'line in locationOffset is 1-indexed and must be positive.');\n    this.locationOffset.column > 0 || (0, _devAssert.default)(0, 'column in locationOffset is 1-indexed and must be positive.');\n  } // $FlowFixMe[unsupported-syntax] Flow doesn't support computed properties yet\n\n\n  _createClass(Source, [{\n    key: _symbols.SYMBOL_TO_STRING_TAG,\n    get: function get() {\n      return 'Source';\n    }\n  }]);\n\n  return Source;\n}();\n/**\n * Test if the given value is a Source object.\n *\n * @internal\n */\n\n\nexports.Source = Source;\n\n// eslint-disable-next-line no-redeclare\nfunction isSource(source) {\n  return (0, _instanceOf.default)(source, Source);\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TokenKind = void 0;\n\n/**\n * An exported enum describing the different kinds of tokens that the\n * lexer emits.\n */\nvar TokenKind = Object.freeze({\n  SOF: '<SOF>',\n  EOF: '<EOF>',\n  BANG: '!',\n  DOLLAR: '$',\n  AMP: '&',\n  PAREN_L: '(',\n  PAREN_R: ')',\n  SPREAD: '...',\n  COLON: ':',\n  EQUALS: '=',\n  AT: '@',\n  BRACKET_L: '[',\n  BRACKET_R: ']',\n  BRACE_L: '{',\n  PIPE: '|',\n  BRACE_R: '}',\n  NAME: 'Name',\n  INT: 'Int',\n  FLOAT: 'Float',\n  STRING: 'String',\n  BLOCK_STRING: 'BlockString',\n  COMMENT: 'Comment'\n});\n/**\n * The enum type representing the token kinds values.\n */\n\nexports.TokenKind = TokenKind;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.visit = visit;\nexports.visitInParallel = visitInParallel;\nexports.getVisitFn = getVisitFn;\nexports.BREAK = exports.QueryDocumentKeys = void 0;\n\nvar _inspect = _interopRequireDefault(require(\"../jsutils/inspect.js\"));\n\nvar _ast = require(\"./ast.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar QueryDocumentKeys = {\n  Name: [],\n  Document: ['definitions'],\n  OperationDefinition: ['name', 'variableDefinitions', 'directives', 'selectionSet'],\n  VariableDefinition: ['variable', 'type', 'defaultValue', 'directives'],\n  Variable: ['name'],\n  SelectionSet: ['selections'],\n  Field: ['alias', 'name', 'arguments', 'directives', 'selectionSet'],\n  Argument: ['name', 'value'],\n  FragmentSpread: ['name', 'directives'],\n  InlineFragment: ['typeCondition', 'directives', 'selectionSet'],\n  FragmentDefinition: ['name', // Note: fragment variable definitions are experimental and may be changed\n  // or removed in the future.\n  'variableDefinitions', 'typeCondition', 'directives', 'selectionSet'],\n  IntValue: [],\n  FloatValue: [],\n  StringValue: [],\n  BooleanValue: [],\n  NullValue: [],\n  EnumValue: [],\n  ListValue: ['values'],\n  ObjectValue: ['fields'],\n  ObjectField: ['name', 'value'],\n  Directive: ['name', 'arguments'],\n  NamedType: ['name'],\n  ListType: ['type'],\n  NonNullType: ['type'],\n  SchemaDefinition: ['description', 'directives', 'operationTypes'],\n  OperationTypeDefinition: ['type'],\n  ScalarTypeDefinition: ['description', 'name', 'directives'],\n  ObjectTypeDefinition: ['description', 'name', 'interfaces', 'directives', 'fields'],\n  FieldDefinition: ['description', 'name', 'arguments', 'type', 'directives'],\n  InputValueDefinition: ['description', 'name', 'type', 'defaultValue', 'directives'],\n  InterfaceTypeDefinition: ['description', 'name', 'interfaces', 'directives', 'fields'],\n  UnionTypeDefinition: ['description', 'name', 'directives', 'types'],\n  EnumTypeDefinition: ['description', 'name', 'directives', 'values'],\n  EnumValueDefinition: ['description', 'name', 'directives'],\n  InputObjectTypeDefinition: ['description', 'name', 'directives', 'fields'],\n  DirectiveDefinition: ['description', 'name', 'arguments', 'locations'],\n  SchemaExtension: ['directives', 'operationTypes'],\n  ScalarTypeExtension: ['name', 'directives'],\n  ObjectTypeExtension: ['name', 'interfaces', 'directives', 'fields'],\n  InterfaceTypeExtension: ['name', 'interfaces', 'directives', 'fields'],\n  UnionTypeExtension: ['name', 'directives', 'types'],\n  EnumTypeExtension: ['name', 'directives', 'values'],\n  InputObjectTypeExtension: ['name', 'directives', 'fields']\n};\nexports.QueryDocumentKeys = QueryDocumentKeys;\nvar BREAK = Object.freeze({});\n/**\n * visit() will walk through an AST using a depth-first traversal, calling\n * the visitor's enter function at each node in the traversal, and calling the\n * leave function after visiting that node and all of its child nodes.\n *\n * By returning different values from the enter and leave functions, the\n * behavior of the visitor can be altered, including skipping over a sub-tree of\n * the AST (by returning false), editing the AST by returning a value or null\n * to remove the value, or to stop the whole traversal by returning BREAK.\n *\n * When using visit() to edit an AST, the original AST will not be modified, and\n * a new version of the AST with the changes applied will be returned from the\n * visit function.\n *\n *     const editedAST = visit(ast, {\n *       enter(node, key, parent, path, ancestors) {\n *         // @return\n *         //   undefined: no action\n *         //   false: skip visiting this node\n *         //   visitor.BREAK: stop visiting altogether\n *         //   null: delete this node\n *         //   any value: replace this node with the returned value\n *       },\n *       leave(node, key, parent, path, ancestors) {\n *         // @return\n *         //   undefined: no action\n *         //   false: no action\n *         //   visitor.BREAK: stop visiting altogether\n *         //   null: delete this node\n *         //   any value: replace this node with the returned value\n *       }\n *     });\n *\n * Alternatively to providing enter() and leave() functions, a visitor can\n * instead provide functions named the same as the kinds of AST nodes, or\n * enter/leave visitors at a named key, leading to four permutations of the\n * visitor API:\n *\n * 1) Named visitors triggered when entering a node of a specific kind.\n *\n *     visit(ast, {\n *       Kind(node) {\n *         // enter the \"Kind\" node\n *       }\n *     })\n *\n * 2) Named visitors that trigger upon entering and leaving a node of\n *    a specific kind.\n *\n *     visit(ast, {\n *       Kind: {\n *         enter(node) {\n *           // enter the \"Kind\" node\n *         }\n *         leave(node) {\n *           // leave the \"Kind\" node\n *         }\n *       }\n *     })\n *\n * 3) Generic visitors that trigger upon entering and leaving any node.\n *\n *     visit(ast, {\n *       enter(node) {\n *         // enter any node\n *       },\n *       leave(node) {\n *         // leave any node\n *       }\n *     })\n *\n * 4) Parallel visitors for entering and leaving nodes of a specific kind.\n *\n *     visit(ast, {\n *       enter: {\n *         Kind(node) {\n *           // enter the \"Kind\" node\n *         }\n *       },\n *       leave: {\n *         Kind(node) {\n *           // leave the \"Kind\" node\n *         }\n *       }\n *     })\n */\n\nexports.BREAK = BREAK;\n\nfunction visit(root, visitor) {\n  var visitorKeys = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : QueryDocumentKeys;\n\n  /* eslint-disable no-undef-init */\n  var stack = undefined;\n  var inArray = Array.isArray(root);\n  var keys = [root];\n  var index = -1;\n  var edits = [];\n  var node = undefined;\n  var key = undefined;\n  var parent = undefined;\n  var path = [];\n  var ancestors = [];\n  var newRoot = root;\n  /* eslint-enable no-undef-init */\n\n  do {\n    index++;\n    var isLeaving = index === keys.length;\n    var isEdited = isLeaving && edits.length !== 0;\n\n    if (isLeaving) {\n      key = ancestors.length === 0 ? undefined : path[path.length - 1];\n      node = parent;\n      parent = ancestors.pop();\n\n      if (isEdited) {\n        if (inArray) {\n          node = node.slice();\n        } else {\n          var clone = {};\n\n          for (var _i2 = 0, _Object$keys2 = Object.keys(node); _i2 < _Object$keys2.length; _i2++) {\n            var k = _Object$keys2[_i2];\n            clone[k] = node[k];\n          }\n\n          node = clone;\n        }\n\n        var editOffset = 0;\n\n        for (var ii = 0; ii < edits.length; ii++) {\n          var editKey = edits[ii][0];\n          var editValue = edits[ii][1];\n\n          if (inArray) {\n            editKey -= editOffset;\n          }\n\n          if (inArray && editValue === null) {\n            node.splice(editKey, 1);\n            editOffset++;\n          } else {\n            node[editKey] = editValue;\n          }\n        }\n      }\n\n      index = stack.index;\n      keys = stack.keys;\n      edits = stack.edits;\n      inArray = stack.inArray;\n      stack = stack.prev;\n    } else {\n      key = parent ? inArray ? index : keys[index] : undefined;\n      node = parent ? parent[key] : newRoot;\n\n      if (node === null || node === undefined) {\n        continue;\n      }\n\n      if (parent) {\n        path.push(key);\n      }\n    }\n\n    var result = void 0;\n\n    if (!Array.isArray(node)) {\n      if (!(0, _ast.isNode)(node)) {\n        throw new Error(\"Invalid AST Node: \".concat((0, _inspect.default)(node), \".\"));\n      }\n\n      var visitFn = getVisitFn(visitor, node.kind, isLeaving);\n\n      if (visitFn) {\n        result = visitFn.call(visitor, node, key, parent, path, ancestors);\n\n        if (result === BREAK) {\n          break;\n        }\n\n        if (result === false) {\n          if (!isLeaving) {\n            path.pop();\n            continue;\n          }\n        } else if (result !== undefined) {\n          edits.push([key, result]);\n\n          if (!isLeaving) {\n            if ((0, _ast.isNode)(result)) {\n              node = result;\n            } else {\n              path.pop();\n              continue;\n            }\n          }\n        }\n      }\n    }\n\n    if (result === undefined && isEdited) {\n      edits.push([key, node]);\n    }\n\n    if (isLeaving) {\n      path.pop();\n    } else {\n      var _visitorKeys$node$kin;\n\n      stack = {\n        inArray: inArray,\n        index: index,\n        keys: keys,\n        edits: edits,\n        prev: stack\n      };\n      inArray = Array.isArray(node);\n      keys = inArray ? node : (_visitorKeys$node$kin = visitorKeys[node.kind]) !== null && _visitorKeys$node$kin !== void 0 ? _visitorKeys$node$kin : [];\n      index = -1;\n      edits = [];\n\n      if (parent) {\n        ancestors.push(parent);\n      }\n\n      parent = node;\n    }\n  } while (stack !== undefined);\n\n  if (edits.length !== 0) {\n    newRoot = edits[edits.length - 1][1];\n  }\n\n  return newRoot;\n}\n/**\n * Creates a new visitor instance which delegates to many visitors to run in\n * parallel. Each visitor will be visited for each node before moving on.\n *\n * If a prior visitor edits a node, no following visitors will see that node.\n */\n\n\nfunction visitInParallel(visitors) {\n  var skipping = new Array(visitors.length);\n  return {\n    enter: function enter(node) {\n      for (var i = 0; i < visitors.length; i++) {\n        if (skipping[i] == null) {\n          var fn = getVisitFn(visitors[i], node.kind,\n          /* isLeaving */\n          false);\n\n          if (fn) {\n            var result = fn.apply(visitors[i], arguments);\n\n            if (result === false) {\n              skipping[i] = node;\n            } else if (result === BREAK) {\n              skipping[i] = BREAK;\n            } else if (result !== undefined) {\n              return result;\n            }\n          }\n        }\n      }\n    },\n    leave: function leave(node) {\n      for (var i = 0; i < visitors.length; i++) {\n        if (skipping[i] == null) {\n          var fn = getVisitFn(visitors[i], node.kind,\n          /* isLeaving */\n          true);\n\n          if (fn) {\n            var result = fn.apply(visitors[i], arguments);\n\n            if (result === BREAK) {\n              skipping[i] = BREAK;\n            } else if (result !== undefined && result !== false) {\n              return result;\n            }\n          }\n        } else if (skipping[i] === node) {\n          skipping[i] = null;\n        }\n      }\n    }\n  };\n}\n/**\n * Given a visitor instance, if it is leaving or not, and a node kind, return\n * the function the visitor runtime should call.\n */\n\n\nfunction getVisitFn(visitor, kind, isLeaving) {\n  var kindVisitor = visitor[kind];\n\n  if (kindVisitor) {\n    if (!isLeaving && typeof kindVisitor === 'function') {\n      // { Kind() {} }\n      return kindVisitor;\n    }\n\n    var kindSpecificVisitor = isLeaving ? kindVisitor.leave : kindVisitor.enter;\n\n    if (typeof kindSpecificVisitor === 'function') {\n      // { Kind: { enter() {}, leave() {} } }\n      return kindSpecificVisitor;\n    }\n  } else {\n    var specificVisitor = isLeaving ? visitor.leave : visitor.enter;\n\n    if (specificVisitor) {\n      if (typeof specificVisitor === 'function') {\n        // { enter() {}, leave() {} }\n        return specificVisitor;\n      }\n\n      var specificKindVisitor = specificVisitor[kind];\n\n      if (typeof specificKindVisitor === 'function') {\n        // { enter: { Kind() {} }, leave: { Kind() {} } }\n        return specificKindVisitor;\n      }\n    }\n  }\n}\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SYMBOL_TO_STRING_TAG = exports.SYMBOL_ASYNC_ITERATOR = exports.SYMBOL_ITERATOR = void 0;\n// In ES2015 (or a polyfilled) environment, this will be Symbol.iterator\n// istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\nvar SYMBOL_ITERATOR = typeof Symbol === 'function' && Symbol.iterator != null ? Symbol.iterator : '@@iterator'; // In ES2017 (or a polyfilled) environment, this will be Symbol.asyncIterator\n// istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\n\nexports.SYMBOL_ITERATOR = SYMBOL_ITERATOR;\nvar SYMBOL_ASYNC_ITERATOR = typeof Symbol === 'function' && Symbol.asyncIterator != null ? Symbol.asyncIterator : '@@asyncIterator'; // istanbul ignore next (See: 'https://github.com/graphql/graphql-js/issues/2317')\n\nexports.SYMBOL_ASYNC_ITERATOR = SYMBOL_ASYNC_ITERATOR;\nvar SYMBOL_TO_STRING_TAG = typeof Symbol === 'function' && Symbol.toStringTag != null ? Symbol.toStringTag : '@@toStringTag';\nexports.SYMBOL_TO_STRING_TAG = SYMBOL_TO_STRING_TAG;\n","var hash = exports;\n\nhash.utils = require('./hash/utils');\nhash.common = require('./hash/common');\nhash.sha = require('./hash/sha');\nhash.ripemd = require('./hash/ripemd');\nhash.hmac = require('./hash/hmac');\n\n// Proxy hash functions to the main object\nhash.sha1 = hash.sha.sha1;\nhash.sha256 = hash.sha.sha256;\nhash.sha224 = hash.sha.sha224;\nhash.sha384 = hash.sha.sha384;\nhash.sha512 = hash.sha.sha512;\nhash.ripemd160 = hash.ripemd.ripemd160;\n","'use strict';\n\nvar utils = require('./utils');\nvar assert = require('minimalistic-assert');\n\nfunction BlockHash() {\n  this.pending = null;\n  this.pendingTotal = 0;\n  this.blockSize = this.constructor.blockSize;\n  this.outSize = this.constructor.outSize;\n  this.hmacStrength = this.constructor.hmacStrength;\n  this.padLength = this.constructor.padLength / 8;\n  this.endian = 'big';\n\n  this._delta8 = this.blockSize / 8;\n  this._delta32 = this.blockSize / 32;\n}\nexports.BlockHash = BlockHash;\n\nBlockHash.prototype.update = function update(msg, enc) {\n  // Convert message to array, pad it, and join into 32bit blocks\n  msg = utils.toArray(msg, enc);\n  if (!this.pending)\n    this.pending = msg;\n  else\n    this.pending = this.pending.concat(msg);\n  this.pendingTotal += msg.length;\n\n  // Enough data, try updating\n  if (this.pending.length >= this._delta8) {\n    msg = this.pending;\n\n    // Process pending data in blocks\n    var r = msg.length % this._delta8;\n    this.pending = msg.slice(msg.length - r, msg.length);\n    if (this.pending.length === 0)\n      this.pending = null;\n\n    msg = utils.join32(msg, 0, msg.length - r, this.endian);\n    for (var i = 0; i < msg.length; i += this._delta32)\n      this._update(msg, i, i + this._delta32);\n  }\n\n  return this;\n};\n\nBlockHash.prototype.digest = function digest(enc) {\n  this.update(this._pad());\n  assert(this.pending === null);\n\n  return this._digest(enc);\n};\n\nBlockHash.prototype._pad = function pad() {\n  var len = this.pendingTotal;\n  var bytes = this._delta8;\n  var k = bytes - ((len + this.padLength) % bytes);\n  var res = new Array(k + this.padLength);\n  res[0] = 0x80;\n  for (var i = 1; i < k; i++)\n    res[i] = 0;\n\n  // Append length\n  len <<= 3;\n  if (this.endian === 'big') {\n    for (var t = 8; t < this.padLength; t++)\n      res[i++] = 0;\n\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = (len >>> 24) & 0xff;\n    res[i++] = (len >>> 16) & 0xff;\n    res[i++] = (len >>> 8) & 0xff;\n    res[i++] = len & 0xff;\n  } else {\n    res[i++] = len & 0xff;\n    res[i++] = (len >>> 8) & 0xff;\n    res[i++] = (len >>> 16) & 0xff;\n    res[i++] = (len >>> 24) & 0xff;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n    res[i++] = 0;\n\n    for (t = 8; t < this.padLength; t++)\n      res[i++] = 0;\n  }\n\n  return res;\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar assert = require('minimalistic-assert');\n\nfunction Hmac(hash, key, enc) {\n  if (!(this instanceof Hmac))\n    return new Hmac(hash, key, enc);\n  this.Hash = hash;\n  this.blockSize = hash.blockSize / 8;\n  this.outSize = hash.outSize / 8;\n  this.inner = null;\n  this.outer = null;\n\n  this._init(utils.toArray(key, enc));\n}\nmodule.exports = Hmac;\n\nHmac.prototype._init = function init(key) {\n  // Shorten key, if needed\n  if (key.length > this.blockSize)\n    key = new this.Hash().update(key).digest();\n  assert(key.length <= this.blockSize);\n\n  // Add padding to key\n  for (var i = key.length; i < this.blockSize; i++)\n    key.push(0);\n\n  for (i = 0; i < key.length; i++)\n    key[i] ^= 0x36;\n  this.inner = new this.Hash().update(key);\n\n  // 0x36 ^ 0x5c = 0x6a\n  for (i = 0; i < key.length; i++)\n    key[i] ^= 0x6a;\n  this.outer = new this.Hash().update(key);\n};\n\nHmac.prototype.update = function update(msg, enc) {\n  this.inner.update(msg, enc);\n  return this;\n};\n\nHmac.prototype.digest = function digest(enc) {\n  this.outer.update(this.inner.digest());\n  return this.outer.digest(enc);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar common = require('./common');\n\nvar rotl32 = utils.rotl32;\nvar sum32 = utils.sum32;\nvar sum32_3 = utils.sum32_3;\nvar sum32_4 = utils.sum32_4;\nvar BlockHash = common.BlockHash;\n\nfunction RIPEMD160() {\n  if (!(this instanceof RIPEMD160))\n    return new RIPEMD160();\n\n  BlockHash.call(this);\n\n  this.h = [ 0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0 ];\n  this.endian = 'little';\n}\nutils.inherits(RIPEMD160, BlockHash);\nexports.ripemd160 = RIPEMD160;\n\nRIPEMD160.blockSize = 512;\nRIPEMD160.outSize = 160;\nRIPEMD160.hmacStrength = 192;\nRIPEMD160.padLength = 64;\n\nRIPEMD160.prototype._update = function update(msg, start) {\n  var A = this.h[0];\n  var B = this.h[1];\n  var C = this.h[2];\n  var D = this.h[3];\n  var E = this.h[4];\n  var Ah = A;\n  var Bh = B;\n  var Ch = C;\n  var Dh = D;\n  var Eh = E;\n  for (var j = 0; j < 80; j++) {\n    var T = sum32(\n      rotl32(\n        sum32_4(A, f(j, B, C, D), msg[r[j] + start], K(j)),\n        s[j]),\n      E);\n    A = E;\n    E = D;\n    D = rotl32(C, 10);\n    C = B;\n    B = T;\n    T = sum32(\n      rotl32(\n        sum32_4(Ah, f(79 - j, Bh, Ch, Dh), msg[rh[j] + start], Kh(j)),\n        sh[j]),\n      Eh);\n    Ah = Eh;\n    Eh = Dh;\n    Dh = rotl32(Ch, 10);\n    Ch = Bh;\n    Bh = T;\n  }\n  T = sum32_3(this.h[1], C, Dh);\n  this.h[1] = sum32_3(this.h[2], D, Eh);\n  this.h[2] = sum32_3(this.h[3], E, Ah);\n  this.h[3] = sum32_3(this.h[4], A, Bh);\n  this.h[4] = sum32_3(this.h[0], B, Ch);\n  this.h[0] = T;\n};\n\nRIPEMD160.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'little');\n  else\n    return utils.split32(this.h, 'little');\n};\n\nfunction f(j, x, y, z) {\n  if (j <= 15)\n    return x ^ y ^ z;\n  else if (j <= 31)\n    return (x & y) | ((~x) & z);\n  else if (j <= 47)\n    return (x | (~y)) ^ z;\n  else if (j <= 63)\n    return (x & z) | (y & (~z));\n  else\n    return x ^ (y | (~z));\n}\n\nfunction K(j) {\n  if (j <= 15)\n    return 0x00000000;\n  else if (j <= 31)\n    return 0x5a827999;\n  else if (j <= 47)\n    return 0x6ed9eba1;\n  else if (j <= 63)\n    return 0x8f1bbcdc;\n  else\n    return 0xa953fd4e;\n}\n\nfunction Kh(j) {\n  if (j <= 15)\n    return 0x50a28be6;\n  else if (j <= 31)\n    return 0x5c4dd124;\n  else if (j <= 47)\n    return 0x6d703ef3;\n  else if (j <= 63)\n    return 0x7a6d76e9;\n  else\n    return 0x00000000;\n}\n\nvar r = [\n  0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15,\n  7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n  3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12,\n  1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2,\n  4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13\n];\n\nvar rh = [\n  5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12,\n  6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2,\n  15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13,\n  8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14,\n  12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11\n];\n\nvar s = [\n  11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8,\n  7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12,\n  11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5,\n  11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12,\n  9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6\n];\n\nvar sh = [\n  8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6,\n  9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11,\n  9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5,\n  15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8,\n  8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11\n];\n","'use strict';\n\nexports.sha1 = require('./sha/1');\nexports.sha224 = require('./sha/224');\nexports.sha256 = require('./sha/256');\nexports.sha384 = require('./sha/384');\nexports.sha512 = require('./sha/512');\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar shaCommon = require('./common');\n\nvar rotl32 = utils.rotl32;\nvar sum32 = utils.sum32;\nvar sum32_5 = utils.sum32_5;\nvar ft_1 = shaCommon.ft_1;\nvar BlockHash = common.BlockHash;\n\nvar sha1_K = [\n  0x5A827999, 0x6ED9EBA1,\n  0x8F1BBCDC, 0xCA62C1D6\n];\n\nfunction SHA1() {\n  if (!(this instanceof SHA1))\n    return new SHA1();\n\n  BlockHash.call(this);\n  this.h = [\n    0x67452301, 0xefcdab89, 0x98badcfe,\n    0x10325476, 0xc3d2e1f0 ];\n  this.W = new Array(80);\n}\n\nutils.inherits(SHA1, BlockHash);\nmodule.exports = SHA1;\n\nSHA1.blockSize = 512;\nSHA1.outSize = 160;\nSHA1.hmacStrength = 80;\nSHA1.padLength = 64;\n\nSHA1.prototype._update = function _update(msg, start) {\n  var W = this.W;\n\n  for (var i = 0; i < 16; i++)\n    W[i] = msg[start + i];\n\n  for(; i < W.length; i++)\n    W[i] = rotl32(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16], 1);\n\n  var a = this.h[0];\n  var b = this.h[1];\n  var c = this.h[2];\n  var d = this.h[3];\n  var e = this.h[4];\n\n  for (i = 0; i < W.length; i++) {\n    var s = ~~(i / 20);\n    var t = sum32_5(rotl32(a, 5), ft_1(s, b, c, d), e, W[i], sha1_K[s]);\n    e = d;\n    d = c;\n    c = rotl32(b, 30);\n    b = a;\n    a = t;\n  }\n\n  this.h[0] = sum32(this.h[0], a);\n  this.h[1] = sum32(this.h[1], b);\n  this.h[2] = sum32(this.h[2], c);\n  this.h[3] = sum32(this.h[3], d);\n  this.h[4] = sum32(this.h[4], e);\n};\n\nSHA1.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar SHA256 = require('./256');\n\nfunction SHA224() {\n  if (!(this instanceof SHA224))\n    return new SHA224();\n\n  SHA256.call(this);\n  this.h = [\n    0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939,\n    0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4 ];\n}\nutils.inherits(SHA224, SHA256);\nmodule.exports = SHA224;\n\nSHA224.blockSize = 512;\nSHA224.outSize = 224;\nSHA224.hmacStrength = 192;\nSHA224.padLength = 64;\n\nSHA224.prototype._digest = function digest(enc) {\n  // Just truncate output\n  if (enc === 'hex')\n    return utils.toHex32(this.h.slice(0, 7), 'big');\n  else\n    return utils.split32(this.h.slice(0, 7), 'big');\n};\n\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar shaCommon = require('./common');\nvar assert = require('minimalistic-assert');\n\nvar sum32 = utils.sum32;\nvar sum32_4 = utils.sum32_4;\nvar sum32_5 = utils.sum32_5;\nvar ch32 = shaCommon.ch32;\nvar maj32 = shaCommon.maj32;\nvar s0_256 = shaCommon.s0_256;\nvar s1_256 = shaCommon.s1_256;\nvar g0_256 = shaCommon.g0_256;\nvar g1_256 = shaCommon.g1_256;\n\nvar BlockHash = common.BlockHash;\n\nvar sha256_K = [\n  0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,\n  0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n  0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n  0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n  0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n  0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n  0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,\n  0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n  0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n  0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n  0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,\n  0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n  0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,\n  0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n  0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n  0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n];\n\nfunction SHA256() {\n  if (!(this instanceof SHA256))\n    return new SHA256();\n\n  BlockHash.call(this);\n  this.h = [\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a,\n    0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19\n  ];\n  this.k = sha256_K;\n  this.W = new Array(64);\n}\nutils.inherits(SHA256, BlockHash);\nmodule.exports = SHA256;\n\nSHA256.blockSize = 512;\nSHA256.outSize = 256;\nSHA256.hmacStrength = 192;\nSHA256.padLength = 64;\n\nSHA256.prototype._update = function _update(msg, start) {\n  var W = this.W;\n\n  for (var i = 0; i < 16; i++)\n    W[i] = msg[start + i];\n  for (; i < W.length; i++)\n    W[i] = sum32_4(g1_256(W[i - 2]), W[i - 7], g0_256(W[i - 15]), W[i - 16]);\n\n  var a = this.h[0];\n  var b = this.h[1];\n  var c = this.h[2];\n  var d = this.h[3];\n  var e = this.h[4];\n  var f = this.h[5];\n  var g = this.h[6];\n  var h = this.h[7];\n\n  assert(this.k.length === W.length);\n  for (i = 0; i < W.length; i++) {\n    var T1 = sum32_5(h, s1_256(e), ch32(e, f, g), this.k[i], W[i]);\n    var T2 = sum32(s0_256(a), maj32(a, b, c));\n    h = g;\n    g = f;\n    f = e;\n    e = sum32(d, T1);\n    d = c;\n    c = b;\n    b = a;\n    a = sum32(T1, T2);\n  }\n\n  this.h[0] = sum32(this.h[0], a);\n  this.h[1] = sum32(this.h[1], b);\n  this.h[2] = sum32(this.h[2], c);\n  this.h[3] = sum32(this.h[3], d);\n  this.h[4] = sum32(this.h[4], e);\n  this.h[5] = sum32(this.h[5], f);\n  this.h[6] = sum32(this.h[6], g);\n  this.h[7] = sum32(this.h[7], h);\n};\n\nSHA256.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n","'use strict';\n\nvar utils = require('../utils');\n\nvar SHA512 = require('./512');\n\nfunction SHA384() {\n  if (!(this instanceof SHA384))\n    return new SHA384();\n\n  SHA512.call(this);\n  this.h = [\n    0xcbbb9d5d, 0xc1059ed8,\n    0x629a292a, 0x367cd507,\n    0x9159015a, 0x3070dd17,\n    0x152fecd8, 0xf70e5939,\n    0x67332667, 0xffc00b31,\n    0x8eb44a87, 0x68581511,\n    0xdb0c2e0d, 0x64f98fa7,\n    0x47b5481d, 0xbefa4fa4 ];\n}\nutils.inherits(SHA384, SHA512);\nmodule.exports = SHA384;\n\nSHA384.blockSize = 1024;\nSHA384.outSize = 384;\nSHA384.hmacStrength = 192;\nSHA384.padLength = 128;\n\nSHA384.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h.slice(0, 12), 'big');\n  else\n    return utils.split32(this.h.slice(0, 12), 'big');\n};\n","'use strict';\n\nvar utils = require('../utils');\nvar common = require('../common');\nvar assert = require('minimalistic-assert');\n\nvar rotr64_hi = utils.rotr64_hi;\nvar rotr64_lo = utils.rotr64_lo;\nvar shr64_hi = utils.shr64_hi;\nvar shr64_lo = utils.shr64_lo;\nvar sum64 = utils.sum64;\nvar sum64_hi = utils.sum64_hi;\nvar sum64_lo = utils.sum64_lo;\nvar sum64_4_hi = utils.sum64_4_hi;\nvar sum64_4_lo = utils.sum64_4_lo;\nvar sum64_5_hi = utils.sum64_5_hi;\nvar sum64_5_lo = utils.sum64_5_lo;\n\nvar BlockHash = common.BlockHash;\n\nvar sha512_K = [\n  0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd,\n  0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n  0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019,\n  0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n  0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe,\n  0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n  0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1,\n  0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n  0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3,\n  0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n  0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483,\n  0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n  0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210,\n  0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n  0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725,\n  0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n  0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926,\n  0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n  0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8,\n  0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n  0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001,\n  0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n  0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910,\n  0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n  0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53,\n  0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n  0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb,\n  0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n  0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60,\n  0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n  0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9,\n  0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n  0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207,\n  0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n  0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6,\n  0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n  0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493,\n  0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n  0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a,\n  0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817\n];\n\nfunction SHA512() {\n  if (!(this instanceof SHA512))\n    return new SHA512();\n\n  BlockHash.call(this);\n  this.h = [\n    0x6a09e667, 0xf3bcc908,\n    0xbb67ae85, 0x84caa73b,\n    0x3c6ef372, 0xfe94f82b,\n    0xa54ff53a, 0x5f1d36f1,\n    0x510e527f, 0xade682d1,\n    0x9b05688c, 0x2b3e6c1f,\n    0x1f83d9ab, 0xfb41bd6b,\n    0x5be0cd19, 0x137e2179 ];\n  this.k = sha512_K;\n  this.W = new Array(160);\n}\nutils.inherits(SHA512, BlockHash);\nmodule.exports = SHA512;\n\nSHA512.blockSize = 1024;\nSHA512.outSize = 512;\nSHA512.hmacStrength = 192;\nSHA512.padLength = 128;\n\nSHA512.prototype._prepareBlock = function _prepareBlock(msg, start) {\n  var W = this.W;\n\n  // 32 x 32bit words\n  for (var i = 0; i < 32; i++)\n    W[i] = msg[start + i];\n  for (; i < W.length; i += 2) {\n    var c0_hi = g1_512_hi(W[i - 4], W[i - 3]);  // i - 2\n    var c0_lo = g1_512_lo(W[i - 4], W[i - 3]);\n    var c1_hi = W[i - 14];  // i - 7\n    var c1_lo = W[i - 13];\n    var c2_hi = g0_512_hi(W[i - 30], W[i - 29]);  // i - 15\n    var c2_lo = g0_512_lo(W[i - 30], W[i - 29]);\n    var c3_hi = W[i - 32];  // i - 16\n    var c3_lo = W[i - 31];\n\n    W[i] = sum64_4_hi(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo);\n    W[i + 1] = sum64_4_lo(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo);\n  }\n};\n\nSHA512.prototype._update = function _update(msg, start) {\n  this._prepareBlock(msg, start);\n\n  var W = this.W;\n\n  var ah = this.h[0];\n  var al = this.h[1];\n  var bh = this.h[2];\n  var bl = this.h[3];\n  var ch = this.h[4];\n  var cl = this.h[5];\n  var dh = this.h[6];\n  var dl = this.h[7];\n  var eh = this.h[8];\n  var el = this.h[9];\n  var fh = this.h[10];\n  var fl = this.h[11];\n  var gh = this.h[12];\n  var gl = this.h[13];\n  var hh = this.h[14];\n  var hl = this.h[15];\n\n  assert(this.k.length === W.length);\n  for (var i = 0; i < W.length; i += 2) {\n    var c0_hi = hh;\n    var c0_lo = hl;\n    var c1_hi = s1_512_hi(eh, el);\n    var c1_lo = s1_512_lo(eh, el);\n    var c2_hi = ch64_hi(eh, el, fh, fl, gh, gl);\n    var c2_lo = ch64_lo(eh, el, fh, fl, gh, gl);\n    var c3_hi = this.k[i];\n    var c3_lo = this.k[i + 1];\n    var c4_hi = W[i];\n    var c4_lo = W[i + 1];\n\n    var T1_hi = sum64_5_hi(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo,\n      c4_hi, c4_lo);\n    var T1_lo = sum64_5_lo(\n      c0_hi, c0_lo,\n      c1_hi, c1_lo,\n      c2_hi, c2_lo,\n      c3_hi, c3_lo,\n      c4_hi, c4_lo);\n\n    c0_hi = s0_512_hi(ah, al);\n    c0_lo = s0_512_lo(ah, al);\n    c1_hi = maj64_hi(ah, al, bh, bl, ch, cl);\n    c1_lo = maj64_lo(ah, al, bh, bl, ch, cl);\n\n    var T2_hi = sum64_hi(c0_hi, c0_lo, c1_hi, c1_lo);\n    var T2_lo = sum64_lo(c0_hi, c0_lo, c1_hi, c1_lo);\n\n    hh = gh;\n    hl = gl;\n\n    gh = fh;\n    gl = fl;\n\n    fh = eh;\n    fl = el;\n\n    eh = sum64_hi(dh, dl, T1_hi, T1_lo);\n    el = sum64_lo(dl, dl, T1_hi, T1_lo);\n\n    dh = ch;\n    dl = cl;\n\n    ch = bh;\n    cl = bl;\n\n    bh = ah;\n    bl = al;\n\n    ah = sum64_hi(T1_hi, T1_lo, T2_hi, T2_lo);\n    al = sum64_lo(T1_hi, T1_lo, T2_hi, T2_lo);\n  }\n\n  sum64(this.h, 0, ah, al);\n  sum64(this.h, 2, bh, bl);\n  sum64(this.h, 4, ch, cl);\n  sum64(this.h, 6, dh, dl);\n  sum64(this.h, 8, eh, el);\n  sum64(this.h, 10, fh, fl);\n  sum64(this.h, 12, gh, gl);\n  sum64(this.h, 14, hh, hl);\n};\n\nSHA512.prototype._digest = function digest(enc) {\n  if (enc === 'hex')\n    return utils.toHex32(this.h, 'big');\n  else\n    return utils.split32(this.h, 'big');\n};\n\nfunction ch64_hi(xh, xl, yh, yl, zh) {\n  var r = (xh & yh) ^ ((~xh) & zh);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction ch64_lo(xh, xl, yh, yl, zh, zl) {\n  var r = (xl & yl) ^ ((~xl) & zl);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction maj64_hi(xh, xl, yh, yl, zh) {\n  var r = (xh & yh) ^ (xh & zh) ^ (yh & zh);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction maj64_lo(xh, xl, yh, yl, zh, zl) {\n  var r = (xl & yl) ^ (xl & zl) ^ (yl & zl);\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s0_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 28);\n  var c1_hi = rotr64_hi(xl, xh, 2);  // 34\n  var c2_hi = rotr64_hi(xl, xh, 7);  // 39\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s0_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 28);\n  var c1_lo = rotr64_lo(xl, xh, 2);  // 34\n  var c2_lo = rotr64_lo(xl, xh, 7);  // 39\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s1_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 14);\n  var c1_hi = rotr64_hi(xh, xl, 18);\n  var c2_hi = rotr64_hi(xl, xh, 9);  // 41\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction s1_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 14);\n  var c1_lo = rotr64_lo(xh, xl, 18);\n  var c2_lo = rotr64_lo(xl, xh, 9);  // 41\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g0_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 1);\n  var c1_hi = rotr64_hi(xh, xl, 8);\n  var c2_hi = shr64_hi(xh, xl, 7);\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g0_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 1);\n  var c1_lo = rotr64_lo(xh, xl, 8);\n  var c2_lo = shr64_lo(xh, xl, 7);\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g1_512_hi(xh, xl) {\n  var c0_hi = rotr64_hi(xh, xl, 19);\n  var c1_hi = rotr64_hi(xl, xh, 29);  // 61\n  var c2_hi = shr64_hi(xh, xl, 6);\n\n  var r = c0_hi ^ c1_hi ^ c2_hi;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n\nfunction g1_512_lo(xh, xl) {\n  var c0_lo = rotr64_lo(xh, xl, 19);\n  var c1_lo = rotr64_lo(xl, xh, 29);  // 61\n  var c2_lo = shr64_lo(xh, xl, 6);\n\n  var r = c0_lo ^ c1_lo ^ c2_lo;\n  if (r < 0)\n    r += 0x100000000;\n  return r;\n}\n","'use strict';\n\nvar utils = require('../utils');\nvar rotr32 = utils.rotr32;\n\nfunction ft_1(s, x, y, z) {\n  if (s === 0)\n    return ch32(x, y, z);\n  if (s === 1 || s === 3)\n    return p32(x, y, z);\n  if (s === 2)\n    return maj32(x, y, z);\n}\nexports.ft_1 = ft_1;\n\nfunction ch32(x, y, z) {\n  return (x & y) ^ ((~x) & z);\n}\nexports.ch32 = ch32;\n\nfunction maj32(x, y, z) {\n  return (x & y) ^ (x & z) ^ (y & z);\n}\nexports.maj32 = maj32;\n\nfunction p32(x, y, z) {\n  return x ^ y ^ z;\n}\nexports.p32 = p32;\n\nfunction s0_256(x) {\n  return rotr32(x, 2) ^ rotr32(x, 13) ^ rotr32(x, 22);\n}\nexports.s0_256 = s0_256;\n\nfunction s1_256(x) {\n  return rotr32(x, 6) ^ rotr32(x, 11) ^ rotr32(x, 25);\n}\nexports.s1_256 = s1_256;\n\nfunction g0_256(x) {\n  return rotr32(x, 7) ^ rotr32(x, 18) ^ (x >>> 3);\n}\nexports.g0_256 = g0_256;\n\nfunction g1_256(x) {\n  return rotr32(x, 17) ^ rotr32(x, 19) ^ (x >>> 10);\n}\nexports.g1_256 = g1_256;\n","'use strict';\n\nvar assert = require('minimalistic-assert');\nvar inherits = require('inherits');\n\nexports.inherits = inherits;\n\nfunction isSurrogatePair(msg, i) {\n  if ((msg.charCodeAt(i) & 0xFC00) !== 0xD800) {\n    return false;\n  }\n  if (i < 0 || i + 1 >= msg.length) {\n    return false;\n  }\n  return (msg.charCodeAt(i + 1) & 0xFC00) === 0xDC00;\n}\n\nfunction toArray(msg, enc) {\n  if (Array.isArray(msg))\n    return msg.slice();\n  if (!msg)\n    return [];\n  var res = [];\n  if (typeof msg === 'string') {\n    if (!enc) {\n      // Inspired by stringToUtf8ByteArray() in closure-library by Google\n      // https://github.com/google/closure-library/blob/8598d87242af59aac233270742c8984e2b2bdbe0/closure/goog/crypt/crypt.js#L117-L143\n      // Apache License 2.0\n      // https://github.com/google/closure-library/blob/master/LICENSE\n      var p = 0;\n      for (var i = 0; i < msg.length; i++) {\n        var c = msg.charCodeAt(i);\n        if (c < 128) {\n          res[p++] = c;\n        } else if (c < 2048) {\n          res[p++] = (c >> 6) | 192;\n          res[p++] = (c & 63) | 128;\n        } else if (isSurrogatePair(msg, i)) {\n          c = 0x10000 + ((c & 0x03FF) << 10) + (msg.charCodeAt(++i) & 0x03FF);\n          res[p++] = (c >> 18) | 240;\n          res[p++] = ((c >> 12) & 63) | 128;\n          res[p++] = ((c >> 6) & 63) | 128;\n          res[p++] = (c & 63) | 128;\n        } else {\n          res[p++] = (c >> 12) | 224;\n          res[p++] = ((c >> 6) & 63) | 128;\n          res[p++] = (c & 63) | 128;\n        }\n      }\n    } else if (enc === 'hex') {\n      msg = msg.replace(/[^a-z0-9]+/ig, '');\n      if (msg.length % 2 !== 0)\n        msg = '0' + msg;\n      for (i = 0; i < msg.length; i += 2)\n        res.push(parseInt(msg[i] + msg[i + 1], 16));\n    }\n  } else {\n    for (i = 0; i < msg.length; i++)\n      res[i] = msg[i] | 0;\n  }\n  return res;\n}\nexports.toArray = toArray;\n\nfunction toHex(msg) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++)\n    res += zero2(msg[i].toString(16));\n  return res;\n}\nexports.toHex = toHex;\n\nfunction htonl(w) {\n  var res = (w >>> 24) |\n            ((w >>> 8) & 0xff00) |\n            ((w << 8) & 0xff0000) |\n            ((w & 0xff) << 24);\n  return res >>> 0;\n}\nexports.htonl = htonl;\n\nfunction toHex32(msg, endian) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++) {\n    var w = msg[i];\n    if (endian === 'little')\n      w = htonl(w);\n    res += zero8(w.toString(16));\n  }\n  return res;\n}\nexports.toHex32 = toHex32;\n\nfunction zero2(word) {\n  if (word.length === 1)\n    return '0' + word;\n  else\n    return word;\n}\nexports.zero2 = zero2;\n\nfunction zero8(word) {\n  if (word.length === 7)\n    return '0' + word;\n  else if (word.length === 6)\n    return '00' + word;\n  else if (word.length === 5)\n    return '000' + word;\n  else if (word.length === 4)\n    return '0000' + word;\n  else if (word.length === 3)\n    return '00000' + word;\n  else if (word.length === 2)\n    return '000000' + word;\n  else if (word.length === 1)\n    return '0000000' + word;\n  else\n    return word;\n}\nexports.zero8 = zero8;\n\nfunction join32(msg, start, end, endian) {\n  var len = end - start;\n  assert(len % 4 === 0);\n  var res = new Array(len / 4);\n  for (var i = 0, k = start; i < res.length; i++, k += 4) {\n    var w;\n    if (endian === 'big')\n      w = (msg[k] << 24) | (msg[k + 1] << 16) | (msg[k + 2] << 8) | msg[k + 3];\n    else\n      w = (msg[k + 3] << 24) | (msg[k + 2] << 16) | (msg[k + 1] << 8) | msg[k];\n    res[i] = w >>> 0;\n  }\n  return res;\n}\nexports.join32 = join32;\n\nfunction split32(msg, endian) {\n  var res = new Array(msg.length * 4);\n  for (var i = 0, k = 0; i < msg.length; i++, k += 4) {\n    var m = msg[i];\n    if (endian === 'big') {\n      res[k] = m >>> 24;\n      res[k + 1] = (m >>> 16) & 0xff;\n      res[k + 2] = (m >>> 8) & 0xff;\n      res[k + 3] = m & 0xff;\n    } else {\n      res[k + 3] = m >>> 24;\n      res[k + 2] = (m >>> 16) & 0xff;\n      res[k + 1] = (m >>> 8) & 0xff;\n      res[k] = m & 0xff;\n    }\n  }\n  return res;\n}\nexports.split32 = split32;\n\nfunction rotr32(w, b) {\n  return (w >>> b) | (w << (32 - b));\n}\nexports.rotr32 = rotr32;\n\nfunction rotl32(w, b) {\n  return (w << b) | (w >>> (32 - b));\n}\nexports.rotl32 = rotl32;\n\nfunction sum32(a, b) {\n  return (a + b) >>> 0;\n}\nexports.sum32 = sum32;\n\nfunction sum32_3(a, b, c) {\n  return (a + b + c) >>> 0;\n}\nexports.sum32_3 = sum32_3;\n\nfunction sum32_4(a, b, c, d) {\n  return (a + b + c + d) >>> 0;\n}\nexports.sum32_4 = sum32_4;\n\nfunction sum32_5(a, b, c, d, e) {\n  return (a + b + c + d + e) >>> 0;\n}\nexports.sum32_5 = sum32_5;\n\nfunction sum64(buf, pos, ah, al) {\n  var bh = buf[pos];\n  var bl = buf[pos + 1];\n\n  var lo = (al + bl) >>> 0;\n  var hi = (lo < al ? 1 : 0) + ah + bh;\n  buf[pos] = hi >>> 0;\n  buf[pos + 1] = lo;\n}\nexports.sum64 = sum64;\n\nfunction sum64_hi(ah, al, bh, bl) {\n  var lo = (al + bl) >>> 0;\n  var hi = (lo < al ? 1 : 0) + ah + bh;\n  return hi >>> 0;\n}\nexports.sum64_hi = sum64_hi;\n\nfunction sum64_lo(ah, al, bh, bl) {\n  var lo = al + bl;\n  return lo >>> 0;\n}\nexports.sum64_lo = sum64_lo;\n\nfunction sum64_4_hi(ah, al, bh, bl, ch, cl, dh, dl) {\n  var carry = 0;\n  var lo = al;\n  lo = (lo + bl) >>> 0;\n  carry += lo < al ? 1 : 0;\n  lo = (lo + cl) >>> 0;\n  carry += lo < cl ? 1 : 0;\n  lo = (lo + dl) >>> 0;\n  carry += lo < dl ? 1 : 0;\n\n  var hi = ah + bh + ch + dh + carry;\n  return hi >>> 0;\n}\nexports.sum64_4_hi = sum64_4_hi;\n\nfunction sum64_4_lo(ah, al, bh, bl, ch, cl, dh, dl) {\n  var lo = al + bl + cl + dl;\n  return lo >>> 0;\n}\nexports.sum64_4_lo = sum64_4_lo;\n\nfunction sum64_5_hi(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {\n  var carry = 0;\n  var lo = al;\n  lo = (lo + bl) >>> 0;\n  carry += lo < al ? 1 : 0;\n  lo = (lo + cl) >>> 0;\n  carry += lo < cl ? 1 : 0;\n  lo = (lo + dl) >>> 0;\n  carry += lo < dl ? 1 : 0;\n  lo = (lo + el) >>> 0;\n  carry += lo < el ? 1 : 0;\n\n  var hi = ah + bh + ch + dh + eh + carry;\n  return hi >>> 0;\n}\nexports.sum64_5_hi = sum64_5_hi;\n\nfunction sum64_5_lo(ah, al, bh, bl, ch, cl, dh, dl, eh, el) {\n  var lo = al + bl + cl + dl + el;\n\n  return lo >>> 0;\n}\nexports.sum64_5_lo = sum64_5_lo;\n\nfunction rotr64_hi(ah, al, num) {\n  var r = (al << (32 - num)) | (ah >>> num);\n  return r >>> 0;\n}\nexports.rotr64_hi = rotr64_hi;\n\nfunction rotr64_lo(ah, al, num) {\n  var r = (ah << (32 - num)) | (al >>> num);\n  return r >>> 0;\n}\nexports.rotr64_lo = rotr64_lo;\n\nfunction shr64_hi(ah, al, num) {\n  return ah >>> num;\n}\nexports.shr64_hi = shr64_hi;\n\nfunction shr64_lo(ah, al, num) {\n  var r = (ah << (32 - num)) | (al >>> num);\n  return r >>> 0;\n}\nexports.shr64_lo = shr64_lo;\n","'use strict'\n\nvar COMPATIBLE_ENCODING_PATTERN = /^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i\nvar WS_TRIM_PATTERN = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g\nvar WS_CHAR_PATTERN = /\\s|\\uFEFF|\\xA0/\nvar WS_FOLD_PATTERN = /\\r?\\n[\\x20\\x09]+/g\nvar DELIMITER_PATTERN = /[;,\"]/\nvar WS_DELIMITER_PATTERN = /[;,\"]|\\s/\n\n/**\n * Token character pattern\n * @type {RegExp}\n * @see https://tools.ietf.org/html/rfc7230#section-3.2.6\n */\nvar TOKEN_PATTERN = /^[!#$%&'*+\\-\\.^_`|~\\da-zA-Z]+$/\n\nvar STATE = {\n  IDLE: 1 << 0,\n  URI: 1 << 1,\n  ATTR: 1 << 2,\n}\n\nfunction trim( value ) {\n  return value.replace( WS_TRIM_PATTERN, '' )\n}\n\nfunction hasWhitespace( value ) {\n  return WS_CHAR_PATTERN.test( value )\n}\n\nfunction skipWhitespace( value, offset ) {\n  while( hasWhitespace( value[offset] ) ) {\n    offset++\n  }\n  return offset\n}\n\nfunction needsQuotes( value ) {\n  return WS_DELIMITER_PATTERN.test( value ) ||\n    !TOKEN_PATTERN.test( value )\n}\n\n/**\n * Shallow compares two objects to check if their properties match.\n * @param {object} object1 First object to compare.\n * @param {object} object2 Second object to compare.\n * @returns {boolean} Do the objects have matching properties.\n */\nfunction shallowCompareObjects( object1, object2 ) {\n  return (\n    Object.keys( object1 ).length === Object.keys( object2 ).length &&\n    Object.keys( object1 ).every(\n      ( key ) => key in object2 && object1[ key ] === object2[ key ]\n    )\n  );\n}\n\nclass Link {\n\n  /**\n   * Link\n   * @constructor\n   * @param {String} [value]\n   * @returns {Link}\n   */\n  constructor( value ) {\n\n    /** @type {Array} URI references */\n    this.refs = []\n\n    if( value ) {\n      this.parse( value )\n    }\n\n  }\n\n  /**\n   * Get refs with given relation type\n   * @param {String} value\n   * @returns {Array<Object>}\n   */\n  rel( value ) {\n\n    var links = []\n    var type = value.toLowerCase()\n\n    for( var i = 0; i < this.refs.length; i++ ) {\n      if( typeof this.refs[ i ].rel === 'string' && this.refs[ i ].rel.toLowerCase() === type ) {\n        links.push( this.refs[ i ] )\n      }\n    }\n\n    return links\n\n  }\n\n  /**\n   * Get refs where given attribute has a given value\n   * @param {String} attr\n   * @param {String} value\n   * @returns {Array<Object>}\n   */\n  get( attr, value ) {\n\n    attr = attr.toLowerCase()\n    value = value.toLowerCase()\n\n    var links = []\n\n    for( var i = 0; i < this.refs.length; i++ ) {\n      if( typeof this.refs[ i ][ attr ] === 'string' && this.refs[ i ][ attr ].toLowerCase() === value ) {\n        links.push( this.refs[ i ] )\n      }\n    }\n\n    return links\n\n  }\n\n  /** Sets a reference. */\n  set( link ) {\n    this.refs.push( link )\n    return this\n  }\n\n  /**\n   * Sets a reference if a reference with similar properties isnt already set.\n   */\n  setUnique( link ) {\n\n    if( !this.refs.some(( ref ) => shallowCompareObjects( ref, link )) ) {\n      this.refs.push( link )\n    }\n\n    return this\n\n  }\n\n  has( attr, value ) {\n\n    attr = attr.toLowerCase()\n    value = value.toLowerCase()\n\n    for( var i = 0; i < this.refs.length; i++ ) {\n      if( typeof this.refs[ i ][ attr ] === 'string' && this.refs[ i ][ attr ].toLowerCase() === value ) {\n        return true\n      }\n    }\n\n    return false\n\n  }\n\n  parse( value, offset ) {\n\n    offset = offset || 0\n    value = offset ? value.slice( offset ) : value\n\n    // Trim & unfold folded lines\n    value = trim( value ).replace( WS_FOLD_PATTERN, '' )\n\n    var state = STATE.IDLE\n    var length = value.length\n    var offset = 0\n    var ref = null\n\n    while( offset < length ) {\n      if( state === STATE.IDLE ) {\n        if( hasWhitespace( value[offset] ) ) {\n          offset++\n          continue\n        } else if( value[offset] === '<' ) {\n          if( ref != null ) {\n            ref.rel != null ?\n              this.refs.push( ...Link.expandRelations( ref ) ) :\n              this.refs.push( ref )\n          }\n          var end = value.indexOf( '>', offset )\n          if( end === -1 ) throw new Error( 'Expected end of URI delimiter at offset ' + offset )\n          ref = { uri: value.slice( offset + 1, end ) }\n          // this.refs.push( ref )\n          offset = end\n          state = STATE.URI\n        } else {\n          throw new Error( 'Unexpected character \"' + value[offset] + '\" at offset ' + offset )\n        }\n        offset++\n      } else if( state === STATE.URI ) {\n        if( hasWhitespace( value[offset] ) ) {\n          offset++\n          continue\n        } else if( value[offset] === ';' ) {\n          state = STATE.ATTR\n          offset++\n        } else if( value[offset] === ',' ) {\n          state = STATE.IDLE\n          offset++\n        } else {\n          throw new Error( 'Unexpected character \"' + value[offset] + '\" at offset ' + offset )\n        }\n      } else if( state === STATE.ATTR ) {\n        if( value[offset] ===';' || hasWhitespace( value[offset] ) ) {\n          offset++\n          continue\n        }\n        var end = value.indexOf( '=', offset )\n        if( end === -1 ) end = value.indexOf( ';', offset )\n        if( end === -1 ) end = value.length\n        var attr = trim( value.slice( offset, end ) ).toLowerCase()\n        var attrValue = ''\n        offset = end + 1\n        offset = skipWhitespace( value, offset )\n        if( value[offset] === '\"' ) {\n          offset++\n          while( offset < length ) {\n            if( value[offset] === '\"' ) {\n              offset++; break\n            }\n            if( value[offset] === '\\\\' ) {\n              offset++\n            }\n            attrValue += value[offset]\n            offset++\n          }\n        } else {\n          var end = offset + 1\n          while( !DELIMITER_PATTERN.test( value[end] ) && end < length ) {\n            end++\n          }\n          attrValue = value.slice( offset, end )\n          offset = end\n        }\n        if( ref[ attr ] && Link.isSingleOccurenceAttr( attr ) ) {\n          // Ignore multiples of attributes which may only appear once\n        } else if( attr[ attr.length - 1 ] === '*' ) {\n          ref[ attr ] = Link.parseExtendedValue( attrValue )\n        } else {\n          attrValue = attr === 'type' ?\n            attrValue.toLowerCase() : attrValue\n          if( ref[ attr ] != null ) {\n            if( Array.isArray( ref[ attr ] ) ) {\n              ref[ attr ].push( attrValue )\n            } else {\n              ref[ attr ] = [ ref[ attr ], attrValue ]\n            }\n          } else {\n            ref[ attr ] = attrValue\n          }\n        }\n        switch( value[offset] ) {\n          case ',': state = STATE.IDLE; break\n          case ';': state = STATE.ATTR; break\n        }\n        offset++\n      } else {\n        throw new Error( 'Unknown parser state \"' + state + '\"' )\n      }\n    }\n\n    if( ref != null ) {\n      ref.rel != null ?\n        this.refs.push( ...Link.expandRelations( ref ) ) :\n        this.refs.push( ref )\n    }\n\n    ref = null\n\n    return this\n\n  }\n\n  toString() {\n\n    var refs = []\n    var link = ''\n    var ref = null\n\n    for( var i = 0; i < this.refs.length; i++ ) {\n      ref = this.refs[i]\n      link = Object.keys( this.refs[i] ).reduce( function( link, attr ) {\n        if( attr === 'uri' ) return link\n        return link + '; ' + Link.formatAttribute( attr, ref[ attr ] )\n      }, '<' + ref.uri + '>' )\n      refs.push( link )\n    }\n\n    return refs.join( ', ' )\n\n  }\n\n}\n\n/**\n * Determines whether an encoding can be\n * natively handled with a `Buffer`\n * @param {String} value\n * @returns {Boolean}\n */\nLink.isCompatibleEncoding = function( value ) {\n  return COMPATIBLE_ENCODING_PATTERN.test( value )\n}\n\nLink.parse = function( value, offset ) {\n  return new Link().parse( value, offset )\n}\n\nLink.isSingleOccurenceAttr = function( attr ) {\n  return attr === 'rel' || attr === 'type' || attr === 'media' ||\n    attr === 'title' || attr === 'title*'\n}\n\nLink.isTokenAttr = function( attr ) {\n  return attr === 'rel' || attr === 'type' || attr === 'anchor'\n}\n\nLink.escapeQuotes = function( value ) {\n  return value.replace( /\"/g, '\\\\\"' )\n}\n\nLink.expandRelations = function( ref ) {\n  var rels = ref.rel.split( ' ' )\n  return rels.map( function( rel ) {\n    var value = Object.assign( {}, ref )\n    value.rel = rel\n    return value\n  })\n}\n\n/**\n * Parses an extended value and attempts to decode it\n * @internal\n * @param {String} value\n * @return {Object}\n */\nLink.parseExtendedValue = function( value ) {\n  var parts = /([^']+)?(?:'([^']*)')?(.+)/.exec( value )\n  return {\n    language: parts[2].toLowerCase(),\n    encoding: Link.isCompatibleEncoding( parts[1] ) ?\n      null : parts[1].toLowerCase(),\n    value: Link.isCompatibleEncoding( parts[1] ) ?\n      decodeURIComponent( parts[3] ) : parts[3]\n  }\n}\n\n/**\n * Format a given extended attribute and it's value\n * @param {String} attr\n * @param {Object} data\n * @return {String}\n */\nLink.formatExtendedAttribute = function( attr, data ) {\n\n  var encoding = ( data.encoding || 'utf-8' ).toUpperCase()\n  var language = data.language || 'en'\n\n  var encodedValue = ''\n\n  if( Buffer.isBuffer( data.value ) && Link.isCompatibleEncoding( encoding ) ) {\n    encodedValue = data.value.toString( encoding )\n  } else if( Buffer.isBuffer( data.value ) ) {\n    encodedValue = data.value.toString( 'hex' )\n      .replace( /[0-9a-f]{2}/gi, '%$1' )\n  } else {\n    encodedValue = encodeURIComponent( data.value )\n  }\n\n  return attr + '=' + encoding + '\\'' +\n    language + '\\'' + encodedValue\n\n}\n\n/**\n * Format a given attribute and it's value\n * @param {String} attr\n * @param {String|Object} value\n * @return {String}\n */\nLink.formatAttribute = function( attr, value ) {\n\n  if( Array.isArray( value ) ) {\n    return value.map(( item ) => {\n      return Link.formatAttribute( attr, item )\n    }).join( '; ' )\n  }\n\n  if( attr[ attr.length - 1 ] === '*' || typeof value !== 'string' ) {\n    return Link.formatExtendedAttribute( attr, value )\n  }\n\n  if( Link.isTokenAttr( attr ) ) {\n    value = needsQuotes( value ) ?\n      '\"' + Link.escapeQuotes( value ) + '\"' :\n      Link.escapeQuotes( value )\n  } else if( needsQuotes( value ) ) {\n    value = encodeURIComponent( value )\n    // We don't need to escape <SP> <,> <;> within quotes\n    value = value\n      .replace( /%20/g, ' ' )\n      .replace( /%2C/g, ',' )\n      .replace( /%3B/g, ';' )\n\n    value = '\"' + value + '\"'\n  }\n\n  return attr + '=' + value\n\n}\n\nmodule.exports = Link\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/**\n * MIT License\n * \n * Copyright (c) 2014-present, Lee Byron and other contributors.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in all\n * copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n * SOFTWARE.\n */\nvar DELETE = 'delete';\n\n// Constants describing the size of trie nodes.\nvar SHIFT = 5; // Resulted in best performance after ______?\nvar SIZE = 1 << SHIFT;\nvar MASK = SIZE - 1;\n\n// A consistent shared value representing \"not set\" which equals nothing other\n// than itself, and nothing that could be provided externally.\nvar NOT_SET = {};\n\n// Boolean references, Rough equivalent of `bool &`.\nfunction MakeRef() {\n  return { value: false };\n}\n\nfunction SetRef(ref) {\n  if (ref) {\n    ref.value = true;\n  }\n}\n\n// A function which returns a value representing an \"owner\" for transient writes\n// to tries. The return value will only ever equal itself, and will not equal\n// the return of any subsequent call of this function.\nfunction OwnerID() {}\n\nfunction ensureSize(iter) {\n  if (iter.size === undefined) {\n    iter.size = iter.__iterate(returnTrue);\n  }\n  return iter.size;\n}\n\nfunction wrapIndex(iter, index) {\n  // This implements \"is array index\" which the ECMAString spec defines as:\n  //\n  //     A String property name P is an array index if and only if\n  //     ToString(ToUint32(P)) is equal to P and ToUint32(P) is not equal\n  //     to 2^321.\n  //\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-array-exotic-objects\n  if (typeof index !== 'number') {\n    var uint32Index = index >>> 0; // N >>> 0 is shorthand for ToUint32\n    if ('' + uint32Index !== index || uint32Index === 4294967295) {\n      return NaN;\n    }\n    index = uint32Index;\n  }\n  return index < 0 ? ensureSize(iter) + index : index;\n}\n\nfunction returnTrue() {\n  return true;\n}\n\nfunction wholeSlice(begin, end, size) {\n  return (\n    ((begin === 0 && !isNeg(begin)) ||\n      (size !== undefined && begin <= -size)) &&\n    (end === undefined || (size !== undefined && end >= size))\n  );\n}\n\nfunction resolveBegin(begin, size) {\n  return resolveIndex(begin, size, 0);\n}\n\nfunction resolveEnd(end, size) {\n  return resolveIndex(end, size, size);\n}\n\nfunction resolveIndex(index, size, defaultIndex) {\n  // Sanitize indices using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  return index === undefined\n    ? defaultIndex\n    : isNeg(index)\n    ? size === Infinity\n      ? size\n      : Math.max(0, size + index) | 0\n    : size === undefined || size === index\n    ? index\n    : Math.min(size, index) | 0;\n}\n\nfunction isNeg(value) {\n  // Account for -0 which is negative, but not less than 0.\n  return value < 0 || (value === 0 && 1 / value === -Infinity);\n}\n\nvar IS_COLLECTION_SYMBOL = '@@__IMMUTABLE_ITERABLE__@@';\n\nfunction isCollection(maybeCollection) {\n  return Boolean(maybeCollection && maybeCollection[IS_COLLECTION_SYMBOL]);\n}\n\nvar IS_KEYED_SYMBOL = '@@__IMMUTABLE_KEYED__@@';\n\nfunction isKeyed(maybeKeyed) {\n  return Boolean(maybeKeyed && maybeKeyed[IS_KEYED_SYMBOL]);\n}\n\nvar IS_INDEXED_SYMBOL = '@@__IMMUTABLE_INDEXED__@@';\n\nfunction isIndexed(maybeIndexed) {\n  return Boolean(maybeIndexed && maybeIndexed[IS_INDEXED_SYMBOL]);\n}\n\nfunction isAssociative(maybeAssociative) {\n  return isKeyed(maybeAssociative) || isIndexed(maybeAssociative);\n}\n\nvar Collection = function Collection(value) {\n  return isCollection(value) ? value : Seq(value);\n};\n\nvar KeyedCollection = /*@__PURE__*/(function (Collection) {\n  function KeyedCollection(value) {\n    return isKeyed(value) ? value : KeyedSeq(value);\n  }\n\n  if ( Collection ) KeyedCollection.__proto__ = Collection;\n  KeyedCollection.prototype = Object.create( Collection && Collection.prototype );\n  KeyedCollection.prototype.constructor = KeyedCollection;\n\n  return KeyedCollection;\n}(Collection));\n\nvar IndexedCollection = /*@__PURE__*/(function (Collection) {\n  function IndexedCollection(value) {\n    return isIndexed(value) ? value : IndexedSeq(value);\n  }\n\n  if ( Collection ) IndexedCollection.__proto__ = Collection;\n  IndexedCollection.prototype = Object.create( Collection && Collection.prototype );\n  IndexedCollection.prototype.constructor = IndexedCollection;\n\n  return IndexedCollection;\n}(Collection));\n\nvar SetCollection = /*@__PURE__*/(function (Collection) {\n  function SetCollection(value) {\n    return isCollection(value) && !isAssociative(value) ? value : SetSeq(value);\n  }\n\n  if ( Collection ) SetCollection.__proto__ = Collection;\n  SetCollection.prototype = Object.create( Collection && Collection.prototype );\n  SetCollection.prototype.constructor = SetCollection;\n\n  return SetCollection;\n}(Collection));\n\nCollection.Keyed = KeyedCollection;\nCollection.Indexed = IndexedCollection;\nCollection.Set = SetCollection;\n\nvar IS_SEQ_SYMBOL = '@@__IMMUTABLE_SEQ__@@';\n\nfunction isSeq(maybeSeq) {\n  return Boolean(maybeSeq && maybeSeq[IS_SEQ_SYMBOL]);\n}\n\nvar IS_RECORD_SYMBOL = '@@__IMMUTABLE_RECORD__@@';\n\nfunction isRecord(maybeRecord) {\n  return Boolean(maybeRecord && maybeRecord[IS_RECORD_SYMBOL]);\n}\n\nfunction isImmutable(maybeImmutable) {\n  return isCollection(maybeImmutable) || isRecord(maybeImmutable);\n}\n\nvar IS_ORDERED_SYMBOL = '@@__IMMUTABLE_ORDERED__@@';\n\nfunction isOrdered(maybeOrdered) {\n  return Boolean(maybeOrdered && maybeOrdered[IS_ORDERED_SYMBOL]);\n}\n\nvar ITERATE_KEYS = 0;\nvar ITERATE_VALUES = 1;\nvar ITERATE_ENTRIES = 2;\n\nvar REAL_ITERATOR_SYMBOL = typeof Symbol === 'function' && Symbol.iterator;\nvar FAUX_ITERATOR_SYMBOL = '@@iterator';\n\nvar ITERATOR_SYMBOL = REAL_ITERATOR_SYMBOL || FAUX_ITERATOR_SYMBOL;\n\nvar Iterator = function Iterator(next) {\n  this.next = next;\n};\n\nIterator.prototype.toString = function toString () {\n  return '[Iterator]';\n};\n\nIterator.KEYS = ITERATE_KEYS;\nIterator.VALUES = ITERATE_VALUES;\nIterator.ENTRIES = ITERATE_ENTRIES;\n\nIterator.prototype.inspect = Iterator.prototype.toSource = function () {\n  return this.toString();\n};\nIterator.prototype[ITERATOR_SYMBOL] = function () {\n  return this;\n};\n\nfunction iteratorValue(type, k, v, iteratorResult) {\n  var value = type === 0 ? k : type === 1 ? v : [k, v];\n  iteratorResult\n    ? (iteratorResult.value = value)\n    : (iteratorResult = {\n        value: value,\n        done: false,\n      });\n  return iteratorResult;\n}\n\nfunction iteratorDone() {\n  return { value: undefined, done: true };\n}\n\nfunction hasIterator(maybeIterable) {\n  if (Array.isArray(maybeIterable)) {\n    // IE11 trick as it does not support `Symbol.iterator`\n    return true;\n  }\n\n  return !!getIteratorFn(maybeIterable);\n}\n\nfunction isIterator(maybeIterator) {\n  return maybeIterator && typeof maybeIterator.next === 'function';\n}\n\nfunction getIterator(iterable) {\n  var iteratorFn = getIteratorFn(iterable);\n  return iteratorFn && iteratorFn.call(iterable);\n}\n\nfunction getIteratorFn(iterable) {\n  var iteratorFn =\n    iterable &&\n    ((REAL_ITERATOR_SYMBOL && iterable[REAL_ITERATOR_SYMBOL]) ||\n      iterable[FAUX_ITERATOR_SYMBOL]);\n  if (typeof iteratorFn === 'function') {\n    return iteratorFn;\n  }\n}\n\nfunction isEntriesIterable(maybeIterable) {\n  var iteratorFn = getIteratorFn(maybeIterable);\n  return iteratorFn && iteratorFn === maybeIterable.entries;\n}\n\nfunction isKeysIterable(maybeIterable) {\n  var iteratorFn = getIteratorFn(maybeIterable);\n  return iteratorFn && iteratorFn === maybeIterable.keys;\n}\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isArrayLike(value) {\n  if (Array.isArray(value) || typeof value === 'string') {\n    return true;\n  }\n\n  return (\n    value &&\n    typeof value === 'object' &&\n    Number.isInteger(value.length) &&\n    value.length >= 0 &&\n    (value.length === 0\n      ? // Only {length: 0} is considered Array-like.\n        Object.keys(value).length === 1\n      : // An object is only Array-like if it has a property where the last value\n        // in the array-like may be found (which could be undefined).\n        value.hasOwnProperty(value.length - 1))\n  );\n}\n\nvar Seq = /*@__PURE__*/(function (Collection) {\n  function Seq(value) {\n    return value === undefined || value === null\n      ? emptySequence()\n      : isImmutable(value)\n      ? value.toSeq()\n      : seqFromValue(value);\n  }\n\n  if ( Collection ) Seq.__proto__ = Collection;\n  Seq.prototype = Object.create( Collection && Collection.prototype );\n  Seq.prototype.constructor = Seq;\n\n  Seq.prototype.toSeq = function toSeq () {\n    return this;\n  };\n\n  Seq.prototype.toString = function toString () {\n    return this.__toString('Seq {', '}');\n  };\n\n  Seq.prototype.cacheResult = function cacheResult () {\n    if (!this._cache && this.__iterateUncached) {\n      this._cache = this.entrySeq().toArray();\n      this.size = this._cache.length;\n    }\n    return this;\n  };\n\n  // abstract __iterateUncached(fn, reverse)\n\n  Seq.prototype.__iterate = function __iterate (fn, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      while (i !== size) {\n        var entry = cache[reverse ? size - ++i : i++];\n        if (fn(entry[1], entry[0], this) === false) {\n          break;\n        }\n      }\n      return i;\n    }\n    return this.__iterateUncached(fn, reverse);\n  };\n\n  // abstract __iteratorUncached(type, reverse)\n\n  Seq.prototype.__iterator = function __iterator (type, reverse) {\n    var cache = this._cache;\n    if (cache) {\n      var size = cache.length;\n      var i = 0;\n      return new Iterator(function () {\n        if (i === size) {\n          return iteratorDone();\n        }\n        var entry = cache[reverse ? size - ++i : i++];\n        return iteratorValue(type, entry[0], entry[1]);\n      });\n    }\n    return this.__iteratorUncached(type, reverse);\n  };\n\n  return Seq;\n}(Collection));\n\nvar KeyedSeq = /*@__PURE__*/(function (Seq) {\n  function KeyedSeq(value) {\n    return value === undefined || value === null\n      ? emptySequence().toKeyedSeq()\n      : isCollection(value)\n      ? isKeyed(value)\n        ? value.toSeq()\n        : value.fromEntrySeq()\n      : isRecord(value)\n      ? value.toSeq()\n      : keyedSeqFromValue(value);\n  }\n\n  if ( Seq ) KeyedSeq.__proto__ = Seq;\n  KeyedSeq.prototype = Object.create( Seq && Seq.prototype );\n  KeyedSeq.prototype.constructor = KeyedSeq;\n\n  KeyedSeq.prototype.toKeyedSeq = function toKeyedSeq () {\n    return this;\n  };\n\n  return KeyedSeq;\n}(Seq));\n\nvar IndexedSeq = /*@__PURE__*/(function (Seq) {\n  function IndexedSeq(value) {\n    return value === undefined || value === null\n      ? emptySequence()\n      : isCollection(value)\n      ? isKeyed(value)\n        ? value.entrySeq()\n        : value.toIndexedSeq()\n      : isRecord(value)\n      ? value.toSeq().entrySeq()\n      : indexedSeqFromValue(value);\n  }\n\n  if ( Seq ) IndexedSeq.__proto__ = Seq;\n  IndexedSeq.prototype = Object.create( Seq && Seq.prototype );\n  IndexedSeq.prototype.constructor = IndexedSeq;\n\n  IndexedSeq.of = function of (/*...values*/) {\n    return IndexedSeq(arguments);\n  };\n\n  IndexedSeq.prototype.toIndexedSeq = function toIndexedSeq () {\n    return this;\n  };\n\n  IndexedSeq.prototype.toString = function toString () {\n    return this.__toString('Seq [', ']');\n  };\n\n  return IndexedSeq;\n}(Seq));\n\nvar SetSeq = /*@__PURE__*/(function (Seq) {\n  function SetSeq(value) {\n    return (\n      isCollection(value) && !isAssociative(value) ? value : IndexedSeq(value)\n    ).toSetSeq();\n  }\n\n  if ( Seq ) SetSeq.__proto__ = Seq;\n  SetSeq.prototype = Object.create( Seq && Seq.prototype );\n  SetSeq.prototype.constructor = SetSeq;\n\n  SetSeq.of = function of (/*...values*/) {\n    return SetSeq(arguments);\n  };\n\n  SetSeq.prototype.toSetSeq = function toSetSeq () {\n    return this;\n  };\n\n  return SetSeq;\n}(Seq));\n\nSeq.isSeq = isSeq;\nSeq.Keyed = KeyedSeq;\nSeq.Set = SetSeq;\nSeq.Indexed = IndexedSeq;\n\nSeq.prototype[IS_SEQ_SYMBOL] = true;\n\n// #pragma Root Sequences\n\nvar ArraySeq = /*@__PURE__*/(function (IndexedSeq) {\n  function ArraySeq(array) {\n    this._array = array;\n    this.size = array.length;\n  }\n\n  if ( IndexedSeq ) ArraySeq.__proto__ = IndexedSeq;\n  ArraySeq.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  ArraySeq.prototype.constructor = ArraySeq;\n\n  ArraySeq.prototype.get = function get (index, notSetValue) {\n    return this.has(index) ? this._array[wrapIndex(this, index)] : notSetValue;\n  };\n\n  ArraySeq.prototype.__iterate = function __iterate (fn, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    while (i !== size) {\n      var ii = reverse ? size - ++i : i++;\n      if (fn(array[ii], ii, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  ArraySeq.prototype.__iterator = function __iterator (type, reverse) {\n    var array = this._array;\n    var size = array.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var ii = reverse ? size - ++i : i++;\n      return iteratorValue(type, ii, array[ii]);\n    });\n  };\n\n  return ArraySeq;\n}(IndexedSeq));\n\nvar ObjectSeq = /*@__PURE__*/(function (KeyedSeq) {\n  function ObjectSeq(object) {\n    var keys = Object.keys(object).concat(\n      Object.getOwnPropertySymbols ? Object.getOwnPropertySymbols(object) : []\n    );\n    this._object = object;\n    this._keys = keys;\n    this.size = keys.length;\n  }\n\n  if ( KeyedSeq ) ObjectSeq.__proto__ = KeyedSeq;\n  ObjectSeq.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  ObjectSeq.prototype.constructor = ObjectSeq;\n\n  ObjectSeq.prototype.get = function get (key, notSetValue) {\n    if (notSetValue !== undefined && !this.has(key)) {\n      return notSetValue;\n    }\n    return this._object[key];\n  };\n\n  ObjectSeq.prototype.has = function has (key) {\n    return hasOwnProperty.call(this._object, key);\n  };\n\n  ObjectSeq.prototype.__iterate = function __iterate (fn, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    while (i !== size) {\n      var key = keys[reverse ? size - ++i : i++];\n      if (fn(object[key], key, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  ObjectSeq.prototype.__iterator = function __iterator (type, reverse) {\n    var object = this._object;\n    var keys = this._keys;\n    var size = keys.length;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var key = keys[reverse ? size - ++i : i++];\n      return iteratorValue(type, key, object[key]);\n    });\n  };\n\n  return ObjectSeq;\n}(KeyedSeq));\nObjectSeq.prototype[IS_ORDERED_SYMBOL] = true;\n\nvar CollectionSeq = /*@__PURE__*/(function (IndexedSeq) {\n  function CollectionSeq(collection) {\n    this._collection = collection;\n    this.size = collection.length || collection.size;\n  }\n\n  if ( IndexedSeq ) CollectionSeq.__proto__ = IndexedSeq;\n  CollectionSeq.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  CollectionSeq.prototype.constructor = CollectionSeq;\n\n  CollectionSeq.prototype.__iterateUncached = function __iterateUncached (fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    var iterations = 0;\n    if (isIterator(iterator)) {\n      var step;\n      while (!(step = iterator.next()).done) {\n        if (fn(step.value, iterations++, this) === false) {\n          break;\n        }\n      }\n    }\n    return iterations;\n  };\n\n  CollectionSeq.prototype.__iteratorUncached = function __iteratorUncached (type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var collection = this._collection;\n    var iterator = getIterator(collection);\n    if (!isIterator(iterator)) {\n      return new Iterator(iteratorDone);\n    }\n    var iterations = 0;\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done ? step : iteratorValue(type, iterations++, step.value);\n    });\n  };\n\n  return CollectionSeq;\n}(IndexedSeq));\n\n// # pragma Helper functions\n\nvar EMPTY_SEQ;\n\nfunction emptySequence() {\n  return EMPTY_SEQ || (EMPTY_SEQ = new ArraySeq([]));\n}\n\nfunction keyedSeqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq.fromEntrySeq();\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError(\n    'Expected Array or collection object of [k, v] entries, or keyed object: ' +\n      value\n  );\n}\n\nfunction indexedSeqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return seq;\n  }\n  throw new TypeError(\n    'Expected Array or collection object of values: ' + value\n  );\n}\n\nfunction seqFromValue(value) {\n  var seq = maybeIndexedSeqFromValue(value);\n  if (seq) {\n    return isEntriesIterable(value)\n      ? seq.fromEntrySeq()\n      : isKeysIterable(value)\n      ? seq.toSetSeq()\n      : seq;\n  }\n  if (typeof value === 'object') {\n    return new ObjectSeq(value);\n  }\n  throw new TypeError(\n    'Expected Array or collection object of values, or keyed object: ' + value\n  );\n}\n\nfunction maybeIndexedSeqFromValue(value) {\n  return isArrayLike(value)\n    ? new ArraySeq(value)\n    : hasIterator(value)\n    ? new CollectionSeq(value)\n    : undefined;\n}\n\nvar IS_MAP_SYMBOL = '@@__IMMUTABLE_MAP__@@';\n\nfunction isMap(maybeMap) {\n  return Boolean(maybeMap && maybeMap[IS_MAP_SYMBOL]);\n}\n\nfunction isOrderedMap(maybeOrderedMap) {\n  return isMap(maybeOrderedMap) && isOrdered(maybeOrderedMap);\n}\n\nfunction isValueObject(maybeValue) {\n  return Boolean(\n    maybeValue &&\n      typeof maybeValue.equals === 'function' &&\n      typeof maybeValue.hashCode === 'function'\n  );\n}\n\n/**\n * An extension of the \"same-value\" algorithm as [described for use by ES6 Map\n * and Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map#Key_equality)\n *\n * NaN is considered the same as NaN, however -0 and 0 are considered the same\n * value, which is different from the algorithm described by\n * [`Object.is`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is).\n *\n * This is extended further to allow Objects to describe the values they\n * represent, by way of `valueOf` or `equals` (and `hashCode`).\n *\n * Note: because of this extension, the key equality of Immutable.Map and the\n * value equality of Immutable.Set will differ from ES6 Map and Set.\n *\n * ### Defining custom values\n *\n * The easiest way to describe the value an object represents is by implementing\n * `valueOf`. For example, `Date` represents a value by returning a unix\n * timestamp for `valueOf`:\n *\n *     var date1 = new Date(1234567890000); // Fri Feb 13 2009 ...\n *     var date2 = new Date(1234567890000);\n *     date1.valueOf(); // 1234567890000\n *     assert( date1 !== date2 );\n *     assert( Immutable.is( date1, date2 ) );\n *\n * Note: overriding `valueOf` may have other implications if you use this object\n * where JavaScript expects a primitive, such as implicit string coercion.\n *\n * For more complex types, especially collections, implementing `valueOf` may\n * not be performant. An alternative is to implement `equals` and `hashCode`.\n *\n * `equals` takes another object, presumably of similar type, and returns true\n * if it is equal. Equality is symmetrical, so the same result should be\n * returned if this and the argument are flipped.\n *\n *     assert( a.equals(b) === b.equals(a) );\n *\n * `hashCode` returns a 32bit integer number representing the object which will\n * be used to determine how to store the value object in a Map or Set. You must\n * provide both or neither methods, one must not exist without the other.\n *\n * Also, an important relationship between these methods must be upheld: if two\n * values are equal, they *must* return the same hashCode. If the values are not\n * equal, they might have the same hashCode; this is called a hash collision,\n * and while undesirable for performance reasons, it is acceptable.\n *\n *     if (a.equals(b)) {\n *       assert( a.hashCode() === b.hashCode() );\n *     }\n *\n * All Immutable collections are Value Objects: they implement `equals()`\n * and `hashCode()`.\n */\nfunction is(valueA, valueB) {\n  if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n    return true;\n  }\n  if (!valueA || !valueB) {\n    return false;\n  }\n  if (\n    typeof valueA.valueOf === 'function' &&\n    typeof valueB.valueOf === 'function'\n  ) {\n    valueA = valueA.valueOf();\n    valueB = valueB.valueOf();\n    if (valueA === valueB || (valueA !== valueA && valueB !== valueB)) {\n      return true;\n    }\n    if (!valueA || !valueB) {\n      return false;\n    }\n  }\n  return !!(\n    isValueObject(valueA) &&\n    isValueObject(valueB) &&\n    valueA.equals(valueB)\n  );\n}\n\nvar imul =\n  typeof Math.imul === 'function' && Math.imul(0xffffffff, 2) === -2\n    ? Math.imul\n    : function imul(a, b) {\n        a |= 0; // int\n        b |= 0; // int\n        var c = a & 0xffff;\n        var d = b & 0xffff;\n        // Shift by 0 fixes the sign on the high part.\n        return (c * d + ((((a >>> 16) * d + c * (b >>> 16)) << 16) >>> 0)) | 0; // int\n      };\n\n// v8 has an optimization for storing 31-bit signed numbers.\n// Values which have either 00 or 11 as the high order bits qualify.\n// This function drops the highest order bit in a signed number, maintaining\n// the sign bit.\nfunction smi(i32) {\n  return ((i32 >>> 1) & 0x40000000) | (i32 & 0xbfffffff);\n}\n\nvar defaultValueOf = Object.prototype.valueOf;\n\nfunction hash(o) {\n  if (o == null) {\n    return hashNullish(o);\n  }\n\n  if (typeof o.hashCode === 'function') {\n    // Drop any high bits from accidentally long hash codes.\n    return smi(o.hashCode(o));\n  }\n\n  var v = valueOf(o);\n\n  if (v == null) {\n    return hashNullish(v);\n  }\n\n  switch (typeof v) {\n    case 'boolean':\n      // The hash values for built-in constants are a 1 value for each 5-byte\n      // shift region expect for the first, which encodes the value. This\n      // reduces the odds of a hash collision for these common values.\n      return v ? 0x42108421 : 0x42108420;\n    case 'number':\n      return hashNumber(v);\n    case 'string':\n      return v.length > STRING_HASH_CACHE_MIN_STRLEN\n        ? cachedHashString(v)\n        : hashString(v);\n    case 'object':\n    case 'function':\n      return hashJSObj(v);\n    case 'symbol':\n      return hashSymbol(v);\n    default:\n      if (typeof v.toString === 'function') {\n        return hashString(v.toString());\n      }\n      throw new Error('Value type ' + typeof v + ' cannot be hashed.');\n  }\n}\n\nfunction hashNullish(nullish) {\n  return nullish === null ? 0x42108422 : /* undefined */ 0x42108423;\n}\n\n// Compress arbitrarily large numbers into smi hashes.\nfunction hashNumber(n) {\n  if (n !== n || n === Infinity) {\n    return 0;\n  }\n  var hash = n | 0;\n  if (hash !== n) {\n    hash ^= n * 0xffffffff;\n  }\n  while (n > 0xffffffff) {\n    n /= 0xffffffff;\n    hash ^= n;\n  }\n  return smi(hash);\n}\n\nfunction cachedHashString(string) {\n  var hashed = stringHashCache[string];\n  if (hashed === undefined) {\n    hashed = hashString(string);\n    if (STRING_HASH_CACHE_SIZE === STRING_HASH_CACHE_MAX_SIZE) {\n      STRING_HASH_CACHE_SIZE = 0;\n      stringHashCache = {};\n    }\n    STRING_HASH_CACHE_SIZE++;\n    stringHashCache[string] = hashed;\n  }\n  return hashed;\n}\n\n// http://jsperf.com/hashing-strings\nfunction hashString(string) {\n  // This is the hash from JVM\n  // The hash code for a string is computed as\n  // s[0] * 31 ^ (n - 1) + s[1] * 31 ^ (n - 2) + ... + s[n - 1],\n  // where s[i] is the ith character of the string and n is the length of\n  // the string. We \"mod\" the result to make it between 0 (inclusive) and 2^31\n  // (exclusive) by dropping high bits.\n  var hashed = 0;\n  for (var ii = 0; ii < string.length; ii++) {\n    hashed = (31 * hashed + string.charCodeAt(ii)) | 0;\n  }\n  return smi(hashed);\n}\n\nfunction hashSymbol(sym) {\n  var hashed = symbolMap[sym];\n  if (hashed !== undefined) {\n    return hashed;\n  }\n\n  hashed = nextHash();\n\n  symbolMap[sym] = hashed;\n\n  return hashed;\n}\n\nfunction hashJSObj(obj) {\n  var hashed;\n  if (usingWeakMap) {\n    hashed = weakMap.get(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n\n  hashed = obj[UID_HASH_KEY];\n  if (hashed !== undefined) {\n    return hashed;\n  }\n\n  if (!canDefineProperty) {\n    hashed = obj.propertyIsEnumerable && obj.propertyIsEnumerable[UID_HASH_KEY];\n    if (hashed !== undefined) {\n      return hashed;\n    }\n\n    hashed = getIENodeHash(obj);\n    if (hashed !== undefined) {\n      return hashed;\n    }\n  }\n\n  hashed = nextHash();\n\n  if (usingWeakMap) {\n    weakMap.set(obj, hashed);\n  } else if (isExtensible !== undefined && isExtensible(obj) === false) {\n    throw new Error('Non-extensible objects are not allowed as keys.');\n  } else if (canDefineProperty) {\n    Object.defineProperty(obj, UID_HASH_KEY, {\n      enumerable: false,\n      configurable: false,\n      writable: false,\n      value: hashed,\n    });\n  } else if (\n    obj.propertyIsEnumerable !== undefined &&\n    obj.propertyIsEnumerable === obj.constructor.prototype.propertyIsEnumerable\n  ) {\n    // Since we can't define a non-enumerable property on the object\n    // we'll hijack one of the less-used non-enumerable properties to\n    // save our hash on it. Since this is a function it will not show up in\n    // `JSON.stringify` which is what we want.\n    obj.propertyIsEnumerable = function () {\n      return this.constructor.prototype.propertyIsEnumerable.apply(\n        this,\n        arguments\n      );\n    };\n    obj.propertyIsEnumerable[UID_HASH_KEY] = hashed;\n  } else if (obj.nodeType !== undefined) {\n    // At this point we couldn't get the IE `uniqueID` to use as a hash\n    // and we couldn't use a non-enumerable property to exploit the\n    // dontEnum bug so we simply add the `UID_HASH_KEY` on the node\n    // itself.\n    obj[UID_HASH_KEY] = hashed;\n  } else {\n    throw new Error('Unable to set a non-enumerable property on object.');\n  }\n\n  return hashed;\n}\n\n// Get references to ES5 object methods.\nvar isExtensible = Object.isExtensible;\n\n// True if Object.defineProperty works as expected. IE8 fails this test.\nvar canDefineProperty = (function () {\n  try {\n    Object.defineProperty({}, '@', {});\n    return true;\n  } catch (e) {\n    return false;\n  }\n})();\n\n// IE has a `uniqueID` property on DOM nodes. We can construct the hash from it\n// and avoid memory leaks from the IE cloneNode bug.\nfunction getIENodeHash(node) {\n  if (node && node.nodeType > 0) {\n    switch (node.nodeType) {\n      case 1: // Element\n        return node.uniqueID;\n      case 9: // Document\n        return node.documentElement && node.documentElement.uniqueID;\n    }\n  }\n}\n\nfunction valueOf(obj) {\n  return obj.valueOf !== defaultValueOf && typeof obj.valueOf === 'function'\n    ? obj.valueOf(obj)\n    : obj;\n}\n\nfunction nextHash() {\n  var nextHash = ++_objHashUID;\n  if (_objHashUID & 0x40000000) {\n    _objHashUID = 0;\n  }\n  return nextHash;\n}\n\n// If possible, use a WeakMap.\nvar usingWeakMap = typeof WeakMap === 'function';\nvar weakMap;\nif (usingWeakMap) {\n  weakMap = new WeakMap();\n}\n\nvar symbolMap = Object.create(null);\n\nvar _objHashUID = 0;\n\nvar UID_HASH_KEY = '__immutablehash__';\nif (typeof Symbol === 'function') {\n  UID_HASH_KEY = Symbol(UID_HASH_KEY);\n}\n\nvar STRING_HASH_CACHE_MIN_STRLEN = 16;\nvar STRING_HASH_CACHE_MAX_SIZE = 255;\nvar STRING_HASH_CACHE_SIZE = 0;\nvar stringHashCache = {};\n\nvar ToKeyedSequence = /*@__PURE__*/(function (KeyedSeq) {\n  function ToKeyedSequence(indexed, useKeys) {\n    this._iter = indexed;\n    this._useKeys = useKeys;\n    this.size = indexed.size;\n  }\n\n  if ( KeyedSeq ) ToKeyedSequence.__proto__ = KeyedSeq;\n  ToKeyedSequence.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  ToKeyedSequence.prototype.constructor = ToKeyedSequence;\n\n  ToKeyedSequence.prototype.get = function get (key, notSetValue) {\n    return this._iter.get(key, notSetValue);\n  };\n\n  ToKeyedSequence.prototype.has = function has (key) {\n    return this._iter.has(key);\n  };\n\n  ToKeyedSequence.prototype.valueSeq = function valueSeq () {\n    return this._iter.valueSeq();\n  };\n\n  ToKeyedSequence.prototype.reverse = function reverse () {\n    var this$1$1 = this;\n\n    var reversedSequence = reverseFactory(this, true);\n    if (!this._useKeys) {\n      reversedSequence.valueSeq = function () { return this$1$1._iter.toSeq().reverse(); };\n    }\n    return reversedSequence;\n  };\n\n  ToKeyedSequence.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    var mappedSequence = mapFactory(this, mapper, context);\n    if (!this._useKeys) {\n      mappedSequence.valueSeq = function () { return this$1$1._iter.toSeq().map(mapper, context); };\n    }\n    return mappedSequence;\n  };\n\n  ToKeyedSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._iter.__iterate(function (v, k) { return fn(v, k, this$1$1); }, reverse);\n  };\n\n  ToKeyedSequence.prototype.__iterator = function __iterator (type, reverse) {\n    return this._iter.__iterator(type, reverse);\n  };\n\n  return ToKeyedSequence;\n}(KeyedSeq));\nToKeyedSequence.prototype[IS_ORDERED_SYMBOL] = true;\n\nvar ToIndexedSequence = /*@__PURE__*/(function (IndexedSeq) {\n  function ToIndexedSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n\n  if ( IndexedSeq ) ToIndexedSequence.__proto__ = IndexedSeq;\n  ToIndexedSequence.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  ToIndexedSequence.prototype.constructor = ToIndexedSequence;\n\n  ToIndexedSequence.prototype.includes = function includes (value) {\n    return this._iter.includes(value);\n  };\n\n  ToIndexedSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    var i = 0;\n    reverse && ensureSize(this);\n    return this._iter.__iterate(\n      function (v) { return fn(v, reverse ? this$1$1.size - ++i : i++, this$1$1); },\n      reverse\n    );\n  };\n\n  ToIndexedSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var this$1$1 = this;\n\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    var i = 0;\n    reverse && ensureSize(this);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done\n        ? step\n        : iteratorValue(\n            type,\n            reverse ? this$1$1.size - ++i : i++,\n            step.value,\n            step\n          );\n    });\n  };\n\n  return ToIndexedSequence;\n}(IndexedSeq));\n\nvar ToSetSequence = /*@__PURE__*/(function (SetSeq) {\n  function ToSetSequence(iter) {\n    this._iter = iter;\n    this.size = iter.size;\n  }\n\n  if ( SetSeq ) ToSetSequence.__proto__ = SetSeq;\n  ToSetSequence.prototype = Object.create( SetSeq && SetSeq.prototype );\n  ToSetSequence.prototype.constructor = ToSetSequence;\n\n  ToSetSequence.prototype.has = function has (key) {\n    return this._iter.includes(key);\n  };\n\n  ToSetSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._iter.__iterate(function (v) { return fn(v, v, this$1$1); }, reverse);\n  };\n\n  ToSetSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      return step.done\n        ? step\n        : iteratorValue(type, step.value, step.value, step);\n    });\n  };\n\n  return ToSetSequence;\n}(SetSeq));\n\nvar FromEntriesSequence = /*@__PURE__*/(function (KeyedSeq) {\n  function FromEntriesSequence(entries) {\n    this._iter = entries;\n    this.size = entries.size;\n  }\n\n  if ( KeyedSeq ) FromEntriesSequence.__proto__ = KeyedSeq;\n  FromEntriesSequence.prototype = Object.create( KeyedSeq && KeyedSeq.prototype );\n  FromEntriesSequence.prototype.constructor = FromEntriesSequence;\n\n  FromEntriesSequence.prototype.entrySeq = function entrySeq () {\n    return this._iter.toSeq();\n  };\n\n  FromEntriesSequence.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._iter.__iterate(function (entry) {\n      // Check if entry exists first so array access doesn't throw for holes\n      // in the parent iteration.\n      if (entry) {\n        validateEntry(entry);\n        var indexedCollection = isCollection(entry);\n        return fn(\n          indexedCollection ? entry.get(1) : entry[1],\n          indexedCollection ? entry.get(0) : entry[0],\n          this$1$1\n        );\n      }\n    }, reverse);\n  };\n\n  FromEntriesSequence.prototype.__iterator = function __iterator (type, reverse) {\n    var iterator = this._iter.__iterator(ITERATE_VALUES, reverse);\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        // Check if entry exists first so array access doesn't throw for holes\n        // in the parent iteration.\n        if (entry) {\n          validateEntry(entry);\n          var indexedCollection = isCollection(entry);\n          return iteratorValue(\n            type,\n            indexedCollection ? entry.get(0) : entry[0],\n            indexedCollection ? entry.get(1) : entry[1],\n            step\n          );\n        }\n      }\n    });\n  };\n\n  return FromEntriesSequence;\n}(KeyedSeq));\n\nToIndexedSequence.prototype.cacheResult =\n  ToKeyedSequence.prototype.cacheResult =\n  ToSetSequence.prototype.cacheResult =\n  FromEntriesSequence.prototype.cacheResult =\n    cacheResultThrough;\n\nfunction flipFactory(collection) {\n  var flipSequence = makeSequence(collection);\n  flipSequence._iter = collection;\n  flipSequence.size = collection.size;\n  flipSequence.flip = function () { return collection; };\n  flipSequence.reverse = function () {\n    var reversedSequence = collection.reverse.apply(this); // super.reverse()\n    reversedSequence.flip = function () { return collection.reverse(); };\n    return reversedSequence;\n  };\n  flipSequence.has = function (key) { return collection.includes(key); };\n  flipSequence.includes = function (key) { return collection.has(key); };\n  flipSequence.cacheResult = cacheResultThrough;\n  flipSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    return collection.__iterate(function (v, k) { return fn(k, v, this$1$1) !== false; }, reverse);\n  };\n  flipSequence.__iteratorUncached = function (type, reverse) {\n    if (type === ITERATE_ENTRIES) {\n      var iterator = collection.__iterator(type, reverse);\n      return new Iterator(function () {\n        var step = iterator.next();\n        if (!step.done) {\n          var k = step.value[0];\n          step.value[0] = step.value[1];\n          step.value[1] = k;\n        }\n        return step;\n      });\n    }\n    return collection.__iterator(\n      type === ITERATE_VALUES ? ITERATE_KEYS : ITERATE_VALUES,\n      reverse\n    );\n  };\n  return flipSequence;\n}\n\nfunction mapFactory(collection, mapper, context) {\n  var mappedSequence = makeSequence(collection);\n  mappedSequence.size = collection.size;\n  mappedSequence.has = function (key) { return collection.has(key); };\n  mappedSequence.get = function (key, notSetValue) {\n    var v = collection.get(key, NOT_SET);\n    return v === NOT_SET\n      ? notSetValue\n      : mapper.call(context, v, key, collection);\n  };\n  mappedSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    return collection.__iterate(\n      function (v, k, c) { return fn(mapper.call(context, v, k, c), k, this$1$1) !== false; },\n      reverse\n    );\n  };\n  mappedSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var key = entry[0];\n      return iteratorValue(\n        type,\n        key,\n        mapper.call(context, entry[1], key, collection),\n        step\n      );\n    });\n  };\n  return mappedSequence;\n}\n\nfunction reverseFactory(collection, useKeys) {\n  var this$1$1 = this;\n\n  var reversedSequence = makeSequence(collection);\n  reversedSequence._iter = collection;\n  reversedSequence.size = collection.size;\n  reversedSequence.reverse = function () { return collection; };\n  if (collection.flip) {\n    reversedSequence.flip = function () {\n      var flipSequence = flipFactory(collection);\n      flipSequence.reverse = function () { return collection.flip(); };\n      return flipSequence;\n    };\n  }\n  reversedSequence.get = function (key, notSetValue) { return collection.get(useKeys ? key : -1 - key, notSetValue); };\n  reversedSequence.has = function (key) { return collection.has(useKeys ? key : -1 - key); };\n  reversedSequence.includes = function (value) { return collection.includes(value); };\n  reversedSequence.cacheResult = cacheResultThrough;\n  reversedSequence.__iterate = function (fn, reverse) {\n    var this$1$1 = this;\n\n    var i = 0;\n    reverse && ensureSize(collection);\n    return collection.__iterate(\n      function (v, k) { return fn(v, useKeys ? k : reverse ? this$1$1.size - ++i : i++, this$1$1); },\n      !reverse\n    );\n  };\n  reversedSequence.__iterator = function (type, reverse) {\n    var i = 0;\n    reverse && ensureSize(collection);\n    var iterator = collection.__iterator(ITERATE_ENTRIES, !reverse);\n    return new Iterator(function () {\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      return iteratorValue(\n        type,\n        useKeys ? entry[0] : reverse ? this$1$1.size - ++i : i++,\n        entry[1],\n        step\n      );\n    });\n  };\n  return reversedSequence;\n}\n\nfunction filterFactory(collection, predicate, context, useKeys) {\n  var filterSequence = makeSequence(collection);\n  if (useKeys) {\n    filterSequence.has = function (key) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && !!predicate.call(context, v, key, collection);\n    };\n    filterSequence.get = function (key, notSetValue) {\n      var v = collection.get(key, NOT_SET);\n      return v !== NOT_SET && predicate.call(context, v, key, collection)\n        ? v\n        : notSetValue;\n    };\n  }\n  filterSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1$1);\n      }\n    }, reverse);\n    return iterations;\n  };\n  filterSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterations = 0;\n    return new Iterator(function () {\n      while (true) {\n        var step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n        var entry = step.value;\n        var key = entry[0];\n        var value = entry[1];\n        if (predicate.call(context, value, key, collection)) {\n          return iteratorValue(type, useKeys ? key : iterations++, value, step);\n        }\n      }\n    });\n  };\n  return filterSequence;\n}\n\nfunction countByFactory(collection, grouper, context) {\n  var groups = Map().asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(grouper.call(context, v, k, collection), 0, function (a) { return a + 1; });\n  });\n  return groups.asImmutable();\n}\n\nfunction groupByFactory(collection, grouper, context) {\n  var isKeyedIter = isKeyed(collection);\n  var groups = (isOrdered(collection) ? OrderedMap() : Map()).asMutable();\n  collection.__iterate(function (v, k) {\n    groups.update(\n      grouper.call(context, v, k, collection),\n      function (a) { return ((a = a || []), a.push(isKeyedIter ? [k, v] : v), a); }\n    );\n  });\n  var coerce = collectionClass(collection);\n  return groups.map(function (arr) { return reify(collection, coerce(arr)); }).asImmutable();\n}\n\nfunction partitionFactory(collection, predicate, context) {\n  var isKeyedIter = isKeyed(collection);\n  var groups = [[], []];\n  collection.__iterate(function (v, k) {\n    groups[predicate.call(context, v, k, collection) ? 1 : 0].push(\n      isKeyedIter ? [k, v] : v\n    );\n  });\n  var coerce = collectionClass(collection);\n  return groups.map(function (arr) { return reify(collection, coerce(arr)); });\n}\n\nfunction sliceFactory(collection, begin, end, useKeys) {\n  var originalSize = collection.size;\n\n  if (wholeSlice(begin, end, originalSize)) {\n    return collection;\n  }\n\n  var resolvedBegin = resolveBegin(begin, originalSize);\n  var resolvedEnd = resolveEnd(end, originalSize);\n\n  // begin or end will be NaN if they were provided as negative numbers and\n  // this collection's size is unknown. In that case, cache first so there is\n  // a known size and these do not resolve to NaN.\n  if (resolvedBegin !== resolvedBegin || resolvedEnd !== resolvedEnd) {\n    return sliceFactory(collection.toSeq().cacheResult(), begin, end, useKeys);\n  }\n\n  // Note: resolvedEnd is undefined when the original sequence's length is\n  // unknown and this slice did not supply an end and should contain all\n  // elements after resolvedBegin.\n  // In that case, resolvedSize will be NaN and sliceSize will remain undefined.\n  var resolvedSize = resolvedEnd - resolvedBegin;\n  var sliceSize;\n  if (resolvedSize === resolvedSize) {\n    sliceSize = resolvedSize < 0 ? 0 : resolvedSize;\n  }\n\n  var sliceSeq = makeSequence(collection);\n\n  // If collection.size is undefined, the size of the realized sliceSeq is\n  // unknown at this point unless the number of items to slice is 0\n  sliceSeq.size =\n    sliceSize === 0 ? sliceSize : (collection.size && sliceSize) || undefined;\n\n  if (!useKeys && isSeq(collection) && sliceSize >= 0) {\n    sliceSeq.get = function (index, notSetValue) {\n      index = wrapIndex(this, index);\n      return index >= 0 && index < sliceSize\n        ? collection.get(index + resolvedBegin, notSetValue)\n        : notSetValue;\n    };\n  }\n\n  sliceSeq.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    if (sliceSize === 0) {\n      return 0;\n    }\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var skipped = 0;\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k) {\n      if (!(isSkipping && (isSkipping = skipped++ < resolvedBegin))) {\n        iterations++;\n        return (\n          fn(v, useKeys ? k : iterations - 1, this$1$1) !== false &&\n          iterations !== sliceSize\n        );\n      }\n    });\n    return iterations;\n  };\n\n  sliceSeq.__iteratorUncached = function (type, reverse) {\n    if (sliceSize !== 0 && reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    // Don't bother instantiating parent iterator if taking 0.\n    if (sliceSize === 0) {\n      return new Iterator(iteratorDone);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var skipped = 0;\n    var iterations = 0;\n    return new Iterator(function () {\n      while (skipped++ < resolvedBegin) {\n        iterator.next();\n      }\n      if (++iterations > sliceSize) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (useKeys || type === ITERATE_VALUES || step.done) {\n        return step;\n      }\n      if (type === ITERATE_KEYS) {\n        return iteratorValue(type, iterations - 1, undefined, step);\n      }\n      return iteratorValue(type, iterations - 1, step.value[1], step);\n    });\n  };\n\n  return sliceSeq;\n}\n\nfunction takeWhileFactory(collection, predicate, context) {\n  var takeSequence = makeSequence(collection);\n  takeSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    collection.__iterate(\n      function (v, k, c) { return predicate.call(context, v, k, c) && ++iterations && fn(v, k, this$1$1); }\n    );\n    return iterations;\n  };\n  takeSequence.__iteratorUncached = function (type, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var iterating = true;\n    return new Iterator(function () {\n      if (!iterating) {\n        return iteratorDone();\n      }\n      var step = iterator.next();\n      if (step.done) {\n        return step;\n      }\n      var entry = step.value;\n      var k = entry[0];\n      var v = entry[1];\n      if (!predicate.call(context, v, k, this$1$1)) {\n        iterating = false;\n        return iteratorDone();\n      }\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return takeSequence;\n}\n\nfunction skipWhileFactory(collection, predicate, context, useKeys) {\n  var skipSequence = makeSequence(collection);\n  skipSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var isSkipping = true;\n    var iterations = 0;\n    collection.__iterate(function (v, k, c) {\n      if (!(isSkipping && (isSkipping = predicate.call(context, v, k, c)))) {\n        iterations++;\n        return fn(v, useKeys ? k : iterations - 1, this$1$1);\n      }\n    });\n    return iterations;\n  };\n  skipSequence.__iteratorUncached = function (type, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(ITERATE_ENTRIES, reverse);\n    var skipping = true;\n    var iterations = 0;\n    return new Iterator(function () {\n      var step;\n      var k;\n      var v;\n      do {\n        step = iterator.next();\n        if (step.done) {\n          if (useKeys || type === ITERATE_VALUES) {\n            return step;\n          }\n          if (type === ITERATE_KEYS) {\n            return iteratorValue(type, iterations++, undefined, step);\n          }\n          return iteratorValue(type, iterations++, step.value[1], step);\n        }\n        var entry = step.value;\n        k = entry[0];\n        v = entry[1];\n        skipping && (skipping = predicate.call(context, v, k, this$1$1));\n      } while (skipping);\n      return type === ITERATE_ENTRIES ? step : iteratorValue(type, k, v, step);\n    });\n  };\n  return skipSequence;\n}\n\nfunction concatFactory(collection, values) {\n  var isKeyedCollection = isKeyed(collection);\n  var iters = [collection]\n    .concat(values)\n    .map(function (v) {\n      if (!isCollection(v)) {\n        v = isKeyedCollection\n          ? keyedSeqFromValue(v)\n          : indexedSeqFromValue(Array.isArray(v) ? v : [v]);\n      } else if (isKeyedCollection) {\n        v = KeyedCollection(v);\n      }\n      return v;\n    })\n    .filter(function (v) { return v.size !== 0; });\n\n  if (iters.length === 0) {\n    return collection;\n  }\n\n  if (iters.length === 1) {\n    var singleton = iters[0];\n    if (\n      singleton === collection ||\n      (isKeyedCollection && isKeyed(singleton)) ||\n      (isIndexed(collection) && isIndexed(singleton))\n    ) {\n      return singleton;\n    }\n  }\n\n  var concatSeq = new ArraySeq(iters);\n  if (isKeyedCollection) {\n    concatSeq = concatSeq.toKeyedSeq();\n  } else if (!isIndexed(collection)) {\n    concatSeq = concatSeq.toSetSeq();\n  }\n  concatSeq = concatSeq.flatten(true);\n  concatSeq.size = iters.reduce(function (sum, seq) {\n    if (sum !== undefined) {\n      var size = seq.size;\n      if (size !== undefined) {\n        return sum + size;\n      }\n    }\n  }, 0);\n  return concatSeq;\n}\n\nfunction flattenFactory(collection, depth, useKeys) {\n  var flatSequence = makeSequence(collection);\n  flatSequence.__iterateUncached = function (fn, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterate(fn, reverse);\n    }\n    var iterations = 0;\n    var stopped = false;\n    function flatDeep(iter, currentDepth) {\n      iter.__iterate(function (v, k) {\n        if ((!depth || currentDepth < depth) && isCollection(v)) {\n          flatDeep(v, currentDepth + 1);\n        } else {\n          iterations++;\n          if (fn(v, useKeys ? k : iterations - 1, flatSequence) === false) {\n            stopped = true;\n          }\n        }\n        return !stopped;\n      }, reverse);\n    }\n    flatDeep(collection, 0);\n    return iterations;\n  };\n  flatSequence.__iteratorUncached = function (type, reverse) {\n    if (reverse) {\n      return this.cacheResult().__iterator(type, reverse);\n    }\n    var iterator = collection.__iterator(type, reverse);\n    var stack = [];\n    var iterations = 0;\n    return new Iterator(function () {\n      while (iterator) {\n        var step = iterator.next();\n        if (step.done !== false) {\n          iterator = stack.pop();\n          continue;\n        }\n        var v = step.value;\n        if (type === ITERATE_ENTRIES) {\n          v = v[1];\n        }\n        if ((!depth || stack.length < depth) && isCollection(v)) {\n          stack.push(iterator);\n          iterator = v.__iterator(type, reverse);\n        } else {\n          return useKeys ? step : iteratorValue(type, iterations++, v, step);\n        }\n      }\n      return iteratorDone();\n    });\n  };\n  return flatSequence;\n}\n\nfunction flatMapFactory(collection, mapper, context) {\n  var coerce = collectionClass(collection);\n  return collection\n    .toSeq()\n    .map(function (v, k) { return coerce(mapper.call(context, v, k, collection)); })\n    .flatten(true);\n}\n\nfunction interposeFactory(collection, separator) {\n  var interposedSequence = makeSequence(collection);\n  interposedSequence.size = collection.size && collection.size * 2 - 1;\n  interposedSequence.__iterateUncached = function (fn, reverse) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    collection.__iterate(\n      function (v) { return (!iterations || fn(separator, iterations++, this$1$1) !== false) &&\n        fn(v, iterations++, this$1$1) !== false; },\n      reverse\n    );\n    return iterations;\n  };\n  interposedSequence.__iteratorUncached = function (type, reverse) {\n    var iterator = collection.__iterator(ITERATE_VALUES, reverse);\n    var iterations = 0;\n    var step;\n    return new Iterator(function () {\n      if (!step || iterations % 2) {\n        step = iterator.next();\n        if (step.done) {\n          return step;\n        }\n      }\n      return iterations % 2\n        ? iteratorValue(type, iterations++, separator)\n        : iteratorValue(type, iterations++, step.value, step);\n    });\n  };\n  return interposedSequence;\n}\n\nfunction sortFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  var isKeyedCollection = isKeyed(collection);\n  var index = 0;\n  var entries = collection\n    .toSeq()\n    .map(function (v, k) { return [k, v, index++, mapper ? mapper(v, k, collection) : v]; })\n    .valueSeq()\n    .toArray();\n  entries\n    .sort(function (a, b) { return comparator(a[3], b[3]) || a[2] - b[2]; })\n    .forEach(\n      isKeyedCollection\n        ? function (v, i) {\n            entries[i].length = 2;\n          }\n        : function (v, i) {\n            entries[i] = v[1];\n          }\n    );\n  return isKeyedCollection\n    ? KeyedSeq(entries)\n    : isIndexed(collection)\n    ? IndexedSeq(entries)\n    : SetSeq(entries);\n}\n\nfunction maxFactory(collection, comparator, mapper) {\n  if (!comparator) {\n    comparator = defaultComparator;\n  }\n  if (mapper) {\n    var entry = collection\n      .toSeq()\n      .map(function (v, k) { return [v, mapper(v, k, collection)]; })\n      .reduce(function (a, b) { return (maxCompare(comparator, a[1], b[1]) ? b : a); });\n    return entry && entry[0];\n  }\n  return collection.reduce(function (a, b) { return (maxCompare(comparator, a, b) ? b : a); });\n}\n\nfunction maxCompare(comparator, a, b) {\n  var comp = comparator(b, a);\n  // b is considered the new max if the comparator declares them equal, but\n  // they are not equal and b is in fact a nullish value.\n  return (\n    (comp === 0 && b !== a && (b === undefined || b === null || b !== b)) ||\n    comp > 0\n  );\n}\n\nfunction zipWithFactory(keyIter, zipper, iters, zipAll) {\n  var zipSequence = makeSequence(keyIter);\n  var sizes = new ArraySeq(iters).map(function (i) { return i.size; });\n  zipSequence.size = zipAll ? sizes.max() : sizes.min();\n  // Note: this a generic base implementation of __iterate in terms of\n  // __iterator which may be more generically useful in the future.\n  zipSequence.__iterate = function (fn, reverse) {\n    /* generic:\n    var iterator = this.__iterator(ITERATE_ENTRIES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      iterations++;\n      if (fn(step.value[1], step.value[0], this) === false) {\n        break;\n      }\n    }\n    return iterations;\n    */\n    // indexed:\n    var iterator = this.__iterator(ITERATE_VALUES, reverse);\n    var step;\n    var iterations = 0;\n    while (!(step = iterator.next()).done) {\n      if (fn(step.value, iterations++, this) === false) {\n        break;\n      }\n    }\n    return iterations;\n  };\n  zipSequence.__iteratorUncached = function (type, reverse) {\n    var iterators = iters.map(\n      function (i) { return ((i = Collection(i)), getIterator(reverse ? i.reverse() : i)); }\n    );\n    var iterations = 0;\n    var isDone = false;\n    return new Iterator(function () {\n      var steps;\n      if (!isDone) {\n        steps = iterators.map(function (i) { return i.next(); });\n        isDone = zipAll ? steps.every(function (s) { return s.done; }) : steps.some(function (s) { return s.done; });\n      }\n      if (isDone) {\n        return iteratorDone();\n      }\n      return iteratorValue(\n        type,\n        iterations++,\n        zipper.apply(\n          null,\n          steps.map(function (s) { return s.value; })\n        )\n      );\n    });\n  };\n  return zipSequence;\n}\n\n// #pragma Helper Functions\n\nfunction reify(iter, seq) {\n  return iter === seq ? iter : isSeq(iter) ? seq : iter.constructor(seq);\n}\n\nfunction validateEntry(entry) {\n  if (entry !== Object(entry)) {\n    throw new TypeError('Expected [K, V] tuple: ' + entry);\n  }\n}\n\nfunction collectionClass(collection) {\n  return isKeyed(collection)\n    ? KeyedCollection\n    : isIndexed(collection)\n    ? IndexedCollection\n    : SetCollection;\n}\n\nfunction makeSequence(collection) {\n  return Object.create(\n    (isKeyed(collection)\n      ? KeyedSeq\n      : isIndexed(collection)\n      ? IndexedSeq\n      : SetSeq\n    ).prototype\n  );\n}\n\nfunction cacheResultThrough() {\n  if (this._iter.cacheResult) {\n    this._iter.cacheResult();\n    this.size = this._iter.size;\n    return this;\n  }\n  return Seq.prototype.cacheResult.call(this);\n}\n\nfunction defaultComparator(a, b) {\n  if (a === undefined && b === undefined) {\n    return 0;\n  }\n\n  if (a === undefined) {\n    return 1;\n  }\n\n  if (b === undefined) {\n    return -1;\n  }\n\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\nfunction arrCopy(arr, offset) {\n  offset = offset || 0;\n  var len = Math.max(0, arr.length - offset);\n  var newArr = new Array(len);\n  for (var ii = 0; ii < len; ii++) {\n    newArr[ii] = arr[ii + offset];\n  }\n  return newArr;\n}\n\nfunction invariant(condition, error) {\n  if (!condition) { throw new Error(error); }\n}\n\nfunction assertNotInfinite(size) {\n  invariant(\n    size !== Infinity,\n    'Cannot perform this action with an infinite size.'\n  );\n}\n\nfunction coerceKeyPath(keyPath) {\n  if (isArrayLike(keyPath) && typeof keyPath !== 'string') {\n    return keyPath;\n  }\n  if (isOrdered(keyPath)) {\n    return keyPath.toArray();\n  }\n  throw new TypeError(\n    'Invalid keyPath: expected Ordered Collection or Array: ' + keyPath\n  );\n}\n\nvar toString = Object.prototype.toString;\n\nfunction isPlainObject(value) {\n  // The base prototype's toString deals with Argument objects and native namespaces like Math\n  if (\n    !value ||\n    typeof value !== 'object' ||\n    toString.call(value) !== '[object Object]'\n  ) {\n    return false;\n  }\n\n  var proto = Object.getPrototypeOf(value);\n  if (proto === null) {\n    return true;\n  }\n\n  // Iteratively going up the prototype chain is needed for cross-realm environments (differing contexts, iframes, etc)\n  var parentProto = proto;\n  var nextProto = Object.getPrototypeOf(proto);\n  while (nextProto !== null) {\n    parentProto = nextProto;\n    nextProto = Object.getPrototypeOf(parentProto);\n  }\n  return parentProto === proto;\n}\n\n/**\n * Returns true if the value is a potentially-persistent data structure, either\n * provided by Immutable.js or a plain Array or Object.\n */\nfunction isDataStructure(value) {\n  return (\n    typeof value === 'object' &&\n    (isImmutable(value) || Array.isArray(value) || isPlainObject(value))\n  );\n}\n\nfunction quoteString(value) {\n  try {\n    return typeof value === 'string' ? JSON.stringify(value) : String(value);\n  } catch (_ignoreError) {\n    return JSON.stringify(value);\n  }\n}\n\nfunction has(collection, key) {\n  return isImmutable(collection)\n    ? collection.has(key)\n    : isDataStructure(collection) && hasOwnProperty.call(collection, key);\n}\n\nfunction get(collection, key, notSetValue) {\n  return isImmutable(collection)\n    ? collection.get(key, notSetValue)\n    : !has(collection, key)\n    ? notSetValue\n    : typeof collection.get === 'function'\n    ? collection.get(key)\n    : collection[key];\n}\n\nfunction shallowCopy(from) {\n  if (Array.isArray(from)) {\n    return arrCopy(from);\n  }\n  var to = {};\n  for (var key in from) {\n    if (hasOwnProperty.call(from, key)) {\n      to[key] = from[key];\n    }\n  }\n  return to;\n}\n\nfunction remove(collection, key) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot update non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    if (!collection.remove) {\n      throw new TypeError(\n        'Cannot update immutable value without .remove() method: ' + collection\n      );\n    }\n    return collection.remove(key);\n  }\n  if (!hasOwnProperty.call(collection, key)) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  if (Array.isArray(collectionCopy)) {\n    collectionCopy.splice(key, 1);\n  } else {\n    delete collectionCopy[key];\n  }\n  return collectionCopy;\n}\n\nfunction set(collection, key, value) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot update non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    if (!collection.set) {\n      throw new TypeError(\n        'Cannot update immutable value without .set() method: ' + collection\n      );\n    }\n    return collection.set(key, value);\n  }\n  if (hasOwnProperty.call(collection, key) && value === collection[key]) {\n    return collection;\n  }\n  var collectionCopy = shallowCopy(collection);\n  collectionCopy[key] = value;\n  return collectionCopy;\n}\n\nfunction updateIn$1(collection, keyPath, notSetValue, updater) {\n  if (!updater) {\n    updater = notSetValue;\n    notSetValue = undefined;\n  }\n  var updatedValue = updateInDeeply(\n    isImmutable(collection),\n    collection,\n    coerceKeyPath(keyPath),\n    0,\n    notSetValue,\n    updater\n  );\n  return updatedValue === NOT_SET ? notSetValue : updatedValue;\n}\n\nfunction updateInDeeply(\n  inImmutable,\n  existing,\n  keyPath,\n  i,\n  notSetValue,\n  updater\n) {\n  var wasNotSet = existing === NOT_SET;\n  if (i === keyPath.length) {\n    var existingValue = wasNotSet ? notSetValue : existing;\n    var newValue = updater(existingValue);\n    return newValue === existingValue ? existing : newValue;\n  }\n  if (!wasNotSet && !isDataStructure(existing)) {\n    throw new TypeError(\n      'Cannot update within non-data-structure value in path [' +\n        keyPath.slice(0, i).map(quoteString) +\n        ']: ' +\n        existing\n    );\n  }\n  var key = keyPath[i];\n  var nextExisting = wasNotSet ? NOT_SET : get(existing, key, NOT_SET);\n  var nextUpdated = updateInDeeply(\n    nextExisting === NOT_SET ? inImmutable : isImmutable(nextExisting),\n    nextExisting,\n    keyPath,\n    i + 1,\n    notSetValue,\n    updater\n  );\n  return nextUpdated === nextExisting\n    ? existing\n    : nextUpdated === NOT_SET\n    ? remove(existing, key)\n    : set(\n        wasNotSet ? (inImmutable ? emptyMap() : {}) : existing,\n        key,\n        nextUpdated\n      );\n}\n\nfunction setIn$1(collection, keyPath, value) {\n  return updateIn$1(collection, keyPath, NOT_SET, function () { return value; });\n}\n\nfunction setIn(keyPath, v) {\n  return setIn$1(this, keyPath, v);\n}\n\nfunction removeIn(collection, keyPath) {\n  return updateIn$1(collection, keyPath, function () { return NOT_SET; });\n}\n\nfunction deleteIn(keyPath) {\n  return removeIn(this, keyPath);\n}\n\nfunction update$1(collection, key, notSetValue, updater) {\n  return updateIn$1(collection, [key], notSetValue, updater);\n}\n\nfunction update(key, notSetValue, updater) {\n  return arguments.length === 1\n    ? key(this)\n    : update$1(this, key, notSetValue, updater);\n}\n\nfunction updateIn(keyPath, notSetValue, updater) {\n  return updateIn$1(this, keyPath, notSetValue, updater);\n}\n\nfunction merge$1() {\n  var iters = [], len = arguments.length;\n  while ( len-- ) iters[ len ] = arguments[ len ];\n\n  return mergeIntoKeyedWith(this, iters);\n}\n\nfunction mergeWith$1(merger) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  if (typeof merger !== 'function') {\n    throw new TypeError('Invalid merger function: ' + merger);\n  }\n  return mergeIntoKeyedWith(this, iters, merger);\n}\n\nfunction mergeIntoKeyedWith(collection, collections, merger) {\n  var iters = [];\n  for (var ii = 0; ii < collections.length; ii++) {\n    var collection$1 = KeyedCollection(collections[ii]);\n    if (collection$1.size !== 0) {\n      iters.push(collection$1);\n    }\n  }\n  if (iters.length === 0) {\n    return collection;\n  }\n  if (\n    collection.toSeq().size === 0 &&\n    !collection.__ownerID &&\n    iters.length === 1\n  ) {\n    return collection.constructor(iters[0]);\n  }\n  return collection.withMutations(function (collection) {\n    var mergeIntoCollection = merger\n      ? function (value, key) {\n          update$1(collection, key, NOT_SET, function (oldVal) { return oldVal === NOT_SET ? value : merger(oldVal, value, key); }\n          );\n        }\n      : function (value, key) {\n          collection.set(key, value);\n        };\n    for (var ii = 0; ii < iters.length; ii++) {\n      iters[ii].forEach(mergeIntoCollection);\n    }\n  });\n}\n\nfunction merge(collection) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  return mergeWithSources(collection, sources);\n}\n\nfunction mergeWith(merger, collection) {\n  var sources = [], len = arguments.length - 2;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 2 ];\n\n  return mergeWithSources(collection, sources, merger);\n}\n\nfunction mergeDeep$1(collection) {\n  var sources = [], len = arguments.length - 1;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 1 ];\n\n  return mergeDeepWithSources(collection, sources);\n}\n\nfunction mergeDeepWith$1(merger, collection) {\n  var sources = [], len = arguments.length - 2;\n  while ( len-- > 0 ) sources[ len ] = arguments[ len + 2 ];\n\n  return mergeDeepWithSources(collection, sources, merger);\n}\n\nfunction mergeDeepWithSources(collection, sources, merger) {\n  return mergeWithSources(collection, sources, deepMergerWith(merger));\n}\n\nfunction mergeWithSources(collection, sources, merger) {\n  if (!isDataStructure(collection)) {\n    throw new TypeError(\n      'Cannot merge into non-data-structure value: ' + collection\n    );\n  }\n  if (isImmutable(collection)) {\n    return typeof merger === 'function' && collection.mergeWith\n      ? collection.mergeWith.apply(collection, [ merger ].concat( sources ))\n      : collection.merge\n      ? collection.merge.apply(collection, sources)\n      : collection.concat.apply(collection, sources);\n  }\n  var isArray = Array.isArray(collection);\n  var merged = collection;\n  var Collection = isArray ? IndexedCollection : KeyedCollection;\n  var mergeItem = isArray\n    ? function (value) {\n        // Copy on write\n        if (merged === collection) {\n          merged = shallowCopy(merged);\n        }\n        merged.push(value);\n      }\n    : function (value, key) {\n        var hasVal = hasOwnProperty.call(merged, key);\n        var nextVal =\n          hasVal && merger ? merger(merged[key], value, key) : value;\n        if (!hasVal || nextVal !== merged[key]) {\n          // Copy on write\n          if (merged === collection) {\n            merged = shallowCopy(merged);\n          }\n          merged[key] = nextVal;\n        }\n      };\n  for (var i = 0; i < sources.length; i++) {\n    Collection(sources[i]).forEach(mergeItem);\n  }\n  return merged;\n}\n\nfunction deepMergerWith(merger) {\n  function deepMerger(oldValue, newValue, key) {\n    return isDataStructure(oldValue) &&\n      isDataStructure(newValue) &&\n      areMergeable(oldValue, newValue)\n      ? mergeWithSources(oldValue, [newValue], deepMerger)\n      : merger\n      ? merger(oldValue, newValue, key)\n      : newValue;\n  }\n  return deepMerger;\n}\n\n/**\n * It's unclear what the desired behavior is for merging two collections that\n * fall into separate categories between keyed, indexed, or set-like, so we only\n * consider them mergeable if they fall into the same category.\n */\nfunction areMergeable(oldDataStructure, newDataStructure) {\n  var oldSeq = Seq(oldDataStructure);\n  var newSeq = Seq(newDataStructure);\n  // This logic assumes that a sequence can only fall into one of the three\n  // categories mentioned above (since there's no `isSetLike()` method).\n  return (\n    isIndexed(oldSeq) === isIndexed(newSeq) &&\n    isKeyed(oldSeq) === isKeyed(newSeq)\n  );\n}\n\nfunction mergeDeep() {\n  var iters = [], len = arguments.length;\n  while ( len-- ) iters[ len ] = arguments[ len ];\n\n  return mergeDeepWithSources(this, iters);\n}\n\nfunction mergeDeepWith(merger) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return mergeDeepWithSources(this, iters, merger);\n}\n\nfunction mergeIn(keyPath) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return updateIn$1(this, keyPath, emptyMap(), function (m) { return mergeWithSources(m, iters); });\n}\n\nfunction mergeDeepIn(keyPath) {\n  var iters = [], len = arguments.length - 1;\n  while ( len-- > 0 ) iters[ len ] = arguments[ len + 1 ];\n\n  return updateIn$1(this, keyPath, emptyMap(), function (m) { return mergeDeepWithSources(m, iters); }\n  );\n}\n\nfunction withMutations(fn) {\n  var mutable = this.asMutable();\n  fn(mutable);\n  return mutable.wasAltered() ? mutable.__ensureOwner(this.__ownerID) : this;\n}\n\nfunction asMutable() {\n  return this.__ownerID ? this : this.__ensureOwner(new OwnerID());\n}\n\nfunction asImmutable() {\n  return this.__ensureOwner();\n}\n\nfunction wasAltered() {\n  return this.__altered;\n}\n\nvar Map = /*@__PURE__*/(function (KeyedCollection) {\n  function Map(value) {\n    return value === undefined || value === null\n      ? emptyMap()\n      : isMap(value) && !isOrdered(value)\n      ? value\n      : emptyMap().withMutations(function (map) {\n          var iter = KeyedCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v, k) { return map.set(k, v); });\n        });\n  }\n\n  if ( KeyedCollection ) Map.__proto__ = KeyedCollection;\n  Map.prototype = Object.create( KeyedCollection && KeyedCollection.prototype );\n  Map.prototype.constructor = Map;\n\n  Map.of = function of () {\n    var keyValues = [], len = arguments.length;\n    while ( len-- ) keyValues[ len ] = arguments[ len ];\n\n    return emptyMap().withMutations(function (map) {\n      for (var i = 0; i < keyValues.length; i += 2) {\n        if (i + 1 >= keyValues.length) {\n          throw new Error('Missing value for key: ' + keyValues[i]);\n        }\n        map.set(keyValues[i], keyValues[i + 1]);\n      }\n    });\n  };\n\n  Map.prototype.toString = function toString () {\n    return this.__toString('Map {', '}');\n  };\n\n  // @pragma Access\n\n  Map.prototype.get = function get (k, notSetValue) {\n    return this._root\n      ? this._root.get(0, undefined, k, notSetValue)\n      : notSetValue;\n  };\n\n  // @pragma Modification\n\n  Map.prototype.set = function set (k, v) {\n    return updateMap(this, k, v);\n  };\n\n  Map.prototype.remove = function remove (k) {\n    return updateMap(this, k, NOT_SET);\n  };\n\n  Map.prototype.deleteAll = function deleteAll (keys) {\n    var collection = Collection(keys);\n\n    if (collection.size === 0) {\n      return this;\n    }\n\n    return this.withMutations(function (map) {\n      collection.forEach(function (key) { return map.remove(key); });\n    });\n  };\n\n  Map.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._root = null;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyMap();\n  };\n\n  // @pragma Composition\n\n  Map.prototype.sort = function sort (comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator));\n  };\n\n  Map.prototype.sortBy = function sortBy (mapper, comparator) {\n    // Late binding\n    return OrderedMap(sortFactory(this, comparator, mapper));\n  };\n\n  Map.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    return this.withMutations(function (map) {\n      map.forEach(function (value, key) {\n        map.set(key, mapper.call(context, value, key, this$1$1));\n      });\n    });\n  };\n\n  // @pragma Mutability\n\n  Map.prototype.__iterator = function __iterator (type, reverse) {\n    return new MapIterator(this, type, reverse);\n  };\n\n  Map.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    this._root &&\n      this._root.iterate(function (entry) {\n        iterations++;\n        return fn(entry[1], entry[0], this$1$1);\n      }, reverse);\n    return iterations;\n  };\n\n  Map.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyMap();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeMap(this.size, this._root, ownerID, this.__hash);\n  };\n\n  return Map;\n}(KeyedCollection));\n\nMap.isMap = isMap;\n\nvar MapPrototype = Map.prototype;\nMapPrototype[IS_MAP_SYMBOL] = true;\nMapPrototype[DELETE] = MapPrototype.remove;\nMapPrototype.removeAll = MapPrototype.deleteAll;\nMapPrototype.setIn = setIn;\nMapPrototype.removeIn = MapPrototype.deleteIn = deleteIn;\nMapPrototype.update = update;\nMapPrototype.updateIn = updateIn;\nMapPrototype.merge = MapPrototype.concat = merge$1;\nMapPrototype.mergeWith = mergeWith$1;\nMapPrototype.mergeDeep = mergeDeep;\nMapPrototype.mergeDeepWith = mergeDeepWith;\nMapPrototype.mergeIn = mergeIn;\nMapPrototype.mergeDeepIn = mergeDeepIn;\nMapPrototype.withMutations = withMutations;\nMapPrototype.wasAltered = wasAltered;\nMapPrototype.asImmutable = asImmutable;\nMapPrototype['@@transducer/init'] = MapPrototype.asMutable = asMutable;\nMapPrototype['@@transducer/step'] = function (result, arr) {\n  return result.set(arr[0], arr[1]);\n};\nMapPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\n// #pragma Trie Nodes\n\nvar ArrayMapNode = function ArrayMapNode(ownerID, entries) {\n  this.ownerID = ownerID;\n  this.entries = entries;\n};\n\nArrayMapNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\n\nArrayMapNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n\n  if (removed && entries.length === 1) {\n    return; // undefined\n  }\n\n  if (!exists && !removed && entries.length >= MAX_ARRAY_MAP_SIZE) {\n    return createNodes(ownerID, entries, key, value);\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n\n  if (exists) {\n    if (removed) {\n      idx === len - 1\n        ? newEntries.pop()\n        : (newEntries[idx] = newEntries.pop());\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n\n  return new ArrayMapNode(ownerID, newEntries);\n};\n\nvar BitmapIndexedNode = function BitmapIndexedNode(ownerID, bitmap, nodes) {\n  this.ownerID = ownerID;\n  this.bitmap = bitmap;\n  this.nodes = nodes;\n};\n\nBitmapIndexedNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var bit = 1 << ((shift === 0 ? keyHash : keyHash >>> shift) & MASK);\n  var bitmap = this.bitmap;\n  return (bitmap & bit) === 0\n    ? notSetValue\n    : this.nodes[popCount(bitmap & (bit - 1))].get(\n        shift + SHIFT,\n        keyHash,\n        key,\n        notSetValue\n      );\n};\n\nBitmapIndexedNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var keyHashFrag = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var bit = 1 << keyHashFrag;\n  var bitmap = this.bitmap;\n  var exists = (bitmap & bit) !== 0;\n\n  if (!exists && value === NOT_SET) {\n    return this;\n  }\n\n  var idx = popCount(bitmap & (bit - 1));\n  var nodes = this.nodes;\n  var node = exists ? nodes[idx] : undefined;\n  var newNode = updateNode(\n    node,\n    ownerID,\n    shift + SHIFT,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n\n  if (newNode === node) {\n    return this;\n  }\n\n  if (!exists && newNode && nodes.length >= MAX_BITMAP_INDEXED_SIZE) {\n    return expandNodes(ownerID, nodes, bitmap, keyHashFrag, newNode);\n  }\n\n  if (\n    exists &&\n    !newNode &&\n    nodes.length === 2 &&\n    isLeafNode(nodes[idx ^ 1])\n  ) {\n    return nodes[idx ^ 1];\n  }\n\n  if (exists && newNode && nodes.length === 1 && isLeafNode(newNode)) {\n    return newNode;\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newBitmap = exists ? (newNode ? bitmap : bitmap ^ bit) : bitmap | bit;\n  var newNodes = exists\n    ? newNode\n      ? setAt(nodes, idx, newNode, isEditable)\n      : spliceOut(nodes, idx, isEditable)\n    : spliceIn(nodes, idx, newNode, isEditable);\n\n  if (isEditable) {\n    this.bitmap = newBitmap;\n    this.nodes = newNodes;\n    return this;\n  }\n\n  return new BitmapIndexedNode(ownerID, newBitmap, newNodes);\n};\n\nvar HashArrayMapNode = function HashArrayMapNode(ownerID, count, nodes) {\n  this.ownerID = ownerID;\n  this.count = count;\n  this.nodes = nodes;\n};\n\nHashArrayMapNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var node = this.nodes[idx];\n  return node\n    ? node.get(shift + SHIFT, keyHash, key, notSetValue)\n    : notSetValue;\n};\n\nHashArrayMapNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n  var idx = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n  var removed = value === NOT_SET;\n  var nodes = this.nodes;\n  var node = nodes[idx];\n\n  if (removed && !node) {\n    return this;\n  }\n\n  var newNode = updateNode(\n    node,\n    ownerID,\n    shift + SHIFT,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n  if (newNode === node) {\n    return this;\n  }\n\n  var newCount = this.count;\n  if (!node) {\n    newCount++;\n  } else if (!newNode) {\n    newCount--;\n    if (newCount < MIN_HASH_ARRAY_MAP_SIZE) {\n      return packNodes(ownerID, nodes, newCount, idx);\n    }\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newNodes = setAt(nodes, idx, newNode, isEditable);\n\n  if (isEditable) {\n    this.count = newCount;\n    this.nodes = newNodes;\n    return this;\n  }\n\n  return new HashArrayMapNode(ownerID, newCount, newNodes);\n};\n\nvar HashCollisionNode = function HashCollisionNode(ownerID, keyHash, entries) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entries = entries;\n};\n\nHashCollisionNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  var entries = this.entries;\n  for (var ii = 0, len = entries.length; ii < len; ii++) {\n    if (is(key, entries[ii][0])) {\n      return entries[ii][1];\n    }\n  }\n  return notSetValue;\n};\n\nHashCollisionNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  if (keyHash === undefined) {\n    keyHash = hash(key);\n  }\n\n  var removed = value === NOT_SET;\n\n  if (keyHash !== this.keyHash) {\n    if (removed) {\n      return this;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return mergeIntoNode(this, ownerID, shift, keyHash, [key, value]);\n  }\n\n  var entries = this.entries;\n  var idx = 0;\n  var len = entries.length;\n  for (; idx < len; idx++) {\n    if (is(key, entries[idx][0])) {\n      break;\n    }\n  }\n  var exists = idx < len;\n\n  if (exists ? entries[idx][1] === value : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n  (removed || !exists) && SetRef(didChangeSize);\n\n  if (removed && len === 2) {\n    return new ValueNode(ownerID, this.keyHash, entries[idx ^ 1]);\n  }\n\n  var isEditable = ownerID && ownerID === this.ownerID;\n  var newEntries = isEditable ? entries : arrCopy(entries);\n\n  if (exists) {\n    if (removed) {\n      idx === len - 1\n        ? newEntries.pop()\n        : (newEntries[idx] = newEntries.pop());\n    } else {\n      newEntries[idx] = [key, value];\n    }\n  } else {\n    newEntries.push([key, value]);\n  }\n\n  if (isEditable) {\n    this.entries = newEntries;\n    return this;\n  }\n\n  return new HashCollisionNode(ownerID, this.keyHash, newEntries);\n};\n\nvar ValueNode = function ValueNode(ownerID, keyHash, entry) {\n  this.ownerID = ownerID;\n  this.keyHash = keyHash;\n  this.entry = entry;\n};\n\nValueNode.prototype.get = function get (shift, keyHash, key, notSetValue) {\n  return is(key, this.entry[0]) ? this.entry[1] : notSetValue;\n};\n\nValueNode.prototype.update = function update (ownerID, shift, keyHash, key, value, didChangeSize, didAlter) {\n  var removed = value === NOT_SET;\n  var keyMatch = is(key, this.entry[0]);\n  if (keyMatch ? value === this.entry[1] : removed) {\n    return this;\n  }\n\n  SetRef(didAlter);\n\n  if (removed) {\n    SetRef(didChangeSize);\n    return; // undefined\n  }\n\n  if (keyMatch) {\n    if (ownerID && ownerID === this.ownerID) {\n      this.entry[1] = value;\n      return this;\n    }\n    return new ValueNode(ownerID, this.keyHash, [key, value]);\n  }\n\n  SetRef(didChangeSize);\n  return mergeIntoNode(this, ownerID, shift, hash(key), [key, value]);\n};\n\n// #pragma Iterators\n\nArrayMapNode.prototype.iterate = HashCollisionNode.prototype.iterate =\n  function (fn, reverse) {\n    var entries = this.entries;\n    for (var ii = 0, maxIndex = entries.length - 1; ii <= maxIndex; ii++) {\n      if (fn(entries[reverse ? maxIndex - ii : ii]) === false) {\n        return false;\n      }\n    }\n  };\n\nBitmapIndexedNode.prototype.iterate = HashArrayMapNode.prototype.iterate =\n  function (fn, reverse) {\n    var nodes = this.nodes;\n    for (var ii = 0, maxIndex = nodes.length - 1; ii <= maxIndex; ii++) {\n      var node = nodes[reverse ? maxIndex - ii : ii];\n      if (node && node.iterate(fn, reverse) === false) {\n        return false;\n      }\n    }\n  };\n\n// eslint-disable-next-line no-unused-vars\nValueNode.prototype.iterate = function (fn, reverse) {\n  return fn(this.entry);\n};\n\nvar MapIterator = /*@__PURE__*/(function (Iterator) {\n  function MapIterator(map, type, reverse) {\n    this._type = type;\n    this._reverse = reverse;\n    this._stack = map._root && mapIteratorFrame(map._root);\n  }\n\n  if ( Iterator ) MapIterator.__proto__ = Iterator;\n  MapIterator.prototype = Object.create( Iterator && Iterator.prototype );\n  MapIterator.prototype.constructor = MapIterator;\n\n  MapIterator.prototype.next = function next () {\n    var type = this._type;\n    var stack = this._stack;\n    while (stack) {\n      var node = stack.node;\n      var index = stack.index++;\n      var maxIndex = (void 0);\n      if (node.entry) {\n        if (index === 0) {\n          return mapIteratorValue(type, node.entry);\n        }\n      } else if (node.entries) {\n        maxIndex = node.entries.length - 1;\n        if (index <= maxIndex) {\n          return mapIteratorValue(\n            type,\n            node.entries[this._reverse ? maxIndex - index : index]\n          );\n        }\n      } else {\n        maxIndex = node.nodes.length - 1;\n        if (index <= maxIndex) {\n          var subNode = node.nodes[this._reverse ? maxIndex - index : index];\n          if (subNode) {\n            if (subNode.entry) {\n              return mapIteratorValue(type, subNode.entry);\n            }\n            stack = this._stack = mapIteratorFrame(subNode, stack);\n          }\n          continue;\n        }\n      }\n      stack = this._stack = this._stack.__prev;\n    }\n    return iteratorDone();\n  };\n\n  return MapIterator;\n}(Iterator));\n\nfunction mapIteratorValue(type, entry) {\n  return iteratorValue(type, entry[0], entry[1]);\n}\n\nfunction mapIteratorFrame(node, prev) {\n  return {\n    node: node,\n    index: 0,\n    __prev: prev,\n  };\n}\n\nfunction makeMap(size, root, ownerID, hash) {\n  var map = Object.create(MapPrototype);\n  map.size = size;\n  map._root = root;\n  map.__ownerID = ownerID;\n  map.__hash = hash;\n  map.__altered = false;\n  return map;\n}\n\nvar EMPTY_MAP;\nfunction emptyMap() {\n  return EMPTY_MAP || (EMPTY_MAP = makeMap(0));\n}\n\nfunction updateMap(map, k, v) {\n  var newRoot;\n  var newSize;\n  if (!map._root) {\n    if (v === NOT_SET) {\n      return map;\n    }\n    newSize = 1;\n    newRoot = new ArrayMapNode(map.__ownerID, [[k, v]]);\n  } else {\n    var didChangeSize = MakeRef();\n    var didAlter = MakeRef();\n    newRoot = updateNode(\n      map._root,\n      map.__ownerID,\n      0,\n      undefined,\n      k,\n      v,\n      didChangeSize,\n      didAlter\n    );\n    if (!didAlter.value) {\n      return map;\n    }\n    newSize = map.size + (didChangeSize.value ? (v === NOT_SET ? -1 : 1) : 0);\n  }\n  if (map.__ownerID) {\n    map.size = newSize;\n    map._root = newRoot;\n    map.__hash = undefined;\n    map.__altered = true;\n    return map;\n  }\n  return newRoot ? makeMap(newSize, newRoot) : emptyMap();\n}\n\nfunction updateNode(\n  node,\n  ownerID,\n  shift,\n  keyHash,\n  key,\n  value,\n  didChangeSize,\n  didAlter\n) {\n  if (!node) {\n    if (value === NOT_SET) {\n      return node;\n    }\n    SetRef(didAlter);\n    SetRef(didChangeSize);\n    return new ValueNode(ownerID, keyHash, [key, value]);\n  }\n  return node.update(\n    ownerID,\n    shift,\n    keyHash,\n    key,\n    value,\n    didChangeSize,\n    didAlter\n  );\n}\n\nfunction isLeafNode(node) {\n  return (\n    node.constructor === ValueNode || node.constructor === HashCollisionNode\n  );\n}\n\nfunction mergeIntoNode(node, ownerID, shift, keyHash, entry) {\n  if (node.keyHash === keyHash) {\n    return new HashCollisionNode(ownerID, keyHash, [node.entry, entry]);\n  }\n\n  var idx1 = (shift === 0 ? node.keyHash : node.keyHash >>> shift) & MASK;\n  var idx2 = (shift === 0 ? keyHash : keyHash >>> shift) & MASK;\n\n  var newNode;\n  var nodes =\n    idx1 === idx2\n      ? [mergeIntoNode(node, ownerID, shift + SHIFT, keyHash, entry)]\n      : ((newNode = new ValueNode(ownerID, keyHash, entry)),\n        idx1 < idx2 ? [node, newNode] : [newNode, node]);\n\n  return new BitmapIndexedNode(ownerID, (1 << idx1) | (1 << idx2), nodes);\n}\n\nfunction createNodes(ownerID, entries, key, value) {\n  if (!ownerID) {\n    ownerID = new OwnerID();\n  }\n  var node = new ValueNode(ownerID, hash(key), [key, value]);\n  for (var ii = 0; ii < entries.length; ii++) {\n    var entry = entries[ii];\n    node = node.update(ownerID, 0, undefined, entry[0], entry[1]);\n  }\n  return node;\n}\n\nfunction packNodes(ownerID, nodes, count, excluding) {\n  var bitmap = 0;\n  var packedII = 0;\n  var packedNodes = new Array(count);\n  for (var ii = 0, bit = 1, len = nodes.length; ii < len; ii++, bit <<= 1) {\n    var node = nodes[ii];\n    if (node !== undefined && ii !== excluding) {\n      bitmap |= bit;\n      packedNodes[packedII++] = node;\n    }\n  }\n  return new BitmapIndexedNode(ownerID, bitmap, packedNodes);\n}\n\nfunction expandNodes(ownerID, nodes, bitmap, including, node) {\n  var count = 0;\n  var expandedNodes = new Array(SIZE);\n  for (var ii = 0; bitmap !== 0; ii++, bitmap >>>= 1) {\n    expandedNodes[ii] = bitmap & 1 ? nodes[count++] : undefined;\n  }\n  expandedNodes[including] = node;\n  return new HashArrayMapNode(ownerID, count + 1, expandedNodes);\n}\n\nfunction popCount(x) {\n  x -= (x >> 1) & 0x55555555;\n  x = (x & 0x33333333) + ((x >> 2) & 0x33333333);\n  x = (x + (x >> 4)) & 0x0f0f0f0f;\n  x += x >> 8;\n  x += x >> 16;\n  return x & 0x7f;\n}\n\nfunction setAt(array, idx, val, canEdit) {\n  var newArray = canEdit ? array : arrCopy(array);\n  newArray[idx] = val;\n  return newArray;\n}\n\nfunction spliceIn(array, idx, val, canEdit) {\n  var newLen = array.length + 1;\n  if (canEdit && idx + 1 === newLen) {\n    array[idx] = val;\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      newArray[ii] = val;\n      after = -1;\n    } else {\n      newArray[ii] = array[ii + after];\n    }\n  }\n  return newArray;\n}\n\nfunction spliceOut(array, idx, canEdit) {\n  var newLen = array.length - 1;\n  if (canEdit && idx === newLen) {\n    array.pop();\n    return array;\n  }\n  var newArray = new Array(newLen);\n  var after = 0;\n  for (var ii = 0; ii < newLen; ii++) {\n    if (ii === idx) {\n      after = 1;\n    }\n    newArray[ii] = array[ii + after];\n  }\n  return newArray;\n}\n\nvar MAX_ARRAY_MAP_SIZE = SIZE / 4;\nvar MAX_BITMAP_INDEXED_SIZE = SIZE / 2;\nvar MIN_HASH_ARRAY_MAP_SIZE = SIZE / 4;\n\nvar IS_LIST_SYMBOL = '@@__IMMUTABLE_LIST__@@';\n\nfunction isList(maybeList) {\n  return Boolean(maybeList && maybeList[IS_LIST_SYMBOL]);\n}\n\nvar List = /*@__PURE__*/(function (IndexedCollection) {\n  function List(value) {\n    var empty = emptyList();\n    if (value === undefined || value === null) {\n      return empty;\n    }\n    if (isList(value)) {\n      return value;\n    }\n    var iter = IndexedCollection(value);\n    var size = iter.size;\n    if (size === 0) {\n      return empty;\n    }\n    assertNotInfinite(size);\n    if (size > 0 && size < SIZE) {\n      return makeList(0, size, SHIFT, null, new VNode(iter.toArray()));\n    }\n    return empty.withMutations(function (list) {\n      list.setSize(size);\n      iter.forEach(function (v, i) { return list.set(i, v); });\n    });\n  }\n\n  if ( IndexedCollection ) List.__proto__ = IndexedCollection;\n  List.prototype = Object.create( IndexedCollection && IndexedCollection.prototype );\n  List.prototype.constructor = List;\n\n  List.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  List.prototype.toString = function toString () {\n    return this.__toString('List [', ']');\n  };\n\n  // @pragma Access\n\n  List.prototype.get = function get (index, notSetValue) {\n    index = wrapIndex(this, index);\n    if (index >= 0 && index < this.size) {\n      index += this._origin;\n      var node = listNodeFor(this, index);\n      return node && node.array[index & MASK];\n    }\n    return notSetValue;\n  };\n\n  // @pragma Modification\n\n  List.prototype.set = function set (index, value) {\n    return updateList(this, index, value);\n  };\n\n  List.prototype.remove = function remove (index) {\n    return !this.has(index)\n      ? this\n      : index === 0\n      ? this.shift()\n      : index === this.size - 1\n      ? this.pop()\n      : this.splice(index, 1);\n  };\n\n  List.prototype.insert = function insert (index, value) {\n    return this.splice(index, 0, value);\n  };\n\n  List.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = this._origin = this._capacity = 0;\n      this._level = SHIFT;\n      this._root = this._tail = this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyList();\n  };\n\n  List.prototype.push = function push (/*...values*/) {\n    var values = arguments;\n    var oldSize = this.size;\n    return this.withMutations(function (list) {\n      setListBounds(list, 0, oldSize + values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(oldSize + ii, values[ii]);\n      }\n    });\n  };\n\n  List.prototype.pop = function pop () {\n    return setListBounds(this, 0, -1);\n  };\n\n  List.prototype.unshift = function unshift (/*...values*/) {\n    var values = arguments;\n    return this.withMutations(function (list) {\n      setListBounds(list, -values.length);\n      for (var ii = 0; ii < values.length; ii++) {\n        list.set(ii, values[ii]);\n      }\n    });\n  };\n\n  List.prototype.shift = function shift () {\n    return setListBounds(this, 1);\n  };\n\n  // @pragma Composition\n\n  List.prototype.concat = function concat (/*...collections*/) {\n    var arguments$1 = arguments;\n\n    var seqs = [];\n    for (var i = 0; i < arguments.length; i++) {\n      var argument = arguments$1[i];\n      var seq = IndexedCollection(\n        typeof argument !== 'string' && hasIterator(argument)\n          ? argument\n          : [argument]\n      );\n      if (seq.size !== 0) {\n        seqs.push(seq);\n      }\n    }\n    if (seqs.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && seqs.length === 1) {\n      return this.constructor(seqs[0]);\n    }\n    return this.withMutations(function (list) {\n      seqs.forEach(function (seq) { return seq.forEach(function (value) { return list.push(value); }); });\n    });\n  };\n\n  List.prototype.setSize = function setSize (size) {\n    return setListBounds(this, 0, size);\n  };\n\n  List.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    return this.withMutations(function (list) {\n      for (var i = 0; i < this$1$1.size; i++) {\n        list.set(i, mapper.call(context, list.get(i), i, this$1$1));\n      }\n    });\n  };\n\n  // @pragma Iteration\n\n  List.prototype.slice = function slice (begin, end) {\n    var size = this.size;\n    if (wholeSlice(begin, end, size)) {\n      return this;\n    }\n    return setListBounds(\n      this,\n      resolveBegin(begin, size),\n      resolveEnd(end, size)\n    );\n  };\n\n  List.prototype.__iterator = function __iterator (type, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    return new Iterator(function () {\n      var value = values();\n      return value === DONE\n        ? iteratorDone()\n        : iteratorValue(type, reverse ? --index : index++, value);\n    });\n  };\n\n  List.prototype.__iterate = function __iterate (fn, reverse) {\n    var index = reverse ? this.size : 0;\n    var values = iterateList(this, reverse);\n    var value;\n    while ((value = values()) !== DONE) {\n      if (fn(value, reverse ? --index : index++, this) === false) {\n        break;\n      }\n    }\n    return index;\n  };\n\n  List.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyList();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeList(\n      this._origin,\n      this._capacity,\n      this._level,\n      this._root,\n      this._tail,\n      ownerID,\n      this.__hash\n    );\n  };\n\n  return List;\n}(IndexedCollection));\n\nList.isList = isList;\n\nvar ListPrototype = List.prototype;\nListPrototype[IS_LIST_SYMBOL] = true;\nListPrototype[DELETE] = ListPrototype.remove;\nListPrototype.merge = ListPrototype.concat;\nListPrototype.setIn = setIn;\nListPrototype.deleteIn = ListPrototype.removeIn = deleteIn;\nListPrototype.update = update;\nListPrototype.updateIn = updateIn;\nListPrototype.mergeIn = mergeIn;\nListPrototype.mergeDeepIn = mergeDeepIn;\nListPrototype.withMutations = withMutations;\nListPrototype.wasAltered = wasAltered;\nListPrototype.asImmutable = asImmutable;\nListPrototype['@@transducer/init'] = ListPrototype.asMutable = asMutable;\nListPrototype['@@transducer/step'] = function (result, arr) {\n  return result.push(arr);\n};\nListPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\nvar VNode = function VNode(array, ownerID) {\n  this.array = array;\n  this.ownerID = ownerID;\n};\n\n// TODO: seems like these methods are very similar\n\nVNode.prototype.removeBefore = function removeBefore (ownerID, level, index) {\n  if (index === level ? 1 << level : this.array.length === 0) {\n    return this;\n  }\n  var originIndex = (index >>> level) & MASK;\n  if (originIndex >= this.array.length) {\n    return new VNode([], ownerID);\n  }\n  var removingFirst = originIndex === 0;\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[originIndex];\n    newChild =\n      oldChild && oldChild.removeBefore(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && removingFirst) {\n      return this;\n    }\n  }\n  if (removingFirst && !newChild) {\n    return this;\n  }\n  var editable = editableVNode(this, ownerID);\n  if (!removingFirst) {\n    for (var ii = 0; ii < originIndex; ii++) {\n      editable.array[ii] = undefined;\n    }\n  }\n  if (newChild) {\n    editable.array[originIndex] = newChild;\n  }\n  return editable;\n};\n\nVNode.prototype.removeAfter = function removeAfter (ownerID, level, index) {\n  if (index === (level ? 1 << level : 0) || this.array.length === 0) {\n    return this;\n  }\n  var sizeIndex = ((index - 1) >>> level) & MASK;\n  if (sizeIndex >= this.array.length) {\n    return this;\n  }\n\n  var newChild;\n  if (level > 0) {\n    var oldChild = this.array[sizeIndex];\n    newChild =\n      oldChild && oldChild.removeAfter(ownerID, level - SHIFT, index);\n    if (newChild === oldChild && sizeIndex === this.array.length - 1) {\n      return this;\n    }\n  }\n\n  var editable = editableVNode(this, ownerID);\n  editable.array.splice(sizeIndex + 1);\n  if (newChild) {\n    editable.array[sizeIndex] = newChild;\n  }\n  return editable;\n};\n\nvar DONE = {};\n\nfunction iterateList(list, reverse) {\n  var left = list._origin;\n  var right = list._capacity;\n  var tailPos = getTailOffset(right);\n  var tail = list._tail;\n\n  return iterateNodeOrLeaf(list._root, list._level, 0);\n\n  function iterateNodeOrLeaf(node, level, offset) {\n    return level === 0\n      ? iterateLeaf(node, offset)\n      : iterateNode(node, level, offset);\n  }\n\n  function iterateLeaf(node, offset) {\n    var array = offset === tailPos ? tail && tail.array : node && node.array;\n    var from = offset > left ? 0 : left - offset;\n    var to = right - offset;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      if (from === to) {\n        return DONE;\n      }\n      var idx = reverse ? --to : from++;\n      return array && array[idx];\n    };\n  }\n\n  function iterateNode(node, level, offset) {\n    var values;\n    var array = node && node.array;\n    var from = offset > left ? 0 : (left - offset) >> level;\n    var to = ((right - offset) >> level) + 1;\n    if (to > SIZE) {\n      to = SIZE;\n    }\n    return function () {\n      while (true) {\n        if (values) {\n          var value = values();\n          if (value !== DONE) {\n            return value;\n          }\n          values = null;\n        }\n        if (from === to) {\n          return DONE;\n        }\n        var idx = reverse ? --to : from++;\n        values = iterateNodeOrLeaf(\n          array && array[idx],\n          level - SHIFT,\n          offset + (idx << level)\n        );\n      }\n    };\n  }\n}\n\nfunction makeList(origin, capacity, level, root, tail, ownerID, hash) {\n  var list = Object.create(ListPrototype);\n  list.size = capacity - origin;\n  list._origin = origin;\n  list._capacity = capacity;\n  list._level = level;\n  list._root = root;\n  list._tail = tail;\n  list.__ownerID = ownerID;\n  list.__hash = hash;\n  list.__altered = false;\n  return list;\n}\n\nvar EMPTY_LIST;\nfunction emptyList() {\n  return EMPTY_LIST || (EMPTY_LIST = makeList(0, 0, SHIFT));\n}\n\nfunction updateList(list, index, value) {\n  index = wrapIndex(list, index);\n\n  if (index !== index) {\n    return list;\n  }\n\n  if (index >= list.size || index < 0) {\n    return list.withMutations(function (list) {\n      index < 0\n        ? setListBounds(list, index).set(0, value)\n        : setListBounds(list, 0, index + 1).set(index, value);\n    });\n  }\n\n  index += list._origin;\n\n  var newTail = list._tail;\n  var newRoot = list._root;\n  var didAlter = MakeRef();\n  if (index >= getTailOffset(list._capacity)) {\n    newTail = updateVNode(newTail, list.__ownerID, 0, index, value, didAlter);\n  } else {\n    newRoot = updateVNode(\n      newRoot,\n      list.__ownerID,\n      list._level,\n      index,\n      value,\n      didAlter\n    );\n  }\n\n  if (!didAlter.value) {\n    return list;\n  }\n\n  if (list.__ownerID) {\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(list._origin, list._capacity, list._level, newRoot, newTail);\n}\n\nfunction updateVNode(node, ownerID, level, index, value, didAlter) {\n  var idx = (index >>> level) & MASK;\n  var nodeHas = node && idx < node.array.length;\n  if (!nodeHas && value === undefined) {\n    return node;\n  }\n\n  var newNode;\n\n  if (level > 0) {\n    var lowerNode = node && node.array[idx];\n    var newLowerNode = updateVNode(\n      lowerNode,\n      ownerID,\n      level - SHIFT,\n      index,\n      value,\n      didAlter\n    );\n    if (newLowerNode === lowerNode) {\n      return node;\n    }\n    newNode = editableVNode(node, ownerID);\n    newNode.array[idx] = newLowerNode;\n    return newNode;\n  }\n\n  if (nodeHas && node.array[idx] === value) {\n    return node;\n  }\n\n  if (didAlter) {\n    SetRef(didAlter);\n  }\n\n  newNode = editableVNode(node, ownerID);\n  if (value === undefined && idx === newNode.array.length - 1) {\n    newNode.array.pop();\n  } else {\n    newNode.array[idx] = value;\n  }\n  return newNode;\n}\n\nfunction editableVNode(node, ownerID) {\n  if (ownerID && node && ownerID === node.ownerID) {\n    return node;\n  }\n  return new VNode(node ? node.array.slice() : [], ownerID);\n}\n\nfunction listNodeFor(list, rawIndex) {\n  if (rawIndex >= getTailOffset(list._capacity)) {\n    return list._tail;\n  }\n  if (rawIndex < 1 << (list._level + SHIFT)) {\n    var node = list._root;\n    var level = list._level;\n    while (node && level > 0) {\n      node = node.array[(rawIndex >>> level) & MASK];\n      level -= SHIFT;\n    }\n    return node;\n  }\n}\n\nfunction setListBounds(list, begin, end) {\n  // Sanitize begin & end using this shorthand for ToInt32(argument)\n  // http://www.ecma-international.org/ecma-262/6.0/#sec-toint32\n  if (begin !== undefined) {\n    begin |= 0;\n  }\n  if (end !== undefined) {\n    end |= 0;\n  }\n  var owner = list.__ownerID || new OwnerID();\n  var oldOrigin = list._origin;\n  var oldCapacity = list._capacity;\n  var newOrigin = oldOrigin + begin;\n  var newCapacity =\n    end === undefined\n      ? oldCapacity\n      : end < 0\n      ? oldCapacity + end\n      : oldOrigin + end;\n  if (newOrigin === oldOrigin && newCapacity === oldCapacity) {\n    return list;\n  }\n\n  // If it's going to end after it starts, it's empty.\n  if (newOrigin >= newCapacity) {\n    return list.clear();\n  }\n\n  var newLevel = list._level;\n  var newRoot = list._root;\n\n  // New origin might need creating a higher root.\n  var offsetShift = 0;\n  while (newOrigin + offsetShift < 0) {\n    newRoot = new VNode(\n      newRoot && newRoot.array.length ? [undefined, newRoot] : [],\n      owner\n    );\n    newLevel += SHIFT;\n    offsetShift += 1 << newLevel;\n  }\n  if (offsetShift) {\n    newOrigin += offsetShift;\n    oldOrigin += offsetShift;\n    newCapacity += offsetShift;\n    oldCapacity += offsetShift;\n  }\n\n  var oldTailOffset = getTailOffset(oldCapacity);\n  var newTailOffset = getTailOffset(newCapacity);\n\n  // New size might need creating a higher root.\n  while (newTailOffset >= 1 << (newLevel + SHIFT)) {\n    newRoot = new VNode(\n      newRoot && newRoot.array.length ? [newRoot] : [],\n      owner\n    );\n    newLevel += SHIFT;\n  }\n\n  // Locate or create the new tail.\n  var oldTail = list._tail;\n  var newTail =\n    newTailOffset < oldTailOffset\n      ? listNodeFor(list, newCapacity - 1)\n      : newTailOffset > oldTailOffset\n      ? new VNode([], owner)\n      : oldTail;\n\n  // Merge Tail into tree.\n  if (\n    oldTail &&\n    newTailOffset > oldTailOffset &&\n    newOrigin < oldCapacity &&\n    oldTail.array.length\n  ) {\n    newRoot = editableVNode(newRoot, owner);\n    var node = newRoot;\n    for (var level = newLevel; level > SHIFT; level -= SHIFT) {\n      var idx = (oldTailOffset >>> level) & MASK;\n      node = node.array[idx] = editableVNode(node.array[idx], owner);\n    }\n    node.array[(oldTailOffset >>> SHIFT) & MASK] = oldTail;\n  }\n\n  // If the size has been reduced, there's a chance the tail needs to be trimmed.\n  if (newCapacity < oldCapacity) {\n    newTail = newTail && newTail.removeAfter(owner, 0, newCapacity);\n  }\n\n  // If the new origin is within the tail, then we do not need a root.\n  if (newOrigin >= newTailOffset) {\n    newOrigin -= newTailOffset;\n    newCapacity -= newTailOffset;\n    newLevel = SHIFT;\n    newRoot = null;\n    newTail = newTail && newTail.removeBefore(owner, 0, newOrigin);\n\n    // Otherwise, if the root has been trimmed, garbage collect.\n  } else if (newOrigin > oldOrigin || newTailOffset < oldTailOffset) {\n    offsetShift = 0;\n\n    // Identify the new top root node of the subtree of the old root.\n    while (newRoot) {\n      var beginIndex = (newOrigin >>> newLevel) & MASK;\n      if ((beginIndex !== newTailOffset >>> newLevel) & MASK) {\n        break;\n      }\n      if (beginIndex) {\n        offsetShift += (1 << newLevel) * beginIndex;\n      }\n      newLevel -= SHIFT;\n      newRoot = newRoot.array[beginIndex];\n    }\n\n    // Trim the new sides of the new root.\n    if (newRoot && newOrigin > oldOrigin) {\n      newRoot = newRoot.removeBefore(owner, newLevel, newOrigin - offsetShift);\n    }\n    if (newRoot && newTailOffset < oldTailOffset) {\n      newRoot = newRoot.removeAfter(\n        owner,\n        newLevel,\n        newTailOffset - offsetShift\n      );\n    }\n    if (offsetShift) {\n      newOrigin -= offsetShift;\n      newCapacity -= offsetShift;\n    }\n  }\n\n  if (list.__ownerID) {\n    list.size = newCapacity - newOrigin;\n    list._origin = newOrigin;\n    list._capacity = newCapacity;\n    list._level = newLevel;\n    list._root = newRoot;\n    list._tail = newTail;\n    list.__hash = undefined;\n    list.__altered = true;\n    return list;\n  }\n  return makeList(newOrigin, newCapacity, newLevel, newRoot, newTail);\n}\n\nfunction getTailOffset(size) {\n  return size < SIZE ? 0 : ((size - 1) >>> SHIFT) << SHIFT;\n}\n\nvar OrderedMap = /*@__PURE__*/(function (Map) {\n  function OrderedMap(value) {\n    return value === undefined || value === null\n      ? emptyOrderedMap()\n      : isOrderedMap(value)\n      ? value\n      : emptyOrderedMap().withMutations(function (map) {\n          var iter = KeyedCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v, k) { return map.set(k, v); });\n        });\n  }\n\n  if ( Map ) OrderedMap.__proto__ = Map;\n  OrderedMap.prototype = Object.create( Map && Map.prototype );\n  OrderedMap.prototype.constructor = OrderedMap;\n\n  OrderedMap.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  OrderedMap.prototype.toString = function toString () {\n    return this.__toString('OrderedMap {', '}');\n  };\n\n  // @pragma Access\n\n  OrderedMap.prototype.get = function get (k, notSetValue) {\n    var index = this._map.get(k);\n    return index !== undefined ? this._list.get(index)[1] : notSetValue;\n  };\n\n  // @pragma Modification\n\n  OrderedMap.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._map.clear();\n      this._list.clear();\n      this.__altered = true;\n      return this;\n    }\n    return emptyOrderedMap();\n  };\n\n  OrderedMap.prototype.set = function set (k, v) {\n    return updateOrderedMap(this, k, v);\n  };\n\n  OrderedMap.prototype.remove = function remove (k) {\n    return updateOrderedMap(this, k, NOT_SET);\n  };\n\n  OrderedMap.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._list.__iterate(\n      function (entry) { return entry && fn(entry[1], entry[0], this$1$1); },\n      reverse\n    );\n  };\n\n  OrderedMap.prototype.__iterator = function __iterator (type, reverse) {\n    return this._list.fromEntrySeq().__iterator(type, reverse);\n  };\n\n  OrderedMap.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    var newList = this._list.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyOrderedMap();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      this._map = newMap;\n      this._list = newList;\n      return this;\n    }\n    return makeOrderedMap(newMap, newList, ownerID, this.__hash);\n  };\n\n  return OrderedMap;\n}(Map));\n\nOrderedMap.isOrderedMap = isOrderedMap;\n\nOrderedMap.prototype[IS_ORDERED_SYMBOL] = true;\nOrderedMap.prototype[DELETE] = OrderedMap.prototype.remove;\n\nfunction makeOrderedMap(map, list, ownerID, hash) {\n  var omap = Object.create(OrderedMap.prototype);\n  omap.size = map ? map.size : 0;\n  omap._map = map;\n  omap._list = list;\n  omap.__ownerID = ownerID;\n  omap.__hash = hash;\n  omap.__altered = false;\n  return omap;\n}\n\nvar EMPTY_ORDERED_MAP;\nfunction emptyOrderedMap() {\n  return (\n    EMPTY_ORDERED_MAP ||\n    (EMPTY_ORDERED_MAP = makeOrderedMap(emptyMap(), emptyList()))\n  );\n}\n\nfunction updateOrderedMap(omap, k, v) {\n  var map = omap._map;\n  var list = omap._list;\n  var i = map.get(k);\n  var has = i !== undefined;\n  var newMap;\n  var newList;\n  if (v === NOT_SET) {\n    // removed\n    if (!has) {\n      return omap;\n    }\n    if (list.size >= SIZE && list.size >= map.size * 2) {\n      newList = list.filter(function (entry, idx) { return entry !== undefined && i !== idx; });\n      newMap = newList\n        .toKeyedSeq()\n        .map(function (entry) { return entry[0]; })\n        .flip()\n        .toMap();\n      if (omap.__ownerID) {\n        newMap.__ownerID = newList.__ownerID = omap.__ownerID;\n      }\n    } else {\n      newMap = map.remove(k);\n      newList = i === list.size - 1 ? list.pop() : list.set(i, undefined);\n    }\n  } else if (has) {\n    if (v === list.get(i)[1]) {\n      return omap;\n    }\n    newMap = map;\n    newList = list.set(i, [k, v]);\n  } else {\n    newMap = map.set(k, list.size);\n    newList = list.set(list.size, [k, v]);\n  }\n  if (omap.__ownerID) {\n    omap.size = newMap.size;\n    omap._map = newMap;\n    omap._list = newList;\n    omap.__hash = undefined;\n    omap.__altered = true;\n    return omap;\n  }\n  return makeOrderedMap(newMap, newList);\n}\n\nvar IS_STACK_SYMBOL = '@@__IMMUTABLE_STACK__@@';\n\nfunction isStack(maybeStack) {\n  return Boolean(maybeStack && maybeStack[IS_STACK_SYMBOL]);\n}\n\nvar Stack = /*@__PURE__*/(function (IndexedCollection) {\n  function Stack(value) {\n    return value === undefined || value === null\n      ? emptyStack()\n      : isStack(value)\n      ? value\n      : emptyStack().pushAll(value);\n  }\n\n  if ( IndexedCollection ) Stack.__proto__ = IndexedCollection;\n  Stack.prototype = Object.create( IndexedCollection && IndexedCollection.prototype );\n  Stack.prototype.constructor = Stack;\n\n  Stack.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  Stack.prototype.toString = function toString () {\n    return this.__toString('Stack [', ']');\n  };\n\n  // @pragma Access\n\n  Stack.prototype.get = function get (index, notSetValue) {\n    var head = this._head;\n    index = wrapIndex(this, index);\n    while (head && index--) {\n      head = head.next;\n    }\n    return head ? head.value : notSetValue;\n  };\n\n  Stack.prototype.peek = function peek () {\n    return this._head && this._head.value;\n  };\n\n  // @pragma Modification\n\n  Stack.prototype.push = function push (/*...values*/) {\n    var arguments$1 = arguments;\n\n    if (arguments.length === 0) {\n      return this;\n    }\n    var newSize = this.size + arguments.length;\n    var head = this._head;\n    for (var ii = arguments.length - 1; ii >= 0; ii--) {\n      head = {\n        value: arguments$1[ii],\n        next: head,\n      };\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  Stack.prototype.pushAll = function pushAll (iter) {\n    iter = IndexedCollection(iter);\n    if (iter.size === 0) {\n      return this;\n    }\n    if (this.size === 0 && isStack(iter)) {\n      return iter;\n    }\n    assertNotInfinite(iter.size);\n    var newSize = this.size;\n    var head = this._head;\n    iter.__iterate(function (value) {\n      newSize++;\n      head = {\n        value: value,\n        next: head,\n      };\n    }, /* reverse */ true);\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  Stack.prototype.pop = function pop () {\n    return this.slice(1);\n  };\n\n  Stack.prototype.clear = function clear () {\n    if (this.size === 0) {\n      return this;\n    }\n    if (this.__ownerID) {\n      this.size = 0;\n      this._head = undefined;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return emptyStack();\n  };\n\n  Stack.prototype.slice = function slice (begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    var resolvedBegin = resolveBegin(begin, this.size);\n    var resolvedEnd = resolveEnd(end, this.size);\n    if (resolvedEnd !== this.size) {\n      // super.slice(begin, end);\n      return IndexedCollection.prototype.slice.call(this, begin, end);\n    }\n    var newSize = this.size - resolvedBegin;\n    var head = this._head;\n    while (resolvedBegin--) {\n      head = head.next;\n    }\n    if (this.__ownerID) {\n      this.size = newSize;\n      this._head = head;\n      this.__hash = undefined;\n      this.__altered = true;\n      return this;\n    }\n    return makeStack(newSize, head);\n  };\n\n  // @pragma Mutability\n\n  Stack.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    if (!ownerID) {\n      if (this.size === 0) {\n        return emptyStack();\n      }\n      this.__ownerID = ownerID;\n      this.__altered = false;\n      return this;\n    }\n    return makeStack(this.size, this._head, ownerID, this.__hash);\n  };\n\n  // @pragma Iteration\n\n  Stack.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterate(\n        function (v, k) { return fn(v, k, this$1$1); },\n        reverse\n      );\n    }\n    var iterations = 0;\n    var node = this._head;\n    while (node) {\n      if (fn(node.value, iterations++, this) === false) {\n        break;\n      }\n      node = node.next;\n    }\n    return iterations;\n  };\n\n  Stack.prototype.__iterator = function __iterator (type, reverse) {\n    if (reverse) {\n      return new ArraySeq(this.toArray()).__iterator(type, reverse);\n    }\n    var iterations = 0;\n    var node = this._head;\n    return new Iterator(function () {\n      if (node) {\n        var value = node.value;\n        node = node.next;\n        return iteratorValue(type, iterations++, value);\n      }\n      return iteratorDone();\n    });\n  };\n\n  return Stack;\n}(IndexedCollection));\n\nStack.isStack = isStack;\n\nvar StackPrototype = Stack.prototype;\nStackPrototype[IS_STACK_SYMBOL] = true;\nStackPrototype.shift = StackPrototype.pop;\nStackPrototype.unshift = StackPrototype.push;\nStackPrototype.unshiftAll = StackPrototype.pushAll;\nStackPrototype.withMutations = withMutations;\nStackPrototype.wasAltered = wasAltered;\nStackPrototype.asImmutable = asImmutable;\nStackPrototype['@@transducer/init'] = StackPrototype.asMutable = asMutable;\nStackPrototype['@@transducer/step'] = function (result, arr) {\n  return result.unshift(arr);\n};\nStackPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\nfunction makeStack(size, head, ownerID, hash) {\n  var map = Object.create(StackPrototype);\n  map.size = size;\n  map._head = head;\n  map.__ownerID = ownerID;\n  map.__hash = hash;\n  map.__altered = false;\n  return map;\n}\n\nvar EMPTY_STACK;\nfunction emptyStack() {\n  return EMPTY_STACK || (EMPTY_STACK = makeStack(0));\n}\n\nvar IS_SET_SYMBOL = '@@__IMMUTABLE_SET__@@';\n\nfunction isSet(maybeSet) {\n  return Boolean(maybeSet && maybeSet[IS_SET_SYMBOL]);\n}\n\nfunction isOrderedSet(maybeOrderedSet) {\n  return isSet(maybeOrderedSet) && isOrdered(maybeOrderedSet);\n}\n\nfunction deepEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (\n    !isCollection(b) ||\n    (a.size !== undefined && b.size !== undefined && a.size !== b.size) ||\n    (a.__hash !== undefined &&\n      b.__hash !== undefined &&\n      a.__hash !== b.__hash) ||\n    isKeyed(a) !== isKeyed(b) ||\n    isIndexed(a) !== isIndexed(b) ||\n    isOrdered(a) !== isOrdered(b)\n  ) {\n    return false;\n  }\n\n  if (a.size === 0 && b.size === 0) {\n    return true;\n  }\n\n  var notAssociative = !isAssociative(a);\n\n  if (isOrdered(a)) {\n    var entries = a.entries();\n    return (\n      b.every(function (v, k) {\n        var entry = entries.next().value;\n        return entry && is(entry[1], v) && (notAssociative || is(entry[0], k));\n      }) && entries.next().done\n    );\n  }\n\n  var flipped = false;\n\n  if (a.size === undefined) {\n    if (b.size === undefined) {\n      if (typeof a.cacheResult === 'function') {\n        a.cacheResult();\n      }\n    } else {\n      flipped = true;\n      var _ = a;\n      a = b;\n      b = _;\n    }\n  }\n\n  var allEqual = true;\n  var bSize = b.__iterate(function (v, k) {\n    if (\n      notAssociative\n        ? !a.has(v)\n        : flipped\n        ? !is(v, a.get(k, NOT_SET))\n        : !is(a.get(k, NOT_SET), v)\n    ) {\n      allEqual = false;\n      return false;\n    }\n  });\n\n  return allEqual && a.size === bSize;\n}\n\nfunction mixin(ctor, methods) {\n  var keyCopier = function (key) {\n    ctor.prototype[key] = methods[key];\n  };\n  Object.keys(methods).forEach(keyCopier);\n  Object.getOwnPropertySymbols &&\n    Object.getOwnPropertySymbols(methods).forEach(keyCopier);\n  return ctor;\n}\n\nfunction toJS(value) {\n  if (!value || typeof value !== 'object') {\n    return value;\n  }\n  if (!isCollection(value)) {\n    if (!isDataStructure(value)) {\n      return value;\n    }\n    value = Seq(value);\n  }\n  if (isKeyed(value)) {\n    var result$1 = {};\n    value.__iterate(function (v, k) {\n      result$1[k] = toJS(v);\n    });\n    return result$1;\n  }\n  var result = [];\n  value.__iterate(function (v) {\n    result.push(toJS(v));\n  });\n  return result;\n}\n\nvar Set = /*@__PURE__*/(function (SetCollection) {\n  function Set(value) {\n    return value === undefined || value === null\n      ? emptySet()\n      : isSet(value) && !isOrdered(value)\n      ? value\n      : emptySet().withMutations(function (set) {\n          var iter = SetCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v) { return set.add(v); });\n        });\n  }\n\n  if ( SetCollection ) Set.__proto__ = SetCollection;\n  Set.prototype = Object.create( SetCollection && SetCollection.prototype );\n  Set.prototype.constructor = Set;\n\n  Set.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  Set.fromKeys = function fromKeys (value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n\n  Set.intersect = function intersect (sets) {\n    sets = Collection(sets).toArray();\n    return sets.length\n      ? SetPrototype.intersect.apply(Set(sets.pop()), sets)\n      : emptySet();\n  };\n\n  Set.union = function union (sets) {\n    sets = Collection(sets).toArray();\n    return sets.length\n      ? SetPrototype.union.apply(Set(sets.pop()), sets)\n      : emptySet();\n  };\n\n  Set.prototype.toString = function toString () {\n    return this.__toString('Set {', '}');\n  };\n\n  // @pragma Access\n\n  Set.prototype.has = function has (value) {\n    return this._map.has(value);\n  };\n\n  // @pragma Modification\n\n  Set.prototype.add = function add (value) {\n    return updateSet(this, this._map.set(value, value));\n  };\n\n  Set.prototype.remove = function remove (value) {\n    return updateSet(this, this._map.remove(value));\n  };\n\n  Set.prototype.clear = function clear () {\n    return updateSet(this, this._map.clear());\n  };\n\n  // @pragma Composition\n\n  Set.prototype.map = function map (mapper, context) {\n    var this$1$1 = this;\n\n    // keep track if the set is altered by the map function\n    var didChanges = false;\n\n    var newMap = updateSet(\n      this,\n      this._map.mapEntries(function (ref) {\n        var v = ref[1];\n\n        var mapped = mapper.call(context, v, v, this$1$1);\n\n        if (mapped !== v) {\n          didChanges = true;\n        }\n\n        return [mapped, mapped];\n      }, context)\n    );\n\n    return didChanges ? newMap : this;\n  };\n\n  Set.prototype.union = function union () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    iters = iters.filter(function (x) { return x.size !== 0; });\n    if (iters.length === 0) {\n      return this;\n    }\n    if (this.size === 0 && !this.__ownerID && iters.length === 1) {\n      return this.constructor(iters[0]);\n    }\n    return this.withMutations(function (set) {\n      for (var ii = 0; ii < iters.length; ii++) {\n        if (typeof iters[ii] === 'string') {\n          set.add(iters[ii]);\n        } else {\n          SetCollection(iters[ii]).forEach(function (value) { return set.add(value); });\n        }\n      }\n    });\n  };\n\n  Set.prototype.intersect = function intersect () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) { return SetCollection(iter); });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (!iters.every(function (iter) { return iter.includes(value); })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n\n  Set.prototype.subtract = function subtract () {\n    var iters = [], len = arguments.length;\n    while ( len-- ) iters[ len ] = arguments[ len ];\n\n    if (iters.length === 0) {\n      return this;\n    }\n    iters = iters.map(function (iter) { return SetCollection(iter); });\n    var toRemove = [];\n    this.forEach(function (value) {\n      if (iters.some(function (iter) { return iter.includes(value); })) {\n        toRemove.push(value);\n      }\n    });\n    return this.withMutations(function (set) {\n      toRemove.forEach(function (value) {\n        set.remove(value);\n      });\n    });\n  };\n\n  Set.prototype.sort = function sort (comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator));\n  };\n\n  Set.prototype.sortBy = function sortBy (mapper, comparator) {\n    // Late binding\n    return OrderedSet(sortFactory(this, comparator, mapper));\n  };\n\n  Set.prototype.wasAltered = function wasAltered () {\n    return this._map.wasAltered();\n  };\n\n  Set.prototype.__iterate = function __iterate (fn, reverse) {\n    var this$1$1 = this;\n\n    return this._map.__iterate(function (k) { return fn(k, k, this$1$1); }, reverse);\n  };\n\n  Set.prototype.__iterator = function __iterator (type, reverse) {\n    return this._map.__iterator(type, reverse);\n  };\n\n  Set.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n    if (ownerID === this.__ownerID) {\n      return this;\n    }\n    var newMap = this._map.__ensureOwner(ownerID);\n    if (!ownerID) {\n      if (this.size === 0) {\n        return this.__empty();\n      }\n      this.__ownerID = ownerID;\n      this._map = newMap;\n      return this;\n    }\n    return this.__make(newMap, ownerID);\n  };\n\n  return Set;\n}(SetCollection));\n\nSet.isSet = isSet;\n\nvar SetPrototype = Set.prototype;\nSetPrototype[IS_SET_SYMBOL] = true;\nSetPrototype[DELETE] = SetPrototype.remove;\nSetPrototype.merge = SetPrototype.concat = SetPrototype.union;\nSetPrototype.withMutations = withMutations;\nSetPrototype.asImmutable = asImmutable;\nSetPrototype['@@transducer/init'] = SetPrototype.asMutable = asMutable;\nSetPrototype['@@transducer/step'] = function (result, arr) {\n  return result.add(arr);\n};\nSetPrototype['@@transducer/result'] = function (obj) {\n  return obj.asImmutable();\n};\n\nSetPrototype.__empty = emptySet;\nSetPrototype.__make = makeSet;\n\nfunction updateSet(set, newMap) {\n  if (set.__ownerID) {\n    set.size = newMap.size;\n    set._map = newMap;\n    return set;\n  }\n  return newMap === set._map\n    ? set\n    : newMap.size === 0\n    ? set.__empty()\n    : set.__make(newMap);\n}\n\nfunction makeSet(map, ownerID) {\n  var set = Object.create(SetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\n\nvar EMPTY_SET;\nfunction emptySet() {\n  return EMPTY_SET || (EMPTY_SET = makeSet(emptyMap()));\n}\n\n/**\n * Returns a lazy seq of nums from start (inclusive) to end\n * (exclusive), by step, where start defaults to 0, step to 1, and end to\n * infinity. When start is equal to end, returns empty list.\n */\nvar Range = /*@__PURE__*/(function (IndexedSeq) {\n  function Range(start, end, step) {\n    if (!(this instanceof Range)) {\n      return new Range(start, end, step);\n    }\n    invariant(step !== 0, 'Cannot step a Range by 0');\n    start = start || 0;\n    if (end === undefined) {\n      end = Infinity;\n    }\n    step = step === undefined ? 1 : Math.abs(step);\n    if (end < start) {\n      step = -step;\n    }\n    this._start = start;\n    this._end = end;\n    this._step = step;\n    this.size = Math.max(0, Math.ceil((end - start) / step - 1) + 1);\n    if (this.size === 0) {\n      if (EMPTY_RANGE) {\n        return EMPTY_RANGE;\n      }\n      EMPTY_RANGE = this;\n    }\n  }\n\n  if ( IndexedSeq ) Range.__proto__ = IndexedSeq;\n  Range.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  Range.prototype.constructor = Range;\n\n  Range.prototype.toString = function toString () {\n    if (this.size === 0) {\n      return 'Range []';\n    }\n    return (\n      'Range [ ' +\n      this._start +\n      '...' +\n      this._end +\n      (this._step !== 1 ? ' by ' + this._step : '') +\n      ' ]'\n    );\n  };\n\n  Range.prototype.get = function get (index, notSetValue) {\n    return this.has(index)\n      ? this._start + wrapIndex(this, index) * this._step\n      : notSetValue;\n  };\n\n  Range.prototype.includes = function includes (searchValue) {\n    var possibleIndex = (searchValue - this._start) / this._step;\n    return (\n      possibleIndex >= 0 &&\n      possibleIndex < this.size &&\n      possibleIndex === Math.floor(possibleIndex)\n    );\n  };\n\n  Range.prototype.slice = function slice (begin, end) {\n    if (wholeSlice(begin, end, this.size)) {\n      return this;\n    }\n    begin = resolveBegin(begin, this.size);\n    end = resolveEnd(end, this.size);\n    if (end <= begin) {\n      return new Range(0, 0);\n    }\n    return new Range(\n      this.get(begin, this._end),\n      this.get(end, this._end),\n      this._step\n    );\n  };\n\n  Range.prototype.indexOf = function indexOf (searchValue) {\n    var offsetValue = searchValue - this._start;\n    if (offsetValue % this._step === 0) {\n      var index = offsetValue / this._step;\n      if (index >= 0 && index < this.size) {\n        return index;\n      }\n    }\n    return -1;\n  };\n\n  Range.prototype.lastIndexOf = function lastIndexOf (searchValue) {\n    return this.indexOf(searchValue);\n  };\n\n  Range.prototype.__iterate = function __iterate (fn, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    while (i !== size) {\n      if (fn(value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n      value += reverse ? -step : step;\n    }\n    return i;\n  };\n\n  Range.prototype.__iterator = function __iterator (type, reverse) {\n    var size = this.size;\n    var step = this._step;\n    var value = reverse ? this._start + (size - 1) * step : this._start;\n    var i = 0;\n    return new Iterator(function () {\n      if (i === size) {\n        return iteratorDone();\n      }\n      var v = value;\n      value += reverse ? -step : step;\n      return iteratorValue(type, reverse ? size - ++i : i++, v);\n    });\n  };\n\n  Range.prototype.equals = function equals (other) {\n    return other instanceof Range\n      ? this._start === other._start &&\n          this._end === other._end &&\n          this._step === other._step\n      : deepEqual(this, other);\n  };\n\n  return Range;\n}(IndexedSeq));\n\nvar EMPTY_RANGE;\n\nfunction getIn$1(collection, searchKeyPath, notSetValue) {\n  var keyPath = coerceKeyPath(searchKeyPath);\n  var i = 0;\n  while (i !== keyPath.length) {\n    collection = get(collection, keyPath[i++], NOT_SET);\n    if (collection === NOT_SET) {\n      return notSetValue;\n    }\n  }\n  return collection;\n}\n\nfunction getIn(searchKeyPath, notSetValue) {\n  return getIn$1(this, searchKeyPath, notSetValue);\n}\n\nfunction hasIn$1(collection, keyPath) {\n  return getIn$1(collection, keyPath, NOT_SET) !== NOT_SET;\n}\n\nfunction hasIn(searchKeyPath) {\n  return hasIn$1(this, searchKeyPath);\n}\n\nfunction toObject() {\n  assertNotInfinite(this.size);\n  var object = {};\n  this.__iterate(function (v, k) {\n    object[k] = v;\n  });\n  return object;\n}\n\n// Note: all of these methods are deprecated.\nCollection.isIterable = isCollection;\nCollection.isKeyed = isKeyed;\nCollection.isIndexed = isIndexed;\nCollection.isAssociative = isAssociative;\nCollection.isOrdered = isOrdered;\n\nCollection.Iterator = Iterator;\n\nmixin(Collection, {\n  // ### Conversion to other types\n\n  toArray: function toArray() {\n    assertNotInfinite(this.size);\n    var array = new Array(this.size || 0);\n    var useTuples = isKeyed(this);\n    var i = 0;\n    this.__iterate(function (v, k) {\n      // Keyed collections produce an array of tuples.\n      array[i++] = useTuples ? [k, v] : v;\n    });\n    return array;\n  },\n\n  toIndexedSeq: function toIndexedSeq() {\n    return new ToIndexedSequence(this);\n  },\n\n  toJS: function toJS$1() {\n    return toJS(this);\n  },\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, true);\n  },\n\n  toMap: function toMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return Map(this.toKeyedSeq());\n  },\n\n  toObject: toObject,\n\n  toOrderedMap: function toOrderedMap() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedMap(this.toKeyedSeq());\n  },\n\n  toOrderedSet: function toOrderedSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return OrderedSet(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toSet: function toSet() {\n    // Use Late Binding here to solve the circular dependency.\n    return Set(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toSetSeq: function toSetSeq() {\n    return new ToSetSequence(this);\n  },\n\n  toSeq: function toSeq() {\n    return isIndexed(this)\n      ? this.toIndexedSeq()\n      : isKeyed(this)\n      ? this.toKeyedSeq()\n      : this.toSetSeq();\n  },\n\n  toStack: function toStack() {\n    // Use Late Binding here to solve the circular dependency.\n    return Stack(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  toList: function toList() {\n    // Use Late Binding here to solve the circular dependency.\n    return List(isKeyed(this) ? this.valueSeq() : this);\n  },\n\n  // ### Common JavaScript methods and properties\n\n  toString: function toString() {\n    return '[Collection]';\n  },\n\n  __toString: function __toString(head, tail) {\n    if (this.size === 0) {\n      return head + tail;\n    }\n    return (\n      head +\n      ' ' +\n      this.toSeq().map(this.__toStringMapper).join(', ') +\n      ' ' +\n      tail\n    );\n  },\n\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  concat: function concat() {\n    var values = [], len = arguments.length;\n    while ( len-- ) values[ len ] = arguments[ len ];\n\n    return reify(this, concatFactory(this, values));\n  },\n\n  includes: function includes(searchValue) {\n    return this.some(function (value) { return is(value, searchValue); });\n  },\n\n  entries: function entries() {\n    return this.__iterator(ITERATE_ENTRIES);\n  },\n\n  every: function every(predicate, context) {\n    assertNotInfinite(this.size);\n    var returnValue = true;\n    this.__iterate(function (v, k, c) {\n      if (!predicate.call(context, v, k, c)) {\n        returnValue = false;\n        return false;\n      }\n    });\n    return returnValue;\n  },\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, true));\n  },\n\n  partition: function partition(predicate, context) {\n    return partitionFactory(this, predicate, context);\n  },\n\n  find: function find(predicate, context, notSetValue) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[1] : notSetValue;\n  },\n\n  forEach: function forEach(sideEffect, context) {\n    assertNotInfinite(this.size);\n    return this.__iterate(context ? sideEffect.bind(context) : sideEffect);\n  },\n\n  join: function join(separator) {\n    assertNotInfinite(this.size);\n    separator = separator !== undefined ? '' + separator : ',';\n    var joined = '';\n    var isFirst = true;\n    this.__iterate(function (v) {\n      isFirst ? (isFirst = false) : (joined += separator);\n      joined += v !== null && v !== undefined ? v.toString() : '';\n    });\n    return joined;\n  },\n\n  keys: function keys() {\n    return this.__iterator(ITERATE_KEYS);\n  },\n\n  map: function map(mapper, context) {\n    return reify(this, mapFactory(this, mapper, context));\n  },\n\n  reduce: function reduce$1(reducer, initialReduction, context) {\n    return reduce(\n      this,\n      reducer,\n      initialReduction,\n      context,\n      arguments.length < 2,\n      false\n    );\n  },\n\n  reduceRight: function reduceRight(reducer, initialReduction, context) {\n    return reduce(\n      this,\n      reducer,\n      initialReduction,\n      context,\n      arguments.length < 2,\n      true\n    );\n  },\n\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, true));\n  },\n\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, true));\n  },\n\n  some: function some(predicate, context) {\n    assertNotInfinite(this.size);\n    var returnValue = false;\n    this.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        returnValue = true;\n        return false;\n      }\n    });\n    return returnValue;\n  },\n\n  sort: function sort(comparator) {\n    return reify(this, sortFactory(this, comparator));\n  },\n\n  values: function values() {\n    return this.__iterator(ITERATE_VALUES);\n  },\n\n  // ### More sequential methods\n\n  butLast: function butLast() {\n    return this.slice(0, -1);\n  },\n\n  isEmpty: function isEmpty() {\n    return this.size !== undefined ? this.size === 0 : !this.some(function () { return true; });\n  },\n\n  count: function count(predicate, context) {\n    return ensureSize(\n      predicate ? this.toSeq().filter(predicate, context) : this\n    );\n  },\n\n  countBy: function countBy(grouper, context) {\n    return countByFactory(this, grouper, context);\n  },\n\n  equals: function equals(other) {\n    return deepEqual(this, other);\n  },\n\n  entrySeq: function entrySeq() {\n    var collection = this;\n    if (collection._cache) {\n      // We cache as an entries array, so we can just return the cache!\n      return new ArraySeq(collection._cache);\n    }\n    var entriesSequence = collection.toSeq().map(entryMapper).toIndexedSeq();\n    entriesSequence.fromEntrySeq = function () { return collection.toSeq(); };\n    return entriesSequence;\n  },\n\n  filterNot: function filterNot(predicate, context) {\n    return this.filter(not(predicate), context);\n  },\n\n  findEntry: function findEntry(predicate, context, notSetValue) {\n    var found = notSetValue;\n    this.__iterate(function (v, k, c) {\n      if (predicate.call(context, v, k, c)) {\n        found = [k, v];\n        return false;\n      }\n    });\n    return found;\n  },\n\n  findKey: function findKey(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry && entry[0];\n  },\n\n  findLast: function findLast(predicate, context, notSetValue) {\n    return this.toKeyedSeq().reverse().find(predicate, context, notSetValue);\n  },\n\n  findLastEntry: function findLastEntry(predicate, context, notSetValue) {\n    return this.toKeyedSeq()\n      .reverse()\n      .findEntry(predicate, context, notSetValue);\n  },\n\n  findLastKey: function findLastKey(predicate, context) {\n    return this.toKeyedSeq().reverse().findKey(predicate, context);\n  },\n\n  first: function first(notSetValue) {\n    return this.find(returnTrue, null, notSetValue);\n  },\n\n  flatMap: function flatMap(mapper, context) {\n    return reify(this, flatMapFactory(this, mapper, context));\n  },\n\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, true));\n  },\n\n  fromEntrySeq: function fromEntrySeq() {\n    return new FromEntriesSequence(this);\n  },\n\n  get: function get(searchKey, notSetValue) {\n    return this.find(function (_, key) { return is(key, searchKey); }, undefined, notSetValue);\n  },\n\n  getIn: getIn,\n\n  groupBy: function groupBy(grouper, context) {\n    return groupByFactory(this, grouper, context);\n  },\n\n  has: function has(searchKey) {\n    return this.get(searchKey, NOT_SET) !== NOT_SET;\n  },\n\n  hasIn: hasIn,\n\n  isSubset: function isSubset(iter) {\n    iter = typeof iter.includes === 'function' ? iter : Collection(iter);\n    return this.every(function (value) { return iter.includes(value); });\n  },\n\n  isSuperset: function isSuperset(iter) {\n    iter = typeof iter.isSubset === 'function' ? iter : Collection(iter);\n    return iter.isSubset(this);\n  },\n\n  keyOf: function keyOf(searchValue) {\n    return this.findKey(function (value) { return is(value, searchValue); });\n  },\n\n  keySeq: function keySeq() {\n    return this.toSeq().map(keyMapper).toIndexedSeq();\n  },\n\n  last: function last(notSetValue) {\n    return this.toSeq().reverse().first(notSetValue);\n  },\n\n  lastKeyOf: function lastKeyOf(searchValue) {\n    return this.toKeyedSeq().reverse().keyOf(searchValue);\n  },\n\n  max: function max(comparator) {\n    return maxFactory(this, comparator);\n  },\n\n  maxBy: function maxBy(mapper, comparator) {\n    return maxFactory(this, comparator, mapper);\n  },\n\n  min: function min(comparator) {\n    return maxFactory(\n      this,\n      comparator ? neg(comparator) : defaultNegComparator\n    );\n  },\n\n  minBy: function minBy(mapper, comparator) {\n    return maxFactory(\n      this,\n      comparator ? neg(comparator) : defaultNegComparator,\n      mapper\n    );\n  },\n\n  rest: function rest() {\n    return this.slice(1);\n  },\n\n  skip: function skip(amount) {\n    return amount === 0 ? this : this.slice(Math.max(0, amount));\n  },\n\n  skipLast: function skipLast(amount) {\n    return amount === 0 ? this : this.slice(0, -Math.max(0, amount));\n  },\n\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, true));\n  },\n\n  skipUntil: function skipUntil(predicate, context) {\n    return this.skipWhile(not(predicate), context);\n  },\n\n  sortBy: function sortBy(mapper, comparator) {\n    return reify(this, sortFactory(this, comparator, mapper));\n  },\n\n  take: function take(amount) {\n    return this.slice(0, Math.max(0, amount));\n  },\n\n  takeLast: function takeLast(amount) {\n    return this.slice(-Math.max(0, amount));\n  },\n\n  takeWhile: function takeWhile(predicate, context) {\n    return reify(this, takeWhileFactory(this, predicate, context));\n  },\n\n  takeUntil: function takeUntil(predicate, context) {\n    return this.takeWhile(not(predicate), context);\n  },\n\n  update: function update(fn) {\n    return fn(this);\n  },\n\n  valueSeq: function valueSeq() {\n    return this.toIndexedSeq();\n  },\n\n  // ### Hashable Object\n\n  hashCode: function hashCode() {\n    return this.__hash || (this.__hash = hashCollection(this));\n  },\n\n  // ### Internal\n\n  // abstract __iterate(fn, reverse)\n\n  // abstract __iterator(type, reverse)\n});\n\nvar CollectionPrototype = Collection.prototype;\nCollectionPrototype[IS_COLLECTION_SYMBOL] = true;\nCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.values;\nCollectionPrototype.toJSON = CollectionPrototype.toArray;\nCollectionPrototype.__toStringMapper = quoteString;\nCollectionPrototype.inspect = CollectionPrototype.toSource = function () {\n  return this.toString();\n};\nCollectionPrototype.chain = CollectionPrototype.flatMap;\nCollectionPrototype.contains = CollectionPrototype.includes;\n\nmixin(KeyedCollection, {\n  // ### More sequential methods\n\n  flip: function flip() {\n    return reify(this, flipFactory(this));\n  },\n\n  mapEntries: function mapEntries(mapper, context) {\n    var this$1$1 = this;\n\n    var iterations = 0;\n    return reify(\n      this,\n      this.toSeq()\n        .map(function (v, k) { return mapper.call(context, [k, v], iterations++, this$1$1); })\n        .fromEntrySeq()\n    );\n  },\n\n  mapKeys: function mapKeys(mapper, context) {\n    var this$1$1 = this;\n\n    return reify(\n      this,\n      this.toSeq()\n        .flip()\n        .map(function (k, v) { return mapper.call(context, k, v, this$1$1); })\n        .flip()\n    );\n  },\n});\n\nvar KeyedCollectionPrototype = KeyedCollection.prototype;\nKeyedCollectionPrototype[IS_KEYED_SYMBOL] = true;\nKeyedCollectionPrototype[ITERATOR_SYMBOL] = CollectionPrototype.entries;\nKeyedCollectionPrototype.toJSON = toObject;\nKeyedCollectionPrototype.__toStringMapper = function (v, k) { return quoteString(k) + ': ' + quoteString(v); };\n\nmixin(IndexedCollection, {\n  // ### Conversion to other types\n\n  toKeyedSeq: function toKeyedSeq() {\n    return new ToKeyedSequence(this, false);\n  },\n\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  filter: function filter(predicate, context) {\n    return reify(this, filterFactory(this, predicate, context, false));\n  },\n\n  findIndex: function findIndex(predicate, context) {\n    var entry = this.findEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n\n  indexOf: function indexOf(searchValue) {\n    var key = this.keyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n\n  lastIndexOf: function lastIndexOf(searchValue) {\n    var key = this.lastKeyOf(searchValue);\n    return key === undefined ? -1 : key;\n  },\n\n  reverse: function reverse() {\n    return reify(this, reverseFactory(this, false));\n  },\n\n  slice: function slice(begin, end) {\n    return reify(this, sliceFactory(this, begin, end, false));\n  },\n\n  splice: function splice(index, removeNum /*, ...values*/) {\n    var numArgs = arguments.length;\n    removeNum = Math.max(removeNum || 0, 0);\n    if (numArgs === 0 || (numArgs === 2 && !removeNum)) {\n      return this;\n    }\n    // If index is negative, it should resolve relative to the size of the\n    // collection. However size may be expensive to compute if not cached, so\n    // only call count() if the number is in fact negative.\n    index = resolveBegin(index, index < 0 ? this.count() : this.size);\n    var spliced = this.slice(0, index);\n    return reify(\n      this,\n      numArgs === 1\n        ? spliced\n        : spliced.concat(arrCopy(arguments, 2), this.slice(index + removeNum))\n    );\n  },\n\n  // ### More collection methods\n\n  findLastIndex: function findLastIndex(predicate, context) {\n    var entry = this.findLastEntry(predicate, context);\n    return entry ? entry[0] : -1;\n  },\n\n  first: function first(notSetValue) {\n    return this.get(0, notSetValue);\n  },\n\n  flatten: function flatten(depth) {\n    return reify(this, flattenFactory(this, depth, false));\n  },\n\n  get: function get(index, notSetValue) {\n    index = wrapIndex(this, index);\n    return index < 0 ||\n      this.size === Infinity ||\n      (this.size !== undefined && index > this.size)\n      ? notSetValue\n      : this.find(function (_, key) { return key === index; }, undefined, notSetValue);\n  },\n\n  has: function has(index) {\n    index = wrapIndex(this, index);\n    return (\n      index >= 0 &&\n      (this.size !== undefined\n        ? this.size === Infinity || index < this.size\n        : this.indexOf(index) !== -1)\n    );\n  },\n\n  interpose: function interpose(separator) {\n    return reify(this, interposeFactory(this, separator));\n  },\n\n  interleave: function interleave(/*...collections*/) {\n    var collections = [this].concat(arrCopy(arguments));\n    var zipped = zipWithFactory(this.toSeq(), IndexedSeq.of, collections);\n    var interleaved = zipped.flatten(true);\n    if (zipped.size) {\n      interleaved.size = zipped.size * collections.length;\n    }\n    return reify(this, interleaved);\n  },\n\n  keySeq: function keySeq() {\n    return Range(0, this.size);\n  },\n\n  last: function last(notSetValue) {\n    return this.get(-1, notSetValue);\n  },\n\n  skipWhile: function skipWhile(predicate, context) {\n    return reify(this, skipWhileFactory(this, predicate, context, false));\n  },\n\n  zip: function zip(/*, ...collections */) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections));\n  },\n\n  zipAll: function zipAll(/*, ...collections */) {\n    var collections = [this].concat(arrCopy(arguments));\n    return reify(this, zipWithFactory(this, defaultZipper, collections, true));\n  },\n\n  zipWith: function zipWith(zipper /*, ...collections */) {\n    var collections = arrCopy(arguments);\n    collections[0] = this;\n    return reify(this, zipWithFactory(this, zipper, collections));\n  },\n});\n\nvar IndexedCollectionPrototype = IndexedCollection.prototype;\nIndexedCollectionPrototype[IS_INDEXED_SYMBOL] = true;\nIndexedCollectionPrototype[IS_ORDERED_SYMBOL] = true;\n\nmixin(SetCollection, {\n  // ### ES6 Collection methods (ES6 Array and Map)\n\n  get: function get(value, notSetValue) {\n    return this.has(value) ? value : notSetValue;\n  },\n\n  includes: function includes(value) {\n    return this.has(value);\n  },\n\n  // ### More sequential methods\n\n  keySeq: function keySeq() {\n    return this.valueSeq();\n  },\n});\n\nvar SetCollectionPrototype = SetCollection.prototype;\nSetCollectionPrototype.has = CollectionPrototype.includes;\nSetCollectionPrototype.contains = SetCollectionPrototype.includes;\nSetCollectionPrototype.keys = SetCollectionPrototype.values;\n\n// Mixin subclasses\n\nmixin(KeyedSeq, KeyedCollectionPrototype);\nmixin(IndexedSeq, IndexedCollectionPrototype);\nmixin(SetSeq, SetCollectionPrototype);\n\n// #pragma Helper functions\n\nfunction reduce(collection, reducer, reduction, context, useFirst, reverse) {\n  assertNotInfinite(collection.size);\n  collection.__iterate(function (v, k, c) {\n    if (useFirst) {\n      useFirst = false;\n      reduction = v;\n    } else {\n      reduction = reducer.call(context, reduction, v, k, c);\n    }\n  }, reverse);\n  return reduction;\n}\n\nfunction keyMapper(v, k) {\n  return k;\n}\n\nfunction entryMapper(v, k) {\n  return [k, v];\n}\n\nfunction not(predicate) {\n  return function () {\n    return !predicate.apply(this, arguments);\n  };\n}\n\nfunction neg(predicate) {\n  return function () {\n    return -predicate.apply(this, arguments);\n  };\n}\n\nfunction defaultZipper() {\n  return arrCopy(arguments);\n}\n\nfunction defaultNegComparator(a, b) {\n  return a < b ? 1 : a > b ? -1 : 0;\n}\n\nfunction hashCollection(collection) {\n  if (collection.size === Infinity) {\n    return 0;\n  }\n  var ordered = isOrdered(collection);\n  var keyed = isKeyed(collection);\n  var h = ordered ? 1 : 0;\n  var size = collection.__iterate(\n    keyed\n      ? ordered\n        ? function (v, k) {\n            h = (31 * h + hashMerge(hash(v), hash(k))) | 0;\n          }\n        : function (v, k) {\n            h = (h + hashMerge(hash(v), hash(k))) | 0;\n          }\n      : ordered\n      ? function (v) {\n          h = (31 * h + hash(v)) | 0;\n        }\n      : function (v) {\n          h = (h + hash(v)) | 0;\n        }\n  );\n  return murmurHashOfSize(size, h);\n}\n\nfunction murmurHashOfSize(size, h) {\n  h = imul(h, 0xcc9e2d51);\n  h = imul((h << 15) | (h >>> -15), 0x1b873593);\n  h = imul((h << 13) | (h >>> -13), 5);\n  h = ((h + 0xe6546b64) | 0) ^ size;\n  h = imul(h ^ (h >>> 16), 0x85ebca6b);\n  h = imul(h ^ (h >>> 13), 0xc2b2ae35);\n  h = smi(h ^ (h >>> 16));\n  return h;\n}\n\nfunction hashMerge(a, b) {\n  return (a ^ (b + 0x9e3779b9 + (a << 6) + (a >> 2))) | 0; // int\n}\n\nvar OrderedSet = /*@__PURE__*/(function (Set) {\n  function OrderedSet(value) {\n    return value === undefined || value === null\n      ? emptyOrderedSet()\n      : isOrderedSet(value)\n      ? value\n      : emptyOrderedSet().withMutations(function (set) {\n          var iter = SetCollection(value);\n          assertNotInfinite(iter.size);\n          iter.forEach(function (v) { return set.add(v); });\n        });\n  }\n\n  if ( Set ) OrderedSet.__proto__ = Set;\n  OrderedSet.prototype = Object.create( Set && Set.prototype );\n  OrderedSet.prototype.constructor = OrderedSet;\n\n  OrderedSet.of = function of (/*...values*/) {\n    return this(arguments);\n  };\n\n  OrderedSet.fromKeys = function fromKeys (value) {\n    return this(KeyedCollection(value).keySeq());\n  };\n\n  OrderedSet.prototype.toString = function toString () {\n    return this.__toString('OrderedSet {', '}');\n  };\n\n  return OrderedSet;\n}(Set));\n\nOrderedSet.isOrderedSet = isOrderedSet;\n\nvar OrderedSetPrototype = OrderedSet.prototype;\nOrderedSetPrototype[IS_ORDERED_SYMBOL] = true;\nOrderedSetPrototype.zip = IndexedCollectionPrototype.zip;\nOrderedSetPrototype.zipWith = IndexedCollectionPrototype.zipWith;\nOrderedSetPrototype.zipAll = IndexedCollectionPrototype.zipAll;\n\nOrderedSetPrototype.__empty = emptyOrderedSet;\nOrderedSetPrototype.__make = makeOrderedSet;\n\nfunction makeOrderedSet(map, ownerID) {\n  var set = Object.create(OrderedSetPrototype);\n  set.size = map ? map.size : 0;\n  set._map = map;\n  set.__ownerID = ownerID;\n  return set;\n}\n\nvar EMPTY_ORDERED_SET;\nfunction emptyOrderedSet() {\n  return (\n    EMPTY_ORDERED_SET || (EMPTY_ORDERED_SET = makeOrderedSet(emptyOrderedMap()))\n  );\n}\n\nvar PairSorting = {\n  LeftThenRight: -1,\n  RightThenLeft: +1,\n};\n\nfunction throwOnInvalidDefaultValues(defaultValues) {\n  if (isRecord(defaultValues)) {\n    throw new Error(\n      'Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.'\n    );\n  }\n\n  if (isImmutable(defaultValues)) {\n    throw new Error(\n      'Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.'\n    );\n  }\n\n  if (defaultValues === null || typeof defaultValues !== 'object') {\n    throw new Error(\n      'Can not call `Record` with a non-object as default values. Use a plain javascript object instead.'\n    );\n  }\n}\n\nvar Record = function Record(defaultValues, name) {\n  var hasInitialized;\n\n  throwOnInvalidDefaultValues(defaultValues);\n\n  var RecordType = function Record(values) {\n    var this$1$1 = this;\n\n    if (values instanceof RecordType) {\n      return values;\n    }\n    if (!(this instanceof RecordType)) {\n      return new RecordType(values);\n    }\n    if (!hasInitialized) {\n      hasInitialized = true;\n      var keys = Object.keys(defaultValues);\n      var indices = (RecordTypePrototype._indices = {});\n      // Deprecated: left to attempt not to break any external code which\n      // relies on a ._name property existing on record instances.\n      // Use Record.getDescriptiveName() instead\n      RecordTypePrototype._name = name;\n      RecordTypePrototype._keys = keys;\n      RecordTypePrototype._defaultValues = defaultValues;\n      for (var i = 0; i < keys.length; i++) {\n        var propName = keys[i];\n        indices[propName] = i;\n        if (RecordTypePrototype[propName]) {\n          /* eslint-disable no-console */\n          typeof console === 'object' &&\n            console.warn &&\n            console.warn(\n              'Cannot define ' +\n                recordName(this) +\n                ' with property \"' +\n                propName +\n                '\" since that property name is part of the Record API.'\n            );\n          /* eslint-enable no-console */\n        } else {\n          setProp(RecordTypePrototype, propName);\n        }\n      }\n    }\n    this.__ownerID = undefined;\n    this._values = List().withMutations(function (l) {\n      l.setSize(this$1$1._keys.length);\n      KeyedCollection(values).forEach(function (v, k) {\n        l.set(this$1$1._indices[k], v === this$1$1._defaultValues[k] ? undefined : v);\n      });\n    });\n    return this;\n  };\n\n  var RecordTypePrototype = (RecordType.prototype =\n    Object.create(RecordPrototype));\n  RecordTypePrototype.constructor = RecordType;\n\n  if (name) {\n    RecordType.displayName = name;\n  }\n\n  return RecordType;\n};\n\nRecord.prototype.toString = function toString () {\n  var str = recordName(this) + ' { ';\n  var keys = this._keys;\n  var k;\n  for (var i = 0, l = keys.length; i !== l; i++) {\n    k = keys[i];\n    str += (i ? ', ' : '') + k + ': ' + quoteString(this.get(k));\n  }\n  return str + ' }';\n};\n\nRecord.prototype.equals = function equals (other) {\n  return (\n    this === other ||\n    (isRecord(other) && recordSeq(this).equals(recordSeq(other)))\n  );\n};\n\nRecord.prototype.hashCode = function hashCode () {\n  return recordSeq(this).hashCode();\n};\n\n// @pragma Access\n\nRecord.prototype.has = function has (k) {\n  return this._indices.hasOwnProperty(k);\n};\n\nRecord.prototype.get = function get (k, notSetValue) {\n  if (!this.has(k)) {\n    return notSetValue;\n  }\n  var index = this._indices[k];\n  var value = this._values.get(index);\n  return value === undefined ? this._defaultValues[k] : value;\n};\n\n// @pragma Modification\n\nRecord.prototype.set = function set (k, v) {\n  if (this.has(k)) {\n    var newValues = this._values.set(\n      this._indices[k],\n      v === this._defaultValues[k] ? undefined : v\n    );\n    if (newValues !== this._values && !this.__ownerID) {\n      return makeRecord(this, newValues);\n    }\n  }\n  return this;\n};\n\nRecord.prototype.remove = function remove (k) {\n  return this.set(k);\n};\n\nRecord.prototype.clear = function clear () {\n  var newValues = this._values.clear().setSize(this._keys.length);\n\n  return this.__ownerID ? this : makeRecord(this, newValues);\n};\n\nRecord.prototype.wasAltered = function wasAltered () {\n  return this._values.wasAltered();\n};\n\nRecord.prototype.toSeq = function toSeq () {\n  return recordSeq(this);\n};\n\nRecord.prototype.toJS = function toJS$1 () {\n  return toJS(this);\n};\n\nRecord.prototype.entries = function entries () {\n  return this.__iterator(ITERATE_ENTRIES);\n};\n\nRecord.prototype.__iterator = function __iterator (type, reverse) {\n  return recordSeq(this).__iterator(type, reverse);\n};\n\nRecord.prototype.__iterate = function __iterate (fn, reverse) {\n  return recordSeq(this).__iterate(fn, reverse);\n};\n\nRecord.prototype.__ensureOwner = function __ensureOwner (ownerID) {\n  if (ownerID === this.__ownerID) {\n    return this;\n  }\n  var newValues = this._values.__ensureOwner(ownerID);\n  if (!ownerID) {\n    this.__ownerID = ownerID;\n    this._values = newValues;\n    return this;\n  }\n  return makeRecord(this, newValues, ownerID);\n};\n\nRecord.isRecord = isRecord;\nRecord.getDescriptiveName = recordName;\nvar RecordPrototype = Record.prototype;\nRecordPrototype[IS_RECORD_SYMBOL] = true;\nRecordPrototype[DELETE] = RecordPrototype.remove;\nRecordPrototype.deleteIn = RecordPrototype.removeIn = deleteIn;\nRecordPrototype.getIn = getIn;\nRecordPrototype.hasIn = CollectionPrototype.hasIn;\nRecordPrototype.merge = merge$1;\nRecordPrototype.mergeWith = mergeWith$1;\nRecordPrototype.mergeIn = mergeIn;\nRecordPrototype.mergeDeep = mergeDeep;\nRecordPrototype.mergeDeepWith = mergeDeepWith;\nRecordPrototype.mergeDeepIn = mergeDeepIn;\nRecordPrototype.setIn = setIn;\nRecordPrototype.update = update;\nRecordPrototype.updateIn = updateIn;\nRecordPrototype.withMutations = withMutations;\nRecordPrototype.asMutable = asMutable;\nRecordPrototype.asImmutable = asImmutable;\nRecordPrototype[ITERATOR_SYMBOL] = RecordPrototype.entries;\nRecordPrototype.toJSON = RecordPrototype.toObject =\n  CollectionPrototype.toObject;\nRecordPrototype.inspect = RecordPrototype.toSource = function () {\n  return this.toString();\n};\n\nfunction makeRecord(likeRecord, values, ownerID) {\n  var record = Object.create(Object.getPrototypeOf(likeRecord));\n  record._values = values;\n  record.__ownerID = ownerID;\n  return record;\n}\n\nfunction recordName(record) {\n  return record.constructor.displayName || record.constructor.name || 'Record';\n}\n\nfunction recordSeq(record) {\n  return keyedSeqFromValue(record._keys.map(function (k) { return [k, record.get(k)]; }));\n}\n\nfunction setProp(prototype, name) {\n  try {\n    Object.defineProperty(prototype, name, {\n      get: function () {\n        return this.get(name);\n      },\n      set: function (value) {\n        invariant(this.__ownerID, 'Cannot set on an immutable record.');\n        this.set(name, value);\n      },\n    });\n  } catch (error) {\n    // Object.defineProperty failed. Probably IE8.\n  }\n}\n\n/**\n * Returns a lazy Seq of `value` repeated `times` times. When `times` is\n * undefined, returns an infinite sequence of `value`.\n */\nvar Repeat = /*@__PURE__*/(function (IndexedSeq) {\n  function Repeat(value, times) {\n    if (!(this instanceof Repeat)) {\n      return new Repeat(value, times);\n    }\n    this._value = value;\n    this.size = times === undefined ? Infinity : Math.max(0, times);\n    if (this.size === 0) {\n      if (EMPTY_REPEAT) {\n        return EMPTY_REPEAT;\n      }\n      EMPTY_REPEAT = this;\n    }\n  }\n\n  if ( IndexedSeq ) Repeat.__proto__ = IndexedSeq;\n  Repeat.prototype = Object.create( IndexedSeq && IndexedSeq.prototype );\n  Repeat.prototype.constructor = Repeat;\n\n  Repeat.prototype.toString = function toString () {\n    if (this.size === 0) {\n      return 'Repeat []';\n    }\n    return 'Repeat [ ' + this._value + ' ' + this.size + ' times ]';\n  };\n\n  Repeat.prototype.get = function get (index, notSetValue) {\n    return this.has(index) ? this._value : notSetValue;\n  };\n\n  Repeat.prototype.includes = function includes (searchValue) {\n    return is(this._value, searchValue);\n  };\n\n  Repeat.prototype.slice = function slice (begin, end) {\n    var size = this.size;\n    return wholeSlice(begin, end, size)\n      ? this\n      : new Repeat(\n          this._value,\n          resolveEnd(end, size) - resolveBegin(begin, size)\n        );\n  };\n\n  Repeat.prototype.reverse = function reverse () {\n    return this;\n  };\n\n  Repeat.prototype.indexOf = function indexOf (searchValue) {\n    if (is(this._value, searchValue)) {\n      return 0;\n    }\n    return -1;\n  };\n\n  Repeat.prototype.lastIndexOf = function lastIndexOf (searchValue) {\n    if (is(this._value, searchValue)) {\n      return this.size;\n    }\n    return -1;\n  };\n\n  Repeat.prototype.__iterate = function __iterate (fn, reverse) {\n    var size = this.size;\n    var i = 0;\n    while (i !== size) {\n      if (fn(this._value, reverse ? size - ++i : i++, this) === false) {\n        break;\n      }\n    }\n    return i;\n  };\n\n  Repeat.prototype.__iterator = function __iterator (type, reverse) {\n    var this$1$1 = this;\n\n    var size = this.size;\n    var i = 0;\n    return new Iterator(function () { return i === size\n        ? iteratorDone()\n        : iteratorValue(type, reverse ? size - ++i : i++, this$1$1._value); }\n    );\n  };\n\n  Repeat.prototype.equals = function equals (other) {\n    return other instanceof Repeat\n      ? is(this._value, other._value)\n      : deepEqual(other);\n  };\n\n  return Repeat;\n}(IndexedSeq));\n\nvar EMPTY_REPEAT;\n\nfunction fromJS(value, converter) {\n  return fromJSWith(\n    [],\n    converter || defaultConverter,\n    value,\n    '',\n    converter && converter.length > 2 ? [] : undefined,\n    { '': value }\n  );\n}\n\nfunction fromJSWith(stack, converter, value, key, keyPath, parentValue) {\n  if (\n    typeof value !== 'string' &&\n    !isImmutable(value) &&\n    (isArrayLike(value) || hasIterator(value) || isPlainObject(value))\n  ) {\n    if (~stack.indexOf(value)) {\n      throw new TypeError('Cannot convert circular structure to Immutable');\n    }\n    stack.push(value);\n    keyPath && key !== '' && keyPath.push(key);\n    var converted = converter.call(\n      parentValue,\n      key,\n      Seq(value).map(function (v, k) { return fromJSWith(stack, converter, v, k, keyPath, value); }\n      ),\n      keyPath && keyPath.slice()\n    );\n    stack.pop();\n    keyPath && keyPath.pop();\n    return converted;\n  }\n  return value;\n}\n\nfunction defaultConverter(k, v) {\n  // Effectively the opposite of \"Collection.toSeq()\"\n  return isIndexed(v) ? v.toList() : isKeyed(v) ? v.toMap() : v.toSet();\n}\n\nvar version = \"4.3.5\";\n\nvar Immutable = {\n  version: version,\n\n  Collection: Collection,\n  // Note: Iterable is deprecated\n  Iterable: Collection,\n\n  Seq: Seq,\n  Map: Map,\n  OrderedMap: OrderedMap,\n  List: List,\n  Stack: Stack,\n  Set: Set,\n  OrderedSet: OrderedSet,\n  PairSorting: PairSorting,\n\n  Record: Record,\n  Range: Range,\n  Repeat: Repeat,\n\n  is: is,\n  fromJS: fromJS,\n  hash: hash,\n\n  isImmutable: isImmutable,\n  isCollection: isCollection,\n  isKeyed: isKeyed,\n  isIndexed: isIndexed,\n  isAssociative: isAssociative,\n  isOrdered: isOrdered,\n  isValueObject: isValueObject,\n  isPlainObject: isPlainObject,\n  isSeq: isSeq,\n  isList: isList,\n  isMap: isMap,\n  isOrderedMap: isOrderedMap,\n  isStack: isStack,\n  isSet: isSet,\n  isOrderedSet: isOrderedSet,\n  isRecord: isRecord,\n\n  get: get,\n  getIn: getIn$1,\n  has: has,\n  hasIn: hasIn$1,\n  merge: merge,\n  mergeDeep: mergeDeep$1,\n  mergeWith: mergeWith,\n  mergeDeepWith: mergeDeepWith$1,\n  remove: remove,\n  removeIn: removeIn,\n  set: set,\n  setIn: setIn$1,\n  update: update$1,\n  updateIn: updateIn$1,\n};\n\n// Note: Iterable is deprecated\nvar Iterable = Collection;\n\nexport default Immutable;\nexport { Collection, Iterable, List, Map, OrderedMap, OrderedSet, PairSorting, Range, Record, Repeat, Seq, Set, Stack, fromJS, get, getIn$1 as getIn, has, hasIn$1 as hasIn, hash, is, isAssociative, isCollection, isImmutable, isIndexed, isKeyed, isList, isMap, isOrdered, isOrderedMap, isOrderedSet, isPlainObject, isRecord, isSeq, isSet, isStack, isValueObject, merge, mergeDeep$1 as mergeDeep, mergeDeepWith$1 as mergeDeepWith, mergeWith, remove, removeIn, set, setIn$1 as setIn, update$1 as update, updateIn$1 as updateIn, version };\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict';\n\nconst isStream = stream =>\n\tstream !== null &&\n\ttypeof stream === 'object' &&\n\ttypeof stream.pipe === 'function';\n\nisStream.writable = stream =>\n\tisStream(stream) &&\n\tstream.writable !== false &&\n\ttypeof stream._write === 'function' &&\n\ttypeof stream._writableState === 'object';\n\nisStream.readable = stream =>\n\tisStream(stream) &&\n\tstream.readable !== false &&\n\ttypeof stream._read === 'function' &&\n\ttypeof stream._readableState === 'object';\n\nisStream.duplex = stream =>\n\tisStream.writable(stream) &&\n\tisStream.readable(stream);\n\nisStream.transform = stream =>\n\tisStream.duplex(stream) &&\n\ttypeof stream._transform === 'function';\n\nmodule.exports = isStream;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/ContextParser\"), exports);\n__exportStar(require(\"./lib/ErrorCoded\"), exports);\n__exportStar(require(\"./lib/FetchDocumentLoader\"), exports);\n__exportStar(require(\"./lib/IDocumentLoader\"), exports);\n__exportStar(require(\"./lib/JsonLdContext\"), exports);\n__exportStar(require(\"./lib/JsonLdContextNormalized\"), exports);\n__exportStar(require(\"./lib/Util\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContextParser = void 0;\nrequire(\"cross-fetch/polyfill\");\nconst relative_to_absolute_iri_1 = require(\"relative-to-absolute-iri\");\nconst ErrorCoded_1 = require(\"./ErrorCoded\");\nconst FetchDocumentLoader_1 = require(\"./FetchDocumentLoader\");\nconst JsonLdContextNormalized_1 = require(\"./JsonLdContextNormalized\");\nconst Util_1 = require(\"./Util\");\n/**\n * Parses JSON-LD contexts.\n */\nclass ContextParser {\n    constructor(options) {\n        options = options || {};\n        this.documentLoader = options.documentLoader || new FetchDocumentLoader_1.FetchDocumentLoader();\n        this.documentCache = {};\n        this.validateContext = !options.skipValidation;\n        this.expandContentTypeToBase = !!options.expandContentTypeToBase;\n        this.remoteContextsDepthLimit = options.remoteContextsDepthLimit || 32;\n        this.redirectSchemaOrgHttps = 'redirectSchemaOrgHttps' in options ? !!options.redirectSchemaOrgHttps : true;\n    }\n    /**\n     * Validate the given @language value.\n     * An error will be thrown if it is invalid.\n     * @param value An @language value.\n     * @param {boolean} strictRange If the string value should be strictly checked against a regex.\n     * @param {string} errorCode The error code to emit on errors.\n     * @return {boolean} If validation passed.\n     *                   Can only be false if strictRange is false and the string value did not pass the regex.\n     */\n    static validateLanguage(value, strictRange, errorCode) {\n        if (typeof value !== 'string') {\n            throw new ErrorCoded_1.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(value)}'`, errorCode);\n        }\n        if (!Util_1.Util.REGEX_LANGUAGE_TAG.test(value)) {\n            if (strictRange) {\n                throw new ErrorCoded_1.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(value)}'`, errorCode);\n            }\n            else {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Validate the given @direction value.\n     * An error will be thrown if it is invalid.\n     * @param value An @direction value.\n     * @param {boolean} strictValues If the string value should be strictly checked against a regex.\n     * @return {boolean} If validation passed.\n     *                   Can only be false if strictRange is false and the string value did not pass the regex.\n     */\n    static validateDirection(value, strictValues) {\n        if (typeof value !== 'string') {\n            throw new ErrorCoded_1.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_BASE_DIRECTION);\n        }\n        if (!Util_1.Util.REGEX_DIRECTION_TAG.test(value)) {\n            if (strictValues) {\n                throw new ErrorCoded_1.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_BASE_DIRECTION);\n            }\n            else {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Add an @id term for all @reverse terms.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @return {IJsonLdContextNormalizedRaw} The mutated input context.\n     */\n    idifyReverseTerms(context) {\n        for (const key of Object.keys(context)) {\n            let value = context[key];\n            if (value && typeof value === 'object') {\n                if (value['@reverse'] && !value['@id']) {\n                    if (typeof value['@reverse'] !== 'string' || Util_1.Util.isValidKeyword(value['@reverse'])) {\n                        throw new ErrorCoded_1.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${value['@reverse']}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                    }\n                    value = context[key] = Object.assign(Object.assign({}, value), { '@id': value['@reverse'] });\n                    value['@id'] = value['@reverse'];\n                    if (Util_1.Util.isPotentialKeyword(value['@reverse'])) {\n                        delete value['@reverse'];\n                    }\n                    else {\n                        value['@reverse'] = true;\n                    }\n                }\n            }\n        }\n        return context;\n    }\n    /**\n     * Expand all prefixed terms in the given context.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {boolean} expandContentTypeToBase If @type inside the context may be expanded\n     *                                          via @base if @vocab is set to null.\n     * @param {string[]} keys Optional set of keys from the context to expand. If left undefined, all\n     * keys in the context will be expanded.\n     */\n    expandPrefixedTerms(context, expandContentTypeToBase, keys) {\n        const contextRaw = context.getContextRaw();\n        for (const key of (keys || Object.keys(contextRaw))) {\n            // Only expand allowed keys\n            if (Util_1.Util.EXPAND_KEYS_BLACKLIST.indexOf(key) < 0 && !Util_1.Util.isReservedInternalKeyword(key)) {\n                // Error if we try to alias a keyword to something else.\n                const keyValue = contextRaw[key];\n                if (Util_1.Util.isPotentialKeyword(key) && Util_1.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(key) >= 0) {\n                    if (key !== '@type' || typeof contextRaw[key] === 'object'\n                        && !(contextRaw[key]['@protected'] || contextRaw[key]['@container'] === '@set')) {\n                        throw new ErrorCoded_1.ErrorCoded(`Keywords can not be aliased to something else.\nTried mapping ${key} to ${JSON.stringify(keyValue)}`, ErrorCoded_1.ERROR_CODES.KEYWORD_REDEFINITION);\n                    }\n                }\n                // Error if we try to alias to an illegal keyword\n                if (Util_1.Util.ALIAS_RANGE_BLACKLIST.indexOf(Util_1.Util.getContextValueId(keyValue)) >= 0) {\n                    throw new ErrorCoded_1.ErrorCoded(`Aliasing to certain keywords is not allowed.\nTried mapping ${key} to ${JSON.stringify(keyValue)}`, ErrorCoded_1.ERROR_CODES.INVALID_KEYWORD_ALIAS);\n                }\n                // Error if this term was marked as prefix as well\n                if (keyValue && Util_1.Util.isPotentialKeyword(Util_1.Util.getContextValueId(keyValue))\n                    && keyValue['@prefix'] === true) {\n                    throw new ErrorCoded_1.ErrorCoded(`Tried to use keyword aliases as prefix: '${key}': '${JSON.stringify(keyValue)}'`, ErrorCoded_1.ERROR_CODES.INVALID_TERM_DEFINITION);\n                }\n                // Loop because prefixes might be nested\n                while (Util_1.Util.isPrefixValue(contextRaw[key])) {\n                    const value = contextRaw[key];\n                    let changed = false;\n                    if (typeof value === 'string') {\n                        contextRaw[key] = context.expandTerm(value, true);\n                        changed = changed || value !== contextRaw[key];\n                    }\n                    else {\n                        const id = value['@id'];\n                        const type = value['@type'];\n                        // If @id is missing, don't allow @id to be added if @prefix: true and key not being a valid IRI.\n                        const canAddIdEntry = !('@prefix' in value) || Util_1.Util.isValidIri(key);\n                        if ('@id' in value) {\n                            // Use @id value for expansion\n                            if (id !== undefined && id !== null && typeof id === 'string') {\n                                contextRaw[key] = Object.assign(Object.assign({}, contextRaw[key]), { '@id': context.expandTerm(id, true) });\n                                changed = changed || id !== contextRaw[key]['@id'];\n                            }\n                        }\n                        else if (!Util_1.Util.isPotentialKeyword(key) && canAddIdEntry) {\n                            // Add an explicit @id value based on the expanded key value\n                            const newId = context.expandTerm(key, true);\n                            if (newId !== key) {\n                                // Don't set @id if expansion failed\n                                contextRaw[key] = Object.assign(Object.assign({}, contextRaw[key]), { '@id': newId });\n                                changed = true;\n                            }\n                        }\n                        if (type && typeof type === 'string' && type !== '@vocab'\n                            && (!value['@container'] || !value['@container']['@type'])\n                            && canAddIdEntry) {\n                            // First check @vocab, then fallback to @base\n                            let expandedType = context.expandTerm(type, true);\n                            if (expandContentTypeToBase && type === expandedType) {\n                                expandedType = context.expandTerm(type, false);\n                            }\n                            if (expandedType !== type) {\n                                changed = true;\n                                contextRaw[key] = Object.assign(Object.assign({}, contextRaw[key]), { '@type': expandedType });\n                            }\n                        }\n                    }\n                    if (!changed) {\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Normalize the @language entries in the given context to lowercase.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {IParseOptions} parseOptions The parsing options.\n     */\n    normalize(context, { processingMode, normalizeLanguageTags }) {\n        // Lowercase language keys in 1.0\n        if (normalizeLanguageTags || processingMode === 1.0) {\n            for (const key of Object.keys(context)) {\n                if (key === '@language' && typeof context[key] === 'string') {\n                    context[key] = context[key].toLowerCase();\n                }\n                else {\n                    const value = context[key];\n                    if (value && typeof value === 'object') {\n                        if (typeof value['@language'] === 'string') {\n                            const lowercase = value['@language'].toLowerCase();\n                            if (lowercase !== value['@language']) {\n                                context[key] = Object.assign(Object.assign({}, value), { '@language': lowercase });\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    /**\n     * Convert all @container strings and array values to hash-based values.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     */\n    containersToHash(context) {\n        for (const key of Object.keys(context)) {\n            const value = context[key];\n            if (value && typeof value === 'object') {\n                if (typeof value['@container'] === 'string') {\n                    context[key] = Object.assign(Object.assign({}, value), { '@container': { [value['@container']]: true } });\n                }\n                else if (Array.isArray(value['@container'])) {\n                    const newValue = {};\n                    for (const containerValue of value['@container']) {\n                        newValue[containerValue] = true;\n                    }\n                    context[key] = Object.assign(Object.assign({}, value), { '@container': newValue });\n                }\n            }\n        }\n    }\n    /**\n     * Normalize and apply context-level @protected terms onto each term separately.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {number} processingMode The processing mode.\n     */\n    applyScopedProtected(context, { processingMode }, expandOptions) {\n        if (processingMode && processingMode >= 1.1) {\n            if (context['@protected']) {\n                for (const key of Object.keys(context)) {\n                    if (Util_1.Util.isReservedInternalKeyword(key)) {\n                        continue;\n                    }\n                    if (!Util_1.Util.isPotentialKeyword(key) && !Util_1.Util.isTermProtected(context, key)) {\n                        const value = context[key];\n                        if (value && typeof value === 'object') {\n                            if (!('@protected' in context[key])) {\n                                // Mark terms with object values as protected if they don't have an @protected: false annotation\n                                context[key] = Object.assign(Object.assign({}, context[key]), { '@protected': true });\n                            }\n                        }\n                        else {\n                            // Convert string-based term values to object-based values with @protected: true\n                            context[key] = {\n                                '@id': value,\n                                '@protected': true,\n                            };\n                            if (Util_1.Util.isSimpleTermDefinitionPrefix(value, expandOptions)) {\n                                context[key] = Object.assign(Object.assign({}, context[key]), { '@prefix': true });\n                            }\n                        }\n                    }\n                }\n                delete context['@protected'];\n            }\n        }\n    }\n    /**\n     * Check if the given context inheritance does not contain any overrides of protected terms.\n     * @param {IJsonLdContextNormalizedRaw} contextBefore The context that may contain some protected terms.\n     * @param {IJsonLdContextNormalizedRaw} contextAfter A new context that is being applied on the first one.\n     * @param {IExpandOptions} expandOptions Options that are needed for any expansions during this validation.\n     * @param {string[]} keys Optional set of keys from the context to validate. If left undefined, all\n     * keys defined in contextAfter will be checked.\n     */\n    validateKeywordRedefinitions(contextBefore, contextAfter, expandOptions, keys) {\n        for (const key of (keys !== null && keys !== void 0 ? keys : Object.keys(contextAfter))) {\n            if (Util_1.Util.isTermProtected(contextBefore, key)) {\n                // The entry in the context before will always be in object-mode\n                // If the new entry is in string-mode, convert it to object-mode\n                // before checking if it is identical.\n                if (typeof contextAfter[key] === 'string') {\n                    contextAfter[key] = { '@id': contextAfter[key], '@protected': true };\n                }\n                else {\n                    // We modify this deliberately,\n                    // as we need it for the value comparison (they must be identical modulo '@protected')),\n                    // and for the fact that this new value will override the first one.\n                    contextAfter[key] = Object.assign(Object.assign({}, contextAfter[key]), { '@protected': true });\n                }\n                // Error if they are not identical\n                if (!Util_1.Util.deepEqual(contextBefore[key], contextAfter[key])) {\n                    throw new ErrorCoded_1.ErrorCoded(`Attempted to override the protected keyword ${key} from ${JSON.stringify(Util_1.Util.getContextValueId(contextBefore[key]))} to ${JSON.stringify(Util_1.Util.getContextValueId(contextAfter[key]))}`, ErrorCoded_1.ERROR_CODES.PROTECTED_TERM_REDEFINITION);\n                }\n            }\n        }\n    }\n    /**\n     * Validate the entries of the given context.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {IParseOptions} options The parse options.\n     */\n    validate(context, { processingMode }) {\n        for (const key of Object.keys(context)) {\n            // Ignore reserved internal keywords.\n            if (Util_1.Util.isReservedInternalKeyword(key)) {\n                continue;\n            }\n            // Do not allow empty term\n            if (key === '') {\n                throw new ErrorCoded_1.ErrorCoded(`The empty term is not allowed, got: '${key}': '${JSON.stringify(context[key])}'`, ErrorCoded_1.ERROR_CODES.INVALID_TERM_DEFINITION);\n            }\n            const value = context[key];\n            const valueType = typeof value;\n            // First check if the key is a keyword\n            if (Util_1.Util.isPotentialKeyword(key)) {\n                switch (key.substr(1)) {\n                    case 'vocab':\n                        if (value !== null && valueType !== 'string') {\n                            throw new ErrorCoded_1.ErrorCoded(`Found an invalid @vocab IRI: ${value}`, ErrorCoded_1.ERROR_CODES.INVALID_VOCAB_MAPPING);\n                        }\n                        break;\n                    case 'base':\n                        if (value !== null && valueType !== 'string') {\n                            throw new ErrorCoded_1.ErrorCoded(`Found an invalid @base IRI: ${context[key]}`, ErrorCoded_1.ERROR_CODES.INVALID_BASE_IRI);\n                        }\n                        break;\n                    case 'language':\n                        if (value !== null) {\n                            ContextParser.validateLanguage(value, true, ErrorCoded_1.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);\n                        }\n                        break;\n                    case 'version':\n                        if (value !== null && valueType !== 'number') {\n                            throw new ErrorCoded_1.ErrorCoded(`Found an invalid @version number: ${value}`, ErrorCoded_1.ERROR_CODES.INVALID_VERSION_VALUE);\n                        }\n                        break;\n                    case 'direction':\n                        if (value !== null) {\n                            ContextParser.validateDirection(value, true);\n                        }\n                        break;\n                    case 'propagate':\n                        if (processingMode === 1.0) {\n                            throw new ErrorCoded_1.ErrorCoded(`Found an illegal @propagate keyword: ${value}`, ErrorCoded_1.ERROR_CODES.INVALID_CONTEXT_ENTRY);\n                        }\n                        if (value !== null && valueType !== 'boolean') {\n                            throw new ErrorCoded_1.ErrorCoded(`Found an invalid @propagate value: ${value}`, ErrorCoded_1.ERROR_CODES.INVALID_PROPAGATE_VALUE);\n                        }\n                        break;\n                }\n                // Don't allow keywords to be overridden\n                if (Util_1.Util.isValidKeyword(key) && Util_1.Util.isValidKeyword(Util_1.Util.getContextValueId(value))) {\n                    throw new ErrorCoded_1.ErrorCoded(`Illegal keyword alias in term value, found: '${key}': '${Util_1.Util\n                        .getContextValueId(value)}'`, ErrorCoded_1.ERROR_CODES.KEYWORD_REDEFINITION);\n                }\n                continue;\n            }\n            // Otherwise, consider the key a term\n            if (value !== null) {\n                switch (valueType) {\n                    case 'string':\n                        if (Util_1.Util.getPrefix(value, context) === key) {\n                            throw new ErrorCoded_1.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${key}': '${JSON\n                                .stringify(value)}'`, ErrorCoded_1.ERROR_CODES.CYCLIC_IRI_MAPPING);\n                        }\n                        if (Util_1.Util.isValidIriWeak(key)) {\n                            if (value === '@type') {\n                                throw new ErrorCoded_1.ErrorCoded(`IRIs can not be mapped to @type, found: '${key}': '${value}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                            }\n                            else if (Util_1.Util.isValidIri(value) && value !== new JsonLdContextNormalized_1.JsonLdContextNormalized(context).expandTerm(key)) {\n                                throw new ErrorCoded_1.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${key}': '${value}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                            }\n                        }\n                        break;\n                    case 'object':\n                        if (!Util_1.Util.isCompactIri(key) && !('@id' in value)\n                            && (value['@type'] === '@id' ? !context['@base'] : !context['@vocab'])) {\n                            throw new ErrorCoded_1.ErrorCoded(`Missing @id in context entry: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                        }\n                        for (const objectKey of Object.keys(value)) {\n                            const objectValue = value[objectKey];\n                            if (!objectValue) {\n                                continue;\n                            }\n                            switch (objectKey) {\n                                case '@id':\n                                    if (Util_1.Util.isValidKeyword(objectValue)\n                                        && objectValue !== '@type' && objectValue !== '@id' && objectValue !== '@graph' && objectValue !== '@nest') {\n                                        throw new ErrorCoded_1.ErrorCoded(`Illegal keyword alias in term value, found: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                                    }\n                                    if (Util_1.Util.isValidIriWeak(key)) {\n                                        if (objectValue === '@type') {\n                                            throw new ErrorCoded_1.ErrorCoded(`IRIs can not be mapped to @type, found: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                                        }\n                                        else if (Util_1.Util.isValidIri(objectValue)\n                                            && objectValue !== new JsonLdContextNormalized_1.JsonLdContextNormalized(context).expandTerm(key)) {\n                                            throw new ErrorCoded_1.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                                        }\n                                    }\n                                    if (typeof objectValue !== 'string') {\n                                        throw new ErrorCoded_1.ErrorCoded(`Detected non-string @id in context entry: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n                                    }\n                                    if (Util_1.Util.getPrefix(objectValue, context) === key) {\n                                        throw new ErrorCoded_1.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${key}': '${JSON\n                                            .stringify(value)}'`, ErrorCoded_1.ERROR_CODES.CYCLIC_IRI_MAPPING);\n                                    }\n                                    break;\n                                case '@type':\n                                    if (value['@container'] === '@type' && objectValue !== '@id' && objectValue !== '@vocab') {\n                                        throw new ErrorCoded_1.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${key}': '${objectValue}'`, ErrorCoded_1.ERROR_CODES.INVALID_TYPE_MAPPING);\n                                    }\n                                    if (typeof objectValue !== 'string') {\n                                        throw new ErrorCoded_1.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(valueType)}'`, ErrorCoded_1.ERROR_CODES.INVALID_TYPE_MAPPING);\n                                    }\n                                    if (objectValue !== '@id' && objectValue !== '@vocab'\n                                        && (processingMode === 1.0 || objectValue !== '@json')\n                                        && (processingMode === 1.0 || objectValue !== '@none')\n                                        && (objectValue[0] === '_' || !Util_1.Util.isValidIri(objectValue))) {\n                                        throw new ErrorCoded_1.ErrorCoded(`A context @type must be an absolute IRI, found: '${key}': '${objectValue}'`, ErrorCoded_1.ERROR_CODES.INVALID_TYPE_MAPPING);\n                                    }\n                                    break;\n                                case '@reverse':\n                                    if (typeof objectValue === 'string' && value['@id'] && value['@id'] !== objectValue) {\n                                        throw new ErrorCoded_1.ErrorCoded(`Found non-matching @id and @reverse term values in '${key}':\\\n'${objectValue}' and '${value['@id']}'`, ErrorCoded_1.ERROR_CODES.INVALID_REVERSE_PROPERTY);\n                                    }\n                                    if ('@nest' in value) {\n                                        throw new ErrorCoded_1.ErrorCoded(`@nest is not allowed in the reverse property '${key}'`, ErrorCoded_1.ERROR_CODES.INVALID_REVERSE_PROPERTY);\n                                    }\n                                    break;\n                                case '@container':\n                                    if (processingMode === 1.0) {\n                                        if (Object.keys(objectValue).length > 1\n                                            || Util_1.Util.CONTAINERS_1_0.indexOf(Object.keys(objectValue)[0]) < 0) {\n                                            throw new ErrorCoded_1.ErrorCoded(`Invalid term @container for '${key}' ('${Object.keys(objectValue)}') in 1.0, \\\nmust be only one of ${Util_1.Util.CONTAINERS_1_0.join(', ')}`, ErrorCoded_1.ERROR_CODES.INVALID_CONTAINER_MAPPING);\n                                        }\n                                    }\n                                    for (const containerValue of Object.keys(objectValue)) {\n                                        if (containerValue === '@list' && value['@reverse']) {\n                                            throw new ErrorCoded_1.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${key}'`, ErrorCoded_1.ERROR_CODES.INVALID_REVERSE_PROPERTY);\n                                        }\n                                        if (Util_1.Util.CONTAINERS.indexOf(containerValue) < 0) {\n                                            throw new ErrorCoded_1.ErrorCoded(`Invalid term @container for '${key}' ('${containerValue}'), \\\nmust be one of ${Util_1.Util.CONTAINERS.join(', ')}`, ErrorCoded_1.ERROR_CODES.INVALID_CONTAINER_MAPPING);\n                                        }\n                                    }\n                                    break;\n                                case '@language':\n                                    ContextParser.validateLanguage(objectValue, true, ErrorCoded_1.ERROR_CODES.INVALID_LANGUAGE_MAPPING);\n                                    break;\n                                case '@direction':\n                                    ContextParser.validateDirection(objectValue, true);\n                                    break;\n                                case '@prefix':\n                                    if (objectValue !== null && typeof objectValue !== 'boolean') {\n                                        throw new ErrorCoded_1.ErrorCoded(`Found an invalid term @prefix boolean in: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_PREFIX_VALUE);\n                                    }\n                                    if (!('@id' in value) && !Util_1.Util.isValidIri(key)) {\n                                        throw new ErrorCoded_1.ErrorCoded(`Invalid @prefix definition for '${key}' ('${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_TERM_DEFINITION);\n                                    }\n                                    break;\n                                case '@index':\n                                    if (processingMode === 1.0 || !value['@container'] || !value['@container']['@index']) {\n                                        throw new ErrorCoded_1.ErrorCoded(`Attempt to add illegal key to value object: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_TERM_DEFINITION);\n                                    }\n                                    break;\n                                case '@nest':\n                                    if (Util_1.Util.isPotentialKeyword(objectValue) && objectValue !== '@nest') {\n                                        throw new ErrorCoded_1.ErrorCoded(`Found an invalid term @nest value in: '${key}': '${JSON.stringify(value)}'`, ErrorCoded_1.ERROR_CODES.INVALID_NEST_VALUE);\n                                    }\n                            }\n                        }\n                        break;\n                    default:\n                        throw new ErrorCoded_1.ErrorCoded(`Found an invalid term value: '${key}': '${value}'`, ErrorCoded_1.ERROR_CODES.INVALID_TERM_DEFINITION);\n                }\n            }\n        }\n    }\n    /**\n     * Apply the @base context entry to the given context under certain circumstances.\n     * @param context A context.\n     * @param options Parsing options.\n     * @param inheritFromParent If the @base value from the parent context can be inherited.\n     * @return The given context.\n     */\n    applyBaseEntry(context, options, inheritFromParent) {\n        // In some special cases, this can be a string, so ignore those.\n        if (typeof context === 'string') {\n            return context;\n        }\n        // Give priority to @base in the parent context\n        if (inheritFromParent && !('@base' in context) && options.parentContext\n            && typeof options.parentContext === 'object' && '@base' in options.parentContext) {\n            context['@base'] = options.parentContext['@base'];\n            if (options.parentContext['@__baseDocument']) {\n                context['@__baseDocument'] = true;\n            }\n        }\n        // Override the base IRI if provided.\n        if (options.baseIRI && !options.external) {\n            if (!('@base' in context)) {\n                // The context base is the document base\n                context['@base'] = options.baseIRI;\n                context['@__baseDocument'] = true;\n            }\n            else if (context['@base'] !== null && typeof context['@base'] === 'string'\n                && !Util_1.Util.isValidIri(context['@base'])) {\n                // The context base is relative to the document base\n                context['@base'] = (0, relative_to_absolute_iri_1.resolve)(context['@base'], options.parentContext && options.parentContext['@base'] || options.baseIRI);\n            }\n        }\n        return context;\n    }\n    /**\n     * Resolve relative context IRIs, or return full IRIs as-is.\n     * @param {string} contextIri A context IRI.\n     * @param {string} baseIRI A base IRI.\n     * @return {string} The normalized context IRI.\n     */\n    normalizeContextIri(contextIri, baseIRI) {\n        if (!Util_1.Util.isValidIri(contextIri)) {\n            try {\n                contextIri = (0, relative_to_absolute_iri_1.resolve)(contextIri, baseIRI);\n            }\n            catch (_a) {\n                throw new Error(`Invalid context IRI: ${contextIri}`);\n            }\n        }\n        // TODO: Temporary workaround for fixing schema.org CORS issues (https://github.com/schemaorg/schemaorg/issues/2578#issuecomment-652324465)\n        if (this.redirectSchemaOrgHttps && contextIri.startsWith('http://schema.org')) {\n            contextIri = 'https://schema.org/';\n        }\n        return contextIri;\n    }\n    /**\n     * Parse scoped contexts in the given context.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {IParseOptions} options Parsing options.\n     * @return {IJsonLdContextNormalizedRaw} The mutated input context.\n     * @param {string[]} keys Optional set of keys from the context to parseInnerContexts of. If left undefined, all\n     * keys in the context will be iterated over.\n     */\n    async parseInnerContexts(context, options, keys) {\n        for (const key of (keys !== null && keys !== void 0 ? keys : Object.keys(context))) {\n            const value = context[key];\n            if (value && typeof value === 'object') {\n                if ('@context' in value && value['@context'] !== null && !options.ignoreScopedContexts) {\n                    // Simulate a processing based on the parent context to check if there are any (potential errors).\n                    // Honestly, I find it a bit weird to do this here, as the context may be unused,\n                    // and the final effective context may differ based on any other embedded/scoped contexts.\n                    // But hey, it's part of the spec, so we have no choice...\n                    // https://w3c.github.io/json-ld-api/#h-note-10\n                    if (this.validateContext) {\n                        try {\n                            const parentContext = Object.assign(Object.assign({}, context), { [key]: Object.assign({}, context[key]) });\n                            delete parentContext[key]['@context'];\n                            await this.parse(value['@context'], Object.assign(Object.assign({}, options), { external: false, parentContext, ignoreProtection: true, ignoreRemoteScopedContexts: true, ignoreScopedContexts: true }));\n                        }\n                        catch (e) {\n                            throw new ErrorCoded_1.ErrorCoded(e.message, ErrorCoded_1.ERROR_CODES.INVALID_SCOPED_CONTEXT);\n                        }\n                    }\n                    context[key] = Object.assign(Object.assign({}, value), { '@context': (await this.parse(value['@context'], Object.assign(Object.assign({}, options), { external: false, minimalProcessing: true, ignoreRemoteScopedContexts: true, parentContext: context })))\n                            .getContextRaw() });\n                }\n            }\n        }\n        return context;\n    }\n    async parse(context, options = {}, \n    // These options are only for internal use on recursive calls and should not be used by\n    // libraries consuming this function\n    internalOptions = {}) {\n        const { baseIRI, parentContext, external, processingMode = ContextParser.DEFAULT_PROCESSING_MODE, normalizeLanguageTags, ignoreProtection, minimalProcessing, } = options;\n        const remoteContexts = options.remoteContexts || {};\n        // Avoid remote context overflows\n        if (Object.keys(remoteContexts).length >= this.remoteContextsDepthLimit) {\n            throw new ErrorCoded_1.ErrorCoded('Detected an overflow in remote context inclusions: ' + Object.keys(remoteContexts), ErrorCoded_1.ERROR_CODES.CONTEXT_OVERFLOW);\n        }\n        if (context === null || context === undefined) {\n            // Don't allow context nullification and there are protected terms\n            if (!ignoreProtection && parentContext && Util_1.Util.hasProtectedTerms(parentContext)) {\n                throw new ErrorCoded_1.ErrorCoded('Illegal context nullification when terms are protected', ErrorCoded_1.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);\n            }\n            // Context that are explicitly set to null are empty.\n            return new JsonLdContextNormalized_1.JsonLdContextNormalized(this.applyBaseEntry({}, options, false));\n        }\n        else if (typeof context === 'string') {\n            const contextIri = this.normalizeContextIri(context, baseIRI);\n            const overriddenLoad = this.getOverriddenLoad(contextIri, options);\n            if (overriddenLoad) {\n                return new JsonLdContextNormalized_1.JsonLdContextNormalized(overriddenLoad);\n            }\n            const parsedStringContext = await this.parse(await this.load(contextIri), Object.assign(Object.assign({}, options), { baseIRI: contextIri, external: true, remoteContexts: Object.assign(Object.assign({}, remoteContexts), { [contextIri]: true }) }));\n            this.applyBaseEntry(parsedStringContext.getContextRaw(), options, true);\n            return parsedStringContext;\n        }\n        else if (Array.isArray(context)) {\n            // As a performance consideration, first load all external contexts in parallel.\n            const contextIris = [];\n            const contexts = await Promise.all(context.map((subContext, i) => {\n                if (typeof subContext === 'string') {\n                    const contextIri = this.normalizeContextIri(subContext, baseIRI);\n                    contextIris[i] = contextIri;\n                    const overriddenLoad = this.getOverriddenLoad(contextIri, options);\n                    if (overriddenLoad) {\n                        return overriddenLoad;\n                    }\n                    return this.load(contextIri);\n                }\n                else {\n                    return subContext;\n                }\n            }));\n            // Don't apply inheritance logic on minimal processing\n            if (minimalProcessing) {\n                return new JsonLdContextNormalized_1.JsonLdContextNormalized(contexts);\n            }\n            const reducedContexts = await contexts.reduce((accContextPromise, contextEntry, i) => accContextPromise\n                .then((accContext) => this.parse(contextEntry, Object.assign(Object.assign({}, options), { baseIRI: contextIris[i] || options.baseIRI, external: !!contextIris[i] || options.external, parentContext: accContext.getContextRaw(), remoteContexts: contextIris[i] ? Object.assign(Object.assign({}, remoteContexts), { [contextIris[i]]: true }) : remoteContexts }), \n            // @ts-expect-error: This third argument causes a type error because we have hidden it from consumers\n            {\n                skipValidation: i < contexts.length - 1,\n            })), Promise.resolve(new JsonLdContextNormalized_1.JsonLdContextNormalized(parentContext || {})));\n            // Override the base IRI if provided.\n            this.applyBaseEntry(reducedContexts.getContextRaw(), options, true);\n            return reducedContexts;\n        }\n        else if (typeof context === 'object') {\n            if ('@context' in context) {\n                return await this.parse(context['@context'], options);\n            }\n            // Make a deep clone of the given context, to avoid modifying it.\n            context = Object.assign({}, context);\n            // According to the JSON-LD spec, @base must be ignored from external contexts.\n            if (external) {\n                delete context['@base'];\n            }\n            // Override the base IRI if provided.\n            this.applyBaseEntry(context, options, true);\n            // Hashify container entries\n            // Do this before protected term validation as that influences term format\n            this.containersToHash(context);\n            // Don't perform any other modifications if only minimal processing is needed.\n            if (minimalProcessing) {\n                return new JsonLdContextNormalized_1.JsonLdContextNormalized(context);\n            }\n            // In JSON-LD 1.1, load @import'ed context prior to processing.\n            let importContext = {};\n            if ('@import' in context) {\n                if (processingMode >= 1.1) {\n                    // Only accept string values\n                    if (typeof context['@import'] !== 'string') {\n                        throw new ErrorCoded_1.ErrorCoded('An @import value must be a string, but got ' + typeof context['@import'], ErrorCoded_1.ERROR_CODES.INVALID_IMPORT_VALUE);\n                    }\n                    // Load context\n                    importContext = await this.loadImportContext(this.normalizeContextIri(context['@import'], baseIRI));\n                    delete context['@import'];\n                }\n                else {\n                    throw new ErrorCoded_1.ErrorCoded('Context importing is not supported in JSON-LD 1.0', ErrorCoded_1.ERROR_CODES.INVALID_CONTEXT_ENTRY);\n                }\n            }\n            this.applyScopedProtected(importContext, { processingMode }, JsonLdContextNormalized_1.defaultExpandOptions);\n            const newContext = Object.assign(importContext, context);\n            // Handle terms (before protection checks)\n            this.idifyReverseTerms(newContext);\n            this.normalize(newContext, { processingMode, normalizeLanguageTags });\n            this.applyScopedProtected(newContext, { processingMode }, JsonLdContextNormalized_1.defaultExpandOptions);\n            const keys = Object.keys(newContext);\n            const overlappingKeys = [];\n            if (typeof parentContext === 'object') {\n                // Merge different parts of the final context in order\n                for (const key in parentContext) {\n                    if (key in newContext) {\n                        overlappingKeys.push(key);\n                    }\n                    else {\n                        newContext[key] = parentContext[key];\n                    }\n                }\n            }\n            // Parse inner contexts with minimal processing\n            await this.parseInnerContexts(newContext, options, keys);\n            const newContextWrapped = new JsonLdContextNormalized_1.JsonLdContextNormalized(newContext);\n            // In JSON-LD 1.1, @vocab can be relative to @vocab in the parent context, or a compact IRI.\n            if ((newContext && newContext['@version'] || ContextParser.DEFAULT_PROCESSING_MODE) >= 1.1\n                && ((context['@vocab'] && typeof context['@vocab'] === 'string') || context['@vocab'] === '')) {\n                if (parentContext && '@vocab' in parentContext && context['@vocab'].indexOf(':') < 0) {\n                    newContext['@vocab'] = parentContext['@vocab'] + context['@vocab'];\n                }\n                else if (Util_1.Util.isCompactIri(context['@vocab']) || context['@vocab'] in newContext) {\n                    // @vocab is a compact IRI or refers exactly to a prefix\n                    newContext['@vocab'] = newContextWrapped.expandTerm(context['@vocab'], true);\n                }\n            }\n            this.expandPrefixedTerms(newContextWrapped, this.expandContentTypeToBase, keys);\n            // In JSON-LD 1.1, check if we are not redefining any protected keywords\n            if (!ignoreProtection && parentContext && processingMode >= 1.1) {\n                this.validateKeywordRedefinitions(parentContext, newContext, JsonLdContextNormalized_1.defaultExpandOptions, overlappingKeys);\n            }\n            if (this.validateContext && !internalOptions.skipValidation) {\n                this.validate(newContext, { processingMode });\n            }\n            return newContextWrapped;\n        }\n        else {\n            throw new ErrorCoded_1.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${context}`, ErrorCoded_1.ERROR_CODES.INVALID_LOCAL_CONTEXT);\n        }\n    }\n    /**\n     * Fetch the given URL as a raw JSON-LD context.\n     * @param url An URL.\n     * @return A promise resolving to a raw JSON-LD context.\n     */\n    async load(url) {\n        // First try to retrieve the context from cache\n        const cached = this.documentCache[url];\n        if (cached) {\n            return cached;\n        }\n        // If not in cache, load it\n        let document;\n        try {\n            document = await this.documentLoader.load(url);\n        }\n        catch (e) {\n            throw new ErrorCoded_1.ErrorCoded(`Failed to load remote context ${url}: ${e.message}`, ErrorCoded_1.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED);\n        }\n        // Validate the context\n        if (!('@context' in document)) {\n            throw new ErrorCoded_1.ErrorCoded(`Missing @context in remote context at ${url}`, ErrorCoded_1.ERROR_CODES.INVALID_REMOTE_CONTEXT);\n        }\n        return this.documentCache[url] = document['@context'];\n    }\n    /**\n     * Override the given context that may be loaded.\n     *\n     * This will check whether or not the url is recursively being loaded.\n     * @param url An URL.\n     * @param options Parsing options.\n     * @return An overridden context, or null.\n     *         Optionally an error can be thrown if a cyclic context is detected.\n     */\n    getOverriddenLoad(url, options) {\n        if (url in (options.remoteContexts || {})) {\n            if (options.ignoreRemoteScopedContexts) {\n                return url;\n            }\n            else {\n                throw new ErrorCoded_1.ErrorCoded('Detected a cyclic context inclusion of ' + url, ErrorCoded_1.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION);\n            }\n        }\n        return null;\n    }\n    /**\n     * Load an @import'ed context.\n     * @param importContextIri The full URI of an @import value.\n     */\n    async loadImportContext(importContextIri) {\n        // Load the context - and do a deep clone since we are about to mutate it\n        let importContext = await this.load(importContextIri);\n        // Require the context to be a non-array object\n        if (typeof importContext !== 'object' || Array.isArray(importContext)) {\n            throw new ErrorCoded_1.ErrorCoded('An imported context must be a single object: ' + importContextIri, ErrorCoded_1.ERROR_CODES.INVALID_REMOTE_CONTEXT);\n        }\n        // Error if the context contains another @import\n        if ('@import' in importContext) {\n            throw new ErrorCoded_1.ErrorCoded('An imported context can not import another context: ' + importContextIri, ErrorCoded_1.ERROR_CODES.INVALID_CONTEXT_ENTRY);\n        }\n        importContext = Object.assign({}, importContext);\n        // Containers have to be converted into hash values the same way as for the importing context\n        // Otherwise context validation will fail for container values\n        this.containersToHash(importContext);\n        return importContext;\n    }\n}\nContextParser.DEFAULT_PROCESSING_MODE = 1.1;\nexports.ContextParser = ContextParser;\n//# sourceMappingURL=ContextParser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ERROR_CODES = exports.ErrorCoded = void 0;\n/**\n * An error that has a certain error code.\n *\n * The error code can be any string.\n * All standardized error codes are listed in {@link ERROR_CODES}.\n */\nclass ErrorCoded extends Error {\n    /* istanbul ignore next */\n    constructor(message, code) {\n        super(message);\n        this.code = code;\n    }\n}\nexports.ErrorCoded = ErrorCoded;\n/**\n * All standardized JSON-LD error codes.\n * @see https://w3c.github.io/json-ld-api/#dom-jsonlderrorcode\n */\n// tslint:disable:object-literal-sort-keys\nvar ERROR_CODES;\n(function (ERROR_CODES) {\n    ERROR_CODES[\"COLLIDING_KEYWORDS\"] = \"colliding keywords\";\n    ERROR_CODES[\"CONFLICTING_INDEXES\"] = \"conflicting indexes\";\n    ERROR_CODES[\"CYCLIC_IRI_MAPPING\"] = \"cyclic IRI mapping\";\n    ERROR_CODES[\"INVALID_ID_VALUE\"] = \"invalid @id value\";\n    ERROR_CODES[\"INVALID_INDEX_VALUE\"] = \"invalid @index value\";\n    ERROR_CODES[\"INVALID_NEST_VALUE\"] = \"invalid @nest value\";\n    ERROR_CODES[\"INVALID_PREFIX_VALUE\"] = \"invalid @prefix value\";\n    ERROR_CODES[\"INVALID_PROPAGATE_VALUE\"] = \"invalid @propagate value\";\n    ERROR_CODES[\"INVALID_REVERSE_VALUE\"] = \"invalid @reverse value\";\n    ERROR_CODES[\"INVALID_IMPORT_VALUE\"] = \"invalid @import value\";\n    ERROR_CODES[\"INVALID_VERSION_VALUE\"] = \"invalid @version value\";\n    ERROR_CODES[\"INVALID_BASE_IRI\"] = \"invalid base IRI\";\n    ERROR_CODES[\"INVALID_CONTAINER_MAPPING\"] = \"invalid container mapping\";\n    ERROR_CODES[\"INVALID_CONTEXT_ENTRY\"] = \"invalid context entry\";\n    ERROR_CODES[\"INVALID_CONTEXT_NULLIFICATION\"] = \"invalid context nullification\";\n    ERROR_CODES[\"INVALID_DEFAULT_LANGUAGE\"] = \"invalid default language\";\n    ERROR_CODES[\"INVALID_INCLUDED_VALUE\"] = \"invalid @included value\";\n    ERROR_CODES[\"INVALID_IRI_MAPPING\"] = \"invalid IRI mapping\";\n    ERROR_CODES[\"INVALID_JSON_LITERAL\"] = \"invalid JSON literal\";\n    ERROR_CODES[\"INVALID_KEYWORD_ALIAS\"] = \"invalid keyword alias\";\n    ERROR_CODES[\"INVALID_LANGUAGE_MAP_VALUE\"] = \"invalid language map value\";\n    ERROR_CODES[\"INVALID_LANGUAGE_MAPPING\"] = \"invalid language mapping\";\n    ERROR_CODES[\"INVALID_LANGUAGE_TAGGED_STRING\"] = \"invalid language-tagged string\";\n    ERROR_CODES[\"INVALID_LANGUAGE_TAGGED_VALUE\"] = \"invalid language-tagged value\";\n    ERROR_CODES[\"INVALID_LOCAL_CONTEXT\"] = \"invalid local context\";\n    ERROR_CODES[\"INVALID_REMOTE_CONTEXT\"] = \"invalid remote context\";\n    ERROR_CODES[\"INVALID_REVERSE_PROPERTY\"] = \"invalid reverse property\";\n    ERROR_CODES[\"INVALID_REVERSE_PROPERTY_MAP\"] = \"invalid reverse property map\";\n    ERROR_CODES[\"INVALID_REVERSE_PROPERTY_VALUE\"] = \"invalid reverse property value\";\n    ERROR_CODES[\"INVALID_SCOPED_CONTEXT\"] = \"invalid scoped context\";\n    ERROR_CODES[\"INVALID_SCRIPT_ELEMENT\"] = \"invalid script element\";\n    ERROR_CODES[\"INVALID_SET_OR_LIST_OBJECT\"] = \"invalid set or list object\";\n    ERROR_CODES[\"INVALID_TERM_DEFINITION\"] = \"invalid term definition\";\n    ERROR_CODES[\"INVALID_TYPE_MAPPING\"] = \"invalid type mapping\";\n    ERROR_CODES[\"INVALID_TYPE_VALUE\"] = \"invalid type value\";\n    ERROR_CODES[\"INVALID_TYPED_VALUE\"] = \"invalid typed value\";\n    ERROR_CODES[\"INVALID_VALUE_OBJECT\"] = \"invalid value object\";\n    ERROR_CODES[\"INVALID_VALUE_OBJECT_VALUE\"] = \"invalid value object value\";\n    ERROR_CODES[\"INVALID_VOCAB_MAPPING\"] = \"invalid vocab mapping\";\n    ERROR_CODES[\"IRI_CONFUSED_WITH_PREFIX\"] = \"IRI confused with prefix\";\n    ERROR_CODES[\"KEYWORD_REDEFINITION\"] = \"keyword redefinition\";\n    ERROR_CODES[\"LOADING_DOCUMENT_FAILED\"] = \"loading document failed\";\n    ERROR_CODES[\"LOADING_REMOTE_CONTEXT_FAILED\"] = \"loading remote context failed\";\n    ERROR_CODES[\"MULTIPLE_CONTEXT_LINK_HEADERS\"] = \"multiple context link headers\";\n    ERROR_CODES[\"PROCESSING_MODE_CONFLICT\"] = \"processing mode conflict\";\n    ERROR_CODES[\"PROTECTED_TERM_REDEFINITION\"] = \"protected term redefinition\";\n    ERROR_CODES[\"CONTEXT_OVERFLOW\"] = \"context overflow\";\n    ERROR_CODES[\"INVALID_BASE_DIRECTION\"] = \"invalid base direction\";\n    ERROR_CODES[\"RECURSIVE_CONTEXT_INCLUSION\"] = \"recursive context inclusion\";\n    ERROR_CODES[\"INVALID_STREAMING_KEY_ORDER\"] = \"invalid streaming key order\";\n    /**\n     * JSON-LD-star\n     */\n    ERROR_CODES[\"INVALID_EMBEDDED_NODE\"] = \"invalid embedded node\";\n    ERROR_CODES[\"INVALID_ANNOTATION\"] = \"invalid annotation\";\n})(ERROR_CODES = exports.ERROR_CODES || (exports.ERROR_CODES = {}));\n//# sourceMappingURL=ErrorCoded.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FetchDocumentLoader = void 0;\nrequire(\"cross-fetch/polyfill\");\nconst ErrorCoded_1 = require(\"./ErrorCoded\");\nconst http_link_header_1 = require(\"http-link-header\");\nconst relative_to_absolute_iri_1 = require(\"relative-to-absolute-iri\");\n/**\n * Loads documents via the fetch API.\n */\nclass FetchDocumentLoader {\n    constructor(fetcher) {\n        this.fetcher = fetcher;\n    }\n    async load(url) {\n        const response = await (this.fetcher || fetch)(url, { headers: new Headers({ accept: 'application/ld+json' }) });\n        if (response.ok && response.headers) {\n            let mediaType = response.headers.get('Content-Type');\n            if (mediaType) {\n                const colonPos = mediaType.indexOf(';');\n                if (colonPos > 0) {\n                    mediaType = mediaType.substr(0, colonPos);\n                }\n            }\n            if (mediaType === 'application/ld+json') {\n                // Return JSON-LD if proper content type was returned\n                return (await response.json());\n            }\n            else {\n                // Check for alternate link for a non-JSON-LD response\n                if (response.headers.has('Link')) {\n                    let alternateUrl;\n                    response.headers.forEach((value, key) => {\n                        if (key === 'link') {\n                            const linkHeader = (0, http_link_header_1.parse)(value);\n                            for (const link of linkHeader.get('type', 'application/ld+json')) {\n                                if (link.rel === 'alternate') {\n                                    if (alternateUrl) {\n                                        throw new Error('Multiple JSON-LD alternate links were found on ' + url);\n                                    }\n                                    alternateUrl = (0, relative_to_absolute_iri_1.resolve)(link.uri, url);\n                                }\n                            }\n                        }\n                    });\n                    if (alternateUrl) {\n                        return this.load(alternateUrl);\n                    }\n                }\n                throw new ErrorCoded_1.ErrorCoded(`Unsupported JSON-LD media type ${mediaType}`, ErrorCoded_1.ERROR_CODES.LOADING_DOCUMENT_FAILED);\n            }\n        }\n        else {\n            throw new Error(response.statusText || `Status code: ${response.status}`);\n        }\n    }\n}\nexports.FetchDocumentLoader = FetchDocumentLoader;\n//# sourceMappingURL=FetchDocumentLoader.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=IDocumentLoader.js.map","\"use strict\";\n// tslint:disable:max-line-length\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=JsonLdContext.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultExpandOptions = exports.JsonLdContextNormalized = void 0;\nconst relative_to_absolute_iri_1 = require(\"relative-to-absolute-iri\");\nconst ErrorCoded_1 = require(\"./ErrorCoded\");\nconst Util_1 = require(\"./Util\");\n/**\n * A class exposing operations over a normalized JSON-LD context.\n */\nclass JsonLdContextNormalized {\n    constructor(contextRaw) {\n        this.contextRaw = contextRaw;\n    }\n    /**\n     * @return The raw inner context.\n     */\n    getContextRaw() {\n        return this.contextRaw;\n    }\n    /**\n     * Expand the term or prefix of the given term if it has one,\n     * otherwise return the term as-is.\n     *\n     * This will try to expand the IRI as much as possible.\n     *\n     * Iff in vocab-mode, then other references to other terms in the context can be used,\n     * such as to `myTerm`:\n     * ```\n     * {\n     *   \"myTerm\": \"http://example.org/myLongTerm\"\n     * }\n     * ```\n     *\n     * @param {string} term A term that is an URL or a prefixed URL.\n     * @param {boolean} expandVocab If the term is a predicate or type and should be expanded based on @vocab,\n     *                              otherwise it is considered a regular term that is expanded based on @base.\n     * @param {IExpandOptions} options Options that define the way how expansion must be done.\n     * @return {string} The expanded term, the term as-is, or null if it was explicitly disabled in the context.\n     * @throws If the term is aliased to an invalid value (not a string, IRI or keyword).\n     */\n    expandTerm(term, expandVocab, options = exports.defaultExpandOptions) {\n        const contextValue = this.contextRaw[term];\n        // Immediately return if the term was disabled in the context\n        if (contextValue === null || (contextValue && contextValue['@id'] === null)) {\n            return null;\n        }\n        // Check the @id\n        let validIriMapping = true;\n        if (contextValue && expandVocab) {\n            const value = Util_1.Util.getContextValueId(contextValue);\n            if (value && value !== term) {\n                if (typeof value !== 'string' || (!Util_1.Util.isValidIri(value) && !Util_1.Util.isValidKeyword(value))) {\n                    // Don't mark this mapping as invalid if we have an unknown keyword, but of the correct form.\n                    if (!Util_1.Util.isPotentialKeyword(value)) {\n                        validIriMapping = false;\n                    }\n                }\n                else {\n                    return value;\n                }\n            }\n        }\n        // Check if the term is prefixed\n        const prefix = Util_1.Util.getPrefix(term, this.contextRaw);\n        const vocab = this.contextRaw['@vocab'];\n        const vocabRelative = (!!vocab || vocab === '') && vocab.indexOf(':') < 0;\n        const base = this.contextRaw['@base'];\n        const potentialKeyword = Util_1.Util.isPotentialKeyword(term);\n        if (prefix) {\n            const contextPrefixValue = this.contextRaw[prefix];\n            const value = Util_1.Util.getContextValueId(contextPrefixValue);\n            if (value) {\n                if (typeof contextPrefixValue === 'string' || !options.allowPrefixForcing) {\n                    // If we have a simple term definition,\n                    // check the last character of the prefix to determine whether or not it is a prefix.\n                    // Validate that prefix ends with gen-delim character, unless @prefix is true\n                    if (!Util_1.Util.isSimpleTermDefinitionPrefix(value, options)) {\n                        // Treat the term as an absolute IRI\n                        return term;\n                    }\n                }\n                else {\n                    // If we have an expanded term definition, default to @prefix: false\n                    if (value[0] !== '_' && !potentialKeyword && !contextPrefixValue['@prefix'] && !(term in this.contextRaw)) {\n                        // Treat the term as an absolute IRI\n                        return term;\n                    }\n                }\n                return value + term.substr(prefix.length + 1);\n            }\n        }\n        else if (expandVocab && ((vocab || vocab === '') || (options.allowVocabRelativeToBase && (base && vocabRelative)))\n            && !potentialKeyword && !Util_1.Util.isCompactIri(term)) {\n            if (vocabRelative) {\n                if (options.allowVocabRelativeToBase) {\n                    return ((vocab || base) ? (0, relative_to_absolute_iri_1.resolve)(vocab, base) : '') + term;\n                }\n                else {\n                    throw new ErrorCoded_1.ErrorCoded(`Relative vocab expansion for term '${term}' with vocab '${vocab}' is not allowed.`, ErrorCoded_1.ERROR_CODES.INVALID_VOCAB_MAPPING);\n                }\n            }\n            else {\n                return vocab + term;\n            }\n        }\n        else if (!expandVocab && base && !potentialKeyword && !Util_1.Util.isCompactIri(term)) {\n            return (0, relative_to_absolute_iri_1.resolve)(term, base);\n        }\n        // Return the term as-is, unless we discovered an invalid IRI mapping for this term in the context earlier.\n        if (validIriMapping) {\n            return term;\n        }\n        else {\n            throw new ErrorCoded_1.ErrorCoded(`Invalid IRI mapping found for context entry '${term}': '${JSON.stringify(contextValue)}'`, ErrorCoded_1.ERROR_CODES.INVALID_IRI_MAPPING);\n        }\n    }\n    /**\n     * Compact the given term using @base, @vocab, an aliased term, or a prefixed term.\n     *\n     * This will try to compact the IRI as much as possible.\n     *\n     * @param {string} iri An IRI to compact.\n     * @param {boolean} vocab If the term is a predicate or type and should be compacted based on @vocab,\n     *                        otherwise it is considered a regular term that is compacted based on @base.\n     * @return {string} The compacted term or the IRI as-is.\n     */\n    compactIri(iri, vocab) {\n        // Try @vocab compacting\n        if (vocab && this.contextRaw['@vocab'] && iri.startsWith(this.contextRaw['@vocab'])) {\n            return iri.substr(this.contextRaw['@vocab'].length);\n        }\n        // Try @base compacting\n        if (!vocab && this.contextRaw['@base'] && iri.startsWith(this.contextRaw['@base'])) {\n            return iri.substr(this.contextRaw['@base'].length);\n        }\n        // Loop over all terms in the context\n        // This will try to prefix as short as possible.\n        // Once a fully compacted alias is found, return immediately, as we can not go any shorter.\n        const shortestPrefixing = { prefix: '', suffix: iri };\n        for (const key in this.contextRaw) {\n            const value = this.contextRaw[key];\n            if (value && !Util_1.Util.isPotentialKeyword(key)) {\n                const contextIri = Util_1.Util.getContextValueId(value);\n                if (iri.startsWith(contextIri)) {\n                    const suffix = iri.substr(contextIri.length);\n                    if (!suffix) {\n                        if (vocab) {\n                            // Immediately return on compacted alias\n                            return key;\n                        }\n                    }\n                    else if (suffix.length < shortestPrefixing.suffix.length) {\n                        // Overwrite the shortest prefix\n                        shortestPrefixing.prefix = key;\n                        shortestPrefixing.suffix = suffix;\n                    }\n                }\n            }\n        }\n        // Return the shortest prefix\n        if (shortestPrefixing.prefix) {\n            return shortestPrefixing.prefix + ':' + shortestPrefixing.suffix;\n        }\n        return iri;\n    }\n}\nexports.JsonLdContextNormalized = JsonLdContextNormalized;\nexports.defaultExpandOptions = {\n    allowPrefixForcing: true,\n    allowPrefixNonGenDelims: false,\n    allowVocabRelativeToBase: true,\n};\n//# sourceMappingURL=JsonLdContextNormalized.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Util = void 0;\nclass Util {\n    /**\n     * Check if the given term is a valid compact IRI.\n     * Otherwise, it may be an IRI.\n     * @param {string} term A term.\n     * @return {boolean} If it is a compact IRI.\n     */\n    static isCompactIri(term) {\n        return term.indexOf(':') > 0 && !(term && term[0] === '#');\n    }\n    /**\n     * Get the prefix from the given term.\n     * @see https://json-ld.org/spec/latest/json-ld/#compact-iris\n     * @param {string} term A term that is an URL or a prefixed URL.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @return {string} The prefix or null.\n     */\n    static getPrefix(term, context) {\n        // Do not consider relative IRIs starting with a hash as compact IRIs\n        if (term && term[0] === '#') {\n            return null;\n        }\n        const separatorPos = term.indexOf(':');\n        if (separatorPos >= 0) {\n            // Suffix can not begin with two slashes\n            if (term.length > separatorPos + 1\n                && term.charAt(separatorPos + 1) === '/'\n                && term.charAt(separatorPos + 2) === '/') {\n                return null;\n            }\n            const prefix = term.substr(0, separatorPos);\n            // Prefix can not be an underscore (this is a blank node)\n            if (prefix === '_') {\n                return null;\n            }\n            // Prefix must match a term in the active context\n            if (context[prefix]) {\n                return prefix;\n            }\n        }\n        return null;\n    }\n    /**\n     * From a given context entry value, get the string value, or the @id field.\n     * @param contextValue A value for a term in a context.\n     * @return {string} The id value, or null.\n     */\n    static getContextValueId(contextValue) {\n        if (contextValue === null || typeof contextValue === 'string') {\n            return contextValue;\n        }\n        const id = contextValue['@id'];\n        return id ? id : null;\n    }\n    /**\n     * Check if the given simple term definition (string-based value of a context term)\n     * should be considered a prefix.\n     * @param value A simple term definition value.\n     * @param options Options that define the way how expansion must be done.\n     */\n    static isSimpleTermDefinitionPrefix(value, options) {\n        return !Util.isPotentialKeyword(value)\n            && (options.allowPrefixNonGenDelims || (typeof value === 'string' && (value[0] === '_' || Util.isPrefixIriEndingWithGenDelim(value))));\n    }\n    /**\n     * Check if the given keyword is of the keyword format \"@\"1*ALPHA.\n     * @param {string} keyword A potential keyword.\n     * @return {boolean} If the given keyword is of the keyword format.\n     */\n    static isPotentialKeyword(keyword) {\n        return typeof keyword === 'string' && Util.KEYWORD_REGEX.test(keyword);\n    }\n    /**\n     * Check if the given prefix ends with a gen-delim character.\n     * @param {string} prefixIri A prefix IRI.\n     * @return {boolean} If the given prefix IRI is valid.\n     */\n    static isPrefixIriEndingWithGenDelim(prefixIri) {\n        return Util.ENDS_WITH_GEN_DELIM.test(prefixIri);\n    }\n    /**\n     * Check if the given context value can be a prefix value.\n     * @param value A context value.\n     * @return {boolean} If it can be a prefix value.\n     */\n    static isPrefixValue(value) {\n        return value && (typeof value === 'string' || (value && typeof value === 'object'));\n    }\n    /**\n     * Check if the given IRI is valid.\n     * @param {string} iri A potential IRI.\n     * @return {boolean} If the given IRI is valid.\n     */\n    static isValidIri(iri) {\n        return Boolean(iri && Util.IRI_REGEX.test(iri));\n    }\n    /**\n     * Check if the given IRI is valid, this includes the possibility of being a relative IRI.\n     * @param {string} iri A potential IRI.\n     * @return {boolean} If the given IRI is valid.\n     */\n    static isValidIriWeak(iri) {\n        return !!iri && iri[0] !== ':' && Util.IRI_REGEX_WEAK.test(iri);\n    }\n    /**\n     * Check if the given keyword is a defined according to the JSON-LD specification.\n     * @param {string} keyword A potential keyword.\n     * @return {boolean} If the given keyword is valid.\n     */\n    static isValidKeyword(keyword) {\n        return Util.VALID_KEYWORDS[keyword];\n    }\n    /**\n     * Check if the given term is protected in the context.\n     * @param {IJsonLdContextNormalizedRaw} context A context.\n     * @param {string} key A context term.\n     * @return {boolean} If the given term has an @protected flag.\n     */\n    static isTermProtected(context, key) {\n        const value = context[key];\n        return !(typeof value === 'string') && value && value['@protected'];\n    }\n    /**\n     * Check if the given context has at least one protected term.\n     * @param context A context.\n     * @return If the context has a protected term.\n     */\n    static hasProtectedTerms(context) {\n        for (const key of Object.keys(context)) {\n            if (Util.isTermProtected(context, key)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    /**\n     * Check if the given key is an internal reserved keyword.\n     * @param key A context key.\n     */\n    static isReservedInternalKeyword(key) {\n        return key.startsWith('@__');\n    }\n    /**\n     * Check if two objects are deepEqual to on another.\n     * @param object1 The first object to test.\n     * @param object2 The second object to test.\n     */\n    static deepEqual(object1, object2) {\n        const objKeys1 = Object.keys(object1);\n        const objKeys2 = Object.keys(object2);\n        if (objKeys1.length !== objKeys2.length)\n            return false;\n        return objKeys1.every((key) => {\n            const value1 = object1[key];\n            const value2 = object2[key];\n            return (value1 === value2) || (value1 !== null &&\n                value2 !== null &&\n                typeof value1 === \"object\" &&\n                typeof value2 === \"object\" &&\n                this.deepEqual(value1, value2));\n        });\n    }\n    ;\n}\n// Regex for valid IRIs\nUtil.IRI_REGEX = /^([A-Za-z][A-Za-z0-9+-.]*|_):[^ \"<>{}|\\\\\\[\\]`#]*(#[^#]*)?$/;\n// Weaker regex for valid IRIs, this includes relative IRIs\nUtil.IRI_REGEX_WEAK = /(?::[^:])|\\//;\n// Regex for keyword form\nUtil.KEYWORD_REGEX = /^@[a-z]+$/i;\n// Regex to see if an IRI ends with a gen-delim character (see RFC 3986)\nUtil.ENDS_WITH_GEN_DELIM = /[:/?#\\[\\]@]$/;\n// Regex for language tags\nUtil.REGEX_LANGUAGE_TAG = /^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/;\n// Regex for base directions\nUtil.REGEX_DIRECTION_TAG = /^(ltr)|(rtl)$/;\n// All known valid JSON-LD keywords\n// @see https://www.w3.org/TR/json-ld11/#keywords\nUtil.VALID_KEYWORDS = {\n    '@annotation': true,\n    '@base': true,\n    '@container': true,\n    '@context': true,\n    '@direction': true,\n    '@graph': true,\n    '@id': true,\n    '@import': true,\n    '@included': true,\n    '@index': true,\n    '@json': true,\n    '@language': true,\n    '@list': true,\n    '@nest': true,\n    '@none': true,\n    '@prefix': true,\n    '@propagate': true,\n    '@protected': true,\n    '@reverse': true,\n    '@set': true,\n    '@type': true,\n    '@value': true,\n    '@version': true,\n    '@vocab': true,\n};\n// Keys in the contexts that will not be expanded based on the base IRI\nUtil.EXPAND_KEYS_BLACKLIST = [\n    '@base',\n    '@vocab',\n    '@language',\n    '@version',\n    '@direction',\n];\n// Keys in the contexts that may not be aliased from\nUtil.ALIAS_DOMAIN_BLACKLIST = [\n    '@container',\n    '@graph',\n    '@id',\n    '@index',\n    '@list',\n    '@nest',\n    '@none',\n    '@prefix',\n    '@reverse',\n    '@set',\n    '@type',\n    '@value',\n    '@version',\n];\n// Keys in the contexts that may not be aliased to\nUtil.ALIAS_RANGE_BLACKLIST = [\n    '@context',\n    '@preserve',\n];\n// All valid @container values\nUtil.CONTAINERS = [\n    '@list',\n    '@set',\n    '@index',\n    '@language',\n    '@graph',\n    '@id',\n    '@type',\n];\n// All valid @container values under processing mode 1.0\nUtil.CONTAINERS_1_0 = [\n    '@list',\n    '@set',\n    '@index',\n];\nexports.Util = Util;\n//# sourceMappingURL=Util.js.map","(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n})({});\n})(typeof self !== 'undefined' ? self : this);\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/JsonLdSerializer\"), exports);\n__exportStar(require(\"./lib/Util\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.JsonLdSerializer = void 0;\nconst jsonld_context_parser_1 = require(\"jsonld-context-parser\");\nconst SeparatorType_1 = require(\"./SeparatorType\");\nconst Util_1 = require(\"./Util\");\nconst readable_stream_1 = require(\"readable-stream\");\n/**\n * A stream transformer that transforms an {@link RDF.Stream} into a JSON-LD (text) stream.\n */\nclass JsonLdSerializer extends readable_stream_1.Transform {\n    constructor(options = {}) {\n        super({ objectMode: true });\n        this.indentation = 0;\n        this.options = options;\n        // Parse the context\n        if (this.options.baseIRI && !this.options.context) {\n            this.options.context = { '@base': this.options.baseIRI };\n        }\n        if (this.options.context) {\n            this.originalContext = this.options.context;\n            this.context = new jsonld_context_parser_1.ContextParser().parse(this.options.context, { baseIRI: this.options.baseIRI });\n        }\n        else {\n            this.context = Promise.resolve(new jsonld_context_parser_1.JsonLdContextNormalized({}));\n        }\n    }\n    /**\n     * Parses the given text stream into a quad stream.\n     * @param {NodeJS.EventEmitter} stream A text stream.\n     * @return {NodeJS.EventEmitter} A quad stream.\n     */\n    import(stream) {\n        const output = new readable_stream_1.PassThrough({ objectMode: true });\n        stream.on('error', (error) => parsed.emit('error', error));\n        stream.on('data', (data) => output.push(data));\n        stream.on('end', () => output.push(null));\n        const parsed = output.pipe(new JsonLdSerializer(this.options));\n        return parsed;\n    }\n    /**\n     * Transforms a quad into the text stream.\n     * @param {Quad} quad An RDF quad.\n     * @param {string} encoding An (ignored) encoding.\n     * @param {module:stream.internal.TransformCallback} callback Callback that is invoked when the transformation is done\n     * @private\n     */\n    _transform(quad, encoding, callback) {\n        this.context.then((context) => {\n            this.transformQuad(quad, context);\n            callback();\n        }).catch(callback);\n    }\n    /**\n     * Construct a list in an RDF.Term object that can be used\n     * inside a quad's object to write into the serializer\n     * as a list using the @list keyword.\n     * @param {RDF.Quad_Object[]} values A list of values, can be empty.\n     * @return {RDF.Quad_Object} A term that should be used in the object position of the quad that is written to the serializer.\n     */\n    async list(values) {\n        const context = await this.context;\n        return {\n            '@list': values.map((value) => Util_1.Util.termToValue(value, context, this.options)),\n        };\n    }\n    /**\n     * Called when the incoming stream is closed.\n     * @param {module:stream.internal.TransformCallback} callback Callback that is invoked when the flushing is done.\n     * @private\n     */\n    _flush(callback) {\n        // If the stream was empty, ensure that we push the opening array\n        if (!this.opened) {\n            this.pushDocumentStart();\n        }\n        if (this.lastPredicate) {\n            this.endPredicate();\n        }\n        if (this.lastSubject) {\n            this.endSubject();\n        }\n        if (this.lastGraph && this.lastGraph.termType !== 'DefaultGraph') {\n            this.endGraph();\n        }\n        this.endDocument();\n        return callback(null, null);\n    }\n    /**\n     * Transforms a quad into the text stream.\n     * @param {Quad} quad An RDF quad.\n     * @param {JsonLdContextNormalized} context A context for compacting.\n     */\n    transformQuad(quad, context) {\n        // Open the array before the first quad\n        if (!this.opened) {\n            this.pushDocumentStart();\n        }\n        // Check if the subject equals the last named graph\n        // In that case, we can reuse the already-existing @id node\n        const lastGraphMatchesSubject = this.lastGraph && this.lastGraph.termType !== 'DefaultGraph'\n            && this.lastGraph.equals(quad.subject);\n        // Write graph\n        if (!lastGraphMatchesSubject && (!this.lastGraph || !quad.graph.equals(this.lastGraph))) {\n            // Check if the named graph equals the last subject\n            // In that case, we can reuse the already-existing @id node\n            let lastSubjectMatchesGraph = quad.graph.termType !== 'DefaultGraph'\n                && this.lastSubject && this.lastSubject.equals(quad.graph);\n            if (this.lastGraph) {\n                if (this.lastGraph.termType !== 'DefaultGraph') {\n                    // The last graph was named\n                    this.endPredicate();\n                    this.endSubject();\n                    this.endGraph(true);\n                    lastSubjectMatchesGraph = false; // Special-case to avoid deeper nesting\n                }\n                else {\n                    // The last graph was default\n                    if (!lastSubjectMatchesGraph) {\n                        this.endPredicate();\n                        this.endSubject(true);\n                    }\n                    else {\n                        this.endPredicate(true);\n                        this.lastSubject = null;\n                    }\n                }\n            }\n            // Push the graph\n            if (quad.graph.termType !== 'DefaultGraph') {\n                if (!lastSubjectMatchesGraph) {\n                    this.pushId(quad.graph, true, context);\n                }\n                this.pushSeparator(this.options.space\n                    ? SeparatorType_1.SeparatorType.GRAPH_FIELD_NONCOMPACT : SeparatorType_1.SeparatorType.GRAPH_FIELD_COMPACT);\n                this.indentation++;\n            }\n            this.lastGraph = quad.graph;\n        }\n        // Write subject\n        if (!this.lastSubject || !quad.subject.equals(this.lastSubject)) {\n            if (lastGraphMatchesSubject) {\n                this.endPredicate();\n                this.endSubject();\n                this.indentation--;\n                this.pushSeparator(SeparatorType_1.SeparatorType.ARRAY_END_COMMA);\n                this.lastGraph = quad.graph;\n            }\n            else {\n                if (this.lastSubject) {\n                    this.endPredicate();\n                    this.endSubject(true);\n                }\n                // Open a new node for the new subject\n                this.pushId(quad.subject, true, context);\n            }\n            this.lastSubject = quad.subject;\n        }\n        // Write predicate\n        if (!this.lastPredicate || !quad.predicate.equals(this.lastPredicate)) {\n            if (this.lastPredicate) {\n                this.endPredicate(true);\n            }\n            // Open a new array for the new predicate\n            this.pushPredicate(quad.predicate, context);\n        }\n        // Write the object value\n        this.pushObject(quad.object, context);\n    }\n    pushDocumentStart() {\n        this.opened = true;\n        if (this.originalContext && !this.options.excludeContext) {\n            this.pushSeparator(SeparatorType_1.SeparatorType.OBJECT_START);\n            this.indentation++;\n            this.pushSeparator(SeparatorType_1.SeparatorType.CONTEXT_FIELD);\n            this.pushIndented(JSON.stringify(this.originalContext, null, this.options.space) + ',');\n            this.pushSeparator(this.options.space\n                ? SeparatorType_1.SeparatorType.GRAPH_FIELD_NONCOMPACT : SeparatorType_1.SeparatorType.GRAPH_FIELD_COMPACT);\n            this.indentation++;\n        }\n        else {\n            this.pushSeparator(SeparatorType_1.SeparatorType.ARRAY_START);\n            this.indentation++;\n        }\n    }\n    /**\n     * Push the given term as an @id field.\n     * @param {Term} term An RDF term.\n     * @param startOnNewLine If `{` should start on a new line\n     * @param {JsonLdContextNormalized} context The context.\n     */\n    pushId(term, startOnNewLine, context) {\n        if (term.termType === 'Quad') {\n            this.pushNestedQuad(term, true, context);\n        }\n        else {\n            const subjectValue = term.termType === 'BlankNode'\n                ? '_:' + term.value : context.compactIri(term.value, false);\n            if (startOnNewLine) {\n                this.pushSeparator(SeparatorType_1.SeparatorType.OBJECT_START);\n            }\n            else {\n                this.push(SeparatorType_1.SeparatorType.OBJECT_START.label);\n                if (this.options.space) {\n                    this.push('\\n');\n                }\n            }\n            this.indentation++;\n            this.pushIndented(this.options.space ? `\"@id\": \"${subjectValue}\",` : `\"@id\":\"${subjectValue}\",`);\n        }\n    }\n    /**\n     * Push the given predicate field.\n     * @param {Term} predicate An RDF term.\n     * @param {JsonLdContextNormalized} context The context.\n     */\n    pushPredicate(predicate, context) {\n        let property = predicate.value;\n        // Convert rdf:type into @type if not disabled.\n        if (!this.options.useRdfType && property === Util_1.Util.RDF_TYPE) {\n            property = '@type';\n            this.objectOptions = Object.assign(Object.assign({}, this.options), { compactIds: true, vocab: true });\n        }\n        // Open array for following objects\n        const compactedProperty = context.compactIri(property, true);\n        this.pushIndented(this.options.space ? `\"${compactedProperty}\": [` : `\"${compactedProperty}\":[`);\n        this.indentation++;\n        this.lastPredicate = predicate;\n    }\n    /**\n     * Push the given object value.\n     * @param {Term} object An RDF term.\n     * @param {JsonLdContextNormalized} context The context.\n     */\n    pushObject(object, context) {\n        // Add a comma if we already had an object for this predicate\n        if (!this.hadObjectForPredicate) {\n            this.hadObjectForPredicate = true;\n        }\n        else {\n            this.pushSeparator(SeparatorType_1.SeparatorType.COMMA);\n        }\n        // Handle nested quad\n        if (object.termType === 'Quad') {\n            const lastLastSubject = this.lastSubject;\n            const lastLastPredicate = this.lastPredicate;\n            this.hadObjectForPredicate = false;\n            this.pushNestedQuad(object, false, context);\n            this.endSubject(false); // Terminate identifier node of nested quad again, since we won't attach additional information to it.\n            this.hadObjectForPredicate = true;\n            this.lastPredicate = lastLastPredicate;\n            this.lastSubject = lastLastSubject;\n            return;\n        }\n        // Convert the object into a value and push it\n        let value;\n        try {\n            if (object['@list']) {\n                value = object;\n            }\n            else {\n                value = Util_1.Util.termToValue(object, context, this.objectOptions || this.options);\n            }\n        }\n        catch (e) {\n            return this.emit('error', e);\n        }\n        this.pushIndented(JSON.stringify(value, null, this.options.space));\n    }\n    pushNestedQuad(nestedQuad, commaAfterSubject, context) {\n        // Start a nested quad\n        this.pushSeparator(SeparatorType_1.SeparatorType.OBJECT_START);\n        this.indentation++;\n        this.pushIndented(this.options.space ? `\"@id\": ` : `\"@id\":`, false);\n        // Print the nested quad\n        if (nestedQuad.graph.termType !== 'DefaultGraph') {\n            this.emit('error', new Error(`Found a nested quad with the non-default graph: ${nestedQuad.graph.value}`));\n        }\n        this.pushId(nestedQuad.subject, false, context);\n        this.pushPredicate(nestedQuad.predicate, context);\n        this.pushObject(nestedQuad.object, context);\n        this.endPredicate(false);\n        this.endSubject(commaAfterSubject);\n    }\n    endDocument() {\n        this.opened = false;\n        if (this.originalContext && !this.options.excludeContext) {\n            this.indentation--;\n            this.pushSeparator(SeparatorType_1.SeparatorType.ARRAY_END);\n            this.indentation--;\n            this.pushSeparator(SeparatorType_1.SeparatorType.OBJECT_END);\n        }\n        else {\n            this.indentation--;\n            this.pushSeparator(SeparatorType_1.SeparatorType.ARRAY_END);\n        }\n    }\n    /**\n     * Push the end of a predicate and reset the buffers.\n     * @param {boolean} comma If a comma should be appended.\n     */\n    endPredicate(comma) {\n        // Close the predicate array\n        this.indentation--;\n        this.pushSeparator(comma ? SeparatorType_1.SeparatorType.ARRAY_END_COMMA : SeparatorType_1.SeparatorType.ARRAY_END);\n        // Reset object buffer\n        this.hadObjectForPredicate = false;\n        this.objectOptions = null;\n        // Reset predicate buffer\n        this.lastPredicate = null;\n    }\n    /**\n     * Push the end of a subject and reset the buffers.\n     * @param {boolean} comma If a comma should be appended.\n     */\n    endSubject(comma) {\n        // Close the last subject's node;\n        this.indentation--;\n        this.pushSeparator(comma ? SeparatorType_1.SeparatorType.OBJECT_END_COMMA : SeparatorType_1.SeparatorType.OBJECT_END);\n        // Reset subject buffer\n        this.lastSubject = null;\n    }\n    /**\n     * Push the end of a graph and reset the buffers.\n     * @param {boolean} comma If a comma should be appended.\n     */\n    endGraph(comma) {\n        // Close the graph array\n        this.indentation--;\n        this.pushSeparator(SeparatorType_1.SeparatorType.ARRAY_END);\n        // Close the graph id node\n        this.indentation--;\n        this.pushSeparator(comma ? SeparatorType_1.SeparatorType.OBJECT_END_COMMA : SeparatorType_1.SeparatorType.OBJECT_END);\n        // Reset graph buffer\n        this.lastGraph = null;\n    }\n    /**\n     * Puh the given separator.\n     * @param {SeparatorType} type A type of separator.\n     */\n    pushSeparator(type) {\n        this.pushIndented(type.label);\n    }\n    /**\n     * An indentation-aware variant of {@link #push}.\n     * All strings that are pushed here will be prefixed by {@link #indentation} amount of spaces.\n     * @param {string} data A string.\n     * @param pushNewLine If a newline should be pushed afterwards.\n     */\n    pushIndented(data, pushNewLine = true) {\n        const prefix = this.getIndentPrefix();\n        const lines = data.split('\\n').map((line) => prefix + line).join('\\n');\n        this.push(lines);\n        if (this.options.space && pushNewLine) {\n            this.push('\\n');\n        }\n    }\n    /**\n     * @return {string} Get the current indentation prefix based on {@link #indentation}.\n     */\n    getIndentPrefix() {\n        return this.options.space ? this.options.space.repeat(this.indentation) : '';\n    }\n}\nexports.JsonLdSerializer = JsonLdSerializer;\n//# sourceMappingURL=JsonLdSerializer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SeparatorType = void 0;\n/**\n * A type of JSON separator.\n */\nclass SeparatorType {\n    constructor(label) {\n        this.label = label;\n    }\n}\nexports.SeparatorType = SeparatorType;\nSeparatorType.COMMA = new SeparatorType(',');\nSeparatorType.OBJECT_START = new SeparatorType('{');\nSeparatorType.OBJECT_END = new SeparatorType('}');\nSeparatorType.OBJECT_END_COMMA = new SeparatorType('},');\nSeparatorType.ARRAY_START = new SeparatorType('[');\nSeparatorType.ARRAY_END = new SeparatorType(']');\nSeparatorType.ARRAY_END_COMMA = new SeparatorType('],');\nSeparatorType.GRAPH_FIELD_NONCOMPACT = new SeparatorType('\"@graph\": [');\nSeparatorType.GRAPH_FIELD_COMPACT = new SeparatorType('\"@graph\":[');\nSeparatorType.CONTEXT_FIELD = new SeparatorType('\"@context\":');\n//# sourceMappingURL=SeparatorType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Util = void 0;\nconst jsonld_context_parser_1 = require(\"jsonld-context-parser\");\n/**\n * Utility functions and methods.\n */\nclass Util {\n    /**\n     * Convert an RDF term to a JSON value.\n     * @param {Term} term An RDF term.\n     * @param {JsonLdContextNormalized} context The context.\n     * @param {ITermToValueOptions} options Conversion options.\n     * @return {any} A JSON value.\n     */\n    static termToValue(term, context, options = {\n        compactIds: false,\n        useNativeTypes: false,\n    }) {\n        switch (term.termType) {\n            case 'NamedNode':\n                const compacted = context.compactIri(term.value, options.vocab);\n                return options.compactIds ? compacted : { '@id': compacted };\n            case 'DefaultGraph':\n                return options.compactIds ? term.value : { '@id': term.value };\n            case 'BlankNode':\n                const id = `_:${term.value}`;\n                return options.compactIds ? id : { '@id': id };\n            case 'Literal':\n                // Handle JSON datatype\n                if (term.datatype.value === Util.RDF_JSON) {\n                    let parsedJson;\n                    try {\n                        parsedJson = JSON.parse(term.value);\n                    }\n                    catch (e) {\n                        throw new jsonld_context_parser_1.ErrorCoded('Invalid JSON literal: ' + e.message, jsonld_context_parser_1.ERROR_CODES.INVALID_JSON_LITERAL);\n                    }\n                    return {\n                        '@value': parsedJson,\n                        '@type': '@json',\n                    };\n                }\n                // Handle rdfDirection: i18n-datatype\n                if (options.rdfDirection === 'i18n-datatype' && term.datatype.value.startsWith(Util.I18N)) {\n                    const [language, direction] = term.datatype.value\n                        .substr(Util.I18N.length, term.datatype.value.length)\n                        .split('_');\n                    return Object.assign(Object.assign({ '@value': term.value }, language ? { '@language': language } : {}), direction ? { '@direction': direction } : {});\n                }\n                const stringType = term.datatype.value === Util.XSD_STRING;\n                const rawValue = {\n                    '@value': !stringType && options.useNativeTypes\n                        ? Util.stringToNativeType(term.value, term.datatype.value) : term.value,\n                };\n                if (term.language) {\n                    return Object.assign(Object.assign({}, rawValue), { '@language': term.language });\n                }\n                else if (!stringType && typeof rawValue['@value'] === 'string') {\n                    return Object.assign(Object.assign({}, rawValue), { '@type': term.datatype.value });\n                }\n                else {\n                    return rawValue;\n                }\n        }\n    }\n    /**\n     * Convert a string term to a native type.\n     * If no conversion is possible, the original string will be returned.\n     * @param {string} value An RDF term's string value.\n     * @param {string} type\n     * @return {any}\n     */\n    static stringToNativeType(value, type) {\n        if (type.startsWith(Util.XSD)) {\n            const xsdType = type.substr(Util.XSD.length);\n            switch (xsdType) {\n                case 'boolean':\n                    if (value === 'true') {\n                        return true;\n                    }\n                    else if (value === 'false') {\n                        return false;\n                    }\n                    throw new Error(`Invalid xsd:boolean value '${value}'`);\n                case 'integer':\n                case 'number':\n                case 'int':\n                case 'byte':\n                case 'long':\n                    const parsedInt = parseInt(value, 10);\n                    if (isNaN(parsedInt)) {\n                        throw new Error(`Invalid xsd:integer value '${value}'`);\n                    }\n                    return parsedInt;\n                case 'float':\n                case 'double':\n                    const parsedFloat = parseFloat(value);\n                    if (isNaN(parsedFloat)) {\n                        throw new Error(`Invalid xsd:float value '${value}'`);\n                    }\n                    return parsedFloat;\n            }\n        }\n        return value;\n    }\n}\nexports.Util = Util;\nUtil.XSD = 'http://www.w3.org/2001/XMLSchema#';\nUtil.XSD_STRING = Util.XSD + 'string';\nUtil.RDF = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';\nUtil.RDF_TYPE = Util.RDF + 'type';\nUtil.RDF_JSON = Util.RDF + 'JSON';\nUtil.I18N = 'https://www.w3.org/ns/i18n#';\n//# sourceMappingURL=Util.js.map","module.exports = assert;\n\nfunction assert(val, msg) {\n  if (!val)\n    throw new Error(msg || 'Assertion failed');\n}\n\nassert.equal = function assertEqual(l, r, msg) {\n  if (l != r)\n    throw new Error(msg || ('Assertion failed: ' + l + ' != ' + r));\n};\n","const RDF  = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n    XSD  = 'http://www.w3.org/2001/XMLSchema#',\n    SWAP = 'http://www.w3.org/2000/10/swap/';\n\nexport default {\n  xsd: {\n    decimal: `${XSD}decimal`,\n    boolean: `${XSD}boolean`,\n    double:  `${XSD}double`,\n    integer: `${XSD}integer`,\n    string:  `${XSD}string`,\n  },\n  rdf: {\n    type:       `${RDF}type`,\n    nil:        `${RDF}nil`,\n    first:      `${RDF}first`,\n    rest:       `${RDF}rest`,\n    langString: `${RDF}langString`,\n  },\n  owl: {\n    sameAs: 'http://www.w3.org/2002/07/owl#sameAs',\n  },\n  r: {\n    forSome: `${SWAP}reify#forSome`,\n    forAll:  `${SWAP}reify#forAll`,\n  },\n  log: {\n    implies: `${SWAP}log#implies`,\n  },\n};\n","// **N3Lexer** tokenizes N3 documents.\nimport queueMicrotask from 'queue-microtask';\nimport namespaces from './IRIs';\n\nconst { xsd } = namespaces;\n\n// Regular expression and replacement string to escape N3 strings\nconst escapeSequence = /\\\\u([a-fA-F0-9]{4})|\\\\U([a-fA-F0-9]{8})|\\\\([^])/g;\nconst escapeReplacements = {\n  '\\\\': '\\\\', \"'\": \"'\", '\"': '\"',\n  'n': '\\n', 'r': '\\r', 't': '\\t', 'f': '\\f', 'b': '\\b',\n  '_': '_', '~': '~', '.': '.', '-': '-', '!': '!', '$': '$', '&': '&',\n  '(': '(', ')': ')', '*': '*', '+': '+', ',': ',', ';': ';', '=': '=',\n  '/': '/', '?': '?', '#': '#', '@': '@', '%': '%',\n};\nconst illegalIriChars = /[\\x00-\\x20<>\\\\\"\\{\\}\\|\\^\\`]/;\n\nconst lineModeRegExps = {\n  _iri: true,\n  _unescapedIri: true,\n  _simpleQuotedString: true,\n  _langcode: true,\n  _blank: true,\n  _newline: true,\n  _comment: true,\n  _whitespace: true,\n  _endOfFile: true,\n};\nconst invalidRegExp = /$0^/;\n\n// ## Constructor\nexport default class N3Lexer {\n  constructor(options) {\n    // ## Regular expressions\n    // It's slightly faster to have these as properties than as in-scope variables\n    this._iri = /^<((?:[^ <>{}\\\\]|\\\\[uU])+)>[ \\t]*/; // IRI with escape sequences; needs sanity check after unescaping\n    this._unescapedIri = /^<([^\\x00-\\x20<>\\\\\"\\{\\}\\|\\^\\`]*)>[ \\t]*/; // IRI without escape sequences; no unescaping\n    this._simpleQuotedString = /^\"([^\"\\\\\\r\\n]*)\"(?=[^\"])/; // string without escape sequences\n    this._simpleApostropheString = /^'([^'\\\\\\r\\n]*)'(?=[^'])/;\n    this._langcode = /^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\\-])/i;\n    this._prefix = /^((?:[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)?:(?=[#\\s<])/;\n    this._prefixed = /^((?:[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)?:((?:(?:[0-:A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~])(?:(?:[\\.\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~])*(?:[\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~]))?)?)(?:[ \\t]+|(?=\\.?[,;!\\^\\s#()\\[\\]\\{\\}\"'<>]))/;\n    this._variable = /^\\?(?:(?:[A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:[\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)(?=[.,;!\\^\\s#()\\[\\]\\{\\}\"'<>])/;\n    this._blank = /^_:((?:[0-9A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)(?:[ \\t]+|(?=\\.?[,;:\\s#()\\[\\]\\{\\}\"'<>]))/;\n    this._number = /^[\\-+]?(?:(\\d+\\.\\d*|\\.?\\d+)[eE][\\-+]?|\\d*(\\.)?)\\d+(?=\\.?[,;:\\s#()\\[\\]\\{\\}\"'<>])/;\n    this._boolean = /^(?:true|false)(?=[.,;\\s#()\\[\\]\\{\\}\"'<>])/;\n    this._keyword = /^@[a-z]+(?=[\\s#<:])/i;\n    this._sparqlKeyword = /^(?:PREFIX|BASE|GRAPH)(?=[\\s#<])/i;\n    this._shortPredicates = /^a(?=[\\s#()\\[\\]\\{\\}\"'<>])/;\n    this._newline = /^[ \\t]*(?:#[^\\n\\r]*)?(?:\\r\\n|\\n|\\r)[ \\t]*/;\n    this._comment = /#([^\\n\\r]*)/;\n    this._whitespace = /^[ \\t]+/;\n    this._endOfFile = /^(?:#[^\\n\\r]*)?$/;\n    options = options || {};\n\n    // In line mode (N-Triples or N-Quads), only simple features may be parsed\n    if (this._lineMode = !!options.lineMode) {\n      this._n3Mode = false;\n      // Don't tokenize special literals\n      for (const key in this) {\n        if (!(key in lineModeRegExps) && this[key] instanceof RegExp)\n          this[key] = invalidRegExp;\n      }\n    }\n    // When not in line mode, enable N3 functionality by default\n    else {\n      this._n3Mode = options.n3 !== false;\n    }\n    // Don't output comment tokens by default\n    this._comments = !!options.comments;\n    // Cache the last tested closing position of long literals\n    this._literalClosingPos = 0;\n  }\n\n  // ## Private methods\n\n  // ### `_tokenizeToEnd` tokenizes as for as possible, emitting tokens through the callback\n  _tokenizeToEnd(callback, inputFinished) {\n    // Continue parsing as far as possible; the loop will return eventually\n    let input = this._input;\n    let currentLineLength = input.length;\n    while (true) {\n      // Count and skip whitespace lines\n      let whiteSpaceMatch, comment;\n      while (whiteSpaceMatch = this._newline.exec(input)) {\n        // Try to find a comment\n        if (this._comments && (comment = this._comment.exec(whiteSpaceMatch[0])))\n          emitToken('comment', comment[1], '', this._line, whiteSpaceMatch[0].length);\n        // Advance the input\n        input = input.substr(whiteSpaceMatch[0].length, input.length);\n        currentLineLength = input.length;\n        this._line++;\n      }\n      // Skip whitespace on current line\n      if (!whiteSpaceMatch && (whiteSpaceMatch = this._whitespace.exec(input)))\n        input = input.substr(whiteSpaceMatch[0].length, input.length);\n\n      // Stop for now if we're at the end\n      if (this._endOfFile.test(input)) {\n        // If the input is finished, emit EOF\n        if (inputFinished) {\n          // Try to find a final comment\n          if (this._comments && (comment = this._comment.exec(input)))\n            emitToken('comment', comment[1], '', this._line, input.length);\n          input = null;\n          emitToken('eof', '', '', this._line, 0);\n        }\n        return this._input = input;\n      }\n\n      // Look for specific token types based on the first character\n      const line = this._line, firstChar = input[0];\n      let type = '', value = '', prefix = '',\n          match = null, matchLength = 0, inconclusive = false;\n      switch (firstChar) {\n      case '^':\n        // We need at least 3 tokens lookahead to distinguish ^^<IRI> and ^^pre:fixed\n        if (input.length < 3)\n          break;\n        // Try to match a type\n        else if (input[1] === '^') {\n          this._previousMarker = '^^';\n          // Move to type IRI or prefixed name\n          input = input.substr(2);\n          if (input[0] !== '<') {\n            inconclusive = true;\n            break;\n          }\n        }\n        // If no type, it must be a path expression\n        else {\n          if (this._n3Mode) {\n            matchLength = 1;\n            type = '^';\n          }\n          break;\n        }\n        // Fall through in case the type is an IRI\n      case '<':\n        // Try to find a full IRI without escape sequences\n        if (match = this._unescapedIri.exec(input))\n          type = 'IRI', value = match[1];\n        // Try to find a full IRI with escape sequences\n        else if (match = this._iri.exec(input)) {\n          value = this._unescape(match[1]);\n          if (value === null || illegalIriChars.test(value))\n            return reportSyntaxError(this);\n          type = 'IRI';\n        }\n        // Try to find a nested triple\n        else if (input.length > 1 && input[1] === '<')\n          type = '<<', matchLength = 2;\n        // Try to find a backwards implication arrow\n        else if (this._n3Mode && input.length > 1 && input[1] === '=')\n          type = 'inverse', matchLength = 2, value = '>';\n        break;\n\n      case '>':\n        if (input.length > 1 && input[1] === '>')\n          type = '>>', matchLength = 2;\n        break;\n\n      case '_':\n        // Try to find a blank node. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a blank node.\n        // Therefore, try inserting a space if we're at the end of the input.\n        if ((match = this._blank.exec(input)) ||\n            inputFinished && (match = this._blank.exec(`${input} `)))\n          type = 'blank', prefix = '_', value = match[1];\n        break;\n\n      case '\"':\n        // Try to find a literal without escape sequences\n        if (match = this._simpleQuotedString.exec(input))\n          value = match[1];\n        // Try to find a literal wrapped in three pairs of quotes\n        else {\n          ({ value, matchLength } = this._parseLiteral(input));\n          if (value === null)\n            return reportSyntaxError(this);\n        }\n        if (match !== null || matchLength !== 0) {\n          type = 'literal';\n          this._literalClosingPos = 0;\n        }\n        break;\n\n      case \"'\":\n        if (!this._lineMode) {\n          // Try to find a literal without escape sequences\n          if (match = this._simpleApostropheString.exec(input))\n            value = match[1];\n          // Try to find a literal wrapped in three pairs of quotes\n          else {\n            ({ value, matchLength } = this._parseLiteral(input));\n            if (value === null)\n              return reportSyntaxError(this);\n          }\n          if (match !== null || matchLength !== 0) {\n            type = 'literal';\n            this._literalClosingPos = 0;\n          }\n        }\n        break;\n\n      case '?':\n        // Try to find a variable\n        if (this._n3Mode && (match = this._variable.exec(input)))\n          type = 'var', value = match[0];\n        break;\n\n      case '@':\n        // Try to find a language code\n        if (this._previousMarker === 'literal' && (match = this._langcode.exec(input)))\n          type = 'langcode', value = match[1];\n        // Try to find a keyword\n        else if (match = this._keyword.exec(input))\n          type = match[0];\n        break;\n\n      case '.':\n        // Try to find a dot as punctuation\n        if (input.length === 1 ? inputFinished : (input[1] < '0' || input[1] > '9')) {\n          type = '.';\n          matchLength = 1;\n          break;\n        }\n        // Fall through to numerical case (could be a decimal dot)\n\n      case '0':\n      case '1':\n      case '2':\n      case '3':\n      case '4':\n      case '5':\n      case '6':\n      case '7':\n      case '8':\n      case '9':\n      case '+':\n      case '-':\n        // Try to find a number. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a number.\n        // Therefore, try inserting a space if we're at the end of the input.\n        if (match = this._number.exec(input) ||\n            inputFinished && (match = this._number.exec(`${input} `))) {\n          type = 'literal', value = match[0];\n          prefix = (typeof match[1] === 'string' ? xsd.double :\n                    (typeof match[2] === 'string' ? xsd.decimal : xsd.integer));\n        }\n        break;\n\n      case 'B':\n      case 'b':\n      case 'p':\n      case 'P':\n      case 'G':\n      case 'g':\n        // Try to find a SPARQL-style keyword\n        if (match = this._sparqlKeyword.exec(input))\n          type = match[0].toUpperCase();\n        else\n          inconclusive = true;\n        break;\n\n      case 'f':\n      case 't':\n        // Try to match a boolean\n        if (match = this._boolean.exec(input))\n          type = 'literal', value = match[0], prefix = xsd.boolean;\n        else\n          inconclusive = true;\n        break;\n\n      case 'a':\n        // Try to find an abbreviated predicate\n        if (match = this._shortPredicates.exec(input))\n          type = 'abbreviation', value = 'a';\n        else\n          inconclusive = true;\n        break;\n\n      case '=':\n        // Try to find an implication arrow or equals sign\n        if (this._n3Mode && input.length > 1) {\n          type = 'abbreviation';\n          if (input[1] !== '>')\n            matchLength = 1, value = '=';\n          else\n            matchLength = 2, value = '>';\n        }\n        break;\n\n      case '!':\n        if (!this._n3Mode)\n          break;\n      case ',':\n      case ';':\n      case '[':\n      case ']':\n      case '(':\n      case ')':\n      case '}':\n        if (!this._lineMode) {\n          matchLength = 1;\n          type = firstChar;\n        }\n        break;\n      case '{':\n        // We need at least 2 tokens lookahead to distinguish \"{|\" and \"{ \"\n        if (!this._lineMode && input.length >= 2) {\n          // Try to find a quoted triple annotation start\n          if (input[1] === '|')\n            type = '{|', matchLength = 2;\n          else\n            type = firstChar, matchLength = 1;\n        }\n        break;\n      case '|':\n        // We need 2 tokens lookahead to parse \"|}\"\n        // Try to find a quoted triple annotation end\n        if (input.length >= 2 && input[1] === '}')\n          type = '|}', matchLength = 2;\n        break;\n\n      default:\n        inconclusive = true;\n      }\n\n      // Some first characters do not allow an immediate decision, so inspect more\n      if (inconclusive) {\n        // Try to find a prefix\n        if ((this._previousMarker === '@prefix' || this._previousMarker === 'PREFIX') &&\n            (match = this._prefix.exec(input)))\n          type = 'prefix', value = match[1] || '';\n        // Try to find a prefixed name. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a prefixed name.\n        // Therefore, try inserting a space if we're at the end of the input.\n        else if ((match = this._prefixed.exec(input)) ||\n                 inputFinished && (match = this._prefixed.exec(`${input} `)))\n          type = 'prefixed', prefix = match[1] || '', value = this._unescape(match[2]);\n      }\n\n      // A type token is special: it can only be emitted after an IRI or prefixed name is read\n      if (this._previousMarker === '^^') {\n        switch (type) {\n        case 'prefixed': type = 'type';    break;\n        case 'IRI':      type = 'typeIRI'; break;\n        default:         type = '';\n        }\n      }\n\n      // What if nothing of the above was found?\n      if (!type) {\n        // We could be in streaming mode, and then we just wait for more input to arrive.\n        // Otherwise, a syntax error has occurred in the input.\n        // One exception: error on an unaccounted linebreak (= not inside a triple-quoted literal).\n        if (inputFinished || (!/^'''|^\"\"\"/.test(input) && /\\n|\\r/.test(input)))\n          return reportSyntaxError(this);\n        else\n          return this._input = input;\n      }\n\n      // Emit the parsed token\n      const length = matchLength || match[0].length;\n      const token = emitToken(type, value, prefix, line, length);\n      this.previousToken = token;\n      this._previousMarker = type;\n\n      // Advance to next part to tokenize\n      input = input.substr(length, input.length);\n    }\n\n    // Emits the token through the callback\n    function emitToken(type, value, prefix, line, length) {\n      const start = input ? currentLineLength - input.length : currentLineLength;\n      const end = start + length;\n      const token = { type, value, prefix, line, start, end };\n      callback(null, token);\n      return token;\n    }\n    // Signals the syntax error through the callback\n    function reportSyntaxError(self) { callback(self._syntaxError(/^\\S*/.exec(input)[0])); }\n  }\n\n  // ### `_unescape` replaces N3 escape codes by their corresponding characters\n  _unescape(item) {\n    let invalid = false;\n    const replaced = item.replace(escapeSequence, (sequence, unicode4, unicode8, escapedChar) => {\n      // 4-digit unicode character\n      if (typeof unicode4 === 'string')\n        return String.fromCharCode(Number.parseInt(unicode4, 16));\n      // 8-digit unicode character\n      if (typeof unicode8 === 'string') {\n        let charCode = Number.parseInt(unicode8, 16);\n        return charCode <= 0xFFFF ? String.fromCharCode(Number.parseInt(unicode8, 16)) :\n          String.fromCharCode(0xD800 + ((charCode -= 0x10000) >> 10), 0xDC00 + (charCode & 0x3FF));\n      }\n      // fixed escape sequence\n      if (escapedChar in escapeReplacements)\n        return escapeReplacements[escapedChar];\n      // invalid escape sequence\n      invalid = true;\n      return '';\n    });\n    return invalid ? null : replaced;\n  }\n\n  // ### `_parseLiteral` parses a literal into an unescaped value\n  _parseLiteral(input) {\n    // Ensure we have enough lookahead to identify triple-quoted strings\n    if (input.length >= 3) {\n      // Identify the opening quote(s)\n      const opening = input.match(/^(?:\"\"\"|\"|'''|'|)/)[0];\n      const openingLength = opening.length;\n\n      // Find the next candidate closing quotes\n      let closingPos = Math.max(this._literalClosingPos, openingLength);\n      while ((closingPos = input.indexOf(opening, closingPos)) > 0) {\n        // Count backslashes right before the closing quotes\n        let backslashCount = 0;\n        while (input[closingPos - backslashCount - 1] === '\\\\')\n          backslashCount++;\n\n        // An even number of backslashes (in particular 0)\n        // means these are actual, non-escaped closing quotes\n        if (backslashCount % 2 === 0) {\n          // Extract and unescape the value\n          const raw = input.substring(openingLength, closingPos);\n          const lines = raw.split(/\\r\\n|\\r|\\n/).length - 1;\n          const matchLength = closingPos + openingLength;\n          // Only triple-quoted strings can be multi-line\n          if (openingLength === 1 && lines !== 0 ||\n              openingLength === 3 && this._lineMode)\n            break;\n          this._line += lines;\n          return { value: this._unescape(raw), matchLength };\n        }\n        closingPos++;\n      }\n      this._literalClosingPos = input.length - openingLength + 1;\n    }\n    return { value: '', matchLength: 0 };\n  }\n\n  // ### `_syntaxError` creates a syntax error for the given issue\n  _syntaxError(issue) {\n    this._input = null;\n    const err = new Error(`Unexpected \"${issue}\" on line ${this._line}.`);\n    err.context = {\n      token: undefined,\n      line: this._line,\n      previousToken: this.previousToken,\n    };\n    return err;\n  }\n\n  // ### Strips off any starting UTF BOM mark.\n  _readStartingBom(input) {\n    return input.startsWith('\\ufeff') ? input.substr(1) : input;\n  }\n\n  // ## Public methods\n\n  // ### `tokenize` starts the transformation of an N3 document into an array of tokens.\n  // The input can be a string or a stream.\n  tokenize(input, callback) {\n    this._line = 1;\n\n    // If the input is a string, continuously emit tokens through the callback until the end\n    if (typeof input === 'string') {\n      this._input = this._readStartingBom(input);\n      // If a callback was passed, asynchronously call it\n      if (typeof callback === 'function')\n        queueMicrotask(() => this._tokenizeToEnd(callback, true));\n      // If no callback was passed, tokenize synchronously and return\n      else {\n        const tokens = [];\n        let error;\n        this._tokenizeToEnd((e, t) => e ? (error = e) : tokens.push(t), true);\n        if (error) throw error;\n        return tokens;\n      }\n    }\n    // Otherwise, the input must be a stream\n    else {\n      this._pendingBuffer = null;\n      if (typeof input.setEncoding === 'function')\n        input.setEncoding('utf8');\n      // Adds the data chunk to the buffer and parses as far as possible\n      input.on('data', data => {\n        if (this._input !== null && data.length !== 0) {\n          // Prepend any previous pending writes\n          if (this._pendingBuffer) {\n            data = Buffer.concat([this._pendingBuffer, data]);\n            this._pendingBuffer = null;\n          }\n          // Hold if the buffer ends in an incomplete unicode sequence\n          if (data[data.length - 1] & 0x80) {\n            this._pendingBuffer = data;\n          }\n          // Otherwise, tokenize as far as possible\n          else {\n            // Only read a BOM at the start\n            if (typeof this._input === 'undefined')\n              this._input = this._readStartingBom(typeof data === 'string' ? data : data.toString());\n            else\n              this._input += data;\n            this._tokenizeToEnd(callback, false);\n          }\n        }\n      });\n      // Parses until the end\n      input.on('end', () => {\n        if (typeof this._input === 'string')\n          this._tokenizeToEnd(callback, true);\n      });\n      input.on('error', callback);\n    }\n  }\n}\n","// N3.js implementations of the RDF/JS core data types\n// See https://github.com/rdfjs/representation-task-force/blob/master/interface-spec.md\n\nimport namespaces from './IRIs';\n\nconst { rdf, xsd } = namespaces;\n\n// eslint-disable-next-line prefer-const\nlet DEFAULTGRAPH;\nlet _blankNodeCounter = 0;\n\nconst escapedLiteral = /^\"(.*\".*)(?=\"[^\"]*$)/;\n\n// ## DataFactory singleton\nconst DataFactory = {\n  namedNode,\n  blankNode,\n  variable,\n  literal,\n  defaultGraph,\n  quad,\n  triple: quad,\n};\nexport default DataFactory;\n\n// ## Term constructor\nexport class Term {\n  constructor(id) {\n    this.id = id;\n  }\n\n  // ### The value of this term\n  get value() {\n    return this.id;\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both terms were created by this library,\n    // equality can be computed through ids\n    if (other instanceof Term)\n      return this.id === other.id;\n    // Otherwise, compare term type and value\n    return !!other && this.termType === other.termType &&\n                      this.value    === other.value;\n  }\n\n  // ### Implement hashCode for Immutable.js, since we implement `equals`\n  // https://immutable-js.com/docs/v4.0.0/ValueObject/#hashCode()\n  hashCode() {\n    return 0;\n  }\n\n  // ### Returns a plain object representation of this term\n  toJSON() {\n    return {\n      termType: this.termType,\n      value:    this.value,\n    };\n  }\n}\n\n\n// ## NamedNode constructor\nexport class NamedNode extends Term {\n  // ### The term type of this term\n  get termType() {\n    return 'NamedNode';\n  }\n}\n\n// ## Literal constructor\nexport class Literal extends Term {\n  // ### The term type of this term\n  get termType() {\n    return 'Literal';\n  }\n\n  // ### The text value of this literal\n  get value() {\n    return this.id.substring(1, this.id.lastIndexOf('\"'));\n  }\n\n  // ### The language of this literal\n  get language() {\n    // Find the last quotation mark (e.g., '\"abc\"@en-us')\n    const id = this.id;\n    let atPos = id.lastIndexOf('\"') + 1;\n    // If \"@\" it follows, return the remaining substring; empty otherwise\n    return atPos < id.length && id[atPos++] === '@' ? id.substr(atPos).toLowerCase() : '';\n  }\n\n  // ### The datatype IRI of this literal\n  get datatype() {\n    return new NamedNode(this.datatypeString);\n  }\n\n  // ### The datatype string of this literal\n  get datatypeString() {\n    // Find the last quotation mark (e.g., '\"abc\"^^http://ex.org/types#t')\n    const id = this.id, dtPos = id.lastIndexOf('\"') + 1;\n    const char = dtPos < id.length ? id[dtPos] : '';\n    // If \"^\" it follows, return the remaining substring\n    return char === '^' ? id.substr(dtPos + 2) :\n           // If \"@\" follows, return rdf:langString; xsd:string otherwise\n           (char !== '@' ? xsd.string : rdf.langString);\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both literals were created by this library,\n    // equality can be computed through ids\n    if (other instanceof Literal)\n      return this.id === other.id;\n    // Otherwise, compare term type, value, language, and datatype\n    return !!other && !!other.datatype &&\n                      this.termType === other.termType &&\n                      this.value    === other.value    &&\n                      this.language === other.language &&\n                      this.datatype.value === other.datatype.value;\n  }\n\n  toJSON() {\n    return {\n      termType: this.termType,\n      value:    this.value,\n      language: this.language,\n      datatype: { termType: 'NamedNode', value: this.datatypeString },\n    };\n  }\n}\n\n// ## BlankNode constructor\nexport class BlankNode extends Term {\n  constructor(name) {\n    super(`_:${name}`);\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'BlankNode';\n  }\n\n  // ### The name of this blank node\n  get value() {\n    return this.id.substr(2);\n  }\n}\n\nexport class Variable extends Term {\n  constructor(name) {\n    super(`?${name}`);\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'Variable';\n  }\n\n  // ### The name of this variable\n  get value() {\n    return this.id.substr(1);\n  }\n}\n\n// ## DefaultGraph constructor\nexport class DefaultGraph extends Term {\n  constructor() {\n    super('');\n    return DEFAULTGRAPH || this;\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'DefaultGraph';\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both terms were created by this library,\n    // equality can be computed through strict equality;\n    // otherwise, compare term types.\n    return (this === other) || (!!other && (this.termType === other.termType));\n  }\n}\n\n// ## DefaultGraph singleton\nDEFAULTGRAPH = new DefaultGraph();\n\n// ### Constructs a term from the given internal string ID\n// The third 'nested' parameter of this function is to aid\n// with recursion over nested terms. It should not be used\n// by consumers of this library.\n// See https://github.com/rdfjs/N3.js/pull/311#discussion_r1061042725\nexport function termFromId(id, factory, nested) {\n  factory = factory || DataFactory;\n\n  // Falsy value or empty string indicate the default graph\n  if (!id)\n    return factory.defaultGraph();\n\n  // Identify the term type based on the first character\n  switch (id[0]) {\n  case '?':\n    return factory.variable(id.substr(1));\n  case '_':\n    return factory.blankNode(id.substr(2));\n  case '\"':\n    // Shortcut for internal literals\n    if (factory === DataFactory)\n      return new Literal(id);\n    // Literal without datatype or language\n    if (id[id.length - 1] === '\"')\n      return factory.literal(id.substr(1, id.length - 2));\n    // Literal with datatype or language\n    const endPos = id.lastIndexOf('\"', id.length - 1);\n    return factory.literal(id.substr(1, endPos - 1),\n            id[endPos + 1] === '@' ? id.substr(endPos + 2)\n                                   : factory.namedNode(id.substr(endPos + 3)));\n  case '[':\n    id = JSON.parse(id);\n    break;\n  default:\n    if (!nested || !Array.isArray(id)) {\n      return factory.namedNode(id);\n    }\n  }\n  return factory.quad(\n    termFromId(id[0], factory, true),\n    termFromId(id[1], factory, true),\n    termFromId(id[2], factory, true),\n    id[3] && termFromId(id[3], factory, true)\n  );\n}\n\n// ### Constructs an internal string ID from the given term or ID string\n// The third 'nested' parameter of this function is to aid\n// with recursion over nested terms. It should not be used\n// by consumers of this library.\n// See https://github.com/rdfjs/N3.js/pull/311#discussion_r1061042725\nexport function termToId(term, nested) {\n  if (typeof term === 'string')\n    return term;\n  if (term instanceof Term && term.termType !== 'Quad')\n    return term.id;\n  if (!term)\n    return DEFAULTGRAPH.id;\n\n  // Term instantiated with another library\n  switch (term.termType) {\n  case 'NamedNode':    return term.value;\n  case 'BlankNode':    return `_:${term.value}`;\n  case 'Variable':     return `?${term.value}`;\n  case 'DefaultGraph': return '';\n  case 'Literal':      return `\"${term.value}\"${\n    term.language ? `@${term.language}` :\n      (term.datatype && term.datatype.value !== xsd.string ? `^^${term.datatype.value}` : '')}`;\n  case 'Quad':\n    const res = [\n      termToId(term.subject, true),\n      termToId(term.predicate, true),\n      termToId(term.object, true),\n    ];\n    if (term.graph && term.graph.termType !== 'DefaultGraph') {\n      res.push(termToId(term.graph, true));\n    }\n    return nested ? res : JSON.stringify(res);\n  default: throw new Error(`Unexpected termType: ${term.termType}`);\n  }\n}\n\n\n// ## Quad constructor\nexport class Quad extends Term {\n  constructor(subject, predicate, object, graph) {\n    super('');\n    this._subject   = subject;\n    this._predicate = predicate;\n    this._object    = object;\n    this._graph     = graph || DEFAULTGRAPH;\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'Quad';\n  }\n\n  get subject() {\n    return this._subject;\n  }\n\n  get predicate() {\n    return this._predicate;\n  }\n\n  get object() {\n    return this._object;\n  }\n\n  get graph() {\n    return this._graph;\n  }\n\n  // ### Returns a plain object representation of this quad\n  toJSON() {\n    return {\n      termType:  this.termType,\n      subject:   this._subject.toJSON(),\n      predicate: this._predicate.toJSON(),\n      object:    this._object.toJSON(),\n      graph:     this._graph.toJSON(),\n    };\n  }\n\n  // ### Returns whether this object represents the same quad as the other\n  equals(other) {\n    return !!other && this._subject.equals(other.subject)     &&\n                      this._predicate.equals(other.predicate) &&\n                      this._object.equals(other.object)       &&\n                      this._graph.equals(other.graph);\n  }\n}\nexport { Quad as Triple };\n\n// ### Escapes the quotes within the given literal\nexport function escapeQuotes(id) {\n  return id.replace(escapedLiteral, (_, quoted) => `\"${quoted.replace(/\"/g, '\"\"')}`);\n}\n\n// ### Unescapes the quotes within the given literal\nexport function unescapeQuotes(id) {\n  return id.replace(escapedLiteral, (_, quoted) => `\"${quoted.replace(/\"\"/g, '\"')}`);\n}\n\n// ### Creates an IRI\nfunction namedNode(iri) {\n  return new NamedNode(iri);\n}\n\n// ### Creates a blank node\nfunction blankNode(name) {\n  return new BlankNode(name || `n3-${_blankNodeCounter++}`);\n}\n\n// ### Creates a literal\nfunction literal(value, languageOrDataType) {\n  // Create a language-tagged string\n  if (typeof languageOrDataType === 'string')\n    return new Literal(`\"${value}\"@${languageOrDataType.toLowerCase()}`);\n\n  // Automatically determine datatype for booleans and numbers\n  let datatype = languageOrDataType ? languageOrDataType.value : '';\n  if (datatype === '') {\n    // Convert a boolean\n    if (typeof value === 'boolean')\n      datatype = xsd.boolean;\n    // Convert an integer or double\n    else if (typeof value === 'number') {\n      if (Number.isFinite(value))\n        datatype = Number.isInteger(value) ? xsd.integer : xsd.double;\n      else {\n        datatype = xsd.double;\n        if (!Number.isNaN(value))\n          value = value > 0 ? 'INF' : '-INF';\n      }\n    }\n  }\n\n  // Create a datatyped literal\n  return (datatype === '' || datatype === xsd.string) ?\n    new Literal(`\"${value}\"`) :\n    new Literal(`\"${value}\"^^${datatype}`);\n}\n\n// ### Creates a variable\nfunction variable(name) {\n  return new Variable(name);\n}\n\n// ### Returns the default graph\nfunction defaultGraph() {\n  return DEFAULTGRAPH;\n}\n\n// ### Creates a quad\nfunction quad(subject, predicate, object, graph) {\n  return new Quad(subject, predicate, object, graph);\n}\n","// **N3Parser** parses N3 documents.\nimport N3Lexer from './N3Lexer';\nimport N3DataFactory from './N3DataFactory';\nimport namespaces from './IRIs';\n\nlet blankNodePrefix = 0;\n\n// ## Constructor\nexport default class N3Parser {\n  constructor(options) {\n    this._contextStack = [];\n    this._graph = null;\n\n    // Set the document IRI\n    options = options || {};\n    this._setBase(options.baseIRI);\n    options.factory && initDataFactory(this, options.factory);\n\n    // Set supported features depending on the format\n    const format = (typeof options.format === 'string') ?\n                 options.format.match(/\\w*$/)[0].toLowerCase() : '',\n        isTurtle = /turtle/.test(format), isTriG = /trig/.test(format),\n        isNTriples = /triple/.test(format), isNQuads = /quad/.test(format),\n        isN3 = this._n3Mode = /n3/.test(format),\n        isLineMode = isNTriples || isNQuads;\n    if (!(this._supportsNamedGraphs = !(isTurtle || isN3)))\n      this._readPredicateOrNamedGraph = this._readPredicate;\n    // Support triples in other graphs\n    this._supportsQuads = !(isTurtle || isTriG || isNTriples || isN3);\n    // Support nesting of triples\n    this._supportsRDFStar = format === '' || /star|\\*$/.test(format);\n    // Disable relative IRIs in N-Triples or N-Quads mode\n    if (isLineMode)\n      this._resolveRelativeIRI = iri => { return null; };\n    this._blankNodePrefix = typeof options.blankNodePrefix !== 'string' ? '' :\n                              options.blankNodePrefix.replace(/^(?!_:)/, '_:');\n    this._lexer = options.lexer || new N3Lexer({ lineMode: isLineMode, n3: isN3 });\n    // Disable explicit quantifiers by default\n    this._explicitQuantifiers = !!options.explicitQuantifiers;\n  }\n\n  // ## Static class methods\n\n  // ### `_resetBlankNodePrefix` restarts blank node prefix identification\n  static _resetBlankNodePrefix() {\n    blankNodePrefix = 0;\n  }\n\n  // ## Private methods\n\n  // ### `_setBase` sets the base IRI to resolve relative IRIs\n  _setBase(baseIRI) {\n    if (!baseIRI) {\n      this._base = '';\n      this._basePath = '';\n    }\n    else {\n      // Remove fragment if present\n      const fragmentPos = baseIRI.indexOf('#');\n      if (fragmentPos >= 0)\n        baseIRI = baseIRI.substr(0, fragmentPos);\n      // Set base IRI and its components\n      this._base = baseIRI;\n      this._basePath   = baseIRI.indexOf('/') < 0 ? baseIRI :\n                         baseIRI.replace(/[^\\/?]*(?:\\?.*)?$/, '');\n      baseIRI = baseIRI.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\\/\\/[^\\/]*)?/i);\n      this._baseRoot   = baseIRI[0];\n      this._baseScheme = baseIRI[1];\n    }\n  }\n\n  // ### `_saveContext` stores the current parsing context\n  // when entering a new scope (list, blank node, formula)\n  _saveContext(type, graph, subject, predicate, object) {\n    const n3Mode = this._n3Mode;\n    this._contextStack.push({\n      type,\n      subject, predicate, object, graph,\n      inverse: n3Mode ? this._inversePredicate : false,\n      blankPrefix: n3Mode ? this._prefixes._ : '',\n      quantified: n3Mode ? this._quantified : null,\n    });\n    // The settings below only apply to N3 streams\n    if (n3Mode) {\n      // Every new scope resets the predicate direction\n      this._inversePredicate = false;\n      // In N3, blank nodes are scoped to a formula\n      // (using a dot as separator, as a blank node label cannot start with it)\n      this._prefixes._ = (this._graph ? `${this._graph.value}.` : '.');\n      // Quantifiers are scoped to a formula\n      this._quantified = Object.create(this._quantified);\n    }\n  }\n\n  // ### `_restoreContext` restores the parent context\n  // when leaving a scope (list, blank node, formula)\n  _restoreContext(type, token) {\n    // Obtain the previous context\n    const context = this._contextStack.pop();\n    if (!context || context.type !== type)\n      return this._error(`Unexpected ${token.type}`, token);\n\n    // Restore the quad of the previous context\n    this._subject   = context.subject;\n    this._predicate = context.predicate;\n    this._object    = context.object;\n    this._graph     = context.graph;\n\n    // Restore N3 context settings\n    if (this._n3Mode) {\n      this._inversePredicate = context.inverse;\n      this._prefixes._ = context.blankPrefix;\n      this._quantified = context.quantified;\n    }\n  }\n\n  // ### `_readInTopContext` reads a token when in the top context\n  _readInTopContext(token) {\n    switch (token.type) {\n    // If an EOF token arrives in the top context, signal that we're done\n    case 'eof':\n      if (this._graph !== null)\n        return this._error('Unclosed graph', token);\n      delete this._prefixes._;\n      return this._callback(null, null, this._prefixes);\n    // It could be a prefix declaration\n    case 'PREFIX':\n      this._sparqlStyle = true;\n    case '@prefix':\n      return this._readPrefix;\n    // It could be a base declaration\n    case 'BASE':\n      this._sparqlStyle = true;\n    case '@base':\n      return this._readBaseIRI;\n    // It could be a graph\n    case '{':\n      if (this._supportsNamedGraphs) {\n        this._graph = '';\n        this._subject = null;\n        return this._readSubject;\n      }\n    case 'GRAPH':\n      if (this._supportsNamedGraphs)\n        return this._readNamedGraphLabel;\n    // Otherwise, the next token must be a subject\n    default:\n      return this._readSubject(token);\n    }\n  }\n\n  // ### `_readEntity` reads an IRI, prefixed name, blank node, or variable\n  _readEntity(token, quantifier) {\n    let value;\n    switch (token.type) {\n    // Read a relative or absolute IRI\n    case 'IRI':\n    case 'typeIRI':\n      const iri = this._resolveIRI(token.value);\n      if (iri === null)\n        return this._error('Invalid IRI', token);\n      value = this._namedNode(iri);\n      break;\n    // Read a prefixed name\n    case 'type':\n    case 'prefixed':\n      const prefix = this._prefixes[token.prefix];\n      if (prefix === undefined)\n        return this._error(`Undefined prefix \"${token.prefix}:\"`, token);\n      value = this._namedNode(prefix + token.value);\n      break;\n    // Read a blank node\n    case 'blank':\n      value = this._blankNode(this._prefixes[token.prefix] + token.value);\n      break;\n    // Read a variable\n    case 'var':\n      value = this._variable(token.value.substr(1));\n      break;\n    // Everything else is not an entity\n    default:\n      return this._error(`Expected entity but got ${token.type}`, token);\n    }\n    // In N3 mode, replace the entity if it is quantified\n    if (!quantifier && this._n3Mode && (value.id in this._quantified))\n      value = this._quantified[value.id];\n    return value;\n  }\n\n  // ### `_readSubject` reads a quad's subject\n  _readSubject(token) {\n    this._predicate = null;\n    switch (token.type) {\n    case '[':\n      // Start a new quad with a new blank node as subject\n      this._saveContext('blank', this._graph,\n                        this._subject = this._blankNode(), null, null);\n      return this._readBlankNodeHead;\n    case '(':\n      // Start a new list\n      this._saveContext('list', this._graph, this.RDF_NIL, null, null);\n      this._subject = null;\n      return this._readListItem;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph,\n                        this._graph = this._blankNode(), null, null);\n      return this._readSubject;\n    case '}':\n       // No subject; the graph in which we are reading is closed instead\n      return this._readPunctuation(token);\n    case '@forSome':\n      if (!this._n3Mode)\n        return this._error('Unexpected \"@forSome\"', token);\n      this._subject = null;\n      this._predicate = this.N3_FORSOME;\n      this._quantifier = this._blankNode;\n      return this._readQuantifierList;\n    case '@forAll':\n      if (!this._n3Mode)\n        return this._error('Unexpected \"@forAll\"', token);\n      this._subject = null;\n      this._predicate = this.N3_FORALL;\n      this._quantifier = this._variable;\n      return this._readQuantifierList;\n    case 'literal':\n      if (!this._n3Mode)\n        return this._error('Unexpected literal', token);\n\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        return this._completeSubjectLiteral;\n      }\n      else\n        this._subject = this._literal(token.value, this._namedNode(token.prefix));\n\n      break;\n    case '<<':\n      if (!this._supportsRDFStar)\n        return this._error('Unexpected RDF* syntax', token);\n      this._saveContext('<<', this._graph, null, null, null);\n      this._graph = null;\n      return this._readSubject;\n    default:\n      // Read the subject entity\n      if ((this._subject = this._readEntity(token)) === undefined)\n        return;\n      // In N3 mode, the subject might be a path\n      if (this._n3Mode)\n        return this._getPathReader(this._readPredicateOrNamedGraph);\n    }\n\n    // The next token must be a predicate,\n    // or, if the subject was actually a graph IRI, a named graph\n    return this._readPredicateOrNamedGraph;\n  }\n\n  // ### `_readPredicate` reads a quad's predicate\n  _readPredicate(token) {\n    const type = token.type;\n    switch (type) {\n    case 'inverse':\n      this._inversePredicate = true;\n    case 'abbreviation':\n      this._predicate = this.ABBREVIATIONS[token.value];\n      break;\n    case '.':\n    case ']':\n    case '}':\n      // Expected predicate didn't come, must have been trailing semicolon\n      if (this._predicate === null)\n        return this._error(`Unexpected ${type}`, token);\n      this._subject = null;\n      return type === ']' ? this._readBlankNodeTail(token) : this._readPunctuation(token);\n    case ';':\n      // Additional semicolons can be safely ignored\n      return this._predicate !== null ? this._readPredicate :\n             this._error('Expected predicate but got ;', token);\n    case '[':\n      if (this._n3Mode) {\n        // Start a new quad with a new blank node as subject\n        this._saveContext('blank', this._graph, this._subject,\n                          this._subject = this._blankNode(), null);\n        return this._readBlankNodeHead;\n      }\n    case 'blank':\n      if (!this._n3Mode)\n        return this._error('Disallowed blank node as predicate', token);\n    default:\n      if ((this._predicate = this._readEntity(token)) === undefined)\n        return;\n    }\n    // The next token must be an object\n    return this._readObject;\n  }\n\n  // ### `_readObject` reads a quad's object\n  _readObject(token) {\n    switch (token.type) {\n    case 'literal':\n      // Regular literal, can still get a datatype or language\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        return this._readDataTypeOrLang;\n      }\n      // Pre-datatyped string literal (prefix stores the datatype)\n      else\n        this._object = this._literal(token.value, this._namedNode(token.prefix));\n      break;\n    case '[':\n      // Start a new quad with a new blank node as subject\n      this._saveContext('blank', this._graph, this._subject, this._predicate,\n                        this._subject = this._blankNode());\n      return this._readBlankNodeHead;\n    case '(':\n      // Start a new list\n      this._saveContext('list', this._graph, this._subject, this._predicate, this.RDF_NIL);\n      this._subject = null;\n      return this._readListItem;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph, this._subject, this._predicate,\n                        this._graph = this._blankNode());\n      return this._readSubject;\n    case '<<':\n      if (!this._supportsRDFStar)\n        return this._error('Unexpected RDF* syntax', token);\n      this._saveContext('<<', this._graph, this._subject, this._predicate, null);\n      this._graph = null;\n      return this._readSubject;\n    default:\n      // Read the object entity\n      if ((this._object = this._readEntity(token)) === undefined)\n        return;\n      // In N3 mode, the object might be a path\n      if (this._n3Mode)\n        return this._getPathReader(this._getContextEndReader());\n    }\n    return this._getContextEndReader();\n  }\n\n  // ### `_readPredicateOrNamedGraph` reads a quad's predicate, or a named graph\n  _readPredicateOrNamedGraph(token) {\n    return token.type === '{' ? this._readGraph(token) : this._readPredicate(token);\n  }\n\n  // ### `_readGraph` reads a graph\n  _readGraph(token) {\n    if (token.type !== '{')\n      return this._error(`Expected graph but got ${token.type}`, token);\n    // The \"subject\" we read is actually the GRAPH's label\n    this._graph = this._subject, this._subject = null;\n    return this._readSubject;\n  }\n\n  // ### `_readBlankNodeHead` reads the head of a blank node\n  _readBlankNodeHead(token) {\n    if (token.type === ']') {\n      this._subject = null;\n      return this._readBlankNodeTail(token);\n    }\n    else {\n      this._predicate = null;\n      return this._readPredicate(token);\n    }\n  }\n\n  // ### `_readBlankNodeTail` reads the end of a blank node\n  _readBlankNodeTail(token) {\n    if (token.type !== ']')\n      return this._readBlankNodePunctuation(token);\n\n    // Store blank node quad\n    if (this._subject !== null)\n      this._emit(this._subject, this._predicate, this._object, this._graph);\n\n    // Restore the parent context containing this blank node\n    const empty = this._predicate === null;\n    this._restoreContext('blank', token);\n    // If the blank node was the object, restore previous context and read punctuation\n    if (this._object !== null)\n      return this._getContextEndReader();\n    // If the blank node was the predicate, continue reading the object\n    else if (this._predicate !== null)\n      return this._readObject;\n    // If the blank node was the subject, continue reading the predicate\n    else\n      // If the blank node was empty, it could be a named graph label\n      return empty ? this._readPredicateOrNamedGraph : this._readPredicateAfterBlank;\n  }\n\n  // ### `_readPredicateAfterBlank` reads a predicate after an anonymous blank node\n  _readPredicateAfterBlank(token) {\n    switch (token.type) {\n    case '.':\n    case '}':\n      // No predicate is coming if the triple is terminated here\n      this._subject = null;\n      return this._readPunctuation(token);\n    default:\n      return this._readPredicate(token);\n    }\n  }\n\n  // ### `_readListItem` reads items from a list\n  _readListItem(token) {\n    let item = null,                      // The item of the list\n        list = null,                      // The list itself\n        next = this._readListItem;        // The next function to execute\n    const previousList = this._subject,   // The previous list that contains this list\n        stack = this._contextStack,       // The stack of parent contexts\n        parent = stack[stack.length - 1]; // The parent containing the current list\n\n    switch (token.type) {\n    case '[':\n      // Stack the current list quad and start a new quad with a blank node as subject\n      this._saveContext('blank', this._graph,\n                        list = this._blankNode(), this.RDF_FIRST,\n                        this._subject = item = this._blankNode());\n      next = this._readBlankNodeHead;\n      break;\n    case '(':\n      // Stack the current list quad and start a new list\n      this._saveContext('list', this._graph,\n                        list = this._blankNode(), this.RDF_FIRST, this.RDF_NIL);\n      this._subject = null;\n      break;\n    case ')':\n      // Closing the list; restore the parent context\n      this._restoreContext('list', token);\n      // If this list is contained within a parent list, return the membership quad here.\n      // This will be `<parent list element> rdf:first <this list>.`.\n      if (stack.length !== 0 && stack[stack.length - 1].type === 'list')\n        this._emit(this._subject, this._predicate, this._object, this._graph);\n      // Was this list the parent's subject?\n      if (this._predicate === null) {\n        // The next token is the predicate\n        next = this._readPredicate;\n        // No list tail if this was an empty list\n        if (this._subject === this.RDF_NIL)\n          return next;\n      }\n      // The list was in the parent context's object\n      else {\n        next = this._getContextEndReader();\n        // No list tail if this was an empty list\n        if (this._object === this.RDF_NIL)\n          return next;\n      }\n      // Close the list by making the head nil\n      list = this.RDF_NIL;\n      break;\n    case 'literal':\n      // Regular literal, can still get a datatype or language\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        next = this._readListItemDataTypeOrLang;\n      }\n      // Pre-datatyped string literal (prefix stores the datatype)\n      else {\n        item = this._literal(token.value, this._namedNode(token.prefix));\n        next = this._getContextEndReader();\n      }\n      break;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph, this._subject, this._predicate,\n                        this._graph = this._blankNode());\n      return this._readSubject;\n    default:\n      if ((item = this._readEntity(token)) === undefined)\n        return;\n    }\n\n     // Create a new blank node if no item head was assigned yet\n    if (list === null)\n      this._subject = list = this._blankNode();\n\n    // Is this the first element of the list?\n    if (previousList === null) {\n      // This list is either the subject or the object of its parent\n      if (parent.predicate === null)\n        parent.subject = list;\n      else\n        parent.object = list;\n    }\n    else {\n      // Continue the previous list with the current list\n      this._emit(previousList, this.RDF_REST, list, this._graph);\n    }\n    // If an item was read, add it to the list\n    if (item !== null) {\n      // In N3 mode, the item might be a path\n      if (this._n3Mode && (token.type === 'IRI' || token.type === 'prefixed')) {\n        // Create a new context to add the item's path\n        this._saveContext('item', this._graph, list, this.RDF_FIRST, item);\n        this._subject = item, this._predicate = null;\n        // _readPath will restore the context and output the item\n        return this._getPathReader(this._readListItem);\n      }\n      // Output the item\n      this._emit(list, this.RDF_FIRST, item, this._graph);\n    }\n    return next;\n  }\n\n  // ### `_readDataTypeOrLang` reads an _optional_ datatype or language\n  _readDataTypeOrLang(token) {\n    return this._completeObjectLiteral(token, false);\n  }\n\n\n  // ### `_readListItemDataTypeOrLang` reads an _optional_ datatype or language in a list\n  _readListItemDataTypeOrLang(token) {\n    return this._completeObjectLiteral(token, true);\n  }\n\n  // ### `_completeLiteral` completes a literal with an optional datatype or language\n  _completeLiteral(token) {\n    // Create a simple string literal by default\n    let literal = this._literal(this._literalValue);\n\n    switch (token.type) {\n    // Create a datatyped literal\n    case 'type':\n    case 'typeIRI':\n      const datatype = this._readEntity(token);\n      if (datatype === undefined) return; // No datatype means an error occurred\n      literal = this._literal(this._literalValue, datatype);\n      token = null;\n      break;\n    // Create a language-tagged string\n    case 'langcode':\n      literal = this._literal(this._literalValue, token.value);\n      token = null;\n      break;\n    }\n\n    return { token, literal };\n  }\n\n  // Completes a literal in subject position\n  _completeSubjectLiteral(token) {\n    this._subject = this._completeLiteral(token).literal;\n    return this._readPredicateOrNamedGraph;\n  }\n\n  // Completes a literal in object position\n  _completeObjectLiteral(token, listItem) {\n    const completed = this._completeLiteral(token);\n    if (!completed)\n      return;\n    this._object = completed.literal;\n\n    // If this literal was part of a list, write the item\n    // (we could also check the context stack, but passing in a flag is faster)\n    if (listItem)\n      this._emit(this._subject, this.RDF_FIRST, this._object, this._graph);\n    // If the token was consumed, continue with the rest of the input\n    if (completed.token === null)\n      return this._getContextEndReader();\n    // Otherwise, consume the token now\n    else {\n      this._readCallback = this._getContextEndReader();\n      return this._readCallback(completed.token);\n    }\n  }\n\n  // ### `_readFormulaTail` reads the end of a formula\n  _readFormulaTail(token) {\n    if (token.type !== '}')\n      return this._readPunctuation(token);\n\n    // Store the last quad of the formula\n    if (this._subject !== null)\n      this._emit(this._subject, this._predicate, this._object, this._graph);\n\n    // Restore the parent context containing this formula\n    this._restoreContext('formula', token);\n    // If the formula was the subject, continue reading the predicate.\n    // If the formula was the object, read punctuation.\n    return this._object === null ? this._readPredicate : this._getContextEndReader();\n  }\n\n  // ### `_readPunctuation` reads punctuation between quads or quad parts\n  _readPunctuation(token) {\n    let next, graph = this._graph;\n    const subject = this._subject, inversePredicate = this._inversePredicate;\n    switch (token.type) {\n    // A closing brace ends a graph\n    case '}':\n      if (this._graph === null)\n        return this._error('Unexpected graph closing', token);\n      if (this._n3Mode)\n        return this._readFormulaTail(token);\n      this._graph = null;\n    // A dot just ends the statement, without sharing anything with the next\n    case '.':\n      this._subject = null;\n      next = this._contextStack.length ? this._readSubject : this._readInTopContext;\n      if (inversePredicate) this._inversePredicate = false;\n      break;\n    // Semicolon means the subject is shared; predicate and object are different\n    case ';':\n      next = this._readPredicate;\n      break;\n    // Comma means both the subject and predicate are shared; the object is different\n    case ',':\n      next = this._readObject;\n      break;\n    // {| means that the current triple is annotated with predicate-object pairs.\n    case '{|':\n      if (!this._supportsRDFStar)\n        return this._error('Unexpected RDF* syntax', token);\n      // Continue using the last triple as quoted triple subject for the predicate-object pairs.\n      const predicate = this._predicate, object = this._object;\n      this._subject = this._quad(subject, predicate, object, this.DEFAULTGRAPH);\n      next = this._readPredicate;\n      break;\n    // |} means that the current quoted triple in annotation syntax is finalized.\n    case '|}':\n      if (this._subject.termType !== 'Quad')\n        return this._error('Unexpected asserted triple closing', token);\n      this._subject = null;\n      next = this._readPunctuation;\n      break;\n    default:\n      // An entity means this is a quad (only allowed if not already inside a graph)\n      if (this._supportsQuads && this._graph === null && (graph = this._readEntity(token)) !== undefined) {\n        next = this._readQuadPunctuation;\n        break;\n      }\n      return this._error(`Expected punctuation to follow \"${this._object.id}\"`, token);\n    }\n    // A quad has been completed now, so return it\n    if (subject !== null) {\n      const predicate = this._predicate, object = this._object;\n      if (!inversePredicate)\n        this._emit(subject, predicate, object,  graph);\n      else\n        this._emit(object,  predicate, subject, graph);\n    }\n    return next;\n  }\n\n    // ### `_readBlankNodePunctuation` reads punctuation in a blank node\n  _readBlankNodePunctuation(token) {\n    let next;\n    switch (token.type) {\n    // Semicolon means the subject is shared; predicate and object are different\n    case ';':\n      next = this._readPredicate;\n      break;\n    // Comma means both the subject and predicate are shared; the object is different\n    case ',':\n      next = this._readObject;\n      break;\n    default:\n      return this._error(`Expected punctuation to follow \"${this._object.id}\"`, token);\n    }\n    // A quad has been completed now, so return it\n    this._emit(this._subject, this._predicate, this._object, this._graph);\n    return next;\n  }\n\n  // ### `_readQuadPunctuation` reads punctuation after a quad\n  _readQuadPunctuation(token) {\n    if (token.type !== '.')\n      return this._error('Expected dot to follow quad', token);\n    return this._readInTopContext;\n  }\n\n  // ### `_readPrefix` reads the prefix of a prefix declaration\n  _readPrefix(token) {\n    if (token.type !== 'prefix')\n      return this._error('Expected prefix to follow @prefix', token);\n    this._prefix = token.value;\n    return this._readPrefixIRI;\n  }\n\n  // ### `_readPrefixIRI` reads the IRI of a prefix declaration\n  _readPrefixIRI(token) {\n    if (token.type !== 'IRI')\n      return this._error(`Expected IRI to follow prefix \"${this._prefix}:\"`, token);\n    const prefixNode = this._readEntity(token);\n    this._prefixes[this._prefix] = prefixNode.value;\n    this._prefixCallback(this._prefix, prefixNode);\n    return this._readDeclarationPunctuation;\n  }\n\n  // ### `_readBaseIRI` reads the IRI of a base declaration\n  _readBaseIRI(token) {\n    const iri = token.type === 'IRI' && this._resolveIRI(token.value);\n    if (!iri)\n      return this._error('Expected valid IRI to follow base declaration', token);\n    this._setBase(iri);\n    return this._readDeclarationPunctuation;\n  }\n\n  // ### `_readNamedGraphLabel` reads the label of a named graph\n  _readNamedGraphLabel(token) {\n    switch (token.type) {\n    case 'IRI':\n    case 'blank':\n    case 'prefixed':\n      return this._readSubject(token), this._readGraph;\n    case '[':\n      return this._readNamedGraphBlankLabel;\n    default:\n      return this._error('Invalid graph label', token);\n    }\n  }\n\n  // ### `_readNamedGraphLabel` reads a blank node label of a named graph\n  _readNamedGraphBlankLabel(token) {\n    if (token.type !== ']')\n      return this._error('Invalid graph label', token);\n    this._subject = this._blankNode();\n    return this._readGraph;\n  }\n\n  // ### `_readDeclarationPunctuation` reads the punctuation of a declaration\n  _readDeclarationPunctuation(token) {\n    // SPARQL-style declarations don't have punctuation\n    if (this._sparqlStyle) {\n      this._sparqlStyle = false;\n      return this._readInTopContext(token);\n    }\n\n    if (token.type !== '.')\n      return this._error('Expected declaration to end with a dot', token);\n    return this._readInTopContext;\n  }\n\n  // Reads a list of quantified symbols from a @forSome or @forAll statement\n  _readQuantifierList(token) {\n    let entity;\n    switch (token.type) {\n    case 'IRI':\n    case 'prefixed':\n      if ((entity = this._readEntity(token, true)) !== undefined)\n        break;\n    default:\n      return this._error(`Unexpected ${token.type}`, token);\n    }\n    // Without explicit quantifiers, map entities to a quantified entity\n    if (!this._explicitQuantifiers)\n      this._quantified[entity.id] = this._quantifier(this._blankNode().value);\n    // With explicit quantifiers, output the reified quantifier\n    else {\n      // If this is the first item, start a new quantifier list\n      if (this._subject === null)\n        this._emit(this._graph || this.DEFAULTGRAPH, this._predicate,\n                   this._subject = this._blankNode(), this.QUANTIFIERS_GRAPH);\n      // Otherwise, continue the previous list\n      else\n        this._emit(this._subject, this.RDF_REST,\n                   this._subject = this._blankNode(), this.QUANTIFIERS_GRAPH);\n      // Output the list item\n      this._emit(this._subject, this.RDF_FIRST, entity, this.QUANTIFIERS_GRAPH);\n    }\n    return this._readQuantifierPunctuation;\n  }\n\n  // Reads punctuation from a @forSome or @forAll statement\n  _readQuantifierPunctuation(token) {\n    // Read more quantifiers\n    if (token.type === ',')\n      return this._readQuantifierList;\n    // End of the quantifier list\n    else {\n      // With explicit quantifiers, close the quantifier list\n      if (this._explicitQuantifiers) {\n        this._emit(this._subject, this.RDF_REST, this.RDF_NIL, this.QUANTIFIERS_GRAPH);\n        this._subject = null;\n      }\n      // Read a dot\n      this._readCallback = this._getContextEndReader();\n      return this._readCallback(token);\n    }\n  }\n\n  // ### `_getPathReader` reads a potential path and then resumes with the given function\n  _getPathReader(afterPath) {\n    this._afterPath = afterPath;\n    return this._readPath;\n  }\n\n  // ### `_readPath` reads a potential path\n  _readPath(token) {\n    switch (token.type) {\n    // Forward path\n    case '!': return this._readForwardPath;\n    // Backward path\n    case '^': return this._readBackwardPath;\n    // Not a path; resume reading where we left off\n    default:\n      const stack = this._contextStack, parent = stack.length && stack[stack.length - 1];\n      // If we were reading a list item, we still need to output it\n      if (parent && parent.type === 'item') {\n        // The list item is the remaining subejct after reading the path\n        const item = this._subject;\n        // Switch back to the context of the list\n        this._restoreContext('item', token);\n        // Output the list item\n        this._emit(this._subject, this.RDF_FIRST, item, this._graph);\n      }\n      return this._afterPath(token);\n    }\n  }\n\n  // ### `_readForwardPath` reads a '!' path\n  _readForwardPath(token) {\n    let subject, predicate;\n    const object = this._blankNode();\n    // The next token is the predicate\n    if ((predicate = this._readEntity(token)) === undefined)\n      return;\n    // If we were reading a subject, replace the subject by the path's object\n    if (this._predicate === null)\n      subject = this._subject, this._subject = object;\n    // If we were reading an object, replace the subject by the path's object\n    else\n      subject = this._object,  this._object  = object;\n    // Emit the path's current quad and read its next section\n    this._emit(subject, predicate, object, this._graph);\n    return this._readPath;\n  }\n\n  // ### `_readBackwardPath` reads a '^' path\n  _readBackwardPath(token) {\n    const subject = this._blankNode();\n    let predicate, object;\n    // The next token is the predicate\n    if ((predicate = this._readEntity(token)) === undefined)\n      return;\n    // If we were reading a subject, replace the subject by the path's subject\n    if (this._predicate === null)\n      object = this._subject, this._subject = subject;\n    // If we were reading an object, replace the subject by the path's subject\n    else\n      object = this._object,  this._object  = subject;\n    // Emit the path's current quad and read its next section\n    this._emit(subject, predicate, object, this._graph);\n    return this._readPath;\n  }\n\n  // ### `_readRDFStarTailOrGraph` reads the graph of a nested RDF* quad or the end of a nested RDF* triple\n  _readRDFStarTailOrGraph(token) {\n    if (token.type !== '>>') {\n      // An entity means this is a quad (only allowed if not already inside a graph)\n      if (this._supportsQuads && this._graph === null && (this._graph = this._readEntity(token)) !== undefined)\n        return this._readRDFStarTail;\n      return this._error(`Expected >> to follow \"${this._object.id}\"`, token);\n    }\n    return this._readRDFStarTail(token);\n  }\n\n  // ### `_readRDFStarTail` reads the end of a nested RDF* triple\n  _readRDFStarTail(token) {\n    if (token.type !== '>>')\n      return this._error(`Expected >> but got ${token.type}`, token);\n    // Read the quad and restore the previous context\n    const quad = this._quad(this._subject, this._predicate, this._object,\n      this._graph || this.DEFAULTGRAPH);\n    this._restoreContext('<<', token);\n    // If the triple was the subject, continue by reading the predicate.\n    if (this._subject === null) {\n      this._subject = quad;\n      return this._readPredicate;\n    }\n    // If the triple was the object, read context end.\n    else {\n      this._object = quad;\n      return this._getContextEndReader();\n    }\n  }\n\n  // ### `_getContextEndReader` gets the next reader function at the end of a context\n  _getContextEndReader() {\n    const contextStack = this._contextStack;\n    if (!contextStack.length)\n      return this._readPunctuation;\n\n    switch (contextStack[contextStack.length - 1].type) {\n    case 'blank':\n      return this._readBlankNodeTail;\n    case 'list':\n      return this._readListItem;\n    case 'formula':\n      return this._readFormulaTail;\n    case '<<':\n      return this._readRDFStarTailOrGraph;\n    }\n  }\n\n  // ### `_emit` sends a quad through the callback\n  _emit(subject, predicate, object, graph) {\n    this._callback(null, this._quad(subject, predicate, object, graph || this.DEFAULTGRAPH));\n  }\n\n  // ### `_error` emits an error message through the callback\n  _error(message, token) {\n    const err = new Error(`${message} on line ${token.line}.`);\n    err.context = {\n      token: token,\n      line: token.line,\n      previousToken: this._lexer.previousToken,\n    };\n    this._callback(err);\n    this._callback = noop;\n  }\n\n  // ### `_resolveIRI` resolves an IRI against the base path\n  _resolveIRI(iri) {\n    return /^[a-z][a-z0-9+.-]*:/i.test(iri) ? iri : this._resolveRelativeIRI(iri);\n  }\n\n  // ### `_resolveRelativeIRI` resolves an IRI against the base path,\n  // assuming that a base path has been set and that the IRI is indeed relative\n  _resolveRelativeIRI(iri) {\n    // An empty relative IRI indicates the base IRI\n    if (!iri.length)\n      return this._base;\n    // Decide resolving strategy based in the first character\n    switch (iri[0]) {\n    // Resolve relative fragment IRIs against the base IRI\n    case '#': return this._base + iri;\n    // Resolve relative query string IRIs by replacing the query string\n    case '?': return this._base.replace(/(?:\\?.*)?$/, iri);\n    // Resolve root-relative IRIs at the root of the base IRI\n    case '/':\n      // Resolve scheme-relative IRIs to the scheme\n      return (iri[1] === '/' ? this._baseScheme : this._baseRoot) + this._removeDotSegments(iri);\n    // Resolve all other IRIs at the base IRI's path\n    default:\n      // Relative IRIs cannot contain a colon in the first path segment\n      return (/^[^/:]*:/.test(iri)) ? null : this._removeDotSegments(this._basePath + iri);\n    }\n  }\n\n  // ### `_removeDotSegments` resolves './' and '../' path segments in an IRI as per RFC3986\n  _removeDotSegments(iri) {\n    // Don't modify the IRI if it does not contain any dot segments\n    if (!/(^|\\/)\\.\\.?($|[/#?])/.test(iri))\n      return iri;\n\n    // Start with an imaginary slash before the IRI in order to resolve trailing './' and '../'\n    const length = iri.length;\n    let result = '', i = -1, pathStart = -1, segmentStart = 0, next = '/';\n\n    while (i < length) {\n      switch (next) {\n      // The path starts with the first slash after the authority\n      case ':':\n        if (pathStart < 0) {\n          // Skip two slashes before the authority\n          if (iri[++i] === '/' && iri[++i] === '/')\n            // Skip to slash after the authority\n            while ((pathStart = i + 1) < length && iri[pathStart] !== '/')\n              i = pathStart;\n        }\n        break;\n      // Don't modify a query string or fragment\n      case '?':\n      case '#':\n        i = length;\n        break;\n      // Handle '/.' or '/..' path segments\n      case '/':\n        if (iri[i + 1] === '.') {\n          next = iri[++i + 1];\n          switch (next) {\n          // Remove a '/.' segment\n          case '/':\n            result += iri.substring(segmentStart, i - 1);\n            segmentStart = i + 1;\n            break;\n          // Remove a trailing '/.' segment\n          case undefined:\n          case '?':\n          case '#':\n            return result + iri.substring(segmentStart, i) + iri.substr(i + 1);\n          // Remove a '/..' segment\n          case '.':\n            next = iri[++i + 1];\n            if (next === undefined || next === '/' || next === '?' || next === '#') {\n              result += iri.substring(segmentStart, i - 2);\n              // Try to remove the parent path from result\n              if ((segmentStart = result.lastIndexOf('/')) >= pathStart)\n                result = result.substr(0, segmentStart);\n              // Remove a trailing '/..' segment\n              if (next !== '/')\n                return `${result}/${iri.substr(i + 1)}`;\n              segmentStart = i + 1;\n            }\n          }\n        }\n      }\n      next = iri[++i];\n    }\n    return result + iri.substring(segmentStart);\n  }\n\n  // ## Public methods\n\n  // ### `parse` parses the N3 input and emits each parsed quad through the callback\n  parse(input, quadCallback, prefixCallback) {\n    // The read callback is the next function to be executed when a token arrives.\n    // We start reading in the top context.\n    this._readCallback = this._readInTopContext;\n    this._sparqlStyle = false;\n    this._prefixes = Object.create(null);\n    this._prefixes._ = this._blankNodePrefix ? this._blankNodePrefix.substr(2)\n                                             : `b${blankNodePrefix++}_`;\n    this._prefixCallback = prefixCallback || noop;\n    this._inversePredicate = false;\n    this._quantified = Object.create(null);\n\n    // Parse synchronously if no quad callback is given\n    if (!quadCallback) {\n      const quads = [];\n      let error;\n      this._callback = (e, t) => { e ? (error = e) : t && quads.push(t); };\n      this._lexer.tokenize(input).every(token => {\n        return this._readCallback = this._readCallback(token);\n      });\n      if (error) throw error;\n      return quads;\n    }\n\n    // Parse asynchronously otherwise, executing the read callback when a token arrives\n    this._callback = quadCallback;\n    this._lexer.tokenize(input, (error, token) => {\n      if (error !== null)\n        this._callback(error), this._callback = noop;\n      else if (this._readCallback)\n        this._readCallback = this._readCallback(token);\n    });\n  }\n}\n\n// The empty function\nfunction noop() {}\n\n// Initializes the parser with the given data factory\nfunction initDataFactory(parser, factory) {\n  // Set factory methods\n  const namedNode = factory.namedNode;\n  parser._namedNode   = namedNode;\n  parser._blankNode   = factory.blankNode;\n  parser._literal     = factory.literal;\n  parser._variable    = factory.variable;\n  parser._quad        = factory.quad;\n  parser.DEFAULTGRAPH = factory.defaultGraph();\n\n  // Set common named nodes\n  parser.RDF_FIRST  = namedNode(namespaces.rdf.first);\n  parser.RDF_REST   = namedNode(namespaces.rdf.rest);\n  parser.RDF_NIL    = namedNode(namespaces.rdf.nil);\n  parser.N3_FORALL  = namedNode(namespaces.r.forAll);\n  parser.N3_FORSOME = namedNode(namespaces.r.forSome);\n  parser.ABBREVIATIONS = {\n    'a': namedNode(namespaces.rdf.type),\n    '=': namedNode(namespaces.owl.sameAs),\n    '>': namedNode(namespaces.log.implies),\n  };\n  parser.QUANTIFIERS_GRAPH = namedNode('urn:n3:quantifiers');\n}\ninitDataFactory(N3Parser.prototype, N3DataFactory);\n","// **N3Util** provides N3 utility functions.\n\nimport N3DataFactory from './N3DataFactory';\n\n// Tests whether the given term represents an IRI\nexport function isNamedNode(term) {\n  return !!term && term.termType === 'NamedNode';\n}\n\n// Tests whether the given term represents a blank node\nexport function isBlankNode(term) {\n  return !!term && term.termType === 'BlankNode';\n}\n\n// Tests whether the given term represents a literal\nexport function isLiteral(term) {\n  return !!term && term.termType === 'Literal';\n}\n\n// Tests whether the given term represents a variable\nexport function isVariable(term) {\n  return !!term && term.termType === 'Variable';\n}\n\n// Tests whether the given term represents the default graph\nexport function isDefaultGraph(term) {\n  return !!term && term.termType === 'DefaultGraph';\n}\n\n// Tests whether the given quad is in the default graph\nexport function inDefaultGraph(quad) {\n  return isDefaultGraph(quad.graph);\n}\n\n// Creates a function that prepends the given IRI to a local name\nexport function prefix(iri, factory) {\n  return prefixes({ '': iri.value || iri }, factory)('');\n}\n\n// Creates a function that allows registering and expanding prefixes\nexport function prefixes(defaultPrefixes, factory) {\n  // Add all of the default prefixes\n  const prefixes = Object.create(null);\n  for (const prefix in defaultPrefixes)\n    processPrefix(prefix, defaultPrefixes[prefix]);\n  // Set the default factory if none was specified\n  factory = factory || N3DataFactory;\n\n  // Registers a new prefix (if an IRI was specified)\n  // or retrieves a function that expands an existing prefix (if no IRI was specified)\n  function processPrefix(prefix, iri) {\n    // Create a new prefix if an IRI is specified or the prefix doesn't exist\n    if (typeof iri === 'string') {\n      // Create a function that expands the prefix\n      const cache = Object.create(null);\n      prefixes[prefix] = local => {\n        return cache[local] || (cache[local] = factory.namedNode(iri + local));\n      };\n    }\n    else if (!(prefix in prefixes)) {\n      throw new Error(`Unknown prefix: ${prefix}`);\n    }\n    return prefixes[prefix];\n  }\n  return processPrefix;\n}\n","// **N3Writer** writes N3 documents.\nimport namespaces from './IRIs';\nimport { default as N3DataFactory, Term } from './N3DataFactory';\nimport { isDefaultGraph } from './N3Util';\n\nconst DEFAULTGRAPH = N3DataFactory.defaultGraph();\n\nconst { rdf, xsd } = namespaces;\n\n// Characters in literals that require escaping\nconst escape    = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019\\ud800-\\udbff]/,\n    escapeAll = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019]|[\\ud800-\\udbff][\\udc00-\\udfff]/g,\n    escapedCharacters = {\n      '\\\\': '\\\\\\\\', '\"': '\\\\\"', '\\t': '\\\\t',\n      '\\n': '\\\\n', '\\r': '\\\\r', '\\b': '\\\\b', '\\f': '\\\\f',\n    };\n\n// ## Placeholder class to represent already pretty-printed terms\nclass SerializedTerm extends Term {\n  // Pretty-printed nodes are not equal to any other node\n  // (e.g., [] does not equal [])\n  equals(other) {\n    return other === this;\n  }\n}\n\n// ## Constructor\nexport default class N3Writer {\n  constructor(outputStream, options) {\n    // ### `_prefixRegex` matches a prefixed name or IRI that begins with one of the added prefixes\n    this._prefixRegex = /$0^/;\n\n    // Shift arguments if the first argument is not a stream\n    if (outputStream && typeof outputStream.write !== 'function')\n      options = outputStream, outputStream = null;\n    options = options || {};\n    this._lists = options.lists;\n\n    // If no output stream given, send the output as string through the end callback\n    if (!outputStream) {\n      let output = '';\n      this._outputStream = {\n        write(chunk, encoding, done) { output += chunk; done && done(); },\n        end: done => { done && done(null, output); },\n      };\n      this._endStream = true;\n    }\n    else {\n      this._outputStream = outputStream;\n      this._endStream = options.end === undefined ? true : !!options.end;\n    }\n\n    // Initialize writer, depending on the format\n    this._subject = null;\n    if (!(/triple|quad/i).test(options.format)) {\n      this._lineMode = false;\n      this._graph = DEFAULTGRAPH;\n      this._prefixIRIs = Object.create(null);\n      options.prefixes && this.addPrefixes(options.prefixes);\n      if (options.baseIRI) {\n        this._baseMatcher = new RegExp(`^${escapeRegex(options.baseIRI)\n            }${options.baseIRI.endsWith('/') ? '' : '[#?]'}`);\n        this._baseLength = options.baseIRI.length;\n      }\n    }\n    else {\n      this._lineMode = true;\n      this._writeQuad = this._writeQuadLine;\n    }\n  }\n\n  // ## Private methods\n\n  // ### Whether the current graph is the default graph\n  get _inDefaultGraph() {\n    return DEFAULTGRAPH.equals(this._graph);\n  }\n\n  // ### `_write` writes the argument to the output stream\n  _write(string, callback) {\n    this._outputStream.write(string, 'utf8', callback);\n  }\n\n  // ### `_writeQuad` writes the quad to the output stream\n  _writeQuad(subject, predicate, object, graph, done) {\n    try {\n      // Write the graph's label if it has changed\n      if (!graph.equals(this._graph)) {\n        // Close the previous graph and start the new one\n        this._write((this._subject === null ? '' : (this._inDefaultGraph ? '.\\n' : '\\n}\\n')) +\n                    (DEFAULTGRAPH.equals(graph) ? '' : `${this._encodeIriOrBlank(graph)} {\\n`));\n        this._graph = graph;\n        this._subject = null;\n      }\n      // Don't repeat the subject if it's the same\n      if (subject.equals(this._subject)) {\n        // Don't repeat the predicate if it's the same\n        if (predicate.equals(this._predicate))\n          this._write(`, ${this._encodeObject(object)}`, done);\n        // Same subject, different predicate\n        else\n          this._write(`;\\n    ${\n                      this._encodePredicate(this._predicate = predicate)} ${\n                      this._encodeObject(object)}`, done);\n      }\n      // Different subject; write the whole quad\n      else\n        this._write(`${(this._subject === null ? '' : '.\\n') +\n                    this._encodeSubject(this._subject = subject)} ${\n                    this._encodePredicate(this._predicate = predicate)} ${\n                    this._encodeObject(object)}`, done);\n    }\n    catch (error) { done && done(error); }\n  }\n\n  // ### `_writeQuadLine` writes the quad to the output stream as a single line\n  _writeQuadLine(subject, predicate, object, graph, done) {\n    // Write the quad without prefixes\n    delete this._prefixMatch;\n    this._write(this.quadToString(subject, predicate, object, graph), done);\n  }\n\n  // ### `quadToString` serializes a quad as a string\n  quadToString(subject, predicate, object, graph) {\n    return  `${this._encodeSubject(subject)} ${\n            this._encodeIriOrBlank(predicate)} ${\n            this._encodeObject(object)\n            }${graph && graph.value ? ` ${this._encodeIriOrBlank(graph)} .\\n` : ' .\\n'}`;\n  }\n\n  // ### `quadsToString` serializes an array of quads as a string\n  quadsToString(quads) {\n    return quads.map(t => {\n      return this.quadToString(t.subject, t.predicate, t.object, t.graph);\n    }).join('');\n  }\n\n  // ### `_encodeSubject` represents a subject\n  _encodeSubject(entity) {\n    return entity.termType === 'Quad' ?\n      this._encodeQuad(entity) : this._encodeIriOrBlank(entity);\n  }\n\n  // ### `_encodeIriOrBlank` represents an IRI or blank node\n  _encodeIriOrBlank(entity) {\n    // A blank node or list is represented as-is\n    if (entity.termType !== 'NamedNode') {\n      // If it is a list head, pretty-print it\n      if (this._lists && (entity.value in this._lists))\n        entity = this.list(this._lists[entity.value]);\n      return 'id' in entity ? entity.id : `_:${entity.value}`;\n    }\n    let iri = entity.value;\n    // Use relative IRIs if requested and possible\n    if (this._baseMatcher && this._baseMatcher.test(iri))\n      iri = iri.substr(this._baseLength);\n    // Escape special characters\n    if (escape.test(iri))\n      iri = iri.replace(escapeAll, characterReplacer);\n    // Try to represent the IRI as prefixed name\n    const prefixMatch = this._prefixRegex.exec(iri);\n    return !prefixMatch ? `<${iri}>` :\n           (!prefixMatch[1] ? iri : this._prefixIRIs[prefixMatch[1]] + prefixMatch[2]);\n  }\n\n  // ### `_encodeLiteral` represents a literal\n  _encodeLiteral(literal) {\n    // Escape special characters\n    let value = literal.value;\n    if (escape.test(value))\n      value = value.replace(escapeAll, characterReplacer);\n\n    // Write a language-tagged literal\n    if (literal.language)\n      return `\"${value}\"@${literal.language}`;\n\n    // Write dedicated literals per data type\n    if (this._lineMode) {\n      // Only abbreviate strings in N-Triples or N-Quads\n      if (literal.datatype.value === xsd.string)\n        return `\"${value}\"`;\n    }\n    else {\n      // Use common datatype abbreviations in Turtle or TriG\n      switch (literal.datatype.value) {\n      case xsd.string:\n        return `\"${value}\"`;\n      case xsd.boolean:\n        if (value === 'true' || value === 'false')\n          return value;\n        break;\n      case xsd.integer:\n        if (/^[+-]?\\d+$/.test(value))\n          return value;\n        break;\n      case xsd.decimal:\n        if (/^[+-]?\\d*\\.\\d+$/.test(value))\n          return value;\n        break;\n      case xsd.double:\n        if (/^[+-]?(?:\\d+\\.\\d*|\\.?\\d+)[eE][+-]?\\d+$/.test(value))\n          return value;\n        break;\n      }\n    }\n\n    // Write a regular datatyped literal\n    return `\"${value}\"^^${this._encodeIriOrBlank(literal.datatype)}`;\n  }\n\n  // ### `_encodePredicate` represents a predicate\n  _encodePredicate(predicate) {\n    return predicate.value === rdf.type ? 'a' : this._encodeIriOrBlank(predicate);\n  }\n\n  // ### `_encodeObject` represents an object\n  _encodeObject(object) {\n    switch (object.termType) {\n    case 'Quad':\n      return this._encodeQuad(object);\n    case 'Literal':\n      return this._encodeLiteral(object);\n    default:\n      return this._encodeIriOrBlank(object);\n    }\n  }\n\n  // ### `_encodeQuad` encodes an RDF* quad\n  _encodeQuad({ subject, predicate, object, graph }) {\n    return `<<${\n      this._encodeSubject(subject)} ${\n      this._encodePredicate(predicate)} ${\n      this._encodeObject(object)}${\n      isDefaultGraph(graph) ? '' : ` ${this._encodeIriOrBlank(graph)}`}>>`;\n  }\n\n  // ### `_blockedWrite` replaces `_write` after the writer has been closed\n  _blockedWrite() {\n    throw new Error('Cannot write because the writer has been closed.');\n  }\n\n  // ### `addQuad` adds the quad to the output stream\n  addQuad(subject, predicate, object, graph, done) {\n    // The quad was given as an object, so shift parameters\n    if (object === undefined)\n      this._writeQuad(subject.subject, subject.predicate, subject.object, subject.graph, predicate);\n    // The optional `graph` parameter was not provided\n    else if (typeof graph === 'function')\n      this._writeQuad(subject, predicate, object, DEFAULTGRAPH, graph);\n    // The `graph` parameter was provided\n    else\n      this._writeQuad(subject, predicate, object, graph || DEFAULTGRAPH, done);\n  }\n\n  // ### `addQuads` adds the quads to the output stream\n  addQuads(quads) {\n    for (let i = 0; i < quads.length; i++)\n      this.addQuad(quads[i]);\n  }\n\n  // ### `addPrefix` adds the prefix to the output stream\n  addPrefix(prefix, iri, done) {\n    const prefixes = {};\n    prefixes[prefix] = iri;\n    this.addPrefixes(prefixes, done);\n  }\n\n  // ### `addPrefixes` adds the prefixes to the output stream\n  addPrefixes(prefixes, done) {\n    // Ignore prefixes if not supported by the serialization\n    if (!this._prefixIRIs)\n      return done && done();\n\n    // Write all new prefixes\n    let hasPrefixes = false;\n    for (let prefix in prefixes) {\n      let iri = prefixes[prefix];\n      if (typeof iri !== 'string')\n        iri = iri.value;\n      hasPrefixes = true;\n      // Finish a possible pending quad\n      if (this._subject !== null) {\n        this._write(this._inDefaultGraph ? '.\\n' : '\\n}\\n');\n        this._subject = null, this._graph = '';\n      }\n      // Store and write the prefix\n      this._prefixIRIs[iri] = (prefix += ':');\n      this._write(`@prefix ${prefix} <${iri}>.\\n`);\n    }\n    // Recreate the prefix matcher\n    if (hasPrefixes) {\n      let IRIlist = '', prefixList = '';\n      for (const prefixIRI in this._prefixIRIs) {\n        IRIlist += IRIlist ? `|${prefixIRI}` : prefixIRI;\n        prefixList += (prefixList ? '|' : '') + this._prefixIRIs[prefixIRI];\n      }\n      IRIlist = escapeRegex(IRIlist, /[\\]\\/\\(\\)\\*\\+\\?\\.\\\\\\$]/g, '\\\\$&');\n      this._prefixRegex = new RegExp(`^(?:${prefixList})[^\\/]*$|` +\n                                     `^(${IRIlist})([_a-zA-Z][\\\\-_a-zA-Z0-9]*)$`);\n    }\n    // End a prefix block with a newline\n    this._write(hasPrefixes ? '\\n' : '', done);\n  }\n\n  // ### `blank` creates a blank node with the given content\n  blank(predicate, object) {\n    let children = predicate, child, length;\n    // Empty blank node\n    if (predicate === undefined)\n      children = [];\n    // Blank node passed as blank(Term(\"predicate\"), Term(\"object\"))\n    else if (predicate.termType)\n      children = [{ predicate: predicate, object: object }];\n    // Blank node passed as blank({ predicate: predicate, object: object })\n    else if (!('length' in predicate))\n      children = [predicate];\n\n    switch (length = children.length) {\n    // Generate an empty blank node\n    case 0:\n      return new SerializedTerm('[]');\n    // Generate a non-nested one-triple blank node\n    case 1:\n      child = children[0];\n      if (!(child.object instanceof SerializedTerm))\n        return new SerializedTerm(`[ ${this._encodePredicate(child.predicate)} ${\n                                  this._encodeObject(child.object)} ]`);\n    // Generate a multi-triple or nested blank node\n    default:\n      let contents = '[';\n      // Write all triples in order\n      for (let i = 0; i < length; i++) {\n        child = children[i];\n        // Write only the object is the predicate is the same as the previous\n        if (child.predicate.equals(predicate))\n          contents += `, ${this._encodeObject(child.object)}`;\n        // Otherwise, write the predicate and the object\n        else {\n          contents += `${(i ? ';\\n  ' : '\\n  ') +\n                      this._encodePredicate(child.predicate)} ${\n                      this._encodeObject(child.object)}`;\n          predicate = child.predicate;\n        }\n      }\n      return new SerializedTerm(`${contents}\\n]`);\n    }\n  }\n\n  // ### `list` creates a list node with the given content\n  list(elements) {\n    const length = elements && elements.length || 0, contents = new Array(length);\n    for (let i = 0; i < length; i++)\n      contents[i] = this._encodeObject(elements[i]);\n    return new SerializedTerm(`(${contents.join(' ')})`);\n  }\n\n  // ### `end` signals the end of the output stream\n  end(done) {\n    // Finish a possible pending quad\n    if (this._subject !== null) {\n      this._write(this._inDefaultGraph ? '.\\n' : '\\n}\\n');\n      this._subject = null;\n    }\n    // Disallow further writing\n    this._write = this._blockedWrite;\n\n    // Try to end the underlying stream, ensuring done is called exactly one time\n    let singleDone = done && ((error, result) => { singleDone = null, done(error, result); });\n    if (this._endStream) {\n      try { return this._outputStream.end(singleDone); }\n      catch (error) { /* error closing stream */ }\n    }\n    singleDone && singleDone();\n  }\n}\n\n// Replaces a character by its escaped version\nfunction characterReplacer(character) {\n  // Replace a single character by its escaped version\n  let result = escapedCharacters[character];\n  if (result === undefined) {\n    // Replace a single character with its 4-bit unicode escape sequence\n    if (character.length === 1) {\n      result = character.charCodeAt(0).toString(16);\n      result = '\\\\u0000'.substr(0, 6 - result.length) + result;\n    }\n    // Replace a surrogate pair with its 8-bit unicode escape sequence\n    else {\n      result = ((character.charCodeAt(0) - 0xD800) * 0x400 +\n                 character.charCodeAt(1) + 0x2400).toString(16);\n      result = '\\\\U00000000'.substr(0, 10 - result.length) + result;\n    }\n  }\n  return result;\n}\n\nfunction escapeRegex(regex) {\n  return regex.replace(/[\\]\\/\\(\\)\\*\\+\\?\\.\\\\\\$]/g, '\\\\$&');\n}\n","// **N3Store** objects store N3 quads by graph in memory.\nimport { Readable } from 'readable-stream';\nimport { default as N3DataFactory, termToId, termFromId } from './N3DataFactory';\nimport namespaces from './IRIs';\nimport { isDefaultGraph } from './N3Util';\n\n// ## Constructor\nexport default class N3Store {\n  constructor(quads, options) {\n    // The number of quads is initially zero\n    this._size = 0;\n    // `_graphs` contains subject, predicate, and object indexes per graph\n    this._graphs = Object.create(null);\n    // `_ids` maps entities such as `http://xmlns.com/foaf/0.1/name` to numbers,\n    // saving memory by using only numbers as keys in `_graphs`\n    this._id = 0;\n    this._ids = Object.create(null);\n    this._entities = Object.create(null); // inverse of `_ids`\n    // `_blankNodeIndex` is the index of the last automatically named blank node\n    this._blankNodeIndex = 0;\n\n    // Shift parameters if `quads` is not given\n    if (!options && quads && !quads[0])\n      options = quads, quads = null;\n    options = options || {};\n    this._factory = options.factory || N3DataFactory;\n\n    // Add quads if passed\n    if (quads)\n      this.addQuads(quads);\n  }\n\n  _termFromId(id, factory) {\n    if (id[0] === '.') {\n      const entities = this._entities;\n      const terms = id.split('.');\n      const q = this._factory.quad(\n        this._termFromId(entities[terms[1]]),\n        this._termFromId(entities[terms[2]]),\n        this._termFromId(entities[terms[3]]),\n        terms[4] && this._termFromId(entities[terms[4]])\n      );\n      return q;\n    }\n    return termFromId(id, factory);\n  }\n\n  _termToNumericId(term) {\n    if (term.termType === 'Quad') {\n      const s = this._termToNumericId(term.subject),\n          p = this._termToNumericId(term.predicate),\n          o = this._termToNumericId(term.object);\n      let g;\n\n      return s && p && o && (isDefaultGraph(term.graph) || (g = this._termToNumericId(term.graph))) &&\n        this._ids[g ? `.${s}.${p}.${o}.${g}` : `.${s}.${p}.${o}`];\n    }\n    return this._ids[termToId(term)];\n  }\n\n  _termToNewNumericId(term) {\n    // This assumes that no graph term is present - we may wish to error if there is one\n    const str = term && term.termType === 'Quad' ?\n      `.${this._termToNewNumericId(term.subject)}.${this._termToNewNumericId(term.predicate)}.${this._termToNewNumericId(term.object)}${\n        isDefaultGraph(term.graph) ? '' : `.${this._termToNewNumericId(term.graph)}`\n      }`\n      : termToId(term);\n\n    return this._ids[str] || (this._ids[this._entities[++this._id] = str] = this._id);\n  }\n\n  // ## Public properties\n\n  // ### `size` returns the number of quads in the store\n  get size() {\n    // Return the quad count if if was cached\n    let size = this._size;\n    if (size !== null)\n      return size;\n\n    // Calculate the number of quads by counting to the deepest level\n    size = 0;\n    const graphs = this._graphs;\n    let subjects, subject;\n    for (const graphKey in graphs)\n      for (const subjectKey in (subjects = graphs[graphKey].subjects))\n        for (const predicateKey in (subject = subjects[subjectKey]))\n          size += Object.keys(subject[predicateKey]).length;\n    return this._size = size;\n  }\n\n  // ## Private methods\n\n  // ### `_addToIndex` adds a quad to a three-layered index.\n  // Returns if the index has changed, if the entry did not already exist.\n  _addToIndex(index0, key0, key1, key2) {\n    // Create layers as necessary\n    const index1 = index0[key0] || (index0[key0] = {});\n    const index2 = index1[key1] || (index1[key1] = {});\n    // Setting the key to _any_ value signals the presence of the quad\n    const existed = key2 in index2;\n    if (!existed)\n      index2[key2] = null;\n    return !existed;\n  }\n\n  // ### `_removeFromIndex` removes a quad from a three-layered index\n  _removeFromIndex(index0, key0, key1, key2) {\n    // Remove the quad from the index\n    const index1 = index0[key0], index2 = index1[key1];\n    delete index2[key2];\n\n    // Remove intermediary index layers if they are empty\n    for (const key in index2) return;\n    delete index1[key1];\n    for (const key in index1) return;\n    delete index0[key0];\n  }\n\n  // ### `_findInIndex` finds a set of quads in a three-layered index.\n  // The index base is `index0` and the keys at each level are `key0`, `key1`, and `key2`.\n  // Any of these keys can be undefined, which is interpreted as a wildcard.\n  // `name0`, `name1`, and `name2` are the names of the keys at each level,\n  // used when reconstructing the resulting quad\n  // (for instance: _subject_, _predicate_, and _object_).\n  // Finally, `graphId` will be the graph of the created quads.\n  *_findInIndex(index0, key0, key1, key2, name0, name1, name2, graphId) {\n    let tmp, index1, index2;\n    const entityKeys = this._entities;\n    const graph = this._termFromId(graphId, this._factory);\n    const parts = { subject: null, predicate: null, object: null };\n\n    // If a key is specified, use only that part of index 0.\n    if (key0) (tmp = index0, index0 = {})[key0] = tmp[key0];\n    for (const value0 in index0) {\n      if (index1 = index0[value0]) {\n        parts[name0] = this._termFromId(entityKeys[value0], this._factory);\n        // If a key is specified, use only that part of index 1.\n        if (key1) (tmp = index1, index1 = {})[key1] = tmp[key1];\n        for (const value1 in index1) {\n          if (index2 = index1[value1]) {\n            parts[name1] = this._termFromId(entityKeys[value1], this._factory);\n            // If a key is specified, use only that part of index 2, if it exists.\n            const values = key2 ? (key2 in index2 ? [key2] : []) : Object.keys(index2);\n            // Create quads for all items found in index 2.\n            for (let l = 0; l < values.length; l++) {\n              parts[name2] = this._termFromId(entityKeys[values[l]], this._factory);\n              yield this._factory.quad(parts.subject, parts.predicate, parts.object, graph);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  // ### `_loop` executes the callback on all keys of index 0\n  _loop(index0, callback) {\n    for (const key0 in index0)\n      callback(key0);\n  }\n\n  // ### `_loopByKey0` executes the callback on all keys of a certain entry in index 0\n  _loopByKey0(index0, key0, callback) {\n    let index1, key1;\n    if (index1 = index0[key0]) {\n      for (key1 in index1)\n        callback(key1);\n    }\n  }\n\n  // ### `_loopByKey1` executes the callback on given keys of all entries in index 0\n  _loopByKey1(index0, key1, callback) {\n    let key0, index1;\n    for (key0 in index0) {\n      index1 = index0[key0];\n      if (index1[key1])\n        callback(key0);\n    }\n  }\n\n  // ### `_loopBy2Keys` executes the callback on given keys of certain entries in index 2\n  _loopBy2Keys(index0, key0, key1, callback) {\n    let index1, index2, key2;\n    if ((index1 = index0[key0]) && (index2 = index1[key1])) {\n      for (key2 in index2)\n        callback(key2);\n    }\n  }\n\n  // ### `_countInIndex` counts matching quads in a three-layered index.\n  // The index base is `index0` and the keys at each level are `key0`, `key1`, and `key2`.\n  // Any of these keys can be undefined, which is interpreted as a wildcard.\n  _countInIndex(index0, key0, key1, key2) {\n    let count = 0, tmp, index1, index2;\n\n    // If a key is specified, count only that part of index 0\n    if (key0) (tmp = index0, index0 = {})[key0] = tmp[key0];\n    for (const value0 in index0) {\n      if (index1 = index0[value0]) {\n        // If a key is specified, count only that part of index 1\n        if (key1) (tmp = index1, index1 = {})[key1] = tmp[key1];\n        for (const value1 in index1) {\n          if (index2 = index1[value1]) {\n            // If a key is specified, count the quad if it exists\n            if (key2) (key2 in index2) && count++;\n            // Otherwise, count all quads\n            else count += Object.keys(index2).length;\n          }\n        }\n      }\n    }\n    return count;\n  }\n\n  // ### `_getGraphs` returns an array with the given graph,\n  // or all graphs if the argument is null or undefined.\n  _getGraphs(graph) {\n    if (!isString(graph))\n      return this._graphs;\n    const graphs = {};\n    graphs[graph] = this._graphs[graph];\n    return graphs;\n  }\n\n  // ### `_uniqueEntities` returns a function that accepts an entity ID\n  // and passes the corresponding entity to callback if it hasn't occurred before.\n  _uniqueEntities(callback) {\n    const uniqueIds = Object.create(null);\n    return id => {\n      if (!(id in uniqueIds)) {\n        uniqueIds[id] = true;\n        callback(this._termFromId(this._entities[id], this._factory));\n      }\n    };\n  }\n\n  // ## Public methods\n\n  // ### `add` adds the specified quad to the dataset.\n  // Returns the dataset instance it was called on.\n  // Existing quads, as defined in Quad.equals, will be ignored.\n  add(quad) {\n    this.addQuad(quad);\n    return this;\n  }\n\n  // ### `addQuad` adds a new quad to the store.\n  // Returns if the quad index has changed, if the quad did not already exist.\n  addQuad(subject, predicate, object, graph) {\n    // Shift arguments if a quad object is given instead of components\n    if (!predicate)\n      graph = subject.graph, object = subject.object,\n        predicate = subject.predicate, subject = subject.subject;\n\n    // Convert terms to internal string representation\n    graph = termToId(graph);\n\n    // Find the graph that will contain the triple\n    let graphItem = this._graphs[graph];\n    // Create the graph if it doesn't exist yet\n    if (!graphItem) {\n      graphItem = this._graphs[graph] = { subjects: {}, predicates: {}, objects: {} };\n      // Freezing a graph helps subsequent `add` performance,\n      // and properties will never be modified anyway\n      Object.freeze(graphItem);\n    }\n\n    // Since entities can often be long IRIs, we avoid storing them in every index.\n    // Instead, we have a separate index that maps entities to numbers,\n    // which are then used as keys in the other indexes.\n    subject   = this._termToNewNumericId(subject);\n    predicate = this._termToNewNumericId(predicate);\n    object    = this._termToNewNumericId(object);\n\n    const changed = this._addToIndex(graphItem.subjects,   subject,   predicate, object);\n    this._addToIndex(graphItem.predicates, predicate, object,    subject);\n    this._addToIndex(graphItem.objects,    object,    subject,   predicate);\n\n    // The cached quad count is now invalid\n    this._size = null;\n    return changed;\n  }\n\n  // ### `addQuads` adds multiple quads to the store\n  addQuads(quads) {\n    for (let i = 0; i < quads.length; i++)\n      this.addQuad(quads[i]);\n  }\n\n  // ### `delete` removes the specified quad from the dataset.\n  // Returns the dataset instance it was called on.\n  delete(quad) {\n    this.removeQuad(quad);\n    return this;\n  }\n\n  // ### `has` determines whether a dataset includes a certain quad or quad pattern.\n  has(subjectOrQuad, predicate, object, graph) {\n    if (subjectOrQuad && subjectOrQuad.subject)\n      ({ subject: subjectOrQuad, predicate, object, graph } = subjectOrQuad);\n    return !this.readQuads(subjectOrQuad, predicate, object, graph).next().done;\n  }\n\n  // ### `import` adds a stream of quads to the store\n  import(stream) {\n    stream.on('data', quad => { this.addQuad(quad); });\n    return stream;\n  }\n\n  // ### `removeQuad` removes a quad from the store if it exists\n  removeQuad(subject, predicate, object, graph) {\n    // Shift arguments if a quad object is given instead of components\n    if (!predicate)\n      graph = subject.graph, object = subject.object,\n        predicate = subject.predicate, subject = subject.subject;\n\n    // Convert terms to internal string representation\n    graph = termToId(graph);\n\n    // Find internal identifiers for all components\n    // and verify the quad exists.\n    const graphs = this._graphs;\n    let graphItem, subjects, predicates;\n    if (!(subject    = subject && this._termToNumericId(subject)) || !(predicate = predicate && this._termToNumericId(predicate)) ||\n        !(object     = object && this._termToNumericId(object))  || !(graphItem = graphs[graph])  ||\n        !(subjects   = graphItem.subjects[subject]) ||\n        !(predicates = subjects[predicate]) ||\n        !(object in predicates))\n      return false;\n\n    // Remove it from all indexes\n    this._removeFromIndex(graphItem.subjects,   subject,   predicate, object);\n    this._removeFromIndex(graphItem.predicates, predicate, object,    subject);\n    this._removeFromIndex(graphItem.objects,    object,    subject,   predicate);\n    if (this._size !== null) this._size--;\n\n    // Remove the graph if it is empty\n    for (subject in graphItem.subjects) return true;\n    delete graphs[graph];\n    return true;\n  }\n\n  // ### `removeQuads` removes multiple quads from the store\n  removeQuads(quads) {\n    for (let i = 0; i < quads.length; i++)\n      this.removeQuad(quads[i]);\n  }\n\n  // ### `remove` removes a stream of quads from the store\n  remove(stream) {\n    stream.on('data', quad => { this.removeQuad(quad); });\n    return stream;\n  }\n\n  // ### `removeMatches` removes all matching quads from the store\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  removeMatches(subject, predicate, object, graph) {\n    const stream = new Readable({ objectMode: true });\n\n    stream._read = () => {\n      for (const quad of this.readQuads(subject, predicate, object, graph))\n        stream.push(quad);\n      stream.push(null);\n    };\n\n    return this.remove(stream);\n  }\n\n  // ### `deleteGraph` removes all triples with the given graph from the store\n  deleteGraph(graph) {\n    return this.removeMatches(null, null, null, graph);\n  }\n\n  // ### `getQuads` returns an array of quads matching a pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getQuads(subject, predicate, object, graph) {\n    return [...this.readQuads(subject, predicate, object, graph)];\n  }\n\n  // ### `readQuads` returns an generator of quads matching a pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  *readQuads(subject, predicate, object, graph) {\n    // Convert terms to internal string representation\n    graph = graph && termToId(graph);\n\n    const graphs = this._getGraphs(graph);\n    let content, subjectId, predicateId, objectId;\n\n    // Translate IRIs to internal index keys.\n    if (subject   && !(subjectId   = this._termToNumericId(subject))   ||\n        predicate && !(predicateId = this._termToNumericId(predicate)) ||\n        object    && !(objectId    = this._termToNumericId(object)))\n      return;\n\n    for (const graphId in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graphId]) {\n        // Choose the optimal index, based on what fields are present\n        if (subjectId) {\n          if (objectId)\n            // If subject and object are given, the object index will be the fastest\n            yield* this._findInIndex(content.objects, objectId, subjectId, predicateId,\n                              'object', 'subject', 'predicate', graphId);\n          else\n            // If only subject and possibly predicate are given, the subject index will be the fastest\n            yield* this._findInIndex(content.subjects, subjectId, predicateId, null,\n                              'subject', 'predicate', 'object', graphId);\n        }\n        else if (predicateId)\n          // If only predicate and possibly object are given, the predicate index will be the fastest\n          yield* this._findInIndex(content.predicates, predicateId, objectId, null,\n                            'predicate', 'object', 'subject', graphId);\n        else if (objectId)\n          // If only object is given, the object index will be the fastest\n          yield* this._findInIndex(content.objects, objectId, null, null,\n                            'object', 'subject', 'predicate', graphId);\n        else\n          // If nothing is given, iterate subjects and predicates first\n          yield* this._findInIndex(content.subjects, null, null, null,\n                            'subject', 'predicate', 'object', graphId);\n      }\n    }\n  }\n\n  // ### `match` returns a new dataset that is comprised of all quads in the current instance matching the given arguments.\n  // The logic described in Quad Matching is applied for each quad in this dataset to check if it should be included in the output dataset.\n  // Note: This method always returns a new DatasetCore, even if that dataset contains no quads.\n  // Note: Since a DatasetCore is an unordered set, the order of the quads within the returned sequence is arbitrary.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  // For backwards compatibility, the object return also implements the Readable stream interface.\n  match(subject, predicate, object, graph) {\n    return new DatasetCoreAndReadableStream(this, subject, predicate, object, graph);\n  }\n\n  // ### `countQuads` returns the number of quads matching a pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  countQuads(subject, predicate, object, graph) {\n    // Convert terms to internal string representation\n    graph = graph && termToId(graph);\n\n    const graphs = this._getGraphs(graph);\n    let count = 0, content, subjectId, predicateId, objectId;\n\n    // Translate IRIs to internal index keys.\n    if (subject   && !(subjectId   = this._termToNumericId(subject))   ||\n        predicate && !(predicateId = this._termToNumericId(predicate)) ||\n        object    && !(objectId    = this._termToNumericId(object)))\n      return 0;\n\n    for (const graphId in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graphId]) {\n        // Choose the optimal index, based on what fields are present\n        if (subject) {\n          if (object)\n            // If subject and object are given, the object index will be the fastest\n            count += this._countInIndex(content.objects, objectId, subjectId, predicateId);\n          else\n            // If only subject and possibly predicate are given, the subject index will be the fastest\n            count += this._countInIndex(content.subjects, subjectId, predicateId, objectId);\n        }\n        else if (predicate) {\n          // If only predicate and possibly object are given, the predicate index will be the fastest\n          count += this._countInIndex(content.predicates, predicateId, objectId, subjectId);\n        }\n        else {\n          // If only object is possibly given, the object index will be the fastest\n          count += this._countInIndex(content.objects, objectId, subjectId, predicateId);\n        }\n      }\n    }\n    return count;\n  }\n\n  // ### `forEach` executes the callback on all quads.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forEach(callback, subject, predicate, object, graph) {\n    this.some(quad => {\n      callback(quad);\n      return false;\n    }, subject, predicate, object, graph);\n  }\n\n  // ### `every` executes the callback on all quads,\n  // and returns `true` if it returns truthy for all them.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  every(callback, subject, predicate, object, graph) {\n    let some = false;\n    const every = !this.some(quad => {\n      some = true;\n      return !callback(quad);\n    }, subject, predicate, object, graph);\n    return some && every;\n  }\n\n  // ### `some` executes the callback on all quads,\n  // and returns `true` if it returns truthy for any of them.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  some(callback, subject, predicate, object, graph) {\n    for (const quad of this.readQuads(subject, predicate, object, graph))\n      if (callback(quad))\n        return true;\n    return false;\n  }\n\n  // ### `getSubjects` returns all subjects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getSubjects(predicate, object, graph) {\n    const results = [];\n    this.forSubjects(s => { results.push(s); }, predicate, object, graph);\n    return results;\n  }\n\n  // ### `forSubjects` executes the callback on all subjects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forSubjects(callback, predicate, object, graph) {\n    // Convert terms to internal string representation\n    graph = graph && termToId(graph);\n\n    const graphs = this._getGraphs(graph);\n    let content, predicateId, objectId;\n    callback = this._uniqueEntities(callback);\n\n    // Translate IRIs to internal index keys.\n    if (predicate && !(predicateId = this._termToNumericId(predicate)) ||\n        object    && !(objectId    = this._termToNumericId(object)))\n      return;\n\n    for (graph in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graph]) {\n        // Choose optimal index based on which fields are wildcards\n        if (predicateId) {\n          if (objectId)\n            // If predicate and object are given, the POS index is best.\n            this._loopBy2Keys(content.predicates, predicateId, objectId, callback);\n          else\n            // If only predicate is given, the SPO index is best.\n            this._loopByKey1(content.subjects, predicateId, callback);\n        }\n        else if (objectId)\n          // If only object is given, the OSP index is best.\n          this._loopByKey0(content.objects, objectId, callback);\n        else\n          // If no params given, iterate all the subjects\n          this._loop(content.subjects, callback);\n      }\n    }\n  }\n\n  // ### `getPredicates` returns all predicates that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getPredicates(subject, object, graph) {\n    const results = [];\n    this.forPredicates(p => { results.push(p); }, subject, object, graph);\n    return results;\n  }\n\n  // ### `forPredicates` executes the callback on all predicates that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forPredicates(callback, subject, object, graph) {\n    // Convert terms to internal string representation\n    graph = graph && termToId(graph);\n\n    const graphs = this._getGraphs(graph);\n    let content, subjectId, objectId;\n    callback = this._uniqueEntities(callback);\n\n    // Translate IRIs to internal index keys.\n    if (subject   && !(subjectId   = this._termToNumericId(subject))   ||\n        object    && !(objectId    = this._termToNumericId(object)))\n      return;\n\n    for (graph in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graph]) {\n        // Choose optimal index based on which fields are wildcards\n        if (subjectId) {\n          if (objectId)\n            // If subject and object are given, the OSP index is best.\n            this._loopBy2Keys(content.objects, objectId, subjectId, callback);\n          else\n            // If only subject is given, the SPO index is best.\n            this._loopByKey0(content.subjects, subjectId, callback);\n        }\n        else if (objectId)\n          // If only object is given, the POS index is best.\n          this._loopByKey1(content.predicates, objectId, callback);\n        else\n          // If no params given, iterate all the predicates.\n          this._loop(content.predicates, callback);\n      }\n    }\n  }\n\n  // ### `getObjects` returns all objects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getObjects(subject, predicate, graph) {\n    const results = [];\n    this.forObjects(o => { results.push(o); }, subject, predicate, graph);\n    return results;\n  }\n\n  // ### `forObjects` executes the callback on all objects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forObjects(callback, subject, predicate, graph) {\n    // Convert terms to internal string representation\n    graph = graph && termToId(graph);\n\n    const graphs = this._getGraphs(graph);\n    let content, subjectId, predicateId;\n    callback = this._uniqueEntities(callback);\n\n    // Translate IRIs to internal index keys.\n    if (subject   && !(subjectId   = this._termToNumericId(subject))   ||\n        predicate && !(predicateId = this._termToNumericId(predicate)))\n      return;\n\n    for (graph in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graph]) {\n        // Choose optimal index based on which fields are wildcards\n        if (subjectId) {\n          if (predicateId)\n            // If subject and predicate are given, the SPO index is best.\n            this._loopBy2Keys(content.subjects, subjectId, predicateId, callback);\n          else\n            // If only subject is given, the OSP index is best.\n            this._loopByKey1(content.objects, subjectId, callback);\n        }\n        else if (predicateId)\n          // If only predicate is given, the POS index is best.\n          this._loopByKey0(content.predicates, predicateId, callback);\n        else\n          // If no params given, iterate all the objects.\n          this._loop(content.objects, callback);\n      }\n    }\n  }\n\n  // ### `getGraphs` returns all graphs that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getGraphs(subject, predicate, object) {\n    const results = [];\n    this.forGraphs(g => { results.push(g); }, subject, predicate, object);\n    return results;\n  }\n\n  // ### `forGraphs` executes the callback on all graphs that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forGraphs(callback, subject, predicate, object) {\n    for (const graph in this._graphs) {\n      this.some(quad => {\n        callback(quad.graph);\n        return true; // Halt iteration of some()\n      }, subject, predicate, object, graph);\n    }\n  }\n\n  // ### `createBlankNode` creates a new blank node, returning its name\n  createBlankNode(suggestedName) {\n    let name, index;\n    // Generate a name based on the suggested name\n    if (suggestedName) {\n      name = suggestedName = `_:${suggestedName}`, index = 1;\n      while (this._ids[name])\n        name = suggestedName + index++;\n    }\n    // Generate a generic blank node name\n    else {\n      do { name = `_:b${this._blankNodeIndex++}`; }\n      while (this._ids[name]);\n    }\n    // Add the blank node to the entities, avoiding the generation of duplicates\n    this._ids[name] = ++this._id;\n    this._entities[this._id] = name;\n    return this._factory.blankNode(name.substr(2));\n  }\n\n  // ### `extractLists` finds and removes all list triples\n  // and returns the items per list.\n  extractLists({ remove = false, ignoreErrors = false } = {}) {\n    const lists = {}; // has scalar keys so could be a simple Object\n    const onError = ignoreErrors ? (() => true) :\n                  ((node, message) => { throw new Error(`${node.value} ${message}`); });\n\n    // Traverse each list from its tail\n    const tails = this.getQuads(null, namespaces.rdf.rest, namespaces.rdf.nil, null);\n    const toRemove = remove ? [...tails] : [];\n    tails.forEach(tailQuad => {\n      const items = [];             // the members found as objects of rdf:first quads\n      let malformed = false;      // signals whether the current list is malformed\n      let head;                   // the head of the list (_:b1 in above example)\n      let headPos;                // set to subject or object when head is set\n      const graph = tailQuad.graph; // make sure list is in exactly one graph\n\n      // Traverse the list from tail to end\n      let current = tailQuad.subject;\n      while (current && !malformed) {\n        const objectQuads = this.getQuads(null, null, current, null);\n        const subjectQuads = this.getQuads(current, null, null, null);\n        let quad, first = null, rest = null, parent = null;\n\n        // Find the first and rest of this list node\n        for (let i = 0; i < subjectQuads.length && !malformed; i++) {\n          quad = subjectQuads[i];\n          if (!quad.graph.equals(graph))\n            malformed = onError(current, 'not confined to single graph');\n          else if (head)\n            malformed = onError(current, 'has non-list arcs out');\n\n          // one rdf:first\n          else if (quad.predicate.value === namespaces.rdf.first) {\n            if (first)\n              malformed = onError(current, 'has multiple rdf:first arcs');\n            else\n              toRemove.push(first = quad);\n          }\n\n          // one rdf:rest\n          else if (quad.predicate.value === namespaces.rdf.rest) {\n            if (rest)\n              malformed = onError(current, 'has multiple rdf:rest arcs');\n            else\n              toRemove.push(rest = quad);\n          }\n\n          // alien triple\n          else if (objectQuads.length)\n            malformed = onError(current, 'can\\'t be subject and object');\n          else {\n            head = quad; // e.g. { (1 2 3) :p :o }\n            headPos = 'subject';\n          }\n        }\n\n        // { :s :p (1 2) } arrives here with no head\n        // { (1 2) :p :o } arrives here with head set to the list.\n        for (let i = 0; i < objectQuads.length && !malformed; ++i) {\n          quad = objectQuads[i];\n          if (head)\n            malformed = onError(current, 'can\\'t have coreferences');\n          // one rdf:rest\n          else if (quad.predicate.value === namespaces.rdf.rest) {\n            if (parent)\n              malformed = onError(current, 'has incoming rdf:rest arcs');\n            else\n              parent = quad;\n          }\n          else {\n            head = quad; // e.g. { :s :p (1 2) }\n            headPos = 'object';\n          }\n        }\n\n        // Store the list item and continue with parent\n        if (!first)\n          malformed = onError(current, 'has no list head');\n        else\n          items.unshift(first.object);\n        current = parent && parent.subject;\n      }\n\n      // Don't remove any quads if the list is malformed\n      if (malformed)\n        remove = false;\n      // Store the list under the value of its head\n      else if (head)\n        lists[head[headPos].value] = items;\n    });\n\n    // Remove list quads if requested\n    if (remove)\n      this.removeQuads(toRemove);\n    return lists;\n  }\n\n  // ### Store is an iterable.\n  // Can be used where iterables are expected: for...of loops, array spread operator,\n  // `yield*`, and destructuring assignment (order is not guaranteed).\n  *[Symbol.iterator]() {\n    yield* this.readQuads();\n  }\n}\n\n// Determines whether the argument is a string\nfunction isString(s) {\n  return typeof s === 'string' || s instanceof String;\n}\n\n/**\n * A class that implements both DatasetCore and Readable.\n */\nclass DatasetCoreAndReadableStream extends Readable {\n  constructor(n3Store, subject, predicate, object, graph) {\n    super({ objectMode: true });\n    Object.assign(this, { n3Store, subject, predicate, object, graph });\n  }\n\n  get filtered() {\n    if (!this._filtered) {\n      const { n3Store, graph, object, predicate, subject } = this;\n      const newStore = this._filtered = new N3Store({ factory: n3Store._factory });\n      for (const quad of n3Store.readQuads(subject, predicate, object, graph))\n        newStore.addQuad(quad);\n    }\n    return this._filtered;\n  }\n\n  get size() {\n    return this.filtered.size;\n  }\n\n  _read() {\n    for (const quad of this)\n      this.push(quad);\n    this.push(null);\n  }\n\n  add(quad) {\n    return this.filtered.add(quad);\n  }\n\n  delete(quad) {\n    return this.filtered.delete(quad);\n  }\n\n  has(quad) {\n    return this.filtered.has(quad);\n  }\n\n  match(subject, predicate, object, graph) {\n    return new DatasetCoreAndReadableStream(this.filtered, subject, predicate, object, graph);\n  }\n\n  *[Symbol.iterator]() {\n    yield* this._filtered || this.n3Store.readQuads(this.subject, this.predicate, this.object, this.graph);\n  }\n}\n","// **N3StreamParser** parses a text stream into a quad stream.\nimport { Transform } from 'readable-stream';\nimport N3Parser from './N3Parser';\n\n// ## Constructor\nexport default class N3StreamParser extends Transform {\n  constructor(options) {\n    super({ decodeStrings: true });\n    this._readableState.objectMode = true;\n\n    // Set up parser with dummy stream to obtain `data` and `end` callbacks\n    const parser = new N3Parser(options);\n    let onData, onEnd;\n    parser.parse({\n      on: (event, callback) => {\n        switch (event) {\n        case 'data': onData = callback; break;\n        case 'end':   onEnd = callback; break;\n        }\n      },\n    },\n      // Handle quads by pushing them down the pipeline\n      (error, quad) => { error && this.emit('error', error) || quad && this.push(quad); },\n      // Emit prefixes through the `prefix` event\n      (prefix, uri) => { this.emit('prefix', prefix, uri); }\n    );\n\n    // Implement Transform methods through parser callbacks\n    this._transform = (chunk, encoding, done) => { onData(chunk); done(); };\n    this._flush = done => { onEnd(); done(); };\n  }\n\n  // ### Parses a stream of strings\n  import(stream) {\n    stream.on('data',  chunk => { this.write(chunk); });\n    stream.on('end',   ()      => { this.end(); });\n    stream.on('error', error => { this.emit('error', error); });\n    return this;\n  }\n}\n","// **N3StreamWriter** serializes a quad stream into a text stream.\nimport { Transform } from 'readable-stream';\nimport N3Writer from './N3Writer';\n\n// ## Constructor\nexport default class N3StreamWriter extends Transform {\n  constructor(options) {\n    super({ encoding: 'utf8', writableObjectMode: true });\n\n    // Set up writer with a dummy stream object\n    const writer = this._writer = new N3Writer({\n      write: (quad, encoding, callback) => { this.push(quad); callback && callback(); },\n      end: callback => { this.push(null); callback && callback(); },\n    }, options);\n\n    // Implement Transform methods on top of writer\n    this._transform = (quad, encoding, done) => { writer.addQuad(quad, done); };\n    this._flush = done => { writer.end(done); };\n  }\n\n// ### Serializes a stream of quads\n  import(stream) {\n    stream.on('data',   quad => { this.write(quad); });\n    stream.on('end',    () => { this.end(); });\n    stream.on('error',  error => { this.emit('error', error); });\n    stream.on('prefix', (prefix, iri) => { this._writer.addPrefix(prefix, iri); });\n    return this;\n  }\n}\n","import Lexer from './N3Lexer';\nimport Parser from './N3Parser';\nimport Writer from './N3Writer';\nimport Store from './N3Store';\nimport StreamParser from './N3StreamParser';\nimport StreamWriter from './N3StreamWriter';\nimport * as Util from './N3Util';\n\nimport {\n  default as DataFactory,\n\n  Term,\n  NamedNode,\n  Literal,\n  BlankNode,\n  Variable,\n  DefaultGraph,\n  Quad,\n  Triple,\n\n  termFromId,\n  termToId,\n} from './N3DataFactory';\n\n// Named exports\nexport {\n  Lexer,\n  Parser,\n  Writer,\n  Store,\n  StreamParser,\n  StreamWriter,\n  Util,\n\n  DataFactory,\n\n  Term,\n  NamedNode,\n  Literal,\n  BlankNode,\n  Variable,\n  DefaultGraph,\n  Quad,\n  Triple,\n\n  termFromId,\n  termToId,\n};\n\n// Export all named exports as a default object for backward compatibility\nexport default {\n  Lexer,\n  Parser,\n  Writer,\n  Store,\n  StreamParser,\n  StreamWriter,\n  Util,\n\n  DataFactory,\n\n  Term,\n  NamedNode,\n  Literal,\n  BlankNode,\n  Variable,\n  DefaultGraph,\n  Quad,\n  Triple,\n\n  termFromId,\n  termToId,\n};\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function() {\n    var root;\n\n\tif (typeof window === 'object' && window) {\n\t\troot = window;\n\t} else {\n\t\troot = global;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tmodule.exports = root.Promise ? root.Promise : Promise;\n\t} else if (!root.Promise) {\n\t\troot.Promise = Promise;\n\t}\n\n\t// Use polyfill for setImmediate for performance gains\n\tvar asap = root.setImmediate || function(fn) { setTimeout(fn, 1); };\n\n\t// Polyfill for Function.prototype.bind\n\tfunction bind(fn, thisArg) {\n\t\treturn function() {\n\t\t\tfn.apply(thisArg, arguments);\n\t\t}\n\t}\n\n\tvar isArray = Array.isArray || function(value) { return Object.prototype.toString.call(value) === \"[object Array]\" };\n\n\tfunction Promise(fn) {\n\t\tif (typeof this !== 'object') throw new TypeError('Promises must be constructed via new');\n\t\tif (typeof fn !== 'function') throw new TypeError('not a function');\n\t\tthis._state = null;\n\t\tthis._value = null;\n\t\tthis._deferreds = []\n\n\t\tdoResolve(fn, bind(resolve, this), bind(reject, this))\n\t}\n\n\tfunction handle(deferred) {\n\t\tvar me = this;\n\t\tif (this._state === null) {\n\t\t\tthis._deferreds.push(deferred);\n\t\t\treturn\n\t\t}\n\t\tasap(function() {\n\t\t\tvar cb = me._state ? deferred.onFulfilled : deferred.onRejected\n\t\t\tif (cb === null) {\n\t\t\t\t(me._state ? deferred.resolve : deferred.reject)(me._value);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar ret;\n\t\t\ttry {\n\t\t\t\tret = cb(me._value);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tdeferred.reject(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdeferred.resolve(ret);\n\t\t})\n\t}\n\n\tfunction resolve(newValue) {\n\t\ttry { //Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n\t\t\tif (newValue === this) throw new TypeError('A promise cannot be resolved with itself.');\n\t\t\tif (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n\t\t\t\tvar then = newValue.then;\n\t\t\t\tif (typeof then === 'function') {\n\t\t\t\t\tdoResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._state = true;\n\t\t\tthis._value = newValue;\n\t\t\tfinale.call(this);\n\t\t} catch (e) { reject.call(this, e); }\n\t}\n\n\tfunction reject(newValue) {\n\t\tthis._state = false;\n\t\tthis._value = newValue;\n\t\tfinale.call(this);\n\t}\n\n\tfunction finale() {\n\t\tfor (var i = 0, len = this._deferreds.length; i < len; i++) {\n\t\t\thandle.call(this, this._deferreds[i]);\n\t\t}\n\t\tthis._deferreds = null;\n\t}\n\n\tfunction Handler(onFulfilled, onRejected, resolve, reject){\n\t\tthis.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n\t\tthis.onRejected = typeof onRejected === 'function' ? onRejected : null;\n\t\tthis.resolve = resolve;\n\t\tthis.reject = reject;\n\t}\n\n\t/**\n\t * Take a potentially misbehaving resolver function and make sure\n\t * onFulfilled and onRejected are only called once.\n\t *\n\t * Makes no guarantees about asynchrony.\n\t */\n\tfunction doResolve(fn, onFulfilled, onRejected) {\n\t\tvar done = false;\n\t\ttry {\n\t\t\tfn(function (value) {\n\t\t\t\tif (done) return;\n\t\t\t\tdone = true;\n\t\t\t\tonFulfilled(value);\n\t\t\t}, function (reason) {\n\t\t\t\tif (done) return;\n\t\t\t\tdone = true;\n\t\t\t\tonRejected(reason);\n\t\t\t})\n\t\t} catch (ex) {\n\t\t\tif (done) return;\n\t\t\tdone = true;\n\t\t\tonRejected(ex);\n\t\t}\n\t}\n\n\tPromise.prototype['catch'] = function (onRejected) {\n\t\treturn this.then(null, onRejected);\n\t};\n\n\tPromise.prototype.then = function(onFulfilled, onRejected) {\n\t\tvar me = this;\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\thandle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n\t\t})\n\t};\n\n\tPromise.all = function () {\n\t\tvar args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);\n\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tif (args.length === 0) return resolve([]);\n\t\t\tvar remaining = args.length;\n\t\t\tfunction res(i, val) {\n\t\t\t\ttry {\n\t\t\t\t\tif (val && (typeof val === 'object' || typeof val === 'function')) {\n\t\t\t\t\t\tvar then = val.then;\n\t\t\t\t\t\tif (typeof then === 'function') {\n\t\t\t\t\t\t\tthen.call(val, function (val) { res(i, val) }, reject);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\targs[i] = val;\n\t\t\t\t\tif (--remaining === 0) {\n\t\t\t\t\t\tresolve(args);\n\t\t\t\t\t}\n\t\t\t\t} catch (ex) {\n\t\t\t\t\treject(ex);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (var i = 0; i < args.length; i++) {\n\t\t\t\tres(i, args[i]);\n\t\t\t}\n\t\t});\n\t};\n\n\tPromise.resolve = function (value) {\n\t\tif (value && typeof value === 'object' && value.constructor === Promise) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn new Promise(function (resolve) {\n\t\t\tresolve(value);\n\t\t});\n\t};\n\n\tPromise.reject = function (value) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\treject(value);\n\t\t});\n\t};\n\n\tPromise.race = function (values) {\n\t\treturn new Promise(function (resolve, reject) {\n\t\t\tfor(var i = 0, len = values.length; i < len; i++) {\n\t\t\t\tvalues[i].then(resolve, reject);\n\t\t\t}\n\t\t});\n\t};\n})();","/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(typeof window !== 'undefined' ? window : global)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/BlankNode\"), exports);\n__exportStar(require(\"./lib/DataFactory\"), exports);\n__exportStar(require(\"./lib/DefaultGraph\"), exports);\n__exportStar(require(\"./lib/Literal\"), exports);\n__exportStar(require(\"./lib/NamedNode\"), exports);\n__exportStar(require(\"./lib/Quad\"), exports);\n__exportStar(require(\"./lib/Variable\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BlankNode = void 0;\n/**\n * A term that represents an RDF blank node with a label.\n */\nclass BlankNode {\n    constructor(value) {\n        this.termType = 'BlankNode';\n        this.value = value;\n    }\n    equals(other) {\n        return !!other && other.termType === 'BlankNode' && other.value === this.value;\n    }\n}\nexports.BlankNode = BlankNode;\n//# sourceMappingURL=BlankNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DataFactory = void 0;\nconst BlankNode_1 = require(\"./BlankNode\");\nconst DefaultGraph_1 = require(\"./DefaultGraph\");\nconst Literal_1 = require(\"./Literal\");\nconst NamedNode_1 = require(\"./NamedNode\");\nconst Quad_1 = require(\"./Quad\");\nconst Variable_1 = require(\"./Variable\");\nlet dataFactoryCounter = 0;\n/**\n * A factory for instantiating RDF terms and quads.\n */\nclass DataFactory {\n    constructor(options) {\n        this.blankNodeCounter = 0;\n        options = options || {};\n        this.blankNodePrefix = options.blankNodePrefix || `df_${dataFactoryCounter++}_`;\n    }\n    /**\n     * @param value The IRI for the named node.\n     * @return A new instance of NamedNode.\n     * @see NamedNode\n     */\n    namedNode(value) {\n        return new NamedNode_1.NamedNode(value);\n    }\n    /**\n     * @param value The optional blank node identifier.\n     * @return A new instance of BlankNode.\n     *         If the `value` parameter is undefined a new identifier\n     *         for the blank node is generated for each call.\n     * @see BlankNode\n     */\n    blankNode(value) {\n        return new BlankNode_1.BlankNode(value || `${this.blankNodePrefix}${this.blankNodeCounter++}`);\n    }\n    /**\n     * @param value              The literal value.\n     * @param languageOrDatatype The optional language or datatype.\n     *                           If `languageOrDatatype` is a NamedNode,\n     *                           then it is used for the value of `NamedNode.datatype`.\n     *                           Otherwise `languageOrDatatype` is used for the value\n     *                           of `NamedNode.language`.\n     * @return A new instance of Literal.\n     * @see Literal\n     */\n    literal(value, languageOrDatatype) {\n        return new Literal_1.Literal(value, languageOrDatatype);\n    }\n    /**\n     * This method is optional.\n     * @param value The variable name\n     * @return A new instance of Variable.\n     * @see Variable\n     */\n    variable(value) {\n        return new Variable_1.Variable(value);\n    }\n    /**\n     * @return An instance of DefaultGraph.\n     */\n    defaultGraph() {\n        return DefaultGraph_1.DefaultGraph.INSTANCE;\n    }\n    /**\n     * @param subject   The quad subject term.\n     * @param predicate The quad predicate term.\n     * @param object    The quad object term.\n     * @param graph     The quad graph term.\n     * @return A new instance of Quad.\n     * @see Quad\n     */\n    quad(subject, predicate, object, graph) {\n        return new Quad_1.Quad(subject, predicate, object, graph || this.defaultGraph());\n    }\n    /**\n     * Create a deep copy of the given term using this data factory.\n     * @param original An RDF term.\n     * @return A deep copy of the given term.\n     */\n    fromTerm(original) {\n        // TODO: remove nasty any casts when this TS bug has been fixed:\n        //  https://github.com/microsoft/TypeScript/issues/26933\n        switch (original.termType) {\n            case 'NamedNode':\n                return this.namedNode(original.value);\n            case 'BlankNode':\n                return this.blankNode(original.value);\n            case 'Literal':\n                if (original.language) {\n                    return this.literal(original.value, original.language);\n                }\n                if (!original.datatype.equals(Literal_1.Literal.XSD_STRING)) {\n                    return this.literal(original.value, this.fromTerm(original.datatype));\n                }\n                return this.literal(original.value);\n            case 'Variable':\n                return this.variable(original.value);\n            case 'DefaultGraph':\n                return this.defaultGraph();\n            case 'Quad':\n                return this.quad(this.fromTerm(original.subject), this.fromTerm(original.predicate), this.fromTerm(original.object), this.fromTerm(original.graph));\n        }\n    }\n    /**\n     * Create a deep copy of the given quad using this data factory.\n     * @param original An RDF quad.\n     * @return A deep copy of the given quad.\n     */\n    fromQuad(original) {\n        return this.fromTerm(original);\n    }\n    /**\n     * Reset the internal blank node counter.\n     */\n    resetBlankNodeCounter() {\n        this.blankNodeCounter = 0;\n    }\n}\nexports.DataFactory = DataFactory;\n//# sourceMappingURL=DataFactory.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefaultGraph = void 0;\n/**\n * A singleton term instance that represents the default graph.\n * It's only allowed to assign a DefaultGraph to the .graph property of a Quad.\n */\nclass DefaultGraph {\n    constructor() {\n        this.termType = 'DefaultGraph';\n        this.value = '';\n        // Private constructor\n    }\n    equals(other) {\n        return !!other && other.termType === 'DefaultGraph';\n    }\n}\nexports.DefaultGraph = DefaultGraph;\nDefaultGraph.INSTANCE = new DefaultGraph();\n//# sourceMappingURL=DefaultGraph.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Literal = void 0;\nconst NamedNode_1 = require(\"./NamedNode\");\n/**\n * A term that represents an RDF literal, containing a string with an optional language tag or datatype.\n */\nclass Literal {\n    constructor(value, languageOrDatatype) {\n        this.termType = 'Literal';\n        this.value = value;\n        if (typeof languageOrDatatype === 'string') {\n            this.language = languageOrDatatype;\n            this.datatype = Literal.RDF_LANGUAGE_STRING;\n        }\n        else if (languageOrDatatype) {\n            this.language = '';\n            this.datatype = languageOrDatatype;\n        }\n        else {\n            this.language = '';\n            this.datatype = Literal.XSD_STRING;\n        }\n    }\n    equals(other) {\n        return !!other && other.termType === 'Literal' && other.value === this.value &&\n            other.language === this.language && this.datatype.equals(other.datatype);\n    }\n}\nexports.Literal = Literal;\nLiteral.RDF_LANGUAGE_STRING = new NamedNode_1.NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#langString');\nLiteral.XSD_STRING = new NamedNode_1.NamedNode('http://www.w3.org/2001/XMLSchema#string');\n//# sourceMappingURL=Literal.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NamedNode = void 0;\n/**\n * A term that contains an IRI.\n */\nclass NamedNode {\n    constructor(value) {\n        this.termType = 'NamedNode';\n        this.value = value;\n    }\n    equals(other) {\n        return !!other && other.termType === 'NamedNode' && other.value === this.value;\n    }\n}\nexports.NamedNode = NamedNode;\n//# sourceMappingURL=NamedNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Quad = void 0;\n/**\n * An instance of DefaultGraph represents the default graph.\n * It's only allowed to assign a DefaultGraph to the .graph property of a Quad.\n */\nclass Quad {\n    constructor(subject, predicate, object, graph) {\n        this.termType = 'Quad';\n        this.value = '';\n        this.subject = subject;\n        this.predicate = predicate;\n        this.object = object;\n        this.graph = graph;\n    }\n    equals(other) {\n        // `|| !other.termType` is for backwards-compatibility with old factories without RDF* support.\n        return !!other && (other.termType === 'Quad' || !other.termType) &&\n            this.subject.equals(other.subject) &&\n            this.predicate.equals(other.predicate) &&\n            this.object.equals(other.object) &&\n            this.graph.equals(other.graph);\n    }\n}\nexports.Quad = Quad;\n//# sourceMappingURL=Quad.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Variable = void 0;\n/**\n * A term that represents a variable.\n */\nclass Variable {\n    constructor(value) {\n        this.termType = 'Variable';\n        this.value = value;\n    }\n    equals(other) {\n        return !!other && other.termType === 'Variable' && other.value === this.value;\n    }\n}\nexports.Variable = Variable;\n//# sourceMappingURL=Variable.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/RdfIsomorphic\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isTermGrounded = exports.termToSignature = exports.quadToSignature = exports.sha1hex = exports.hashTerm = exports.hashTerms = exports.getGraphBlankNodes = exports.uniqGraph = exports.deindexGraph = exports.indexGraph = exports.getQuadsWithoutBlankNodes = exports.getQuadsWithBlankNodes = exports.hasValue = exports.hashValues = exports.getBijectionInner = exports.getBijection = exports.isomorphic = void 0;\nconst hash_js_1 = require(\"hash.js\");\nconst rdf_string_1 = require(\"rdf-string\");\nconst rdf_terms_1 = require(\"rdf-terms\");\n/**\n * Determines if the two given graphs are isomorphic.\n *\n * @param {Quad[]} graphA An array of quads, order is not important.\n * @param {Quad[]} graphB An array of quads, order is not important.\n * @return {boolean} If the two given graphs are isomorphic.\n */\nfunction isomorphic(graphA, graphB) {\n    return !!getBijection(graphA, graphB);\n}\nexports.isomorphic = isomorphic;\n/**\n * Calculate a hash of graphA blank nodes to graphB blank nodes.\n * This represents a bijection from graphA's blank nodes to graphB's blank nodes.\n *\n * @param {Quad[]} graphA An array of quads, order is not important.\n * @param {Quad[]} graphB An array of quads, order is not important.\n * @return {IBijection} A hash representing a bijection, or null if none could be found.\n */\nfunction getBijection(graphA, graphB) {\n    // Check if all (non-blanknode-containing) quads in the two graphs are equal.\n    // We do this by creating a hash-based index for both graphs.\n    const nonBlankIndexA = indexGraph(getQuadsWithoutBlankNodes(graphA));\n    const nonBlankIndexB = indexGraph(getQuadsWithoutBlankNodes(graphB));\n    if (Object.keys(nonBlankIndexA).length !== Object.keys(nonBlankIndexB).length) {\n        return null;\n    }\n    for (const key in nonBlankIndexA) {\n        if (nonBlankIndexA[key] !== nonBlankIndexB[key]) {\n            return null;\n        }\n    }\n    // Pre-process data that needs to be present in each iteration of getBijectionInner.\n    const blankQuadsA = uniqGraph(getQuadsWithBlankNodes(graphA));\n    const blankQuadsB = uniqGraph(getQuadsWithBlankNodes(graphB));\n    const blankNodesA = getGraphBlankNodes(graphA);\n    const blankNodesB = getGraphBlankNodes(graphB);\n    return getBijectionInner(blankQuadsA, blankQuadsB, blankNodesA, blankNodesB);\n}\nexports.getBijection = getBijection;\nfunction getBijectionInner(blankQuadsA, blankQuadsB, blankNodesA, blankNodesB, groundedHashesA, groundedHashesB) {\n    if (!groundedHashesA) {\n        groundedHashesA = {};\n    }\n    if (!groundedHashesB) {\n        groundedHashesB = {};\n    }\n    // Hash every term based on the signature of the quads if appears in.\n    const [hashesA, ungroundedHashesA] = hashTerms(blankQuadsA, blankNodesA, groundedHashesA);\n    const [hashesB, ungroundedHashesB] = hashTerms(blankQuadsB, blankNodesB, groundedHashesB);\n    // Break quickly if a graph contains a grounded node that is not contained in the other graph.\n    if (Object.keys(hashesA).length !== Object.keys(hashesB).length) {\n        return null;\n    }\n    for (const hashKeyA in hashesA) {\n        if (!hasValue(hashesB, hashesA[hashKeyA])) {\n            return null;\n        }\n    }\n    // Map the blank nodes from graph A to the blank nodes of graph B using the created hashes.\n    // Grounded hashes will also be equal, but not needed here, we will need them in the next recursion\n    // (as we only recurse on grounded nodes).\n    let bijection = {};\n    for (const blankNodeA of blankNodesA) {\n        const blankNodeAString = rdf_string_1.termToString(blankNodeA);\n        const blankNodeAHash = ungroundedHashesA[blankNodeAString];\n        for (const blankNodeBString in ungroundedHashesB) {\n            if (ungroundedHashesB[blankNodeBString] === blankNodeAHash) {\n                bijection[blankNodeAString] = blankNodeBString;\n                delete ungroundedHashesB[blankNodeBString];\n                break;\n            }\n        }\n    }\n    // Check if all nodes from graph A and B are present in the bijection,\n    // if not, speculatively mark pairs with matching ungrounded hashes as bijected, and recurse.\n    if (!arraysEqual(Object.keys(bijection).sort(), blankNodesA.map(rdf_string_1.termToString).sort())\n        || !arraysEqual(hashValues(bijection).sort(), blankNodesB.map(rdf_string_1.termToString).sort())) {\n        // I have not yet been able to find any pathological cases where this code is reached.\n        // This may be removable, but let's wait until someone proves that.\n        bijection = null;\n        for (const blankNodeA of blankNodesA) {\n            // Only replace ungrounded node hashes\n            const blankNodeAString = rdf_string_1.termToString(blankNodeA);\n            if (!hashesA[blankNodeAString]) {\n                for (const blankNodeB of blankNodesB) {\n                    // Only replace ungrounded node hashes\n                    const blankNodeBString = rdf_string_1.termToString(blankNodeB);\n                    if (!hashesB[blankNodeBString]) {\n                        if (ungroundedHashesA[blankNodeAString] === ungroundedHashesB[blankNodeBString]) {\n                            const hash = sha1hex(blankNodeAString);\n                            bijection = getBijectionInner(blankQuadsA, blankQuadsB, blankNodesA, blankNodesB, Object.assign(Object.assign({}, hashesA), { [blankNodeAString]: hash }), Object.assign(Object.assign({}, hashesB), { [blankNodeBString]: hash }));\n                        }\n                    }\n                }\n            }\n        }\n    }\n    return bijection;\n}\nexports.getBijectionInner = getBijectionInner;\nfunction arraysEqual(array1, array2) {\n    if (array1.length !== array2.length) {\n        return false;\n    }\n    for (let i = array1.length; i--;) {\n        if (array1[i] !== array2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Get all values from the given hash\n * @param hash A hash.\n * @return {any[]} The array of values.\n */\nfunction hashValues(hash) {\n    const arr = [];\n    for (const e in hash) {\n        arr.push(hash[e]);\n    }\n    return arr;\n}\nexports.hashValues = hashValues;\n/**\n * Check if the given hash contains the given value.\n * @param hash A hash.\n * @param {string} value A value.\n * @return {boolean} If it contains the value.\n */\nfunction hasValue(hash, value) {\n    for (const hashValue in hash) {\n        if (hash[hashValue] === value) {\n            return true;\n        }\n    }\n    return false;\n}\nexports.hasValue = hasValue;\n/**\n * Get all quads with blank nodes.\n * @param {Quad[]} graph An array of quads.\n * @return {Quad[]} An array of quads with blank nodes\n */\nfunction getQuadsWithBlankNodes(graph) {\n    return graph.filter((quad) => rdf_terms_1.someTerms(quad, (value) => {\n        return value.termType === 'BlankNode'\n            || (value.termType === 'Quad' && rdf_terms_1.getTermsNested(value).some(term => term.termType === 'BlankNode'));\n    }));\n}\nexports.getQuadsWithBlankNodes = getQuadsWithBlankNodes;\n/**\n * Get all quads without blank nodes.\n * @param {Quad[]} graph An array of quads.\n * @return {Quad[]} An array of quads without blank nodes\n */\nfunction getQuadsWithoutBlankNodes(graph) {\n    return graph.filter((quad) => rdf_terms_1.everyTerms(quad, (value) => {\n        return value.termType !== 'BlankNode'\n            && !(value.termType === 'Quad' && rdf_terms_1.getTermsNested(value).some(term => term.termType === 'BlankNode'));\n    }));\n}\nexports.getQuadsWithoutBlankNodes = getQuadsWithoutBlankNodes;\n/**\n * Create a hash-based index of the given graph.\n * @param {Quad[]} graph An array of quads, the order does not matter.\n * @return {{[p: string]: boolean}} A hash-based datastructure representing the graph.\n */\nfunction indexGraph(graph) {\n    const index = {};\n    for (const quad of graph) {\n        index[JSON.stringify(rdf_string_1.quadToStringQuad(quad))] = true;\n    }\n    return index;\n}\nexports.indexGraph = indexGraph;\n/**\n * Create a graph from the given hash-based index.\n * @param {{[p: string]: boolean}} indexedGraph A hash-based datastructure representing the graph.\n * @return {Quad[]} An array of quads, the order does not matter.\n */\nfunction deindexGraph(indexedGraph) {\n    return Object.keys(indexedGraph).map((str) => rdf_string_1.stringQuadToQuad(JSON.parse(str)));\n}\nexports.deindexGraph = deindexGraph;\n/**\n * Unique-ify the given RDF graph based on strict equality.\n * The output graph will consist of new quad and term instances.\n * @param {Quad[]} graph An input graph.\n * @return {Quad[]} The input graph without duplicates.\n */\nfunction uniqGraph(graph) {\n    return deindexGraph(indexGraph(graph));\n}\nexports.uniqGraph = uniqGraph;\n/**\n * Find all blank nodes in the given graph.\n * @param {Quad[]} graph An array of quads.\n * @return {BlankNode[]} A list of (unique) blank nodes.\n */\nfunction getGraphBlankNodes(graph) {\n    return rdf_terms_1.uniqTerms(graph.map((quad) => rdf_terms_1.getBlankNodes(rdf_terms_1.getTermsNested(quad)))\n        .reduce((acc, val) => acc.concat(val), []));\n}\nexports.getGraphBlankNodes = getGraphBlankNodes;\n/**\n * Create term hashes for the given set of quads and blank node terms.\n *\n * @param {Quad[]} quads A set of quads.\n * @param {Term[]} terms Blank node terms.\n * @param {ITermHash} groundedHashes Grounded term hashes that are used to create more specific signatures\n *                                   of other terms, because they are based on non-blank nodes and grounded blank nodes.\n * @return {[ITermHash]} A tuple of grounded and ungrounded hashes.\n */\nfunction hashTerms(quads, terms, groundedHashes) {\n    const hashes = Object.assign({}, groundedHashes);\n    const ungroundedHashes = {};\n    let hashNeeded = true;\n    // Iteratively mark nodes as grounded.\n    // If a node is marked as grounded, then the next iteration can lead to new grounded states\n    while (hashNeeded) {\n        const initialGroundedNodesCount = Object.keys(hashes).length;\n        for (const term of terms) {\n            const termString = rdf_string_1.termToString(term);\n            if (!hashes[termString]) {\n                const [grounded, hash] = hashTerm(term, quads, hashes);\n                if (grounded) {\n                    hashes[termString] = hash;\n                }\n                ungroundedHashes[termString] = hash;\n            }\n        }\n        // All terms that have a unique hash at this point can be marked as grounded\n        const uniques = {};\n        for (const termKey in ungroundedHashes) {\n            const hash = ungroundedHashes[termKey];\n            if (uniques[hash] === undefined) {\n                uniques[hash] = termKey;\n            }\n            else {\n                uniques[hash] = false;\n            }\n        }\n        for (const hash in uniques) {\n            const value = uniques[hash];\n            if (value) {\n                hashes[value] = hash;\n            }\n        }\n        // Check if the loop needs to terminate\n        hashNeeded = initialGroundedNodesCount !== Object.keys(hashes).length;\n    }\n    return [hashes, ungroundedHashes];\n}\nexports.hashTerms = hashTerms;\n/**\n * Generate a hash for the given term based on the signature of the quads it appears in.\n *\n * Signatures are made up of grounded terms in quads that are associated with a term,\n * i.e., everything except for ungrounded blank nodes.\n * The hash is created by hashing a sorted list of each quad's signature,\n * where each quad signature is a concatenation of the signature of all grounded terms.\n *\n * Terms are considered grounded if they are a member in the given hash AND if they are not the given term.\n *\n * @param {Term} term The term to get the hash around.\n * @param {Quad[]} quads The quads to include in the hashing.\n * @param {ITermHash} hashes A grounded term hash object.\n * @return {[boolean , string]} A tuple indicating if the given term is grounded in all the given quads, and the hash.\n */\nfunction hashTerm(term, quads, hashes) {\n    const quadSignatures = [];\n    let grounded = true;\n    for (const quad of quads) {\n        const terms = rdf_terms_1.getTermsNested(quad);\n        if (terms.some((quadTerm) => quadTerm.equals(term))) {\n            quadSignatures.push(quadToSignature(quad, hashes, term));\n            for (const quadTerm of terms) {\n                if (!isTermGrounded(quadTerm, hashes) && !quadTerm.equals(term)) {\n                    grounded = false;\n                }\n            }\n        }\n    }\n    const hash = sha1hex(quadSignatures.sort().join(''));\n    return [grounded, hash];\n}\nexports.hashTerm = hashTerm;\n/**\n * Create a hash using sha1 as a hex digest.\n * @param {string | Buffer | NodeJS.TypedArray | DataView} data Something to hash.\n * @return {string} A hash string.\n */\nfunction sha1hex(data) {\n    return hash_js_1.sha1().update(data).digest('hex');\n}\nexports.sha1hex = sha1hex;\n/**\n * Convert the given quad to a string signature so that it can be used in the hash structure.\n * @param {Quad} quad A quad.\n * @param {ITermHash} hashes A grounded term hash object.\n * @param {Term} term A target term to compare with.\n * @return {string} A string signature.\n */\nfunction quadToSignature(quad, hashes, term) {\n    return rdf_terms_1.getTerms(quad).map((quadTerm) => termToSignature(quadTerm, hashes, term)).join('|');\n}\nexports.quadToSignature = quadToSignature;\n/**\n * Convert the given term to a string signature so that it can be used in the hash structure.\n * @param {Term} term A term.\n * @param {ITermHash} hashes A grounded term hash object.\n * @param {Term} target A target term to compare with.\n * @return {string} A string signature.\n */\nfunction termToSignature(term, hashes, target) {\n    if (term.equals(target)) {\n        return '@self';\n    }\n    else if (term.termType === 'BlankNode') {\n        return hashes[rdf_string_1.termToString(term)] || '@blank';\n    }\n    else if (term.termType === 'Quad') {\n        return `<${quadToSignature(term, hashes, target)}>`;\n    }\n    else {\n        return rdf_string_1.termToString(term);\n    }\n}\nexports.termToSignature = termToSignature;\n/**\n * Check if a term is grounded.\n *\n * A term is grounded if it is not a blank node\n * or if it included in the given hash of grounded nodes.\n *\n * @param {Term} term A term.\n * @param {ITermHash} hashes A grounded term hash object.\n * @return {boolean} If the given term is grounded.\n */\nfunction isTermGrounded(term, hashes) {\n    return (term.termType !== 'BlankNode'\n        && !(term.termType === 'Quad' && rdf_terms_1.getTermsNested(term).some(subTerm => !isTermGrounded(subTerm, hashes)))) || !!hashes[rdf_string_1.termToString(term)];\n}\nexports.isTermGrounded = isTermGrounded;\n//# sourceMappingURL=RdfIsomorphic.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSupportedJavaScriptPrimitives = exports.getSupportedRdfDatatypes = exports.getTermRaw = exports.toRdf = exports.fromRdf = void 0;\nconst rdf_data_factory_1 = require(\"rdf-data-factory\");\nconst handler_1 = require(\"./lib/handler\");\nconst Translator_1 = require(\"./lib/Translator\");\n__exportStar(require(\"./lib/handler\"), exports);\n__exportStar(require(\"./lib/ITypeHandler\"), exports);\n__exportStar(require(\"./lib/Translator\"), exports);\nconst DF = new rdf_data_factory_1.DataFactory();\n// Construct translator with built-in handlers\nconst translator = new Translator_1.Translator();\ntranslator.registerHandler(new handler_1.TypeHandlerString(), handler_1.TypeHandlerString.TYPES.map(t => DF.namedNode(t)), ['string']);\ntranslator.registerHandler(new handler_1.TypeHandlerBoolean(), [handler_1.TypeHandlerBoolean.TYPE].map(t => DF.namedNode(t)), ['boolean']);\ntranslator.registerHandler(new handler_1.TypeHandlerNumberDouble(), handler_1.TypeHandlerNumberDouble.TYPES.map(t => DF.namedNode(t)), ['number']);\ntranslator.registerHandler(new handler_1.TypeHandlerNumberInteger(), handler_1.TypeHandlerNumberInteger.TYPES.map(t => DF.namedNode(t)), ['number']);\ntranslator.registerHandler(new handler_1.TypeHandlerDate(), handler_1.TypeHandlerDate.TYPES.map(t => DF.namedNode(t)), ['object']);\n/**\n * Convert the given RDF literal to an JavaScript primitive.\n * @param {Literal} literal An RDF literal value.\n * @param {boolean} validate If the literal value should be validated against the datatype.\n * @return {any} A JavaScript primitive value.\n */\nfunction fromRdf(literal, validate) {\n    return translator.fromRdf(literal, validate);\n}\nexports.fromRdf = fromRdf;\n/**\n * Convert the given JavaScript primitive to an RDF literal.\n * @param value A JavaScript primitive value.\n * @param options Options for RDF conversion. May also be a data factory.\n * @return {Literal} An RDF literal value.\n */\nfunction toRdf(value, options) {\n    // Backwards-compatibility to accept data factory as option arg.\n    if (options && 'namedNode' in options) {\n        options = { dataFactory: options };\n    }\n    // Set default data factory\n    options = options || {};\n    if (options && !options.dataFactory) {\n        options.dataFactory = DF;\n    }\n    return translator.toRdf(value, options);\n}\nexports.toRdf = toRdf;\n/**\n * Get the raw value of the given term.\n * If it is a literal, {@link fromRdf} will be called.\n * Otherwise {@link .value} will be returned.\n * @param {Term} term Any RDF term.\n * @param {boolean} validate If the literal value should be validated against the datatype.\n * @return {any} A JavaScript primitive value.\n */\nfunction getTermRaw(term, validate) {\n    if (term.termType === 'Literal') {\n        return fromRdf(term, validate);\n    }\n    return term.value;\n}\nexports.getTermRaw = getTermRaw;\n/**\n * @return {NamedNode[]} An array of all supported RDF datatypes.\n */\nfunction getSupportedRdfDatatypes() {\n    return translator.getSupportedRdfDatatypes();\n}\nexports.getSupportedRdfDatatypes = getSupportedRdfDatatypes;\n/**\n * @return {string[]} An array of all supported JavaScript types.\n */\nfunction getSupportedJavaScriptPrimitives() {\n    return translator.getSupportedJavaScriptPrimitives();\n}\nexports.getSupportedJavaScriptPrimitives = getSupportedJavaScriptPrimitives;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//# sourceMappingURL=ITypeHandler.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Translator = void 0;\n/**\n * Translates between an RDF literal and a JavaScript primitive.\n */\nclass Translator {\n    constructor() {\n        this.supportedRdfDatatypes = [];\n        this.fromRdfHandlers = {};\n        this.toRdfHandlers = {};\n    }\n    static incorrectRdfDataType(literal) {\n        throw new Error(`Invalid RDF ${literal.datatype.value} value: '${literal.value}'`);\n    }\n    registerHandler(handler, rdfDatatypes, javaScriptDataTypes) {\n        for (const rdfDatatype of rdfDatatypes) {\n            this.supportedRdfDatatypes.push(rdfDatatype);\n            this.fromRdfHandlers[rdfDatatype.value] = handler;\n        }\n        for (const javaScriptDataType of javaScriptDataTypes) {\n            let existingToRdfHandlers = this.toRdfHandlers[javaScriptDataType];\n            if (!existingToRdfHandlers) {\n                this.toRdfHandlers[javaScriptDataType] = existingToRdfHandlers = [];\n            }\n            existingToRdfHandlers.push(handler);\n        }\n    }\n    fromRdf(literal, validate) {\n        const handler = this.fromRdfHandlers[literal.datatype.value];\n        if (handler) {\n            return handler.fromRdf(literal, validate);\n        }\n        else {\n            return literal.value;\n        }\n    }\n    toRdf(value, options) {\n        const handlers = this.toRdfHandlers[typeof value];\n        if (handlers) {\n            for (const handler of handlers) {\n                const ret = handler.toRdf(value, options);\n                if (ret) {\n                    return ret;\n                }\n            }\n        }\n        throw new Error(`Invalid JavaScript value: '${value}'`);\n    }\n    /**\n     * @return {NamedNode[]} An array of all supported RDF datatypes.\n     */\n    getSupportedRdfDatatypes() {\n        return this.supportedRdfDatatypes;\n    }\n    /**\n     * @return {string[]} An array of all supported JavaScript types.\n     */\n    getSupportedJavaScriptPrimitives() {\n        return Object.keys(this.toRdfHandlers);\n    }\n}\nexports.Translator = Translator;\n//# sourceMappingURL=Translator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHandlerBoolean = void 0;\nconst Translator_1 = require(\"../Translator\");\n/**\n * Translates booleans.\n */\nclass TypeHandlerBoolean {\n    fromRdf(literal, validate) {\n        switch (literal.value) {\n            case 'true':\n                return true;\n            case 'false':\n                return false;\n            case '1':\n                return true;\n            case '0':\n                return false;\n        }\n        if (validate) {\n            Translator_1.Translator.incorrectRdfDataType(literal);\n        }\n        return false;\n    }\n    toRdf(value, { datatype, dataFactory }) {\n        return dataFactory.literal(value ? 'true' : 'false', datatype || dataFactory.namedNode(TypeHandlerBoolean.TYPE));\n    }\n}\nTypeHandlerBoolean.TYPE = 'http://www.w3.org/2001/XMLSchema#boolean';\nexports.TypeHandlerBoolean = TypeHandlerBoolean;\n//# sourceMappingURL=TypeHandlerBoolean.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHandlerDate = void 0;\nconst Translator_1 = require(\"../Translator\");\n/**\n * Translates dates.\n */\nclass TypeHandlerDate {\n    fromRdf(literal, validate) {\n        if (validate && !literal.value.match(TypeHandlerDate\n            .VALIDATORS[literal.datatype.value.substr(33, literal.datatype.value.length)])) {\n            Translator_1.Translator.incorrectRdfDataType(literal);\n        }\n        switch (literal.datatype.value) {\n            case 'http://www.w3.org/2001/XMLSchema#gDay':\n                return new Date(0, 0, parseInt(literal.value, 10));\n            case 'http://www.w3.org/2001/XMLSchema#gMonthDay':\n                const partsMonthDay = literal.value.split('-');\n                return new Date(0, parseInt(partsMonthDay[0], 10) - 1, parseInt(partsMonthDay[1], 10));\n            case 'http://www.w3.org/2001/XMLSchema#gYear':\n                return new Date(literal.value + '-01-01');\n            case 'http://www.w3.org/2001/XMLSchema#gYearMonth':\n                return new Date(literal.value + '-01');\n            default:\n                return new Date(literal.value);\n        }\n    }\n    toRdf(value, { datatype, dataFactory }) {\n        datatype = datatype || dataFactory.namedNode(TypeHandlerDate.TYPES[0]);\n        // Assume date values\n        if (!(value instanceof Date)) {\n            return null;\n        }\n        const date = value;\n        let valueString;\n        switch (datatype.value) {\n            case 'http://www.w3.org/2001/XMLSchema#gDay':\n                valueString = String(date.getUTCDate());\n                break;\n            case 'http://www.w3.org/2001/XMLSchema#gMonthDay':\n                valueString = (date.getUTCMonth() + 1) + '-' + date.getUTCDate();\n                break;\n            case 'http://www.w3.org/2001/XMLSchema#gYear':\n                valueString = String(date.getUTCFullYear());\n                break;\n            case 'http://www.w3.org/2001/XMLSchema#gYearMonth':\n                valueString = date.getUTCFullYear() + '-' + (date.getUTCMonth() + 1);\n                break;\n            case 'http://www.w3.org/2001/XMLSchema#date':\n                valueString = date.toISOString().replace(/T.*$/, '');\n                break;\n            default:\n                valueString = date.toISOString();\n        }\n        return dataFactory.literal(valueString, datatype);\n    }\n}\nTypeHandlerDate.TYPES = [\n    'http://www.w3.org/2001/XMLSchema#dateTime',\n    'http://www.w3.org/2001/XMLSchema#date',\n    'http://www.w3.org/2001/XMLSchema#gDay',\n    'http://www.w3.org/2001/XMLSchema#gMonthDay',\n    'http://www.w3.org/2001/XMLSchema#gYear',\n    'http://www.w3.org/2001/XMLSchema#gYearMonth',\n];\nTypeHandlerDate.VALIDATORS = {\n    date: /^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,\n    dateTime: /^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\\.[0-9][0-9][0-9])?((Z?)|([\\+-][0-9][0-9]:[0-9][0-9]))$/,\n    gDay: /^[0-9]+$/,\n    gMonthDay: /^[0-9]+-[0-9][0-9]$/,\n    gYear: /^[0-9]+$/,\n    gYearMonth: /^[0-9]+-[0-9][0-9]$/,\n};\nexports.TypeHandlerDate = TypeHandlerDate;\n//# sourceMappingURL=TypeHandlerDate.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHandlerNumberDouble = void 0;\nconst Translator_1 = require(\"../Translator\");\n/**\n * Translates double numbers.\n */\nclass TypeHandlerNumberDouble {\n    fromRdf(literal, validate) {\n        const parsed = parseFloat(literal.value);\n        if (validate) {\n            if (isNaN(parsed)) {\n                Translator_1.Translator.incorrectRdfDataType(literal);\n            }\n            // TODO: validate more\n        }\n        return parsed;\n    }\n    toRdf(value, { datatype, dataFactory }) {\n        datatype = datatype || dataFactory.namedNode(TypeHandlerNumberDouble.TYPES[0]);\n        if (isNaN(value)) {\n            return dataFactory.literal('NaN', datatype);\n        }\n        if (!isFinite(value)) {\n            return dataFactory.literal(value > 0 ? 'INF' : '-INF', datatype);\n        }\n        if (value % 1 === 0) {\n            return null;\n        }\n        return dataFactory.literal(value.toExponential(15).replace(/(\\d)0*e\\+?/, '$1E'), datatype);\n    }\n}\nTypeHandlerNumberDouble.TYPES = [\n    'http://www.w3.org/2001/XMLSchema#double',\n    'http://www.w3.org/2001/XMLSchema#decimal',\n    'http://www.w3.org/2001/XMLSchema#float',\n];\nexports.TypeHandlerNumberDouble = TypeHandlerNumberDouble;\n//# sourceMappingURL=TypeHandlerNumberDouble.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHandlerNumberInteger = void 0;\nconst Translator_1 = require(\"../Translator\");\n/**\n * Translates integer numbers.\n */\nclass TypeHandlerNumberInteger {\n    fromRdf(literal, validate) {\n        const parsed = parseInt(literal.value, 10);\n        if (validate) {\n            if (isNaN(parsed) || literal.value.indexOf('.') >= 0) {\n                Translator_1.Translator.incorrectRdfDataType(literal);\n            }\n            // TODO: validate more\n        }\n        return parsed;\n    }\n    toRdf(value, { datatype, dataFactory }) {\n        return dataFactory.literal(String(value), datatype\n            || (value <= TypeHandlerNumberInteger.MAX_INT && value >= TypeHandlerNumberInteger.MIN_INT\n                ? dataFactory.namedNode(TypeHandlerNumberInteger.TYPES[0])\n                : dataFactory.namedNode(TypeHandlerNumberInteger.TYPES[1])));\n    }\n}\nTypeHandlerNumberInteger.TYPES = [\n    'http://www.w3.org/2001/XMLSchema#integer',\n    'http://www.w3.org/2001/XMLSchema#long',\n    'http://www.w3.org/2001/XMLSchema#int',\n    'http://www.w3.org/2001/XMLSchema#byte',\n    'http://www.w3.org/2001/XMLSchema#short',\n    'http://www.w3.org/2001/XMLSchema#negativeInteger',\n    'http://www.w3.org/2001/XMLSchema#nonNegativeInteger',\n    'http://www.w3.org/2001/XMLSchema#nonPositiveInteger',\n    'http://www.w3.org/2001/XMLSchema#positiveInteger',\n    'http://www.w3.org/2001/XMLSchema#unsignedByte',\n    'http://www.w3.org/2001/XMLSchema#unsignedInt',\n    'http://www.w3.org/2001/XMLSchema#unsignedLong',\n    'http://www.w3.org/2001/XMLSchema#unsignedShort',\n];\nTypeHandlerNumberInteger.MAX_INT = 2147483647;\nTypeHandlerNumberInteger.MIN_INT = -2147483648;\nexports.TypeHandlerNumberInteger = TypeHandlerNumberInteger;\n//# sourceMappingURL=TypeHandlerNumberInteger.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHandlerString = void 0;\n/**\n * Translates strings.\n */\nclass TypeHandlerString {\n    fromRdf(literal) {\n        return literal.value;\n    }\n    toRdf(value, { datatype, dataFactory }) {\n        return dataFactory.literal(value, datatype);\n    }\n}\nTypeHandlerString.TYPES = [\n    'http://www.w3.org/2001/XMLSchema#string',\n    'http://www.w3.org/2001/XMLSchema#normalizedString',\n    'http://www.w3.org/2001/XMLSchema#anyURI',\n    'http://www.w3.org/2001/XMLSchema#base64Binary',\n    'http://www.w3.org/2001/XMLSchema#language',\n    'http://www.w3.org/2001/XMLSchema#Name',\n    'http://www.w3.org/2001/XMLSchema#NCName',\n    'http://www.w3.org/2001/XMLSchema#NMTOKEN',\n    'http://www.w3.org/2001/XMLSchema#token',\n    'http://www.w3.org/2001/XMLSchema#hexBinary',\n    'http://www.w3.org/1999/02/22-rdf-syntax-ns#langString',\n    'http://www.w3.org/2001/XMLSchema#time',\n    'http://www.w3.org/2001/XMLSchema#duration',\n];\nexports.TypeHandlerString = TypeHandlerString;\n//# sourceMappingURL=TypeHandlerString.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./TypeHandlerBoolean\"), exports);\n__exportStar(require(\"./TypeHandlerDate\"), exports);\n__exportStar(require(\"./TypeHandlerNumberDouble\"), exports);\n__exportStar(require(\"./TypeHandlerNumberInteger\"), exports);\n__exportStar(require(\"./TypeHandlerString\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/PendingStreamsIndex\"), exports);\n__exportStar(require(\"./lib/StreamingStore\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PendingStreamsIndex = void 0;\nconst rdf_string_1 = require(\"rdf-string\");\nconst rdf_terms_1 = require(\"rdf-terms\");\n/**\n * A PendingStreamsIndex stores pending streams indexed by the quad pattern they have been created for.\n */\nclass PendingStreamsIndex {\n    constructor() {\n        this.indexedStreams = new Map();\n        this.allStreams = [];\n    }\n    termToString(term) {\n        return term && term.termType !== 'Variable' ? (0, rdf_string_1.termToString)(term) : PendingStreamsIndex.ID_VARIABLE;\n    }\n    /**\n     * Add a new pending stream for the given quad pattern.\n     * @param pendingStream A pending stream.\n     * @param subject A term.\n     * @param predicate A term.\n     * @param object A term.\n     * @param graph A term.\n     */\n    addPatternListener(pendingStream, subject, predicate, object, graph) {\n        // Append to list of pendingStreams\n        this.allStreams.push(pendingStream);\n        // Append to index of pendingStreams\n        const key = `${this.termToString(subject)}${PendingStreamsIndex.ID_SEPARATOR}${this.termToString(predicate)}${PendingStreamsIndex.ID_SEPARATOR}${this.termToString(object)}${PendingStreamsIndex.ID_SEPARATOR}${this.termToString(graph)}`;\n        let existingListeners = this.indexedStreams.get(key);\n        if (!existingListeners) {\n            existingListeners = [];\n            this.indexedStreams.set(key, existingListeners);\n        }\n        existingListeners.push(pendingStream);\n    }\n    /**\n     * Find all the pending streams from which their quad pattern match the given quad.\n     * @param quad The quad to match patterns to.\n     */\n    getPendingStreamsForQuad(quad) {\n        // Determine the combinations of quad patterns to look up\n        let keys = [(0, rdf_terms_1.getTerms)(quad).map(term => (0, rdf_string_1.termToString)(term))];\n        for (let i = 0; i < rdf_terms_1.QUAD_TERM_NAMES.length; i++) {\n            const keysOld = keys;\n            keys = [];\n            for (const key of keysOld) {\n                keys.push(key);\n                const keyModified = [...key];\n                keyModified[i] = PendingStreamsIndex.ID_VARIABLE;\n                keys.push(keyModified);\n            }\n        }\n        // Fetch the pendingStreams for the quad pattern combinations\n        const pendingStreams = [];\n        for (const key of keys) {\n            const found = this.indexedStreams.get(key.join(PendingStreamsIndex.ID_SEPARATOR));\n            if (found) {\n                pendingStreams.push(...found);\n            }\n        }\n        return pendingStreams;\n    }\n}\nPendingStreamsIndex.ID_VARIABLE = '?';\nPendingStreamsIndex.ID_SEPARATOR = ':';\nexports.PendingStreamsIndex = PendingStreamsIndex;\n//# sourceMappingURL=PendingStreamsIndex.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StreamingStore = void 0;\nconst n3_1 = require(\"n3\");\nconst readable_stream_1 = require(\"readable-stream\");\nconst PendingStreamsIndex_1 = require(\"./PendingStreamsIndex\");\n/**\n * A StreamingStore allows data lookup and insertion to happen in parallel.\n * Concretely, this means that `match()` calls happening before `import()` calls, will still consider those triples that\n * are inserted later, which is done by keeping the response streams of `match()` open.\n * Only when the `end()` method is invoked, all response streams will close, and the StreamingStore will be considered\n * immutable.\n *\n * WARNING: `end()` MUST be called at some point, otherwise all `match` streams will remain unended.\n */\nclass StreamingStore {\n    constructor(store = new n3_1.Store()) {\n        this.pendingStreams = new PendingStreamsIndex_1.PendingStreamsIndex();\n        this.ended = false;\n        this.store = store;\n    }\n    /**\n     * Mark this store as ended.\n     *\n     * This will make sure that all running and future `match` calls will end,\n     * and all next `import` calls to this store will throw an error.\n     */\n    end() {\n        this.ended = true;\n        // Mark all pendingStreams as ended.\n        for (const pendingStream of this.pendingStreams.allStreams) {\n            pendingStream.push(null);\n            pendingStream._pipeSource.unpipe();\n        }\n    }\n    importToListeners(stream) {\n        stream.on('data', (quad) => {\n            if (!this.ended && !this.store.countQuads(quad.subject, quad.predicate, quad.object, quad.graph)) {\n                for (const pendingStream of this.pendingStreams.getPendingStreamsForQuad(quad)) {\n                    if (pendingStream.isInitialized) {\n                        pendingStream.push(quad);\n                        pendingStream.emit('quad', quad);\n                    }\n                }\n            }\n        });\n    }\n    import(stream) {\n        if (this.ended) {\n            throw new Error('Attempted to import into an ended StreamingStore');\n        }\n        this.importToListeners(stream);\n        return this.store.import(stream);\n    }\n    match(subject, predicate, object, graph) {\n        const storeResult = this.store.match(subject, predicate, object, graph);\n        let stream = storeResult;\n        // If the store hasn't ended yet, also create a new pendingStream\n        if (!this.ended) {\n            // The new pendingStream remains open, until the store is ended.\n            const pendingStream = new readable_stream_1.PassThrough({ objectMode: true });\n            this.pendingStreams.addPatternListener(pendingStream, subject, predicate, object, graph);\n            stream = storeResult.pipe(pendingStream, { end: false });\n            stream._pipeSource = storeResult;\n            // This is an ugly hack to annotate pendingStream with the isInitialized once the store stream started being read.\n            // This is necessary to avoid duplicate quads cases where match() is called but not yet read, an import is done,\n            // and only then the match() stream is read.\n            // eslint-disable-next-line @typescript-eslint/unbound-method\n            const readOld = storeResult._read;\n            storeResult._read = (size) => {\n                pendingStream.isInitialized = true;\n                readOld.call(storeResult, size);\n            };\n        }\n        return stream;\n    }\n    /**\n     * The internal store with all imported quads.\n     */\n    getStore() {\n        return this.store;\n    }\n}\nexports.StreamingStore = StreamingStore;\n//# sourceMappingURL=StreamingStore.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.termToString = exports.stringToTerm = exports.stringQuadToQuad = exports.quadToStringQuad = exports.getLiteralValue = exports.getLiteralType = exports.getLiteralLanguage = void 0;\nconst TermUtil_1 = require(\"./lib/TermUtil\");\nObject.defineProperty(exports, \"getLiteralLanguage\", { enumerable: true, get: function () { return TermUtil_1.getLiteralLanguage; } });\nObject.defineProperty(exports, \"getLiteralType\", { enumerable: true, get: function () { return TermUtil_1.getLiteralType; } });\nObject.defineProperty(exports, \"getLiteralValue\", { enumerable: true, get: function () { return TermUtil_1.getLiteralValue; } });\nObject.defineProperty(exports, \"quadToStringQuad\", { enumerable: true, get: function () { return TermUtil_1.quadToStringQuad; } });\nObject.defineProperty(exports, \"stringQuadToQuad\", { enumerable: true, get: function () { return TermUtil_1.stringQuadToQuad; } });\nObject.defineProperty(exports, \"stringToTerm\", { enumerable: true, get: function () { return TermUtil_1.stringToTerm; } });\nObject.defineProperty(exports, \"termToString\", { enumerable: true, get: function () { return TermUtil_1.termToString; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringQuadToQuad = exports.quadToStringQuad = exports.stringToTerm = exports.getLiteralLanguage = exports.getLiteralType = exports.getLiteralValue = exports.termToString = void 0;\nconst rdf_data_factory_1 = require(\"rdf-data-factory\");\nconst FACTORY = new rdf_data_factory_1.DataFactory();\n/**\n * Utility methods for converting between string-based RDF representations and RDFJS objects.\n *\n * RDF Terms are represented as follows:\n * * Blank nodes: '_:myBlankNode'\n * * Variables: '_myVariable'\n * * Literals: '\"myString\"', '\"myLanguageString\"@en-us', '\"<p>e</p>\"^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML>'\n * * URIs: '<http://example.org>'\n *\n * Quads/triples are represented as hashes with 'subject', 'predicate', 'object' and 'graph' (optional)\n * as keys, and string-based RDF terms as values.\n */\n/**\n * Convert an RDFJS term to a string-based representation.\n * @param {RDF.Term} term An RDFJS term.\n * @return {string} A string-based term representation.\n */\nfunction termToString(term) {\n    // TODO: remove nasty any casts when this TS bug has been fixed: https://github.com/microsoft/TypeScript/issues/26933\n    if (!term) {\n        return undefined;\n    }\n    switch (term.termType) {\n        case 'NamedNode': return (`<${escapeIRI(term.value)}>`);\n        case 'BlankNode': return (`_:${term.value}`);\n        case 'Literal': {\n            const literalValue = term;\n            return (`\"${escapeStringRDF(literalValue.value)}\"${literalValue.datatype &&\n                literalValue.datatype.value !== 'http://www.w3.org/2001/XMLSchema#string' &&\n                literalValue.datatype.value !== 'http://www.w3.org/1999/02/22-rdf-syntax-ns#langString' ?\n                `^^<${literalValue.datatype.value}>` :\n                ''}${literalValue.language ? `@${literalValue.language}` : ''}`);\n        }\n        case 'Quad': return (`<<${termToString(term.subject)} ${termToString(term.predicate)} ${termToString(term.object)}${term.graph.termType === 'DefaultGraph' ? '' : ` ${termToString(term.graph)}`}>>`);\n        case 'Variable': return (`?${term.value}`);\n        case 'DefaultGraph': return term.value;\n    }\n}\nexports.termToString = termToString;\n/**\n * Get the string value of a literal.\n * @param {string} literalValue An RDF literal enclosed by '\"'.\n * @return {string} The literal value inside the '\"'.\n */\nfunction getLiteralValue(literalValue) {\n    const match = /^\"([^]*)\"((\\^\\^.*)|(@.*))?$/u.exec(literalValue);\n    if (!match) {\n        throw new Error(`${literalValue} is not a literal`);\n    }\n    return match[1].replace(/\\\\\"/ug, '\"');\n}\nexports.getLiteralValue = getLiteralValue;\n/**\n * Get the datatype of the given literal.\n * @param {string} literalValue An RDF literal.\n * @return {string} The datatype of the literal.\n */\nfunction getLiteralType(literalValue) {\n    const match = /^\"[^]*\"(?:\\^\\^<([^\"]+)>|(@)[^@\"]+)?$/u.exec(literalValue);\n    if (!match) {\n        throw new Error(`${literalValue} is not a literal`);\n    }\n    return match[1] || (match[2] ?\n        'http://www.w3.org/1999/02/22-rdf-syntax-ns#langString' :\n        'http://www.w3.org/2001/XMLSchema#string');\n}\nexports.getLiteralType = getLiteralType;\n/**\n * Get the language of the given literal.\n * @param {string} literalValue An RDF literal.\n * @return {string} The language of the literal.\n */\nfunction getLiteralLanguage(literalValue) {\n    const match = /^\"[^]*\"(?:@([^@\"]+)|\\^\\^[^\"]+)?$/u.exec(literalValue);\n    if (!match) {\n        throw new Error(`${literalValue} is not a literal`);\n    }\n    return match[1] ? match[1].toLowerCase() : '';\n}\nexports.getLiteralLanguage = getLiteralLanguage;\n/**\n * Transform a string-based RDF term to an RDFJS term.\n * @param {string} value A string-based RDF-term.\n * @param {RDF.DataFactory} dataFactory An optional datafactory to create terms with.\n * @return {RDF.Term} An RDF-JS term.\n */\nfunction stringToTerm(value, dataFactory) {\n    dataFactory = dataFactory || FACTORY;\n    if (!value || (value.length === 0)) {\n        return dataFactory.defaultGraph();\n    }\n    switch (value[0]) {\n        case '_': return dataFactory.blankNode(value.slice(2));\n        case '?':\n            if (!dataFactory.variable) {\n                throw new Error(`Missing 'variable()' method on the given DataFactory`);\n            }\n            return dataFactory.variable(value.slice(1));\n        case '\"': {\n            const language = getLiteralLanguage(value);\n            const type = dataFactory.namedNode(getLiteralType(value));\n            return dataFactory.literal(getLiteralValue(value), language || type);\n        }\n        case '<':\n        default:\n            if (value.startsWith('<<') && value.endsWith('>>')) {\n                // Iterate character-by-character to detect spaces that are *not* wrapped in <<>>\n                const terms = value.slice(2, -2);\n                const stringTerms = [];\n                let ignoreTags = 0;\n                let lastIndex = 0;\n                for (let i = 0; i < terms.length; i++) {\n                    const char = terms[i];\n                    if (char === '<') {\n                        ignoreTags++;\n                    }\n                    if (char === '>') {\n                        if (ignoreTags === 0) {\n                            throw new Error(`Found closing tag without opening tag in ${value}`);\n                        }\n                        else {\n                            ignoreTags--;\n                        }\n                    }\n                    if (char === ' ' && ignoreTags === 0) {\n                        stringTerms.push(terms.slice(lastIndex, i));\n                        lastIndex = i + 1;\n                    }\n                }\n                if (ignoreTags !== 0) {\n                    throw new Error(`Found opening tag without closing tag in ${value}`);\n                }\n                stringTerms.push(terms.slice(lastIndex, terms.length));\n                // We require 3 or 4 components\n                if (stringTerms.length !== 3 && stringTerms.length !== 4) {\n                    throw new Error(`Nested quad syntax error ${value}`);\n                }\n                return dataFactory.quad(stringToTerm(stringTerms[0]), stringToTerm(stringTerms[1]), stringToTerm(stringTerms[2]), stringTerms[3] ? stringToTerm(stringTerms[3]) : undefined);\n            }\n            if (!value.startsWith('<') || !value.endsWith('>')) {\n                throw new Error(`Detected invalid iri for named node (must be wrapped in <>): ${value}`);\n            }\n            return dataFactory.namedNode(value.slice(1, -1));\n    }\n}\nexports.stringToTerm = stringToTerm;\n/**\n * Convert an RDFJS quad to a string-based quad representation.\n * @param {Quad} q An RDFJS quad.\n * @return {IStringQuad} A hash with string-based quad terms.\n * @template Q The type of quad, defaults to RDF.Quad.\n */\nfunction quadToStringQuad(quad) {\n    return {\n        subject: termToString(quad.subject),\n        predicate: termToString(quad.predicate),\n        object: termToString(quad.object),\n        graph: termToString(quad.graph),\n    };\n}\nexports.quadToStringQuad = quadToStringQuad;\n/**\n * Convert a string-based quad representation to an RDFJS quad.\n * @param {IStringQuad} stringQuad A hash with string-based quad terms.\n * @param {RDF.DataFactory} dataFactory An optional datafactory to create terms with.\n * @return {Q} An RDFJS quad.\n * @template Q The type of quad, defaults to RDF.Quad.\n */\nfunction stringQuadToQuad(stringQuad, dataFactory) {\n    dataFactory = dataFactory || FACTORY;\n    return dataFactory.quad(stringToTerm(stringQuad.subject, dataFactory), stringToTerm(stringQuad.predicate, dataFactory), stringToTerm(stringQuad.object, dataFactory), stringToTerm(stringQuad.graph, dataFactory));\n}\nexports.stringQuadToQuad = stringQuadToQuad;\nfunction escapeIRI(iriValue) {\n    return iriValue.replace(escapePattern, replaceEscapedCharacter);\n}\nfunction escapeStringRDF(stringValue) {\n    if (escapePattern.test(stringValue)) {\n        stringValue = stringValue.replace(escapePattern, replaceEscapedCharacter);\n    }\n    return stringValue;\n}\n// Characters in literals and IRIs that require escaping\n// Also containing potential surrogate pairs\n/* eslint-disable require-unicode-regexp */ /* eslint-disable unicorn/better-regex */\nconst escapePattern = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n/* eslint-enable require-unicode-regexp */ /* eslint-enable unicorn/better-regex */\nconst escapes = new Map([\n    ['\\\\', '\\\\\\\\'],\n    ['\"', '\\\\\"'],\n    ['\\t', '\\\\t'],\n    ['\\n', '\\\\n'],\n    ['\\r', '\\\\r'],\n    ['\\b', '\\\\b'],\n    ['\\f', '\\\\f'],\n]);\nfunction replaceEscapedCharacter(character) {\n    // Try simplest case first, get replacement for character\n    const result = escapes.get(character);\n    if (!result) {\n        if (character.length === 1) {\n            // Single unicode charachters, i.e. not a surrogate pair\n            const code = character.charCodeAt(0).toString(16);\n            return `${'\\\\u0000'.slice(0, -code.length)}${code}`;\n        }\n        // Surrogate pairs\n        const code = ((character.charCodeAt(0) - 55296) * 1024 + character.charCodeAt(1) + 9216).toString(16);\n        return `${'\\\\U00000000'.slice(0, -code.length)}${code}`;\n    }\n    return result;\n}\n//# sourceMappingURL=TermUtil.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.termToString = exports.stringToTerm = exports.stringQuadToQuad = exports.quadToStringQuad = exports.getLiteralValue = exports.getLiteralType = exports.getLiteralLanguage = void 0;\nconst TermUtil_1 = require(\"./lib/TermUtil\");\nObject.defineProperty(exports, \"getLiteralLanguage\", { enumerable: true, get: function () { return TermUtil_1.getLiteralLanguage; } });\nObject.defineProperty(exports, \"getLiteralType\", { enumerable: true, get: function () { return TermUtil_1.getLiteralType; } });\nObject.defineProperty(exports, \"getLiteralValue\", { enumerable: true, get: function () { return TermUtil_1.getLiteralValue; } });\nObject.defineProperty(exports, \"quadToStringQuad\", { enumerable: true, get: function () { return TermUtil_1.quadToStringQuad; } });\nObject.defineProperty(exports, \"stringQuadToQuad\", { enumerable: true, get: function () { return TermUtil_1.stringQuadToQuad; } });\nObject.defineProperty(exports, \"stringToTerm\", { enumerable: true, get: function () { return TermUtil_1.stringToTerm; } });\nObject.defineProperty(exports, \"termToString\", { enumerable: true, get: function () { return TermUtil_1.termToString; } });\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringQuadToQuad = exports.quadToStringQuad = exports.stringToTerm = exports.getLiteralLanguage = exports.getLiteralType = exports.getLiteralValue = exports.termToString = void 0;\nconst rdf_data_factory_1 = require(\"rdf-data-factory\");\nconst FACTORY = new rdf_data_factory_1.DataFactory();\n/**\n * Utility methods for converting between string-based RDF representations and RDFJS objects.\n *\n * RDF Terms are represented as follows:\n * * Blank nodes: '_:myBlankNode'\n * * Variables:   '?myVariable'\n * * Literals:    '\"myString\"', '\"myLanguageString\"@en-us', '\"3\"^^xsd:number'\n * * URIs:        'http://example.org'\n *\n * Quads/triples are represented as hashes with 'subject', 'predicate', 'object' and 'graph' (optional)\n * as keys, and string-based RDF terms as values.\n */\n/**\n * Convert an RDFJS term to a string-based representation.\n * @param {RDF.Term} term An RDFJS term.\n * @return {string} A string-based term representation.\n */\nfunction termToString(term) {\n    // TODO: remove nasty any casts when this TS bug has been fixed: https://github.com/microsoft/TypeScript/issues/26933\n    if (!term) {\n        return undefined;\n    }\n    switch (term.termType) {\n        case 'NamedNode': return term.value;\n        case 'BlankNode': return ('_:' + term.value);\n        case 'Literal':\n            const literalValue = term;\n            return ('\"' + literalValue.value + '\"' +\n                (literalValue.datatype &&\n                    literalValue.datatype.value !== 'http://www.w3.org/2001/XMLSchema#string' &&\n                    literalValue.datatype.value !== 'http://www.w3.org/1999/02/22-rdf-syntax-ns#langString' ?\n                    '^^' + literalValue.datatype.value : '') +\n                (literalValue.language ? '@' + literalValue.language : ''));\n        case 'Quad': return `<<${termToString(term.subject)} ${termToString(term.predicate)} ${termToString(term.object)}${term.graph.termType === 'DefaultGraph' ? '' : ' ' + termToString(term.graph)}>>`;\n        case 'Variable': return ('?' + term.value);\n        case 'DefaultGraph': return term.value;\n    }\n}\nexports.termToString = termToString;\n/**\n * Get the string value of a literal.\n * @param {string} literalValue An RDF literal enclosed by '\"'.\n * @return {string} The literal value inside the '\"'.\n */\nfunction getLiteralValue(literalValue) {\n    const match = /^\"([^]*)\"/.exec(literalValue);\n    if (!match) {\n        throw new Error(literalValue + ' is not a literal');\n    }\n    return match[1];\n}\nexports.getLiteralValue = getLiteralValue;\n/**\n * Get the datatype of the given literal.\n * @param {string} literalValue An RDF literal.\n * @return {string} The datatype of the literal.\n */\nfunction getLiteralType(literalValue) {\n    const match = /^\"[^]*\"(?:\\^\\^([^\"]+)|(@)[^@\"]+)?$/.exec(literalValue);\n    if (!match) {\n        throw new Error(literalValue + ' is not a literal');\n    }\n    return match[1] || (match[2]\n        ? 'http://www.w3.org/1999/02/22-rdf-syntax-ns#langString' : 'http://www.w3.org/2001/XMLSchema#string');\n}\nexports.getLiteralType = getLiteralType;\n/**\n * Get the language of the given literal.\n * @param {string} literalValue An RDF literal.\n * @return {string} The language of the literal.\n */\nfunction getLiteralLanguage(literalValue) {\n    const match = /^\"[^]*\"(?:@([^@\"]+)|\\^\\^[^\"]+)?$/.exec(literalValue);\n    if (!match) {\n        throw new Error(literalValue + ' is not a literal');\n    }\n    return match[1] ? match[1].toLowerCase() : '';\n}\nexports.getLiteralLanguage = getLiteralLanguage;\n/**\n * Transform a string-based RDF term to an RDFJS term.\n * @param {string} value A string-based RDF-term.\n * @param {RDF.DataFactory} dataFactory An optional datafactory to create terms with.\n * @return {RDF.Term} An RDF-JS term.\n */\nfunction stringToTerm(value, dataFactory) {\n    dataFactory = dataFactory || FACTORY;\n    if (!value || !value.length) {\n        return dataFactory.defaultGraph();\n    }\n    switch (value[0]) {\n        case '_': return dataFactory.blankNode(value.substr(2));\n        case '?':\n            if (!dataFactory.variable) {\n                throw new Error(`Missing 'variable()' method on the given DataFactory`);\n            }\n            return dataFactory.variable(value.substr(1));\n        case '\"':\n            const language = getLiteralLanguage(value);\n            const type = dataFactory.namedNode(getLiteralType(value));\n            return dataFactory.literal(getLiteralValue(value), language || type);\n        case '<':\n        default:\n            if (value[0] === '<' && value.length > 4 && value[1] === '<' && value[value.length - 1] === '>' && value[value.length - 2] === '>') {\n                // Iterate character-by-character to detect spaces that are *not* wrapped in <<>>\n                const terms = value.slice(2, -2).trim();\n                let stringTerms = [];\n                let ignoreTags = 0;\n                let lastIndex = 0;\n                let inQuote = false;\n                for (let i = 0; i < terms.length; i++) {\n                    const char = terms[i];\n                    if (char === '<')\n                        ignoreTags++;\n                    if (char === '>') {\n                        if (ignoreTags === 0) {\n                            throw new Error('Found closing tag without opening tag in ' + value);\n                        }\n                        else {\n                            ignoreTags--;\n                        }\n                    }\n                    if (char === '\"') {\n                        let escaped = false;\n                        let j = i;\n                        while (j-- > 0 && terms[j] === '\\\\') {\n                            escaped = !escaped;\n                        }\n                        if (!escaped) {\n                            // We have reached an unescaped quote\n                            inQuote = !inQuote;\n                        }\n                    }\n                    if (char === ' ' && !inQuote && ignoreTags === 0) {\n                        stringTerms.push(terms.slice(lastIndex, i));\n                        while (terms[i + 1] === ' ') {\n                            i += 1;\n                        }\n                        lastIndex = i + 1;\n                    }\n                }\n                if (ignoreTags !== 0) {\n                    throw new Error('Found opening tag without closing tag in ' + value);\n                }\n                stringTerms.push(terms.slice(lastIndex, terms.length));\n                // We require 3 or 4 components\n                if (stringTerms.length !== 3 && stringTerms.length !== 4) {\n                    throw new Error('Nested quad syntax error ' + value);\n                }\n                stringTerms = stringTerms.map(term => term.startsWith('<') && !term.includes(' ') ? term.slice(1, -1) : term);\n                return dataFactory.quad(stringToTerm(stringTerms[0]), stringToTerm(stringTerms[1]), stringToTerm(stringTerms[2]), stringTerms[3] ? stringToTerm(stringTerms[3]) : undefined);\n            }\n            return dataFactory.namedNode(value);\n    }\n}\nexports.stringToTerm = stringToTerm;\n/**\n * Convert an RDFJS quad to a string-based quad representation.\n * @param {Quad} q An RDFJS quad.\n * @return {IStringQuad} A hash with string-based quad terms.\n * @template Q The type of quad, defaults to RDF.Quad.\n */\nfunction quadToStringQuad(q) {\n    // tslint:disable:object-literal-sort-keys\n    return {\n        subject: termToString(q.subject),\n        predicate: termToString(q.predicate),\n        object: termToString(q.object),\n        graph: termToString(q.graph),\n    };\n    // tslint:enable:object-literal-sort-keys\n}\nexports.quadToStringQuad = quadToStringQuad;\n/**\n * Convert a string-based quad representation to an RDFJS quad.\n * @param {IStringQuad} stringQuad A hash with string-based quad terms.\n * @param {RDF.DataFactory} dataFactory An optional datafactory to create terms with.\n * @return {Q} An RDFJS quad.\n * @template Q The type of quad, defaults to RDF.Quad.\n */\nfunction stringQuadToQuad(stringQuad, dataFactory) {\n    dataFactory = dataFactory || FACTORY;\n    return dataFactory.quad(stringToTerm(stringQuad.subject, dataFactory), stringToTerm(stringQuad.predicate, dataFactory), stringToTerm(stringQuad.object, dataFactory), stringToTerm(stringQuad.graph, dataFactory));\n}\nexports.stringQuadToQuad = stringQuadToQuad;\n//# sourceMappingURL=TermUtil.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/QuadTermUtil\"), exports);\n__exportStar(require(\"./lib/TermUtil\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.matchPatternMappings = exports.matchPatternComplete = exports.matchPattern = exports.matchTerm = exports.getValueNestedPath = exports.someTermsNested = exports.someTerms = exports.everyTermsNested = exports.everyTerms = exports.reduceTermsNested = exports.reduceTerms = exports.mapTermsNested = exports.mapTerms = exports.filterQuadTermNamesNested = exports.filterQuadTermNames = exports.filterTermsNested = exports.filterTerms = exports.forEachTermsNested = exports.forEachTerms = exports.collectNamedTerms = exports.getNamedTerms = exports.getTermsNested = exports.getTerms = exports.TRIPLE_TERM_NAMES = exports.QUAD_TERM_NAMES = void 0;\nconst rdf_data_factory_1 = require(\"rdf-data-factory\");\nconst DF = new rdf_data_factory_1.DataFactory();\n/**\n * All available quad term names.\n * @type {[string , string , string , string]}\n */\nexports.QUAD_TERM_NAMES = ['subject', 'predicate', 'object', 'graph'];\n/**\n * All available triple term names.\n * @type {[string , string , string]}\n */\nexports.TRIPLE_TERM_NAMES = ['subject', 'predicate', 'object'];\n/**\n * Get all terms in the given quad.\n * @param {BaseQuad} quad An RDFJS quad.\n * @param {boolean} ignoreDefaultGraph If true and the quad has the default graph as graph,\n *                                     this term will not be returned in the array.\n *                                     (default: false)\n * @return {Term[]} The available terms in the quad.\n */\nfunction getTerms(quad, ignoreDefaultGraph) {\n    if (ignoreDefaultGraph && quad.graph.termType === 'DefaultGraph') {\n        return [quad.subject, quad.predicate, quad.object];\n    }\n    return [quad.subject, quad.predicate, quad.object, quad.graph];\n}\nexports.getTerms = getTerms;\n/**\n * Get all terms in the given quad, including nested quads.\n * @param {BaseQuad} quad An RDFJS quad.\n * @param {boolean} ignoreDefaultGraph If true and the quad has the default graph as graph,\n *                                     this term will not be returned in the array.\n *                                     (default: false)\n * @return {Term[]} The available terms in the nested quad, excluding quad terms.\n */\nfunction getTermsNested(quad, ignoreDefaultGraph) {\n    const terms = [];\n    for (const term of getTerms(quad, ignoreDefaultGraph)) {\n        if (term.termType === 'Quad') {\n            getTermsNested(term, ignoreDefaultGraph).forEach(subTerm => terms.push(subTerm));\n        }\n        else {\n            terms.push(term);\n        }\n    }\n    return terms;\n}\nexports.getTermsNested = getTermsNested;\n/**\n * Convert the given quad to an array of named terms.\n * This is the reverse operation of {@link collectNamedTerms}.\n * @param {BaseQuad} quad An RDFJS quad.\n * @return {INamedTerm[]} An array of named terms.\n */\nfunction getNamedTerms(quad) {\n    return [\n        { key: 'subject', value: quad.subject },\n        { key: 'predicate', value: quad.predicate },\n        { key: 'object', value: quad.object },\n        { key: 'graph', value: quad.graph },\n    ];\n}\nexports.getNamedTerms = getNamedTerms;\n/**\n * Convert an array of named terms to an RDFJS quad.\n * This is the reverse operation of {@link getNamedTerms}.\n * @param {INamedTerm[]} namedTerms An array of named terms.\n * @param {(termName: QuadTermName) => Term} defaultCb An optional callback for when\n *                                                     certain terms are not available in the array.\n * @param {RDF.DataFactory} dataFactory A custom data factory to create quads.\n * @return {Q} The resulting RDFJS quad.\n * @template Q The type of quad to output, defaults to RDF.Quad.\n */\nfunction collectNamedTerms(namedTerms, defaultCb, dataFactory) {\n    const elements = {};\n    namedTerms.forEach((namedTerm) => elements[namedTerm.key] = namedTerm.value);\n    if (defaultCb) {\n        elements.subject = elements.subject || defaultCb('subject');\n        elements.predicate = elements.predicate || defaultCb('predicate');\n        elements.object = elements.object || defaultCb('object');\n        elements.graph = elements.graph || defaultCb('graph');\n    }\n    return (dataFactory || DF).quad(elements.subject, elements.predicate, elements.object, elements.graph);\n}\nexports.collectNamedTerms = collectNamedTerms;\n/**\n * Iterates over each term.\n * @param {BaseQuad} quad An RDFJS quad.\n * @param {(value: Term, key: QuadTermName} cb A callback function.\n */\nfunction forEachTerms(quad, cb) {\n    cb(quad.subject, 'subject');\n    cb(quad.predicate, 'predicate');\n    cb(quad.object, 'object');\n    cb(quad.graph, 'graph');\n}\nexports.forEachTerms = forEachTerms;\n/**\n * Iterates over each leaf term, while recursing into quoted triples.\n * @param {BaseQuad} quad An RDFJS quad.\n * @param {(value: Term, key: QuadTermName} cb A callback function.\n * @param QuadTermName[] keys The current key path.\n */\nfunction forEachTermsNested(quad, cb, keys = []) {\n    if (quad.subject.termType === 'Quad') {\n        forEachTermsNested(quad.subject, cb, [...keys, 'subject']);\n    }\n    else {\n        cb(quad.subject, [...keys, 'subject']);\n    }\n    if (quad.predicate.termType === 'Quad') {\n        forEachTermsNested(quad.predicate, cb, [...keys, 'predicate']);\n    }\n    else {\n        cb(quad.predicate, [...keys, 'predicate']);\n    }\n    if (quad.object.termType === 'Quad') {\n        forEachTermsNested(quad.object, cb, [...keys, 'object']);\n    }\n    else {\n        cb(quad.object, [...keys, 'object']);\n    }\n    if (quad.graph.termType === 'Quad') {\n        forEachTermsNested(quad.graph, cb, [...keys, 'graph']);\n    }\n    else {\n        cb(quad.graph, [...keys, 'graph']);\n    }\n}\nexports.forEachTermsNested = forEachTermsNested;\n/**\n * Get all terms in the given quad that return true on the given filter function.\n * @param {BaseQuad} quad A quad.\n * @param {(value: Term, key: QuadTermName) => boolean} filter A filter callback.\n * @return {Term[]} The list of matching terms.\n */\nfunction filterTerms(quad, filter) {\n    const terms = [];\n    if (filter(quad.subject, 'subject')) {\n        terms.push(quad.subject);\n    }\n    if (filter(quad.predicate, 'predicate')) {\n        terms.push(quad.predicate);\n    }\n    if (filter(quad.object, 'object')) {\n        terms.push(quad.object);\n    }\n    if (filter(quad.graph, 'graph')) {\n        terms.push(quad.graph);\n    }\n    return terms;\n}\nexports.filterTerms = filterTerms;\n/**\n * Get all terms in the given quad that return true on the given filter function, while recursing into quoted triples.\n * @param {BaseQuad} quad A quad.\n * @param {(value: Term, key: QuadTermName) => boolean} filter A filter callback.\n * @param QuadTermName[] keys The current key path.\n * @return {Term[]} The list of matching terms.\n */\nfunction filterTermsNested(quad, filter, keys = []) {\n    let terms = [];\n    if (quad.subject.termType === 'Quad') {\n        terms = [...terms, ...filterTermsNested(quad.subject, filter, [...keys, 'subject'])];\n    }\n    else {\n        if (filter(quad.subject, [...keys, 'subject'])) {\n            terms.push(quad.subject);\n        }\n    }\n    if (quad.predicate.termType === 'Quad') {\n        terms = [...terms, ...filterTermsNested(quad.predicate, filter, [...keys, 'predicate'])];\n    }\n    else {\n        if (filter(quad.predicate, [...keys, 'predicate'])) {\n            terms.push(quad.predicate);\n        }\n    }\n    if (quad.object.termType === 'Quad') {\n        terms = [...terms, ...filterTermsNested(quad.object, filter, [...keys, 'object'])];\n    }\n    else {\n        if (filter(quad.object, [...keys, 'object'])) {\n            terms.push(quad.object);\n        }\n    }\n    if (quad.graph.termType === 'Quad') {\n        terms = [...terms, ...filterTermsNested(quad.graph, filter, [...keys, 'graph'])];\n    }\n    else {\n        if (filter(quad.graph, [...keys, 'graph'])) {\n            terms.push(quad.graph);\n        }\n    }\n    return terms;\n}\nexports.filterTermsNested = filterTermsNested;\n/**\n * Get all quad term names in the given quad that return true on the given filter function.\n * @param {BaseQuad} quad A quad.\n * @param {(value: Term, key: QuadTermName, all: INamedTerm[]) => boolean} filter A filter callback.\n * @return {QuadTermName[]} The list of matching quad term names.\n */\nfunction filterQuadTermNames(quad, filter) {\n    const names = [];\n    if (filter(quad.subject, 'subject')) {\n        names.push('subject');\n    }\n    if (filter(quad.predicate, 'predicate')) {\n        names.push('predicate');\n    }\n    if (filter(quad.object, 'object')) {\n        names.push('object');\n    }\n    if (filter(quad.graph, 'graph')) {\n        names.push('graph');\n    }\n    return names;\n}\nexports.filterQuadTermNames = filterQuadTermNames;\n/**\n * Get all quad term names in the given quad that return true on the given filter function, while recursing into quoted triples.\n * @param {BaseQuad} quad A quad.\n * @param {(value: Term, key: QuadTermName, all: INamedTerm[]) => boolean} filter A filter callback.\n * @param QuadTermName[] keys The current key path.\n * @return {QuadTermName[]} The list of matching quad term names.\n */\nfunction filterQuadTermNamesNested(quad, filter, keys = []) {\n    let names = [];\n    const keysS = [...keys, 'subject'];\n    if (quad.subject.termType === 'Quad') {\n        names = [...names, ...filterQuadTermNamesNested(quad.subject, filter, keysS)];\n    }\n    else {\n        if (filter(quad.subject, keysS)) {\n            names.push(keysS);\n        }\n    }\n    const keysP = [...keys, 'predicate'];\n    if (quad.predicate.termType === 'Quad') {\n        names = [...names, ...filterQuadTermNamesNested(quad.predicate, filter, keysP)];\n    }\n    else {\n        if (filter(quad.predicate, keysP)) {\n            names.push(keysP);\n        }\n    }\n    const keysO = [...keys, 'object'];\n    if (quad.object.termType === 'Quad') {\n        names = [...names, ...filterQuadTermNamesNested(quad.object, filter, keysO)];\n    }\n    else {\n        if (filter(quad.object, keysO)) {\n            names.push(keysO);\n        }\n    }\n    const keysG = [...keys, 'graph'];\n    if (quad.graph.termType === 'Quad') {\n        names = [...names, ...filterQuadTermNamesNested(quad.graph, filter, keysG)];\n    }\n    else {\n        if (filter(quad.graph, keysG)) {\n            names.push(keysG);\n        }\n    }\n    return names;\n}\nexports.filterQuadTermNamesNested = filterQuadTermNamesNested;\n/**\n * Map all terms of a quad.\n * @param {Quad} quad An RDFJS quad.\n * @param {(value: Term, key: QuadTermName) => Term} mapper A mapper function.\n * @param {RDF.DataFactory} dataFactory A custom data factory to create quads.\n * @return {Quad} A new RDFJS quad.\n * @template Q The type of quad, defaults to RDF.Quad.\n */\nfunction mapTerms(quad, mapper, dataFactory) {\n    return (dataFactory || DF).quad(mapper(quad.subject, 'subject'), mapper(quad.predicate, 'predicate'), mapper(quad.object, 'object'), mapper(quad.graph, 'graph'));\n}\nexports.mapTerms = mapTerms;\n/**\n * Map all terms of a quad, while recursing into quoted triples.\n * @param {Quad} quad An RDFJS quad.\n * @param {(value: Term, key: QuadTermName) => Term} mapper A mapper function.\n * @param {RDF.DataFactory} dataFactory A custom data factory to create quads.\n * @param QuadTermName[] keys The current key path.\n * @return {Quad} A new RDFJS quad.\n * @template Q The type of quad, defaults to RDF.Quad.\n */\nfunction mapTermsNested(quad, mapper, dataFactory, keys = []) {\n    return (dataFactory || DF).quad(quad.subject.termType === 'Quad' ?\n        mapTermsNested(quad.subject, mapper, dataFactory, [...keys, 'subject']) :\n        mapper(quad.subject, [...keys, 'subject']), quad.predicate.termType === 'Quad' ?\n        mapTermsNested(quad.predicate, mapper, dataFactory, [...keys, 'predicate']) :\n        mapper(quad.predicate, [...keys, 'predicate']), quad.object.termType === 'Quad' ?\n        mapTermsNested(quad.object, mapper, dataFactory, [...keys, 'object']) :\n        mapper(quad.object, [...keys, 'object']), quad.graph.termType === 'Quad' ?\n        mapTermsNested(quad.graph, mapper, dataFactory, [...keys, 'graph']) :\n        mapper(quad.graph, [...keys, 'graph']));\n}\nexports.mapTermsNested = mapTermsNested;\n/**\n * Reduce all terms of a quad.\n * @param {BaseQuad} quad An RDFJS quad.\n * @param {(previousValue: U, currentValue: Term, key: QuadTermName) => U} reducer A reduce function.\n * @param {U} initialValue The initial value.\n * @return {U} The final value.\n */\nfunction reduceTerms(quad, reducer, initialValue) {\n    let value = initialValue;\n    value = reducer(value, quad.subject, 'subject');\n    value = reducer(value, quad.predicate, 'predicate');\n    value = reducer(value, quad.object, 'object');\n    return reducer(value, quad.graph, 'graph');\n}\nexports.reduceTerms = reduceTerms;\n/**\n * Reduce all terms of a quad, while recursing into quoted triples.\n * @param {BaseQuad} quad An RDFJS quad.\n * @param {(previousValue: U, currentValue: Term, key: QuadTermName) => U} reducer A reduce function.\n * @param {U} initialValue The initial value.\n * @param QuadTermName[] keys The current key path.\n * @return {U} The final value.\n */\nfunction reduceTermsNested(quad, reducer, initialValue, keys = []) {\n    let value = initialValue;\n    if (quad.subject.termType === 'Quad') {\n        value = reduceTermsNested(quad.subject, reducer, value, [...keys, 'subject']);\n    }\n    else {\n        value = reducer(value, quad.subject, [...keys, 'subject']);\n    }\n    if (quad.predicate.termType === 'Quad') {\n        value = reduceTermsNested(quad.predicate, reducer, value, [...keys, 'predicate']);\n    }\n    else {\n        value = reducer(value, quad.predicate, [...keys, 'predicate']);\n    }\n    if (quad.object.termType === 'Quad') {\n        value = reduceTermsNested(quad.object, reducer, value, [...keys, 'object']);\n    }\n    else {\n        value = reducer(value, quad.object, [...keys, 'object']);\n    }\n    if (quad.graph.termType === 'Quad') {\n        value = reduceTermsNested(quad.graph, reducer, value, [...keys, 'graph']);\n    }\n    else {\n        value = reducer(value, quad.graph, [...keys, 'graph']);\n    }\n    return value;\n}\nexports.reduceTermsNested = reduceTermsNested;\n/**\n * Determines whether all terms satisfy the specified test.\n * @param {BaseQuad} quad An RDFJS quad.\n * @param {(value: Term, key: QuadTermName} checker A checker function.\n * @return {boolean} If all terms satisfy the specified test.\n */\nfunction everyTerms(quad, checker) {\n    return checker(quad.subject, 'subject')\n        && checker(quad.predicate, 'predicate')\n        && checker(quad.object, 'object')\n        && checker(quad.graph, 'graph');\n}\nexports.everyTerms = everyTerms;\n/**\n * Determines whether all terms satisfy the specified test, while recursing into quoted triples.\n * @param {BaseQuad} quad An RDFJS quad.\n * @param {(value: Term, key: QuadTermName} checker A checker function.\n * @param QuadTermName[] keys The current key path.\n * @return {boolean} If all terms satisfy the specified test.\n */\nfunction everyTermsNested(quad, checker, keys = []) {\n    return (quad.subject.termType === 'Quad' ?\n        everyTermsNested(quad.subject, checker, [...keys, 'subject']) :\n        checker(quad.subject, [...keys, 'subject']))\n        && (quad.predicate.termType === 'Quad' ?\n            everyTermsNested(quad.predicate, checker, [...keys, 'predicate']) :\n            checker(quad.predicate, [...keys, 'predicate']))\n        && (quad.object.termType === 'Quad' ?\n            everyTermsNested(quad.object, checker, [...keys, 'object']) :\n            checker(quad.object, [...keys, 'object']))\n        && (quad.graph.termType === 'Quad' ?\n            everyTermsNested(quad.graph, checker, [...keys, 'graph']) :\n            checker(quad.graph, [...keys, 'graph']));\n}\nexports.everyTermsNested = everyTermsNested;\n/**\n * Determines whether at least one term satisfies the specified test.\n * @param {BaseQuad} quad An RDFJS quad.\n * @param {(value: Term, key: QuadTermName} checker A checker function.\n * @return {boolean} If at least one term satisfies the specified test.\n */\nfunction someTerms(quad, checker) {\n    return checker(quad.subject, 'subject')\n        || checker(quad.predicate, 'predicate')\n        || checker(quad.object, 'object')\n        || checker(quad.graph, 'graph');\n}\nexports.someTerms = someTerms;\n/**\n * Determines whether at least one term satisfies the specified test, while recursing into quoted triples.\n * @param {BaseQuad} quad An RDFJS quad.\n * @param {(value: Term, key: QuadTermName} checker A checker function.\n * @param QuadTermName[] keys The current key path.\n * @return {boolean} If at least one term satisfies the specified test.\n */\nfunction someTermsNested(quad, checker, keys = []) {\n    return (quad.subject.termType === 'Quad' ?\n        someTermsNested(quad.subject, checker, [...keys, 'subject']) :\n        checker(quad.subject, [...keys, 'subject']))\n        || (quad.predicate.termType === 'Quad' ?\n            someTermsNested(quad.predicate, checker, [...keys, 'predicate']) :\n            checker(quad.predicate, [...keys, 'predicate']))\n        || (quad.object.termType === 'Quad' ?\n            someTermsNested(quad.object, checker, [...keys, 'object']) :\n            checker(quad.object, [...keys, 'object']))\n        || (quad.graph.termType === 'Quad' ?\n            someTermsNested(quad.graph, checker, [...keys, 'graph']) :\n            checker(quad.graph, [...keys, 'graph']));\n}\nexports.someTermsNested = someTermsNested;\n/**\n * Get the nested value inside a quoted triple by the given path of quad keys.\n * @param term A term, that can be a quoted triple.\n * @param keys A path of quad term names.\n */\nfunction getValueNestedPath(term, keys) {\n    if (keys.length === 0) {\n        return term;\n    }\n    if (term.termType === 'Quad') {\n        return getValueNestedPath(term[keys[0]], keys.slice(1));\n    }\n    throw new Error(`Tried to get ${keys[0]} from term of type ${term.termType}`);\n}\nexports.getValueNestedPath = getValueNestedPath;\n/**\n * Check if the given terms match.\n *\n * At least one of the following must be true:\n * * Term B is undefined.\n * * Term B is a variable.\n * * Term A and B are quads, and return true for `matchPatternComplete`.\n * * Quad term and term are equal (`termB.equals(termA)` return true)\n *\n * @param termA A term.\n * @param termB An optional term.\n */\nfunction matchTerm(termA, termB) {\n    return !termB\n        || termB.termType === 'Variable'\n        || (termB.termType === 'Quad' && termA.termType === 'Quad' && matchPatternComplete(termA, termB))\n        || termB.equals(termA);\n}\nexports.matchTerm = matchTerm;\n/**\n * Check if the given quad matches with the given quad terms.\n *\n * Each term must match at least one of the following:\n * * Term is undefined.\n * * Term is a variable.\n * * Quad term and term are both quads, and return true for `matchPatternComplete`.\n * * Quad term and term are equal (`quadTerm.equals(term)` return true)\n *\n * @param {BaseQuad} quad A quad to match with (can not contain variables).\n * @param {Term} subject An optional subject.\n * @param {Term} predicate An optional predicate.\n * @param {Term} object An optional object.\n * @param {Term} graph An optional graph.\n * @return {boolean} If the quad matches with the quad terms.\n */\nfunction matchPattern(quad, subject, predicate, object, graph) {\n    return matchTerm(quad.subject, subject)\n        && matchTerm(quad.predicate, predicate)\n        && matchTerm(quad.object, object)\n        && matchTerm(quad.graph, graph);\n}\nexports.matchPattern = matchPattern;\n/**\n * Check if the first quad matches with all terms from the second quad.\n *\n * Each term must match at least one of the following:\n * * Quad2 term is a variable.\n * * Quad1 term and Quad2 term are equal (`term1.equals(term2)` return true)\n *\n * @param {BaseQuad} quad A quad (can not contain variables).\n * @param {BaseQuad} pattern A quad pattern (can contain variables).\n * @return {boolean} If the quad terms match.\n */\nfunction matchPatternComplete(quad, pattern) {\n    return matchPattern(quad, pattern.subject, pattern.predicate, pattern.object, pattern.graph);\n}\nexports.matchPatternComplete = matchPatternComplete;\nfunction matchPatternMappings(quad, pattern, opt = {}) {\n    const map = {};\n    function match(_pattern, _quad) {\n        return everyTerms(_pattern, (t1, key) => {\n            var _a, _b;\n            const t2 = _quad[key];\n            switch (t1.termType) {\n                case 'Variable':\n                    return (opt.skipVarMapping && t2.termType === 'Variable')\n                        || ((_b = (_a = map[t1.value]) === null || _a === void 0 ? void 0 : _a.equals(t2)) !== null && _b !== void 0 ? _b : (map[t1.value] = t2, true));\n                case 'Quad':\n                    return t2.termType === 'Quad' && match(t1, t2);\n                default:\n                    return t1.equals(t2);\n            }\n        });\n    }\n    return match(pattern, quad) && (opt.returnMappings ? map : true);\n}\nexports.matchPatternMappings = matchPatternMappings;\n//# sourceMappingURL=QuadTermUtil.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getQuads = exports.getDefaultGraphs = exports.getVariables = exports.getLiterals = exports.getBlankNodes = exports.getNamedNodes = exports.getTermsOfType = exports.uniqTerms = exports.TERM_TYPES = void 0;\nconst rdf_string_1 = require(\"rdf-string\");\n/**\n * All known term types.\n * @see RDF.Term\n * @type {[string , string , string , string , string, string]}\n */\nexports.TERM_TYPES = ['NamedNode', 'BlankNode', 'Literal', 'Variable', 'DefaultGraph', 'Quad'];\n/*\n * Utility methods for handling RDFJS terms.\n */\n/**\n * Create an array of unique terms from the given array.\n * @param {T[]} terms An array of RDFJS terms.\n * @return {T[]} A new array of unique RDFJS terms.\n */\nfunction uniqTerms(terms) {\n    const hash = {};\n    return terms.filter(term => {\n        const termString = (0, rdf_string_1.termToString)(term);\n        return !(termString in hash) && (hash[termString] = true);\n    });\n}\nexports.uniqTerms = uniqTerms;\n/**\n * Find all terms of the given type in the given array.\n * @param {Term[]} terms An array of RDFJS terms.\n * @param {\"NamedNode\" | \"BlankNode\" | \"Literal\" | \"Variable\" | \"DefaultGraph\" | \"Quad\"} termType A term type.\n * @return {Term[]} A new array with elements from the given array only containing elements of the given type.\n */\nfunction getTermsOfType(terms, termType) {\n    return terms.filter((term) => term.termType === termType);\n}\nexports.getTermsOfType = getTermsOfType;\n/**\n * Find all named nodes in the given array.\n * @param {Term[]} terms An array of RDFJS terms.\n * @return {NamedNode[]} A new array with elements from the given array only containing named nodes.\n */\nfunction getNamedNodes(terms) {\n    return getTermsOfType(terms, 'NamedNode');\n}\nexports.getNamedNodes = getNamedNodes;\n/**\n * Find all blank nodes in the given array.\n * @param {Term[]} terms An array of RDFJS terms.\n * @return {BlankNode[]} A new array with elements from the given array only containing blank nodes.\n */\nfunction getBlankNodes(terms) {\n    return getTermsOfType(terms, 'BlankNode');\n}\nexports.getBlankNodes = getBlankNodes;\n/**\n * Find all literals in the given array.\n * @param {Term[]} terms An array of RDFJS terms.\n * @return {Literal[]} A new array with elements from the given array only containing literals.\n */\nfunction getLiterals(terms) {\n    return getTermsOfType(terms, 'Literal');\n}\nexports.getLiterals = getLiterals;\n/**\n * Find all variables in the given array.\n * @param {Term[]} terms An array of RDFJS terms.\n * @return {Variable[]} A new array with elements from the given array only containing variables.\n */\nfunction getVariables(terms) {\n    return getTermsOfType(terms, 'Variable');\n}\nexports.getVariables = getVariables;\n/**\n * Find all default graphs in the given array.\n * @param {Term[]} terms An array of RDFJS terms.\n * @return {DefaultGraph[]} A new array with elements from the given array only containing default graphs.\n */\nfunction getDefaultGraphs(terms) {\n    return getTermsOfType(terms, 'DefaultGraph');\n}\nexports.getDefaultGraphs = getDefaultGraphs;\n/**\n * Find all quads in the given array.\n * @param {Term[]} terms An array of RDFJS terms.\n * @return {BaseQuad[]} A new array with elements from the given array only containing quads.\n */\nfunction getQuads(terms) {\n    return getTermsOfType(terms, 'Quad');\n}\nexports.getQuads = getQuads;\n//# sourceMappingURL=TermUtil.js.map","'use strict'\n\nconst { SymbolDispose } = require('../../ours/primordials')\nconst { AbortError, codes } = require('../../ours/errors')\nconst { isNodeStream, isWebStream, kControllerErrorFunction } = require('./utils')\nconst eos = require('./end-of-stream')\nconst { ERR_INVALID_ARG_TYPE } = codes\nlet addAbortListener\n\n// This method is inlined here for readable-stream\n// It also does not allow for signal to not exist on the stream\n// https://github.com/nodejs/node/pull/36061#discussion_r533718029\nconst validateAbortSignal = (signal, name) => {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n}\nmodule.exports.addAbortSignal = function addAbortSignal(signal, stream) {\n  validateAbortSignal(signal, 'signal')\n  if (!isNodeStream(stream) && !isWebStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', ['ReadableStream', 'WritableStream', 'Stream'], stream)\n  }\n  return module.exports.addAbortSignalNoValidate(signal, stream)\n}\nmodule.exports.addAbortSignalNoValidate = function (signal, stream) {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    return stream\n  }\n  const onAbort = isNodeStream(stream)\n    ? () => {\n        stream.destroy(\n          new AbortError(undefined, {\n            cause: signal.reason\n          })\n        )\n      }\n    : () => {\n        stream[kControllerErrorFunction](\n          new AbortError(undefined, {\n            cause: signal.reason\n          })\n        )\n      }\n  if (signal.aborted) {\n    onAbort()\n  } else {\n    addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n    const disposable = addAbortListener(signal, onAbort)\n    eos(stream, disposable[SymbolDispose])\n  }\n  return stream\n}\n","'use strict'\n\nconst { StringPrototypeSlice, SymbolIterator, TypedArrayPrototypeSet, Uint8Array } = require('../../ours/primordials')\nconst { Buffer } = require('buffer')\nconst { inspect } = require('../../ours/util')\nmodule.exports = class BufferList {\n  constructor() {\n    this.head = null\n    this.tail = null\n    this.length = 0\n  }\n  push(v) {\n    const entry = {\n      data: v,\n      next: null\n    }\n    if (this.length > 0) this.tail.next = entry\n    else this.head = entry\n    this.tail = entry\n    ++this.length\n  }\n  unshift(v) {\n    const entry = {\n      data: v,\n      next: this.head\n    }\n    if (this.length === 0) this.tail = entry\n    this.head = entry\n    ++this.length\n  }\n  shift() {\n    if (this.length === 0) return\n    const ret = this.head.data\n    if (this.length === 1) this.head = this.tail = null\n    else this.head = this.head.next\n    --this.length\n    return ret\n  }\n  clear() {\n    this.head = this.tail = null\n    this.length = 0\n  }\n  join(s) {\n    if (this.length === 0) return ''\n    let p = this.head\n    let ret = '' + p.data\n    while ((p = p.next) !== null) ret += s + p.data\n    return ret\n  }\n  concat(n) {\n    if (this.length === 0) return Buffer.alloc(0)\n    const ret = Buffer.allocUnsafe(n >>> 0)\n    let p = this.head\n    let i = 0\n    while (p) {\n      TypedArrayPrototypeSet(ret, p.data, i)\n      i += p.data.length\n      p = p.next\n    }\n    return ret\n  }\n\n  // Consumes a specified amount of bytes or characters from the buffered data.\n  consume(n, hasStrings) {\n    const data = this.head.data\n    if (n < data.length) {\n      // `slice` is the same for buffers and strings.\n      const slice = data.slice(0, n)\n      this.head.data = data.slice(n)\n      return slice\n    }\n    if (n === data.length) {\n      // First chunk is a perfect match.\n      return this.shift()\n    }\n    // Result spans more than one buffer.\n    return hasStrings ? this._getString(n) : this._getBuffer(n)\n  }\n  first() {\n    return this.head.data\n  }\n  *[SymbolIterator]() {\n    for (let p = this.head; p; p = p.next) {\n      yield p.data\n    }\n  }\n\n  // Consumes a specified amount of characters from the buffered data.\n  _getString(n) {\n    let ret = ''\n    let p = this.head\n    let c = 0\n    do {\n      const str = p.data\n      if (n > str.length) {\n        ret += str\n        n -= str.length\n      } else {\n        if (n === str.length) {\n          ret += str\n          ++c\n          if (p.next) this.head = p.next\n          else this.head = this.tail = null\n        } else {\n          ret += StringPrototypeSlice(str, 0, n)\n          this.head = p\n          p.data = StringPrototypeSlice(str, n)\n        }\n        break\n      }\n      ++c\n    } while ((p = p.next) !== null)\n    this.length -= c\n    return ret\n  }\n\n  // Consumes a specified amount of bytes from the buffered data.\n  _getBuffer(n) {\n    const ret = Buffer.allocUnsafe(n)\n    const retLen = n\n    let p = this.head\n    let c = 0\n    do {\n      const buf = p.data\n      if (n > buf.length) {\n        TypedArrayPrototypeSet(ret, buf, retLen - n)\n        n -= buf.length\n      } else {\n        if (n === buf.length) {\n          TypedArrayPrototypeSet(ret, buf, retLen - n)\n          ++c\n          if (p.next) this.head = p.next\n          else this.head = this.tail = null\n        } else {\n          TypedArrayPrototypeSet(ret, new Uint8Array(buf.buffer, buf.byteOffset, n), retLen - n)\n          this.head = p\n          p.data = buf.slice(n)\n        }\n        break\n      }\n      ++c\n    } while ((p = p.next) !== null)\n    this.length -= c\n    return ret\n  }\n\n  // Make sure the linked list only shows the minimal necessary information.\n  [Symbol.for('nodejs.util.inspect.custom')](_, options) {\n    return inspect(this, {\n      ...options,\n      // Only inspect one level.\n      depth: 0,\n      // It should not recurse.\n      customInspect: false\n    })\n  }\n}\n","'use strict'\n\nconst { pipeline } = require('./pipeline')\nconst Duplex = require('./duplex')\nconst { destroyer } = require('./destroy')\nconst {\n  isNodeStream,\n  isReadable,\n  isWritable,\n  isWebStream,\n  isTransformStream,\n  isWritableStream,\n  isReadableStream\n} = require('./utils')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_VALUE, ERR_MISSING_ARGS }\n} = require('../../ours/errors')\nconst eos = require('./end-of-stream')\nmodule.exports = function compose(...streams) {\n  if (streams.length === 0) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  if (streams.length === 1) {\n    return Duplex.from(streams[0])\n  }\n  const orgStreams = [...streams]\n  if (typeof streams[0] === 'function') {\n    streams[0] = Duplex.from(streams[0])\n  }\n  if (typeof streams[streams.length - 1] === 'function') {\n    const idx = streams.length - 1\n    streams[idx] = Duplex.from(streams[idx])\n  }\n  for (let n = 0; n < streams.length; ++n) {\n    if (!isNodeStream(streams[n]) && !isWebStream(streams[n])) {\n      // TODO(ronag): Add checks for non streams.\n      continue\n    }\n    if (\n      n < streams.length - 1 &&\n      !(isReadable(streams[n]) || isReadableStream(streams[n]) || isTransformStream(streams[n]))\n    ) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be readable')\n    }\n    if (n > 0 && !(isWritable(streams[n]) || isWritableStream(streams[n]) || isTransformStream(streams[n]))) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be writable')\n    }\n  }\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    } else if (!readable && !writable) {\n      d.destroy()\n    }\n  }\n  const head = streams[0]\n  const tail = pipeline(streams, onfinished)\n  const writable = !!(isWritable(head) || isWritableStream(head) || isTransformStream(head))\n  const readable = !!(isReadable(tail) || isReadableStream(tail) || isTransformStream(tail))\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplex({\n    // TODO (ronag): highWaterMark?\n    writableObjectMode: !!(head !== null && head !== undefined && head.writableObjectMode),\n    readableObjectMode: !!(tail !== null && tail !== undefined && tail.readableObjectMode),\n    writable,\n    readable\n  })\n  if (writable) {\n    if (isNodeStream(head)) {\n      d._write = function (chunk, encoding, callback) {\n        if (head.write(chunk, encoding)) {\n          callback()\n        } else {\n          ondrain = callback\n        }\n      }\n      d._final = function (callback) {\n        head.end()\n        onfinish = callback\n      }\n      head.on('drain', function () {\n        if (ondrain) {\n          const cb = ondrain\n          ondrain = null\n          cb()\n        }\n      })\n    } else if (isWebStream(head)) {\n      const writable = isTransformStream(head) ? head.writable : head\n      const writer = writable.getWriter()\n      d._write = async function (chunk, encoding, callback) {\n        try {\n          await writer.ready\n          writer.write(chunk).catch(() => {})\n          callback()\n        } catch (err) {\n          callback(err)\n        }\n      }\n      d._final = async function (callback) {\n        try {\n          await writer.ready\n          writer.close().catch(() => {})\n          onfinish = callback\n        } catch (err) {\n          callback(err)\n        }\n      }\n    }\n    const toRead = isTransformStream(tail) ? tail.readable : tail\n    eos(toRead, () => {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    if (isNodeStream(tail)) {\n      tail.on('readable', function () {\n        if (onreadable) {\n          const cb = onreadable\n          onreadable = null\n          cb()\n        }\n      })\n      tail.on('end', function () {\n        d.push(null)\n      })\n      d._read = function () {\n        while (true) {\n          const buf = tail.read()\n          if (buf === null) {\n            onreadable = d._read\n            return\n          }\n          if (!d.push(buf)) {\n            return\n          }\n        }\n      }\n    } else if (isWebStream(tail)) {\n      const readable = isTransformStream(tail) ? tail.readable : tail\n      const reader = readable.getReader()\n      d._read = async function () {\n        while (true) {\n          try {\n            const { value, done } = await reader.read()\n            if (!d.push(value)) {\n              return\n            }\n            if (done) {\n              d.push(null)\n              return\n            }\n          } catch {\n            return\n          }\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      if (isNodeStream(tail)) {\n        destroyer(tail, err)\n      }\n    }\n  }\n  return d\n}\n","'use strict'\n\n/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\nconst {\n  aggregateTwoErrors,\n  codes: { ERR_MULTIPLE_CALLBACK },\n  AbortError\n} = require('../../ours/errors')\nconst { Symbol } = require('../../ours/primordials')\nconst { kIsDestroyed, isDestroyed, isFinished, isServerRequest } = require('./utils')\nconst kDestroy = Symbol('kDestroy')\nconst kConstruct = Symbol('kConstruct')\nfunction checkError(err, w, r) {\n  if (err) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    err.stack // eslint-disable-line no-unused-expressions\n\n    if (w && !w.errored) {\n      w.errored = err\n    }\n    if (r && !r.errored) {\n      r.errored = err\n    }\n  }\n}\n\n// Backwards compat. cb() is undocumented and unused in core but\n// unfortunately might be used by modules.\nfunction destroy(err, cb) {\n  const r = this._readableState\n  const w = this._writableState\n  // With duplex streams we use the writable side for state.\n  const s = w || r\n  if ((w !== null && w !== undefined && w.destroyed) || (r !== null && r !== undefined && r.destroyed)) {\n    if (typeof cb === 'function') {\n      cb()\n    }\n    return this\n  }\n\n  // We set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n  checkError(err, w, r)\n  if (w) {\n    w.destroyed = true\n  }\n  if (r) {\n    r.destroyed = true\n  }\n\n  // If still constructing then defer calling _destroy.\n  if (!s.constructed) {\n    this.once(kDestroy, function (er) {\n      _destroy(this, aggregateTwoErrors(er, err), cb)\n    })\n  } else {\n    _destroy(this, err, cb)\n  }\n  return this\n}\nfunction _destroy(self, err, cb) {\n  let called = false\n  function onDestroy(err) {\n    if (called) {\n      return\n    }\n    called = true\n    const r = self._readableState\n    const w = self._writableState\n    checkError(err, w, r)\n    if (w) {\n      w.closed = true\n    }\n    if (r) {\n      r.closed = true\n    }\n    if (typeof cb === 'function') {\n      cb(err)\n    }\n    if (err) {\n      process.nextTick(emitErrorCloseNT, self, err)\n    } else {\n      process.nextTick(emitCloseNT, self)\n    }\n  }\n  try {\n    self._destroy(err || null, onDestroy)\n  } catch (err) {\n    onDestroy(err)\n  }\n}\nfunction emitErrorCloseNT(self, err) {\n  emitErrorNT(self, err)\n  emitCloseNT(self)\n}\nfunction emitCloseNT(self) {\n  const r = self._readableState\n  const w = self._writableState\n  if (w) {\n    w.closeEmitted = true\n  }\n  if (r) {\n    r.closeEmitted = true\n  }\n  if ((w !== null && w !== undefined && w.emitClose) || (r !== null && r !== undefined && r.emitClose)) {\n    self.emit('close')\n  }\n}\nfunction emitErrorNT(self, err) {\n  const r = self._readableState\n  const w = self._writableState\n  if ((w !== null && w !== undefined && w.errorEmitted) || (r !== null && r !== undefined && r.errorEmitted)) {\n    return\n  }\n  if (w) {\n    w.errorEmitted = true\n  }\n  if (r) {\n    r.errorEmitted = true\n  }\n  self.emit('error', err)\n}\nfunction undestroy() {\n  const r = this._readableState\n  const w = this._writableState\n  if (r) {\n    r.constructed = true\n    r.closed = false\n    r.closeEmitted = false\n    r.destroyed = false\n    r.errored = null\n    r.errorEmitted = false\n    r.reading = false\n    r.ended = r.readable === false\n    r.endEmitted = r.readable === false\n  }\n  if (w) {\n    w.constructed = true\n    w.destroyed = false\n    w.closed = false\n    w.closeEmitted = false\n    w.errored = null\n    w.errorEmitted = false\n    w.finalCalled = false\n    w.prefinished = false\n    w.ended = w.writable === false\n    w.ending = w.writable === false\n    w.finished = w.writable === false\n  }\n}\nfunction errorOrDestroy(stream, err, sync) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  const r = stream._readableState\n  const w = stream._writableState\n  if ((w !== null && w !== undefined && w.destroyed) || (r !== null && r !== undefined && r.destroyed)) {\n    return this\n  }\n  if ((r !== null && r !== undefined && r.autoDestroy) || (w !== null && w !== undefined && w.autoDestroy))\n    stream.destroy(err)\n  else if (err) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    err.stack // eslint-disable-line no-unused-expressions\n\n    if (w && !w.errored) {\n      w.errored = err\n    }\n    if (r && !r.errored) {\n      r.errored = err\n    }\n    if (sync) {\n      process.nextTick(emitErrorNT, stream, err)\n    } else {\n      emitErrorNT(stream, err)\n    }\n  }\n}\nfunction construct(stream, cb) {\n  if (typeof stream._construct !== 'function') {\n    return\n  }\n  const r = stream._readableState\n  const w = stream._writableState\n  if (r) {\n    r.constructed = false\n  }\n  if (w) {\n    w.constructed = false\n  }\n  stream.once(kConstruct, cb)\n  if (stream.listenerCount(kConstruct) > 1) {\n    // Duplex\n    return\n  }\n  process.nextTick(constructNT, stream)\n}\nfunction constructNT(stream) {\n  let called = false\n  function onConstruct(err) {\n    if (called) {\n      errorOrDestroy(stream, err !== null && err !== undefined ? err : new ERR_MULTIPLE_CALLBACK())\n      return\n    }\n    called = true\n    const r = stream._readableState\n    const w = stream._writableState\n    const s = w || r\n    if (r) {\n      r.constructed = true\n    }\n    if (w) {\n      w.constructed = true\n    }\n    if (s.destroyed) {\n      stream.emit(kDestroy, err)\n    } else if (err) {\n      errorOrDestroy(stream, err, true)\n    } else {\n      process.nextTick(emitConstructNT, stream)\n    }\n  }\n  try {\n    stream._construct((err) => {\n      process.nextTick(onConstruct, err)\n    })\n  } catch (err) {\n    process.nextTick(onConstruct, err)\n  }\n}\nfunction emitConstructNT(stream) {\n  stream.emit(kConstruct)\n}\nfunction isRequest(stream) {\n  return (stream === null || stream === undefined ? undefined : stream.setHeader) && typeof stream.abort === 'function'\n}\nfunction emitCloseLegacy(stream) {\n  stream.emit('close')\n}\nfunction emitErrorCloseLegacy(stream, err) {\n  stream.emit('error', err)\n  process.nextTick(emitCloseLegacy, stream)\n}\n\n// Normalize destroy for legacy.\nfunction destroyer(stream, err) {\n  if (!stream || isDestroyed(stream)) {\n    return\n  }\n  if (!err && !isFinished(stream)) {\n    err = new AbortError()\n  }\n\n  // TODO: Remove isRequest branches.\n  if (isServerRequest(stream)) {\n    stream.socket = null\n    stream.destroy(err)\n  } else if (isRequest(stream)) {\n    stream.abort()\n  } else if (isRequest(stream.req)) {\n    stream.req.abort()\n  } else if (typeof stream.destroy === 'function') {\n    stream.destroy(err)\n  } else if (typeof stream.close === 'function') {\n    // TODO: Don't lose err?\n    stream.close()\n  } else if (err) {\n    process.nextTick(emitErrorCloseLegacy, stream, err)\n  } else {\n    process.nextTick(emitCloseLegacy, stream)\n  }\n  if (!stream.destroyed) {\n    stream[kIsDestroyed] = true\n  }\n}\nmodule.exports = {\n  construct,\n  destroyer,\n  destroy,\n  undestroy,\n  errorOrDestroy\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototype inheritance, this class\n// prototypically inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict'\n\nconst {\n  ObjectDefineProperties,\n  ObjectGetOwnPropertyDescriptor,\n  ObjectKeys,\n  ObjectSetPrototypeOf\n} = require('../../ours/primordials')\nmodule.exports = Duplex\nconst Readable = require('./readable')\nconst Writable = require('./writable')\nObjectSetPrototypeOf(Duplex.prototype, Readable.prototype)\nObjectSetPrototypeOf(Duplex, Readable)\n{\n  const keys = ObjectKeys(Writable.prototype)\n  // Allow the keys array to be GC'ed.\n  for (let i = 0; i < keys.length; i++) {\n    const method = keys[i]\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method]\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options)\n  Readable.call(this, options)\n  Writable.call(this, options)\n  if (options) {\n    this.allowHalfOpen = options.allowHalfOpen !== false\n    if (options.readable === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if (options.writable === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  } else {\n    this.allowHalfOpen = true\n  }\n}\nObjectDefineProperties(Duplex.prototype, {\n  writable: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writable')\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableHighWaterMark')\n  },\n  writableObjectMode: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableObjectMode')\n  },\n  writableBuffer: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableBuffer')\n  },\n  writableLength: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableLength')\n  },\n  writableFinished: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableFinished')\n  },\n  writableCorked: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableCorked')\n  },\n  writableEnded: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableEnded')\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableNeedDrain')\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      if (this._readableState === undefined || this._writableState === undefined) {\n        return false\n      }\n      return this._readableState.destroyed && this._writableState.destroyed\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      if (this._readableState && this._writableState) {\n        this._readableState.destroyed = value\n        this._writableState.destroyed = value\n      }\n    }\n  }\n})\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nDuplex.fromWeb = function (pair, options) {\n  return lazyWebStreams().newStreamDuplexFromReadableWritablePair(pair, options)\n}\nDuplex.toWeb = function (duplex) {\n  return lazyWebStreams().newReadableWritablePairFromDuplex(duplex)\n}\nlet duplexify\nDuplex.from = function (body) {\n  if (!duplexify) {\n    duplexify = require('./duplexify')\n  }\n  return duplexify(body, 'body')\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\n;('use strict')\nconst bufferModule = require('buffer')\nconst {\n  isReadable,\n  isWritable,\n  isIterable,\n  isNodeStream,\n  isReadableNodeStream,\n  isWritableNodeStream,\n  isDuplexNodeStream,\n  isReadableStream,\n  isWritableStream\n} = require('./utils')\nconst eos = require('./end-of-stream')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_TYPE, ERR_INVALID_RETURN_VALUE }\n} = require('../../ours/errors')\nconst { destroyer } = require('./destroy')\nconst Duplex = require('./duplex')\nconst Readable = require('./readable')\nconst Writable = require('./writable')\nconst { createDeferredPromise } = require('../../ours/util')\nconst from = require('./from')\nconst Blob = globalThis.Blob || bufferModule.Blob\nconst isBlob =\n  typeof Blob !== 'undefined'\n    ? function isBlob(b) {\n        return b instanceof Blob\n      }\n    : function isBlob(b) {\n        return false\n      }\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst { FunctionPrototypeCall } = require('../../ours/primordials')\n\n// This is needed for pre node 17.\nclass Duplexify extends Duplex {\n  constructor(options) {\n    super(options)\n\n    // https://github.com/nodejs/node/pull/34385\n\n    if ((options === null || options === undefined ? undefined : options.readable) === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if ((options === null || options === undefined ? undefined : options.writable) === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  }\n}\nmodule.exports = function duplexify(body, name) {\n  if (isDuplexNodeStream(body)) {\n    return body\n  }\n  if (isReadableNodeStream(body)) {\n    return _duplexify({\n      readable: body\n    })\n  }\n  if (isWritableNodeStream(body)) {\n    return _duplexify({\n      writable: body\n    })\n  }\n  if (isNodeStream(body)) {\n    return _duplexify({\n      writable: false,\n      readable: false\n    })\n  }\n  if (isReadableStream(body)) {\n    return _duplexify({\n      readable: Readable.fromWeb(body)\n    })\n  }\n  if (isWritableStream(body)) {\n    return _duplexify({\n      writable: Writable.fromWeb(body)\n    })\n  }\n  if (typeof body === 'function') {\n    const { value, write, final, destroy } = fromAsyncGen(body)\n    if (isIterable(value)) {\n      return from(Duplexify, value, {\n        // TODO (ronag): highWaterMark?\n        objectMode: true,\n        write,\n        final,\n        destroy\n      })\n    }\n    const then = value === null || value === undefined ? undefined : value.then\n    if (typeof then === 'function') {\n      let d\n      const promise = FunctionPrototypeCall(\n        then,\n        value,\n        (val) => {\n          if (val != null) {\n            throw new ERR_INVALID_RETURN_VALUE('nully', 'body', val)\n          }\n        },\n        (err) => {\n          destroyer(d, err)\n        }\n      )\n      return (d = new Duplexify({\n        // TODO (ronag): highWaterMark?\n        objectMode: true,\n        readable: false,\n        write,\n        final(cb) {\n          final(async () => {\n            try {\n              await promise\n              process.nextTick(cb, null)\n            } catch (err) {\n              process.nextTick(cb, err)\n            }\n          })\n        },\n        destroy\n      }))\n    }\n    throw new ERR_INVALID_RETURN_VALUE('Iterable, AsyncIterable or AsyncFunction', name, value)\n  }\n  if (isBlob(body)) {\n    return duplexify(body.arrayBuffer())\n  }\n  if (isIterable(body)) {\n    return from(Duplexify, body, {\n      // TODO (ronag): highWaterMark?\n      objectMode: true,\n      writable: false\n    })\n  }\n  if (\n    isReadableStream(body === null || body === undefined ? undefined : body.readable) &&\n    isWritableStream(body === null || body === undefined ? undefined : body.writable)\n  ) {\n    return Duplexify.fromWeb(body)\n  }\n  if (\n    typeof (body === null || body === undefined ? undefined : body.writable) === 'object' ||\n    typeof (body === null || body === undefined ? undefined : body.readable) === 'object'\n  ) {\n    const readable =\n      body !== null && body !== undefined && body.readable\n        ? isReadableNodeStream(body === null || body === undefined ? undefined : body.readable)\n          ? body === null || body === undefined\n            ? undefined\n            : body.readable\n          : duplexify(body.readable)\n        : undefined\n    const writable =\n      body !== null && body !== undefined && body.writable\n        ? isWritableNodeStream(body === null || body === undefined ? undefined : body.writable)\n          ? body === null || body === undefined\n            ? undefined\n            : body.writable\n          : duplexify(body.writable)\n        : undefined\n    return _duplexify({\n      readable,\n      writable\n    })\n  }\n  const then = body === null || body === undefined ? undefined : body.then\n  if (typeof then === 'function') {\n    let d\n    FunctionPrototypeCall(\n      then,\n      body,\n      (val) => {\n        if (val != null) {\n          d.push(val)\n        }\n        d.push(null)\n      },\n      (err) => {\n        destroyer(d, err)\n      }\n    )\n    return (d = new Duplexify({\n      objectMode: true,\n      writable: false,\n      read() {}\n    }))\n  }\n  throw new ERR_INVALID_ARG_TYPE(\n    name,\n    [\n      'Blob',\n      'ReadableStream',\n      'WritableStream',\n      'Stream',\n      'Iterable',\n      'AsyncIterable',\n      'Function',\n      '{ readable, writable } pair',\n      'Promise'\n    ],\n    body\n  )\n}\nfunction fromAsyncGen(fn) {\n  let { promise, resolve } = createDeferredPromise()\n  const ac = new AbortController()\n  const signal = ac.signal\n  const value = fn(\n    (async function* () {\n      while (true) {\n        const _promise = promise\n        promise = null\n        const { chunk, done, cb } = await _promise\n        process.nextTick(cb)\n        if (done) return\n        if (signal.aborted)\n          throw new AbortError(undefined, {\n            cause: signal.reason\n          })\n        ;({ promise, resolve } = createDeferredPromise())\n        yield chunk\n      }\n    })(),\n    {\n      signal\n    }\n  )\n  return {\n    value,\n    write(chunk, encoding, cb) {\n      const _resolve = resolve\n      resolve = null\n      _resolve({\n        chunk,\n        done: false,\n        cb\n      })\n    },\n    final(cb) {\n      const _resolve = resolve\n      resolve = null\n      _resolve({\n        done: true,\n        cb\n      })\n    },\n    destroy(err, cb) {\n      ac.abort()\n      cb(err)\n    }\n  }\n}\nfunction _duplexify(pair) {\n  const r = pair.readable && typeof pair.readable.read !== 'function' ? Readable.wrap(pair.readable) : pair.readable\n  const w = pair.writable\n  let readable = !!isReadable(r)\n  let writable = !!isWritable(w)\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    }\n  }\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplexify({\n    // TODO (ronag): highWaterMark?\n    readableObjectMode: !!(r !== null && r !== undefined && r.readableObjectMode),\n    writableObjectMode: !!(w !== null && w !== undefined && w.writableObjectMode),\n    readable,\n    writable\n  })\n  if (writable) {\n    eos(w, (err) => {\n      writable = false\n      if (err) {\n        destroyer(r, err)\n      }\n      onfinished(err)\n    })\n    d._write = function (chunk, encoding, callback) {\n      if (w.write(chunk, encoding)) {\n        callback()\n      } else {\n        ondrain = callback\n      }\n    }\n    d._final = function (callback) {\n      w.end()\n      onfinish = callback\n    }\n    w.on('drain', function () {\n      if (ondrain) {\n        const cb = ondrain\n        ondrain = null\n        cb()\n      }\n    })\n    w.on('finish', function () {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    eos(r, (err) => {\n      readable = false\n      if (err) {\n        destroyer(r, err)\n      }\n      onfinished(err)\n    })\n    r.on('readable', function () {\n      if (onreadable) {\n        const cb = onreadable\n        onreadable = null\n        cb()\n      }\n    })\n    r.on('end', function () {\n      d.push(null)\n    })\n    d._read = function () {\n      while (true) {\n        const buf = r.read()\n        if (buf === null) {\n          onreadable = d._read\n          return\n        }\n        if (!d.push(buf)) {\n          return\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      destroyer(w, err)\n      destroyer(r, err)\n    }\n  }\n  return d\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n;('use strict')\nconst { AbortError, codes } = require('../../ours/errors')\nconst { ERR_INVALID_ARG_TYPE, ERR_STREAM_PREMATURE_CLOSE } = codes\nconst { kEmptyObject, once } = require('../../ours/util')\nconst { validateAbortSignal, validateFunction, validateObject, validateBoolean } = require('../validators')\nconst { Promise, PromisePrototypeThen, SymbolDispose } = require('../../ours/primordials')\nconst {\n  isClosed,\n  isReadable,\n  isReadableNodeStream,\n  isReadableStream,\n  isReadableFinished,\n  isReadableErrored,\n  isWritable,\n  isWritableNodeStream,\n  isWritableStream,\n  isWritableFinished,\n  isWritableErrored,\n  isNodeStream,\n  willEmitClose: _willEmitClose,\n  kIsClosedPromise\n} = require('./utils')\nlet addAbortListener\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function'\n}\nconst nop = () => {}\nfunction eos(stream, options, callback) {\n  var _options$readable, _options$writable\n  if (arguments.length === 2) {\n    callback = options\n    options = kEmptyObject\n  } else if (options == null) {\n    options = kEmptyObject\n  } else {\n    validateObject(options, 'options')\n  }\n  validateFunction(callback, 'callback')\n  validateAbortSignal(options.signal, 'options.signal')\n  callback = once(callback)\n  if (isReadableStream(stream) || isWritableStream(stream)) {\n    return eosWeb(stream, options, callback)\n  }\n  if (!isNodeStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', ['ReadableStream', 'WritableStream', 'Stream'], stream)\n  }\n  const readable =\n    (_options$readable = options.readable) !== null && _options$readable !== undefined\n      ? _options$readable\n      : isReadableNodeStream(stream)\n  const writable =\n    (_options$writable = options.writable) !== null && _options$writable !== undefined\n      ? _options$writable\n      : isWritableNodeStream(stream)\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const onlegacyfinish = () => {\n    if (!stream.writable) {\n      onfinish()\n    }\n  }\n\n  // TODO (ronag): Improve soft detection to include core modules and\n  // common ecosystem modules that do properly emit 'close' but fail\n  // this generic check.\n  let willEmitClose =\n    _willEmitClose(stream) && isReadableNodeStream(stream) === readable && isWritableNodeStream(stream) === writable\n  let writableFinished = isWritableFinished(stream, false)\n  const onfinish = () => {\n    writableFinished = true\n    // Stream should not be destroyed here. If it is that\n    // means that user space is doing something differently and\n    // we cannot trust willEmitClose.\n    if (stream.destroyed) {\n      willEmitClose = false\n    }\n    if (willEmitClose && (!stream.readable || readable)) {\n      return\n    }\n    if (!readable || readableFinished) {\n      callback.call(stream)\n    }\n  }\n  let readableFinished = isReadableFinished(stream, false)\n  const onend = () => {\n    readableFinished = true\n    // Stream should not be destroyed here. If it is that\n    // means that user space is doing something differently and\n    // we cannot trust willEmitClose.\n    if (stream.destroyed) {\n      willEmitClose = false\n    }\n    if (willEmitClose && (!stream.writable || writable)) {\n      return\n    }\n    if (!writable || writableFinished) {\n      callback.call(stream)\n    }\n  }\n  const onerror = (err) => {\n    callback.call(stream, err)\n  }\n  let closed = isClosed(stream)\n  const onclose = () => {\n    closed = true\n    const errored = isWritableErrored(stream) || isReadableErrored(stream)\n    if (errored && typeof errored !== 'boolean') {\n      return callback.call(stream, errored)\n    }\n    if (readable && !readableFinished && isReadableNodeStream(stream, true)) {\n      if (!isReadableFinished(stream, false)) return callback.call(stream, new ERR_STREAM_PREMATURE_CLOSE())\n    }\n    if (writable && !writableFinished) {\n      if (!isWritableFinished(stream, false)) return callback.call(stream, new ERR_STREAM_PREMATURE_CLOSE())\n    }\n    callback.call(stream)\n  }\n  const onclosed = () => {\n    closed = true\n    const errored = isWritableErrored(stream) || isReadableErrored(stream)\n    if (errored && typeof errored !== 'boolean') {\n      return callback.call(stream, errored)\n    }\n    callback.call(stream)\n  }\n  const onrequest = () => {\n    stream.req.on('finish', onfinish)\n  }\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish)\n    if (!willEmitClose) {\n      stream.on('abort', onclose)\n    }\n    if (stream.req) {\n      onrequest()\n    } else {\n      stream.on('request', onrequest)\n    }\n  } else if (writable && !wState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish)\n    stream.on('close', onlegacyfinish)\n  }\n\n  // Not all streams will emit 'close' after 'aborted'.\n  if (!willEmitClose && typeof stream.aborted === 'boolean') {\n    stream.on('aborted', onclose)\n  }\n  stream.on('end', onend)\n  stream.on('finish', onfinish)\n  if (options.error !== false) {\n    stream.on('error', onerror)\n  }\n  stream.on('close', onclose)\n  if (closed) {\n    process.nextTick(onclose)\n  } else if (\n    (wState !== null && wState !== undefined && wState.errorEmitted) ||\n    (rState !== null && rState !== undefined && rState.errorEmitted)\n  ) {\n    if (!willEmitClose) {\n      process.nextTick(onclosed)\n    }\n  } else if (\n    !readable &&\n    (!willEmitClose || isReadable(stream)) &&\n    (writableFinished || isWritable(stream) === false)\n  ) {\n    process.nextTick(onclosed)\n  } else if (\n    !writable &&\n    (!willEmitClose || isWritable(stream)) &&\n    (readableFinished || isReadable(stream) === false)\n  ) {\n    process.nextTick(onclosed)\n  } else if (rState && stream.req && stream.aborted) {\n    process.nextTick(onclosed)\n  }\n  const cleanup = () => {\n    callback = nop\n    stream.removeListener('aborted', onclose)\n    stream.removeListener('complete', onfinish)\n    stream.removeListener('abort', onclose)\n    stream.removeListener('request', onrequest)\n    if (stream.req) stream.req.removeListener('finish', onfinish)\n    stream.removeListener('end', onlegacyfinish)\n    stream.removeListener('close', onlegacyfinish)\n    stream.removeListener('finish', onfinish)\n    stream.removeListener('end', onend)\n    stream.removeListener('error', onerror)\n    stream.removeListener('close', onclose)\n  }\n  if (options.signal && !closed) {\n    const abort = () => {\n      // Keep it because cleanup removes it.\n      const endCallback = callback\n      cleanup()\n      endCallback.call(\n        stream,\n        new AbortError(undefined, {\n          cause: options.signal.reason\n        })\n      )\n    }\n    if (options.signal.aborted) {\n      process.nextTick(abort)\n    } else {\n      addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n      const disposable = addAbortListener(options.signal, abort)\n      const originalCallback = callback\n      callback = once((...args) => {\n        disposable[SymbolDispose]()\n        originalCallback.apply(stream, args)\n      })\n    }\n  }\n  return cleanup\n}\nfunction eosWeb(stream, options, callback) {\n  let isAborted = false\n  let abort = nop\n  if (options.signal) {\n    abort = () => {\n      isAborted = true\n      callback.call(\n        stream,\n        new AbortError(undefined, {\n          cause: options.signal.reason\n        })\n      )\n    }\n    if (options.signal.aborted) {\n      process.nextTick(abort)\n    } else {\n      addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n      const disposable = addAbortListener(options.signal, abort)\n      const originalCallback = callback\n      callback = once((...args) => {\n        disposable[SymbolDispose]()\n        originalCallback.apply(stream, args)\n      })\n    }\n  }\n  const resolverFn = (...args) => {\n    if (!isAborted) {\n      process.nextTick(() => callback.apply(stream, args))\n    }\n  }\n  PromisePrototypeThen(stream[kIsClosedPromise].promise, resolverFn, resolverFn)\n  return nop\n}\nfunction finished(stream, opts) {\n  var _opts\n  let autoCleanup = false\n  if (opts === null) {\n    opts = kEmptyObject\n  }\n  if ((_opts = opts) !== null && _opts !== undefined && _opts.cleanup) {\n    validateBoolean(opts.cleanup, 'cleanup')\n    autoCleanup = opts.cleanup\n  }\n  return new Promise((resolve, reject) => {\n    const cleanup = eos(stream, opts, (err) => {\n      if (autoCleanup) {\n        cleanup()\n      }\n      if (err) {\n        reject(err)\n      } else {\n        resolve()\n      }\n    })\n  })\n}\nmodule.exports = eos\nmodule.exports.finished = finished\n","'use strict'\n\n/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\nconst { PromisePrototypeThen, SymbolAsyncIterator, SymbolIterator } = require('../../ours/primordials')\nconst { Buffer } = require('buffer')\nconst { ERR_INVALID_ARG_TYPE, ERR_STREAM_NULL_VALUES } = require('../../ours/errors').codes\nfunction from(Readable, iterable, opts) {\n  let iterator\n  if (typeof iterable === 'string' || iterable instanceof Buffer) {\n    return new Readable({\n      objectMode: true,\n      ...opts,\n      read() {\n        this.push(iterable)\n        this.push(null)\n      }\n    })\n  }\n  let isAsync\n  if (iterable && iterable[SymbolAsyncIterator]) {\n    isAsync = true\n    iterator = iterable[SymbolAsyncIterator]()\n  } else if (iterable && iterable[SymbolIterator]) {\n    isAsync = false\n    iterator = iterable[SymbolIterator]()\n  } else {\n    throw new ERR_INVALID_ARG_TYPE('iterable', ['Iterable'], iterable)\n  }\n  const readable = new Readable({\n    objectMode: true,\n    highWaterMark: 1,\n    // TODO(ronag): What options should be allowed?\n    ...opts\n  })\n\n  // Flag to protect against _read\n  // being called before last iteration completion.\n  let reading = false\n  readable._read = function () {\n    if (!reading) {\n      reading = true\n      next()\n    }\n  }\n  readable._destroy = function (error, cb) {\n    PromisePrototypeThen(\n      close(error),\n      () => process.nextTick(cb, error),\n      // nextTick is here in case cb throws\n      (e) => process.nextTick(cb, e || error)\n    )\n  }\n  async function close(error) {\n    const hadError = error !== undefined && error !== null\n    const hasThrow = typeof iterator.throw === 'function'\n    if (hadError && hasThrow) {\n      const { value, done } = await iterator.throw(error)\n      await value\n      if (done) {\n        return\n      }\n    }\n    if (typeof iterator.return === 'function') {\n      const { value } = await iterator.return()\n      await value\n    }\n  }\n  async function next() {\n    for (;;) {\n      try {\n        const { value, done } = isAsync ? await iterator.next() : iterator.next()\n        if (done) {\n          readable.push(null)\n        } else {\n          const res = value && typeof value.then === 'function' ? await value : value\n          if (res === null) {\n            reading = false\n            throw new ERR_STREAM_NULL_VALUES()\n          } else if (readable.push(res)) {\n            continue\n          } else {\n            reading = false\n          }\n        }\n      } catch (err) {\n        readable.destroy(err)\n      }\n      break\n    }\n  }\n  return readable\n}\nmodule.exports = from\n","'use strict'\n\nconst { ArrayIsArray, ObjectSetPrototypeOf } = require('../../ours/primordials')\nconst { EventEmitter: EE } = require('events')\nfunction Stream(opts) {\n  EE.call(this, opts)\n}\nObjectSetPrototypeOf(Stream.prototype, EE.prototype)\nObjectSetPrototypeOf(Stream, EE)\nStream.prototype.pipe = function (dest, options) {\n  const source = this\n  function ondata(chunk) {\n    if (dest.writable && dest.write(chunk) === false && source.pause) {\n      source.pause()\n    }\n  }\n  source.on('data', ondata)\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume()\n    }\n  }\n  dest.on('drain', ondrain)\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend)\n    source.on('close', onclose)\n  }\n  let didOnEnd = false\n  function onend() {\n    if (didOnEnd) return\n    didOnEnd = true\n    dest.end()\n  }\n  function onclose() {\n    if (didOnEnd) return\n    didOnEnd = true\n    if (typeof dest.destroy === 'function') dest.destroy()\n  }\n\n  // Don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup()\n    if (EE.listenerCount(this, 'error') === 0) {\n      this.emit('error', er)\n    }\n  }\n  prependListener(source, 'error', onerror)\n  prependListener(dest, 'error', onerror)\n\n  // Remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata)\n    dest.removeListener('drain', ondrain)\n    source.removeListener('end', onend)\n    source.removeListener('close', onclose)\n    source.removeListener('error', onerror)\n    dest.removeListener('error', onerror)\n    source.removeListener('end', cleanup)\n    source.removeListener('close', cleanup)\n    dest.removeListener('close', cleanup)\n  }\n  source.on('end', cleanup)\n  source.on('close', cleanup)\n  dest.on('close', cleanup)\n  dest.emit('pipe', source)\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest\n}\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn)\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn)\n  else if (ArrayIsArray(emitter._events[event])) emitter._events[event].unshift(fn)\n  else emitter._events[event] = [fn, emitter._events[event]]\n}\nmodule.exports = {\n  Stream,\n  prependListener\n}\n","'use strict'\n\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst {\n  codes: { ERR_INVALID_ARG_VALUE, ERR_INVALID_ARG_TYPE, ERR_MISSING_ARGS, ERR_OUT_OF_RANGE },\n  AbortError\n} = require('../../ours/errors')\nconst { validateAbortSignal, validateInteger, validateObject } = require('../validators')\nconst kWeakHandler = require('../../ours/primordials').Symbol('kWeak')\nconst kResistStopPropagation = require('../../ours/primordials').Symbol('kResistStopPropagation')\nconst { finished } = require('./end-of-stream')\nconst staticCompose = require('./compose')\nconst { addAbortSignalNoValidate } = require('./add-abort-signal')\nconst { isWritable, isNodeStream } = require('./utils')\nconst { deprecate } = require('../../ours/util')\nconst {\n  ArrayPrototypePush,\n  Boolean,\n  MathFloor,\n  Number,\n  NumberIsNaN,\n  Promise,\n  PromiseReject,\n  PromiseResolve,\n  PromisePrototypeThen,\n  Symbol\n} = require('../../ours/primordials')\nconst kEmpty = Symbol('kEmpty')\nconst kEof = Symbol('kEof')\nfunction compose(stream, options) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  if (isNodeStream(stream) && !isWritable(stream)) {\n    throw new ERR_INVALID_ARG_VALUE('stream', stream, 'must be writable')\n  }\n  const composedStream = staticCompose(this, stream)\n  if (options !== null && options !== undefined && options.signal) {\n    // Not validating as we already validated before\n    addAbortSignalNoValidate(options.signal, composedStream)\n  }\n  return composedStream\n}\nfunction map(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  let concurrency = 1\n  if ((options === null || options === undefined ? undefined : options.concurrency) != null) {\n    concurrency = MathFloor(options.concurrency)\n  }\n  let highWaterMark = concurrency - 1\n  if ((options === null || options === undefined ? undefined : options.highWaterMark) != null) {\n    highWaterMark = MathFloor(options.highWaterMark)\n  }\n  validateInteger(concurrency, 'options.concurrency', 1)\n  validateInteger(highWaterMark, 'options.highWaterMark', 0)\n  highWaterMark += concurrency\n  return async function* map() {\n    const signal = require('../../ours/util').AbortSignalAny(\n      [options === null || options === undefined ? undefined : options.signal].filter(Boolean)\n    )\n    const stream = this\n    const queue = []\n    const signalOpt = {\n      signal\n    }\n    let next\n    let resume\n    let done = false\n    let cnt = 0\n    function onCatch() {\n      done = true\n      afterItemProcessed()\n    }\n    function afterItemProcessed() {\n      cnt -= 1\n      maybeResume()\n    }\n    function maybeResume() {\n      if (resume && !done && cnt < concurrency && queue.length < highWaterMark) {\n        resume()\n        resume = null\n      }\n    }\n    async function pump() {\n      try {\n        for await (let val of stream) {\n          if (done) {\n            return\n          }\n          if (signal.aborted) {\n            throw new AbortError()\n          }\n          try {\n            val = fn(val, signalOpt)\n            if (val === kEmpty) {\n              continue\n            }\n            val = PromiseResolve(val)\n          } catch (err) {\n            val = PromiseReject(err)\n          }\n          cnt += 1\n          PromisePrototypeThen(val, afterItemProcessed, onCatch)\n          queue.push(val)\n          if (next) {\n            next()\n            next = null\n          }\n          if (!done && (queue.length >= highWaterMark || cnt >= concurrency)) {\n            await new Promise((resolve) => {\n              resume = resolve\n            })\n          }\n        }\n        queue.push(kEof)\n      } catch (err) {\n        const val = PromiseReject(err)\n        PromisePrototypeThen(val, afterItemProcessed, onCatch)\n        queue.push(val)\n      } finally {\n        done = true\n        if (next) {\n          next()\n          next = null\n        }\n      }\n    }\n    pump()\n    try {\n      while (true) {\n        while (queue.length > 0) {\n          const val = await queue[0]\n          if (val === kEof) {\n            return\n          }\n          if (signal.aborted) {\n            throw new AbortError()\n          }\n          if (val !== kEmpty) {\n            yield val\n          }\n          queue.shift()\n          maybeResume()\n        }\n        await new Promise((resolve) => {\n          next = resolve\n        })\n      }\n    } finally {\n      done = true\n      if (resume) {\n        resume()\n        resume = null\n      }\n    }\n  }.call(this)\n}\nfunction asIndexedPairs(options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  return async function* asIndexedPairs() {\n    let index = 0\n    for await (const val of this) {\n      var _options$signal\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal = options.signal) !== null &&\n        _options$signal !== undefined &&\n        _options$signal.aborted\n      ) {\n        throw new AbortError({\n          cause: options.signal.reason\n        })\n      }\n      yield [index++, val]\n    }\n  }.call(this)\n}\nasync function some(fn, options = undefined) {\n  for await (const unused of filter.call(this, fn, options)) {\n    return true\n  }\n  return false\n}\nasync function every(fn, options = undefined) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  // https://en.wikipedia.org/wiki/De_Morgan%27s_laws\n  return !(await some.call(\n    this,\n    async (...args) => {\n      return !(await fn(...args))\n    },\n    options\n  ))\n}\nasync function find(fn, options) {\n  for await (const result of filter.call(this, fn, options)) {\n    return result\n  }\n  return undefined\n}\nasync function forEach(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  async function forEachFn(value, options) {\n    await fn(value, options)\n    return kEmpty\n  }\n  // eslint-disable-next-line no-unused-vars\n  for await (const unused of map.call(this, forEachFn, options));\n}\nfunction filter(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  async function filterFn(value, options) {\n    if (await fn(value, options)) {\n      return value\n    }\n    return kEmpty\n  }\n  return map.call(this, filterFn, options)\n}\n\n// Specific to provide better error to reduce since the argument is only\n// missing if the stream has no items in it - but the code is still appropriate\nclass ReduceAwareErrMissingArgs extends ERR_MISSING_ARGS {\n  constructor() {\n    super('reduce')\n    this.message = 'Reduce of an empty stream requires an initial value'\n  }\n}\nasync function reduce(reducer, initialValue, options) {\n  var _options$signal2\n  if (typeof reducer !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('reducer', ['Function', 'AsyncFunction'], reducer)\n  }\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  let hasInitialValue = arguments.length > 1\n  if (\n    options !== null &&\n    options !== undefined &&\n    (_options$signal2 = options.signal) !== null &&\n    _options$signal2 !== undefined &&\n    _options$signal2.aborted\n  ) {\n    const err = new AbortError(undefined, {\n      cause: options.signal.reason\n    })\n    this.once('error', () => {}) // The error is already propagated\n    await finished(this.destroy(err))\n    throw err\n  }\n  const ac = new AbortController()\n  const signal = ac.signal\n  if (options !== null && options !== undefined && options.signal) {\n    const opts = {\n      once: true,\n      [kWeakHandler]: this,\n      [kResistStopPropagation]: true\n    }\n    options.signal.addEventListener('abort', () => ac.abort(), opts)\n  }\n  let gotAnyItemFromStream = false\n  try {\n    for await (const value of this) {\n      var _options$signal3\n      gotAnyItemFromStream = true\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal3 = options.signal) !== null &&\n        _options$signal3 !== undefined &&\n        _options$signal3.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (!hasInitialValue) {\n        initialValue = value\n        hasInitialValue = true\n      } else {\n        initialValue = await reducer(initialValue, value, {\n          signal\n        })\n      }\n    }\n    if (!gotAnyItemFromStream && !hasInitialValue) {\n      throw new ReduceAwareErrMissingArgs()\n    }\n  } finally {\n    ac.abort()\n  }\n  return initialValue\n}\nasync function toArray(options) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  const result = []\n  for await (const val of this) {\n    var _options$signal4\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal4 = options.signal) !== null &&\n      _options$signal4 !== undefined &&\n      _options$signal4.aborted\n    ) {\n      throw new AbortError(undefined, {\n        cause: options.signal.reason\n      })\n    }\n    ArrayPrototypePush(result, val)\n  }\n  return result\n}\nfunction flatMap(fn, options) {\n  const values = map.call(this, fn, options)\n  return async function* flatMap() {\n    for await (const val of values) {\n      yield* val\n    }\n  }.call(this)\n}\nfunction toIntegerOrInfinity(number) {\n  // We coerce here to align with the spec\n  // https://github.com/tc39/proposal-iterator-helpers/issues/169\n  number = Number(number)\n  if (NumberIsNaN(number)) {\n    return 0\n  }\n  if (number < 0) {\n    throw new ERR_OUT_OF_RANGE('number', '>= 0', number)\n  }\n  return number\n}\nfunction drop(number, options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  number = toIntegerOrInfinity(number)\n  return async function* drop() {\n    var _options$signal5\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal5 = options.signal) !== null &&\n      _options$signal5 !== undefined &&\n      _options$signal5.aborted\n    ) {\n      throw new AbortError()\n    }\n    for await (const val of this) {\n      var _options$signal6\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal6 = options.signal) !== null &&\n        _options$signal6 !== undefined &&\n        _options$signal6.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (number-- <= 0) {\n        yield val\n      }\n    }\n  }.call(this)\n}\nfunction take(number, options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  number = toIntegerOrInfinity(number)\n  return async function* take() {\n    var _options$signal7\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal7 = options.signal) !== null &&\n      _options$signal7 !== undefined &&\n      _options$signal7.aborted\n    ) {\n      throw new AbortError()\n    }\n    for await (const val of this) {\n      var _options$signal8\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal8 = options.signal) !== null &&\n        _options$signal8 !== undefined &&\n        _options$signal8.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (number-- > 0) {\n        yield val\n      }\n\n      // Don't get another item from iterator in case we reached the end\n      if (number <= 0) {\n        return\n      }\n    }\n  }.call(this)\n}\nmodule.exports.streamReturningOperators = {\n  asIndexedPairs: deprecate(asIndexedPairs, 'readable.asIndexedPairs will be removed in a future version.'),\n  drop,\n  filter,\n  flatMap,\n  map,\n  take,\n  compose\n}\nmodule.exports.promiseReturningOperators = {\n  every,\n  forEach,\n  reduce,\n  toArray,\n  some,\n  find\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict'\n\nconst { ObjectSetPrototypeOf } = require('../../ours/primordials')\nmodule.exports = PassThrough\nconst Transform = require('./transform')\nObjectSetPrototypeOf(PassThrough.prototype, Transform.prototype)\nObjectSetPrototypeOf(PassThrough, Transform)\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options)\n  Transform.call(this, options)\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk)\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n;('use strict')\nconst { ArrayIsArray, Promise, SymbolAsyncIterator, SymbolDispose } = require('../../ours/primordials')\nconst eos = require('./end-of-stream')\nconst { once } = require('../../ours/util')\nconst destroyImpl = require('./destroy')\nconst Duplex = require('./duplex')\nconst {\n  aggregateTwoErrors,\n  codes: {\n    ERR_INVALID_ARG_TYPE,\n    ERR_INVALID_RETURN_VALUE,\n    ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED,\n    ERR_STREAM_PREMATURE_CLOSE\n  },\n  AbortError\n} = require('../../ours/errors')\nconst { validateFunction, validateAbortSignal } = require('../validators')\nconst {\n  isIterable,\n  isReadable,\n  isReadableNodeStream,\n  isNodeStream,\n  isTransformStream,\n  isWebStream,\n  isReadableStream,\n  isReadableFinished\n} = require('./utils')\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nlet PassThrough\nlet Readable\nlet addAbortListener\nfunction destroyer(stream, reading, writing) {\n  let finished = false\n  stream.on('close', () => {\n    finished = true\n  })\n  const cleanup = eos(\n    stream,\n    {\n      readable: reading,\n      writable: writing\n    },\n    (err) => {\n      finished = !err\n    }\n  )\n  return {\n    destroy: (err) => {\n      if (finished) return\n      finished = true\n      destroyImpl.destroyer(stream, err || new ERR_STREAM_DESTROYED('pipe'))\n    },\n    cleanup\n  }\n}\nfunction popCallback(streams) {\n  // Streams should never be an empty array. It should always contain at least\n  // a single stream. Therefore optimize for the average case instead of\n  // checking for length === 0 as well.\n  validateFunction(streams[streams.length - 1], 'streams[stream.length - 1]')\n  return streams.pop()\n}\nfunction makeAsyncIterable(val) {\n  if (isIterable(val)) {\n    return val\n  } else if (isReadableNodeStream(val)) {\n    // Legacy streams are not Iterable.\n    return fromReadable(val)\n  }\n  throw new ERR_INVALID_ARG_TYPE('val', ['Readable', 'Iterable', 'AsyncIterable'], val)\n}\nasync function* fromReadable(val) {\n  if (!Readable) {\n    Readable = require('./readable')\n  }\n  yield* Readable.prototype[SymbolAsyncIterator].call(val)\n}\nasync function pumpToNode(iterable, writable, finish, { end }) {\n  let error\n  let onresolve = null\n  const resume = (err) => {\n    if (err) {\n      error = err\n    }\n    if (onresolve) {\n      const callback = onresolve\n      onresolve = null\n      callback()\n    }\n  }\n  const wait = () =>\n    new Promise((resolve, reject) => {\n      if (error) {\n        reject(error)\n      } else {\n        onresolve = () => {\n          if (error) {\n            reject(error)\n          } else {\n            resolve()\n          }\n        }\n      }\n    })\n  writable.on('drain', resume)\n  const cleanup = eos(\n    writable,\n    {\n      readable: false\n    },\n    resume\n  )\n  try {\n    if (writable.writableNeedDrain) {\n      await wait()\n    }\n    for await (const chunk of iterable) {\n      if (!writable.write(chunk)) {\n        await wait()\n      }\n    }\n    if (end) {\n      writable.end()\n      await wait()\n    }\n    finish()\n  } catch (err) {\n    finish(error !== err ? aggregateTwoErrors(error, err) : err)\n  } finally {\n    cleanup()\n    writable.off('drain', resume)\n  }\n}\nasync function pumpToWeb(readable, writable, finish, { end }) {\n  if (isTransformStream(writable)) {\n    writable = writable.writable\n  }\n  // https://streams.spec.whatwg.org/#example-manual-write-with-backpressure\n  const writer = writable.getWriter()\n  try {\n    for await (const chunk of readable) {\n      await writer.ready\n      writer.write(chunk).catch(() => {})\n    }\n    await writer.ready\n    if (end) {\n      await writer.close()\n    }\n    finish()\n  } catch (err) {\n    try {\n      await writer.abort(err)\n      finish(err)\n    } catch (err) {\n      finish(err)\n    }\n  }\n}\nfunction pipeline(...streams) {\n  return pipelineImpl(streams, once(popCallback(streams)))\n}\nfunction pipelineImpl(streams, callback, opts) {\n  if (streams.length === 1 && ArrayIsArray(streams[0])) {\n    streams = streams[0]\n  }\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  const ac = new AbortController()\n  const signal = ac.signal\n  const outerSignal = opts === null || opts === undefined ? undefined : opts.signal\n\n  // Need to cleanup event listeners if last stream is readable\n  // https://github.com/nodejs/node/issues/35452\n  const lastStreamCleanup = []\n  validateAbortSignal(outerSignal, 'options.signal')\n  function abort() {\n    finishImpl(new AbortError())\n  }\n  addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n  let disposable\n  if (outerSignal) {\n    disposable = addAbortListener(outerSignal, abort)\n  }\n  let error\n  let value\n  const destroys = []\n  let finishCount = 0\n  function finish(err) {\n    finishImpl(err, --finishCount === 0)\n  }\n  function finishImpl(err, final) {\n    var _disposable\n    if (err && (!error || error.code === 'ERR_STREAM_PREMATURE_CLOSE')) {\n      error = err\n    }\n    if (!error && !final) {\n      return\n    }\n    while (destroys.length) {\n      destroys.shift()(error)\n    }\n    ;(_disposable = disposable) === null || _disposable === undefined ? undefined : _disposable[SymbolDispose]()\n    ac.abort()\n    if (final) {\n      if (!error) {\n        lastStreamCleanup.forEach((fn) => fn())\n      }\n      process.nextTick(callback, error, value)\n    }\n  }\n  let ret\n  for (let i = 0; i < streams.length; i++) {\n    const stream = streams[i]\n    const reading = i < streams.length - 1\n    const writing = i > 0\n    const end = reading || (opts === null || opts === undefined ? undefined : opts.end) !== false\n    const isLastStream = i === streams.length - 1\n    if (isNodeStream(stream)) {\n      if (end) {\n        const { destroy, cleanup } = destroyer(stream, reading, writing)\n        destroys.push(destroy)\n        if (isReadable(stream) && isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      }\n\n      // Catch stream errors that occur after pipe/pump has completed.\n      function onError(err) {\n        if (err && err.name !== 'AbortError' && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n          finish(err)\n        }\n      }\n      stream.on('error', onError)\n      if (isReadable(stream) && isLastStream) {\n        lastStreamCleanup.push(() => {\n          stream.removeListener('error', onError)\n        })\n      }\n    }\n    if (i === 0) {\n      if (typeof stream === 'function') {\n        ret = stream({\n          signal\n        })\n        if (!isIterable(ret)) {\n          throw new ERR_INVALID_RETURN_VALUE('Iterable, AsyncIterable or Stream', 'source', ret)\n        }\n      } else if (isIterable(stream) || isReadableNodeStream(stream) || isTransformStream(stream)) {\n        ret = stream\n      } else {\n        ret = Duplex.from(stream)\n      }\n    } else if (typeof stream === 'function') {\n      if (isTransformStream(ret)) {\n        var _ret\n        ret = makeAsyncIterable((_ret = ret) === null || _ret === undefined ? undefined : _ret.readable)\n      } else {\n        ret = makeAsyncIterable(ret)\n      }\n      ret = stream(ret, {\n        signal\n      })\n      if (reading) {\n        if (!isIterable(ret, true)) {\n          throw new ERR_INVALID_RETURN_VALUE('AsyncIterable', `transform[${i - 1}]`, ret)\n        }\n      } else {\n        var _ret2\n        if (!PassThrough) {\n          PassThrough = require('./passthrough')\n        }\n\n        // If the last argument to pipeline is not a stream\n        // we must create a proxy stream so that pipeline(...)\n        // always returns a stream which can be further\n        // composed through `.pipe(stream)`.\n\n        const pt = new PassThrough({\n          objectMode: true\n        })\n\n        // Handle Promises/A+ spec, `then` could be a getter that throws on\n        // second use.\n        const then = (_ret2 = ret) === null || _ret2 === undefined ? undefined : _ret2.then\n        if (typeof then === 'function') {\n          finishCount++\n          then.call(\n            ret,\n            (val) => {\n              value = val\n              if (val != null) {\n                pt.write(val)\n              }\n              if (end) {\n                pt.end()\n              }\n              process.nextTick(finish)\n            },\n            (err) => {\n              pt.destroy(err)\n              process.nextTick(finish, err)\n            }\n          )\n        } else if (isIterable(ret, true)) {\n          finishCount++\n          pumpToNode(ret, pt, finish, {\n            end\n          })\n        } else if (isReadableStream(ret) || isTransformStream(ret)) {\n          const toRead = ret.readable || ret\n          finishCount++\n          pumpToNode(toRead, pt, finish, {\n            end\n          })\n        } else {\n          throw new ERR_INVALID_RETURN_VALUE('AsyncIterable or Promise', 'destination', ret)\n        }\n        ret = pt\n        const { destroy, cleanup } = destroyer(ret, false, true)\n        destroys.push(destroy)\n        if (isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      }\n    } else if (isNodeStream(stream)) {\n      if (isReadableNodeStream(ret)) {\n        finishCount += 2\n        const cleanup = pipe(ret, stream, finish, {\n          end\n        })\n        if (isReadable(stream) && isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      } else if (isTransformStream(ret) || isReadableStream(ret)) {\n        const toRead = ret.readable || ret\n        finishCount++\n        pumpToNode(toRead, stream, finish, {\n          end\n        })\n      } else if (isIterable(ret)) {\n        finishCount++\n        pumpToNode(ret, stream, finish, {\n          end\n        })\n      } else {\n        throw new ERR_INVALID_ARG_TYPE(\n          'val',\n          ['Readable', 'Iterable', 'AsyncIterable', 'ReadableStream', 'TransformStream'],\n          ret\n        )\n      }\n      ret = stream\n    } else if (isWebStream(stream)) {\n      if (isReadableNodeStream(ret)) {\n        finishCount++\n        pumpToWeb(makeAsyncIterable(ret), stream, finish, {\n          end\n        })\n      } else if (isReadableStream(ret) || isIterable(ret)) {\n        finishCount++\n        pumpToWeb(ret, stream, finish, {\n          end\n        })\n      } else if (isTransformStream(ret)) {\n        finishCount++\n        pumpToWeb(ret.readable, stream, finish, {\n          end\n        })\n      } else {\n        throw new ERR_INVALID_ARG_TYPE(\n          'val',\n          ['Readable', 'Iterable', 'AsyncIterable', 'ReadableStream', 'TransformStream'],\n          ret\n        )\n      }\n      ret = stream\n    } else {\n      ret = Duplex.from(stream)\n    }\n  }\n  if (\n    (signal !== null && signal !== undefined && signal.aborted) ||\n    (outerSignal !== null && outerSignal !== undefined && outerSignal.aborted)\n  ) {\n    process.nextTick(abort)\n  }\n  return ret\n}\nfunction pipe(src, dst, finish, { end }) {\n  let ended = false\n  dst.on('close', () => {\n    if (!ended) {\n      // Finish if the destination closes before the source has completed.\n      finish(new ERR_STREAM_PREMATURE_CLOSE())\n    }\n  })\n  src.pipe(dst, {\n    end: false\n  }) // If end is true we already will have a listener to end dst.\n\n  if (end) {\n    // Compat. Before node v10.12.0 stdio used to throw an error so\n    // pipe() did/does not end() stdio destinations.\n    // Now they allow it but \"secretly\" don't close the underlying fd.\n\n    function endFn() {\n      ended = true\n      dst.end()\n    }\n    if (isReadableFinished(src)) {\n      // End the destination if the source has already ended.\n      process.nextTick(endFn)\n    } else {\n      src.once('end', endFn)\n    }\n  } else {\n    finish()\n  }\n  eos(\n    src,\n    {\n      readable: true,\n      writable: false\n    },\n    (err) => {\n      const rState = src._readableState\n      if (\n        err &&\n        err.code === 'ERR_STREAM_PREMATURE_CLOSE' &&\n        rState &&\n        rState.ended &&\n        !rState.errored &&\n        !rState.errorEmitted\n      ) {\n        // Some readable streams will emit 'close' before 'end'. However, since\n        // this is on the readable side 'end' should still be emitted if the\n        // stream has been ended and no error emitted. This should be allowed in\n        // favor of backwards compatibility. Since the stream is piped to a\n        // destination this should not result in any observable difference.\n        // We don't need to check if this is a writable premature close since\n        // eos will only fail with premature close on the reading side for\n        // duplex streams.\n        src.once('end', finish).once('error', finish)\n      } else {\n        finish(err)\n      }\n    }\n  )\n  return eos(\n    dst,\n    {\n      readable: false,\n      writable: true\n    },\n    finish\n  )\n}\nmodule.exports = {\n  pipelineImpl,\n  pipeline\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;('use strict')\nconst {\n  ArrayPrototypeIndexOf,\n  NumberIsInteger,\n  NumberIsNaN,\n  NumberParseInt,\n  ObjectDefineProperties,\n  ObjectKeys,\n  ObjectSetPrototypeOf,\n  Promise,\n  SafeSet,\n  SymbolAsyncDispose,\n  SymbolAsyncIterator,\n  Symbol\n} = require('../../ours/primordials')\nmodule.exports = Readable\nReadable.ReadableState = ReadableState\nconst { EventEmitter: EE } = require('events')\nconst { Stream, prependListener } = require('./legacy')\nconst { Buffer } = require('buffer')\nconst { addAbortSignal } = require('./add-abort-signal')\nconst eos = require('./end-of-stream')\nlet debug = require('../../ours/util').debuglog('stream', (fn) => {\n  debug = fn\n})\nconst BufferList = require('./buffer_list')\nconst destroyImpl = require('./destroy')\nconst { getHighWaterMark, getDefaultHighWaterMark } = require('./state')\nconst {\n  aggregateTwoErrors,\n  codes: {\n    ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_OUT_OF_RANGE,\n    ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT\n  },\n  AbortError\n} = require('../../ours/errors')\nconst { validateObject } = require('../validators')\nconst kPaused = Symbol('kPaused')\nconst { StringDecoder } = require('string_decoder')\nconst from = require('./from')\nObjectSetPrototypeOf(Readable.prototype, Stream.prototype)\nObjectSetPrototypeOf(Readable, Stream)\nconst nop = () => {}\nconst { errorOrDestroy } = destroyImpl\nconst kObjectMode = 1 << 0\nconst kEnded = 1 << 1\nconst kEndEmitted = 1 << 2\nconst kReading = 1 << 3\nconst kConstructed = 1 << 4\nconst kSync = 1 << 5\nconst kNeedReadable = 1 << 6\nconst kEmittedReadable = 1 << 7\nconst kReadableListening = 1 << 8\nconst kResumeScheduled = 1 << 9\nconst kErrorEmitted = 1 << 10\nconst kEmitClose = 1 << 11\nconst kAutoDestroy = 1 << 12\nconst kDestroyed = 1 << 13\nconst kClosed = 1 << 14\nconst kCloseEmitted = 1 << 15\nconst kMultiAwaitDrain = 1 << 16\nconst kReadingMore = 1 << 17\nconst kDataEmitted = 1 << 18\n\n// TODO(benjamingr) it is likely slower to do it this way than with free functions\nfunction makeBitMapDescriptor(bit) {\n  return {\n    enumerable: false,\n    get() {\n      return (this.state & bit) !== 0\n    },\n    set(value) {\n      if (value) this.state |= bit\n      else this.state &= ~bit\n    }\n  }\n}\nObjectDefineProperties(ReadableState.prototype, {\n  objectMode: makeBitMapDescriptor(kObjectMode),\n  ended: makeBitMapDescriptor(kEnded),\n  endEmitted: makeBitMapDescriptor(kEndEmitted),\n  reading: makeBitMapDescriptor(kReading),\n  // Stream is still being constructed and cannot be\n  // destroyed until construction finished or failed.\n  // Async construction is opt in, therefore we start as\n  // constructed.\n  constructed: makeBitMapDescriptor(kConstructed),\n  // A flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  sync: makeBitMapDescriptor(kSync),\n  // Whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  needReadable: makeBitMapDescriptor(kNeedReadable),\n  emittedReadable: makeBitMapDescriptor(kEmittedReadable),\n  readableListening: makeBitMapDescriptor(kReadableListening),\n  resumeScheduled: makeBitMapDescriptor(kResumeScheduled),\n  // True if the error was already emitted and should not be thrown again.\n  errorEmitted: makeBitMapDescriptor(kErrorEmitted),\n  emitClose: makeBitMapDescriptor(kEmitClose),\n  autoDestroy: makeBitMapDescriptor(kAutoDestroy),\n  // Has it been destroyed.\n  destroyed: makeBitMapDescriptor(kDestroyed),\n  // Indicates whether the stream has finished destroying.\n  closed: makeBitMapDescriptor(kClosed),\n  // True if close has been emitted or would have been emitted\n  // depending on emitClose.\n  closeEmitted: makeBitMapDescriptor(kCloseEmitted),\n  multiAwaitDrain: makeBitMapDescriptor(kMultiAwaitDrain),\n  // If true, a maybeReadMore has been scheduled.\n  readingMore: makeBitMapDescriptor(kReadingMore),\n  dataEmitted: makeBitMapDescriptor(kDataEmitted)\n})\nfunction ReadableState(options, stream, isDuplex) {\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof require('./duplex')\n\n  // Bit map field to store ReadableState more effciently with 1 bit per field\n  // instead of a V8 slot per field.\n  this.state = kEmitClose | kAutoDestroy | kConstructed | kSync\n  // Object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away.\n  if (options && options.objectMode) this.state |= kObjectMode\n  if (isDuplex && options && options.readableObjectMode) this.state |= kObjectMode\n\n  // The point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = options\n    ? getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex)\n    : getDefaultHighWaterMark(false)\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift().\n  this.buffer = new BufferList()\n  this.length = 0\n  this.pipes = []\n  this.flowing = null\n  this[kPaused] = null\n\n  // Should close be emitted on destroy. Defaults to true.\n  if (options && options.emitClose === false) this.state &= ~kEmitClose\n\n  // Should .destroy() be called after 'end' (and potentially 'finish').\n  if (options && options.autoDestroy === false) this.state &= ~kAutoDestroy\n\n  // Indicates whether the stream has errored. When true no further\n  // _read calls, 'data' or 'readable' events should occur. This is needed\n  // since when autoDestroy is disabled we need a way to tell whether the\n  // stream has failed.\n  this.errored = null\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = (options && options.defaultEncoding) || 'utf8'\n\n  // Ref the piped dest which we need a drain event on it\n  // type: null | Writable | Set<Writable>.\n  this.awaitDrainWriters = null\n  this.decoder = null\n  this.encoding = null\n  if (options && options.encoding) {\n    this.decoder = new StringDecoder(options.encoding)\n    this.encoding = options.encoding\n  }\n}\nfunction Readable(options) {\n  if (!(this instanceof Readable)) return new Readable(options)\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5.\n  const isDuplex = this instanceof require('./duplex')\n  this._readableState = new ReadableState(options, this, isDuplex)\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read\n    if (typeof options.destroy === 'function') this._destroy = options.destroy\n    if (typeof options.construct === 'function') this._construct = options.construct\n    if (options.signal && !isDuplex) addAbortSignal(options.signal, this)\n  }\n  Stream.call(this, options)\n  destroyImpl.construct(this, () => {\n    if (this._readableState.needReadable) {\n      maybeReadMore(this, this._readableState)\n    }\n  })\n}\nReadable.prototype.destroy = destroyImpl.destroy\nReadable.prototype._undestroy = destroyImpl.undestroy\nReadable.prototype._destroy = function (err, cb) {\n  cb(err)\n}\nReadable.prototype[EE.captureRejectionSymbol] = function (err) {\n  this.destroy(err)\n}\nReadable.prototype[SymbolAsyncDispose] = function () {\n  let error\n  if (!this.destroyed) {\n    error = this.readableEnded ? null : new AbortError()\n    this.destroy(error)\n  }\n  return new Promise((resolve, reject) => eos(this, (err) => (err && err !== error ? reject(err) : resolve(null))))\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  return readableAddChunk(this, chunk, encoding, false)\n}\n\n// Unshift should *always* be something directly out of read().\nReadable.prototype.unshift = function (chunk, encoding) {\n  return readableAddChunk(this, chunk, encoding, true)\n}\nfunction readableAddChunk(stream, chunk, encoding, addToFront) {\n  debug('readableAddChunk', chunk)\n  const state = stream._readableState\n  let err\n  if ((state.state & kObjectMode) === 0) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding\n      if (state.encoding !== encoding) {\n        if (addToFront && state.encoding) {\n          // When unshifting, if state.encoding is set, we have to save\n          // the string in the BufferList with the state encoding.\n          chunk = Buffer.from(chunk, encoding).toString(state.encoding)\n        } else {\n          chunk = Buffer.from(chunk, encoding)\n          encoding = ''\n        }\n      }\n    } else if (chunk instanceof Buffer) {\n      encoding = ''\n    } else if (Stream._isUint8Array(chunk)) {\n      chunk = Stream._uint8ArrayToBuffer(chunk)\n      encoding = ''\n    } else if (chunk != null) {\n      err = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk)\n    }\n  }\n  if (err) {\n    errorOrDestroy(stream, err)\n  } else if (chunk === null) {\n    state.state &= ~kReading\n    onEofChunk(stream, state)\n  } else if ((state.state & kObjectMode) !== 0 || (chunk && chunk.length > 0)) {\n    if (addToFront) {\n      if ((state.state & kEndEmitted) !== 0) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT())\n      else if (state.destroyed || state.errored) return false\n      else addChunk(stream, state, chunk, true)\n    } else if (state.ended) {\n      errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF())\n    } else if (state.destroyed || state.errored) {\n      return false\n    } else {\n      state.state &= ~kReading\n      if (state.decoder && !encoding) {\n        chunk = state.decoder.write(chunk)\n        if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false)\n        else maybeReadMore(stream, state)\n      } else {\n        addChunk(stream, state, chunk, false)\n      }\n    }\n  } else if (!addToFront) {\n    state.state &= ~kReading\n    maybeReadMore(stream, state)\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0)\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync && stream.listenerCount('data') > 0) {\n    // Use the guard to avoid creating `Set()` repeatedly\n    // when we have multiple pipes.\n    if ((state.state & kMultiAwaitDrain) !== 0) {\n      state.awaitDrainWriters.clear()\n    } else {\n      state.awaitDrainWriters = null\n    }\n    state.dataEmitted = true\n    stream.emit('data', chunk)\n  } else {\n    // Update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length\n    if (addToFront) state.buffer.unshift(chunk)\n    else state.buffer.push(chunk)\n    if ((state.state & kNeedReadable) !== 0) emitReadable(stream)\n  }\n  maybeReadMore(stream, state)\n}\nReadable.prototype.isPaused = function () {\n  const state = this._readableState\n  return state[kPaused] === true || state.flowing === false\n}\n\n// Backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  const decoder = new StringDecoder(enc)\n  this._readableState.decoder = decoder\n  // If setEncoding(null), decoder.encoding equals utf8.\n  this._readableState.encoding = this._readableState.decoder.encoding\n  const buffer = this._readableState.buffer\n  // Iterate over current buffer to convert already stored Buffers:\n  let content = ''\n  for (const data of buffer) {\n    content += decoder.write(data)\n  }\n  buffer.clear()\n  if (content !== '') buffer.push(content)\n  this._readableState.length = content.length\n  return this\n}\n\n// Don't raise the hwm > 1GB.\nconst MAX_HWM = 0x40000000\nfunction computeNewHighWaterMark(n) {\n  if (n > MAX_HWM) {\n    throw new ERR_OUT_OF_RANGE('size', '<= 1GiB', n)\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts.\n    n--\n    n |= n >>> 1\n    n |= n >>> 2\n    n |= n >>> 4\n    n |= n >>> 8\n    n |= n >>> 16\n    n++\n  }\n  return n\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || (state.length === 0 && state.ended)) return 0\n  if ((state.state & kObjectMode) !== 0) return 1\n  if (NumberIsNaN(n)) {\n    // Only flow one buffer at a time.\n    if (state.flowing && state.length) return state.buffer.first().length\n    return state.length\n  }\n  if (n <= state.length) return n\n  return state.ended ? state.length : 0\n}\n\n// You can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n)\n  // Same as parseInt(undefined, 10), however V8 7.3 performance regressed\n  // in this scenario, so we are doing it manually.\n  if (n === undefined) {\n    n = NaN\n  } else if (!NumberIsInteger(n)) {\n    n = NumberParseInt(n, 10)\n  }\n  const state = this._readableState\n  const nOrig = n\n\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n)\n  if (n !== 0) state.state &= ~kEmittedReadable\n\n  // If we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (\n    n === 0 &&\n    state.needReadable &&\n    ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)\n  ) {\n    debug('read: emitReadable', state.length, state.ended)\n    if (state.length === 0 && state.ended) endReadable(this)\n    else emitReadable(this)\n    return null\n  }\n  n = howMuchToRead(n, state)\n\n  // If we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this)\n    return null\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  let doRead = (state.state & kNeedReadable) !== 0\n  debug('need readable', doRead)\n\n  // If we currently have less than the highWaterMark, then also read some.\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true\n    debug('length less than watermark', doRead)\n  }\n\n  // However, if we've ended, then there's no point, if we're already\n  // reading, then it's unnecessary, if we're constructing we have to wait,\n  // and if we're destroyed or errored, then it's not allowed,\n  if (state.ended || state.reading || state.destroyed || state.errored || !state.constructed) {\n    doRead = false\n    debug('reading, ended or constructing', doRead)\n  } else if (doRead) {\n    debug('do read')\n    state.state |= kReading | kSync\n    // If the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.state |= kNeedReadable\n\n    // Call internal read method\n    try {\n      this._read(state.highWaterMark)\n    } catch (err) {\n      errorOrDestroy(this, err)\n    }\n    state.state &= ~kSync\n\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state)\n  }\n  let ret\n  if (n > 0) ret = fromList(n, state)\n  else ret = null\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark\n    n = 0\n  } else {\n    state.length -= n\n    if (state.multiAwaitDrain) {\n      state.awaitDrainWriters.clear()\n    } else {\n      state.awaitDrainWriters = null\n    }\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this)\n  }\n  if (ret !== null && !state.errorEmitted && !state.closeEmitted) {\n    state.dataEmitted = true\n    this.emit('data', ret)\n  }\n  return ret\n}\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk')\n  if (state.ended) return\n  if (state.decoder) {\n    const chunk = state.decoder.end()\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk)\n      state.length += state.objectMode ? 1 : chunk.length\n    }\n  }\n  state.ended = true\n  if (state.sync) {\n    // If we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call.\n    emitReadable(stream)\n  } else {\n    // Emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false\n    state.emittedReadable = true\n    // We have to emit readable now that we are EOF. Modules\n    // in the ecosystem (e.g. dicer) rely on this event being sync.\n    emitReadable_(stream)\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  const state = stream._readableState\n  debug('emitReadable', state.needReadable, state.emittedReadable)\n  state.needReadable = false\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing)\n    state.emittedReadable = true\n    process.nextTick(emitReadable_, stream)\n  }\n}\nfunction emitReadable_(stream) {\n  const state = stream._readableState\n  debug('emitReadable_', state.destroyed, state.length, state.ended)\n  if (!state.destroyed && !state.errored && (state.length || state.ended)) {\n    stream.emit('readable')\n    state.emittedReadable = false\n  }\n\n  // The stream needs another readable event if:\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark\n  flow(stream)\n}\n\n// At this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore && state.constructed) {\n    state.readingMore = true\n    process.nextTick(maybeReadMore_, stream, state)\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (\n    !state.reading &&\n    !state.ended &&\n    (state.length < state.highWaterMark || (state.flowing && state.length === 0))\n  ) {\n    const len = state.length\n    debug('maybeReadMore read 0')\n    stream.read(0)\n    if (len === state.length)\n      // Didn't get any data, stop spinning.\n      break\n  }\n  state.readingMore = false\n}\n\n// Abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  throw new ERR_METHOD_NOT_IMPLEMENTED('_read()')\n}\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  const src = this\n  const state = this._readableState\n  if (state.pipes.length === 1) {\n    if (!state.multiAwaitDrain) {\n      state.multiAwaitDrain = true\n      state.awaitDrainWriters = new SafeSet(state.awaitDrainWriters ? [state.awaitDrainWriters] : [])\n    }\n  }\n  state.pipes.push(dest)\n  debug('pipe count=%d opts=%j', state.pipes.length, pipeOpts)\n  const doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr\n  const endFn = doEnd ? onend : unpipe\n  if (state.endEmitted) process.nextTick(endFn)\n  else src.once('end', endFn)\n  dest.on('unpipe', onunpipe)\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe')\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true\n        cleanup()\n      }\n    }\n  }\n  function onend() {\n    debug('onend')\n    dest.end()\n  }\n  let ondrain\n  let cleanedUp = false\n  function cleanup() {\n    debug('cleanup')\n    // Cleanup event handlers once the pipe is broken.\n    dest.removeListener('close', onclose)\n    dest.removeListener('finish', onfinish)\n    if (ondrain) {\n      dest.removeListener('drain', ondrain)\n    }\n    dest.removeListener('error', onerror)\n    dest.removeListener('unpipe', onunpipe)\n    src.removeListener('end', onend)\n    src.removeListener('end', unpipe)\n    src.removeListener('data', ondata)\n    cleanedUp = true\n\n    // If the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (ondrain && state.awaitDrainWriters && (!dest._writableState || dest._writableState.needDrain)) ondrain()\n  }\n  function pause() {\n    // If the user unpiped during `dest.write()`, it is possible\n    // to get stuck in a permanently paused state if that write\n    // also returned false.\n    // => Check whether `dest` is still a piping destination.\n    if (!cleanedUp) {\n      if (state.pipes.length === 1 && state.pipes[0] === dest) {\n        debug('false write response, pause', 0)\n        state.awaitDrainWriters = dest\n        state.multiAwaitDrain = false\n      } else if (state.pipes.length > 1 && state.pipes.includes(dest)) {\n        debug('false write response, pause', state.awaitDrainWriters.size)\n        state.awaitDrainWriters.add(dest)\n      }\n      src.pause()\n    }\n    if (!ondrain) {\n      // When the dest drains, it reduces the awaitDrain counter\n      // on the source.  This would be more elegant with a .once()\n      // handler in flow(), but adding and removing repeatedly is\n      // too slow.\n      ondrain = pipeOnDrain(src, dest)\n      dest.on('drain', ondrain)\n    }\n  }\n  src.on('data', ondata)\n  function ondata(chunk) {\n    debug('ondata')\n    const ret = dest.write(chunk)\n    debug('dest.write', ret)\n    if (ret === false) {\n      pause()\n    }\n  }\n\n  // If the dest has an error, then stop piping into it.\n  // However, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er)\n    unpipe()\n    dest.removeListener('error', onerror)\n    if (dest.listenerCount('error') === 0) {\n      const s = dest._writableState || dest._readableState\n      if (s && !s.errorEmitted) {\n        // User incorrectly emitted 'error' directly on the stream.\n        errorOrDestroy(dest, er)\n      } else {\n        dest.emit('error', er)\n      }\n    }\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror)\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish)\n    unpipe()\n  }\n  dest.once('close', onclose)\n  function onfinish() {\n    debug('onfinish')\n    dest.removeListener('close', onclose)\n    unpipe()\n  }\n  dest.once('finish', onfinish)\n  function unpipe() {\n    debug('unpipe')\n    src.unpipe(dest)\n  }\n\n  // Tell the dest that it's being piped to.\n  dest.emit('pipe', src)\n\n  // Start the flow if it hasn't been started already.\n\n  if (dest.writableNeedDrain === true) {\n    pause()\n  } else if (!state.flowing) {\n    debug('pipe resume')\n    src.resume()\n  }\n  return dest\n}\nfunction pipeOnDrain(src, dest) {\n  return function pipeOnDrainFunctionResult() {\n    const state = src._readableState\n\n    // `ondrain` will call directly,\n    // `this` maybe not a reference to dest,\n    // so we use the real dest here.\n    if (state.awaitDrainWriters === dest) {\n      debug('pipeOnDrain', 1)\n      state.awaitDrainWriters = null\n    } else if (state.multiAwaitDrain) {\n      debug('pipeOnDrain', state.awaitDrainWriters.size)\n      state.awaitDrainWriters.delete(dest)\n    }\n    if ((!state.awaitDrainWriters || state.awaitDrainWriters.size === 0) && src.listenerCount('data')) {\n      src.resume()\n    }\n  }\n}\nReadable.prototype.unpipe = function (dest) {\n  const state = this._readableState\n  const unpipeInfo = {\n    hasUnpiped: false\n  }\n\n  // If we're not piping anywhere, then do nothing.\n  if (state.pipes.length === 0) return this\n  if (!dest) {\n    // remove all.\n    const dests = state.pipes\n    state.pipes = []\n    this.pause()\n    for (let i = 0; i < dests.length; i++)\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      })\n    return this\n  }\n\n  // Try to find the right one.\n  const index = ArrayPrototypeIndexOf(state.pipes, dest)\n  if (index === -1) return this\n  state.pipes.splice(index, 1)\n  if (state.pipes.length === 0) this.pause()\n  dest.emit('unpipe', this, unpipeInfo)\n  return this\n}\n\n// Set up data events if they are asked for\n// Ensure readable listeners eventually get something.\nReadable.prototype.on = function (ev, fn) {\n  const res = Stream.prototype.on.call(this, ev, fn)\n  const state = this._readableState\n  if (ev === 'data') {\n    // Update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0\n\n    // Try start flowing on next tick if stream isn't explicitly paused.\n    if (state.flowing !== false) this.resume()\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true\n      state.flowing = false\n      state.emittedReadable = false\n      debug('on readable', state.length, state.reading)\n      if (state.length) {\n        emitReadable(this)\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this)\n      }\n    }\n  }\n  return res\n}\nReadable.prototype.addListener = Readable.prototype.on\nReadable.prototype.removeListener = function (ev, fn) {\n  const res = Stream.prototype.removeListener.call(this, ev, fn)\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this)\n  }\n  return res\n}\nReadable.prototype.off = Readable.prototype.removeListener\nReadable.prototype.removeAllListeners = function (ev) {\n  const res = Stream.prototype.removeAllListeners.apply(this, arguments)\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this)\n  }\n  return res\n}\nfunction updateReadableListening(self) {\n  const state = self._readableState\n  state.readableListening = self.listenerCount('readable') > 0\n  if (state.resumeScheduled && state[kPaused] === false) {\n    // Flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true\n\n    // Crude way to check if we should resume.\n  } else if (self.listenerCount('data') > 0) {\n    self.resume()\n  } else if (!state.readableListening) {\n    state.flowing = null\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0')\n  self.read(0)\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  const state = this._readableState\n  if (!state.flowing) {\n    debug('resume')\n    // We flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume().\n    state.flowing = !state.readableListening\n    resume(this, state)\n  }\n  state[kPaused] = false\n  return this\n}\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true\n    process.nextTick(resume_, stream, state)\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading)\n  if (!state.reading) {\n    stream.read(0)\n  }\n  state.resumeScheduled = false\n  stream.emit('resume')\n  flow(stream)\n  if (state.flowing && !state.reading) stream.read(0)\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing)\n  if (this._readableState.flowing !== false) {\n    debug('pause')\n    this._readableState.flowing = false\n    this.emit('pause')\n  }\n  this._readableState[kPaused] = true\n  return this\n}\nfunction flow(stream) {\n  const state = stream._readableState\n  debug('flow', state.flowing)\n  while (state.flowing && stream.read() !== null);\n}\n\n// Wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  let paused = false\n\n  // TODO (ronag): Should this.destroy(err) emit\n  // 'error' on the wrapped stream? Would require\n  // a static factory method, e.g. Readable.wrap(stream).\n\n  stream.on('data', (chunk) => {\n    if (!this.push(chunk) && stream.pause) {\n      paused = true\n      stream.pause()\n    }\n  })\n  stream.on('end', () => {\n    this.push(null)\n  })\n  stream.on('error', (err) => {\n    errorOrDestroy(this, err)\n  })\n  stream.on('close', () => {\n    this.destroy()\n  })\n  stream.on('destroy', () => {\n    this.destroy()\n  })\n  this._read = () => {\n    if (paused && stream.resume) {\n      paused = false\n      stream.resume()\n    }\n  }\n\n  // Proxy all the other methods. Important when wrapping filters and duplexes.\n  const streamKeys = ObjectKeys(stream)\n  for (let j = 1; j < streamKeys.length; j++) {\n    const i = streamKeys[j]\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = stream[i].bind(stream)\n    }\n  }\n  return this\n}\nReadable.prototype[SymbolAsyncIterator] = function () {\n  return streamToAsyncIterator(this)\n}\nReadable.prototype.iterator = function (options) {\n  if (options !== undefined) {\n    validateObject(options, 'options')\n  }\n  return streamToAsyncIterator(this, options)\n}\nfunction streamToAsyncIterator(stream, options) {\n  if (typeof stream.read !== 'function') {\n    stream = Readable.wrap(stream, {\n      objectMode: true\n    })\n  }\n  const iter = createAsyncIterator(stream, options)\n  iter.stream = stream\n  return iter\n}\nasync function* createAsyncIterator(stream, options) {\n  let callback = nop\n  function next(resolve) {\n    if (this === stream) {\n      callback()\n      callback = nop\n    } else {\n      callback = resolve\n    }\n  }\n  stream.on('readable', next)\n  let error\n  const cleanup = eos(\n    stream,\n    {\n      writable: false\n    },\n    (err) => {\n      error = err ? aggregateTwoErrors(error, err) : null\n      callback()\n      callback = nop\n    }\n  )\n  try {\n    while (true) {\n      const chunk = stream.destroyed ? null : stream.read()\n      if (chunk !== null) {\n        yield chunk\n      } else if (error) {\n        throw error\n      } else if (error === null) {\n        return\n      } else {\n        await new Promise(next)\n      }\n    }\n  } catch (err) {\n    error = aggregateTwoErrors(error, err)\n    throw error\n  } finally {\n    if (\n      (error || (options === null || options === undefined ? undefined : options.destroyOnReturn) !== false) &&\n      (error === undefined || stream._readableState.autoDestroy)\n    ) {\n      destroyImpl.destroyer(stream, null)\n    } else {\n      stream.off('readable', next)\n      cleanup()\n    }\n  }\n}\n\n// Making it explicit these properties are not enumerable\n// because otherwise some prototype manipulation in\n// userland will fail.\nObjectDefineProperties(Readable.prototype, {\n  readable: {\n    __proto__: null,\n    get() {\n      const r = this._readableState\n      // r.readable === false means that this is part of a Duplex stream\n      // where the readable side was disabled upon construction.\n      // Compat. The user might manually disable readable side through\n      // deprecated setter.\n      return !!r && r.readable !== false && !r.destroyed && !r.errorEmitted && !r.endEmitted\n    },\n    set(val) {\n      // Backwards compat.\n      if (this._readableState) {\n        this._readableState.readable = !!val\n      }\n    }\n  },\n  readableDidRead: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.dataEmitted\n    }\n  },\n  readableAborted: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return !!(\n        this._readableState.readable !== false &&\n        (this._readableState.destroyed || this._readableState.errored) &&\n        !this._readableState.endEmitted\n      )\n    }\n  },\n  readableHighWaterMark: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.highWaterMark\n    }\n  },\n  readableBuffer: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState && this._readableState.buffer\n    }\n  },\n  readableFlowing: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.flowing\n    },\n    set: function (state) {\n      if (this._readableState) {\n        this._readableState.flowing = state\n      }\n    }\n  },\n  readableLength: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState.length\n    }\n  },\n  readableObjectMode: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.objectMode : false\n    }\n  },\n  readableEncoding: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.encoding : null\n    }\n  },\n  errored: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.errored : null\n    }\n  },\n  closed: {\n    __proto__: null,\n    get() {\n      return this._readableState ? this._readableState.closed : false\n    }\n  },\n  destroyed: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.destroyed : false\n    },\n    set(value) {\n      // We ignore the value if the stream\n      // has not been initialized yet.\n      if (!this._readableState) {\n        return\n      }\n\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      this._readableState.destroyed = value\n    }\n  },\n  readableEnded: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.endEmitted : false\n    }\n  }\n})\nObjectDefineProperties(ReadableState.prototype, {\n  // Legacy getter for `pipesCount`.\n  pipesCount: {\n    __proto__: null,\n    get() {\n      return this.pipes.length\n    }\n  },\n  // Legacy property for `paused`.\n  paused: {\n    __proto__: null,\n    get() {\n      return this[kPaused] !== false\n    },\n    set(value) {\n      this[kPaused] = !!value\n    }\n  }\n})\n\n// Exposed for testing purposes only.\nReadable._fromList = fromList\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered.\n  if (state.length === 0) return null\n  let ret\n  if (state.objectMode) ret = state.buffer.shift()\n  else if (!n || n >= state.length) {\n    // Read it all, truncate the list.\n    if (state.decoder) ret = state.buffer.join('')\n    else if (state.buffer.length === 1) ret = state.buffer.first()\n    else ret = state.buffer.concat(state.length)\n    state.buffer.clear()\n  } else {\n    // read part of list.\n    ret = state.buffer.consume(n, state.decoder)\n  }\n  return ret\n}\nfunction endReadable(stream) {\n  const state = stream._readableState\n  debug('endReadable', state.endEmitted)\n  if (!state.endEmitted) {\n    state.ended = true\n    process.nextTick(endReadableNT, state, stream)\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length)\n\n  // Check that we didn't get one last unshift.\n  if (!state.errored && !state.closeEmitted && !state.endEmitted && state.length === 0) {\n    state.endEmitted = true\n    stream.emit('end')\n    if (stream.writable && stream.allowHalfOpen === false) {\n      process.nextTick(endWritableNT, stream)\n    } else if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well.\n      const wState = stream._writableState\n      const autoDestroy =\n        !wState ||\n        (wState.autoDestroy &&\n          // We don't expect the writable to ever 'finish'\n          // if writable is explicitly set to false.\n          (wState.finished || wState.writable === false))\n      if (autoDestroy) {\n        stream.destroy()\n      }\n    }\n  }\n}\nfunction endWritableNT(stream) {\n  const writable = stream.writable && !stream.writableEnded && !stream.destroyed\n  if (writable) {\n    stream.end()\n  }\n}\nReadable.from = function (iterable, opts) {\n  return from(Readable, iterable, opts)\n}\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nReadable.fromWeb = function (readableStream, options) {\n  return lazyWebStreams().newStreamReadableFromReadableStream(readableStream, options)\n}\nReadable.toWeb = function (streamReadable, options) {\n  return lazyWebStreams().newReadableStreamFromStreamReadable(streamReadable, options)\n}\nReadable.wrap = function (src, options) {\n  var _ref, _src$readableObjectMo\n  return new Readable({\n    objectMode:\n      (_ref =\n        (_src$readableObjectMo = src.readableObjectMode) !== null && _src$readableObjectMo !== undefined\n          ? _src$readableObjectMo\n          : src.objectMode) !== null && _ref !== undefined\n        ? _ref\n        : true,\n    ...options,\n    destroy(err, callback) {\n      destroyImpl.destroyer(src, err)\n      callback(err)\n    }\n  }).wrap(src)\n}\n","'use strict'\n\nconst { MathFloor, NumberIsInteger } = require('../../ours/primordials')\nconst { validateInteger } = require('../validators')\nconst { ERR_INVALID_ARG_VALUE } = require('../../ours/errors').codes\nlet defaultHighWaterMarkBytes = 16 * 1024\nlet defaultHighWaterMarkObjectMode = 16\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null\n}\nfunction getDefaultHighWaterMark(objectMode) {\n  return objectMode ? defaultHighWaterMarkObjectMode : defaultHighWaterMarkBytes\n}\nfunction setDefaultHighWaterMark(objectMode, value) {\n  validateInteger(value, 'value', 0)\n  if (objectMode) {\n    defaultHighWaterMarkObjectMode = value\n  } else {\n    defaultHighWaterMarkBytes = value\n  }\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  const hwm = highWaterMarkFrom(options, isDuplex, duplexKey)\n  if (hwm != null) {\n    if (!NumberIsInteger(hwm) || hwm < 0) {\n      const name = isDuplex ? `options.${duplexKey}` : 'options.highWaterMark'\n      throw new ERR_INVALID_ARG_VALUE(name, hwm)\n    }\n    return MathFloor(hwm)\n  }\n\n  // Default value\n  return getDefaultHighWaterMark(state.objectMode)\n}\nmodule.exports = {\n  getHighWaterMark,\n  getDefaultHighWaterMark,\n  setDefaultHighWaterMark\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict'\n\nconst { ObjectSetPrototypeOf, Symbol } = require('../../ours/primordials')\nmodule.exports = Transform\nconst { ERR_METHOD_NOT_IMPLEMENTED } = require('../../ours/errors').codes\nconst Duplex = require('./duplex')\nconst { getHighWaterMark } = require('./state')\nObjectSetPrototypeOf(Transform.prototype, Duplex.prototype)\nObjectSetPrototypeOf(Transform, Duplex)\nconst kCallback = Symbol('kCallback')\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options)\n\n  // TODO (ronag): This should preferably always be\n  // applied but would be semver-major. Or even better;\n  // make Transform a Readable with the Writable interface.\n  const readableHighWaterMark = options ? getHighWaterMark(this, options, 'readableHighWaterMark', true) : null\n  if (readableHighWaterMark === 0) {\n    // A Duplex will buffer both on the writable and readable side while\n    // a Transform just wants to buffer hwm number of elements. To avoid\n    // buffering twice we disable buffering on the writable side.\n    options = {\n      ...options,\n      highWaterMark: null,\n      readableHighWaterMark,\n      // TODO (ronag): 0 is not optimal since we have\n      // a \"bug\" where we check needDrain before calling _write and not after.\n      // Refs: https://github.com/nodejs/node/pull/32887\n      // Refs: https://github.com/nodejs/node/pull/35941\n      writableHighWaterMark: options.writableHighWaterMark || 0\n    }\n  }\n  Duplex.call(this, options)\n\n  // We have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false\n  this[kCallback] = null\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform\n    if (typeof options.flush === 'function') this._flush = options.flush\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  // Backwards compat. Some Transform streams incorrectly implement _final\n  // instead of or in addition to _flush. By using 'prefinish' instead of\n  // implementing _final we continue supporting this unfortunate use case.\n  this.on('prefinish', prefinish)\n}\nfunction final(cb) {\n  if (typeof this._flush === 'function' && !this.destroyed) {\n    this._flush((er, data) => {\n      if (er) {\n        if (cb) {\n          cb(er)\n        } else {\n          this.destroy(er)\n        }\n        return\n      }\n      if (data != null) {\n        this.push(data)\n      }\n      this.push(null)\n      if (cb) {\n        cb()\n      }\n    })\n  } else {\n    this.push(null)\n    if (cb) {\n      cb()\n    }\n  }\n}\nfunction prefinish() {\n  if (this._final !== final) {\n    final.call(this)\n  }\n}\nTransform.prototype._final = final\nTransform.prototype._transform = function (chunk, encoding, callback) {\n  throw new ERR_METHOD_NOT_IMPLEMENTED('_transform()')\n}\nTransform.prototype._write = function (chunk, encoding, callback) {\n  const rState = this._readableState\n  const wState = this._writableState\n  const length = rState.length\n  this._transform(chunk, encoding, (err, val) => {\n    if (err) {\n      callback(err)\n      return\n    }\n    if (val != null) {\n      this.push(val)\n    }\n    if (\n      wState.ended ||\n      // Backwards compat.\n      length === rState.length ||\n      // Backwards compat.\n      rState.length < rState.highWaterMark\n    ) {\n      callback()\n    } else {\n      this[kCallback] = callback\n    }\n  })\n}\nTransform.prototype._read = function () {\n  if (this[kCallback]) {\n    const callback = this[kCallback]\n    this[kCallback] = null\n    callback()\n  }\n}\n","'use strict'\n\nconst { SymbolAsyncIterator, SymbolIterator, SymbolFor } = require('../../ours/primordials')\n\n// We need to use SymbolFor to make these globally available\n// for interopt with readable-stream, i.e. readable-stream\n// and node core needs to be able to read/write private state\n// from each other for proper interoperability.\nconst kIsDestroyed = SymbolFor('nodejs.stream.destroyed')\nconst kIsErrored = SymbolFor('nodejs.stream.errored')\nconst kIsReadable = SymbolFor('nodejs.stream.readable')\nconst kIsWritable = SymbolFor('nodejs.stream.writable')\nconst kIsDisturbed = SymbolFor('nodejs.stream.disturbed')\nconst kIsClosedPromise = SymbolFor('nodejs.webstream.isClosedPromise')\nconst kControllerErrorFunction = SymbolFor('nodejs.webstream.controllerErrorFunction')\nfunction isReadableNodeStream(obj, strict = false) {\n  var _obj$_readableState\n  return !!(\n    (\n      obj &&\n      typeof obj.pipe === 'function' &&\n      typeof obj.on === 'function' &&\n      (!strict || (typeof obj.pause === 'function' && typeof obj.resume === 'function')) &&\n      (!obj._writableState ||\n        ((_obj$_readableState = obj._readableState) === null || _obj$_readableState === undefined\n          ? undefined\n          : _obj$_readableState.readable) !== false) &&\n      // Duplex\n      (!obj._writableState || obj._readableState)\n    ) // Writable has .pipe.\n  )\n}\n\nfunction isWritableNodeStream(obj) {\n  var _obj$_writableState\n  return !!(\n    (\n      obj &&\n      typeof obj.write === 'function' &&\n      typeof obj.on === 'function' &&\n      (!obj._readableState ||\n        ((_obj$_writableState = obj._writableState) === null || _obj$_writableState === undefined\n          ? undefined\n          : _obj$_writableState.writable) !== false)\n    ) // Duplex\n  )\n}\n\nfunction isDuplexNodeStream(obj) {\n  return !!(\n    obj &&\n    typeof obj.pipe === 'function' &&\n    obj._readableState &&\n    typeof obj.on === 'function' &&\n    typeof obj.write === 'function'\n  )\n}\nfunction isNodeStream(obj) {\n  return (\n    obj &&\n    (obj._readableState ||\n      obj._writableState ||\n      (typeof obj.write === 'function' && typeof obj.on === 'function') ||\n      (typeof obj.pipe === 'function' && typeof obj.on === 'function'))\n  )\n}\nfunction isReadableStream(obj) {\n  return !!(\n    obj &&\n    !isNodeStream(obj) &&\n    typeof obj.pipeThrough === 'function' &&\n    typeof obj.getReader === 'function' &&\n    typeof obj.cancel === 'function'\n  )\n}\nfunction isWritableStream(obj) {\n  return !!(obj && !isNodeStream(obj) && typeof obj.getWriter === 'function' && typeof obj.abort === 'function')\n}\nfunction isTransformStream(obj) {\n  return !!(obj && !isNodeStream(obj) && typeof obj.readable === 'object' && typeof obj.writable === 'object')\n}\nfunction isWebStream(obj) {\n  return isReadableStream(obj) || isWritableStream(obj) || isTransformStream(obj)\n}\nfunction isIterable(obj, isAsync) {\n  if (obj == null) return false\n  if (isAsync === true) return typeof obj[SymbolAsyncIterator] === 'function'\n  if (isAsync === false) return typeof obj[SymbolIterator] === 'function'\n  return typeof obj[SymbolAsyncIterator] === 'function' || typeof obj[SymbolIterator] === 'function'\n}\nfunction isDestroyed(stream) {\n  if (!isNodeStream(stream)) return null\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const state = wState || rState\n  return !!(stream.destroyed || stream[kIsDestroyed] || (state !== null && state !== undefined && state.destroyed))\n}\n\n// Have been end():d.\nfunction isWritableEnded(stream) {\n  if (!isWritableNodeStream(stream)) return null\n  if (stream.writableEnded === true) return true\n  const wState = stream._writableState\n  if (wState !== null && wState !== undefined && wState.errored) return false\n  if (typeof (wState === null || wState === undefined ? undefined : wState.ended) !== 'boolean') return null\n  return wState.ended\n}\n\n// Have emitted 'finish'.\nfunction isWritableFinished(stream, strict) {\n  if (!isWritableNodeStream(stream)) return null\n  if (stream.writableFinished === true) return true\n  const wState = stream._writableState\n  if (wState !== null && wState !== undefined && wState.errored) return false\n  if (typeof (wState === null || wState === undefined ? undefined : wState.finished) !== 'boolean') return null\n  return !!(wState.finished || (strict === false && wState.ended === true && wState.length === 0))\n}\n\n// Have been push(null):d.\nfunction isReadableEnded(stream) {\n  if (!isReadableNodeStream(stream)) return null\n  if (stream.readableEnded === true) return true\n  const rState = stream._readableState\n  if (!rState || rState.errored) return false\n  if (typeof (rState === null || rState === undefined ? undefined : rState.ended) !== 'boolean') return null\n  return rState.ended\n}\n\n// Have emitted 'end'.\nfunction isReadableFinished(stream, strict) {\n  if (!isReadableNodeStream(stream)) return null\n  const rState = stream._readableState\n  if (rState !== null && rState !== undefined && rState.errored) return false\n  if (typeof (rState === null || rState === undefined ? undefined : rState.endEmitted) !== 'boolean') return null\n  return !!(rState.endEmitted || (strict === false && rState.ended === true && rState.length === 0))\n}\nfunction isReadable(stream) {\n  if (stream && stream[kIsReadable] != null) return stream[kIsReadable]\n  if (typeof (stream === null || stream === undefined ? undefined : stream.readable) !== 'boolean') return null\n  if (isDestroyed(stream)) return false\n  return isReadableNodeStream(stream) && stream.readable && !isReadableFinished(stream)\n}\nfunction isWritable(stream) {\n  if (stream && stream[kIsWritable] != null) return stream[kIsWritable]\n  if (typeof (stream === null || stream === undefined ? undefined : stream.writable) !== 'boolean') return null\n  if (isDestroyed(stream)) return false\n  return isWritableNodeStream(stream) && stream.writable && !isWritableEnded(stream)\n}\nfunction isFinished(stream, opts) {\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (isDestroyed(stream)) {\n    return true\n  }\n  if ((opts === null || opts === undefined ? undefined : opts.readable) !== false && isReadable(stream)) {\n    return false\n  }\n  if ((opts === null || opts === undefined ? undefined : opts.writable) !== false && isWritable(stream)) {\n    return false\n  }\n  return true\n}\nfunction isWritableErrored(stream) {\n  var _stream$_writableStat, _stream$_writableStat2\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (stream.writableErrored) {\n    return stream.writableErrored\n  }\n  return (_stream$_writableStat =\n    (_stream$_writableStat2 = stream._writableState) === null || _stream$_writableStat2 === undefined\n      ? undefined\n      : _stream$_writableStat2.errored) !== null && _stream$_writableStat !== undefined\n    ? _stream$_writableStat\n    : null\n}\nfunction isReadableErrored(stream) {\n  var _stream$_readableStat, _stream$_readableStat2\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (stream.readableErrored) {\n    return stream.readableErrored\n  }\n  return (_stream$_readableStat =\n    (_stream$_readableStat2 = stream._readableState) === null || _stream$_readableStat2 === undefined\n      ? undefined\n      : _stream$_readableStat2.errored) !== null && _stream$_readableStat !== undefined\n    ? _stream$_readableStat\n    : null\n}\nfunction isClosed(stream) {\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (typeof stream.closed === 'boolean') {\n    return stream.closed\n  }\n  const wState = stream._writableState\n  const rState = stream._readableState\n  if (\n    typeof (wState === null || wState === undefined ? undefined : wState.closed) === 'boolean' ||\n    typeof (rState === null || rState === undefined ? undefined : rState.closed) === 'boolean'\n  ) {\n    return (\n      (wState === null || wState === undefined ? undefined : wState.closed) ||\n      (rState === null || rState === undefined ? undefined : rState.closed)\n    )\n  }\n  if (typeof stream._closed === 'boolean' && isOutgoingMessage(stream)) {\n    return stream._closed\n  }\n  return null\n}\nfunction isOutgoingMessage(stream) {\n  return (\n    typeof stream._closed === 'boolean' &&\n    typeof stream._defaultKeepAlive === 'boolean' &&\n    typeof stream._removedConnection === 'boolean' &&\n    typeof stream._removedContLen === 'boolean'\n  )\n}\nfunction isServerResponse(stream) {\n  return typeof stream._sent100 === 'boolean' && isOutgoingMessage(stream)\n}\nfunction isServerRequest(stream) {\n  var _stream$req\n  return (\n    typeof stream._consuming === 'boolean' &&\n    typeof stream._dumped === 'boolean' &&\n    ((_stream$req = stream.req) === null || _stream$req === undefined ? undefined : _stream$req.upgradeOrConnect) ===\n      undefined\n  )\n}\nfunction willEmitClose(stream) {\n  if (!isNodeStream(stream)) return null\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const state = wState || rState\n  return (\n    (!state && isServerResponse(stream)) || !!(state && state.autoDestroy && state.emitClose && state.closed === false)\n  )\n}\nfunction isDisturbed(stream) {\n  var _stream$kIsDisturbed\n  return !!(\n    stream &&\n    ((_stream$kIsDisturbed = stream[kIsDisturbed]) !== null && _stream$kIsDisturbed !== undefined\n      ? _stream$kIsDisturbed\n      : stream.readableDidRead || stream.readableAborted)\n  )\n}\nfunction isErrored(stream) {\n  var _ref,\n    _ref2,\n    _ref3,\n    _ref4,\n    _ref5,\n    _stream$kIsErrored,\n    _stream$_readableStat3,\n    _stream$_writableStat3,\n    _stream$_readableStat4,\n    _stream$_writableStat4\n  return !!(\n    stream &&\n    ((_ref =\n      (_ref2 =\n        (_ref3 =\n          (_ref4 =\n            (_ref5 =\n              (_stream$kIsErrored = stream[kIsErrored]) !== null && _stream$kIsErrored !== undefined\n                ? _stream$kIsErrored\n                : stream.readableErrored) !== null && _ref5 !== undefined\n              ? _ref5\n              : stream.writableErrored) !== null && _ref4 !== undefined\n            ? _ref4\n            : (_stream$_readableStat3 = stream._readableState) === null || _stream$_readableStat3 === undefined\n            ? undefined\n            : _stream$_readableStat3.errorEmitted) !== null && _ref3 !== undefined\n          ? _ref3\n          : (_stream$_writableStat3 = stream._writableState) === null || _stream$_writableStat3 === undefined\n          ? undefined\n          : _stream$_writableStat3.errorEmitted) !== null && _ref2 !== undefined\n        ? _ref2\n        : (_stream$_readableStat4 = stream._readableState) === null || _stream$_readableStat4 === undefined\n        ? undefined\n        : _stream$_readableStat4.errored) !== null && _ref !== undefined\n      ? _ref\n      : (_stream$_writableStat4 = stream._writableState) === null || _stream$_writableStat4 === undefined\n      ? undefined\n      : _stream$_writableStat4.errored)\n  )\n}\nmodule.exports = {\n  isDestroyed,\n  kIsDestroyed,\n  isDisturbed,\n  kIsDisturbed,\n  isErrored,\n  kIsErrored,\n  isReadable,\n  kIsReadable,\n  kIsClosedPromise,\n  kControllerErrorFunction,\n  kIsWritable,\n  isClosed,\n  isDuplexNodeStream,\n  isFinished,\n  isIterable,\n  isReadableNodeStream,\n  isReadableStream,\n  isReadableEnded,\n  isReadableFinished,\n  isReadableErrored,\n  isNodeStream,\n  isWebStream,\n  isWritable,\n  isWritableNodeStream,\n  isWritableStream,\n  isWritableEnded,\n  isWritableFinished,\n  isWritableErrored,\n  isServerRequest,\n  isServerResponse,\n  willEmitClose,\n  isTransformStream\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n;('use strict')\nconst {\n  ArrayPrototypeSlice,\n  Error,\n  FunctionPrototypeSymbolHasInstance,\n  ObjectDefineProperty,\n  ObjectDefineProperties,\n  ObjectSetPrototypeOf,\n  StringPrototypeToLowerCase,\n  Symbol,\n  SymbolHasInstance\n} = require('../../ours/primordials')\nmodule.exports = Writable\nWritable.WritableState = WritableState\nconst { EventEmitter: EE } = require('events')\nconst Stream = require('./legacy').Stream\nconst { Buffer } = require('buffer')\nconst destroyImpl = require('./destroy')\nconst { addAbortSignal } = require('./add-abort-signal')\nconst { getHighWaterMark, getDefaultHighWaterMark } = require('./state')\nconst {\n  ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED,\n  ERR_STREAM_ALREADY_FINISHED,\n  ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING\n} = require('../../ours/errors').codes\nconst { errorOrDestroy } = destroyImpl\nObjectSetPrototypeOf(Writable.prototype, Stream.prototype)\nObjectSetPrototypeOf(Writable, Stream)\nfunction nop() {}\nconst kOnFinished = Symbol('kOnFinished')\nfunction WritableState(options, stream, isDuplex) {\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof require('./duplex')\n\n  // Object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!(options && options.objectMode)\n  if (isDuplex) this.objectMode = this.objectMode || !!(options && options.writableObjectMode)\n\n  // The point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write().\n  this.highWaterMark = options\n    ? getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex)\n    : getDefaultHighWaterMark(false)\n\n  // if _final has been called.\n  this.finalCalled = false\n\n  // drain event flag.\n  this.needDrain = false\n  // At the start of calling end()\n  this.ending = false\n  // When end() has been called, and returned.\n  this.ended = false\n  // When 'finish' is emitted.\n  this.finished = false\n\n  // Has it been destroyed\n  this.destroyed = false\n\n  // Should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  const noDecode = !!(options && options.decodeStrings === false)\n  this.decodeStrings = !noDecode\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = (options && options.defaultEncoding) || 'utf8'\n\n  // Not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0\n\n  // A flag to see when we're in the middle of a write.\n  this.writing = false\n\n  // When true all writes will be buffered until .uncork() call.\n  this.corked = 0\n\n  // A flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true\n\n  // A flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false\n\n  // The callback that's passed to _write(chunk, cb).\n  this.onwrite = onwrite.bind(undefined, stream)\n\n  // The callback that the user supplies to write(chunk, encoding, cb).\n  this.writecb = null\n\n  // The amount that is being written when _write is called.\n  this.writelen = 0\n\n  // Storage for data passed to the afterWrite() callback in case of\n  // synchronous _write() completion.\n  this.afterWriteTickInfo = null\n  resetBuffer(this)\n\n  // Number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted.\n  this.pendingcb = 0\n\n  // Stream is still being constructed and cannot be\n  // destroyed until construction finished or failed.\n  // Async construction is opt in, therefore we start as\n  // constructed.\n  this.constructed = true\n\n  // Emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams.\n  this.prefinished = false\n\n  // True if the error was already emitted and should not be thrown again.\n  this.errorEmitted = false\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = !options || options.emitClose !== false\n\n  // Should .destroy() be called after 'finish' (and potentially 'end').\n  this.autoDestroy = !options || options.autoDestroy !== false\n\n  // Indicates whether the stream has errored. When true all write() calls\n  // should return false. This is needed since when autoDestroy\n  // is disabled we need a way to tell whether the stream has failed.\n  this.errored = null\n\n  // Indicates whether the stream has finished destroying.\n  this.closed = false\n\n  // True if close has been emitted or would have been emitted\n  // depending on emitClose.\n  this.closeEmitted = false\n  this[kOnFinished] = []\n}\nfunction resetBuffer(state) {\n  state.buffered = []\n  state.bufferedIndex = 0\n  state.allBuffers = true\n  state.allNoop = true\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  return ArrayPrototypeSlice(this.buffered, this.bufferedIndex)\n}\nObjectDefineProperty(WritableState.prototype, 'bufferedRequestCount', {\n  __proto__: null,\n  get() {\n    return this.buffered.length - this.bufferedIndex\n  }\n})\nfunction Writable(options) {\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5.\n  const isDuplex = this instanceof require('./duplex')\n  if (!isDuplex && !FunctionPrototypeSymbolHasInstance(Writable, this)) return new Writable(options)\n  this._writableState = new WritableState(options, this, isDuplex)\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write\n    if (typeof options.writev === 'function') this._writev = options.writev\n    if (typeof options.destroy === 'function') this._destroy = options.destroy\n    if (typeof options.final === 'function') this._final = options.final\n    if (typeof options.construct === 'function') this._construct = options.construct\n    if (options.signal) addAbortSignal(options.signal, this)\n  }\n  Stream.call(this, options)\n  destroyImpl.construct(this, () => {\n    const state = this._writableState\n    if (!state.writing) {\n      clearBuffer(this, state)\n    }\n    finishMaybe(this, state)\n  })\n}\nObjectDefineProperty(Writable, SymbolHasInstance, {\n  __proto__: null,\n  value: function (object) {\n    if (FunctionPrototypeSymbolHasInstance(this, object)) return true\n    if (this !== Writable) return false\n    return object && object._writableState instanceof WritableState\n  }\n})\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE())\n}\nfunction _write(stream, chunk, encoding, cb) {\n  const state = stream._writableState\n  if (typeof encoding === 'function') {\n    cb = encoding\n    encoding = state.defaultEncoding\n  } else {\n    if (!encoding) encoding = state.defaultEncoding\n    else if (encoding !== 'buffer' && !Buffer.isEncoding(encoding)) throw new ERR_UNKNOWN_ENCODING(encoding)\n    if (typeof cb !== 'function') cb = nop\n  }\n  if (chunk === null) {\n    throw new ERR_STREAM_NULL_VALUES()\n  } else if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      if (state.decodeStrings !== false) {\n        chunk = Buffer.from(chunk, encoding)\n        encoding = 'buffer'\n      }\n    } else if (chunk instanceof Buffer) {\n      encoding = 'buffer'\n    } else if (Stream._isUint8Array(chunk)) {\n      chunk = Stream._uint8ArrayToBuffer(chunk)\n      encoding = 'buffer'\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk)\n    }\n  }\n  let err\n  if (state.ending) {\n    err = new ERR_STREAM_WRITE_AFTER_END()\n  } else if (state.destroyed) {\n    err = new ERR_STREAM_DESTROYED('write')\n  }\n  if (err) {\n    process.nextTick(cb, err)\n    errorOrDestroy(stream, err, true)\n    return err\n  }\n  state.pendingcb++\n  return writeOrBuffer(stream, state, chunk, encoding, cb)\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  return _write(this, chunk, encoding, cb) === true\n}\nWritable.prototype.cork = function () {\n  this._writableState.corked++\n}\nWritable.prototype.uncork = function () {\n  const state = this._writableState\n  if (state.corked) {\n    state.corked--\n    if (!state.writing) clearBuffer(this, state)\n  }\n}\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = StringPrototypeToLowerCase(encoding)\n  if (!Buffer.isEncoding(encoding)) throw new ERR_UNKNOWN_ENCODING(encoding)\n  this._writableState.defaultEncoding = encoding\n  return this\n}\n\n// If we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, callback) {\n  const len = state.objectMode ? 1 : chunk.length\n  state.length += len\n\n  // stream._write resets state.length\n  const ret = state.length < state.highWaterMark\n  // We must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true\n  if (state.writing || state.corked || state.errored || !state.constructed) {\n    state.buffered.push({\n      chunk,\n      encoding,\n      callback\n    })\n    if (state.allBuffers && encoding !== 'buffer') {\n      state.allBuffers = false\n    }\n    if (state.allNoop && callback !== nop) {\n      state.allNoop = false\n    }\n  } else {\n    state.writelen = len\n    state.writecb = callback\n    state.writing = true\n    state.sync = true\n    stream._write(chunk, encoding, state.onwrite)\n    state.sync = false\n  }\n\n  // Return false if errored or destroyed in order to break\n  // any synchronous while(stream.write(data)) loops.\n  return ret && !state.errored && !state.destroyed\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len\n  state.writecb = cb\n  state.writing = true\n  state.sync = true\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'))\n  else if (writev) stream._writev(chunk, state.onwrite)\n  else stream._write(chunk, encoding, state.onwrite)\n  state.sync = false\n}\nfunction onwriteError(stream, state, er, cb) {\n  --state.pendingcb\n  cb(er)\n  // Ensure callbacks are invoked even when autoDestroy is\n  // not enabled. Passing `er` here doesn't make sense since\n  // it's related to one specific write, not to the buffered\n  // writes.\n  errorBuffer(state)\n  // This can emit error, but error must always follow cb.\n  errorOrDestroy(stream, er)\n}\nfunction onwrite(stream, er) {\n  const state = stream._writableState\n  const sync = state.sync\n  const cb = state.writecb\n  if (typeof cb !== 'function') {\n    errorOrDestroy(stream, new ERR_MULTIPLE_CALLBACK())\n    return\n  }\n  state.writing = false\n  state.writecb = null\n  state.length -= state.writelen\n  state.writelen = 0\n  if (er) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    er.stack // eslint-disable-line no-unused-expressions\n\n    if (!state.errored) {\n      state.errored = er\n    }\n\n    // In case of duplex streams we need to notify the readable side of the\n    // error.\n    if (stream._readableState && !stream._readableState.errored) {\n      stream._readableState.errored = er\n    }\n    if (sync) {\n      process.nextTick(onwriteError, stream, state, er, cb)\n    } else {\n      onwriteError(stream, state, er, cb)\n    }\n  } else {\n    if (state.buffered.length > state.bufferedIndex) {\n      clearBuffer(stream, state)\n    }\n    if (sync) {\n      // It is a common case that the callback passed to .write() is always\n      // the same. In that case, we do not schedule a new nextTick(), but\n      // rather just increase a counter, to improve performance and avoid\n      // memory allocations.\n      if (state.afterWriteTickInfo !== null && state.afterWriteTickInfo.cb === cb) {\n        state.afterWriteTickInfo.count++\n      } else {\n        state.afterWriteTickInfo = {\n          count: 1,\n          cb,\n          stream,\n          state\n        }\n        process.nextTick(afterWriteTick, state.afterWriteTickInfo)\n      }\n    } else {\n      afterWrite(stream, state, 1, cb)\n    }\n  }\n}\nfunction afterWriteTick({ stream, state, count, cb }) {\n  state.afterWriteTickInfo = null\n  return afterWrite(stream, state, count, cb)\n}\nfunction afterWrite(stream, state, count, cb) {\n  const needDrain = !state.ending && !stream.destroyed && state.length === 0 && state.needDrain\n  if (needDrain) {\n    state.needDrain = false\n    stream.emit('drain')\n  }\n  while (count-- > 0) {\n    state.pendingcb--\n    cb()\n  }\n  if (state.destroyed) {\n    errorBuffer(state)\n  }\n  finishMaybe(stream, state)\n}\n\n// If there's something in the buffer waiting, then invoke callbacks.\nfunction errorBuffer(state) {\n  if (state.writing) {\n    return\n  }\n  for (let n = state.bufferedIndex; n < state.buffered.length; ++n) {\n    var _state$errored\n    const { chunk, callback } = state.buffered[n]\n    const len = state.objectMode ? 1 : chunk.length\n    state.length -= len\n    callback(\n      (_state$errored = state.errored) !== null && _state$errored !== undefined\n        ? _state$errored\n        : new ERR_STREAM_DESTROYED('write')\n    )\n  }\n  const onfinishCallbacks = state[kOnFinished].splice(0)\n  for (let i = 0; i < onfinishCallbacks.length; i++) {\n    var _state$errored2\n    onfinishCallbacks[i](\n      (_state$errored2 = state.errored) !== null && _state$errored2 !== undefined\n        ? _state$errored2\n        : new ERR_STREAM_DESTROYED('end')\n    )\n  }\n  resetBuffer(state)\n}\n\n// If there's something in the buffer waiting, then process it.\nfunction clearBuffer(stream, state) {\n  if (state.corked || state.bufferProcessing || state.destroyed || !state.constructed) {\n    return\n  }\n  const { buffered, bufferedIndex, objectMode } = state\n  const bufferedLength = buffered.length - bufferedIndex\n  if (!bufferedLength) {\n    return\n  }\n  let i = bufferedIndex\n  state.bufferProcessing = true\n  if (bufferedLength > 1 && stream._writev) {\n    state.pendingcb -= bufferedLength - 1\n    const callback = state.allNoop\n      ? nop\n      : (err) => {\n          for (let n = i; n < buffered.length; ++n) {\n            buffered[n].callback(err)\n          }\n        }\n    // Make a copy of `buffered` if it's going to be used by `callback` above,\n    // since `doWrite` will mutate the array.\n    const chunks = state.allNoop && i === 0 ? buffered : ArrayPrototypeSlice(buffered, i)\n    chunks.allBuffers = state.allBuffers\n    doWrite(stream, state, true, state.length, chunks, '', callback)\n    resetBuffer(state)\n  } else {\n    do {\n      const { chunk, encoding, callback } = buffered[i]\n      buffered[i++] = null\n      const len = objectMode ? 1 : chunk.length\n      doWrite(stream, state, false, len, chunk, encoding, callback)\n    } while (i < buffered.length && !state.writing)\n    if (i === buffered.length) {\n      resetBuffer(state)\n    } else if (i > 256) {\n      buffered.splice(0, i)\n      state.bufferedIndex = 0\n    } else {\n      state.bufferedIndex = i\n    }\n  }\n  state.bufferProcessing = false\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  if (this._writev) {\n    this._writev(\n      [\n        {\n          chunk,\n          encoding\n        }\n      ],\n      cb\n    )\n  } else {\n    throw new ERR_METHOD_NOT_IMPLEMENTED('_write()')\n  }\n}\nWritable.prototype._writev = null\nWritable.prototype.end = function (chunk, encoding, cb) {\n  const state = this._writableState\n  if (typeof chunk === 'function') {\n    cb = chunk\n    chunk = null\n    encoding = null\n  } else if (typeof encoding === 'function') {\n    cb = encoding\n    encoding = null\n  }\n  let err\n  if (chunk !== null && chunk !== undefined) {\n    const ret = _write(this, chunk, encoding)\n    if (ret instanceof Error) {\n      err = ret\n    }\n  }\n\n  // .end() fully uncorks.\n  if (state.corked) {\n    state.corked = 1\n    this.uncork()\n  }\n  if (err) {\n    // Do nothing...\n  } else if (!state.errored && !state.ending) {\n    // This is forgiving in terms of unnecessary calls to end() and can hide\n    // logic errors. However, usually such errors are harmless and causing a\n    // hard error can be disproportionately destructive. It is not always\n    // trivial for the user to determine whether end() needs to be called\n    // or not.\n\n    state.ending = true\n    finishMaybe(this, state, true)\n    state.ended = true\n  } else if (state.finished) {\n    err = new ERR_STREAM_ALREADY_FINISHED('end')\n  } else if (state.destroyed) {\n    err = new ERR_STREAM_DESTROYED('end')\n  }\n  if (typeof cb === 'function') {\n    if (err || state.finished) {\n      process.nextTick(cb, err)\n    } else {\n      state[kOnFinished].push(cb)\n    }\n  }\n  return this\n}\nfunction needFinish(state) {\n  return (\n    state.ending &&\n    !state.destroyed &&\n    state.constructed &&\n    state.length === 0 &&\n    !state.errored &&\n    state.buffered.length === 0 &&\n    !state.finished &&\n    !state.writing &&\n    !state.errorEmitted &&\n    !state.closeEmitted\n  )\n}\nfunction callFinal(stream, state) {\n  let called = false\n  function onFinish(err) {\n    if (called) {\n      errorOrDestroy(stream, err !== null && err !== undefined ? err : ERR_MULTIPLE_CALLBACK())\n      return\n    }\n    called = true\n    state.pendingcb--\n    if (err) {\n      const onfinishCallbacks = state[kOnFinished].splice(0)\n      for (let i = 0; i < onfinishCallbacks.length; i++) {\n        onfinishCallbacks[i](err)\n      }\n      errorOrDestroy(stream, err, state.sync)\n    } else if (needFinish(state)) {\n      state.prefinished = true\n      stream.emit('prefinish')\n      // Backwards compat. Don't check state.sync here.\n      // Some streams assume 'finish' will be emitted\n      // asynchronously relative to _final callback.\n      state.pendingcb++\n      process.nextTick(finish, stream, state)\n    }\n  }\n  state.sync = true\n  state.pendingcb++\n  try {\n    stream._final(onFinish)\n  } catch (err) {\n    onFinish(err)\n  }\n  state.sync = false\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.finalCalled = true\n      callFinal(stream, state)\n    } else {\n      state.prefinished = true\n      stream.emit('prefinish')\n    }\n  }\n}\nfunction finishMaybe(stream, state, sync) {\n  if (needFinish(state)) {\n    prefinish(stream, state)\n    if (state.pendingcb === 0) {\n      if (sync) {\n        state.pendingcb++\n        process.nextTick(\n          (stream, state) => {\n            if (needFinish(state)) {\n              finish(stream, state)\n            } else {\n              state.pendingcb--\n            }\n          },\n          stream,\n          state\n        )\n      } else if (needFinish(state)) {\n        state.pendingcb++\n        finish(stream, state)\n      }\n    }\n  }\n}\nfunction finish(stream, state) {\n  state.pendingcb--\n  state.finished = true\n  const onfinishCallbacks = state[kOnFinished].splice(0)\n  for (let i = 0; i < onfinishCallbacks.length; i++) {\n    onfinishCallbacks[i]()\n  }\n  stream.emit('finish')\n  if (state.autoDestroy) {\n    // In case of duplex streams we need a way to detect\n    // if the readable side is ready for autoDestroy as well.\n    const rState = stream._readableState\n    const autoDestroy =\n      !rState ||\n      (rState.autoDestroy &&\n        // We don't expect the readable to ever 'end'\n        // if readable is explicitly set to false.\n        (rState.endEmitted || rState.readable === false))\n    if (autoDestroy) {\n      stream.destroy()\n    }\n  }\n}\nObjectDefineProperties(Writable.prototype, {\n  closed: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.closed : false\n    }\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.destroyed : false\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly managing destroyed.\n      if (this._writableState) {\n        this._writableState.destroyed = value\n      }\n    }\n  },\n  writable: {\n    __proto__: null,\n    get() {\n      const w = this._writableState\n      // w.writable === false means that this is part of a Duplex stream\n      // where the writable side was disabled upon construction.\n      // Compat. The user might manually disable writable side through\n      // deprecated setter.\n      return !!w && w.writable !== false && !w.destroyed && !w.errored && !w.ending && !w.ended\n    },\n    set(val) {\n      // Backwards compatible.\n      if (this._writableState) {\n        this._writableState.writable = !!val\n      }\n    }\n  },\n  writableFinished: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.finished : false\n    }\n  },\n  writableObjectMode: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.objectMode : false\n    }\n  },\n  writableBuffer: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.getBuffer()\n    }\n  },\n  writableEnded: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.ending : false\n    }\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    get() {\n      const wState = this._writableState\n      if (!wState) return false\n      return !wState.destroyed && !wState.ending && wState.needDrain\n    }\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.highWaterMark\n    }\n  },\n  writableCorked: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.corked : 0\n    }\n  },\n  writableLength: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.length\n    }\n  },\n  errored: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._writableState ? this._writableState.errored : null\n    }\n  },\n  writableAborted: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return !!(\n        this._writableState.writable !== false &&\n        (this._writableState.destroyed || this._writableState.errored) &&\n        !this._writableState.finished\n      )\n    }\n  }\n})\nconst destroy = destroyImpl.destroy\nWritable.prototype.destroy = function (err, cb) {\n  const state = this._writableState\n\n  // Invoke pending callbacks.\n  if (!state.destroyed && (state.bufferedIndex < state.buffered.length || state[kOnFinished].length)) {\n    process.nextTick(errorBuffer, state)\n  }\n  destroy.call(this, err, cb)\n  return this\n}\nWritable.prototype._undestroy = destroyImpl.undestroy\nWritable.prototype._destroy = function (err, cb) {\n  cb(err)\n}\nWritable.prototype[EE.captureRejectionSymbol] = function (err) {\n  this.destroy(err)\n}\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nWritable.fromWeb = function (writableStream, options) {\n  return lazyWebStreams().newStreamWritableFromWritableStream(writableStream, options)\n}\nWritable.toWeb = function (streamWritable) {\n  return lazyWebStreams().newWritableStreamFromStreamWritable(streamWritable)\n}\n","/* eslint jsdoc/require-jsdoc: \"error\" */\n\n'use strict'\n\nconst {\n  ArrayIsArray,\n  ArrayPrototypeIncludes,\n  ArrayPrototypeJoin,\n  ArrayPrototypeMap,\n  NumberIsInteger,\n  NumberIsNaN,\n  NumberMAX_SAFE_INTEGER,\n  NumberMIN_SAFE_INTEGER,\n  NumberParseInt,\n  ObjectPrototypeHasOwnProperty,\n  RegExpPrototypeExec,\n  String,\n  StringPrototypeToUpperCase,\n  StringPrototypeTrim\n} = require('../ours/primordials')\nconst {\n  hideStackFrames,\n  codes: { ERR_SOCKET_BAD_PORT, ERR_INVALID_ARG_TYPE, ERR_INVALID_ARG_VALUE, ERR_OUT_OF_RANGE, ERR_UNKNOWN_SIGNAL }\n} = require('../ours/errors')\nconst { normalizeEncoding } = require('../ours/util')\nconst { isAsyncFunction, isArrayBufferView } = require('../ours/util').types\nconst signals = {}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isInt32(value) {\n  return value === (value | 0)\n}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isUint32(value) {\n  return value === value >>> 0\n}\nconst octalReg = /^[0-7]+$/\nconst modeDesc = 'must be a 32-bit unsigned integer or an octal string'\n\n/**\n * Parse and validate values that will be converted into mode_t (the S_*\n * constants). Only valid numbers and octal strings are allowed. They could be\n * converted to 32-bit unsigned integers or non-negative signed integers in the\n * C++ land, but any value higher than 0o777 will result in platform-specific\n * behaviors.\n * @param {*} value Values to be validated\n * @param {string} name Name of the argument\n * @param {number} [def] If specified, will be returned for invalid values\n * @returns {number}\n */\nfunction parseFileMode(value, name, def) {\n  if (typeof value === 'undefined') {\n    value = def\n  }\n  if (typeof value === 'string') {\n    if (RegExpPrototypeExec(octalReg, value) === null) {\n      throw new ERR_INVALID_ARG_VALUE(name, value, modeDesc)\n    }\n    value = NumberParseInt(value, 8)\n  }\n  validateUint32(value, name)\n  return value\n}\n\n/**\n * @callback validateInteger\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateInteger} */\nconst validateInteger = hideStackFrames((value, name, min = NumberMIN_SAFE_INTEGER, max = NumberMAX_SAFE_INTEGER) => {\n  if (typeof value !== 'number') throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  if (!NumberIsInteger(value)) throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  if (value < min || value > max) throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n})\n\n/**\n * @callback validateInt32\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateInt32} */\nconst validateInt32 = hideStackFrames((value, name, min = -2147483648, max = 2147483647) => {\n  // The defaults for min and max correspond to the limits of 32-bit integers.\n  if (typeof value !== 'number') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n  if (!NumberIsInteger(value)) {\n    throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  }\n  if (value < min || value > max) {\n    throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n  }\n})\n\n/**\n * @callback validateUint32\n * @param {*} value\n * @param {string} name\n * @param {number|boolean} [positive=false]\n * @returns {asserts value is number}\n */\n\n/** @type {validateUint32} */\nconst validateUint32 = hideStackFrames((value, name, positive = false) => {\n  if (typeof value !== 'number') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n  if (!NumberIsInteger(value)) {\n    throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  }\n  const min = positive ? 1 : 0\n  // 2 ** 32 === 4294967296\n  const max = 4294967295\n  if (value < min || value > max) {\n    throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n  }\n})\n\n/**\n * @callback validateString\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is string}\n */\n\n/** @type {validateString} */\nfunction validateString(value, name) {\n  if (typeof value !== 'string') throw new ERR_INVALID_ARG_TYPE(name, 'string', value)\n}\n\n/**\n * @callback validateNumber\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateNumber} */\nfunction validateNumber(value, name, min = undefined, max) {\n  if (typeof value !== 'number') throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  if (\n    (min != null && value < min) ||\n    (max != null && value > max) ||\n    ((min != null || max != null) && NumberIsNaN(value))\n  ) {\n    throw new ERR_OUT_OF_RANGE(\n      name,\n      `${min != null ? `>= ${min}` : ''}${min != null && max != null ? ' && ' : ''}${max != null ? `<= ${max}` : ''}`,\n      value\n    )\n  }\n}\n\n/**\n * @callback validateOneOf\n * @template T\n * @param {T} value\n * @param {string} name\n * @param {T[]} oneOf\n */\n\n/** @type {validateOneOf} */\nconst validateOneOf = hideStackFrames((value, name, oneOf) => {\n  if (!ArrayPrototypeIncludes(oneOf, value)) {\n    const allowed = ArrayPrototypeJoin(\n      ArrayPrototypeMap(oneOf, (v) => (typeof v === 'string' ? `'${v}'` : String(v))),\n      ', '\n    )\n    const reason = 'must be one of: ' + allowed\n    throw new ERR_INVALID_ARG_VALUE(name, value, reason)\n  }\n})\n\n/**\n * @callback validateBoolean\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is boolean}\n */\n\n/** @type {validateBoolean} */\nfunction validateBoolean(value, name) {\n  if (typeof value !== 'boolean') throw new ERR_INVALID_ARG_TYPE(name, 'boolean', value)\n}\n\n/**\n * @param {any} options\n * @param {string} key\n * @param {boolean} defaultValue\n * @returns {boolean}\n */\nfunction getOwnPropertyValueOrDefault(options, key, defaultValue) {\n  return options == null || !ObjectPrototypeHasOwnProperty(options, key) ? defaultValue : options[key]\n}\n\n/**\n * @callback validateObject\n * @param {*} value\n * @param {string} name\n * @param {{\n *   allowArray?: boolean,\n *   allowFunction?: boolean,\n *   nullable?: boolean\n * }} [options]\n */\n\n/** @type {validateObject} */\nconst validateObject = hideStackFrames((value, name, options = null) => {\n  const allowArray = getOwnPropertyValueOrDefault(options, 'allowArray', false)\n  const allowFunction = getOwnPropertyValueOrDefault(options, 'allowFunction', false)\n  const nullable = getOwnPropertyValueOrDefault(options, 'nullable', false)\n  if (\n    (!nullable && value === null) ||\n    (!allowArray && ArrayIsArray(value)) ||\n    (typeof value !== 'object' && (!allowFunction || typeof value !== 'function'))\n  ) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Object', value)\n  }\n})\n\n/**\n * @callback validateDictionary - We are using the Web IDL Standard definition\n *                                of \"dictionary\" here, which means any value\n *                                whose Type is either Undefined, Null, or\n *                                Object (which includes functions).\n * @param {*} value\n * @param {string} name\n * @see https://webidl.spec.whatwg.org/#es-dictionary\n * @see https://tc39.es/ecma262/#table-typeof-operator-results\n */\n\n/** @type {validateDictionary} */\nconst validateDictionary = hideStackFrames((value, name) => {\n  if (value != null && typeof value !== 'object' && typeof value !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'a dictionary', value)\n  }\n})\n\n/**\n * @callback validateArray\n * @param {*} value\n * @param {string} name\n * @param {number} [minLength]\n * @returns {asserts value is any[]}\n */\n\n/** @type {validateArray} */\nconst validateArray = hideStackFrames((value, name, minLength = 0) => {\n  if (!ArrayIsArray(value)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Array', value)\n  }\n  if (value.length < minLength) {\n    const reason = `must be longer than ${minLength}`\n    throw new ERR_INVALID_ARG_VALUE(name, value, reason)\n  }\n})\n\n/**\n * @callback validateStringArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is string[]}\n */\n\n/** @type {validateStringArray} */\nfunction validateStringArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    validateString(value[i], `${name}[${i}]`)\n  }\n}\n\n/**\n * @callback validateBooleanArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is boolean[]}\n */\n\n/** @type {validateBooleanArray} */\nfunction validateBooleanArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    validateBoolean(value[i], `${name}[${i}]`)\n  }\n}\n\n/**\n * @callback validateAbortSignalArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is AbortSignal[]}\n */\n\n/** @type {validateAbortSignalArray} */\nfunction validateAbortSignalArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    const signal = value[i]\n    const indexedName = `${name}[${i}]`\n    if (signal == null) {\n      throw new ERR_INVALID_ARG_TYPE(indexedName, 'AbortSignal', signal)\n    }\n    validateAbortSignal(signal, indexedName)\n  }\n}\n\n/**\n * @param {*} signal\n * @param {string} [name='signal']\n * @returns {asserts signal is keyof signals}\n */\nfunction validateSignalName(signal, name = 'signal') {\n  validateString(signal, name)\n  if (signals[signal] === undefined) {\n    if (signals[StringPrototypeToUpperCase(signal)] !== undefined) {\n      throw new ERR_UNKNOWN_SIGNAL(signal + ' (signals must use all capital letters)')\n    }\n    throw new ERR_UNKNOWN_SIGNAL(signal)\n  }\n}\n\n/**\n * @callback validateBuffer\n * @param {*} buffer\n * @param {string} [name='buffer']\n * @returns {asserts buffer is ArrayBufferView}\n */\n\n/** @type {validateBuffer} */\nconst validateBuffer = hideStackFrames((buffer, name = 'buffer') => {\n  if (!isArrayBufferView(buffer)) {\n    throw new ERR_INVALID_ARG_TYPE(name, ['Buffer', 'TypedArray', 'DataView'], buffer)\n  }\n})\n\n/**\n * @param {string} data\n * @param {string} encoding\n */\nfunction validateEncoding(data, encoding) {\n  const normalizedEncoding = normalizeEncoding(encoding)\n  const length = data.length\n  if (normalizedEncoding === 'hex' && length % 2 !== 0) {\n    throw new ERR_INVALID_ARG_VALUE('encoding', encoding, `is invalid for data of length ${length}`)\n  }\n}\n\n/**\n * Check that the port number is not NaN when coerced to a number,\n * is an integer and that it falls within the legal range of port numbers.\n * @param {*} port\n * @param {string} [name='Port']\n * @param {boolean} [allowZero=true]\n * @returns {number}\n */\nfunction validatePort(port, name = 'Port', allowZero = true) {\n  if (\n    (typeof port !== 'number' && typeof port !== 'string') ||\n    (typeof port === 'string' && StringPrototypeTrim(port).length === 0) ||\n    +port !== +port >>> 0 ||\n    port > 0xffff ||\n    (port === 0 && !allowZero)\n  ) {\n    throw new ERR_SOCKET_BAD_PORT(name, port, allowZero)\n  }\n  return port | 0\n}\n\n/**\n * @callback validateAbortSignal\n * @param {*} signal\n * @param {string} name\n */\n\n/** @type {validateAbortSignal} */\nconst validateAbortSignal = hideStackFrames((signal, name) => {\n  if (signal !== undefined && (signal === null || typeof signal !== 'object' || !('aborted' in signal))) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n})\n\n/**\n * @callback validateFunction\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is Function}\n */\n\n/** @type {validateFunction} */\nconst validateFunction = hideStackFrames((value, name) => {\n  if (typeof value !== 'function') throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n})\n\n/**\n * @callback validatePlainFunction\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is Function}\n */\n\n/** @type {validatePlainFunction} */\nconst validatePlainFunction = hideStackFrames((value, name) => {\n  if (typeof value !== 'function' || isAsyncFunction(value)) throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n})\n\n/**\n * @callback validateUndefined\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is undefined}\n */\n\n/** @type {validateUndefined} */\nconst validateUndefined = hideStackFrames((value, name) => {\n  if (value !== undefined) throw new ERR_INVALID_ARG_TYPE(name, 'undefined', value)\n})\n\n/**\n * @template T\n * @param {T} value\n * @param {string} name\n * @param {T[]} union\n */\nfunction validateUnion(value, name, union) {\n  if (!ArrayPrototypeIncludes(union, value)) {\n    throw new ERR_INVALID_ARG_TYPE(name, `('${ArrayPrototypeJoin(union, '|')}')`, value)\n  }\n}\n\n/*\n  The rules for the Link header field are described here:\n  https://www.rfc-editor.org/rfc/rfc8288.html#section-3\n\n  This regex validates any string surrounded by angle brackets\n  (not necessarily a valid URI reference) followed by zero or more\n  link-params separated by semicolons.\n*/\nconst linkValueRegExp = /^(?:<[^>]*>)(?:\\s*;\\s*[^;\"\\s]+(?:=(\")?[^;\"\\s]*\\1)?)*$/\n\n/**\n * @param {any} value\n * @param {string} name\n */\nfunction validateLinkHeaderFormat(value, name) {\n  if (typeof value === 'undefined' || !RegExpPrototypeExec(linkValueRegExp, value)) {\n    throw new ERR_INVALID_ARG_VALUE(\n      name,\n      value,\n      'must be an array or string of format \"</styles.css>; rel=preload; as=style\"'\n    )\n  }\n}\n\n/**\n * @param {any} hints\n * @return {string}\n */\nfunction validateLinkHeaderValue(hints) {\n  if (typeof hints === 'string') {\n    validateLinkHeaderFormat(hints, 'hints')\n    return hints\n  } else if (ArrayIsArray(hints)) {\n    const hintsLength = hints.length\n    let result = ''\n    if (hintsLength === 0) {\n      return result\n    }\n    for (let i = 0; i < hintsLength; i++) {\n      const link = hints[i]\n      validateLinkHeaderFormat(link, 'hints')\n      result += link\n      if (i !== hintsLength - 1) {\n        result += ', '\n      }\n    }\n    return result\n  }\n  throw new ERR_INVALID_ARG_VALUE(\n    'hints',\n    hints,\n    'must be an array or string of format \"</styles.css>; rel=preload; as=style\"'\n  )\n}\nmodule.exports = {\n  isInt32,\n  isUint32,\n  parseFileMode,\n  validateArray,\n  validateStringArray,\n  validateBooleanArray,\n  validateAbortSignalArray,\n  validateBoolean,\n  validateBuffer,\n  validateDictionary,\n  validateEncoding,\n  validateFunction,\n  validateInt32,\n  validateInteger,\n  validateNumber,\n  validateObject,\n  validateOneOf,\n  validatePlainFunction,\n  validatePort,\n  validateSignalName,\n  validateString,\n  validateUint32,\n  validateUndefined,\n  validateUnion,\n  validateAbortSignal,\n  validateLinkHeaderValue\n}\n","'use strict'\n\nconst CustomStream = require('../stream')\nconst promises = require('../stream/promises')\nconst originalDestroy = CustomStream.Readable.destroy\nmodule.exports = CustomStream.Readable\n\n// Explicit export naming is needed for ESM\nmodule.exports._uint8ArrayToBuffer = CustomStream._uint8ArrayToBuffer\nmodule.exports._isUint8Array = CustomStream._isUint8Array\nmodule.exports.isDisturbed = CustomStream.isDisturbed\nmodule.exports.isErrored = CustomStream.isErrored\nmodule.exports.isReadable = CustomStream.isReadable\nmodule.exports.Readable = CustomStream.Readable\nmodule.exports.Writable = CustomStream.Writable\nmodule.exports.Duplex = CustomStream.Duplex\nmodule.exports.Transform = CustomStream.Transform\nmodule.exports.PassThrough = CustomStream.PassThrough\nmodule.exports.addAbortSignal = CustomStream.addAbortSignal\nmodule.exports.finished = CustomStream.finished\nmodule.exports.destroy = CustomStream.destroy\nmodule.exports.destroy = originalDestroy\nmodule.exports.pipeline = CustomStream.pipeline\nmodule.exports.compose = CustomStream.compose\nObject.defineProperty(CustomStream, 'promises', {\n  configurable: true,\n  enumerable: true,\n  get() {\n    return promises\n  }\n})\nmodule.exports.Stream = CustomStream.Stream\n\n// Allow default importing\nmodule.exports.default = module.exports\n","'use strict'\n\nconst { format, inspect, AggregateError: CustomAggregateError } = require('./util')\n\n/*\n  This file is a reduced and adapted version of the main lib/internal/errors.js file defined at\n\n  https://github.com/nodejs/node/blob/master/lib/internal/errors.js\n\n  Don't try to replace with the original file and keep it up to date (starting from E(...) definitions)\n  with the upstream file.\n*/\n\nconst AggregateError = globalThis.AggregateError || CustomAggregateError\nconst kIsNodeError = Symbol('kIsNodeError')\nconst kTypes = [\n  'string',\n  'function',\n  'number',\n  'object',\n  // Accept 'Function' and 'Object' as alternative to the lower cased version.\n  'Function',\n  'Object',\n  'boolean',\n  'bigint',\n  'symbol'\n]\nconst classRegExp = /^([A-Z][a-z0-9]*)+$/\nconst nodeInternalPrefix = '__node_internal_'\nconst codes = {}\nfunction assert(value, message) {\n  if (!value) {\n    throw new codes.ERR_INTERNAL_ASSERTION(message)\n  }\n}\n\n// Only use this for integers! Decimal numbers do not work with this function.\nfunction addNumericalSeparator(val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\nfunction getMessage(key, msg, args) {\n  if (typeof msg === 'function') {\n    assert(\n      msg.length <= args.length,\n      // Default options do not count.\n      `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${msg.length}).`\n    )\n    return msg(...args)\n  }\n  const expectedLength = (msg.match(/%[dfijoOs]/g) || []).length\n  assert(\n    expectedLength === args.length,\n    `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${expectedLength}).`\n  )\n  if (args.length === 0) {\n    return msg\n  }\n  return format(msg, ...args)\n}\nfunction E(code, message, Base) {\n  if (!Base) {\n    Base = Error\n  }\n  class NodeError extends Base {\n    constructor(...args) {\n      super(getMessage(code, message, args))\n    }\n    toString() {\n      return `${this.name} [${code}]: ${this.message}`\n    }\n  }\n  Object.defineProperties(NodeError.prototype, {\n    name: {\n      value: Base.name,\n      writable: true,\n      enumerable: false,\n      configurable: true\n    },\n    toString: {\n      value() {\n        return `${this.name} [${code}]: ${this.message}`\n      },\n      writable: true,\n      enumerable: false,\n      configurable: true\n    }\n  })\n  NodeError.prototype.code = code\n  NodeError.prototype[kIsNodeError] = true\n  codes[code] = NodeError\n}\nfunction hideStackFrames(fn) {\n  // We rename the functions that will be hidden to cut off the stacktrace\n  // at the outermost one\n  const hidden = nodeInternalPrefix + fn.name\n  Object.defineProperty(fn, 'name', {\n    value: hidden\n  })\n  return fn\n}\nfunction aggregateTwoErrors(innerError, outerError) {\n  if (innerError && outerError && innerError !== outerError) {\n    if (Array.isArray(outerError.errors)) {\n      // If `outerError` is already an `AggregateError`.\n      outerError.errors.push(innerError)\n      return outerError\n    }\n    const err = new AggregateError([outerError, innerError], outerError.message)\n    err.code = outerError.code\n    return err\n  }\n  return innerError || outerError\n}\nclass AbortError extends Error {\n  constructor(message = 'The operation was aborted', options = undefined) {\n    if (options !== undefined && typeof options !== 'object') {\n      throw new codes.ERR_INVALID_ARG_TYPE('options', 'Object', options)\n    }\n    super(message, options)\n    this.code = 'ABORT_ERR'\n    this.name = 'AbortError'\n  }\n}\nE('ERR_ASSERTION', '%s', Error)\nE(\n  'ERR_INVALID_ARG_TYPE',\n  (name, expected, actual) => {\n    assert(typeof name === 'string', \"'name' must be a string\")\n    if (!Array.isArray(expected)) {\n      expected = [expected]\n    }\n    let msg = 'The '\n    if (name.endsWith(' argument')) {\n      // For cases like 'first argument'\n      msg += `${name} `\n    } else {\n      msg += `\"${name}\" ${name.includes('.') ? 'property' : 'argument'} `\n    }\n    msg += 'must be '\n    const types = []\n    const instances = []\n    const other = []\n    for (const value of expected) {\n      assert(typeof value === 'string', 'All expected entries have to be of type string')\n      if (kTypes.includes(value)) {\n        types.push(value.toLowerCase())\n      } else if (classRegExp.test(value)) {\n        instances.push(value)\n      } else {\n        assert(value !== 'object', 'The value \"object\" should be written as \"Object\"')\n        other.push(value)\n      }\n    }\n\n    // Special handle `object` in case other instances are allowed to outline\n    // the differences between each other.\n    if (instances.length > 0) {\n      const pos = types.indexOf('object')\n      if (pos !== -1) {\n        types.splice(types, pos, 1)\n        instances.push('Object')\n      }\n    }\n    if (types.length > 0) {\n      switch (types.length) {\n        case 1:\n          msg += `of type ${types[0]}`\n          break\n        case 2:\n          msg += `one of type ${types[0]} or ${types[1]}`\n          break\n        default: {\n          const last = types.pop()\n          msg += `one of type ${types.join(', ')}, or ${last}`\n        }\n      }\n      if (instances.length > 0 || other.length > 0) {\n        msg += ' or '\n      }\n    }\n    if (instances.length > 0) {\n      switch (instances.length) {\n        case 1:\n          msg += `an instance of ${instances[0]}`\n          break\n        case 2:\n          msg += `an instance of ${instances[0]} or ${instances[1]}`\n          break\n        default: {\n          const last = instances.pop()\n          msg += `an instance of ${instances.join(', ')}, or ${last}`\n        }\n      }\n      if (other.length > 0) {\n        msg += ' or '\n      }\n    }\n    switch (other.length) {\n      case 0:\n        break\n      case 1:\n        if (other[0].toLowerCase() !== other[0]) {\n          msg += 'an '\n        }\n        msg += `${other[0]}`\n        break\n      case 2:\n        msg += `one of ${other[0]} or ${other[1]}`\n        break\n      default: {\n        const last = other.pop()\n        msg += `one of ${other.join(', ')}, or ${last}`\n      }\n    }\n    if (actual == null) {\n      msg += `. Received ${actual}`\n    } else if (typeof actual === 'function' && actual.name) {\n      msg += `. Received function ${actual.name}`\n    } else if (typeof actual === 'object') {\n      var _actual$constructor\n      if (\n        (_actual$constructor = actual.constructor) !== null &&\n        _actual$constructor !== undefined &&\n        _actual$constructor.name\n      ) {\n        msg += `. Received an instance of ${actual.constructor.name}`\n      } else {\n        const inspected = inspect(actual, {\n          depth: -1\n        })\n        msg += `. Received ${inspected}`\n      }\n    } else {\n      let inspected = inspect(actual, {\n        colors: false\n      })\n      if (inspected.length > 25) {\n        inspected = `${inspected.slice(0, 25)}...`\n      }\n      msg += `. Received type ${typeof actual} (${inspected})`\n    }\n    return msg\n  },\n  TypeError\n)\nE(\n  'ERR_INVALID_ARG_VALUE',\n  (name, value, reason = 'is invalid') => {\n    let inspected = inspect(value)\n    if (inspected.length > 128) {\n      inspected = inspected.slice(0, 128) + '...'\n    }\n    const type = name.includes('.') ? 'property' : 'argument'\n    return `The ${type} '${name}' ${reason}. Received ${inspected}`\n  },\n  TypeError\n)\nE(\n  'ERR_INVALID_RETURN_VALUE',\n  (input, name, value) => {\n    var _value$constructor\n    const type =\n      value !== null &&\n      value !== undefined &&\n      (_value$constructor = value.constructor) !== null &&\n      _value$constructor !== undefined &&\n      _value$constructor.name\n        ? `instance of ${value.constructor.name}`\n        : `type ${typeof value}`\n    return `Expected ${input} to be returned from the \"${name}\"` + ` function but got ${type}.`\n  },\n  TypeError\n)\nE(\n  'ERR_MISSING_ARGS',\n  (...args) => {\n    assert(args.length > 0, 'At least one arg needs to be specified')\n    let msg\n    const len = args.length\n    args = (Array.isArray(args) ? args : [args]).map((a) => `\"${a}\"`).join(' or ')\n    switch (len) {\n      case 1:\n        msg += `The ${args[0]} argument`\n        break\n      case 2:\n        msg += `The ${args[0]} and ${args[1]} arguments`\n        break\n      default:\n        {\n          const last = args.pop()\n          msg += `The ${args.join(', ')}, and ${last} arguments`\n        }\n        break\n    }\n    return `${msg} must be specified`\n  },\n  TypeError\n)\nE(\n  'ERR_OUT_OF_RANGE',\n  (str, range, input) => {\n    assert(range, 'Missing \"range\" argument')\n    let received\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > 2n ** 32n || input < -(2n ** 32n)) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    } else {\n      received = inspect(input)\n    }\n    return `The value of \"${str}\" is out of range. It must be ${range}. Received ${received}`\n  },\n  RangeError\n)\nE('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times', Error)\nE('ERR_METHOD_NOT_IMPLEMENTED', 'The %s method is not implemented', Error)\nE('ERR_STREAM_ALREADY_FINISHED', 'Cannot call %s after a stream was finished', Error)\nE('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable', Error)\nE('ERR_STREAM_DESTROYED', 'Cannot call %s after a stream was destroyed', Error)\nE('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError)\nE('ERR_STREAM_PREMATURE_CLOSE', 'Premature close', Error)\nE('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF', Error)\nE('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event', Error)\nE('ERR_STREAM_WRITE_AFTER_END', 'write after end', Error)\nE('ERR_UNKNOWN_ENCODING', 'Unknown encoding: %s', TypeError)\nmodule.exports = {\n  AbortError,\n  aggregateTwoErrors: hideStackFrames(aggregateTwoErrors),\n  hideStackFrames,\n  codes\n}\n","'use strict'\n\n/*\n  This file is a reduced and adapted version of the main lib/internal/per_context/primordials.js file defined at\n\n  https://github.com/nodejs/node/blob/master/lib/internal/per_context/primordials.js\n\n  Don't try to replace with the original file and keep it up to date with the upstream file.\n*/\nmodule.exports = {\n  ArrayIsArray(self) {\n    return Array.isArray(self)\n  },\n  ArrayPrototypeIncludes(self, el) {\n    return self.includes(el)\n  },\n  ArrayPrototypeIndexOf(self, el) {\n    return self.indexOf(el)\n  },\n  ArrayPrototypeJoin(self, sep) {\n    return self.join(sep)\n  },\n  ArrayPrototypeMap(self, fn) {\n    return self.map(fn)\n  },\n  ArrayPrototypePop(self, el) {\n    return self.pop(el)\n  },\n  ArrayPrototypePush(self, el) {\n    return self.push(el)\n  },\n  ArrayPrototypeSlice(self, start, end) {\n    return self.slice(start, end)\n  },\n  Error,\n  FunctionPrototypeCall(fn, thisArgs, ...args) {\n    return fn.call(thisArgs, ...args)\n  },\n  FunctionPrototypeSymbolHasInstance(self, instance) {\n    return Function.prototype[Symbol.hasInstance].call(self, instance)\n  },\n  MathFloor: Math.floor,\n  Number,\n  NumberIsInteger: Number.isInteger,\n  NumberIsNaN: Number.isNaN,\n  NumberMAX_SAFE_INTEGER: Number.MAX_SAFE_INTEGER,\n  NumberMIN_SAFE_INTEGER: Number.MIN_SAFE_INTEGER,\n  NumberParseInt: Number.parseInt,\n  ObjectDefineProperties(self, props) {\n    return Object.defineProperties(self, props)\n  },\n  ObjectDefineProperty(self, name, prop) {\n    return Object.defineProperty(self, name, prop)\n  },\n  ObjectGetOwnPropertyDescriptor(self, name) {\n    return Object.getOwnPropertyDescriptor(self, name)\n  },\n  ObjectKeys(obj) {\n    return Object.keys(obj)\n  },\n  ObjectSetPrototypeOf(target, proto) {\n    return Object.setPrototypeOf(target, proto)\n  },\n  Promise,\n  PromisePrototypeCatch(self, fn) {\n    return self.catch(fn)\n  },\n  PromisePrototypeThen(self, thenFn, catchFn) {\n    return self.then(thenFn, catchFn)\n  },\n  PromiseReject(err) {\n    return Promise.reject(err)\n  },\n  PromiseResolve(val) {\n    return Promise.resolve(val)\n  },\n  ReflectApply: Reflect.apply,\n  RegExpPrototypeTest(self, value) {\n    return self.test(value)\n  },\n  SafeSet: Set,\n  String,\n  StringPrototypeSlice(self, start, end) {\n    return self.slice(start, end)\n  },\n  StringPrototypeToLowerCase(self) {\n    return self.toLowerCase()\n  },\n  StringPrototypeToUpperCase(self) {\n    return self.toUpperCase()\n  },\n  StringPrototypeTrim(self) {\n    return self.trim()\n  },\n  Symbol,\n  SymbolFor: Symbol.for,\n  SymbolAsyncIterator: Symbol.asyncIterator,\n  SymbolHasInstance: Symbol.hasInstance,\n  SymbolIterator: Symbol.iterator,\n  SymbolDispose: Symbol.dispose || Symbol('Symbol.dispose'),\n  SymbolAsyncDispose: Symbol.asyncDispose || Symbol('Symbol.asyncDispose'),\n  TypedArrayPrototypeSet(self, buf, len) {\n    return self.set(buf, len)\n  },\n  Boolean: Boolean,\n  Uint8Array\n}\n","'use strict'\n\nconst bufferModule = require('buffer')\nconst { kResistStopPropagation, SymbolDispose } = require('./primordials')\nconst AbortSignal = globalThis.AbortSignal || require('abort-controller').AbortSignal\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst AsyncFunction = Object.getPrototypeOf(async function () {}).constructor\nconst Blob = globalThis.Blob || bufferModule.Blob\n/* eslint-disable indent */\nconst isBlob =\n  typeof Blob !== 'undefined'\n    ? function isBlob(b) {\n        // eslint-disable-next-line indent\n        return b instanceof Blob\n      }\n    : function isBlob(b) {\n        return false\n      }\n/* eslint-enable indent */\n\nconst validateAbortSignal = (signal, name) => {\n  if (signal !== undefined && (signal === null || typeof signal !== 'object' || !('aborted' in signal))) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n}\nconst validateFunction = (value, name) => {\n  if (typeof value !== 'function') throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n}\n\n// This is a simplified version of AggregateError\nclass AggregateError extends Error {\n  constructor(errors) {\n    if (!Array.isArray(errors)) {\n      throw new TypeError(`Expected input to be an Array, got ${typeof errors}`)\n    }\n    let message = ''\n    for (let i = 0; i < errors.length; i++) {\n      message += `    ${errors[i].stack}\\n`\n    }\n    super(message)\n    this.name = 'AggregateError'\n    this.errors = errors\n  }\n}\nmodule.exports = {\n  AggregateError,\n  kEmptyObject: Object.freeze({}),\n  once(callback) {\n    let called = false\n    return function (...args) {\n      if (called) {\n        return\n      }\n      called = true\n      callback.apply(this, args)\n    }\n  },\n  createDeferredPromise: function () {\n    let resolve\n    let reject\n\n    // eslint-disable-next-line promise/param-names\n    const promise = new Promise((res, rej) => {\n      resolve = res\n      reject = rej\n    })\n    return {\n      promise,\n      resolve,\n      reject\n    }\n  },\n  promisify(fn) {\n    return new Promise((resolve, reject) => {\n      fn((err, ...args) => {\n        if (err) {\n          return reject(err)\n        }\n        return resolve(...args)\n      })\n    })\n  },\n  debuglog() {\n    return function () {}\n  },\n  format(format, ...args) {\n    // Simplified version of https://nodejs.org/api/util.html#utilformatformat-args\n    return format.replace(/%([sdifj])/g, function (...[_unused, type]) {\n      const replacement = args.shift()\n      if (type === 'f') {\n        return replacement.toFixed(6)\n      } else if (type === 'j') {\n        return JSON.stringify(replacement)\n      } else if (type === 's' && typeof replacement === 'object') {\n        const ctor = replacement.constructor !== Object ? replacement.constructor.name : ''\n        return `${ctor} {}`.trim()\n      } else {\n        return replacement.toString()\n      }\n    })\n  },\n  inspect(value) {\n    // Vastly simplified version of https://nodejs.org/api/util.html#utilinspectobject-options\n    switch (typeof value) {\n      case 'string':\n        if (value.includes(\"'\")) {\n          if (!value.includes('\"')) {\n            return `\"${value}\"`\n          } else if (!value.includes('`') && !value.includes('${')) {\n            return `\\`${value}\\``\n          }\n        }\n        return `'${value}'`\n      case 'number':\n        if (isNaN(value)) {\n          return 'NaN'\n        } else if (Object.is(value, -0)) {\n          return String(value)\n        }\n        return value\n      case 'bigint':\n        return `${String(value)}n`\n      case 'boolean':\n      case 'undefined':\n        return String(value)\n      case 'object':\n        return '{}'\n    }\n  },\n  types: {\n    isAsyncFunction(fn) {\n      return fn instanceof AsyncFunction\n    },\n    isArrayBufferView(arr) {\n      return ArrayBuffer.isView(arr)\n    }\n  },\n  isBlob,\n  deprecate(fn, message) {\n    return fn\n  },\n  addAbortListener:\n    require('events').addAbortListener ||\n    function addAbortListener(signal, listener) {\n      if (signal === undefined) {\n        throw new ERR_INVALID_ARG_TYPE('signal', 'AbortSignal', signal)\n      }\n      validateAbortSignal(signal, 'signal')\n      validateFunction(listener, 'listener')\n      let removeEventListener\n      if (signal.aborted) {\n        queueMicrotask(() => listener())\n      } else {\n        signal.addEventListener('abort', listener, {\n          __proto__: null,\n          once: true,\n          [kResistStopPropagation]: true\n        })\n        removeEventListener = () => {\n          signal.removeEventListener('abort', listener)\n        }\n      }\n      return {\n        __proto__: null,\n        [SymbolDispose]() {\n          var _removeEventListener\n          ;(_removeEventListener = removeEventListener) === null || _removeEventListener === undefined\n            ? undefined\n            : _removeEventListener()\n        }\n      }\n    },\n  AbortSignalAny:\n    AbortSignal.any ||\n    function AbortSignalAny(signals) {\n      // Fast path if there is only one signal.\n      if (signals.length === 1) {\n        return signals[0]\n      }\n      const ac = new AbortController()\n      const abort = () => ac.abort()\n      signals.forEach((signal) => {\n        validateAbortSignal(signal, 'signals')\n        signal.addEventListener('abort', abort, {\n          once: true\n        })\n      })\n      ac.signal.addEventListener(\n        'abort',\n        () => {\n          signals.forEach((signal) => signal.removeEventListener('abort', abort))\n        },\n        {\n          once: true\n        }\n      )\n      return ac.signal\n    }\n}\nmodule.exports.promisify.custom = Symbol.for('nodejs.util.promisify.custom')\n","/* replacement start */\n\nconst { Buffer } = require('buffer')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;('use strict')\nconst { ObjectDefineProperty, ObjectKeys, ReflectApply } = require('./ours/primordials')\nconst {\n  promisify: { custom: customPromisify }\n} = require('./ours/util')\nconst { streamReturningOperators, promiseReturningOperators } = require('./internal/streams/operators')\nconst {\n  codes: { ERR_ILLEGAL_CONSTRUCTOR }\n} = require('./ours/errors')\nconst compose = require('./internal/streams/compose')\nconst { setDefaultHighWaterMark, getDefaultHighWaterMark } = require('./internal/streams/state')\nconst { pipeline } = require('./internal/streams/pipeline')\nconst { destroyer } = require('./internal/streams/destroy')\nconst eos = require('./internal/streams/end-of-stream')\nconst internalBuffer = {}\nconst promises = require('./stream/promises')\nconst utils = require('./internal/streams/utils')\nconst Stream = (module.exports = require('./internal/streams/legacy').Stream)\nStream.isDestroyed = utils.isDestroyed\nStream.isDisturbed = utils.isDisturbed\nStream.isErrored = utils.isErrored\nStream.isReadable = utils.isReadable\nStream.isWritable = utils.isWritable\nStream.Readable = require('./internal/streams/readable')\nfor (const key of ObjectKeys(streamReturningOperators)) {\n  const op = streamReturningOperators[key]\n  function fn(...args) {\n    if (new.target) {\n      throw ERR_ILLEGAL_CONSTRUCTOR()\n    }\n    return Stream.Readable.from(ReflectApply(op, this, args))\n  }\n  ObjectDefineProperty(fn, 'name', {\n    __proto__: null,\n    value: op.name\n  })\n  ObjectDefineProperty(fn, 'length', {\n    __proto__: null,\n    value: op.length\n  })\n  ObjectDefineProperty(Stream.Readable.prototype, key, {\n    __proto__: null,\n    value: fn,\n    enumerable: false,\n    configurable: true,\n    writable: true\n  })\n}\nfor (const key of ObjectKeys(promiseReturningOperators)) {\n  const op = promiseReturningOperators[key]\n  function fn(...args) {\n    if (new.target) {\n      throw ERR_ILLEGAL_CONSTRUCTOR()\n    }\n    return ReflectApply(op, this, args)\n  }\n  ObjectDefineProperty(fn, 'name', {\n    __proto__: null,\n    value: op.name\n  })\n  ObjectDefineProperty(fn, 'length', {\n    __proto__: null,\n    value: op.length\n  })\n  ObjectDefineProperty(Stream.Readable.prototype, key, {\n    __proto__: null,\n    value: fn,\n    enumerable: false,\n    configurable: true,\n    writable: true\n  })\n}\nStream.Writable = require('./internal/streams/writable')\nStream.Duplex = require('./internal/streams/duplex')\nStream.Transform = require('./internal/streams/transform')\nStream.PassThrough = require('./internal/streams/passthrough')\nStream.pipeline = pipeline\nconst { addAbortSignal } = require('./internal/streams/add-abort-signal')\nStream.addAbortSignal = addAbortSignal\nStream.finished = eos\nStream.destroy = destroyer\nStream.compose = compose\nStream.setDefaultHighWaterMark = setDefaultHighWaterMark\nStream.getDefaultHighWaterMark = getDefaultHighWaterMark\nObjectDefineProperty(Stream, 'promises', {\n  __proto__: null,\n  configurable: true,\n  enumerable: true,\n  get() {\n    return promises\n  }\n})\nObjectDefineProperty(pipeline, customPromisify, {\n  __proto__: null,\n  enumerable: true,\n  get() {\n    return promises.pipeline\n  }\n})\nObjectDefineProperty(eos, customPromisify, {\n  __proto__: null,\n  enumerable: true,\n  get() {\n    return promises.finished\n  }\n})\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream\nStream._isUint8Array = function isUint8Array(value) {\n  return value instanceof Uint8Array\n}\nStream._uint8ArrayToBuffer = function _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk.buffer, chunk.byteOffset, chunk.byteLength)\n}\n","'use strict'\n\nconst { ArrayPrototypePop, Promise } = require('../ours/primordials')\nconst { isIterable, isNodeStream, isWebStream } = require('../internal/streams/utils')\nconst { pipelineImpl: pl } = require('../internal/streams/pipeline')\nconst { finished } = require('../internal/streams/end-of-stream')\nrequire('../../lib/stream.js')\nfunction pipeline(...streams) {\n  return new Promise((resolve, reject) => {\n    let signal\n    let end\n    const lastArg = streams[streams.length - 1]\n    if (\n      lastArg &&\n      typeof lastArg === 'object' &&\n      !isNodeStream(lastArg) &&\n      !isIterable(lastArg) &&\n      !isWebStream(lastArg)\n    ) {\n      const options = ArrayPrototypePop(streams)\n      signal = options.signal\n      end = options.end\n    }\n    pl(\n      streams,\n      (err, value) => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(value)\n        }\n      },\n      {\n        signal,\n        end\n      }\n    )\n  })\n}\nmodule.exports = {\n  finished,\n  pipeline\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/Resolve\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.removeDotSegmentsOfPath = exports.removeDotSegments = exports.resolve = void 0;\n/**\n * Convert the given relative IRI to an absolute IRI\n * by taking into account the given optional baseIRI.\n *\n * @param {string} relativeIRI The relative IRI to convert to an absolute IRI.\n * @param {string} baseIRI The optional base IRI.\n * @return {string} an absolute IRI.\n */\nfunction resolve(relativeIRI, baseIRI) {\n    baseIRI = baseIRI || '';\n    const baseFragmentPos = baseIRI.indexOf('#');\n    // Ignore any fragments in the base IRI\n    if (baseFragmentPos > 0) {\n        baseIRI = baseIRI.substr(0, baseFragmentPos);\n    }\n    // Convert empty value directly to base IRI\n    if (!relativeIRI.length) {\n        // At this point, the baseIRI MUST be absolute, otherwise we error\n        if (baseIRI.indexOf(':') < 0) {\n            throw new Error(`Found invalid baseIRI '${baseIRI}' for value '${relativeIRI}'`);\n        }\n        return baseIRI;\n    }\n    // If the value starts with a query character, concat directly (but strip the existing query)\n    if (relativeIRI.startsWith('?')) {\n        const baseQueryPos = baseIRI.indexOf('?');\n        if (baseQueryPos > 0) {\n            baseIRI = baseIRI.substr(0, baseQueryPos);\n        }\n        return baseIRI + relativeIRI;\n    }\n    // If the value starts with a fragment character, concat directly\n    if (relativeIRI.startsWith('#')) {\n        return baseIRI + relativeIRI;\n    }\n    // Ignore baseIRI if it is empty\n    if (!baseIRI.length) {\n        const relativeColonPos = relativeIRI.indexOf(':');\n        if (relativeColonPos < 0) {\n            throw new Error(`Found invalid relative IRI '${relativeIRI}' for a missing baseIRI`);\n        }\n        return removeDotSegmentsOfPath(relativeIRI, relativeColonPos);\n    }\n    // Ignore baseIRI if the value is absolute\n    const valueColonPos = relativeIRI.indexOf(':');\n    if (valueColonPos >= 0) {\n        return removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n    }\n    // At this point, the baseIRI MUST be absolute, otherwise we error\n    const baseColonPos = baseIRI.indexOf(':');\n    if (baseColonPos < 0) {\n        throw new Error(`Found invalid baseIRI '${baseIRI}' for value '${relativeIRI}'`);\n    }\n    const baseIRIScheme = baseIRI.substr(0, baseColonPos + 1);\n    // Inherit the baseIRI scheme if the value starts with '//'\n    if (relativeIRI.indexOf('//') === 0) {\n        return baseIRIScheme + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n    }\n    // Check cases where '://' occurs in the baseIRI, and where there is no '/' after a ':' anymore.\n    let baseSlashAfterColonPos;\n    if (baseIRI.indexOf('//', baseColonPos) === baseColonPos + 1) {\n        // If there is no additional '/' after the '//'.\n        baseSlashAfterColonPos = baseIRI.indexOf('/', baseColonPos + 3);\n        if (baseSlashAfterColonPos < 0) {\n            // If something other than a '/' follows the '://', append the value after a '/',\n            // otherwise, prefix the value with only the baseIRI scheme.\n            if (baseIRI.length > baseColonPos + 3) {\n                return baseIRI + '/' + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n            }\n            else {\n                return baseIRIScheme + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n            }\n        }\n    }\n    else {\n        // If there is not even a single '/' after the ':'\n        baseSlashAfterColonPos = baseIRI.indexOf('/', baseColonPos + 1);\n        if (baseSlashAfterColonPos < 0) {\n            // If we don't have a '/' after the ':',\n            // prefix the value with only the baseIRI scheme.\n            return baseIRIScheme + removeDotSegmentsOfPath(relativeIRI, valueColonPos);\n        }\n    }\n    // If the value starts with a '/', then prefix it with everything before the first effective slash of the base IRI.\n    if (relativeIRI.indexOf('/') === 0) {\n        return baseIRI.substr(0, baseSlashAfterColonPos) + removeDotSegments(relativeIRI);\n    }\n    let baseIRIPath = baseIRI.substr(baseSlashAfterColonPos);\n    const baseIRILastSlashPos = baseIRIPath.lastIndexOf('/');\n    // Ignore everything after the last '/' in the baseIRI path\n    if (baseIRILastSlashPos >= 0 && baseIRILastSlashPos < baseIRIPath.length - 1) {\n        baseIRIPath = baseIRIPath.substr(0, baseIRILastSlashPos + 1);\n        // Also remove the first character of the relative path if it starts with '.' (and not '..' or './')\n        // This change is only allowed if there is something else following the path\n        if (relativeIRI[0] === '.' && relativeIRI[1] !== '.' && relativeIRI[1] !== '/' && relativeIRI[2]) {\n            relativeIRI = relativeIRI.substr(1);\n        }\n    }\n    // Prefix the value with the baseIRI path where\n    relativeIRI = baseIRIPath + relativeIRI;\n    // Remove dot segment from the IRI\n    relativeIRI = removeDotSegments(relativeIRI);\n    // Prefix our transformed value with the part of the baseIRI until the first '/' after the first ':'.\n    return baseIRI.substr(0, baseSlashAfterColonPos) + relativeIRI;\n}\nexports.resolve = resolve;\n/**\n * Remove dot segments from the given path,\n * as described in https://www.ietf.org/rfc/rfc3986.txt (page 32).\n * @param {string} path An IRI path.\n * @return {string} A path, will always start with a '/'.\n */\nfunction removeDotSegments(path) {\n    // Prepare a buffer with segments between each '/.\n    // Each segment represents an array of characters.\n    const segmentBuffers = [];\n    let i = 0;\n    while (i < path.length) {\n        // Remove '/.' or '/..'\n        switch (path[i]) {\n            case '/':\n                if (path[i + 1] === '.') {\n                    if (path[i + 2] === '.') {\n                        // Start a new segment if we find an invalid character after the '.'\n                        if (!isCharacterAllowedAfterRelativePathSegment(path[i + 3])) {\n                            segmentBuffers.push([]);\n                            i++;\n                            break;\n                        }\n                        // Go to parent directory,\n                        // so we remove a parent segment\n                        segmentBuffers.pop();\n                        // Ensure that we end with a slash if there is a trailing '/..'\n                        if (!path[i + 3]) {\n                            segmentBuffers.push([]);\n                        }\n                        i += 3;\n                    }\n                    else {\n                        // Start a new segment if we find an invalid character after the '.'\n                        if (!isCharacterAllowedAfterRelativePathSegment(path[i + 2])) {\n                            segmentBuffers.push([]);\n                            i++;\n                            break;\n                        }\n                        // Ensure that we end with a slash if there is a trailing '/.'\n                        if (!path[i + 2]) {\n                            segmentBuffers.push([]);\n                        }\n                        // Go to the current directory,\n                        // so we do nothing\n                        i += 2;\n                    }\n                }\n                else {\n                    // Start a new segment\n                    segmentBuffers.push([]);\n                    i++;\n                }\n                break;\n            case '#':\n            case '?':\n                // Query and fragment string should be appended unchanged\n                if (!segmentBuffers.length) {\n                    segmentBuffers.push([]);\n                }\n                segmentBuffers[segmentBuffers.length - 1].push(path.substr(i));\n                // Break the while loop\n                i = path.length;\n                break;\n            default:\n                // Not a special character, just append it to our buffer\n                if (!segmentBuffers.length) {\n                    segmentBuffers.push([]);\n                }\n                segmentBuffers[segmentBuffers.length - 1].push(path[i]);\n                i++;\n                break;\n        }\n    }\n    return '/' + segmentBuffers.map((buffer) => buffer.join('')).join('/');\n}\nexports.removeDotSegments = removeDotSegments;\n/**\n * Removes dot segments of the given IRI.\n * @param {string} iri An IRI (or part of IRI).\n * @param {number} colonPosition The position of the first ':' in the IRI.\n * @return {string} The IRI where dot segments were removed.\n */\nfunction removeDotSegmentsOfPath(iri, colonPosition) {\n    // Determine where we should start looking for the first '/' that indicates the start of the path\n    let searchOffset = colonPosition + 1;\n    if (colonPosition >= 0) {\n        if (iri[colonPosition + 1] === '/' && iri[colonPosition + 2] === '/') {\n            searchOffset = colonPosition + 3;\n        }\n    }\n    else {\n        if (iri[0] === '/' && iri[1] === '/') {\n            searchOffset = 2;\n        }\n    }\n    // Determine the path\n    const pathSeparator = iri.indexOf('/', searchOffset);\n    if (pathSeparator < 0) {\n        return iri;\n    }\n    const base = iri.substr(0, pathSeparator);\n    const path = iri.substr(pathSeparator);\n    // Remove dot segments from the path\n    return base + removeDotSegments(path);\n}\nexports.removeDotSegmentsOfPath = removeDotSegmentsOfPath;\nfunction isCharacterAllowedAfterRelativePathSegment(character) {\n    return !character || character === '#' || character === '?' || character === '/';\n}\n//# sourceMappingURL=Resolve.js.map","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable no-unused-vars */\n/* eslint-disable lines-between-class-members */\n/* eslint-disable no-dupe-class-members */\n/**\n * Generates a SHACLC file stream from a quad stream, since SHACLC is\n * lossy with respect to N3, a stream of quads that could not be\n * written is also output.\n */\nconst n3_1 = require(\"n3\");\nconst prefixcc_1 = require(\"@jeswr/prefixcc\");\nconst rdf_string_ttl_1 = require(\"rdf-string-ttl\");\nconst utils_1 = require(\"./utils\");\nconst property_param_1 = __importDefault(require(\"./property-param \"));\nconst base_prefixes_1 = __importDefault(require(\"./base-prefixes\"));\nconst node_param_1 = __importDefault(require(\"./node-param\"));\nfunction getNamespace(str) {\n    var _a;\n    return (_a = /^[^]*[#/]/.exec(str)) === null || _a === void 0 ? void 0 : _a[0];\n}\nconst knownNamespaces = {\n    'http://www.w3.org/1999/02/22-rdf-syntax-ns#': 'rdf',\n    'http://www.w3.org/2000/01/rdf-schema#': 'rdfs',\n    'http://www.w3.org/ns/shacl#': 'sh',\n    'http://www.w3.org/2001/XMLSchema#': 'xsd',\n};\nconst knownPrefixes = {\n    rdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n    rdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n    sh: 'http://www.w3.org/ns/shacl#',\n    xsd: 'http://www.w3.org/2001/XMLSchema#',\n};\nclass SHACLCWriter {\n    constructor(\n    // eslint-disable-next-line no-unused-vars\n    store, \n    // eslint-disable-next-line no-unused-vars\n    writer, prefixes = {}, \n    // eslint-disable-next-line no-unused-vars\n    base = undefined, errorOnExtraQuads = true, mintUnspecifiedPrefixes = false, fetch, extendedSyntax = false) {\n        this.store = store;\n        this.base = base;\n        this.errorOnExtraQuads = errorOnExtraQuads;\n        this.mintUnspecifiedPrefixes = mintUnspecifiedPrefixes;\n        this.fetch = fetch;\n        this.extendedSyntax = extendedSyntax;\n        this.prefixes = {};\n        this.prefixRev = {};\n        for (const key of Object.keys(prefixes)) {\n            const iri = prefixes[key];\n            const value = typeof iri === 'string' ? iri : iri.value;\n            if (!(value in knownNamespaces) && !(key in knownPrefixes)) {\n                this.prefixRev[value] = key;\n                this.prefixes[key] = value;\n            }\n        }\n        this.writer = writer;\n    }\n    /**\n     * Used to initiate the flow of data through the writer.\n     */\n    // TODO: Make initialisation async\n    write() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const onotology = this.store.getQuads(null, \"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\" /* rdf.type */, \"http://www.w3.org/2002/07/owl#Ontology\" /* owl.Ontology */, null);\n            if (onotology.length === 1 && onotology[0].subject.termType === 'NamedNode') {\n                const base = onotology[0].subject;\n                this.store.removeQuads(onotology);\n                // Don't write default\n                if (!base.equals(new n3_1.NamedNode('urn:x-base:default')))\n                    this.writer.add(`BASE ${(0, rdf_string_ttl_1.termToString)(base)}`);\n                yield this.writeImports(base);\n            }\n            else {\n                throw new Error('Base expected');\n            }\n            if (this.mintUnspecifiedPrefixes) {\n                const namespaces = new Set();\n                for (const term of [\n                    ...this.store.getSubjects(null, null, null),\n                    ...this.store.getPredicates(null, null, null),\n                    ...this.store.getObjects(null, null, null),\n                ]) {\n                    if (term.termType === 'NamedNode') {\n                        const namespace = getNamespace(term.value);\n                        if (namespace && !(namespace in this.prefixRev) && !(namespace in knownNamespaces)) {\n                            namespaces.add(namespace);\n                        }\n                    }\n                }\n                const existingPrefixes = Object.assign(Object.assign({}, this.prefixes), knownPrefixes);\n                yield Promise.all([...namespaces].map((ns) => (0, prefixcc_1.uriToPrefix)(ns, {\n                    fetch: this.fetch,\n                    mintOnUnknown: true,\n                    existingPrefixes,\n                }).then((pref) => {\n                    this.prefixes[pref] = ns;\n                    existingPrefixes[pref] = ns;\n                    this.prefixRev[ns] = pref;\n                })));\n            }\n            const allNamespaces = new Set([\n                ...this.store.getSubjects(null, null, null),\n                ...this.store.getPredicates(null, null, null),\n                ...this.store.getObjects(null, null, null),\n            ]\n                .filter((term) => term.termType === 'NamedNode')\n                .map((term) => getNamespace(term.value))\n                .filter((str) => typeof str === 'string'));\n            for (const key in this.prefixRev) {\n                if (!allNamespaces.has(key)) {\n                    delete this.prefixes[this.prefixRev[key]];\n                    delete this.prefixRev[key];\n                }\n            }\n            yield this.writePrefixes();\n            this.prefixes = Object.assign(Object.assign({}, this.prefixes), knownPrefixes);\n            this.prefixRev = Object.assign(Object.assign({}, this.prefixRev), knownNamespaces);\n            this.writer.newLine();\n            yield this.writeShapes();\n            if (this.extendedSyntax) {\n                const subjects = this.store.getSubjects(null, null, null);\n                if (subjects.length > 0) {\n                    this.writer.newLine(1);\n                }\n                for (const subject of subjects) {\n                    this.writer.add(yield this.termToString(subject, true, true));\n                    this.writer.add(' ');\n                    this.writer.indent();\n                    yield this.writeTurtlePredicates(subject);\n                    this.writer.deindent();\n                }\n                if (subjects.length > 0) {\n                    this.writer.add(' .');\n                    this.writer.newLine();\n                }\n            }\n            if (this.errorOnExtraQuads && this.store.size > 0) {\n                throw new Error('Dataset contains quads that cannot be written in SHACLC');\n            }\n            this.writer.end();\n            // this.failedQuads.append(this.store.getQuads(null, null, null, null))\n        });\n    }\n    writeImports(base) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const imports = this.store.getObjectsOnce(base, new n3_1.NamedNode(\"http://www.w3.org/2002/07/owl#imports\" /* owl.imports */), null);\n            if (imports.length > 0) {\n                for (const imp of imports) {\n                    this.writer.add(`IMPORTS <${imp.value}>`, true);\n                }\n            }\n        });\n    }\n    writePrefixes() {\n        return __awaiter(this, void 0, void 0, function* () {\n            const keys = Object.keys(this.prefixes).filter((key) => !(key in base_prefixes_1.default)).sort();\n            if (keys.length > 0) {\n                for (const key of keys) {\n                    this.writer.add(`PREFIX ${key}: <${this.prefixes[key]}>`, true);\n                }\n            }\n        });\n    }\n    termToString(term, disableShaclName = false, allowBlankNodes = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // TODO: Make sure this does not introduce any errors\n            try {\n                if (disableShaclName) {\n                    throw new Error('Shacl name disabled');\n                }\n                return (0, utils_1.getShaclName)(term);\n                // eslint-disable-next-line no-empty\n            }\n            catch (e) { }\n            if (term.termType === 'NamedNode') {\n                const namespace = getNamespace(term.value);\n                if (namespace && namespace in this.prefixRev) {\n                    if (namespace in this.prefixRev) {\n                        return `${this.prefixRev[namespace]}:${term.value.slice(namespace.length)}`;\n                    }\n                }\n                return (0, rdf_string_ttl_1.termToString)(term);\n            }\n            if (term.termType === 'Literal') {\n                if (term.datatypeString === 'http://www.w3.org/2001/XMLSchema#integer'\n                    || term.datatypeString === 'http://www.w3.org/2001/XMLSchema#boolean') {\n                    return term.value;\n                }\n                return (0, rdf_string_ttl_1.termToString)(term);\n            }\n            if (term.termType === 'BlankNode' && allowBlankNodes) {\n                (0, rdf_string_ttl_1.termToString)(term);\n            }\n            throw new Error(`Invalid term type for extra statement ${term.value} (${term.termType})`);\n        });\n    }\n    writeShapes() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // TODO: Determine sorting\n            /**\n             * Get every nodeshape declared at the top level\n             */\n            for (const subject of this.store.getSubjectsOnce(new n3_1.NamedNode(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\" /* rdf.type */), new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#NodeShape\" /* sh.NodeShape */), null)) {\n                if (this.store.getQuadsOnce(subject, new n3_1.NamedNode(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\" /* rdf.type */), new n3_1.NamedNode(\"http://www.w3.org/2000/01/rdf-schema#Class\" /* rdfs.Class */), null).length > 0) {\n                    this.writer.add('shapeClass ');\n                }\n                else {\n                    this.writer.add('shape ');\n                }\n                this.writer.add(yield this.termToString(subject));\n                this.writer.add(' ');\n                const targetClasses = this.store.getObjectsOnce(subject, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#targetClass\" /* sh.targetClass */), null);\n                if (targetClasses.length > 0) {\n                    this.writer.add('-> ');\n                    for (const targetClass of targetClasses) {\n                        if (targetClass.termType === 'NamedNode') {\n                            this.writer.add(yield this.termToString(targetClass));\n                        }\n                        else {\n                            this.writer.add('!');\n                            this.writer.add(yield this.termToString(this.singleObject(targetClass, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#not\" /* sh.not */), true)));\n                        }\n                        this.writer.add(' ');\n                    }\n                }\n                const unusedPredicates = this.store.getPredicates(subject, null, null)\n                    .filter((property) => [\n                    new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#targetClass\" /* sh.targetClass */),\n                    new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#property\" /* sh.property */),\n                    // TODO: See if \"and\" should be here as well\n                    new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#or\" /* sh.or */),\n                    ...Object.keys(node_param_1.default).map((key) => new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#\" /* sh._ */ + key)),\n                ].every((elem) => !property.equals(elem)));\n                if (unusedPredicates.length > 0) {\n                    this.writer.add(';');\n                    this.writer.indent();\n                    this.writer.newLine(1);\n                }\n                if (this.extendedSyntax) {\n                    yield this.writeGivenTurtlePredicates(subject, unusedPredicates);\n                }\n                if (unusedPredicates.length > 0) {\n                    this.writer.add(' ');\n                    this.writer.deindent();\n                }\n                yield this.writeShapeBody(subject, false);\n            }\n        });\n    }\n    getSingleProperty(quad, allowedPredicates) {\n        // let tempQuad = quad;\n        let examining = [quad];\n        try {\n            let name = (0, utils_1.getShaclName)(quad.predicate);\n            let type = 'pred';\n            if (name === 'not') {\n                const quads = this.store.getQuadsOnce(quad.object, null, null, null);\n                // TODO: See if this line is necessary\n                examining = examining.concat(quads);\n                if (quads.length !== 1) {\n                    throw new Error('Can only handle having one predicate of \\'not\\'');\n                }\n                // eslint-disable-next-line no-param-reassign\n                [quad] = quads;\n                name = (0, utils_1.getShaclName)(quad.predicate);\n                type = 'not';\n            }\n            if (!(name in allowedPredicates)) {\n                throw new Error(`${name} is not allowed`);\n            }\n            return { name, type, object: quad.object };\n        }\n        catch (e) {\n            this.store.addQuads(examining);\n        }\n        return undefined;\n    }\n    singleLayerPropertiesList(term, allowedPredicates) {\n        const result = [];\n        for (const quad of this.store.getQuadsOnce(term, null, null, null)) {\n            const property = this.getSingleProperty(quad, allowedPredicates);\n            if (property) {\n                result.push(property);\n            }\n        }\n        return result;\n    }\n    expectOneProperty(term, allowedPredicates) {\n        const quads = this.store.getQuadsOnce(term, null, null, null);\n        if (quads.length === 1) {\n            const data = this.getSingleProperty(quads[0], allowedPredicates);\n            if (data) {\n                return data;\n            }\n        }\n        this.store.addQuads(quads);\n        return undefined;\n    }\n    orProperties(term, allowedPredicates) {\n        const orProperties = [];\n        for (const quad of this.store.getQuadsOnce(term, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#or\" /* sh.or */), null, null)) {\n            const statement = [];\n            for (const item of this.getList(quad.object)) {\n                const property = this.expectOneProperty(item, allowedPredicates);\n                if (!property) {\n                    // TODO HANDLE THIS CASE BY EXTENDING SHACLC SYNTAX\n                    this.store.addQuad(quad);\n                    throw new Error('Each entry of the \\'or\\' statement must declare exactly one property');\n                }\n                statement.push(property);\n            }\n            orProperties.push(statement);\n        }\n        return orProperties;\n    }\n    /**\n     * Extract an rdf:list\n     */\n    getList(term) {\n        // TODO: Fix gross type casting\n        let termTemp = term;\n        const list = [];\n        // TODO: Handle poorly formed RDF lists\n        while (!termTemp.equals(new n3_1.NamedNode(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil\" /* rdf.nil */))) {\n            list.push(this.singleObject(termTemp, new n3_1.NamedNode(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#first\" /* rdf.first */), true));\n            termTemp = this.singleObject(termTemp, new n3_1.NamedNode(\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\" /* rdf.rest */), true);\n        }\n        return list;\n    }\n    writeIriLiteralOrArray(object) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (object.termType === 'BlankNode') {\n                this.writer.add('[');\n                let first = true;\n                for (const term of this.getList(object)) {\n                    if (first) {\n                        first = false;\n                    }\n                    else {\n                        this.writer.add(' ');\n                    }\n                    this.writer.add(yield this.termToString(term));\n                }\n                this.writer.add(']');\n            }\n            else {\n                this.writer.add(yield this.termToString(object));\n            }\n        });\n    }\n    singleObject(subject, predicate, strict) {\n        var _a;\n        return (_a = this.singleQuad(subject, predicate, strict)) === null || _a === void 0 ? void 0 : _a.object;\n    }\n    singleQuad(subject, predicate, strict = false) {\n        const objects = this.store.getQuadsOnce(subject, predicate, null, null);\n        if (strict && objects.length !== 1) {\n            this.store.addQuads(objects);\n            throw new Error(`The subject and predicate ${subject === null || subject === void 0 ? void 0 : subject.value} ${predicate === null || predicate === void 0 ? void 0 : predicate.value} must have exactly one object. Instead has ${objects.length}`);\n        }\n        if (objects.length > 1) {\n            this.store.addQuads(objects);\n            throw new Error(`The subject and predicate ${subject === null || subject === void 0 ? void 0 : subject.value} ${predicate === null || predicate === void 0 ? void 0 : predicate.value} can have at most one object. Instead has ${objects.length}`);\n        }\n        return objects.length === 1 ? objects[0] : undefined;\n    }\n    writeAssigment({ name, type, object }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (type === 'not') {\n                this.writer.add('!');\n                // object = this.singleObject(object, DataFactory.namedNode(sh._ + name), true)\n            }\n            this.writer.add(name);\n            this.writer.add('=');\n            yield this.writeIriLiteralOrArray(object);\n        });\n    }\n    writeAtom({ name, type, object }) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (type === 'not') {\n                this.writer.add('!');\n            }\n            switch (name) {\n                case 'node': {\n                    if (object.termType === 'NamedNode') {\n                        this.writer.add(`@${yield this.termToString(object)}`);\n                    }\n                    else if (object.termType === 'BlankNode') {\n                        yield this.writeShapeBody(object);\n                    }\n                    else {\n                        throw new Error('Invalid nested shape, must be blank node or IRI');\n                    }\n                    return;\n                }\n                case 'nodeKind': {\n                    this.writer.add((0, utils_1.getShaclName)(object));\n                    return;\n                }\n                case 'class': {\n                    this.writer.add(yield this.termToString(object));\n                    return;\n                }\n                case 'datatype': {\n                    this.writer.add(yield this.termToString(object));\n                    return;\n                }\n                default:\n                    this.writer.add(name);\n                    this.writer.add('=');\n                    yield this.writeIriLiteralOrArray(object);\n            }\n        });\n    }\n    writeAssigments(assignments, divider = ' ', first = true, shortcuts) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const assignment of assignments) {\n                if (first) {\n                    // eslint-disable-next-line no-param-reassign\n                    first = false;\n                }\n                else {\n                    this.writer.add(divider);\n                }\n                if (shortcuts) {\n                    yield this.writeAtom(assignment);\n                }\n                else {\n                    yield this.writeAssigment(assignment);\n                }\n            }\n        });\n    }\n    writeParams(term, first = true, allowedParam, shortcuts = false, surroundings = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // TODO Stream this part\n            const or = this.orProperties(term, allowedParam);\n            const params = this.singleLayerPropertiesList(term, allowedParam);\n            if (surroundings && (or.length > 0 || params.length > 0)) {\n                this.writer.newLine(1);\n            }\n            for (const statement of or) {\n                if (first) {\n                    // eslint-disable-next-line no-param-reassign\n                    first = false;\n                }\n                else {\n                    this.writer.add(' ');\n                }\n                yield this.writeAssigments(statement, '|', true, shortcuts);\n            }\n            yield this.writeAssigments(params, ' ', first, shortcuts);\n            if (surroundings && (or.length > 0 || params.length > 0)) {\n                this.writer.add(' .');\n            }\n        });\n    }\n    writeShapeBody(term, nested = true) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.writer.add('{').indent();\n            const properties = this.store.getObjectsOnce(term, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#property\" /* sh.property */), null);\n            yield this.writeParams(term, true, node_param_1.default, false, true);\n            for (const property of properties) {\n                this.writer.newLine(1);\n                yield this.writeProperty(property);\n            }\n            this.writer.deindent().newLine(1);\n            if (nested) {\n                this.writer.add('} .');\n            }\n            else {\n                this.writer.add('}').newLine(1);\n            }\n        });\n    }\n    writeProperty(property) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.writePath(this.singleObject(property, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#path\" /* sh.path */), true));\n            const min = this.singleObject(property, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#minCount\" /* sh.minCount */));\n            const max = this.singleObject(property, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#maxCount\" /* sh.maxCount */));\n            const nodeKind = this.singleObject(property, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#nodeKind\" /* sh.nodeKind */));\n            // eslint-disable-next-line no-underscore-dangle\n            const propertyClass = this.singleObject(property, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#class\" /* sh._class */));\n            const datatype = this.singleObject(property, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#datatype\" /* sh.datatype */));\n            const nodeShapes = this.store.getObjectsOnce(property, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#node\" /* sh.node */), null);\n            if (nodeKind) {\n                this.writer.add(' ');\n                this.writer.add((0, utils_1.getShaclName)(nodeKind));\n            }\n            if (propertyClass) {\n                this.writer.add(' ');\n                this.writer.add(yield this.termToString(propertyClass));\n            }\n            if (datatype) {\n                this.writer.add(' ');\n                this.writer.add(yield this.termToString(datatype));\n            }\n            if (min !== undefined || max !== undefined) {\n                this.writer.add(' [');\n                if (min) {\n                    if (min.termType !== 'Literal' || min.datatypeString !== 'http://www.w3.org/2001/XMLSchema#integer') {\n                        throw new Error('Invalid min value, must me an integer literal');\n                    }\n                    this.writer.add(min.value);\n                }\n                else {\n                    this.writer.add('0');\n                }\n                this.writer.add('..');\n                if (max) {\n                    if (max.termType !== 'Literal' || max.datatypeString !== 'http://www.w3.org/2001/XMLSchema#integer') {\n                        throw new Error('Invalid max value, must me an integer literal');\n                    }\n                    this.store.removeMatches(property, new n3_1.NamedNode(\"http://www.w3.org/ns/shacl#maxCount\" /* sh.maxCount */), undefined, undefined);\n                    this.writer.add(max.value);\n                }\n                else {\n                    this.writer.add('*');\n                }\n                this.writer.add(']');\n            }\n            yield this.writeParams(property, false, property_param_1.default, true);\n            const nestedShapes = [];\n            for (const node of nodeShapes) {\n                if (node.termType === 'NamedNode') {\n                    this.writer.add(' ');\n                    this.writer.add(`@${yield this.termToString(node)}`);\n                }\n                else if (node.termType === 'BlankNode') {\n                    nestedShapes.push(node);\n                }\n                else {\n                    throw new Error('Invalid nested shape, must be blank node or IRI');\n                }\n            }\n            for (const shape of nestedShapes) {\n                this.writer.add(' ');\n                yield this.writeShapeBody(shape);\n            }\n            if (this.extendedSyntax && this.store.getQuads(property, null, null, null).length > 0) {\n                this.writer.add(' %');\n                this.writer.indent();\n                this.writer.newLine(1);\n                yield this.writeTurtlePredicates(property);\n                this.writer.deindent();\n                this.writer.newLine(1);\n                this.writer.add('%');\n            }\n            if (nestedShapes.length === 0) {\n                this.writer.add(' .');\n            }\n        });\n    }\n    writeTurtlePredicates(term) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.writeGivenTurtlePredicates(term, this.store.getPredicates(term, null, null));\n        });\n    }\n    writeGivenTurtlePredicates(term, predicates) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let semi = false;\n            if (predicates.some((predicate) => predicate.equals(n3_1.DataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#type')))) {\n                const types = this.store.getObjectsOnce(term, n3_1.DataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'), null);\n                if (types.length > 0) {\n                    semi = true;\n                    this.writer.add('a ');\n                    yield this.writeTurtleObjects(types);\n                }\n            }\n            for (const predicate of predicates) {\n                if (!predicate.equals(n3_1.DataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#type'))) {\n                    if (semi) {\n                        this.writer.add(' ;');\n                        this.writer.newLine(1);\n                    }\n                    else {\n                        semi = true;\n                    }\n                    this.writer.add(yield this.termToString(predicate, true));\n                    this.writer.add(' ');\n                    yield this.writeTurtleObjects(this.store.getObjectsOnce(term, predicate, null));\n                }\n            }\n        });\n    }\n    writeTurtleObjects(objects) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const blankObjects = [];\n            const nonBlankObjects = [];\n            for (const object of objects) {\n                if (object.termType === 'BlankNode'\n                    && [...this.store.match(null, null, object), ...this.store.match(null, object, null)].length === 0) {\n                    blankObjects.push(object);\n                }\n                else {\n                    nonBlankObjects.push(object);\n                }\n            }\n            this.writer.add((yield Promise.all(nonBlankObjects.map((object) => this.termToString(object, true, true)))).join(', '));\n            let comma = nonBlankObjects.length > 0;\n            if (blankObjects.length > 0) {\n                for (const blank of blankObjects) {\n                    if (comma) {\n                        this.writer.add(', ');\n                    }\n                    else {\n                        comma = true;\n                    }\n                    if (!(yield this.writeList(blank))) {\n                        this.writer.add('[');\n                        this.writer.indent();\n                        this.writer.newLine(1);\n                        yield this.writeTurtlePredicates(blank);\n                        this.writer.deindent();\n                        this.writer.newLine(1);\n                        this.writer.add(']');\n                    }\n                }\n            }\n        });\n    }\n    writeList(object) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let node = object;\n            const elems = [];\n            const quads = [];\n            while (!node.equals(n3_1.DataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#nil'))) {\n                const first = this.store.getQuadsOnce(node, n3_1.DataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#first'), null, null);\n                const rest = this.store.getQuadsOnce(node, n3_1.DataFactory.namedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#rest'), null, null);\n                quads.push(...first, ...rest);\n                if (first.length !== 1 || rest.length !== 1 || this.store.getQuads(node, null, null, null).length !== 0) {\n                    this.store.addQuads(quads);\n                    return false;\n                }\n                elems.push(first[0].object);\n                node = rest[0].object;\n            }\n            let space = false;\n            this.writer.add('(');\n            for (const elem of elems) {\n                if (space) {\n                    this.writer.add(' ');\n                }\n                else {\n                    space = true;\n                }\n                yield this.writeTurtleObjects([elem]);\n            }\n            this.writer.add(')');\n            return true;\n        });\n    }\n    writePath(term, braces = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (term.termType === 'NamedNode') {\n                this.writer.add(yield this.termToString(term));\n            }\n            else if (term.termType === 'BlankNode') {\n                const quads = this.store.getQuadsOnce(term, null, null, null);\n                if (quads.length === 1) {\n                    const { predicate, object } = quads[0];\n                    switch (predicate.value) {\n                        case \"http://www.w3.org/ns/shacl#inversePath\" /* sh.inversePath */:\n                            this.writer.add('^');\n                            yield this.writePath(object, true);\n                            return;\n                        case \"http://www.w3.org/ns/shacl#alternativePath\" /* sh.alternativePath */: {\n                            const alternatives = this.getList(object);\n                            if (alternatives.length === 0) {\n                                throw new Error('Invalid Alternative Path - no options');\n                            }\n                            else if (alternatives.length === 1) {\n                                yield this.writePath(alternatives[0]);\n                            }\n                            else {\n                                if (braces) {\n                                    this.writer.add('(');\n                                }\n                                let first = true;\n                                for (const alt of alternatives) {\n                                    if (first) {\n                                        first = false;\n                                    }\n                                    else {\n                                        this.writer.add('|');\n                                    }\n                                    yield this.writePath(alt, true);\n                                }\n                                if (braces) {\n                                    this.writer.add(')');\n                                }\n                            }\n                            return;\n                        }\n                        case \"http://www.w3.org/ns/shacl#zeroOrMorePath\" /* sh.zeroOrMorePath */:\n                            yield this.writePath(object, true);\n                            this.writer.add('*');\n                            return;\n                        case \"http://www.w3.org/ns/shacl#oneOrMorePath\" /* sh.oneOrMorePath */:\n                            yield this.writePath(object, true);\n                            this.writer.add('+');\n                            return;\n                        case \"http://www.w3.org/ns/shacl#zeroOrOnePath\" /* sh.zeroOrOnePath */:\n                            yield this.writePath(object, true);\n                            this.writer.add('?');\n                            return;\n                        default:\n                            throw new Error(`Invalid path type ${term.value}`);\n                    }\n                }\n                else {\n                    // TODO Make more efficient\n                    this.store.addQuads(quads);\n                    const sequence = this.getList(term);\n                    if (sequence.length === 0) {\n                        throw new Error('Invalid Path');\n                        // TODO: See if the following case is necessary\n                        // else if (sequence.length === 1) {\n                        //   await this.writePath(sequence[0]);\n                        // }\n                    }\n                    else {\n                        if (braces) {\n                            this.writer.add('(');\n                        }\n                        let first = true;\n                        for (const alt of sequence) {\n                            if (first) {\n                                first = false;\n                            }\n                            else {\n                                this.writer.add('/');\n                            }\n                            yield this.writePath(alt, true);\n                        }\n                        if (braces) {\n                            this.writer.add(')');\n                        }\n                    }\n                }\n            }\n            else {\n                throw new Error('Path should be named node or blank node');\n            }\n        });\n    }\n}\nexports.default = SHACLCWriter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The base prefixes default to SHACLC syntax\n */\n// TODO: Double check the defaults\nexports.default = {\n    owl: 'http://www.w3.org/2002/07/owl#',\n    rdf: 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n    rdfs: 'http://www.w3.org/2000/01/rdf-schema#',\n    sh: 'http://www.w3.org/ns/shacl#',\n    xsd: 'http://www.w3.org/2001/XMLSchema#',\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.write = void 0;\nconst n3_1 = require(\"n3\");\nconst ShaclcGenerator_1 = __importDefault(require(\"./ShaclcGenerator\"));\nconst writer_1 = __importDefault(require(\"./writer\"));\nconst volatile_store_1 = __importDefault(require(\"./volatile-store\"));\nfunction write(quads, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                let s = '';\n                const volatileStore = new volatile_store_1.default(quads);\n                const graphs = volatileStore.getGraphs(null, null, null);\n                if (graphs.length > 1) {\n                    throw new Error('More than one graph found - can serialize in the default graph');\n                }\n                if (graphs.length === 1 && !graphs[0].equals(n3_1.DataFactory.defaultGraph())) {\n                    throw new Error(`Expected all triples to be in the default graph, instead triples were in ${graphs[0].value}`);\n                }\n                const w = new writer_1.default({\n                    write: (chunk) => {\n                        s += chunk;\n                    },\n                    end: () => {\n                        let extraQuads = volatileStore.getQuads(null, null, null, null);\n                        if (extraQuads.length === 0) {\n                            extraQuads = undefined;\n                        }\n                        resolve({\n                            text: s,\n                            extraQuads,\n                        });\n                    },\n                });\n                const writer = new ShaclcGenerator_1.default(volatileStore, w, options === null || options === void 0 ? void 0 : options.prefixes, undefined, (options === null || options === void 0 ? void 0 : options.errorOnUnused) !== false, options === null || options === void 0 ? void 0 : options.mintPrefixes, options === null || options === void 0 ? void 0 : options.fetch, options === null || options === void 0 ? void 0 : options.extendedSyntax);\n                yield writer.write();\n            }\n            catch (e) {\n                reject(e);\n            }\n        }));\n    });\n}\nexports.write = write;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Allowed parameters for a NodeShape\n */\nexports.default = {\n    targetNode: true,\n    targetObjectsOf: true,\n    targetSubjectsOf: true,\n    deactivated: true,\n    severity: true,\n    message: true,\n    class: true,\n    datatype: true,\n    nodeKind: true,\n    minExclusive: true,\n    minInclusive: true,\n    maxExclusive: true,\n    maxInclusive: true,\n    minLength: true,\n    maxLength: true,\n    pattern: true,\n    flags: true,\n    languageIn: true,\n    equals: true,\n    disjoint: true,\n    closed: true,\n    ignoredProperties: true,\n    hasValue: true,\n    in: true,\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Allowed parameters for a PropertyShape\n */\nexports.default = {\n    deactivated: true,\n    severity: true,\n    message: true,\n    class: true,\n    datatype: true,\n    nodeKind: true,\n    minExclusive: true,\n    minInclusive: true,\n    maxExclusive: true,\n    maxInclusive: true,\n    minLength: true,\n    maxLength: true,\n    pattern: true,\n    flags: true,\n    languageIn: true,\n    uniqueLang: true,\n    equals: true,\n    disjoint: true,\n    lessThan: true,\n    lessThanOrEquals: true,\n    qualifiedValueShape: true,\n    qualifiedMinCount: true,\n    qualifiedMaxCount: true,\n    qualifiedValueShapesDisjoint: true,\n    closed: true,\n    ignoredProperties: true,\n    hasValue: true,\n    in: true,\n    // This is here so that we can exract it from alts\n    node: true,\n};\n","\"use strict\";\n/**\n  * Get the frame of an IRI that we expect to be in the SHACL namespace\n  */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getShaclName = void 0;\n// eslint-disable-next-line import/prefer-default-export\nfunction getShaclName(term) {\n    if (term.termType !== 'NamedNode' || !term.value.startsWith(\"http://www.w3.org/ns/shacl#\" /* sh._ */)) {\n        throw new Error(`Term ${term.value} is not part of the SHACL namespace`);\n    }\n    return term.value.slice(27);\n}\nexports.getShaclName = getShaclName;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable camelcase */\n/**\n * Convenience class that extends the n3 store API that deletes\n * quads as they are extracted from the store\n */\nconst n3_1 = require(\"n3\");\nclass VolitileStore extends n3_1.Store {\n    getQuadsOnce(s, p, o, g) {\n        const quads = this.getQuads(s, p, o, g);\n        this.removeQuads(quads);\n        return quads;\n    }\n    getSubjectsOnce(p, o, g) {\n        return this.getQuadsOnce(null, p, o, g).map((term) => term.subject);\n    }\n    getObjectsOnce(s, p, g) {\n        return this.getQuadsOnce(s, p, null, g).map((term) => term.object);\n    }\n}\nexports.default = VolitileStore;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Convenience class used to write chunks\n */\nclass Writer {\n    constructor(options) {\n        this.indents = 0;\n        this.write = options.write;\n        this.end = options.end;\n    }\n    indent() {\n        this.indents += 1;\n        return this;\n    }\n    deindent() {\n        if (this.indents < 1) {\n            throw new Error(`Trying to deindent when indent is only ${this.indents}`);\n        }\n        this.indents -= 1;\n        return this;\n    }\n    add(s, newLine = false) {\n        this.write(newLine ? `\\n${'\\t'.repeat(this.indents)}${s}` : s, 'utf-8');\n        return this;\n    }\n    newLine(no = 2) {\n        this.write('\\n'.repeat(no) + '\\t'.repeat(this.indents), 'utf-8');\n        return this;\n    }\n}\nexports.default = Writer;\n","(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash.slice()\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} [raw] True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} [raw]     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     [raw] True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Util = exports.toSparqlJs = exports.toSparql = exports.Factory = exports.Algebra = exports.translate = void 0;\nconst sparqlAlgebra_1 = __importDefault(require(\"./lib/sparqlAlgebra\"));\nexports.translate = sparqlAlgebra_1.default;\nconst Algebra = __importStar(require(\"./lib/algebra\"));\nexports.Algebra = Algebra;\nconst factory_1 = __importDefault(require(\"./lib/factory\"));\nexports.Factory = factory_1.default;\nconst sparql_1 = require(\"./lib/sparql\");\nObject.defineProperty(exports, \"toSparql\", { enumerable: true, get: function () { return sparql_1.toSparql; } });\nObject.defineProperty(exports, \"toSparqlJs\", { enumerable: true, get: function () { return sparql_1.toSparqlJs; } });\nconst util_1 = __importDefault(require(\"./lib/util\"));\nexports.Util = util_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expressionTypes = exports.types = void 0;\nvar types;\n(function (types) {\n    types[\"ALT\"] = \"alt\";\n    types[\"ASK\"] = \"ask\";\n    types[\"BGP\"] = \"bgp\";\n    types[\"CONSTRUCT\"] = \"construct\";\n    types[\"DESCRIBE\"] = \"describe\";\n    types[\"DISTINCT\"] = \"distinct\";\n    types[\"EXPRESSION\"] = \"expression\";\n    types[\"EXTEND\"] = \"extend\";\n    types[\"FILTER\"] = \"filter\";\n    types[\"FROM\"] = \"from\";\n    types[\"GRAPH\"] = \"graph\";\n    types[\"GROUP\"] = \"group\";\n    types[\"INV\"] = \"inv\";\n    types[\"JOIN\"] = \"join\";\n    types[\"LEFT_JOIN\"] = \"leftjoin\";\n    types[\"LINK\"] = \"link\";\n    types[\"MINUS\"] = \"minus\";\n    types[\"NOP\"] = \"nop\";\n    types[\"NPS\"] = \"nps\";\n    types[\"ONE_OR_MORE_PATH\"] = \"OneOrMorePath\";\n    types[\"ORDER_BY\"] = \"orderby\";\n    types[\"PATH\"] = \"path\";\n    types[\"PATTERN\"] = \"pattern\";\n    types[\"PROJECT\"] = \"project\";\n    types[\"REDUCED\"] = \"reduced\";\n    types[\"SEQ\"] = \"seq\";\n    types[\"SERVICE\"] = \"service\";\n    types[\"SLICE\"] = \"slice\";\n    types[\"UNION\"] = \"union\";\n    types[\"VALUES\"] = \"values\";\n    types[\"ZERO_OR_MORE_PATH\"] = \"ZeroOrMorePath\";\n    types[\"ZERO_OR_ONE_PATH\"] = \"ZeroOrOnePath\";\n    types[\"COMPOSITE_UPDATE\"] = \"compositeupdate\";\n    types[\"DELETE_INSERT\"] = \"deleteinsert\";\n    types[\"LOAD\"] = \"load\";\n    types[\"CLEAR\"] = \"clear\";\n    types[\"CREATE\"] = \"create\";\n    types[\"DROP\"] = \"drop\";\n    types[\"ADD\"] = \"add\";\n    types[\"MOVE\"] = \"move\";\n    types[\"COPY\"] = \"copy\";\n})(types = exports.types || (exports.types = {}));\nvar expressionTypes;\n(function (expressionTypes) {\n    expressionTypes[\"AGGREGATE\"] = \"aggregate\";\n    expressionTypes[\"EXISTENCE\"] = \"existence\";\n    expressionTypes[\"NAMED\"] = \"named\";\n    expressionTypes[\"OPERATOR\"] = \"operator\";\n    expressionTypes[\"TERM\"] = \"term\";\n    expressionTypes[\"WILDCARD\"] = \"wildcard\";\n})(expressionTypes = exports.expressionTypes || (exports.expressionTypes = {}));\n//# sourceMappingURL=algebra.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst A = __importStar(require(\"./algebra\"));\nconst rdf_data_factory_1 = require(\"rdf-data-factory\");\nconst rdf_string_1 = require(\"rdf-string\");\nconst sparqljs_1 = require(\"sparqljs\");\nclass Factory {\n    constructor(dataFactory) {\n        this.dataFactory = dataFactory || new rdf_data_factory_1.DataFactory();\n        this.stringType = this.createTerm('http://www.w3.org/2001/XMLSchema#string');\n    }\n    createAlt(input, flatten = true) { return this.flattenMulti({ type: A.types.ALT, input }, flatten); }\n    createAsk(input) { return { type: A.types.ASK, input }; }\n    createBoundAggregate(variable, aggregate, expression, distinct, separator) {\n        const result = this.createAggregateExpression(aggregate, expression, distinct, separator);\n        result.variable = variable;\n        return result;\n    }\n    createBgp(patterns) { return { type: A.types.BGP, patterns }; }\n    createConstruct(input, template) { return { type: A.types.CONSTRUCT, input, template }; }\n    createDescribe(input, terms) { return { type: A.types.DESCRIBE, input, terms }; }\n    createDistinct(input) { return { type: A.types.DISTINCT, input }; }\n    createExtend(input, variable, expression) { return { type: A.types.EXTEND, input, variable, expression }; }\n    createFrom(input, def, named) { return { type: A.types.FROM, input, default: def, named }; }\n    createFilter(input, expression) { return { type: A.types.FILTER, input, expression }; }\n    createGraph(input, name) { return { type: A.types.GRAPH, input, name }; }\n    createGroup(input, variables, aggregates) { return { type: A.types.GROUP, input, variables, aggregates }; }\n    createInv(path) { return { type: A.types.INV, path }; }\n    createJoin(input, flatten = true) { return this.flattenMulti({ type: A.types.JOIN, input }, flatten); }\n    createLeftJoin(left, right, expression) {\n        if (expression)\n            return { type: A.types.LEFT_JOIN, input: [left, right], expression };\n        return { type: A.types.LEFT_JOIN, input: [left, right] };\n    }\n    createLink(iri) { return { type: A.types.LINK, iri }; }\n    createMinus(left, right) { return { type: A.types.MINUS, input: [left, right] }; }\n    createNop() { return { type: A.types.NOP }; }\n    createNps(iris) { return { type: A.types.NPS, iris }; }\n    createOneOrMorePath(path) { return { type: A.types.ONE_OR_MORE_PATH, path }; }\n    createOrderBy(input, expressions) { return { type: A.types.ORDER_BY, input, expressions }; }\n    createPath(subject, predicate, object, graph) {\n        if (graph)\n            return { type: A.types.PATH, subject, predicate, object, graph };\n        return { type: A.types.PATH, subject, predicate, object, graph: this.dataFactory.defaultGraph() };\n    }\n    createPattern(subject, predicate, object, graph) {\n        const pattern = this.dataFactory.quad(subject, predicate, object, graph);\n        pattern.type = A.types.PATTERN;\n        return pattern;\n    }\n    createProject(input, variables) { return { type: A.types.PROJECT, input, variables }; }\n    createReduced(input) { return { type: A.types.REDUCED, input }; }\n    createSeq(input, flatten = true) { return this.flattenMulti({ type: A.types.SEQ, input }, flatten); }\n    createService(input, name, silent) { return { type: A.types.SERVICE, input, name, silent: Boolean(silent) }; }\n    createSlice(input, start, length) {\n        start = start || 0;\n        if (length !== undefined)\n            return { type: A.types.SLICE, input, start, length };\n        return { type: A.types.SLICE, input, start };\n    }\n    createUnion(input, flatten = true) { return this.flattenMulti({ type: A.types.UNION, input }, flatten); }\n    createValues(variables, bindings) { return { type: A.types.VALUES, variables, bindings }; }\n    createZeroOrMorePath(path) { return { type: A.types.ZERO_OR_MORE_PATH, path }; }\n    createZeroOrOnePath(path) { return { type: A.types.ZERO_OR_ONE_PATH, path }; }\n    createAggregateExpression(aggregator, expression, distinct, separator) {\n        if (separator)\n            return { type: A.types.EXPRESSION, expressionType: A.expressionTypes.AGGREGATE, aggregator: aggregator, expression, separator, distinct };\n        return { type: A.types.EXPRESSION, expressionType: A.expressionTypes.AGGREGATE, aggregator: aggregator, expression, distinct };\n    }\n    createExistenceExpression(not, input) { return { type: A.types.EXPRESSION, expressionType: A.expressionTypes.EXISTENCE, not, input }; }\n    createNamedExpression(name, args) { return { type: A.types.EXPRESSION, expressionType: A.expressionTypes.NAMED, name, args }; }\n    createOperatorExpression(operator, args) { return { type: A.types.EXPRESSION, expressionType: A.expressionTypes.OPERATOR, operator, args }; }\n    createTermExpression(term) { return { type: A.types.EXPRESSION, expressionType: A.expressionTypes.TERM, term }; }\n    createWildcardExpression() { return { type: A.types.EXPRESSION, expressionType: A.expressionTypes.WILDCARD, wildcard: new sparqljs_1.Wildcard() }; }\n    createTerm(str) {\n        return (0, rdf_string_1.stringToTerm)(str, this.dataFactory);\n    }\n    // Update functions\n    createCompositeUpdate(updates) { return { type: A.types.COMPOSITE_UPDATE, updates }; }\n    createDeleteInsert(deleteQuads, insertQuads, where) {\n        const result = { type: A.types.DELETE_INSERT };\n        if (deleteQuads)\n            result.delete = deleteQuads;\n        if (insertQuads)\n            result.insert = insertQuads;\n        if (where)\n            result.where = where;\n        return result;\n    }\n    createLoad(source, destination, silent) {\n        const result = { type: A.types.LOAD, source };\n        if (destination)\n            result.destination = destination;\n        return this.addSilent(result, Boolean(silent));\n    }\n    createClear(source, silent) {\n        return this.addSilent({ type: A.types.CLEAR, source }, Boolean(silent));\n    }\n    createCreate(source, silent) {\n        return this.addSilent({ type: A.types.CREATE, source }, Boolean(silent));\n    }\n    createDrop(source, silent) {\n        return this.addSilent({ type: A.types.DROP, source }, Boolean(silent));\n    }\n    createAdd(source, destination, silent) {\n        return this.addSilent({ type: A.types.ADD, source, destination }, Boolean(silent));\n    }\n    createMove(source, destination, silent) {\n        return this.addSilent({ type: A.types.MOVE, source, destination }, Boolean(silent));\n    }\n    createCopy(source, destination, silent) {\n        return this.addSilent({ type: A.types.COPY, source, destination }, Boolean(silent));\n    }\n    addSilent(input, silent) {\n        if (silent)\n            input.silent = silent;\n        return input;\n    }\n    flattenMulti(input, flatten) {\n        if (!flatten) {\n            return input;\n        }\n        const type = input.type;\n        const children = input.input;\n        let newChildren = [];\n        for (const child of children) {\n            if (child.type === type) {\n                newChildren.push(...child.input);\n            }\n            else {\n                newChildren.push(child);\n            }\n        }\n        input.input = newChildren;\n        return input;\n    }\n}\nexports.default = Factory;\n//# sourceMappingURL=factory.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toSparqlJs = exports.toSparql = void 0;\nconst rdf_isomorphic_1 = require(\"rdf-isomorphic\");\nconst rdf_string_1 = require(\"rdf-string\");\nconst sparqljs_1 = require(\"sparqljs\");\nconst Algebra = __importStar(require(\"./algebra\"));\nconst factory_1 = __importDefault(require(\"./factory\"));\nconst util_1 = __importDefault(require(\"./util\"));\nconst types = Algebra.types;\nconst eTypes = Algebra.expressionTypes;\nlet context;\nconst factory = new factory_1.default();\nfunction toSparql(op, options = {}) {\n    let generator = new sparqljs_1.Generator(options);\n    return generator.stringify(toSparqlJs(op));\n}\nexports.toSparql = toSparql;\nfunction toSparqlJs(op) {\n    resetContext();\n    op = removeQuads(op);\n    let result = translateOperation(op);\n    if (result.type === 'group')\n        return result.patterns[0];\n    return result;\n}\nexports.toSparqlJs = toSparqlJs;\nfunction resetContext() {\n    context = { project: false, extend: [], group: [], aggregates: [], order: [] };\n}\nfunction translateOperation(op) {\n    // this allows us to differentiate between BIND and SELECT when translating EXTEND\n    // GRAPH was added because the way graphs get added back here is not the same as how they get added in the future\n    // ^ seems fine but might have to be changed if problems get detected in the future\n    if (op.type !== types.EXTEND && op.type !== types.ORDER_BY && op.type !== types.GRAPH)\n        context.project = false;\n    switch (op.type) {\n        case types.EXPRESSION: return translateExpression(op);\n        case types.ASK: return translateProject(op, types.ASK);\n        case types.BGP: return translateBgp(op);\n        case types.CONSTRUCT: return translateConstruct(op);\n        case types.DESCRIBE: return translateProject(op, types.DESCRIBE);\n        case types.DISTINCT: return translateDistinct(op);\n        case types.EXTEND: return translateExtend(op);\n        case types.FROM: return translateFrom(op);\n        case types.FILTER: return translateFilter(op);\n        case types.GRAPH: return translateGraph(op);\n        case types.GROUP: return translateGroup(op);\n        case types.JOIN: return translateJoin(op);\n        case types.LEFT_JOIN: return translateLeftJoin(op);\n        case types.MINUS: return translateMinus(op);\n        case types.NOP: return {};\n        case types.ORDER_BY: return translateOrderBy(op);\n        case types.PATH: return translatePath(op);\n        case types.PATTERN: return translatePattern(op);\n        case types.PROJECT: return translateProject(op, types.PROJECT);\n        case types.REDUCED: return translateReduced(op);\n        case types.SERVICE: return translateService(op);\n        case types.SLICE: return translateSlice(op);\n        case types.UNION: return translateUnion(op);\n        case types.VALUES: return translateValues(op);\n        // UPDATE operations\n        case types.COMPOSITE_UPDATE: return translateCompositeUpdate(op);\n        case types.DELETE_INSERT: return translateDeleteInsert(op);\n        case types.LOAD: return translateLoad(op);\n        case types.CLEAR: return translateClear(op);\n        case types.CREATE: return translateCreate(op);\n        case types.DROP: return translateDrop(op);\n        case types.ADD: return translateAdd(op);\n        case types.MOVE: return translateMove(op);\n        case types.COPY: return translateCopy(op);\n    }\n    throw new Error(`Unknown Operation type ${op.type}`);\n}\nfunction translateExpression(expr) {\n    switch (expr.expressionType) {\n        case eTypes.AGGREGATE: return translateAggregateExpression(expr);\n        case eTypes.EXISTENCE: return translateExistenceExpression(expr);\n        case eTypes.NAMED: return translateNamedExpression(expr);\n        case eTypes.OPERATOR: return translateOperatorExpression(expr);\n        case eTypes.TERM: return translateTermExpression(expr);\n        case eTypes.WILDCARD: return translateWildcardExpression(expr);\n    }\n    throw new Error(`Unknown Expression Operation type ${expr.expressionType}`);\n}\nfunction translatePathComponent(path) {\n    switch (path.type) {\n        case types.ALT: return translateAlt(path);\n        case types.INV: return translateInv(path);\n        case types.LINK: return translateLink(path);\n        case types.NPS: return translateNps(path);\n        case types.ONE_OR_MORE_PATH: return translateOneOrMorePath(path);\n        case types.SEQ: return translateSeq(path);\n        case types.ZERO_OR_MORE_PATH: return translateZeroOrMorePath(path);\n        case types.ZERO_OR_ONE_PATH: return translateZeroOrOnePath(path);\n    }\n    throw new Error(`Unknown Path type ${path.type}`);\n}\nfunction translateTerm(term) {\n    return (0, rdf_string_1.termToString)(term);\n}\n// ------------------------- EXPRESSIONS -------------------------\nfunction translateAggregateExpression(expr) {\n    const result = {\n        expression: translateExpression(expr.expression),\n        type: 'aggregate',\n        aggregation: expr.aggregator,\n        distinct: expr.distinct\n    };\n    if (expr.separator)\n        result.separator = expr.separator;\n    return result;\n}\nfunction translateExistenceExpression(expr) {\n    return {\n        type: 'operation',\n        operator: expr.not ? 'notexists' : 'exists',\n        args: util_1.default.flatten([\n            translateOperation(expr.input)\n        ])\n    };\n}\nfunction translateNamedExpression(expr) {\n    return {\n        type: 'functionCall',\n        // Wrong typings\n        function: expr.name,\n        args: expr.args.map(translateExpression)\n    };\n}\nfunction translateOperatorExpression(expr) {\n    if (expr.operator === 'desc') {\n        const result = { expression: translateExpression(expr.args[0]) };\n        result.descending = true;\n        return result;\n    }\n    const result = {\n        type: 'operation',\n        operator: expr.operator,\n        args: expr.args.map(translateExpression)\n    };\n    if (result.operator === 'in' || result.operator === 'notin')\n        result.args = [result.args[0]].concat([result.args.slice(1)]);\n    return result;\n}\nfunction translateTermExpression(expr) {\n    return expr.term;\n}\nfunction translateWildcardExpression(expr) {\n    return expr.wildcard;\n}\nfunction arrayToPattern(input) {\n    if (!Array.isArray(input))\n        return input;\n    if (input.length === 1)\n        return input[0];\n    return {\n        type: 'group',\n        patterns: input,\n    };\n}\n// ------------------------- OPERATIONS -------------------------\n// these get translated in the project function\nfunction translateBoundAggregate(op) {\n    return op;\n}\nfunction translateBgp(op) {\n    let patterns = op.patterns.map(translatePattern);\n    if (patterns.length === 0)\n        return null;\n    return {\n        type: 'bgp',\n        triples: patterns\n    };\n}\nfunction translateConstruct(op) {\n    return {\n        type: 'query',\n        prefixes: {},\n        queryType: 'CONSTRUCT',\n        template: op.template.map(translatePattern),\n        where: util_1.default.flatten([\n            translateOperation(op.input)\n        ])\n    };\n}\nfunction translateDistinct(op) {\n    let result = translateOperation(op.input);\n    // project is nested in group object\n    result.patterns[0].distinct = true;\n    return result;\n}\nfunction translateExtend(op) {\n    if (context.project) {\n        context.extend.push(op);\n        return translateOperation(op.input);\n    }\n    return util_1.default.flatten([\n        translateOperation(op.input),\n        {\n            type: 'bind',\n            variable: op.variable,\n            expression: translateExpression(op.expression)\n        }\n    ]);\n}\nfunction translateFrom(op) {\n    const result = translateOperation(op.input);\n    // Can't type as CONSTRUCT queries do not have `from` field in their type\n    let obj = result;\n    // project is nested in group object\n    if (result.type === 'group') {\n        obj = result.patterns[0];\n    }\n    obj.from = {\n        default: op.default,\n        named: op.named\n    };\n    return result;\n}\nfunction translateFilter(op) {\n    return {\n        type: 'group',\n        patterns: util_1.default.flatten([\n            translateOperation(op.input),\n            { type: 'filter', expression: translateExpression(op.expression) }\n        ])\n    };\n}\nfunction translateGraph(op) {\n    return {\n        type: 'graph',\n        patterns: util_1.default.flatten([translateOperation(op.input)]),\n        name: op.name\n    };\n}\nfunction translateGroup(op) {\n    const input = translateOperation(op.input);\n    const aggs = op.aggregates.map(translateBoundAggregate);\n    context.aggregates.push(...aggs);\n    // TODO: apply possible extends\n    context.group.push(...op.variables);\n    return input;\n}\nfunction translateJoin(op) {\n    const arr = util_1.default.flatten(op.input.map(translateOperation));\n    // Merge bgps\n    // This is possible if one side was a path and the other a bgp for example\n    return arr.reduce((result, val) => {\n        if (val.type !== 'bgp' || result.length == 0 || result[result.length - 1].type !== 'bgp') {\n            result.push(val);\n        }\n        else {\n            result[result.length - 1].triples.push(...val.triples);\n        }\n        return result;\n    }, []);\n}\nfunction translateLeftJoin(op) {\n    const leftjoin = {\n        type: 'optional',\n        patterns: [\n            translateOperation(op.input[1])\n        ]\n    };\n    if (op.expression) {\n        leftjoin.patterns.push({\n            type: 'filter',\n            expression: translateExpression(op.expression)\n        });\n    }\n    leftjoin.patterns = util_1.default.flatten(leftjoin.patterns);\n    return util_1.default.flatten([\n        translateOperation(op.input[0]),\n        leftjoin\n    ]);\n}\nfunction translateMinus(op) {\n    let patterns = translateOperation(op.input[1]);\n    if (patterns.type === 'group')\n        patterns = patterns.patterns;\n    if (!Array.isArray(patterns))\n        patterns = [patterns];\n    return util_1.default.flatten([\n        translateOperation(op.input[0]),\n        {\n            type: 'minus',\n            patterns: patterns\n        }\n    ]);\n}\nfunction translateOrderBy(op) {\n    context.order.push(...op.expressions);\n    return translateOperation(op.input);\n}\nfunction translatePath(op) {\n    return {\n        type: 'bgp',\n        triples: [{\n                subject: op.subject,\n                predicate: translatePathComponent(op.predicate),\n                object: op.object\n            }]\n    };\n}\nfunction translatePattern(op) {\n    return {\n        subject: op.subject,\n        predicate: op.predicate,\n        object: op.object\n    };\n}\nfunction replaceAggregatorVariables(s, map) {\n    let st = util_1.default.isSimpleTerm(s) ? translateTerm(s) : s;\n    if (typeof st === 'string') {\n        if (map[st])\n            return map[st];\n    }\n    else if (Array.isArray(s)) {\n        s = s.map(e => replaceAggregatorVariables(e, map));\n    }\n    else {\n        for (let key of Object.keys(s))\n            s[key] = replaceAggregatorVariables(s[key], map);\n    }\n    return s;\n}\nfunction translateProject(op, type) {\n    const result = {\n        type: 'query',\n        prefixes: {}\n    };\n    // Makes typing easier in some places\n    const select = result;\n    let variables;\n    if (type === types.PROJECT) {\n        result.queryType = 'SELECT';\n        variables = op.variables;\n    }\n    else if (type === types.ASK) {\n        result.queryType = 'ASK';\n    }\n    else if (type === types.DESCRIBE) {\n        result.queryType = 'DESCRIBE';\n        variables = op.terms;\n    }\n    // backup values in case of nested queries\n    // everything in extend, group, etc. is irrelevant for this project call\n    const extend = context.extend;\n    const group = context.group;\n    const aggregates = context.aggregates;\n    const order = context.order;\n    resetContext();\n    context.project = true;\n    let input = util_1.default.flatten([translateOperation(op.input)]);\n    if (input.length === 1 && input[0].type === 'group')\n        input = input[0].patterns;\n    result.where = input;\n    let aggregators = {};\n    // these can not reference each other\n    for (let agg of context.aggregates)\n        aggregators[translateTerm(agg.variable)] = translateExpression(agg);\n    // do these in reverse order since variables in one extend might apply to an expression in an other extend\n    let extensions = {};\n    for (let i = context.extend.length - 1; i >= 0; --i) {\n        let e = context.extend[i];\n        extensions[translateTerm(e.variable)] = replaceAggregatorVariables(translateExpression(e.expression), aggregators);\n    }\n    if (context.group.length > 0)\n        select.group = context.group.map(variable => {\n            let v = translateTerm(variable);\n            if (extensions[v]) {\n                let result = extensions[v];\n                delete extensions[v]; // make sure there is only 1 'AS' statement\n                return {\n                    variable,\n                    expression: result\n                };\n            }\n            return { expression: variable };\n        });\n    // descending expressions will already be in the correct format due to the structure of those\n    if (context.order.length > 0)\n        select.order = context.order.map(translateOperation).map(o => o.descending ? o : ({ expression: o }));\n    // this needs to happen after the group because it might depend on variables generated there\n    if (variables) {\n        select.variables = variables.map((term) => {\n            let v = translateTerm(term);\n            if (extensions[v])\n                return {\n                    variable: term,\n                    expression: extensions[v]\n                };\n            return term;\n        });\n        // if the * didn't match any variables this would be empty\n        if (select.variables.length === 0)\n            select.variables = [new sparqljs_1.Wildcard()];\n    }\n    // convert filter to 'having' if it contains an aggregator variable\n    // could always convert, but is nicer to use filter when possible\n    if (result.where.length > 0 && result.where[result.where.length - 1].type === 'filter') {\n        const filter = result.where[result.where.length - 1];\n        if (objectContainsValues(filter, Object.keys(aggregators))) {\n            select.having = util_1.default.flatten([replaceAggregatorVariables(filter.expression, aggregators)]);\n            result.where.splice(-1);\n        }\n    }\n    context.extend = extend;\n    context.group = group;\n    context.aggregates = aggregates;\n    context.order = order;\n    // subqueries need to be in a group, this will be removed again later for the root query\n    return { type: 'group', patterns: [select] };\n}\nfunction objectContainsValues(o, vals) {\n    if (util_1.default.isSimpleTerm(o))\n        return vals.indexOf(translateTerm(o)) >= 0;\n    if (Array.isArray(o))\n        return o.some(e => objectContainsValues(e, vals));\n    if (o === Object(o))\n        return Object.keys(o).some(key => objectContainsValues(o[key], vals));\n    return vals.indexOf(o) >= 0;\n}\nfunction translateReduced(op) {\n    let result = translateOperation(op.input);\n    // project is nested in group object\n    result.patterns[0].reduced = true;\n    return result;\n}\nfunction translateService(op) {\n    let patterns = translateOperation(op.input);\n    if (patterns.type === 'group')\n        patterns = patterns.patterns;\n    if (!Array.isArray(patterns))\n        patterns = [patterns];\n    return {\n        type: 'service',\n        // Typings are wrong, name can also be a variable\n        name: op.name,\n        silent: op.silent,\n        patterns\n    };\n}\nfunction translateSlice(op) {\n    let result = translateOperation(op.input);\n    // results can be nested in a group object\n    let obj = result;\n    if (result.type && result.type === 'group')\n        obj = result.patterns[0];\n    if (op.start !== 0)\n        obj.offset = op.start;\n    if (op.length !== undefined)\n        obj.limit = op.length;\n    return result;\n}\nfunction translateUnion(op) {\n    return {\n        type: 'union',\n        patterns: op.input.map(translateOperation).map(arrayToPattern),\n    };\n}\nfunction translateValues(op) {\n    // TODO: check if handled correctly when outside of select block\n    return {\n        type: 'values',\n        values: op.bindings.map(binding => {\n            let result = {};\n            for (let v of op.variables) {\n                let s = `?${v.value}`;\n                if (binding[s])\n                    result[s] = binding[s];\n                else\n                    result[s] = undefined;\n            }\n            return result;\n        })\n    };\n}\n// PATH COMPONENTS\nfunction translateAlt(path) {\n    const mapped = path.input.map(translatePathComponent);\n    if (mapped.every(entry => 'pathType' in entry && entry.pathType === '!')) {\n        return {\n            type: 'path',\n            pathType: '!',\n            items: [{\n                    type: 'path',\n                    pathType: '|',\n                    items: util_1.default.flatten(mapped.map(entry => entry.items))\n                }]\n        };\n    }\n    return {\n        type: 'path',\n        pathType: '|',\n        items: mapped\n    };\n}\nfunction translateInv(path) {\n    if (path.path.type === types.NPS) {\n        const inv = path.path.iris.map((iri) => {\n            return {\n                type: 'path',\n                pathType: '^',\n                items: [iri]\n            };\n        });\n        if (inv.length <= 1)\n            return {\n                type: 'path',\n                pathType: '!',\n                items: inv\n            };\n        return {\n            type: 'path',\n            pathType: '!',\n            items: [{\n                    type: 'path',\n                    pathType: '|',\n                    items: inv\n                }]\n        };\n    }\n    return {\n        type: 'path',\n        pathType: '^',\n        items: [translatePathComponent(path.path)]\n    };\n}\nfunction translateLink(path) {\n    return path.iri;\n}\nfunction translateNps(path) {\n    if (path.iris.length <= 1)\n        return {\n            type: 'path',\n            pathType: '!',\n            items: path.iris\n        };\n    return {\n        type: 'path',\n        pathType: '!',\n        items: [{\n                type: 'path',\n                pathType: '|',\n                items: path.iris\n            }]\n    };\n}\nfunction translateOneOrMorePath(path) {\n    return {\n        type: 'path',\n        pathType: '+',\n        items: [translatePathComponent(path.path)]\n    };\n}\nfunction translateSeq(path) {\n    return {\n        type: 'path',\n        pathType: '/',\n        items: path.input.map(translatePathComponent)\n    };\n}\nfunction translateZeroOrMorePath(path) {\n    return {\n        type: 'path',\n        pathType: '*',\n        items: [translatePathComponent(path.path)]\n    };\n}\nfunction translateZeroOrOnePath(path) {\n    // Typings are missing '?' operator\n    return {\n        type: 'path',\n        // Typings are missing this path\n        pathType: '?',\n        items: [translatePathComponent(path.path)]\n    };\n}\n// UPDATE OPERATIONS\nfunction translateCompositeUpdate(op) {\n    const updates = op.updates.map(update => {\n        const result = translateOperation(update);\n        return result.updates[0];\n    });\n    return { prefixes: {}, type: 'update', updates };\n}\nfunction translateDeleteInsert(op) {\n    var _a;\n    let where = op.where;\n    let use = undefined;\n    if (where && where.type === types.FROM) {\n        let from = where;\n        where = from.input;\n        use = { default: from.default, named: from.named };\n    }\n    const updates = [{\n            updateType: 'insertdelete',\n            delete: convertUpdatePatterns(op.delete || []),\n            insert: convertUpdatePatterns(op.insert || []),\n        }];\n    // Typings don't support 'using' yet\n    if (use)\n        updates[0].using = use;\n    // corresponds to empty array in SPARQL.js\n    if (!where || (where.type === types.BGP && where.patterns.length === 0))\n        updates[0].where = [];\n    else {\n        const graphs = [];\n        let result = translateOperation(removeQuadsRecursive(where, graphs));\n        if (result.type === 'group')\n            updates[0].where = result.patterns;\n        else\n            updates[0].where = [result];\n        // graph might not be applied yet since there was no project\n        // this can only happen if there was a single graph\n        if (graphs.length > 0) {\n            if (graphs.length !== 1)\n                throw new Error('This is unexpected and might indicate an error in graph handling for updates.');\n            // ignore if default graph\n            if (((_a = graphs[0]) === null || _a === void 0 ? void 0 : _a.value) !== '')\n                updates[0].where = [{ type: 'graph', patterns: updates[0].where, name: graphs[0] }];\n        }\n    }\n    // not really necessary but can give cleaner looking queries\n    if (!op.delete && !op.where) {\n        updates[0].updateType = 'insert';\n        delete updates[0].delete;\n        delete updates[0].where;\n    }\n    else if (!op.insert && !op.where) {\n        delete updates[0].insert;\n        delete updates[0].where;\n        if (op.delete.some(pattern => pattern.subject.termType === 'Variable' ||\n            pattern.predicate.termType === 'Variable' ||\n            pattern.object.termType === 'Variable'))\n            updates[0].updateType = 'deletewhere';\n        else\n            updates[0].updateType = 'delete';\n    }\n    else if (!op.insert && op.where && op.where.type === 'bgp') {\n        if ((0, rdf_isomorphic_1.isomorphic)(op.delete, op.where.patterns)) {\n            delete updates[0].where;\n            updates[0].updateType = 'deletewhere';\n        }\n    }\n    return { prefixes: {}, type: 'update', updates };\n}\nfunction translateLoad(op) {\n    // Typings are wrong, destiniation is optional\n    const updates = [{ type: 'load', silent: Boolean(op.silent), source: op.source }];\n    if (op.destination)\n        updates[0].destination = op.destination;\n    return { prefixes: {}, type: 'update', updates };\n}\nfunction translateClear(op) {\n    return translateClearCreateDrop(op, 'clear');\n}\nfunction translateCreate(op) {\n    return translateClearCreateDrop(op, 'create');\n}\nfunction translateDrop(op) {\n    return translateClearCreateDrop(op, 'drop');\n}\nfunction translateClearCreateDrop(op, type) {\n    const updates = [{ type, silent: Boolean(op.silent) }];\n    // Typings are wrong, type is not required, see for example \"clear-drop\" test\n    if (op.source === 'DEFAULT')\n        updates[0].graph = { default: true };\n    else if (op.source === 'NAMED')\n        updates[0].graph = { named: true };\n    else if (op.source === 'ALL')\n        updates[0].graph = { all: true };\n    else\n        updates[0].graph = { type: 'graph', name: op.source };\n    return { prefixes: {}, type: 'update', updates };\n}\nfunction translateAdd(op) {\n    return translateUpdateGraphShortcut(op, 'add');\n}\nfunction translateMove(op) {\n    return translateUpdateGraphShortcut(op, 'move');\n}\nfunction translateCopy(op) {\n    return translateUpdateGraphShortcut(op, 'copy');\n}\nfunction translateUpdateGraphShortcut(op, type) {\n    const updates = [{ type, silent: Boolean(op.silent) }];\n    updates[0].source = op.source === 'DEFAULT' ? { type: 'graph', default: true } : { type: 'graph', name: op.source };\n    updates[0].destination = op.destination === 'DEFAULT' ? { type: 'graph', default: true } : { type: 'graph', name: op.destination };\n    return { prefixes: {}, type: 'update', updates };\n}\n// similar to removeQuads but more simplified for UPDATEs\nfunction convertUpdatePatterns(patterns) {\n    if (!patterns)\n        return [];\n    const graphs = {};\n    patterns.forEach(pattern => {\n        const graph = pattern.graph.value;\n        if (!graphs[graph])\n            graphs[graph] = [];\n        graphs[graph].push(pattern);\n    });\n    return Object.keys(graphs).map(graph => {\n        if (graph === '')\n            return { type: 'bgp', triples: graphs[graph].map(translatePattern) };\n        return { type: 'graph', triples: graphs[graph].map(translatePattern), name: graphs[graph][0].graph };\n    });\n}\nfunction removeQuads(op) {\n    return removeQuadsRecursive(op, []);\n}\n// remove quads\nfunction removeQuadsRecursive(op, graphs) {\n    if (Array.isArray(op))\n        return op.map(sub => removeQuadsRecursive(sub, graphs));\n    if (!op.type)\n        return op;\n    // UPDATE operations with Patterns handle graphs a bit differently\n    if (op.type === types.DELETE_INSERT)\n        return op;\n    if ((op.type === types.PATTERN || op.type === types.PATH) && op.graph) {\n        graphs.push(op.graph);\n        // Remove non-default graphs\n        if (op.graph.name !== '')\n            return op.type === types.PATTERN ?\n                factory.createPattern(op.subject, op.predicate, op.object) :\n                factory.createPath(op.subject, op.predicate, op.object);\n        return op;\n    }\n    const result = {};\n    const keyGraphs = {}; // unique graph per key\n    const globalNames = {}; // track all the unique graph names for the entire Operation\n    for (let key of Object.keys(op)) {\n        const newGraphs = [];\n        result[key] = removeQuadsRecursive(op[key], newGraphs);\n        if (newGraphs.length > 0) {\n            keyGraphs[key] = newGraphs;\n            for (const graph of newGraphs) {\n                globalNames[graph.value] = graph;\n            }\n        }\n    }\n    const graphNameSet = Object.keys(globalNames);\n    if (graphNameSet.length > 0) {\n        // We also need to create graph statement if we are at the edge of certain operations\n        if (graphNameSet.length === 1 && ![types.PROJECT, types.SERVICE].includes(op.type))\n            graphs.push(globalNames[graphNameSet[0]]);\n        else if (op.type === types.BGP) {\n            // This is the specific case that got changed because of using quads.\n            return splitBgpToGraphs(op, keyGraphs.patterns);\n        }\n        else {\n            // multiple graphs (or project), need to create graph objects for them\n            for (let key of Object.keys(keyGraphs)) {\n                const value = result[key];\n                if (Array.isArray(value))\n                    result[key] = value.map((child, idx) => keyGraphs[key][0].value === '' ? child : factory.createGraph(child, keyGraphs[key][idx]));\n                else if (keyGraphs[key][0].value !== '')\n                    result[key] = factory.createGraph(value, keyGraphs[key][0]);\n            }\n        }\n    }\n    return result;\n}\n// `graphs` should be an array of length identical to `op.patterns`, containing the corresponding graph for each triple.\nfunction splitBgpToGraphs(op, graphs) {\n    var _a;\n    // Split patterns per graph\n    const graphPatterns = {};\n    for (let i = 0; i < op.patterns.length; ++i) {\n        const pattern = op.patterns[i];\n        const graphName = graphs[i].value;\n        graphPatterns[graphName] = (_a = graphPatterns[graphName]) !== null && _a !== void 0 ? _a : { patterns: [], graph: graphs[i] };\n        graphPatterns[graphName].patterns.push(pattern);\n    }\n    // Create graph objects for every cluster\n    let children = [];\n    for (const [graphName, { patterns, graph }] of Object.entries(graphPatterns)) {\n        const bgp = factory.createBgp(patterns);\n        children.push(graphName === '' ? bgp : factory.createGraph(bgp, graph));\n    }\n    // Join the graph objects\n    let join = children[0];\n    for (let i = 1; i < children.length; ++i)\n        join = factory.createJoin([join, children[i]]);\n    return join;\n}\n//# sourceMappingURL=sparql.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst equal = require(\"fast-deep-equal/es6\");\nconst rdf_string_1 = require(\"rdf-string\");\nconst Algebra = __importStar(require(\"./algebra\"));\nconst factory_1 = __importDefault(require(\"./factory\"));\nconst util_1 = __importDefault(require(\"./util\"));\nconst Parser = require('sparqljs').Parser;\nconst types = Algebra.types;\nlet variables = new Set();\nlet varCount = 0;\nlet useQuads = false;\nlet factory;\n/**\n * Translates the given SPARQL query to SPARQL Algebra.\n * @param sparql - Either a SPARQL string or an object generated by sparql.js\n * @param options - Optional options object. Current options:\n *                    * dataFactory: The Datafactory used to generate terms. Default @rdfjs/data-model.\n *                    * quads: Boolean indicating whether triples should be converted to Quads (consumes GRAPH statements). Default false.\n *                    * prefixes: Pre-defined prefixes for the given query. Default empty.\n *                    * baseIRI: Base IRI that should be used for the query. Default undefined (throws error if required).\n * @returns {Operation}\n */\nfunction translate(sparql, options) {\n    options = options || {};\n    factory = new factory_1.default(options.dataFactory);\n    let query;\n    if (isString(sparql)) {\n        let parser = new Parser(options);\n        // resets the identifier counter used for blank nodes\n        // provides nicer and more consistent output if there are multiple calls\n        parser._resetBlanks();\n        query = parser.parse(sparql);\n    }\n    else {\n        query = sparql;\n    }\n    return translateQuery(query, options.quads, options.blankToVariable);\n}\nexports.default = translate;\nfunction translateQuery(sparql, quads, blankToVariable) {\n    // this set is filled in during the inScopeVariables call\n    variables = new Set();\n    varCount = 0;\n    useQuads = Boolean(quads);\n    // Assume this is an empty query\n    if (!sparql.type)\n        return factory.createNop();\n    if (sparql.type !== 'query' && sparql.type !== 'update')\n        throw new Error('Translate only works on complete query or update objects.');\n    let res;\n    // find ALL variables here to fill `variables` array\n    findAllVariables(sparql);\n    if (sparql.type === 'query') {\n        // group and where are identical, having only 1 makes parsing easier, can be undefined in DESCRIBE\n        const group = { type: 'group', patterns: sparql.where || [] };\n        res = translateGraphPattern(group);\n        res = translateAggregates(sparql, res);\n    }\n    else if (sparql.type === 'update') {\n        res = translateUpdate(sparql);\n    }\n    if (blankToVariable) {\n        res = translateBlankNodesToVariables(res);\n    }\n    return res;\n}\nfunction isString(str) {\n    return typeof str === 'string';\n}\nfunction isTerm(term) {\n    return Boolean(term === null || term === void 0 ? void 0 : term.termType);\n}\n// This is not completely correct but this way we also catch SPARQL.js triples\nfunction isTriple(triple) {\n    return triple.subject && triple.predicate && triple.object;\n}\nfunction isVariable(term) {\n    return (term === null || term === void 0 ? void 0 : term.termType) === 'Variable';\n}\n// Will be used to make sure new variables don't overlap\nfunction findAllVariables(thingy) {\n    if (isTerm(thingy)) {\n        if (isVariable(thingy)) {\n            // Variables don't store the `?`\n            variables.add(`?${thingy.value}`);\n        }\n    }\n    else if (Array.isArray(thingy)) {\n        for (const entry of thingy)\n            findAllVariables(entry);\n    }\n    else if (thingy && typeof thingy === 'object') {\n        for (let key of Object.keys(thingy)) {\n            // Some variables are hidden in keys (specifically for VALUES)\n            if (key.startsWith('?'))\n                variables.add(key);\n            findAllVariables(thingy[key]);\n        }\n    }\n}\n// 18.2.1\nfunction inScopeVariables(thingy) {\n    let inScope = {};\n    if (isTriple(thingy)) {\n        // Note that this could both be an actual Quad or a SPARQL.js triple (without graph)\n        const result = [\n            inScopeVariables(thingy.subject),\n            inScopeVariables(thingy.predicate),\n            inScopeVariables(thingy.object),\n            thingy.graph ? inScopeVariables(thingy.graph) : {}\n        ];\n        Object.assign(inScope, ...result);\n    }\n    else if (isTerm(thingy)) {\n        if (isVariable(thingy))\n            inScope[thingy.value] = thingy;\n    }\n    else if (thingy.type === 'bgp') {\n        // Slightly cheating but this is a subset of what we support so is fine\n        const quads = thingy.triples;\n        Object.assign(inScope, ...quads.map(inScopeVariables));\n    }\n    else if (thingy.type === 'path') {\n        // A path predicate should not have variables but just iterating so we could theoretically support this\n        Object.assign(inScope, ...thingy.items.map(inScopeVariables));\n    }\n    else if (thingy.type === 'group' || thingy.type === 'union' || thingy.type === 'optional') {\n        Object.assign(inScope, ...thingy.patterns.map(inScopeVariables));\n    }\n    else if (thingy.type === 'service' || thingy.type === 'graph') {\n        Object.assign(inScope, inScopeVariables(thingy.name));\n        Object.assign(inScope, ...thingy.patterns.map(inScopeVariables));\n    }\n    else if (thingy.type === 'bind') {\n        Object.assign(inScope, inScopeVariables(thingy.variable));\n    }\n    else if (thingy.type === 'values') {\n        if (thingy.values.length > 0) {\n            const vars = Object.keys(thingy.values[0]).map(v => factory.createTerm(v));\n            Object.assign(inScope, ...vars.map(inScopeVariables));\n        }\n    }\n    else if (thingy.type === 'query') {\n        if (thingy.queryType === 'SELECT' || thingy.queryType === 'DESCRIBE') {\n            if (thingy.where && thingy.variables.some(util_1.default.isWildcard))\n                Object.assign(inScope, ...thingy.where.map(inScopeVariables));\n            for (const v of thingy.variables) {\n                if (isVariable(v))\n                    Object.assign(inScope, inScopeVariables(v));\n                else if (v.variable)\n                    Object.assign(inScope, inScopeVariables(v.variable));\n            }\n            if (thingy.queryType === 'SELECT') {\n                if (thingy.group) {\n                    // Grouping can be a VariableExpression, typings are wrong\n                    for (const g of thingy.group) {\n                        if (g.variable)\n                            Object.assign(inScope, inScopeVariables(g.variable));\n                    }\n                }\n                if (thingy.values) {\n                    const values = { type: 'values', values: thingy.values };\n                    Object.assign(inScope, inScopeVariables(values));\n                }\n            }\n        }\n    }\n    return inScope;\n}\nfunction translateGraphPattern(thingy) {\n    // 18.2.2.1\n    // already done by sparql parser\n    // 18.2.2.3\n    // 18.2.2.4\n    // 18.2.2.5\n    // In Sparql.js, a group with a single BGP in it is a single object.\n    if (thingy.type === 'bgp') {\n        return translateBgp(thingy);\n    }\n    // 18.2.2.6 - GroupOrUnionGraphPattern\n    if (thingy.type === 'union')\n        return factory.createUnion(thingy.patterns.map((p) => {\n            // sparqljs doesn't always indicate the children are groups\n            if (p.type !== 'group')\n                p = { type: 'group', patterns: [p] };\n            return translateGraphPattern(p);\n        }));\n    // 18.2.2.6 - GraphGraphPattern\n    if (thingy.type === 'graph') {\n        // Sparql.js combines the group graph pattern and the graph itself in the same object.\n        // We split here so the group graph pattern can be interpreted correctly.\n        const group = { type: 'group', patterns: thingy.patterns };\n        let result = translateGraphPattern(group);\n        // Output depends on if we use quads or not\n        if (useQuads)\n            result = recurseGraph(result, thingy.name);\n        else\n            result = factory.createGraph(result, thingy.name);\n        return result;\n    }\n    // 18.2.2.6 - InlineData\n    if (thingy.type === 'values')\n        return translateInlineData(thingy);\n    // 18.2.2.6 - SubSelect\n    if (thingy.type === 'query')\n        return translateQuery(thingy, useQuads, false);\n    if (thingy.type === 'group') {\n        // 18.2.2.2\n        let filters = [];\n        let nonfilters = [];\n        for (let pattern of thingy.patterns)\n            (pattern.type === 'filter' ? filters : nonfilters).push(pattern);\n        // 18.2.2.6 - GroupGraphPattern\n        let result = nonfilters.reduce(accumulateGroupGraphPattern, factory.createBgp([]));\n        // 18.2.2.7\n        let expressions = filters.map(filter => translateExpression(filter.expression));\n        if (expressions.length > 0)\n            result = factory.createFilter(result, expressions.reduce((acc, exp) => factory.createOperatorExpression('&&', [acc, exp])));\n        return result;\n    }\n    throw new Error(`Unexpected type: ${thingy.type}`);\n}\nfunction translateExpression(exp) {\n    if (util_1.default.isSimpleTerm(exp))\n        return factory.createTermExpression(exp);\n    if (util_1.default.isQuad(exp)) {\n        if (util_1.default.hasQuadVariables(exp))\n            return factory.createOperatorExpression('triple', [\n                translateExpression(exp.subject),\n                translateExpression(exp.predicate),\n                translateExpression(exp.object),\n            ]);\n        else\n            return factory.createTermExpression(exp);\n    }\n    if (util_1.default.isWildcard(exp))\n        return factory.createWildcardExpression();\n    if ('aggregation' in exp)\n        return factory.createAggregateExpression(exp.aggregation, translateExpression(exp.expression), Boolean(exp.distinct), exp.separator);\n    if ('function' in exp)\n        // Outdated typings\n        return factory.createNamedExpression(exp.function, exp.args.map(translateExpression));\n    if ('operator' in exp) {\n        if (exp.operator === 'exists' || exp.operator === 'notexists')\n            return factory.createExistenceExpression(exp.operator === 'notexists', translateGraphPattern(exp.args[0]));\n        if (exp.operator === 'in' || exp.operator === 'notin')\n            exp.args = [exp.args[0]].concat(exp.args[1]); // sparql.js uses 2 arguments with the second one being a list\n        return factory.createOperatorExpression(exp.operator, exp.args.map(translateExpression));\n    }\n    throw new Error(`Unknown expression: ${JSON.stringify(exp)}`);\n}\nfunction translateBgp(thingy) {\n    let patterns = [];\n    let joins = [];\n    for (let t of thingy.triples) {\n        if ('pathType' in t.predicate) {\n            // translatePath returns a mix of Quads and Paths\n            let path = translatePath(t);\n            for (let p of path) {\n                if (p.type === types.PATH) {\n                    if (patterns.length > 0)\n                        joins.push(factory.createBgp(patterns));\n                    patterns = [];\n                    joins.push(p);\n                }\n                else\n                    patterns.push(p);\n            }\n        }\n        else\n            patterns.push(translateQuad(t));\n    }\n    if (patterns.length > 0)\n        joins.push(factory.createBgp(patterns));\n    if (joins.length === 1)\n        return joins[0];\n    return factory.createJoin(joins);\n}\nfunction translatePath(triple) {\n    let sub = triple.subject;\n    let pred = translatePathPredicate(triple.predicate);\n    let obj = triple.object;\n    return simplifyPath(sub, pred, obj);\n}\nfunction translatePathPredicate(predicate) {\n    if (util_1.default.isSimpleTerm(predicate)) {\n        if (predicate.termType === 'NamedNode')\n            return factory.createLink(predicate);\n        else\n            throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(predicate)}`);\n    }\n    if (predicate.pathType === '^')\n        return factory.createInv(translatePathPredicate(predicate.items[0]));\n    if (predicate.pathType === '!') {\n        // negation is either over a single predicate or a list of disjuncted properties\n        let normals = [];\n        let inverted = [];\n        let items;\n        if ('pathType' in predicate.items[0] && predicate.items[0].pathType === '|')\n            items = predicate.items[0].items; // the | element\n        else\n            items = predicate.items;\n        for (let item of items) {\n            if (util_1.default.isSimpleTerm(item))\n                normals.push(item);\n            else if (item.pathType === '^')\n                inverted.push(item.items[0]);\n            else\n                throw new Error(`Unexpected item: ${JSON.stringify(item)}`);\n        }\n        // NPS elements do not have the LINK function\n        let normalElement = factory.createNps(normals);\n        let invertedElement = factory.createInv(factory.createNps(inverted));\n        if (inverted.length === 0)\n            return normalElement;\n        if (normals.length === 0)\n            return invertedElement;\n        return factory.createAlt([normalElement, invertedElement,]);\n    }\n    if (predicate.pathType === '/')\n        return factory.createSeq(predicate.items.map(translatePathPredicate));\n    if (predicate.pathType === '|')\n        return factory.createAlt(predicate.items.map(translatePathPredicate));\n    if (predicate.pathType === '*')\n        return factory.createZeroOrMorePath(translatePathPredicate(predicate.items[0]));\n    if (predicate.pathType === '+')\n        return factory.createOneOrMorePath(translatePathPredicate(predicate.items[0]));\n    if (predicate.pathType === '?')\n        return factory.createZeroOrOnePath(translatePathPredicate(predicate.items[0]));\n    throw new Error(`Unable to translate path expression ${JSON.stringify(predicate)}`);\n}\nfunction simplifyPath(subject, predicate, object) {\n    if (predicate.type === types.LINK)\n        return [factory.createPattern(subject, predicate.iri, object)];\n    if (predicate.type === types.INV)\n        return simplifyPath(object, predicate.path, subject);\n    if (predicate.type === types.SEQ) {\n        let joiner = subject;\n        return util_1.default.flatten(predicate.input.map((subOp, i) => {\n            const nextJoiner = i === predicate.input.length - 1 ? object : generateFreshVar();\n            const simplifiedPath = simplifyPath(joiner, subOp, nextJoiner);\n            if (nextJoiner.termType === 'Variable') {\n                joiner = nextJoiner;\n            }\n            return simplifiedPath;\n        }));\n    }\n    return [factory.createPath(subject, predicate, object)];\n}\nfunction generateFreshVar() {\n    let v = `?var${varCount++}`;\n    if (variables.has(v))\n        return generateFreshVar();\n    variables.add(v);\n    return factory.createTerm(v);\n}\nfunction translateQuad(quad) {\n    if ('pathType' in quad.predicate) {\n        throw new Error('Trying to translate property path to quad.');\n    }\n    // Graphs are needed here\n    // TODO: investigate if typings are wrong or if we internally add graphs to these\n    return factory.createPattern(quad.subject, quad.predicate, quad.object, quad.graph);\n}\nlet typeVals = Object.values(types);\nfunction recurseGraph(thingy, graph, replacement) {\n    if (thingy.type === types.GRAPH) {\n        if (replacement) {\n            // At this point we would lose track of the replacement which would result in incorrect results\n            // This would indicate the library is not being used as intended though\n            throw new Error('Recursing through nested GRAPH statements with a replacement is impossible.');\n        }\n        // In case there were nested GRAPH statements that were not recursed yet for some reason\n        thingy = recurseGraph(thingy.input, thingy.name);\n    }\n    else if (thingy.type === types.SERVICE) {\n        // Service blocks are not affected by enclosing GRAPH statements, so nothing is modified in this block.\n        // See https://github.com/joachimvh/SPARQLAlgebra.js/pull/104#issuecomment-1838016303\n    }\n    else if (thingy.type === types.BGP)\n        thingy.patterns = thingy.patterns.map(quad => {\n            if (replacement) {\n                if (quad.subject.equals(graph))\n                    quad.subject = replacement;\n                if (quad.predicate.equals(graph))\n                    quad.predicate = replacement;\n                if (quad.object.equals(graph))\n                    quad.object = replacement;\n            }\n            if (quad.graph.termType === 'DefaultGraph')\n                quad.graph = graph;\n            return quad;\n        });\n    else if (thingy.type === types.PATH) {\n        if (replacement) {\n            if (thingy.subject.equals(graph))\n                thingy.subject = replacement;\n            if (thingy.object.equals(graph))\n                thingy.object = replacement;\n        }\n        if (thingy.graph.termType === 'DefaultGraph')\n            thingy.graph = graph;\n    }\n    // need to replace variables in subqueries should the graph also be a variable of the same name\n    // unless the subquery projects that variable\n    else if (thingy.type === types.PROJECT && !replacement) {\n        if (!thingy.variables.some(v => v.equals(graph)))\n            replacement = generateFreshVar();\n        thingy.input = recurseGraph(thingy.input, graph, replacement);\n    }\n    // this can happen if the query extends an expression to the name of the graph\n    // since the extend happens here there should be no further occurrences of this name\n    // if there are it's the same situation as above\n    else if (thingy.type === types.EXTEND && !replacement) {\n        if (thingy.variable.equals(graph))\n            replacement = generateFreshVar();\n        thingy.input = recurseGraph(thingy.input, graph, replacement);\n    }\n    else {\n        for (let key of Object.keys(thingy)) {\n            if (Array.isArray(thingy[key]))\n                thingy[key] = thingy[key].map((x) => recurseGraph(x, graph, replacement));\n            else if (typeVals.indexOf(thingy[key].type) >= 0) // can't do instanceof on an interface\n                thingy[key] = recurseGraph(thingy[key], graph, replacement);\n            else if (replacement && isVariable(thingy[key]) && thingy[key].equals(graph))\n                thingy[key] = replacement;\n        }\n    }\n    return thingy;\n}\nfunction accumulateGroupGraphPattern(G, E) {\n    if (E.type === 'optional') {\n        // optional input needs to be interpreted as a group\n        const A = translateGraphPattern({ type: 'group', patterns: E.patterns });\n        if (A.type === types.FILTER) {\n            G = factory.createLeftJoin(G, A.input, A.expression);\n        }\n        else\n            G = factory.createLeftJoin(G, A);\n    }\n    else if (E.type === 'minus') {\n        // minus input needs to be interpreted as a group\n        const A = translateGraphPattern({ type: 'group', patterns: E.patterns });\n        G = factory.createMinus(G, A);\n    }\n    else if (E.type === 'bind')\n        G = factory.createExtend(G, E.variable, translateExpression(E.expression));\n    else if (E.type === 'service') {\n        // transform to group so childnodes get parsed correctly\n        const group = { type: 'group', patterns: E.patterns };\n        const A = factory.createService(translateGraphPattern(group), E.name, E.silent);\n        G = simplifiedJoin(G, A);\n    }\n    else {\n        const A = translateGraphPattern(E);\n        G = simplifiedJoin(G, A);\n    }\n    return G;\n}\nfunction simplifiedJoin(G, A) {\n    // Note: this is more simplification than requested in 18.2.2.8, but no reason not to do it.\n    if (G.type === types.BGP && A.type === types.BGP)\n        G = factory.createBgp([...G.patterns, ...A.patterns]);\n    // 18.2.2.8 (simplification)\n    else if (G.type === types.BGP && G.patterns.length === 0)\n        G = A;\n    else if (A.type === types.BGP && A.patterns.length === 0) { } // do nothing\n    else\n        G = factory.createJoin([G, A]);\n    return G;\n}\nfunction translateInlineData(values) {\n    let variables = (values.values.length === 0 ? [] : Object.keys(values.values[0])).map(factory.createTerm.bind(factory));\n    let bindings = values.values.map((binding) => {\n        let keys = Object.keys(binding);\n        keys = keys.filter(k => binding[k] !== undefined);\n        let map = {};\n        for (let key of keys)\n            map[key] = binding[key];\n        return map;\n    });\n    return factory.createValues(variables, bindings);\n}\n// --------------------------------------- AGGREGATES\nfunction translateAggregates(query, res) {\n    // Typings for ConstructQuery are wrong and missing several fields so we will cast quite often to SelectQuery to have partial typings\n    const select = query;\n    // 18.2.4.1\n    const E = [];\n    const A = {};\n    select.variables = select.variables && select.variables.map(val => mapAggregate(val, A));\n    select.having = select.having && select.having.map(val => mapAggregate(val, A));\n    select.order = select.order && select.order.map(val => mapAggregate(val, A));\n    // if there are any aggregates or if we have a groupBy (both result in a GROUP)\n    if (select.group || Object.keys(A).length > 0) {\n        const aggregates = Object.keys(A).map(v => translateBoundAggregate(A[v], factory.createTerm(v)));\n        const vars = [];\n        if (select.group) {\n            for (const e of select.group) {\n                if (util_1.default.isSimpleTerm(e.expression)) {\n                    vars.push(e.expression); // this will always be a var, otherwise sparql would be invalid\n                }\n                else {\n                    // Incorrect typings, e can have a variable, see for example group-variable test in sparql.js\n                    const v = 'variable' in e ? e.variable : generateFreshVar();\n                    res = factory.createExtend(res, v, translateExpression(e.expression));\n                    vars.push(v);\n                }\n            }\n        }\n        res = factory.createGroup(res, vars, aggregates);\n    }\n    // 18.2.4.2\n    if (select.having)\n        for (let filter of select.having)\n            res = factory.createFilter(res, translateExpression(filter));\n    // 18.2.4.3\n    if (query.values)\n        res = factory.createJoin([res, translateInlineData(query)]);\n    // 18.2.4.4\n    let PV = [];\n    if (query.queryType === 'SELECT' || query.queryType === 'DESCRIBE') {\n        // Sort variables for consistent output\n        if (query.variables.some((e) => e && util_1.default.isWildcard(e)))\n            PV = Object.values(inScopeVariables(query))\n                .sort((left, right) => left.value.localeCompare(right.value));\n        else {\n            // Wildcard has been filtered out above\n            for (let v of query.variables) {\n                // can have non-variables with DESCRIBE\n                if (isVariable(v) || !('variable' in v))\n                    PV.push(v);\n                else if (v.variable) // ... AS ?x\n                 {\n                    PV.push(v.variable);\n                    E.push(v);\n                }\n            }\n        }\n    }\n    // TODO: Jena simplifies by having a list of extends\n    for (let v of E)\n        res = factory.createExtend(res, v.variable, translateExpression(v.expression));\n    // 18.2.5\n    // not using toList and toMultiset\n    // 18.2.5.1\n    if (select.order)\n        res = factory.createOrderBy(res, select.order.map((exp) => {\n            let result = translateExpression(exp.expression);\n            if (exp.descending)\n                result = factory.createOperatorExpression('desc', [result]);\n            return result;\n        }));\n    // 18.2.5.2\n    // construct does not need a project (select, ask and describe do)\n    if (query.queryType === 'SELECT')\n        // Named nodes are only possible in a DESCRIBE so this cast is safe\n        res = factory.createProject(res, PV);\n    // 18.2.5.3\n    if (select.distinct)\n        res = factory.createDistinct(res);\n    // 18.2.5.4\n    if (select.reduced)\n        res = factory.createReduced(res);\n    // NEW: support for ask/construct/describe queries\n    if (query.queryType === 'CONSTRUCT')\n        res = factory.createConstruct(res, (query.template || []).map(translateQuad));\n    else if (query.queryType === 'ASK')\n        res = factory.createAsk(res);\n    else if (query.queryType === 'DESCRIBE')\n        res = factory.createDescribe(res, PV);\n    // Slicing needs to happen after construct/describe\n    // 18.2.5.5\n    if (select.offset || select.limit)\n        res = factory.createSlice(res, select.offset || 0, select.limit);\n    if (select.from)\n        res = factory.createFrom(res, select.from.default, select.from.named);\n    return res;\n}\n// rewrites some of the input sparql object to make use of aggregate variables\nfunction mapAggregate(thingy, aggregates) {\n    if ('type' in thingy && thingy.type === 'aggregate') {\n        let found = false;\n        let v;\n        for (let key of Object.keys(aggregates)) {\n            if (equal(aggregates[key], thingy)) {\n                v = factory.createTerm(key);\n                found = true;\n                break;\n            }\n        }\n        if (!found) {\n            v = generateFreshVar();\n            aggregates[(0, rdf_string_1.termToString)(v)] = thingy;\n        }\n        return v;\n    }\n    // non-aggregate expression\n    if ('expression' in thingy && thingy.expression)\n        return { ...thingy, expression: mapAggregate(thingy.expression, aggregates) };\n    if ('args' in thingy && thingy.args)\n        return { ...thingy, args: thingy.args.map(subthingy => mapAggregate(subthingy, aggregates)) };\n    // Normal variable/wildcard\n    return thingy;\n}\nfunction translateBoundAggregate(thingy, v) {\n    if (thingy.type !== 'aggregate' || !thingy.aggregation)\n        throw new Error(`Unexpected input: ${JSON.stringify(thingy)}`);\n    const A = translateExpression(thingy);\n    A.variable = v;\n    return A;\n}\nfunction translateUpdate(thingy) {\n    if (thingy.updates.length === 1)\n        return translateSingleUpdate(thingy.updates[0]);\n    return factory.createCompositeUpdate(thingy.updates.map(translateSingleUpdate));\n}\nfunction translateSingleUpdate(thingy) {\n    if ('type' in thingy) {\n        if (thingy.type === 'load')\n            return translateUpdateGraphLoad(thingy);\n        if (thingy.type === 'clear' || thingy.type === 'create' || thingy.type === 'drop')\n            return translateUpdateGraph(thingy);\n        if (thingy.type === 'add' || thingy.type === 'copy' || thingy.type === 'move')\n            return translateUpdateGraphShortcut(thingy);\n    }\n    else if (thingy.updateType === 'insertdelete' || thingy.updateType === 'deletewhere' || thingy.updateType === 'delete' || thingy.updateType === 'insert')\n        return translateInsertDelete(thingy);\n    throw new Error(`Unknown update type ${JSON.stringify(thingy)}`);\n}\nfunction translateInsertDelete(thingy) {\n    if (!useQuads)\n        throw new Error('INSERT/DELETE operations are only supported with quads option enabled');\n    let deleteTriples = [];\n    let insertTriples = [];\n    let where;\n    if (thingy.delete)\n        deleteTriples = util_1.default.flatten(thingy.delete.map(input => translateUpdateTriplesBlock(input, thingy.graph)));\n    if (thingy.insert)\n        insertTriples = util_1.default.flatten(thingy.insert.map(input => translateUpdateTriplesBlock(input, thingy.graph)));\n    if (thingy.where && thingy.where.length > 0) {\n        where = translateGraphPattern({ type: 'group', patterns: thingy.where });\n        // Wrong typings, see test \"using\" in Sparql.js\n        const use = thingy.using;\n        if (use)\n            where = factory.createFrom(where, use.default, use.named);\n        else if (thingy.graph)\n            // This is equivalent\n            where = recurseGraph(where, thingy.graph);\n    }\n    else if (thingy.updateType === 'deletewhere' && deleteTriples.length > 0) {\n        where = factory.createBgp(deleteTriples);\n    }\n    return factory.createDeleteInsert(deleteTriples.length > 0 ? deleteTriples : undefined, insertTriples.length > 0 ? insertTriples : undefined, where);\n}\n// UPDATE parsing will always return quads and have no GRAPH elements\nfunction translateUpdateTriplesBlock(thingy, graph) {\n    let currentGraph = graph;\n    if (thingy.type === 'graph')\n        currentGraph = thingy.name;\n    let currentTriples = thingy.triples;\n    if (currentGraph)\n        currentTriples = currentTriples.map(triple => Object.assign(triple, { graph: currentGraph }));\n    return currentTriples.map(translateQuad);\n}\nfunction translateUpdateGraph(thingy) {\n    let source;\n    if (util_1.default.isSimpleTerm(thingy.graph))\n        source = thingy.graph;\n    else if (thingy.graph.all)\n        source = 'ALL';\n    else if (thingy.graph.default)\n        source = 'DEFAULT';\n    else if (thingy.graph.named)\n        source = 'NAMED';\n    else\n        source = thingy.graph.name;\n    switch (thingy.type) {\n        case 'clear': return factory.createClear(source, thingy.silent);\n        case 'create': return factory.createCreate(source, thingy.silent);\n        case 'drop': return factory.createDrop(source, thingy.silent);\n    }\n}\nfunction translateUpdateGraphLoad(thingy) {\n    return factory.createLoad(thingy.source, thingy.destination, thingy.silent);\n}\nfunction translateUpdateGraphShortcut(thingy) {\n    const source = thingy.source.default ? 'DEFAULT' : thingy.source.name;\n    const destination = thingy.destination.default ? 'DEFAULT' : thingy.destination.name;\n    switch (thingy.type) {\n        case 'copy': return factory.createCopy(source, destination, thingy.silent);\n        case 'move': return factory.createMove(source, destination, thingy.silent);\n        case 'add': return factory.createAdd(source, destination, thingy.silent);\n    }\n}\nfunction translateBlankNodesToVariables(res) {\n    const blankToVariableMapping = {};\n    const variablesRaw = Array.from(variables).reduce((acc, variable) => {\n        acc[variable] = true;\n        return acc;\n    }, {});\n    return util_1.default.mapOperation(res, {\n        [Algebra.types.DELETE_INSERT]: (op) => {\n            // Only relevant for INSERT operations as others should never contain blank nodes\n            return { result: op, recurse: false };\n        },\n        [Algebra.types.PATH]: (op, factory) => {\n            return {\n                result: factory.createPath(blankToVariable(op.subject), op.predicate, blankToVariable(op.object), blankToVariable(op.graph)),\n                recurse: false,\n            };\n        },\n        [Algebra.types.PATTERN]: (op, factory) => {\n            return {\n                result: factory.createPattern(blankToVariable(op.subject), blankToVariable(op.predicate), blankToVariable(op.object), blankToVariable(op.graph)),\n                recurse: false,\n            };\n        },\n        [Algebra.types.CONSTRUCT]: (op) => {\n            // Blank nodes in CONSTRUCT templates must be maintained\n            return {\n                result: factory.createConstruct(translateBlankNodesToVariables(op.input), op.template),\n                recurse: false,\n            };\n        },\n    });\n    function blankToVariable(term) {\n        if (term.termType === 'BlankNode') {\n            let variable = blankToVariableMapping[term.value];\n            if (!variable) {\n                variable = util_1.default.createUniqueVariable(term.value, variablesRaw, factory.dataFactory);\n                variablesRaw[variable.value] = true;\n                blankToVariableMapping[term.value] = variable;\n            }\n            return variable;\n        }\n        return term;\n    }\n}\n//# sourceMappingURL=sparqlAlgebra.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst algebra_1 = require(\"./algebra\");\nconst factory_1 = __importDefault(require(\"./factory\"));\nconst rdf_terms_1 = require(\"rdf-terms\");\nclass Util {\n    /**\n     * Flattens an array of arrays to an array.\n     * @param arr - Array of arrays\n     */\n    static flatten(arr) {\n        return Array.prototype.concat(...arr).filter(x => x);\n    }\n    /**\n     * Outputs a JSON object corresponding to the input algebra-like.\n     */\n    static objectify(algebra) {\n        if (algebra.termType) {\n            if (algebra.termType === 'Quad') {\n                return {\n                    type: 'pattern',\n                    termType: 'Quad',\n                    subject: Util.objectify(algebra.subject),\n                    predicate: Util.objectify(algebra.predicate),\n                    object: Util.objectify(algebra.object),\n                    graph: Util.objectify(algebra.graph),\n                };\n            }\n            else {\n                let result = { termType: algebra.termType, value: algebra.value };\n                if (algebra.language)\n                    result.language = algebra.language;\n                if (algebra.datatype)\n                    result.datatype = Util.objectify(algebra.datatype);\n                return result;\n            }\n        }\n        if (Array.isArray(algebra))\n            return algebra.map(e => Util.objectify(e));\n        if (algebra === Object(algebra)) {\n            let result = {};\n            for (let key of Object.keys(algebra))\n                result[key] = Util.objectify(algebra[key]);\n            return result;\n        }\n        return algebra;\n    }\n    /**\n     * Detects all in-scope variables.\n     * In practice this means iterating through the entire algebra tree, finding all variables,\n     * and stopping when a project function is found.\n     * @param {Operation} op - Input algebra tree.\n     * @returns {Variable[]} - List of unique in-scope variables.\n     */\n    static inScopeVariables(op) {\n        const variables = [];\n        function addVariable(v) {\n            if (!variables.find(v2 => v.value === v2.value))\n                variables.push(v);\n        }\n        function recurseTerm(quad) {\n            if (quad.subject.termType === 'Variable')\n                addVariable(quad.subject);\n            if (quad.predicate.termType === 'Variable')\n                addVariable(quad.predicate);\n            if (quad.object.termType === 'Variable')\n                addVariable(quad.object);\n            if (quad.graph.termType === 'Variable')\n                addVariable(quad.graph);\n            if (quad.subject.termType === 'Quad')\n                recurseTerm(quad.subject);\n            if (quad.predicate.termType === 'Quad')\n                recurseTerm(quad.predicate);\n            if (quad.object.termType === 'Quad')\n                recurseTerm(quad.object);\n            if (quad.graph.termType === 'Quad')\n                recurseTerm(quad.graph);\n        }\n        // https://www.w3.org/TR/sparql11-query/#variableScope\n        Util.recurseOperation(op, {\n            [algebra_1.types.EXPRESSION]: (op) => {\n                if (op.expressionType === algebra_1.expressionTypes.AGGREGATE && op.variable) {\n                    addVariable(op.variable);\n                }\n                return true;\n            },\n            [algebra_1.types.EXTEND]: (op) => {\n                addVariable(op.variable);\n                return true;\n            },\n            [algebra_1.types.GRAPH]: (op) => {\n                if (op.name.termType === 'Variable')\n                    addVariable(op.name);\n                return true;\n            },\n            [algebra_1.types.GROUP]: (op) => {\n                op.variables.forEach(addVariable);\n                return true;\n            },\n            [algebra_1.types.PATH]: (op) => {\n                if (op.subject.termType === 'Variable')\n                    addVariable(op.subject);\n                if (op.object.termType === 'Variable')\n                    addVariable(op.object);\n                if (op.graph.termType === 'Variable')\n                    addVariable(op.graph);\n                if (op.subject.termType === 'Quad')\n                    recurseTerm(op.subject);\n                if (op.object.termType === 'Quad')\n                    recurseTerm(op.object);\n                if (op.graph.termType === 'Quad')\n                    recurseTerm(op.graph);\n                return true;\n            },\n            [algebra_1.types.PATTERN]: (op) => {\n                recurseTerm(op);\n                return true;\n            },\n            [algebra_1.types.PROJECT]: (op) => {\n                op.variables.forEach(addVariable);\n                return false;\n            },\n            [algebra_1.types.SERVICE]: (op) => {\n                if (op.name.termType === 'Variable')\n                    addVariable(op.name);\n                return true;\n            },\n            [algebra_1.types.VALUES]: (op) => {\n                op.variables.forEach(addVariable);\n                return true;\n            },\n        });\n        return variables;\n    }\n    /**\n     * Recurses through the given algebra tree\n     * A map of callback functions can be provided for individual Operation types to gather data.\n     * The return value of those callbacks should indicate whether recursion should be applied or not.\n     * Making modifications will change the original input object.\n     * @param {Operation} op - The Operation to recurse on.\n     * @param { [type: string]: (op: Operation) => boolean } callbacks - A map of required callback Operations.\n     */\n    static recurseOperation(op, callbacks) {\n        let result = op;\n        let doRecursion = true;\n        const callback = callbacks[op.type];\n        if (callback)\n            // Not sure how to get typing correct for op here\n            doRecursion = callback(op);\n        if (!doRecursion)\n            return;\n        let recurseOp = (op) => Util.recurseOperation(op, callbacks);\n        switch (result.type) {\n            case algebra_1.types.ALT:\n                result.input.map(recurseOp);\n                break;\n            case algebra_1.types.ASK:\n                recurseOp(result.input);\n                break;\n            case algebra_1.types.BGP:\n                result.patterns.forEach(recurseOp);\n                break;\n            case algebra_1.types.CONSTRUCT:\n                recurseOp(result.input);\n                result.template.map(recurseOp);\n                break;\n            case algebra_1.types.DESCRIBE:\n                recurseOp(result.input);\n                break;\n            case algebra_1.types.DISTINCT:\n                recurseOp(result.input);\n                break;\n            case algebra_1.types.EXPRESSION:\n                if (result.expressionType === algebra_1.expressionTypes.EXISTENCE) {\n                    recurseOp(result.input);\n                }\n                break;\n            case algebra_1.types.EXTEND:\n                recurseOp(result.input);\n                recurseOp(result.expression);\n                break;\n            case algebra_1.types.FILTER:\n                recurseOp(result.input);\n                recurseOp(result.expression);\n                break;\n            case algebra_1.types.FROM:\n                recurseOp(result.input);\n                break;\n            case algebra_1.types.GRAPH:\n                recurseOp(result.input);\n                break;\n            case algebra_1.types.GROUP:\n                recurseOp(result.input);\n                result.aggregates.forEach(recurseOp);\n                break;\n            case algebra_1.types.INV:\n                recurseOp(result.path);\n                break;\n            case algebra_1.types.JOIN:\n                result.input.map(recurseOp);\n                break;\n            case algebra_1.types.LEFT_JOIN:\n                result.input.map(recurseOp);\n                if (result.expression)\n                    recurseOp(result.expression);\n                break;\n            case algebra_1.types.LINK:\n                break;\n            case algebra_1.types.MINUS:\n                result.input.map(recurseOp);\n                break;\n            case algebra_1.types.NOP:\n                break;\n            case algebra_1.types.NPS:\n                break;\n            case algebra_1.types.ONE_OR_MORE_PATH:\n                recurseOp(result.path);\n                break;\n            case algebra_1.types.ORDER_BY:\n                recurseOp(result.input);\n                result.expressions.forEach(recurseOp);\n                break;\n            case algebra_1.types.PATH:\n                recurseOp(result.predicate);\n                break;\n            case algebra_1.types.PATTERN:\n                break;\n            case algebra_1.types.PROJECT:\n                recurseOp(result.input);\n                break;\n            case algebra_1.types.REDUCED:\n                recurseOp(result.input);\n                break;\n            case algebra_1.types.SEQ:\n                result.input.map(recurseOp);\n                break;\n            case algebra_1.types.SERVICE:\n                recurseOp(result.input);\n                break;\n            case algebra_1.types.SLICE:\n                recurseOp(result.input);\n                break;\n            case algebra_1.types.UNION:\n                result.input.map(recurseOp);\n                break;\n            case algebra_1.types.VALUES:\n                break;\n            case algebra_1.types.ZERO_OR_MORE_PATH:\n                recurseOp(result.path);\n                break;\n            case algebra_1.types.ZERO_OR_ONE_PATH:\n                recurseOp(result.path);\n                break;\n            // UPDATE operations\n            case algebra_1.types.COMPOSITE_UPDATE:\n                result.updates.forEach(update => recurseOp(update));\n                break;\n            case algebra_1.types.DELETE_INSERT:\n                if (result.delete)\n                    result.delete.forEach(pattern => recurseOp(pattern));\n                if (result.insert)\n                    result.insert.forEach(pattern => recurseOp(pattern));\n                if (result.where)\n                    recurseOp(result.where);\n                break;\n            // all of these only have graph IDs as values\n            case algebra_1.types.LOAD: break;\n            case algebra_1.types.CLEAR: break;\n            case algebra_1.types.CREATE: break;\n            case algebra_1.types.DROP: break;\n            case algebra_1.types.ADD: break;\n            case algebra_1.types.MOVE: break;\n            case algebra_1.types.COPY: break;\n            default: throw new Error(`Unknown Operation type ${result.type}`);\n        }\n    }\n    /**\n     * Creates a deep copy of the given Operation.\n     * Creates shallow copies of the non-Operation values.\n     * A map of callback functions can be provided for individual Operation types\n     * to specifically modify the given objects before triggering recursion.\n     * The return value of those callbacks should indicate whether recursion should be applied to this returned object or not.\n     * @param {Operation} op - The Operation to recurse on.\n     * @param callbacks - A map of required callback Operations.\n     * @param {Factory} factory - Factory used to create new Operations. Will use default factory if none is provided.\n     * @returns {Operation} - The copied result.\n     */\n    static mapOperation(op, callbacks, factory) {\n        let result = op;\n        let doRecursion = true;\n        let copyMetadata = true;\n        factory = factory || new factory_1.default();\n        const callback = callbacks[op.type];\n        if (callback) {\n            // Not sure how to get typing correct for op here\n            const recurseResult = callback(op, factory);\n            result = recurseResult.result;\n            doRecursion = recurseResult.recurse;\n            copyMetadata = recurseResult.copyMetadata !== false;\n        }\n        let toCopyMetadata;\n        if (copyMetadata && (result.metadata || op.metadata)) {\n            toCopyMetadata = { ...result.metadata, ...op.metadata };\n        }\n        if (!doRecursion) {\n            // Inherit metadata\n            if (toCopyMetadata) {\n                result.metadata = toCopyMetadata;\n            }\n            return result;\n        }\n        let mapOp = (op) => Util.mapOperation(op, callbacks, factory);\n        // Several casts here might be wrong though depending on the callbacks output\n        switch (result.type) {\n            case algebra_1.types.ALT:\n                result = factory.createAlt(result.input.map(mapOp));\n                break;\n            case algebra_1.types.ASK:\n                result = factory.createAsk(mapOp(result.input));\n                break;\n            case algebra_1.types.BGP:\n                result = factory.createBgp(result.patterns.map(mapOp));\n                break;\n            case algebra_1.types.CONSTRUCT:\n                result = factory.createConstruct(mapOp(result.input), result.template.map(mapOp));\n                break;\n            case algebra_1.types.DESCRIBE:\n                result = factory.createDescribe(mapOp(result.input), result.terms);\n                break;\n            case algebra_1.types.DISTINCT:\n                result = factory.createDistinct(mapOp(result.input));\n                break;\n            case algebra_1.types.EXPRESSION:\n                result = Util.mapExpression(result, callbacks, factory);\n                break;\n            case algebra_1.types.EXTEND:\n                result = factory.createExtend(mapOp(result.input), result.variable, mapOp(result.expression));\n                break;\n            case algebra_1.types.FILTER:\n                result = factory.createFilter(mapOp(result.input), mapOp(result.expression));\n                break;\n            case algebra_1.types.FROM:\n                result = factory.createFrom(mapOp(result.input), [...result.default], [...result.named]);\n                break;\n            case algebra_1.types.GRAPH:\n                result = factory.createGraph(mapOp(result.input), result.name);\n                break;\n            case algebra_1.types.GROUP:\n                result = factory.createGroup(mapOp(result.input), [].concat(result.variables), result.aggregates.map(mapOp));\n                break;\n            case algebra_1.types.INV:\n                result = factory.createInv(mapOp(result.path));\n                break;\n            case algebra_1.types.JOIN:\n                result = factory.createJoin(result.input.map(mapOp));\n                break;\n            case algebra_1.types.LEFT_JOIN:\n                result = factory.createLeftJoin(mapOp(result.input[0]), mapOp(result.input[1]), result.expression ? mapOp(result.expression) : undefined);\n                break;\n            case algebra_1.types.LINK:\n                result = factory.createLink(result.iri);\n                break;\n            case algebra_1.types.MINUS:\n                result = factory.createMinus(mapOp(result.input[0]), mapOp(result.input[1]));\n                break;\n            case algebra_1.types.NOP:\n                result = factory.createNop();\n                break;\n            case algebra_1.types.NPS:\n                result = factory.createNps([].concat(result.iris));\n                break;\n            case algebra_1.types.ONE_OR_MORE_PATH:\n                result = factory.createOneOrMorePath(mapOp(result.path));\n                break;\n            case algebra_1.types.ORDER_BY:\n                result = factory.createOrderBy(mapOp(result.input), result.expressions.map(mapOp));\n                break;\n            case algebra_1.types.PATH:\n                result = factory.createPath(result.subject, mapOp(result.predicate), result.object, result.graph);\n                break;\n            case algebra_1.types.PATTERN:\n                result = factory.createPattern(result.subject, result.predicate, result.object, result.graph);\n                break;\n            case algebra_1.types.PROJECT:\n                result = factory.createProject(mapOp(result.input), [...result.variables]);\n                break;\n            case algebra_1.types.REDUCED:\n                result = factory.createReduced(mapOp(result.input));\n                break;\n            case algebra_1.types.SEQ:\n                result = factory.createSeq(result.input.map(mapOp));\n                break;\n            case algebra_1.types.SERVICE:\n                result = factory.createService(mapOp(result.input), result.name, result.silent);\n                break;\n            case algebra_1.types.SLICE:\n                result = factory.createSlice(mapOp(result.input), result.start, result.length);\n                break;\n            case algebra_1.types.UNION:\n                result = factory.createUnion(result.input.map(mapOp));\n                break;\n            case algebra_1.types.VALUES:\n                result = factory.createValues([].concat(result.variables), result.bindings.map(b => Object.assign({}, b)));\n                break;\n            case algebra_1.types.ZERO_OR_MORE_PATH:\n                result = factory.createZeroOrMorePath(mapOp(result.path));\n                break;\n            case algebra_1.types.ZERO_OR_ONE_PATH:\n                result = factory.createZeroOrOnePath(mapOp(result.path));\n                break;\n            // UPDATE operations\n            case algebra_1.types.COMPOSITE_UPDATE:\n                result = factory.createCompositeUpdate(result.updates.map(mapOp));\n                break;\n            case algebra_1.types.DELETE_INSERT:\n                result = factory.createDeleteInsert(result.delete ? result.delete.map(mapOp) : undefined, result.insert ? result.insert.map(mapOp) : undefined, result.where ? mapOp(result.where) : undefined);\n                break;\n            case algebra_1.types.LOAD:\n                result = factory.createLoad(result.source, result.destination, result.silent);\n                break;\n            case algebra_1.types.CLEAR:\n                result = factory.createClear(result.source, result.silent);\n                break;\n            case algebra_1.types.CREATE:\n                result = factory.createCreate(result.source, result.silent);\n                break;\n            case algebra_1.types.DROP:\n                result = factory.createDrop(result.source, result.silent);\n                break;\n            case algebra_1.types.ADD:\n                result = factory.createAdd(result.source, result.destination);\n                break;\n            case algebra_1.types.MOVE:\n                result = factory.createMove(result.source, result.destination);\n                break;\n            case algebra_1.types.COPY:\n                result = factory.createCopy(result.source, result.destination);\n                break;\n            default: throw new Error(`Unknown Operation type ${result.type}`);\n        }\n        // Inherit metadata\n        if (toCopyMetadata) {\n            result.metadata = toCopyMetadata;\n        }\n        return result;\n    }\n    /**\n     * Similar to the {@link mapOperation} function but specifically for expressions.\n     * Both functions call each other while copying.\n     * Should not be called directly since it does not execute the callbacks, these happen in {@link mapOperation}.\n     * @param {Expression} expr - The Operation to recurse on.\n     * @param callbacks - A map of required callback Operations.\n     * @param {Factory} factory - Factory used to create new Operations. Will use default factory if none is provided.\n     * @returns {Operation} - The copied result.\n     */\n    static mapExpression(expr, callbacks, factory) {\n        let result = expr;\n        let doRecursion = true;\n        factory = factory || new factory_1.default();\n        const callback = callbacks[expr.expressionType];\n        if (callback)\n            ({ result, recurse: doRecursion } = callback(expr, factory));\n        if (!doRecursion)\n            return result;\n        let mapOp = (op) => Util.mapOperation(op, callbacks, factory);\n        switch (expr.expressionType) {\n            case algebra_1.expressionTypes.AGGREGATE:\n                if (expr.variable) {\n                    return factory.createBoundAggregate(expr.variable, expr.aggregator, mapOp(expr.expression), expr.distinct, expr.separator);\n                }\n                return factory.createAggregateExpression(expr.aggregator, mapOp(expr.expression), expr.distinct, expr.separator);\n            case algebra_1.expressionTypes.EXISTENCE:\n                return factory.createExistenceExpression(expr.not, mapOp(expr.input));\n            case algebra_1.expressionTypes.NAMED:\n                return factory.createNamedExpression(expr.name, expr.args.map(mapOp));\n            case algebra_1.expressionTypes.OPERATOR:\n                return factory.createOperatorExpression(expr.operator, expr.args.map(mapOp));\n            case algebra_1.expressionTypes.TERM:\n                return factory.createTermExpression(expr.term);\n            case algebra_1.expressionTypes.WILDCARD:\n                return factory.createWildcardExpression();\n            default: throw new Error(`Unknown Expression type ${expr.expressionType}`);\n        }\n    }\n    /**\n     * Creates a deep clone of the operation.\n     * This is syntactic sugar for calling {@link mapOperation} without callbacks.\n     * @param {Operation} op - The operation to copy.\n     * @returns {Operation} - The deep copy.\n     */\n    static cloneOperation(op) {\n        return Util.mapOperation(op, {});\n    }\n    /**\n     * Creates a deep clone of the expression.\n     * This is syntactic sugar for calling {@link mapExpression} without callbacks.\n     * @param {Expression} expr - The operation to copy.\n     * @returns {Expression} - The deep copy.\n     */\n    static cloneExpression(expr) {\n        return Util.mapExpression(expr, {});\n    }\n    static createUniqueVariable(label, variables, dataFactory) {\n        let counter = 0;\n        let labelLoop = label;\n        while (variables[labelLoop]) {\n            labelLoop = `${label}${counter++}`;\n        }\n        return dataFactory.variable(labelLoop);\n    }\n    // separate terms from wildcard since we handle them differently\n    static isSimpleTerm(term) {\n        return term.termType !== undefined && term.termType !== 'Quad' && term.termType !== 'Wildcard';\n    }\n    static isQuad(term) {\n        return term.termType === 'Quad';\n    }\n    static hasQuadVariables(quad) {\n        return (0, rdf_terms_1.someTermsNested)(quad, term => term.termType === 'Variable');\n    }\n    static isWildcard(term) {\n        return term.termType === 'Wildcard';\n    }\n}\nexports.default = Util;\n//# sourceMappingURL=util.js.map","var XSD_INTEGER = 'http://www.w3.org/2001/XMLSchema#integer';\nvar XSD_STRING = 'http://www.w3.org/2001/XMLSchema#string';\n\nfunction Generator(options) {\n  this._options = options = options || {};\n\n  var prefixes = options.prefixes || {};\n  this._prefixByIri = {};\n  var prefixIris = [];\n  for (var prefix in prefixes) {\n    var iri = prefixes[prefix];\n    if (isString(iri)) {\n      this._prefixByIri[iri] = prefix;\n      prefixIris.push(iri);\n    }\n  }\n  var iriList = prefixIris.join('|').replace(/[\\]\\/\\(\\)\\*\\+\\?\\.\\\\\\$]/g, '\\\\$&');\n  this._prefixRegex = new RegExp('^(' + iriList + ')([a-zA-Z][\\\\-_a-zA-Z0-9]*)$');\n  this._usedPrefixes = {};\n  this._sparqlStar = options.sparqlStar;\n  this._indent =  isString(options.indent)  ? options.indent  : '  ';\n  this._newline = isString(options.newline) ? options.newline : '\\n';\n  this._explicitDatatype = Boolean(options.explicitDatatype);\n}\n\n// Converts the parsed query object into a SPARQL query\nGenerator.prototype.toQuery = function (q) {\n  var query = '';\n\n  if (q.queryType)\n    query += q.queryType.toUpperCase() + ' ';\n  if (q.reduced)\n    query += 'REDUCED ';\n  if (q.distinct)\n    query += 'DISTINCT ';\n\n  if (q.variables){\n    query += mapJoin(q.variables, undefined, function (variable) {\n      return isTerm(variable) ? this.toEntity(variable) :\n             '(' + this.toExpression(variable.expression) + ' AS ' + variableToString(variable.variable) + ')';\n    }, this) + ' ';\n  }\n  else if (q.template)\n    query += this.group(q.template, true) + this._newline;\n\n  if (q.from)\n    query += this.graphs('FROM ', q.from.default) + this.graphs('FROM NAMED ', q.from.named);\n  if (q.where)\n    query += 'WHERE ' + this.group(q.where, true) + this._newline;\n\n  if (q.updates)\n    query += mapJoin(q.updates, ';' + this._newline, this.toUpdate, this);\n\n  if (q.group)\n    query += 'GROUP BY ' + mapJoin(q.group, undefined, function (it) {\n      var result = isTerm(it.expression)\n        ? this.toEntity(it.expression)\n        : '(' + this.toExpression(it.expression) + ')';\n      return it.variable ? '(' + result + ' AS ' + variableToString(it.variable) + ')' : result;\n    }, this) + this._newline;\n  if (q.having)\n    query += 'HAVING (' + mapJoin(q.having, undefined, this.toExpression, this) + ')' + this._newline;\n  if (q.order)\n    query += 'ORDER BY ' + mapJoin(q.order, undefined, function (it) {\n      var expr = '(' + this.toExpression(it.expression) + ')';\n      return !it.descending ? expr : 'DESC ' + expr;\n    }, this) + this._newline;\n\n  if (q.offset)\n    query += 'OFFSET ' + q.offset + this._newline;\n  if (q.limit)\n    query += 'LIMIT ' + q.limit + this._newline;\n\n  if (q.values)\n    query += this.values(q);\n\n  // stringify prefixes at the end to mark used ones\n  query = this.baseAndPrefixes(q) + query;\n  return query.trim();\n};\n\nGenerator.prototype.baseAndPrefixes = function (q) {\n  var base = q.base ? ('BASE <' + q.base + '>' + this._newline) : '';\n  var prefixes = '';\n  for (var key in q.prefixes) {\n    if (this._options.allPrefixes || this._usedPrefixes[key])\n      prefixes += 'PREFIX ' + key + ': <' + q.prefixes[key] + '>' + this._newline;\n  }\n  return base + prefixes;\n};\n\n// Converts the parsed SPARQL pattern into a SPARQL pattern\nGenerator.prototype.toPattern = function (pattern) {\n  var type = pattern.type || (pattern instanceof Array) && 'array' ||\n             (pattern.subject && pattern.predicate && pattern.object ? 'triple' : '');\n  if (!(type in this))\n    throw new Error('Unknown entry type: ' + type);\n  return this[type](pattern);\n};\n\nGenerator.prototype.triple = function (t) {\n  return this.toEntity(t.subject) + ' ' + this.toEntity(t.predicate) + ' ' + this.toEntity(t.object) + '.';\n};\n\nGenerator.prototype.array = function (items) {\n  return mapJoin(items, this._newline, this.toPattern, this);\n};\n\nGenerator.prototype.bgp = function (bgp) {\n  return this.encodeTriples(bgp.triples);\n};\n\nGenerator.prototype.encodeTriples = function (triples) {\n  if (!triples.length)\n    return '';\n\n  var parts = [], subject = undefined, predicate = undefined;\n  for (var i = 0; i < triples.length; i++) {\n    var triple = triples[i];\n    // Triple with different subject\n    if (!equalTerms(triple.subject, subject)) {\n      // Terminate previous triple\n      if (subject)\n        parts.push('.' + this._newline);\n      subject = triple.subject;\n      predicate = triple.predicate;\n      parts.push(this.toEntity(subject), ' ', this.toEntity(predicate));\n    }\n    // Triple with same subject but different predicate\n    else if (!equalTerms(triple.predicate, predicate)) {\n      predicate = triple.predicate;\n      parts.push(';' + this._newline, this._indent, this.toEntity(predicate));\n    }\n    // Triple with same subject and predicate\n    else {\n      parts.push(',');\n    }\n    parts.push(' ', this.toEntity(triple.object));\n  }\n  parts.push('.');\n\n  return parts.join('');\n}\n\nGenerator.prototype.graph = function (graph) {\n  return 'GRAPH ' + this.toEntity(graph.name) + ' ' + this.group(graph);\n};\n\nGenerator.prototype.graphs = function (keyword, graphs) {\n  return !graphs || graphs.length === 0 ? '' :\n    mapJoin(graphs, '', function (g) { return keyword + this.toEntity(g) + this._newline; }, this)\n}\n\nGenerator.prototype.group = function (group, inline) {\n  group = inline !== true ? this.array(group.patterns || group.triples)\n                          : this.toPattern(group.type !== 'group' ? group : group.patterns);\n  return group.indexOf(this._newline) === -1 ? '{ ' + group + ' }' : '{' + this._newline + this.indent(group) + this._newline + '}';\n};\n\nGenerator.prototype.query = function (query) {\n  return this.toQuery(query);\n};\n\nGenerator.prototype.filter = function (filter) {\n  return 'FILTER(' + this.toExpression(filter.expression) + ')';\n};\n\nGenerator.prototype.bind = function (bind) {\n  return 'BIND(' + this.toExpression(bind.expression) + ' AS ' + variableToString(bind.variable) + ')';\n};\n\nGenerator.prototype.optional = function (optional) {\n  return 'OPTIONAL ' + this.group(optional);\n};\n\nGenerator.prototype.union = function (union) {\n  return mapJoin(union.patterns, this._newline + 'UNION' + this._newline, function (p) { return this.group(p, true); }, this);\n};\n\nGenerator.prototype.minus = function (minus) {\n  return 'MINUS ' + this.group(minus);\n};\n\nGenerator.prototype.values = function (valuesList) {\n  // Gather unique keys\n  var keys = Object.keys(valuesList.values.reduce(function (keyHash, values) {\n    for (var key in values) keyHash[key] = true;\n    return keyHash;\n  }, {}));\n  // Check whether simple syntax can be used\n  var lparen, rparen;\n  if (keys.length === 1) {\n    lparen = rparen = '';\n  } else {\n    lparen = '(';\n    rparen = ')';\n  }\n  // Create value rows\n  return 'VALUES ' + lparen + keys.join(' ') + rparen + ' {' + this._newline +\n    mapJoin(valuesList.values, this._newline, function (values) {\n      return '  ' + lparen + mapJoin(keys, undefined, function (key) {\n        return values[key] ? this.toEntity(values[key]) : 'UNDEF';\n      }, this) + rparen;\n    }, this) + this._newline + '}';\n};\n\nGenerator.prototype.service = function (service) {\n  return 'SERVICE ' + (service.silent ? 'SILENT ' : '') + this.toEntity(service.name) + ' ' +\n         this.group(service);\n};\n\n// Converts the parsed expression object into a SPARQL expression\nGenerator.prototype.toExpression = function (expr) {\n  if (isTerm(expr)) {\n    return this.toEntity(expr);\n  }\n  switch (expr.type.toLowerCase()) {\n    case 'aggregate':\n      return expr.aggregation.toUpperCase() +\n             '(' + (expr.distinct ? 'DISTINCT ' : '') + this.toExpression(expr.expression) +\n             (typeof expr.separator === 'string' ? '; SEPARATOR = ' + '\"' + expr.separator.replace(escape, escapeReplacer) + '\"' : '') + ')';\n    case 'functioncall':\n      return this.toEntity(expr.function) + '(' + mapJoin(expr.args, ', ', this.toExpression, this) + ')';\n    case 'operation':\n      var operator = expr.operator.toUpperCase(), args = expr.args || [];\n      switch (expr.operator.toLowerCase()) {\n      // Infix operators\n      case '<':\n      case '>':\n      case '>=':\n      case '<=':\n      case '&&':\n      case '||':\n      case '=':\n      case '!=':\n      case '+':\n      case '-':\n      case '*':\n      case '/':\n          return (isTerm(args[0]) ? this.toEntity(args[0]) : '(' + this.toExpression(args[0]) + ')') +\n                 ' ' + operator + ' ' +\n                 (isTerm(args[1]) ? this.toEntity(args[1]) : '(' + this.toExpression(args[1]) + ')');\n      // Unary operators\n      case '!':\n        return '!(' + this.toExpression(args[0]) + ')';\n      case 'uplus':\n        return '+(' + this.toExpression(args[0]) + ')';\n      case 'uminus':\n        return '-(' + this.toExpression(args[0]) + ')';\n      // IN and NOT IN\n      case 'notin':\n        operator = 'NOT IN';\n      case 'in':\n        return this.toExpression(args[0]) + ' ' + operator +\n               '(' + (isString(args[1]) ? args[1] : mapJoin(args[1], ', ', this.toExpression, this)) + ')';\n      // EXISTS and NOT EXISTS\n      case 'notexists':\n        operator = 'NOT EXISTS';\n      case 'exists':\n        return operator + ' ' + this.group(args[0], true);\n      // Other expressions\n      default:\n        return operator + '(' + mapJoin(args, ', ', this.toExpression, this) + ')';\n      }\n    default:\n      throw new Error('Unknown expression type: ' + expr.type);\n  }\n};\n\n// Converts the parsed entity (or property path) into a SPARQL entity\nGenerator.prototype.toEntity = function (value) {\n  if (isTerm(value)) {\n    switch (value.termType) {\n    // variable, * selector, or blank node\n    case 'Wildcard':\n      return '*';\n    case 'Variable':\n      return variableToString(value);\n    case 'BlankNode':\n      return '_:' + value.value;\n    // literal\n    case 'Literal':\n      var lexical = value.value || '', language = value.language || '', datatype = value.datatype;\n      value = '\"' + lexical.replace(escape, escapeReplacer) + '\"';\n      if (language){\n        value += '@' + language;\n      } else if (datatype) {\n        // Abbreviate literals when possible\n        if (!this._explicitDatatype) {\n          switch (datatype.value) {\n          case XSD_STRING:\n            return value;\n          case XSD_INTEGER:\n            if (/^\\d+$/.test(lexical))\n              // Add space to avoid confusion with decimals in broken parsers\n              return lexical + ' ';\n          }\n        }\n        value += '^^' + this.encodeIRI(datatype.value);\n      }\n      return value;\n    case 'Quad':\n      if (!this._sparqlStar)\n          throw new Error('SPARQL* support is not enabled');\n\n      if (value.graph && value.graph.termType !== \"DefaultGraph\") {\n        return '<< GRAPH ' +\n          this.toEntity(value.graph) +\n          ' { ' +\n          this.toEntity(value.subject) + ' ' +\n          this.toEntity(value.predicate) + ' ' +\n          this.toEntity(value.object) +\n          ' } ' +\n          ' >>'\n      }\n      else {\n        return (\n          '<< ' +\n          this.toEntity(value.subject) + ' ' +\n          this.toEntity(value.predicate) + ' ' +\n          this.toEntity(value.object) +\n          ' >>'\n        );\n      }\n    // IRI\n    default:\n      return this.encodeIRI(value.value);\n    }\n  }\n  // property path\n  else {\n    var items = value.items.map(this.toEntity, this), path = value.pathType;\n    switch (path) {\n    // prefix operator\n    case '^':\n    case '!':\n      return path + items[0];\n    // postfix operator\n    case '*':\n    case '+':\n    case '?':\n      return '(' + items[0] + path + ')';\n    // infix operator\n    default:\n      return '(' + items.join(path) + ')';\n    }\n  }\n};\nvar escape = /[\"\\\\\\t\\n\\r\\b\\f]/g,\n    escapeReplacer = function (c) { return escapeReplacements[c]; },\n    escapeReplacements = { '\\\\': '\\\\\\\\', '\"': '\\\\\"', '\\t': '\\\\t',\n                           '\\n': '\\\\n', '\\r': '\\\\r', '\\b': '\\\\b', '\\f': '\\\\f' };\n\n// Represent the IRI, as a prefixed name when possible\nGenerator.prototype.encodeIRI = function (iri) {\n  var prefixMatch = this._prefixRegex.exec(iri);\n  if (prefixMatch) {\n    var prefix = this._prefixByIri[prefixMatch[1]];\n    this._usedPrefixes[prefix] = true;\n    return prefix + ':' + prefixMatch[2];\n  }\n  return '<' + iri + '>';\n};\n\n// Converts the parsed update object into a SPARQL update clause\nGenerator.prototype.toUpdate = function (update) {\n  switch (update.type || update.updateType) {\n  case 'load':\n    return 'LOAD' + (update.source ? ' ' + this.toEntity(update.source) : '') +\n           (update.destination ? ' INTO GRAPH ' + this.toEntity(update.destination) : '');\n  case 'insert':\n    return 'INSERT DATA '  + this.group(update.insert, true);\n  case 'delete':\n    return 'DELETE DATA '  + this.group(update.delete, true);\n  case 'deletewhere':\n    return 'DELETE WHERE ' + this.group(update.delete, true);\n  case 'insertdelete':\n    return (update.graph ? 'WITH ' + this.toEntity(update.graph) + this._newline : '') +\n           (update.delete.length ? 'DELETE ' + this.group(update.delete, true) + this._newline : '') +\n           (update.insert.length ? 'INSERT ' + this.group(update.insert, true) + this._newline : '') +\n           (update.using ? this.graphs('USING ', update.using.default) : '') +\n           (update.using ? this.graphs('USING NAMED ', update.using.named) : '') +\n           'WHERE ' + this.group(update.where, true);\n  case 'add':\n  case 'copy':\n  case 'move':\n    return update.type.toUpperCase()+ ' ' +  (update.silent ? 'SILENT ' : '') + (update.source.default ? 'DEFAULT' : this.toEntity(update.source.name)) +\n           ' TO ' + this.toEntity(update.destination.name);\n  case 'create':\n  case 'clear':\n  case 'drop':\n    return update.type.toUpperCase() + (update.silent ? ' SILENT ' : ' ') + (\n      update.graph.default ? 'DEFAULT' :\n      update.graph.named ? 'NAMED' :\n      update.graph.all ? 'ALL' :\n      ('GRAPH ' + this.toEntity(update.graph.name))\n    );\n  default:\n    throw new Error('Unknown update query type: ' + update.type);\n  }\n};\n\n// Indents each line of the string\nGenerator.prototype.indent = function(text) { return text.replace(/^/gm, this._indent); }\n\nfunction variableToString(variable){\n  return '?' + variable.value;\n}\n\n// Checks whether the object is a string\nfunction isString(object) { return typeof object === 'string'; }\n\n// Checks whether the object is a Term\nfunction isTerm(object) {\n  return typeof object.termType === 'string';\n}\n\n// Checks whether term1 and term2 are equivalent without `.equals()` prototype method\nfunction equalTerms(term1, term2) {\n  if (!term1 || !isTerm(term1)) { return false; }\n  if (!term2 || !isTerm(term2)) { return false; }\n  if (term1.termType !== term2.termType) { return false; }\n  switch (term1.termType) {\n    case 'Literal':\n      return term1.value === term2.value\n          && term1.language === term2.language\n          && equalTerms(term1.datatype, term2.datatype);\n    case 'Quad':\n      return equalTerms(term1.subject, term2.subject)\n          && equalTerms(term1.predicate, term2.predicate)\n          && equalTerms(term1.object, term2.object)\n          && equalTerms(term1.graph, term2.graph);\n    default:\n      return term1.value === term2.value;\n  }\n}\n\n// Maps the array with the given function, and joins the results using the separator\nfunction mapJoin(array, sep, func, self) {\n  return array.map(func, self).join(isString(sep) ? sep : ' ');\n}\n\n/**\n * @param options {\n *   allPrefixes: boolean,\n *   indentation: string,\n *   newline: string\n * }\n */\nmodule.exports = function SparqlGenerator(options = {}) {\n  return {\n    stringify: function (query) {\n      var currentOptions = Object.create(options);\n      currentOptions.prefixes = query.prefixes;\n      return new Generator(currentOptions).toQuery(query);\n    },\n    createGenerator: function() { return new Generator(options); }\n  };\n};\n","/* parser generated by jison 0.4.18 */\n/*\n  Returns a Parser object of the following structure:\n\n  Parser: {\n    yy: {}\n  }\n\n  Parser.prototype: {\n    yy: {},\n    trace: function(),\n    symbols_: {associative list: name ==> number},\n    terminals_: {associative list: number ==> name},\n    productions_: [...],\n    performAction: function anonymous(yytext, yyleng, yylineno, yy, yystate, $$, _$),\n    table: [...],\n    defaultActions: {...},\n    parseError: function(str, hash),\n    parse: function(input),\n\n    lexer: {\n        EOF: 1,\n        parseError: function(str, hash),\n        setInput: function(input),\n        input: function(),\n        unput: function(str),\n        more: function(),\n        less: function(n),\n        pastInput: function(),\n        upcomingInput: function(),\n        showPosition: function(),\n        test_match: function(regex_match_array, rule_index),\n        next: function(),\n        lex: function(),\n        begin: function(condition),\n        popState: function(),\n        _currentRules: function(),\n        topState: function(),\n        pushState: function(condition),\n\n        options: {\n            ranges: boolean           (optional: true ==> token location info will include a .range[] member)\n            flex: boolean             (optional: true ==> flex-like lexing behaviour where the rules are tested exhaustively to find the longest match)\n            backtrack_lexer: boolean  (optional: true ==> lexer regexes are tested in order and for each matching regex the action code is invoked; the lexer terminates the scan when a token is returned by the action code)\n        },\n\n        performAction: function(yy, yy_, $avoiding_name_collisions, YY_START),\n        rules: [...],\n        conditions: {associative list: name ==> set},\n    }\n  }\n\n\n  token location info (@$, _$, etc.): {\n    first_line: n,\n    last_line: n,\n    first_column: n,\n    last_column: n,\n    range: [start_number, end_number]       (where the numbers are indexes into the input string, regular zero-based)\n  }\n\n\n  the parseError function receives a 'hash' object with these members for lexer and parser errors: {\n    text:        (matched text)\n    token:       (the produced terminal token, if any)\n    line:        (yylineno)\n  }\n  while parser (grammar) errors will also provide these members, i.e. parser errors deliver a superset of attributes: {\n    loc:         (yylloc)\n    expected:    (string describing the set of expected tokens)\n    recoverable: (boolean: TRUE when the parser has a error recovery rule available for this particular error)\n  }\n*/\nvar SparqlParser = (function(){\nvar o=function(k,v,o,l){for(o=o||{},l=k.length;l--;o[k[l]]=v);return o},$V0=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],$V1=[2,247],$V2=[100,110,113,115,116,123,126,131,329,330,331,332,333],$V3=[2,409],$V4=[1,18],$V5=[1,27],$V6=[13,16,45,197,224,229,308],$V7=[28,29,53],$V8=[28,53],$V9=[1,42],$Va=[1,45],$Vb=[1,41],$Vc=[1,44],$Vd=[123,126],$Ve=[1,67],$Vf=[39,45,87],$Vg=[13,16,45,197,224,308],$Vh=[1,87],$Vi=[2,281],$Vj=[1,86],$Vk=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],$Vl=[6,28,29,53,63,70,73,81,83,85],$Vm=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],$Vn=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],$Vo=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],$Vp=[13,16,308],$Vq=[112,132,327,334],$Vr=[13,16,112,132,308],$Vs=[1,111],$Vt=[1,117],$Vu=[112,132,327,328,334],$Vv=[13,16,112,132,308,328],$Vw=[28,29,45,53,87],$Vx=[1,138],$Vy=[1,151],$Vz=[1,128],$VA=[1,127],$VB=[1,129],$VC=[1,140],$VD=[1,141],$VE=[1,142],$VF=[1,143],$VG=[1,144],$VH=[1,145],$VI=[1,147],$VJ=[1,148],$VK=[2,457],$VL=[1,158],$VM=[1,159],$VN=[1,160],$VO=[1,152],$VP=[1,153],$VQ=[1,156],$VR=[1,171],$VS=[1,172],$VT=[1,173],$VU=[1,174],$VV=[1,175],$VW=[1,176],$VX=[1,167],$VY=[1,168],$VZ=[1,169],$V_=[1,170],$V$=[1,157],$V01=[1,166],$V11=[1,161],$V21=[1,162],$V31=[1,163],$V41=[1,164],$V51=[1,165],$V61=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],$V71=[1,195],$V81=[6,31,73,81,83,85],$V91=[2,285],$Va1=[1,199],$Vb1=[1,201],$Vc1=[6,31,70,73,81,83,85],$Vd1=[2,283],$Ve1=[1,207],$Vf1=[1,218],$Vg1=[1,223],$Vh1=[1,219],$Vi1=[1,225],$Vj1=[1,226],$Vk1=[1,224],$Vl1=[6,63,70,73,81,83,85],$Vm1=[1,236],$Vn1=[2,334],$Vo1=[1,243],$Vp1=[1,241],$Vq1=[6,193],$Vr1=[2,349],$Vs1=[2,339],$Vt1=[28,128],$Vu1=[47,48,193,272],$Vv1=[47,48,193,242,272],$Vw1=[47,48,193,242,246,272],$Vx1=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],$Vy1=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],$Vz1=[1,271],$VA1=[1,270],$VB1=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],$VC1=[1,281],$VD1=[1,280],$VE1=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],$VF1=[45,89],$VG1=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],$VH1=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],$VI1=[31,89],$VJ1=[48,87],$VK1=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],$VL1=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],$VM1=[1,313],$VN1=[6,85],$VO1=[6,31,81,83,85],$VP1=[2,361],$VQ1=[2,353],$VR1=[1,343],$VS1=[31,112,335],$VT1=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],$VU1=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],$VV1=[6,109,193],$VW1=[31,112],$VX1=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],$VY1=[1,390],$VZ1=[1,391],$V_1=[13,16,87,197,308,314],$V$1=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],$V02=[1,417],$V12=[1,418],$V22=[13,16,48,197,229,308],$V32=[6,31,85],$V42=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],$V52=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],$V62=[29,31,85,112,159,160,161,163,164],$V72=[1,443],$V82=[1,444],$V92=[1,449],$Va2=[31,112,193,232,318,335],$Vb2=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],$Vc2=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],$Vd2=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],$Ve2=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],$Vf2=[31,45],$Vg2=[1,507],$Vh2=[1,508],$Vi2=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],$Vj2=[29,31,85,112,159,160,161,163,164,335],$Vk2=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],$Vl2=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],$Vm2=[2,352],$Vn2=[13,16,197,308,314],$Vo2=[1,565],$Vp2=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],$Vq2=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],$Vr2=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],$Vs2=[13,16,87,308],$Vt2=[2,364],$Vu2=[29,31,85,112,159,160,161,163,164,193,232,318,335],$Vv2=[31,112,193,232,272,318,335],$Vw2=[2,359],$Vx2=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],$Vy2=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],$Vz2=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],$VA2=[2,347];\nvar parser = {trace: function trace () { },\nyy: {},\nsymbols_: {\"error\":2,\"QueryOrUpdate\":3,\"Prologue\":4,\"QueryOrUpdate_group0\":5,\"EOF\":6,\"Query\":7,\"Qry\":8,\"Query_option0\":9,\"Prologue_repetition0\":10,\"BaseDecl\":11,\"BASE\":12,\"IRIREF\":13,\"PrefixDecl\":14,\"PREFIX\":15,\"PNAME_NS\":16,\"SelectClauseWildcard\":17,\"Qry_repetition0\":18,\"WhereClause\":19,\"SolutionModifierNoGroup\":20,\"SelectClauseVars\":21,\"Qry_repetition1\":22,\"SolutionModifier\":23,\"CONSTRUCT\":24,\"ConstructTemplate\":25,\"Qry_repetition2\":26,\"Qry_repetition3\":27,\"WHERE\":28,\"{\":29,\"Qry_option0\":30,\"}\":31,\"DESCRIBE\":32,\"Qry_group0\":33,\"Qry_repetition4\":34,\"Qry_option1\":35,\"ASK\":36,\"Qry_repetition5\":37,\"SelectClauseBase\":38,\"*\":39,\"SelectClauseVars_repetition_plus0\":40,\"SELECT\":41,\"SelectClauseBase_option0\":42,\"SelectClauseItem\":43,\"Var\":44,\"(\":45,\"Expression\":46,\"AS\":47,\")\":48,\"SubSelect\":49,\"SubSelect_option0\":50,\"SubSelect_option1\":51,\"DatasetClause\":52,\"FROM\":53,\"DatasetClause_option0\":54,\"iri\":55,\"WhereClause_option0\":56,\"GroupGraphPattern\":57,\"SolutionModifier_option0\":58,\"SolutionModifierNoGroup_option0\":59,\"SolutionModifierNoGroup_option1\":60,\"SolutionModifierNoGroup_option2\":61,\"GroupClause\":62,\"GROUP\":63,\"BY\":64,\"GroupClause_repetition_plus0\":65,\"GroupCondition\":66,\"BuiltInCall\":67,\"FunctionCall\":68,\"HavingClause\":69,\"HAVING\":70,\"HavingClause_repetition_plus0\":71,\"OrderClause\":72,\"ORDER\":73,\"OrderClause_repetition_plus0\":74,\"OrderCondition\":75,\"ASC\":76,\"BrackettedExpression\":77,\"DESC\":78,\"Constraint\":79,\"LimitOffsetClauses\":80,\"LIMIT\":81,\"INTEGER\":82,\"OFFSET\":83,\"ValuesClause\":84,\"VALUES\":85,\"InlineData\":86,\"VAR\":87,\"InlineData_repetition0\":88,\"NIL\":89,\"InlineData_repetition1\":90,\"InlineData_repetition_plus2\":91,\"InlineData_repetition3\":92,\"DataBlock\":93,\"DataBlockValueList\":94,\"DataBlockValueList_repetition_plus0\":95,\"Update\":96,\"Update_repetition0\":97,\"Update1\":98,\"Update_option0\":99,\"LOAD\":100,\"Update1_option0\":101,\"Update1_option1\":102,\"Update1_group0\":103,\"Update1_option2\":104,\"GraphRefAll\":105,\"Update1_group1\":106,\"Update1_option3\":107,\"GraphOrDefault\":108,\"TO\":109,\"CREATE\":110,\"Update1_option4\":111,\"GRAPH\":112,\"INSERTDATA\":113,\"QuadPattern\":114,\"DELETEDATA\":115,\"DELETEWHERE\":116,\"Update1_option5\":117,\"InsertDeleteClause\":118,\"Update1_repetition0\":119,\"IntoGraphClause\":120,\"INTO\":121,\"GraphRef\":122,\"DELETE\":123,\"InsertDeleteClause_option0\":124,\"InsertClause\":125,\"INSERT\":126,\"UsingClause\":127,\"USING\":128,\"UsingClause_option0\":129,\"WithClause\":130,\"WITH\":131,\"DEFAULT\":132,\"GraphOrDefault_option0\":133,\"GraphRefAll_group0\":134,\"Quads\":135,\"Quads_option0\":136,\"Quads_repetition0\":137,\"QuadsNotTriples\":138,\"VarOrIri\":139,\"QuadsNotTriples_option0\":140,\"QuadsNotTriples_option1\":141,\"QuadsNotTriples_option2\":142,\"TriplesTemplate\":143,\"TriplesTemplate_repetition0\":144,\"TriplesSameSubject\":145,\"TriplesTemplate_option0\":146,\"GroupGraphPatternSub\":147,\"GroupGraphPatternSub_option0\":148,\"GroupGraphPatternSub_repetition0\":149,\"GroupGraphPatternSubTail\":150,\"GraphPatternNotTriples\":151,\"GroupGraphPatternSubTail_option0\":152,\"GroupGraphPatternSubTail_option1\":153,\"TriplesBlock\":154,\"TriplesBlock_repetition0\":155,\"TriplesSameSubjectPath\":156,\"TriplesBlock_option0\":157,\"GroupOrUnionGraphPattern\":158,\"OPTIONAL\":159,\"MINUS\":160,\"SERVICE\":161,\"GraphPatternNotTriples_option0\":162,\"FILTER\":163,\"BIND\":164,\"InlineDataOneVar\":165,\"InlineDataFull\":166,\"InlineDataOneVar_repetition0\":167,\"InlineDataFull_repetition0\":168,\"InlineDataFull_repetition_plus1\":169,\"InlineDataFull_repetition2\":170,\"DataBlockValue\":171,\"Literal\":172,\"QuotedTriple\":173,\"UNDEF\":174,\"GroupOrUnionGraphPattern_repetition0\":175,\"ArgList\":176,\"ArgList_option0\":177,\"ArgList_repetition0\":178,\"ExpressionList\":179,\"ExpressionList_repetition0\":180,\"ConstructTemplate_option0\":181,\"ConstructTriples\":182,\"ConstructTriples_repetition0\":183,\"ConstructTriples_option0\":184,\"VarOrTermOrQuotedTP\":185,\"PropertyListNotEmpty\":186,\"TriplesNode\":187,\"PropertyList\":188,\"PropertyList_option0\":189,\"VerbObjectList\":190,\"PropertyListNotEmpty_repetition0\":191,\"SemiOptionalVerbObjectList\":192,\";\":193,\"SemiOptionalVerbObjectList_option0\":194,\"Verb\":195,\"ObjectList\":196,\"a\":197,\"ObjectList_repetition0\":198,\"Object\":199,\"GraphNode\":200,\"Object_option0\":201,\"PropertyListPathNotEmpty\":202,\"TriplesNodePath\":203,\"TriplesSameSubjectPath_option0\":204,\"O\":205,\"PropertyListPathNotEmpty_repetition0\":206,\"PropertyListPathNotEmptyTail\":207,\"O_group0\":208,\"ObjectListPath\":209,\"ObjectListPath_repetition0\":210,\"ObjectPath\":211,\"GraphNodePath\":212,\"ObjectPath_option0\":213,\"Path\":214,\"Path_repetition0\":215,\"PathSequence\":216,\"PathSequence_repetition0\":217,\"PathEltOrInverse\":218,\"PathElt\":219,\"PathPrimary\":220,\"PathElt_option0\":221,\"PathEltOrInverse_option0\":222,\"IriOrA\":223,\"!\":224,\"PathNegatedPropertySet\":225,\"PathOneInPropertySet\":226,\"PathNegatedPropertySet_repetition0\":227,\"PathNegatedPropertySet_option0\":228,\"^\":229,\"TriplesNode_repetition_plus0\":230,\"[\":231,\"]\":232,\"TriplesNodePath_repetition_plus0\":233,\"VarOrTermOrQuotedTPExpr\":234,\"VarOrTerm\":235,\"GraphTerm\":236,\"BlankNode\":237,\"ConditionalOrExpression\":238,\"ConditionalAndExpression\":239,\"ConditionalOrExpression_repetition0\":240,\"ConditionalOrExpressionTail\":241,\"||\":242,\"RelationalExpression\":243,\"ConditionalAndExpression_repetition0\":244,\"ConditionalAndExpressionTail\":245,\"&&\":246,\"NumericExpression\":247,\"RelationalExpression_group0\":248,\"RelationalExpression_option0\":249,\"IN\":250,\"MultiplicativeExpression\":251,\"NumericExpression_repetition0\":252,\"AdditiveExpressionTail\":253,\"AdditiveExpressionTail_group0\":254,\"NumericLiteralPositive\":255,\"AdditiveExpressionTail_repetition0\":256,\"NumericLiteralNegative\":257,\"AdditiveExpressionTail_repetition1\":258,\"UnaryExpression\":259,\"MultiplicativeExpression_repetition0\":260,\"MultiplicativeExpressionTail\":261,\"MultiplicativeExpressionTail_group0\":262,\"+\":263,\"PrimaryExpression\":264,\"-\":265,\"ExprQuotedTP\":266,\"Aggregate\":267,\"FUNC_ARITY0\":268,\"FUNC_ARITY1\":269,\"FUNC_ARITY1_SPARQL_STAR\":270,\"FUNC_ARITY2\":271,\",\":272,\"FUNC_ARITY3\":273,\"FUNC_ARITY3_SPARQL_STAR\":274,\"BuiltInCall_group0\":275,\"BOUND\":276,\"BNODE\":277,\"BuiltInCall_option0\":278,\"EXISTS\":279,\"COUNT\":280,\"Aggregate_option0\":281,\"Aggregate_group0\":282,\"FUNC_AGGREGATE\":283,\"Aggregate_option1\":284,\"GROUP_CONCAT\":285,\"Aggregate_option2\":286,\"Aggregate_option3\":287,\"GroupConcatSeparator\":288,\"SEPARATOR\":289,\"=\":290,\"String\":291,\"LANGTAG\":292,\"^^\":293,\"DECIMAL\":294,\"DOUBLE\":295,\"BOOLEAN\":296,\"INTEGER_POSITIVE\":297,\"DECIMAL_POSITIVE\":298,\"DOUBLE_POSITIVE\":299,\"INTEGER_NEGATIVE\":300,\"DECIMAL_NEGATIVE\":301,\"DOUBLE_NEGATIVE\":302,\"STRING_LITERAL1\":303,\"STRING_LITERAL2\":304,\"STRING_LITERAL_LONG1\":305,\"STRING_LITERAL_LONG2\":306,\"PrefixedName\":307,\"PNAME_LN\":308,\"BLANK_NODE_LABEL\":309,\"ANON\":310,\"QuotedTP\":311,\"<<\":312,\"qtSubjectOrObject\":313,\">>\":314,\"DataValueTerm\":315,\"AnnotationPattern\":316,\"{|\":317,\"|}\":318,\"AnnotationPatternPath\":319,\"ExprVarOrTerm\":320,\"QueryOrUpdate_group0_option0\":321,\"Prologue_repetition0_group0\":322,\"Qry_group0_repetition_plus0\":323,\"SelectClauseBase_option0_group0\":324,\"DISTINCT\":325,\"REDUCED\":326,\"NAMED\":327,\"SILENT\":328,\"CLEAR\":329,\"DROP\":330,\"ADD\":331,\"MOVE\":332,\"COPY\":333,\"ALL\":334,\".\":335,\"UNION\":336,\"|\":337,\"/\":338,\"PathElt_option0_group0\":339,\"?\":340,\"!=\":341,\"<\":342,\">\":343,\"<=\":344,\">=\":345,\"NOT\":346,\"CONCAT\":347,\"COALESCE\":348,\"SUBSTR\":349,\"REGEX\":350,\"REPLACE\":351,\"$accept\":0,\"$end\":1},\nterminals_: {2:\"error\",6:\"EOF\",12:\"BASE\",13:\"IRIREF\",15:\"PREFIX\",16:\"PNAME_NS\",24:\"CONSTRUCT\",28:\"WHERE\",29:\"{\",31:\"}\",32:\"DESCRIBE\",36:\"ASK\",39:\"*\",41:\"SELECT\",45:\"(\",47:\"AS\",48:\")\",53:\"FROM\",63:\"GROUP\",64:\"BY\",70:\"HAVING\",73:\"ORDER\",76:\"ASC\",78:\"DESC\",81:\"LIMIT\",82:\"INTEGER\",83:\"OFFSET\",85:\"VALUES\",87:\"VAR\",89:\"NIL\",100:\"LOAD\",109:\"TO\",110:\"CREATE\",112:\"GRAPH\",113:\"INSERTDATA\",115:\"DELETEDATA\",116:\"DELETEWHERE\",121:\"INTO\",123:\"DELETE\",126:\"INSERT\",128:\"USING\",131:\"WITH\",132:\"DEFAULT\",159:\"OPTIONAL\",160:\"MINUS\",161:\"SERVICE\",163:\"FILTER\",164:\"BIND\",174:\"UNDEF\",193:\";\",197:\"a\",224:\"!\",229:\"^\",231:\"[\",232:\"]\",242:\"||\",246:\"&&\",250:\"IN\",263:\"+\",265:\"-\",268:\"FUNC_ARITY0\",269:\"FUNC_ARITY1\",270:\"FUNC_ARITY1_SPARQL_STAR\",271:\"FUNC_ARITY2\",272:\",\",273:\"FUNC_ARITY3\",274:\"FUNC_ARITY3_SPARQL_STAR\",276:\"BOUND\",277:\"BNODE\",279:\"EXISTS\",280:\"COUNT\",283:\"FUNC_AGGREGATE\",285:\"GROUP_CONCAT\",289:\"SEPARATOR\",290:\"=\",292:\"LANGTAG\",293:\"^^\",294:\"DECIMAL\",295:\"DOUBLE\",296:\"BOOLEAN\",297:\"INTEGER_POSITIVE\",298:\"DECIMAL_POSITIVE\",299:\"DOUBLE_POSITIVE\",300:\"INTEGER_NEGATIVE\",301:\"DECIMAL_NEGATIVE\",302:\"DOUBLE_NEGATIVE\",303:\"STRING_LITERAL1\",304:\"STRING_LITERAL2\",305:\"STRING_LITERAL_LONG1\",306:\"STRING_LITERAL_LONG2\",308:\"PNAME_LN\",309:\"BLANK_NODE_LABEL\",310:\"ANON\",312:\"<<\",314:\">>\",317:\"{|\",318:\"|}\",325:\"DISTINCT\",326:\"REDUCED\",327:\"NAMED\",328:\"SILENT\",329:\"CLEAR\",330:\"DROP\",331:\"ADD\",332:\"MOVE\",333:\"COPY\",334:\"ALL\",335:\".\",336:\"UNION\",337:\"|\",338:\"/\",340:\"?\",341:\"!=\",342:\"<\",343:\">\",344:\"<=\",345:\">=\",346:\"NOT\",347:\"CONCAT\",348:\"COALESCE\",349:\"SUBSTR\",350:\"REGEX\",351:\"REPLACE\"},\nproductions_: [0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],\nperformAction: function anonymous(yytext, yyleng, yylineno, yy, yystate /* action[1] */, $$ /* vstack */, _$ /* lstack */) {\n/* this == yyval */\n\nvar $0 = $$.length - 1;\nswitch (yystate) {\ncase 1:\n\n      // Set parser options\n      $$[$0-1] = $$[$0-1] || {};\n      if (Parser.base)\n        $$[$0-1].base = Parser.base;\n      Parser.base = '';\n      $$[$0-1].prefixes = Parser.prefixes;\n      Parser.prefixes = null;\n\n      if (Parser.pathOnly) {\n        if ($$[$0-1].type === 'path' || 'termType' in $$[$0-1]) {\n          return $$[$0-1]\n        }\n        throw new Error('Received full SPARQL query in path only mode');\n      } else if ($$[$0-1].type === 'path' || 'termType' in $$[$0-1]) {\n        throw new Error('Received only path in full SPARQL mode');\n      }\n\n      // Ensure that blank nodes are not used across INSERT DATA clauses\n      if ($$[$0-1].type === 'update') {\n        const insertBnodesAll = {};\n        for (const update of $$[$0-1].updates) {\n          if (update.updateType === 'insert') {\n            // Collect bnodes for current insert clause\n            const insertBnodes = {};\n            for (const operation of update.insert) {\n              if (operation.type === 'bgp' || operation.type === 'graph') {\n                for (const triple of operation.triples) {\n                  if (triple.subject.termType === 'BlankNode')\n                    insertBnodes[triple.subject.value] = true;\n                  if (triple.predicate.termType === 'BlankNode')\n                    insertBnodes[triple.predicate.value] = true;\n                  if (triple.object.termType === 'BlankNode')\n                    insertBnodes[triple.object.value] = true;\n                }\n              }\n            }\n\n            // Check if the inserting bnodes don't clash with bnodes from a previous insert clause\n            for (const bnode of Object.keys(insertBnodes)) {\n              if (insertBnodesAll[bnode]) {\n                throw new Error('Detected reuse blank node across different INSERT DATA clauses');\n              }\n              insertBnodesAll[bnode] = true;\n            }\n          }\n        }\n      }\n      return $$[$0-1];\n    \nbreak;\ncase 2:\nthis.$ = { ...$$[$0-1], ...$$[$0], type: 'query' };\nbreak;\ncase 4:\n\n      Parser.base = resolveIRI($$[$0])\n    \nbreak;\ncase 5:\n\n      if (!Parser.prefixes) Parser.prefixes = {};\n      $$[$0-1] = $$[$0-1].substr(0, $$[$0-1].length - 1);\n      $$[$0] = resolveIRI($$[$0]);\n      Parser.prefixes[$$[$0-1]] = $$[$0];\n    \nbreak;\ncase 6:\nthis.$ = { ...$$[$0-3], ...groupDatasets($$[$0-2]), ...$$[$0-1], ...$$[$0] };\nbreak;\ncase 7:\n\n      // Check for projection of ungrouped variable\n      if (!Parser.skipValidation) {\n        const counts = flatten($$[$0-3].variables.map(vars => getAggregatesOfExpression(vars.expression)))\n          .some(agg => agg.aggregation === \"count\" && !(agg.expression instanceof Wildcard));\n        if (counts || $$[$0].group) {\n          for (const selectVar of $$[$0-3].variables) {\n            if (selectVar.termType === \"Variable\") {\n              if (!$$[$0].group || !$$[$0].group.map(groupVar => getExpressionId(groupVar)).includes(getExpressionId(selectVar))) {\n                throw Error(\"Projection of ungrouped variable (?\" + getExpressionId(selectVar) + \")\");\n              }\n            } else if (getAggregatesOfExpression(selectVar.expression).length === 0) {\n              const usedVars = getVariablesFromExpression(selectVar.expression);\n              for (const usedVar of usedVars) {\n                if (!$$[$0].group || !$$[$0].group.map || !$$[$0].group.map(groupVar => getExpressionId(groupVar)).includes(getExpressionId(usedVar))) {\n                  throw Error(\"Use of ungrouped variable in projection of operation (?\" + getExpressionId(usedVar) + \")\");\n                }\n              }\n            }\n          }\n        }\n      }\n      // Check if id of each AS-selected column is not yet bound by subquery\n      const subqueries = $$[$0-1].where.filter(w => w.type === \"query\");\n      if (subqueries.length > 0) {\n        const selectedVarIds = $$[$0-3].variables.filter(v => v.variable && v.variable.value).map(v => v.variable.value);\n        const subqueryIds = flatten(subqueries.map(sub => sub.variables)).map(v => v.value || v.variable.value);\n        for (const selectedVarId of selectedVarIds) {\n          if (subqueryIds.indexOf(selectedVarId) >= 0) {\n            throw Error(\"Target id of 'AS' (?\" + selectedVarId + \") already used in subquery\");\n          }\n        }\n      }\n      this.$ = extend($$[$0-3], groupDatasets($$[$0-2]), $$[$0-1], $$[$0])\n    \nbreak;\ncase 8:\nthis.$ = extend({ queryType: 'CONSTRUCT', template: $$[$0-3] }, groupDatasets($$[$0-2]), $$[$0-1], $$[$0]);\nbreak;\ncase 9:\nthis.$ = extend({ queryType: 'CONSTRUCT', template: $$[$0-2] = ($$[$0-2] ? $$[$0-2].triples : []) }, groupDatasets($$[$0-5]), { where: [ { type: 'bgp', triples: appendAllTo([], $$[$0-2]) } ] }, $$[$0]);\nbreak;\ncase 10:\nthis.$ = extend({ queryType: 'DESCRIBE', variables: $$[$0-3] === '*' ? [new Wildcard()] : $$[$0-3] }, groupDatasets($$[$0-2]), $$[$0-1], $$[$0]);\nbreak;\ncase 11:\nthis.$ = extend({ queryType: 'ASK' }, groupDatasets($$[$0-2]), $$[$0-1], $$[$0]);\nbreak;\ncase 12:\nthis.$ = extend($$[$0-1], {variables: [new Wildcard()]});\nbreak;\ncase 13:\n\n      // Check if id of each selected column is different\n      const selectedVarIds = $$[$0].map(v => v.value || v.variable.value);\n      const duplicates = getDuplicatesInArray(selectedVarIds);\n      if (duplicates.length > 0) {\n        throw Error(\"Two or more of the resulting columns have the same name (?\" + duplicates[0] + \")\");\n      }\n\n      this.$ = extend($$[$0-1], { variables: $$[$0] })\n    \nbreak;\ncase 14:\nthis.$ = extend({ queryType: 'SELECT'}, $$[$0] && ($$[$0-1] = lowercase($$[$0]), $$[$0] = {}, $$[$0][$$[$0-1]] = true, $$[$0]));\nbreak;\ncase 16: case 27:\nthis.$ = expression($$[$0-3], { variable: $$[$0-1] });\nbreak;\ncase 17: case 18:\nthis.$ = extend($$[$0-3], $$[$0-2], $$[$0-1], $$[$0], { type: 'query' });\nbreak;\ncase 19: case 58:\nthis.$ = { iri: $$[$0], named: !!$$[$0-1] };\nbreak;\ncase 20:\nthis.$ = { where: $$[$0].patterns };\nbreak;\ncase 21:\nthis.$ = extend($$[$0-1], $$[$0]);\nbreak;\ncase 22:\nthis.$ = extend($$[$0-2], $$[$0-1], $$[$0]);\nbreak;\ncase 23:\nthis.$ = { group: $$[$0] };\nbreak;\ncase 24: case 25: case 28: case 31: case 33: case 34:\nthis.$ = expression($$[$0]);\nbreak;\ncase 26:\nthis.$ = expression($$[$0-1]);\nbreak;\ncase 29:\nthis.$ = { having: $$[$0] };\nbreak;\ncase 30:\nthis.$ = { order: $$[$0] };\nbreak;\ncase 32:\nthis.$ = expression($$[$0], { descending: true });\nbreak;\ncase 35:\nthis.$ = { limit: toInt($$[$0]) };\nbreak;\ncase 36:\nthis.$ = { offset: toInt($$[$0]) };\nbreak;\ncase 37:\nthis.$ = { limit: toInt($$[$0-2]), offset: toInt($$[$0]) };\nbreak;\ncase 38:\nthis.$ = { limit: toInt($$[$0]), offset: toInt($$[$0-2]) };\nbreak;\ncase 39: case 43:\nthis.$ = { type: 'values', values: $$[$0] };\nbreak;\ncase 40: case 84:\nthis.$ = $$[$0-1].map(v => ({ [$$[$0-3]]: v }));\nbreak;\ncase 41: case 85:\nthis.$ = $$[$0-1].map(() => ({}));\nbreak;\ncase 42: case 86:\n\n      var length = $$[$0-4].length;\n      $$[$0-4] = $$[$0-4].map(toVar);\n      this.$ = $$[$0-1].map(function (values) {\n        if (values.length !== length)\n          throw Error('Inconsistent VALUES length');\n        var valuesObject = {};\n        for(var i = 0; i<length; i++)\n          valuesObject['?' + $$[$0-4][i].value] = values[i];\n        return valuesObject;\n      });\n    \nbreak;\ncase 44: case 65: case 100: case 126: case 175:\nthis.$ = $$[$0-1];\nbreak;\ncase 45:\nthis.$ = { type: 'update', updates: appendTo($$[$0-2], $$[$0-1]) };\nbreak;\ncase 46:\nthis.$ = extend({ type: 'load', silent: !!$$[$0-2], source: $$[$0-1] }, $$[$0] && { destination: $$[$0] });\nbreak;\ncase 47:\nthis.$ = { type: lowercase($$[$0-2]), silent: !!$$[$0-1], graph: $$[$0] };\nbreak;\ncase 48:\nthis.$ = { type: lowercase($$[$0-4]), silent: !!$$[$0-3], source: $$[$0-2], destination: $$[$0] };\nbreak;\ncase 49:\nthis.$ = { type: 'create', silent: !!$$[$0-2], graph: { type: 'graph', name: $$[$0] } };\nbreak;\ncase 50:\nthis.$ = { updateType: 'insert',      insert: ensureNoVariables($$[$0])                 };\nbreak;\ncase 51:\nthis.$ = { updateType: 'delete',      delete: ensureNoBnodes(ensureNoVariables($$[$0])) };\nbreak;\ncase 52:\nthis.$ = { updateType: 'deletewhere', delete: ensureNoBnodes($$[$0])                    };\nbreak;\ncase 53:\nthis.$ = { updateType: 'insertdelete', ...$$[$0-4], ...$$[$0-3], ...groupDatasets($$[$0-2], 'using'), where: $$[$0].patterns };\nbreak;\ncase 54: case 57: case 62: case 167: case 191: case 236:\nthis.$ = $$[$0];\nbreak;\ncase 55:\nthis.$ = { delete: ensureNoBnodes($$[$0-1]), insert: $$[$0] || [] };\nbreak;\ncase 56:\nthis.$ = { delete: [], insert: $$[$0] };\nbreak;\ncase 59:\nthis.$ = { graph: $$[$0] };\nbreak;\ncase 60:\nthis.$ = { type: 'graph', default: true };\nbreak;\ncase 61: case 63:\nthis.$ = { type: 'graph', name: $$[$0] };\nbreak;\ncase 64:\nthis.$ = { [lowercase($$[$0])]: true };\nbreak;\ncase 66:\nthis.$ = $$[$0-1] ? unionAll($$[$0], [$$[$0-1]]) : unionAll($$[$0]);\nbreak;\ncase 67:\n\n      var graph = extend($$[$0-3] || { triples: [] }, { type: 'graph', name: $$[$0-5] });\n      this.$ = $$[$0] ? [graph, $$[$0]] : [graph];\n    \nbreak;\ncase 68: case 73:\nthis.$ = { type: 'bgp', triples: unionAll($$[$0-2], [$$[$0-1]]) };\nbreak;\ncase 69:\nthis.$ = { type: 'group', patterns: [ $$[$0-1] ] };\nbreak;\ncase 70:\n\n      // For every binding\n      for (const binding of $$[$0-1].filter(el => el.type === \"bind\")) {\n        const index = $$[$0-1].indexOf(binding);\n        const boundVars = new Set();\n        //Collect all bounded variables before the binding\n        for (const el of $$[$0-1].slice(0, index)) {\n          if (el.type === \"group\" || el.type === \"bgp\") {\n            getBoundVarsFromGroupGraphPattern(el).forEach(boundVar => boundVars.add(boundVar));\n          }\n        }\n        // If binding with a non-free variable, throw error\n        if (boundVars.has(binding.variable.value)) {\n          throw Error(\"Variable used to bind is already bound (?\" + binding.variable.value + \")\");\n        }\n      }\n      this.$ = { type: 'group', patterns: $$[$0-1] }\n    \nbreak;\ncase 71:\nthis.$ = $$[$0-1] ? unionAll([$$[$0-1]], $$[$0]) : unionAll($$[$0]);\nbreak;\ncase 72:\nthis.$ = $$[$0] ? [$$[$0-2], $$[$0]] : $$[$0-2];\nbreak;\ncase 75:\nthis.$ = extend($$[$0], { type: 'optional' });\nbreak;\ncase 76:\nthis.$ = extend($$[$0], { type: 'minus' });\nbreak;\ncase 77:\nthis.$ = extend($$[$0], { type: 'graph', name: $$[$0-1] });\nbreak;\ncase 78:\nthis.$ = extend($$[$0], { type: 'service', name: $$[$0-1], silent: !!$$[$0-2] });\nbreak;\ncase 79:\nthis.$ = { type: 'filter', expression: $$[$0] };\nbreak;\ncase 80:\nthis.$ = { type: 'bind', variable: $$[$0-1], expression: $$[$0-3] };\nbreak;\ncase 89:\nthis.$ = ensureSparqlStar($$[$0]);\nbreak;\ncase 90:\nthis.$ = undefined;\nbreak;\ncase 91:\nthis.$ = $$[$0-1].length ? { type: 'union', patterns: unionAll($$[$0-1].map(degroupSingle), [degroupSingle($$[$0])]) } : $$[$0];\nbreak;\ncase 95:\nthis.$ = { ...$$[$0], function: $$[$0-1] };\nbreak;\ncase 96:\nthis.$ = { type: 'functionCall', args: [] };\nbreak;\ncase 97:\nthis.$ = { type: 'functionCall', args: appendTo($$[$0-2], $$[$0-1]), distinct: !!$$[$0-3] };\nbreak;\ncase 98: case 115: case 128: case 247: case 249: case 251: case 253: case 255: case 263: case 267: case 297: case 299: case 303: case 307: case 328: case 341: case 349: case 355: case 361: case 367: case 369: case 373: case 375: case 379: case 381: case 385: case 391: case 395: case 401: case 405: case 409: case 411: case 420: case 428: case 430: case 440: case 444: case 446: case 448:\nthis.$ = [];\nbreak;\ncase 99:\nthis.$ = appendTo($$[$0-2], $$[$0-1]);\nbreak;\ncase 101:\nthis.$ = unionAll($$[$0-2], [$$[$0-1]]);\nbreak;\ncase 102: case 112:\nthis.$ = applyAnnotations($$[$0].map(t => extend(triple($$[$0-1]), t)));\nbreak;\ncase 103:\nthis.$ = applyAnnotations(appendAllTo($$[$0].map(t => extend(triple($$[$0-1].entity), t)), $$[$0-1].triples)) /* the subject is a blank node, possibly with more triples */;\nbreak;\ncase 105:\nthis.$ = unionAll([$$[$0-1]], $$[$0]);\nbreak;\ncase 106:\nthis.$ = unionAll($$[$0]);\nbreak;\ncase 107:\nthis.$ = objectListToTriples($$[$0-1], $$[$0]);\nbreak;\ncase 109: case 237:\nthis.$ = Parser.factory.namedNode(RDF_TYPE);\nbreak;\ncase 110: case 118:\nthis.$ = appendTo($$[$0-1], $$[$0]);\nbreak;\ncase 111:\nthis.$ = $$[$0] ? { annotation: $$[$0], object: $$[$0-1] } : $$[$0-1];\nbreak;\ncase 113:\nthis.$ = !$$[$0] ? $$[$0-1].triples : applyAnnotations(appendAllTo($$[$0].map(t => extend(triple($$[$0-1].entity), t)), $$[$0-1].triples)) /* the subject is a blank node, possibly with more triples */;\nbreak;\ncase 114:\nthis.$ = objectListToTriples(...$$[$0-1], $$[$0]);\nbreak;\ncase 116:\nthis.$ = objectListToTriples(...$$[$0]);\nbreak;\ncase 117: case 159: case 163:\nthis.$ = [$$[$0-1], $$[$0]];\nbreak;\ncase 119:\nthis.$ = $$[$0] ? { object: $$[$0-1], annotation: $$[$0] } : $$[$0-1];;\nbreak;\ncase 120:\nthis.$ = $$[$0-1].length ? path('|',appendTo($$[$0-1], $$[$0])) : $$[$0];\nbreak;\ncase 121:\nthis.$ = $$[$0-1].length ? path('/', appendTo($$[$0-1], $$[$0])) : $$[$0];\nbreak;\ncase 122:\nthis.$ = $$[$0] ? path($$[$0], [$$[$0-1]]) : $$[$0-1];\nbreak;\ncase 123:\nthis.$ = $$[$0-1] ? path($$[$0-1], [$$[$0]]) : $$[$0];;\nbreak;\ncase 125: case 131:\nthis.$ = path($$[$0-1], [$$[$0]]);\nbreak;\ncase 129:\nthis.$ = path('|', appendTo($$[$0-2], $$[$0-1]));\nbreak;\ncase 132: case 134:\nthis.$ = createList($$[$0-1]);\nbreak;\ncase 133: case 135:\nthis.$ = createAnonymousObject($$[$0-1]);\nbreak;\ncase 140:\nthis.$ = { entity: $$[$0], triples: [] };\nbreak;\ncase 145:\nthis.$ = toVar($$[$0]);\nbreak;\ncase 149:\nthis.$ = Parser.factory.namedNode(RDF_NIL);\nbreak;\ncase 151: case 153: case 158: case 162:\nthis.$ = createOperationTree($$[$0-1], $$[$0]);\nbreak;\ncase 152:\nthis.$ = ['||', $$[$0]];\nbreak;\ncase 154:\nthis.$ = ['&&', $$[$0]];\nbreak;\ncase 156:\nthis.$ = operation($$[$0-1], [$$[$0-2], $$[$0]]);\nbreak;\ncase 157:\nthis.$ = operation($$[$0-2] ? 'notin' : 'in', [$$[$0-3], $$[$0]]);\nbreak;\ncase 160:\nthis.$ = ['+', createOperationTree($$[$0-1], $$[$0])];\nbreak;\ncase 161:\n\n      var negatedLiteral = createTypedLiteral($$[$0-1].value.replace('-', ''), $$[$0-1].datatype);\n      this.$ = ['-', createOperationTree(negatedLiteral, $$[$0])];\n    \nbreak;\ncase 164:\nthis.$ = operation('UPLUS', [$$[$0]]);\nbreak;\ncase 165:\nthis.$ = operation($$[$0-1], [$$[$0]]);\nbreak;\ncase 166:\nthis.$ = operation('UMINUS', [$$[$0]]);\nbreak;\ncase 177:\nthis.$ = operation(lowercase($$[$0-1]));\nbreak;\ncase 178:\nthis.$ = operation(lowercase($$[$0-3]), [$$[$0-1]]);\nbreak;\ncase 179:\nthis.$ = ensureSparqlStar(operation(lowercase($$[$0-3]), [$$[$0-1]]));\nbreak;\ncase 180:\nthis.$ = operation(lowercase($$[$0-5]), [$$[$0-3], $$[$0-1]]);\nbreak;\ncase 181:\nthis.$ = operation(lowercase($$[$0-7]), [$$[$0-5], $$[$0-3], $$[$0-1]]);\nbreak;\ncase 182:\nthis.$ = ensureSparqlStar(operation(lowercase($$[$0-7]), [$$[$0-5], $$[$0-3], $$[$0-1]]));\nbreak;\ncase 183:\nthis.$ = operation(lowercase($$[$0-1]), $$[$0]);\nbreak;\ncase 184:\nthis.$ = operation('bound', [toVar($$[$0-1])]);\nbreak;\ncase 185:\nthis.$ = operation($$[$0-1], []);\nbreak;\ncase 186:\nthis.$ = operation($$[$0-3], [$$[$0-1]]);\nbreak;\ncase 187:\nthis.$ = operation($$[$0-2] ? 'notexists' :'exists', [degroupSingle($$[$0])]);\nbreak;\ncase 188: case 189:\nthis.$ = expression($$[$0-1], { type: 'aggregate', aggregation: lowercase($$[$0-4]), distinct: !!$$[$0-2] });\nbreak;\ncase 190:\nthis.$ = expression($$[$0-2], { type: 'aggregate', aggregation: lowercase($$[$0-5]), distinct: !!$$[$0-3], separator: typeof $$[$0-1] === 'string' ? $$[$0-1] : ' ' });\nbreak;\ncase 192:\nthis.$ = createTypedLiteral($$[$0]);\nbreak;\ncase 193:\nthis.$ = createLangLiteral($$[$0-1], lowercase($$[$0].substr(1)));\nbreak;\ncase 194:\nthis.$ = createTypedLiteral($$[$0-2], $$[$0]);\nbreak;\ncase 195: case 204:\nthis.$ = createTypedLiteral($$[$0], XSD_INTEGER);\nbreak;\ncase 196: case 205:\nthis.$ = createTypedLiteral($$[$0], XSD_DECIMAL);\nbreak;\ncase 197: case 206:\nthis.$ = createTypedLiteral(lowercase($$[$0]), XSD_DOUBLE);\nbreak;\ncase 200:\nthis.$ = createTypedLiteral($$[$0].toLowerCase(), XSD_BOOLEAN);\nbreak;\ncase 201:\nthis.$ = createTypedLiteral($$[$0].substr(1), XSD_INTEGER);\nbreak;\ncase 202:\nthis.$ = createTypedLiteral($$[$0].substr(1), XSD_DECIMAL);\nbreak;\ncase 203:\nthis.$ = createTypedLiteral($$[$0].substr(1).toLowerCase(), XSD_DOUBLE);\nbreak;\ncase 207: case 208:\nthis.$ = unescapeString($$[$0], 1);\nbreak;\ncase 209: case 210:\nthis.$ = unescapeString($$[$0], 3);\nbreak;\ncase 211:\nthis.$ = Parser.factory.namedNode(resolveIRI($$[$0]));\nbreak;\ncase 213:\n\n      var namePos = $$[$0].indexOf(':'),\n          prefix = $$[$0].substr(0, namePos),\n          expansion = Parser.prefixes[prefix];\n      if (!expansion) throw new Error('Unknown prefix: ' + prefix);\n      var uriString = resolveIRI(expansion + $$[$0].substr(namePos + 1));\n      this.$ = Parser.factory.namedNode(uriString);\n    \nbreak;\ncase 214:\n\n      $$[$0] = $$[$0].substr(0, $$[$0].length - 1);\n      if (!($$[$0] in Parser.prefixes)) throw new Error('Unknown prefix: ' + $$[$0]);\n      var uriString = resolveIRI(Parser.prefixes[$$[$0]]);\n      this.$ = Parser.factory.namedNode(uriString);\n    \nbreak;\ncase 215:\nthis.$ = blank($$[$0].replace(/^(_:)/,''));;\nbreak;\ncase 216:\nthis.$ = blank();\nbreak;\ncase 217: case 218: case 232:\nthis.$ = ensureSparqlStar(nestedTriple($$[$0-3], $$[$0-2], $$[$0-1]));\nbreak;\ncase 230: case 231:\nthis.$ = ensureSparqlStar($$[$0-1]);\nbreak;\ncase 248: case 250: case 252: case 254: case 256: case 260: case 264: case 268: case 270: case 292: case 294: case 296: case 298: case 300: case 302: case 304: case 306: case 329: case 342: case 356: case 368: case 370: case 372: case 374: case 392: case 402: case 425: case 427: case 429: case 431: case 441: case 445: case 447: case 449:\n$$[$0-1].push($$[$0]);\nbreak;\ncase 259: case 269: case 291: case 293: case 295: case 301: case 305: case 371: case 424: case 426:\nthis.$ = [$$[$0]];\nbreak;\ncase 308:\n$$[$0-3].push($$[$0-2]);\nbreak;\ncase 350: case 362: case 376: case 380: case 382: case 386: case 396: case 406: case 410: case 412: case 421:\n$$[$0-2].push($$[$0-1]);\nbreak;\n}\n},\ntable: [o($V0,$V1,{3:1,4:2,10:3}),{1:[3]},o($V2,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:$V3,16:$V3,45:$V3,197:$V3,224:$V3,229:$V3,308:$V3,24:[1,13],32:[1,14],36:[1,15],41:$V4}),o([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:$V5},{6:[2,239]},o($V6,[2,411],{216:28,217:29}),o($V7,[2,249],{18:30}),o($V7,[2,251],{22:31}),o($V8,[2,255],{25:32,27:33,29:[1,34]}),{13:$V9,16:$Va,33:35,39:[1,37],44:39,55:40,87:$Vb,139:38,307:43,308:$Vc,323:36},o($V7,[2,267],{37:46}),o($Vd,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:$Ve,87:$Vb},o($Vf,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),o($V0,[2,248]),o($V0,[2,245]),o($V0,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},o([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),o($Vg,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:$Vh,29:$Vi,52:84,53:$Vj,56:85},{19:88,28:$Vh,29:$Vi,52:89,53:$Vj,56:85},o($V7,[2,253],{26:90}),{28:[1,91],52:92,53:$Vj},o($Vk,[2,385],{181:93,182:94,183:95,31:[2,383]}),o($Vl,[2,263],{34:96}),o($Vl,[2,261],{44:39,55:40,307:43,139:97,13:$V9,16:$Va,87:$Vb,308:$Vc}),o($Vl,[2,262]),o($Vm,[2,259]),o($Vn,[2,143]),o($Vn,[2,144]),o([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),o($Vo,[2,211]),o($Vo,[2,212]),o($Vo,[2,213]),o($Vo,[2,214]),{19:98,28:$Vh,29:$Vi,52:99,53:$Vj,56:85},{6:[2,309],99:100,193:[1,101]},o($Vp,[2,311],{101:102,328:[1,103]}),o($Vq,[2,317],{104:104,328:[1,105]}),o($Vr,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:$Vs,114:110},{29:$Vs,114:112},{29:$Vs,114:113},{118:114,123:[1,115],125:116,126:$Vt},o($Vu,[2,315]),o($Vu,[2,316]),o($Vv,[2,319]),o($Vv,[2,320]),o($Vv,[2,321]),o($Vd,[2,327]),{13:$V9,16:$Va,55:118,307:43,308:$Vc},o($V7,[2,12]),o($V7,[2,13],{44:66,43:119,45:$Ve,87:$Vb}),o($Vw,[2,269]),o($Vw,[2,15]),{13:$V9,16:$Va,44:136,45:$Vx,46:120,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($Vf,[2,14]),o($Vf,[2,274]),o($Vf,[2,271]),o($Vf,[2,272]),o($V0,[2,4]),{13:[1,177]},o($V61,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},o($V6,[2,410]),o([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:$V9,16:$Va,45:[1,193],55:194,197:$V71,219:189,220:190,223:191,224:[1,192],307:43,308:$Vc},o($Vg,[2,419]),o($V81,$V91,{20:196,59:197,69:198,70:$Va1}),o($V7,[2,250]),{29:$Vb1,57:200},o($Vp,[2,279],{54:202,327:[1,203]}),{29:[2,282]},o($Vc1,$Vd1,{23:204,58:205,62:206,63:$Ve1}),o($V7,[2,252]),{19:208,28:$Vh,29:$Vi,52:209,53:$Vj,56:85},{29:[1,210]},o($V8,[2,256]),{31:[1,211]},{31:[2,384]},{13:$V9,16:$Va,44:215,45:$Vf1,55:220,82:$Vy,87:$Vb,89:$Vg1,145:212,172:221,185:213,187:214,231:$Vh1,236:216,237:222,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:217,312:$Vk1},o($Vl1,[2,265],{56:85,35:227,52:228,19:229,28:$Vh,29:$Vi,53:$Vj}),o($Vm,[2,260]),o($Vc1,$Vd1,{58:205,62:206,23:230,63:$Ve1}),o($V7,[2,268]),{6:[2,45]},o($V0,$V1,{10:3,4:231}),{13:$V9,16:$Va,55:232,307:43,308:$Vc},o($Vp,[2,312]),{105:233,112:$Vm1,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},o($Vq,[2,318]),o($Vp,$Vn1,{108:240,133:242,112:$Vo1,132:$Vp1}),o($Vr,[2,323]),{112:[1,244]},{112:[2,325]},o($Vq1,[2,50]),o($Vk,$Vr1,{135:245,136:246,143:247,144:248,31:$Vs1,112:$Vs1}),o($Vq1,[2,51]),o($Vq1,[2,52]),o($Vt1,[2,328],{119:249}),{29:$Vs,114:250},o($Vt1,[2,56]),{29:$Vs,114:251},o($Vd,[2,59]),o($Vw,[2,270]),{47:[1,252]},o($Vu1,[2,150]),o($Vv1,[2,428],{240:253}),o($Vw1,[2,430],{244:254}),o($Vw1,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),o($Vx1,[2,440],{252:264}),o($Vy1,[2,448],{260:265}),{13:$V9,16:$Va,44:136,45:$Vx,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,255:154,257:155,264:266,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{13:$V9,16:$Va,44:136,45:$Vx,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,255:154,257:155,264:267,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{13:$V9,16:$Va,44:136,45:$Vx,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,255:154,257:155,264:268,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($Vy1,[2,167]),o($Vy1,[2,168]),o($Vy1,[2,169]),o($Vy1,[2,170],{176:269,45:$Vz1,89:$VA1}),o($Vy1,[2,171]),o($Vy1,[2,172]),o($Vy1,[2,173]),o($Vy1,[2,174]),{13:$V9,16:$Va,44:136,45:$Vx,46:272,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($VB1,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:$VC1,89:$VD1,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},o($VE1,[2,192],{292:[1,286],293:[1,287]}),o($VE1,[2,195]),o($VE1,[2,196]),o($VE1,[2,197]),o($VE1,[2,198]),o($VE1,[2,199]),o($VE1,[2,200]),{13:$V9,16:$Va,44:39,55:40,82:$Vy,87:$Vb,139:289,172:291,255:154,257:155,266:290,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},o($VF1,[2,452]),o($VF1,[2,453]),o($VF1,[2,454]),o($VF1,[2,455]),o($VF1,[2,456]),{279:[2,458]},o($VG1,[2,207]),o($VG1,[2,208]),o($VG1,[2,209]),o($VG1,[2,210]),o($VE1,[2,201]),o($VE1,[2,202]),o($VE1,[2,203]),o($VE1,[2,204]),o($VE1,[2,205]),o($VE1,[2,206]),o($V0,[2,5]),o($VH1,[2,297],{88:295}),o($VI1,[2,299],{90:296}),{48:[1,297],87:[1,298]},o($VJ1,[2,301]),o($V61,[2,43]),o($V61,[2,82]),o($V61,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},o($V6,[2,412]),o($VK1,[2,123]),o($VK1,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),o($VL1,[2,124]),{13:$V9,16:$Va,45:[1,311],55:194,89:[1,310],197:$V71,223:312,225:308,226:309,229:$VM1,307:43,308:$Vc},o($V6,$V3,{215:10,214:314}),o($VL1,[2,236]),o($VL1,[2,237]),o($VN1,[2,6]),o($VO1,[2,287],{60:315,72:316,73:[1,317]}),o($V81,[2,286]),{13:$V9,16:$Va,45:$Vx,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,307:43,308:$Vc,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o([6,31,63,70,73,81,83,85],[2,20]),o($Vk,$VP1,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:$VQ1,31:$VQ1,85:$VQ1,112:$VQ1,159:$VQ1,160:$VQ1,161:$VQ1,163:$VQ1,164:$VQ1,41:$V4}),{13:$V9,16:$Va,55:331,307:43,308:$Vc},o($Vp,[2,280]),o($VN1,[2,7]),o($V81,$V91,{59:197,69:198,20:332,70:$Va1}),o($Vc1,[2,284]),{64:[1,333]},o($Vc1,$Vd1,{58:205,62:206,23:334,63:$Ve1}),o($V7,[2,254]),o($Vk,$Vr1,{144:248,30:335,143:336,31:[2,257]}),o($V7,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:$V9,16:$Va,44:39,55:40,87:$Vb,139:342,186:339,190:340,195:341,197:$VR1,307:43,308:$Vc},o($VS1,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:$V9,16:$Va,87:$Vb,197:$VR1,308:$Vc}),o($VT1,[2,227]),o($VT1,[2,228]),o($VT1,[2,229]),{13:$V9,16:$Va,44:215,45:$Vf1,55:220,82:$Vy,87:$Vb,89:$Vg1,172:221,185:351,187:350,200:348,230:347,231:$Vh1,234:349,236:216,237:222,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:217,312:$Vk1},{13:$V9,16:$Va,44:39,55:40,87:$Vb,139:342,186:352,190:340,195:341,197:$VR1,307:43,308:$Vc},o($VT1,[2,146]),o($VT1,[2,147]),o($VT1,[2,148]),o($VT1,[2,149]),{13:$V9,16:$Va,44:354,55:355,82:$Vy,87:$Vb,172:357,237:356,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:358,312:$Vk1,313:353},o($VU1,[2,215]),o($VU1,[2,216]),o($Vc1,$Vd1,{58:205,62:206,23:359,63:$Ve1}),o($Vl,[2,264]),o($Vl1,[2,266]),o($VN1,[2,11]),o($V2,[2,308],{6:[2,310]}),o($Vq1,[2,313],{102:360,120:361,121:[1,362]}),o($Vq1,[2,47]),o($Vq1,[2,63]),o($Vq1,[2,64]),{13:$V9,16:$Va,55:363,307:43,308:$Vc},o($Vq1,[2,336]),o($Vq1,[2,337]),o($Vq1,[2,338]),{109:[1,364]},o($VV1,[2,60]),{13:$V9,16:$Va,55:365,307:43,308:$Vc},o($Vp,[2,335]),{13:$V9,16:$Va,55:366,307:43,308:$Vc},{31:[1,367]},o($VW1,[2,341],{137:368}),o($VW1,[2,340]),{13:$V9,16:$Va,44:215,45:$Vf1,55:220,82:$Vy,87:$Vb,89:$Vg1,145:369,172:221,185:213,187:214,231:$Vh1,236:216,237:222,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:217,312:$Vk1},{28:[1,370],127:371,128:[1,372]},o($Vt1,[2,330],{124:373,125:374,126:$Vt}),o($Vt1,[2,57]),{44:375,87:$Vb},o($Vu1,[2,151],{241:376,242:[1,377]}),o($Vv1,[2,153],{245:378,246:[1,379]}),{13:$V9,16:$Va,44:136,45:$Vx,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,247:380,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{250:[1,381]},o($VX1,[2,432]),o($VX1,[2,433]),o($VX1,[2,434]),o($VX1,[2,435]),o($VX1,[2,436]),o($VX1,[2,437]),{250:[2,439]},o([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW}),o($Vx1,[2,162],{261:388,262:389,39:$VY1,338:$VZ1}),o($Vy1,[2,164]),o($Vy1,[2,165]),o($Vy1,[2,166]),o($VB1,[2,95]),o($VB1,[2,96]),o($VX1,[2,377],{177:392,325:[1,393]}),{48:[1,394]},o($VB1,[2,177]),{13:$V9,16:$Va,44:136,45:$Vx,46:395,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{13:$V9,16:$Va,44:136,45:$Vx,46:396,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{13:$V9,16:$Va,44:136,45:$Vx,46:397,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{13:$V9,16:$Va,44:136,45:$Vx,46:398,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{13:$V9,16:$Va,44:136,45:$Vx,46:399,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($VB1,[2,183]),o($VB1,[2,98]),o($VX1,[2,381],{180:400}),{87:[1,401]},o($VB1,[2,185]),{13:$V9,16:$Va,44:136,45:$Vx,46:402,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{29:$Vb1,57:403},o($VE1,[2,193]),{13:$V9,16:$Va,55:404,307:43,308:$Vc},{13:$V9,16:$Va,44:39,55:40,87:$Vb,139:342,195:405,197:$VR1,307:43,308:$Vc},o($V_1,[2,233]),o($V_1,[2,234]),o($V_1,[2,235]),o($V$1,[2,459],{281:406,325:[1,407]}),o($VX1,[2,463],{284:408,325:[1,409]}),o($VX1,[2,465],{286:410,325:[1,411]}),{13:$V9,16:$Va,31:[1,412],55:414,82:$Vy,171:413,172:415,173:416,174:$V02,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V12},{31:[1,419],89:[1,420]},{29:[1,421]},o($VJ1,[2,302]),o($VH1,[2,367],{167:422}),o($VI1,[2,369],{168:423}),{48:[1,424],87:[1,425]},o($VJ1,[2,371]),o($VK1,[2,122]),o($VK1,[2,417]),o($VK1,[2,413]),o($VK1,[2,414]),o($VK1,[2,415]),o($VL1,[2,125]),o($VL1,[2,127]),o($VL1,[2,128]),o($V22,[2,420],{227:426}),o($VL1,[2,130]),{13:$V9,16:$Va,55:194,197:$V71,223:427,307:43,308:$Vc},{48:[1,428]},o($V32,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),o($VO1,[2,288]),{64:[1,433]},o($V81,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:$V9,16:$Va,45:$Vx,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,276:$VI,277:$VJ,279:$VK,280:$VL,283:$VM,285:$VN,308:$Vc,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51}),o($V42,[2,293]),o($V52,[2,92]),o($V52,[2,93]),o($V52,[2,94]),{45:$Vz1,89:$VA1,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:$Vh,29:$Vi,56:85},{19:438,28:$Vh,29:$Vi,56:85},o($V62,[2,355],{149:439}),o($V62,[2,354]),{13:$V9,16:$Va,44:215,45:$V72,55:220,82:$Vy,87:$Vb,89:$Vg1,156:440,172:221,185:441,203:442,231:$V82,236:216,237:222,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:217,312:$Vk1},o($Vl,[2,19]),o($V32,[2,21]),{13:$V9,16:$Va,44:450,45:$V92,55:323,65:445,66:446,67:447,68:448,87:$Vb,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,307:43,308:$Vc,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($VN1,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},o($Vk,[2,386],{31:[2,388]}),o($VS1,[2,102]),o($Va2,[2,391],{191:452}),o($Vk,[2,395],{196:453,198:454}),o($Vk,[2,108]),o($Vk,[2,109]),o($VS1,[2,103]),o($VS1,[2,104]),o($VS1,[2,390]),{13:$V9,16:$Va,44:215,45:$Vf1,48:[1,455],55:220,82:$Vy,87:$Vb,89:$Vg1,172:221,185:351,187:350,200:456,231:$Vh1,234:349,236:216,237:222,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:217,312:$Vk1},o($Vb2,[2,424]),o($Vc2,[2,136]),o($Vc2,[2,137]),o($Vd2,[2,140]),{232:[1,457]},{13:$V9,16:$Va,44:39,55:40,87:$Vb,139:342,195:458,197:$VR1,307:43,308:$Vc},o($V_1,[2,219]),o($V_1,[2,220]),o($V_1,[2,221]),o($V_1,[2,222]),o($V_1,[2,223]),o($VN1,[2,10]),o($Vq1,[2,46]),o($Vq1,[2,314]),{112:$Vm1,122:459},o($Vq1,[2,62]),o($Vp,$Vn1,{133:242,108:460,112:$Vo1,132:$Vp1}),o($VV1,[2,61]),o($Vq1,[2,49]),o([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},o($VW1,[2,351],{146:463,335:[1,464]}),{29:$Vb1,57:465},o($Vt1,[2,329]),o($Vp,[2,332],{129:466,327:[1,467]}),o($Vt1,[2,55]),o($Vt1,[2,331]),{48:[1,468]},o($Vv1,[2,429]),{13:$V9,16:$Va,44:136,45:$Vx,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($Vw1,[2,431]),{13:$V9,16:$Va,44:136,45:$Vx,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,243:470,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($Vw1,[2,156]),{45:$VC1,89:$VD1,179:471},o($Vx1,[2,441]),{13:$V9,16:$Va,44:136,45:$Vx,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,251:472,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($Vy1,[2,444],{256:473}),o($Vy1,[2,446],{258:474}),o($VX1,[2,442]),o($VX1,[2,443]),o($Vy1,[2,449]),{13:$V9,16:$Va,44:136,45:$Vx,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,255:154,257:155,259:475,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($VX1,[2,450]),o($VX1,[2,451]),o($VX1,[2,379],{178:476}),o($VX1,[2,378]),o([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:$V9,16:$Va,44:136,45:$Vx,46:482,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{48:[1,483]},{48:[1,484]},o($VB1,[2,187]),o($VE1,[2,194]),{13:$V9,16:$Va,44:39,55:40,82:$Vy,87:$Vb,139:289,172:291,255:154,257:155,266:290,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,320:485},{13:$V9,16:$Va,39:[1,487],44:136,45:$Vx,46:488,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,282:486,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($V$1,[2,460]),{13:$V9,16:$Va,44:136,45:$Vx,46:489,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($VX1,[2,464]),{13:$V9,16:$Va,44:136,45:$Vx,46:490,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($VX1,[2,466]),o($V61,[2,40]),o($VH1,[2,298]),o($Ve2,[2,87]),o($Ve2,[2,88]),o($Ve2,[2,89]),o($Ve2,[2,90]),{13:$V9,16:$Va,55:492,82:$Vy,172:493,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,311:494,312:$Vk1,315:491},o($V61,[2,41]),o($VI1,[2,300]),o($Vf2,[2,303],{92:495}),{13:$V9,16:$Va,31:[1,496],55:414,82:$Vy,171:497,172:415,173:416,174:$V02,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V12},{31:[1,498],89:[1,499]},{29:[1,500]},o($VJ1,[2,372]),{13:$V9,16:$Va,48:[2,422],55:194,197:$V71,223:312,226:502,228:501,229:$VM1,307:43,308:$Vc},o($VL1,[2,131]),o($VL1,[2,126]),o($V32,[2,22]),o($V32,[2,290]),{82:[1,503]},{82:[1,504]},{13:$V9,16:$Va,44:510,45:$Vx,55:323,67:321,68:322,74:505,75:506,76:$Vg2,77:320,78:$Vh2,79:509,87:$Vb,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,307:43,308:$Vc,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($V42,[2,294]),o($Vi2,[2,69]),o($Vi2,[2,70]),o($V81,$V91,{59:197,69:198,20:511,70:$Va1}),o($Vc1,$Vd1,{58:205,62:206,23:512,63:$Ve1}),{29:[2,375],31:[2,71],84:522,85:$V5,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},o($V62,[2,363],{157:524,335:[1,525]}),o($V6,$V3,{215:10,202:526,205:527,208:528,214:529,44:530,87:$Vb}),o($Vj2,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:$V3,16:$V3,45:$V3,197:$V3,224:$V3,229:$V3,308:$V3,87:$Vb}),{13:$V9,16:$Va,44:215,45:$V72,55:220,82:$Vy,87:$Vb,89:$Vg1,172:221,185:351,203:536,212:534,231:$V82,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:217,312:$Vk1},o($V6,$V3,{215:10,205:527,208:528,214:529,44:530,202:537,87:$Vb}),o($Vc1,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:$V9,16:$Va,45:$V92,87:$Vb,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,276:$VI,277:$VJ,279:$VK,280:$VL,283:$VM,285:$VN,308:$Vc,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51}),o($Vk2,[2,291]),o($Vk2,[2,24]),o($Vk2,[2,25]),{13:$V9,16:$Va,44:136,45:$Vx,46:539,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($Vk2,[2,28]),o($Vc1,$Vd1,{58:205,62:206,23:540,63:$Ve1}),o([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),o($Va2,[2,107]),{13:$V9,16:$Va,44:215,45:$Vf1,55:220,82:$Vy,87:$Vb,89:$Vg1,172:221,185:351,187:350,199:543,200:544,231:$Vh1,234:349,236:216,237:222,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:217,312:$Vk1},o($Vl2,[2,132]),o($Vb2,[2,425]),o($Vl2,[2,133]),{13:$V9,16:$Va,44:354,55:355,82:$Vy,87:$Vb,172:357,237:356,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:358,312:$Vk1,313:545},o($Vq1,[2,54]),o($Vq1,[2,48]),o($VW1,[2,342]),{13:$V9,16:$Va,44:39,55:40,87:$Vb,139:546,307:43,308:$Vc},o($VW1,[2,68]),o($Vk,[2,350],{31:$Vm2,112:$Vm2}),o($Vq1,[2,53]),{13:$V9,16:$Va,55:547,307:43,308:$Vc},o($Vp,[2,333]),o($Vw,[2,16]),o($Vv1,[2,152]),o($Vw1,[2,154]),o($Vw1,[2,157]),o($Vx1,[2,159]),o($Vx1,[2,160],{262:389,261:548,39:$VY1,338:$VZ1}),o($Vx1,[2,161],{262:389,261:549,39:$VY1,338:$VZ1}),o($Vy1,[2,163]),{13:$V9,16:$Va,44:136,45:$Vx,46:550,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($VB1,[2,178]),o($VB1,[2,179]),{13:$V9,16:$Va,44:136,45:$Vx,46:551,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{13:$V9,16:$Va,44:136,45:$Vx,46:552,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{13:$V9,16:$Va,44:136,45:$Vx,46:553,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{48:[1,554],272:[1,555]},o($VB1,[2,184]),o($VB1,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:$V9,16:$Va,55:194,197:$V71,223:562,307:43,308:$Vc},o($Vn2,[2,224]),o($Vn2,[2,225]),o($Vn2,[2,226]),{31:[1,563],45:$Vo2,94:564},o($V61,[2,84]),o($VH1,[2,368]),o($V61,[2,85]),o($VI1,[2,370]),o($Vf2,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},o($V32,[2,35],{83:[1,569]}),o($V32,[2,36],{81:[1,570]}),o($VO1,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:$V9,16:$Va,45:$Vx,76:$Vg2,78:$Vh2,87:$Vb,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,276:$VI,277:$VJ,279:$VK,280:$VL,283:$VM,285:$VN,308:$Vc,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51}),o($Vp2,[2,295]),{45:$Vx,77:572},{45:$Vx,77:573},o($Vp2,[2,33]),o($Vp2,[2,34]),{31:[2,275],50:574,84:575,85:$V5},{31:[2,277],51:576,84:577,85:$V5},o($V62,[2,356]),o($Vq2,[2,357],{152:578,335:[1,579]}),o($Vr2,[2,74]),{29:$Vb1,57:580},{29:$Vb1,57:581},{13:$V9,16:$Va,44:39,55:40,87:$Vb,139:582,307:43,308:$Vc},o($Vs2,[2,365],{162:583,328:[1,584]}),{13:$V9,16:$Va,45:$Vx,55:323,67:321,68:322,77:320,79:585,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,307:43,308:$Vc,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{45:[1,586]},o($Vr2,[2,81]),{29:$Vb1,57:587},o($V62,[2,73]),o($Vk,[2,362],{29:$Vt2,31:$Vt2,85:$Vt2,112:$Vt2,159:$Vt2,160:$Vt2,161:$Vt2,163:$Vt2,164:$Vt2}),o($Vj2,[2,112]),o($Vu2,[2,401],{206:588}),o($Vk,[2,405],{209:589,210:590}),o($Vk,[2,403]),o($Vk,[2,404]),o($Vj2,[2,113]),o($Vj2,[2,400]),{13:$V9,16:$Va,44:215,45:$V72,48:[1,591],55:220,82:$Vy,87:$Vb,89:$Vg1,172:221,185:351,203:536,212:592,231:$V82,234:535,236:216,237:222,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:217,312:$Vk1},o($Vb2,[2,426]),o($Vd2,[2,138]),o($Vd2,[2,139]),{232:[1,593]},o($Vk2,[2,292]),{47:[1,595],48:[1,594]},o($VN1,[2,9]),o($Va2,[2,392]),o($Va2,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:$V9,16:$Va,87:$Vb,197:$VR1,308:$Vc}),o($Va2,[2,110],{272:[1,598]}),o($Vv2,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},o($Vt1,[2,58]),o($Vy1,[2,445]),o($Vy1,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},o($VB1,[2,99]),o($VX1,[2,382]),o([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),o($VB1,[2,188]),o($VB1,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:$V9,16:$Va,55:492,82:$Vy,172:493,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,311:494,312:$Vk1,315:611},o($V61,[2,42]),o($Vf2,[2,304]),{13:$V9,16:$Va,55:414,82:$Vy,95:612,171:613,172:415,173:416,174:$V02,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V12},{31:[1,614],45:$Vo2,94:615},o($VL1,[2,129]),o($V22,[2,421]),{82:[1,616]},{82:[1,617]},o($Vp2,[2,296]),o($Vp2,[2,31]),o($Vp2,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},o($Vk,$VP1,{155:330,153:618,154:619,29:$Vw2,31:$Vw2,85:$Vw2,112:$Vw2,159:$Vw2,160:$Vw2,161:$Vw2,163:$Vw2,164:$Vw2}),o($Vq2,[2,358]),o($Vr2,[2,75]),o($Vr2,[2,76]),{29:$Vb1,57:620},{13:$V9,16:$Va,44:39,55:40,87:$Vb,139:621,307:43,308:$Vc},o($Vs2,[2,366]),o($Vr2,[2,79]),{13:$V9,16:$Va,44:136,45:$Vx,46:622,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($Vr2,[2,91],{336:[1,623]}),o([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),o($Vu2,[2,117]),{13:$V9,16:$Va,44:215,45:$V72,55:220,82:$Vy,87:$Vb,89:$Vg1,172:221,185:351,203:536,211:626,212:627,231:$V82,234:535,236:216,237:222,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,309:$Vi1,310:$Vj1,311:217,312:$Vk1},o($VT1,[2,134]),o($Vb2,[2,427]),o($VT1,[2,135]),o($Vk2,[2,26]),{44:628,87:$Vb},o($Va2,[2,106]),o($Va2,[2,394]),o($Vk,[2,396]),o($Vv2,[2,111]),o($Vv2,[2,398]),{13:$V9,16:$Va,44:39,55:40,87:$Vb,139:342,186:629,190:340,195:341,197:$VR1,307:43,308:$Vc},o($VU1,[2,217]),o($Vk,$Vr1,{144:248,140:630,143:631,31:[2,343]}),o($VB1,[2,97]),o($VX1,[2,380]),o($VB1,[2,180]),{13:$V9,16:$Va,44:136,45:$Vx,46:632,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},{13:$V9,16:$Va,44:136,45:$Vx,46:633,55:133,67:132,68:134,77:131,82:$Vy,87:$Vb,172:135,224:$Vz,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:$VA,264:130,265:$VB,266:137,267:139,268:$VC,269:$VD,270:$VE,271:$VF,273:$VG,274:$VH,275:146,276:$VI,277:$VJ,278:149,279:$VK,280:$VL,283:$VM,285:$VN,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V$,346:$V01,347:$V11,348:$V21,349:$V31,350:$V41,351:$V51},o($VB1,[2,190]),{290:[1,634]},{314:[1,635]},{13:$V9,16:$Va,48:[1,636],55:414,82:$Vy,171:637,172:415,173:416,174:$V02,255:154,257:155,291:150,294:$VO,295:$VP,296:$VQ,297:$VR,298:$VS,299:$VT,300:$VU,301:$VV,302:$VW,303:$VX,304:$VY,305:$VZ,306:$V_,307:43,308:$Vc,312:$V12},o($Vx2,[2,305]),o($V61,[2,86]),o($Vf2,[2,374]),o($V32,[2,37]),o($V32,[2,38]),o($V62,[2,72]),o($V62,[2,360]),o($Vr2,[2,77]),{29:$Vb1,57:638},{47:[1,639]},{29:[2,376]},o($Vu2,[2,402]),o($Vu2,[2,115],{215:10,208:528,214:529,44:530,205:640,13:$V3,16:$V3,45:$V3,197:$V3,224:$V3,229:$V3,308:$V3,87:$Vb}),o($Vu2,[2,118],{272:[1,641]}),o($Vy2,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:$VX,304:$VY,305:$VZ,306:$V_},o($Ve2,[2,218]),o($Vf2,[2,44]),o($Vx2,[2,306]),o($Vr2,[2,78]),{44:651,87:$Vb},o($Vu2,[2,116]),o($Vk,[2,406]),o($Vy2,[2,119]),o($Vy2,[2,408]),o($V6,$V3,{215:10,205:527,208:528,214:529,44:530,202:652,87:$Vb}),o($Vk2,[2,27]),o($Vv2,[2,230]),o($Vz2,[2,345],{141:653,335:[1,654]}),o($VB1,[2,181]),o($VB1,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},o($Vk,$Vr1,{144:248,142:657,143:658,31:$VA2,112:$VA2}),o($Vz2,[2,346]),o($Vr2,[2,80]),o($Vy2,[2,231]),o($VW1,[2,67]),o($VW1,[2,348])],\ndefaultActions: {5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},\nparseError: function parseError (str, hash) {\n    if (hash.recoverable) {\n        this.trace(str);\n    } else {\n        var error = new Error(str);\n        error.hash = hash;\n        throw error;\n    }\n},\nparse: function parse(input) {\n    var self = this, stack = [0], tstack = [], vstack = [null], lstack = [], table = this.table, yytext = '', yylineno = 0, yyleng = 0, recovering = 0, TERROR = 2, EOF = 1;\n    var args = lstack.slice.call(arguments, 1);\n    var lexer = Object.create(this.lexer);\n    var sharedState = { yy: {} };\n    for (var k in this.yy) {\n        if (Object.prototype.hasOwnProperty.call(this.yy, k)) {\n            sharedState.yy[k] = this.yy[k];\n        }\n    }\n    lexer.setInput(input, sharedState.yy);\n    sharedState.yy.lexer = lexer;\n    sharedState.yy.parser = this;\n    if (typeof lexer.yylloc == 'undefined') {\n        lexer.yylloc = {};\n    }\n    var yyloc = lexer.yylloc;\n    lstack.push(yyloc);\n    var ranges = lexer.options && lexer.options.ranges;\n    if (typeof sharedState.yy.parseError === 'function') {\n        this.parseError = sharedState.yy.parseError;\n    } else {\n        this.parseError = Object.getPrototypeOf(this).parseError;\n    }\n    function popStack(n) {\n        stack.length = stack.length - 2 * n;\n        vstack.length = vstack.length - n;\n        lstack.length = lstack.length - n;\n    }\n    _token_stack:\n        var lex = function () {\n            var token;\n            token = lexer.lex() || EOF;\n            if (typeof token !== 'number') {\n                token = self.symbols_[token] || token;\n            }\n            return token;\n        };\n    var symbol, preErrorSymbol, state, action, a, r, yyval = {}, p, len, newState, expected;\n    while (true) {\n        state = stack[stack.length - 1];\n        if (this.defaultActions[state]) {\n            action = this.defaultActions[state];\n        } else {\n            if (symbol === null || typeof symbol == 'undefined') {\n                symbol = lex();\n            }\n            action = table[state] && table[state][symbol];\n        }\n                    if (typeof action === 'undefined' || !action.length || !action[0]) {\n                var errStr = '';\n                expected = [];\n                for (p in table[state]) {\n                    if (this.terminals_[p] && p > TERROR) {\n                        expected.push('\\'' + this.terminals_[p] + '\\'');\n                    }\n                }\n                if (lexer.showPosition) {\n                    errStr = 'Parse error on line ' + (yylineno + 1) + ':\\n' + lexer.showPosition() + '\\nExpecting ' + expected.join(', ') + ', got \\'' + (this.terminals_[symbol] || symbol) + '\\'';\n                } else {\n                    errStr = 'Parse error on line ' + (yylineno + 1) + ': Unexpected ' + (symbol == EOF ? 'end of input' : '\\'' + (this.terminals_[symbol] || symbol) + '\\'');\n                }\n                this.parseError(errStr, {\n                    text: lexer.match,\n                    token: this.terminals_[symbol] || symbol,\n                    line: lexer.yylineno,\n                    loc: yyloc,\n                    expected: expected\n                });\n            }\n        if (action[0] instanceof Array && action.length > 1) {\n            throw new Error('Parse Error: multiple actions possible at state: ' + state + ', token: ' + symbol);\n        }\n        switch (action[0]) {\n        case 1:\n            stack.push(symbol);\n            vstack.push(lexer.yytext);\n            lstack.push(lexer.yylloc);\n            stack.push(action[1]);\n            symbol = null;\n            if (!preErrorSymbol) {\n                yyleng = lexer.yyleng;\n                yytext = lexer.yytext;\n                yylineno = lexer.yylineno;\n                yyloc = lexer.yylloc;\n                if (recovering > 0) {\n                    recovering--;\n                }\n            } else {\n                symbol = preErrorSymbol;\n                preErrorSymbol = null;\n            }\n            break;\n        case 2:\n            len = this.productions_[action[1]][1];\n            yyval.$ = vstack[vstack.length - len];\n            yyval._$ = {\n                first_line: lstack[lstack.length - (len || 1)].first_line,\n                last_line: lstack[lstack.length - 1].last_line,\n                first_column: lstack[lstack.length - (len || 1)].first_column,\n                last_column: lstack[lstack.length - 1].last_column\n            };\n            if (ranges) {\n                yyval._$.range = [\n                    lstack[lstack.length - (len || 1)].range[0],\n                    lstack[lstack.length - 1].range[1]\n                ];\n            }\n            r = this.performAction.apply(yyval, [\n                yytext,\n                yyleng,\n                yylineno,\n                sharedState.yy,\n                action[1],\n                vstack,\n                lstack\n            ].concat(args));\n            if (typeof r !== 'undefined') {\n                return r;\n            }\n            if (len) {\n                stack = stack.slice(0, -1 * len * 2);\n                vstack = vstack.slice(0, -1 * len);\n                lstack = lstack.slice(0, -1 * len);\n            }\n            stack.push(this.productions_[action[1]][0]);\n            vstack.push(yyval.$);\n            lstack.push(yyval._$);\n            newState = table[stack[stack.length - 2]][stack[stack.length - 1]];\n            stack.push(newState);\n            break;\n        case 3:\n            return true;\n        }\n    }\n    return true;\n}};\n\n  /*\n    SPARQL parser in the Jison parser generator format.\n  */\n\n  var Wildcard = require('./Wildcard').Wildcard;\n\n  // Common namespaces and entities\n  var RDF = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n      RDF_TYPE  = RDF + 'type',\n      RDF_FIRST = RDF + 'first',\n      RDF_REST  = RDF + 'rest',\n      RDF_NIL   = RDF + 'nil',\n      XSD = 'http://www.w3.org/2001/XMLSchema#',\n      XSD_INTEGER  = XSD + 'integer',\n      XSD_DECIMAL  = XSD + 'decimal',\n      XSD_DOUBLE   = XSD + 'double',\n      XSD_BOOLEAN  = XSD + 'boolean';\n\n  var base = '', basePath = '', baseRoot = '';\n\n  // Returns a lowercase version of the given string\n  function lowercase(string) {\n    return string.toLowerCase();\n  }\n\n  // Appends the item to the array and returns the array\n  function appendTo(array, item) {\n    return array.push(item), array;\n  }\n\n  // Appends the items to the array and returns the array\n  function appendAllTo(array, items) {\n    return array.push.apply(array, items), array;\n  }\n\n  // Extends a base object with properties of other objects\n  function extend(base) {\n    if (!base) base = {};\n    for (var i = 1, l = arguments.length, arg; i < l && (arg = arguments[i] || {}); i++)\n      for (var name in arg)\n        base[name] = arg[name];\n    return base;\n  }\n\n  // Creates an array that contains all items of the given arrays\n  function unionAll() {\n    var union = [];\n    for (var i = 0, l = arguments.length; i < l; i++)\n      union = union.concat.apply(union, arguments[i]);\n    return union;\n  }\n\n  // Resolves an IRI against a base path\n  function resolveIRI(iri) {\n    // Strip off possible angular brackets\n    if (iri[0] === '<')\n      iri = iri.substring(1, iri.length - 1);\n    // Return absolute IRIs unmodified\n    if (/^[a-z]+:/i.test(iri))\n      return iri;\n    if (!Parser.base)\n      throw new Error('Cannot resolve relative IRI ' + iri + ' because no base IRI was set.');\n    if (base !== Parser.base) {\n      base = Parser.base;\n      basePath = base.replace(/[^\\/:]*$/, '');\n      baseRoot = base.match(/^(?:[a-z]+:\\/*)?[^\\/]*/)[0];\n    }\n    switch (iri[0]) {\n    // An empty relative IRI indicates the base IRI\n    case undefined:\n      return base;\n    // Resolve relative fragment IRIs against the base IRI\n    case '#':\n      return base + iri;\n    // Resolve relative query string IRIs by replacing the query string\n    case '?':\n      return base.replace(/(?:\\?.*)?$/, iri);\n    // Resolve root relative IRIs at the root of the base IRI\n    case '/':\n      return baseRoot + iri;\n    // Resolve all other IRIs at the base IRI's path\n    default:\n      return basePath + iri;\n    }\n  }\n\n  // If the item is a variable, ensures it starts with a question mark\n  function toVar(variable) {\n    if (variable) {\n      var first = variable[0];\n      if (first === '?' || first === '$') return Parser.factory.variable(variable.substr(1));\n    }\n    return variable;\n  }\n\n  // Creates an operation with the given name and arguments\n  function operation(operatorName, args) {\n    return { type: 'operation', operator: operatorName, args: args || [] };\n  }\n\n  // Creates an expression with the given type and attributes\n  function expression(expr, attr) {\n    var expression = { expression: expr === '*'? new Wildcard() : expr };\n    if (attr)\n      for (var a in attr)\n        expression[a] = attr[a];\n    return expression;\n  }\n\n  // Creates a path with the given type and items\n  function path(type, items) {\n    return { type: 'path', pathType: type, items: items };\n  }\n\n  // Transforms a list of operations types and arguments into a tree of operations\n  function createOperationTree(initialExpression, operationList) {\n    for (var i = 0, l = operationList.length, item; i < l && (item = operationList[i]); i++)\n      initialExpression = operation(item[0], [initialExpression, item[1]]);\n    return initialExpression;\n  }\n\n  // Group datasets by default and named\n  function groupDatasets(fromClauses, groupName) {\n    var defaults = [], named = [], l = fromClauses.length, fromClause, group = {};\n    if (!l)\n      return null;\n    for (var i = 0; i < l && (fromClause = fromClauses[i]); i++)\n      (fromClause.named ? named : defaults).push(fromClause.iri);\n    group[groupName || 'from'] = { default: defaults, named: named };\n    return group;\n  }\n\n  // Converts the string to a number\n  function toInt(string) {\n    return parseInt(string, 10);\n  }\n\n  // Transforms a possibly single group into its patterns\n  function degroupSingle(group) {\n    return group.type === 'group' && group.patterns.length === 1 ? group.patterns[0] : group;\n  }\n\n  // Creates a literal with the given value and type\n  function createTypedLiteral(value, type) {\n    if (type && type.termType !== 'NamedNode'){\n      type = Parser.factory.namedNode(type);\n    }\n    return Parser.factory.literal(value, type);\n  }\n\n  // Creates a literal with the given value and language\n  function createLangLiteral(value, lang) {\n    return Parser.factory.literal(value, lang);\n  }\n\n  function nestedTriple(subject, predicate, object) {\n\n    // TODO: Remove this when it is caught by the grammar\n    if (!('termType' in predicate)) {\n      throw new Error('Nested triples cannot contain paths');\n    }\n\n    return Parser.factory.quad(subject, predicate, object);\n  }\n\n  // Creates a triple with the given subject, predicate, and object\n  function triple(subject, predicate, object, annotations) {\n    var triple = {};\n    if (subject     != null) triple.subject     = subject;\n    if (predicate   != null) triple.predicate   = predicate;\n    if (object      != null) triple.object      = object;\n    if (annotations != null) triple.annotations = annotations;\n    return triple;\n  }\n\n  // Creates a new blank node\n  function blank(name) {\n    if (typeof name === 'string') {  // Only use name if a name is given\n      if (name.startsWith('e_')) return Parser.factory.blankNode(name);\n      return Parser.factory.blankNode('e_' + name);\n    }\n    return Parser.factory.blankNode('g_' + blankId++);\n  };\n  var blankId = 0;\n  Parser._resetBlanks = function () { blankId = 0; }\n\n  // Regular expression and replacement strings to escape strings\n  var escapeSequence = /\\\\u([a-fA-F0-9]{4})|\\\\U([a-fA-F0-9]{8})|\\\\(.)/g,\n      escapeReplacements = { '\\\\': '\\\\', \"'\": \"'\", '\"': '\"',\n                             't': '\\t', 'b': '\\b', 'n': '\\n', 'r': '\\r', 'f': '\\f' },\n      partialSurrogatesWithoutEndpoint = /[\\uD800-\\uDBFF]([^\\uDC00-\\uDFFF]|$)/,\n      fromCharCode = String.fromCharCode;\n\n  // Translates escape codes in the string into their textual equivalent\n  function unescapeString(string, trimLength) {\n    string = string.substring(trimLength, string.length - trimLength);\n    try {\n      string = string.replace(escapeSequence, function (sequence, unicode4, unicode8, escapedChar) {\n        var charCode;\n        if (unicode4) {\n          charCode = parseInt(unicode4, 16);\n          if (isNaN(charCode)) throw new Error(); // can never happen (regex), but helps performance\n          return fromCharCode(charCode);\n        }\n        else if (unicode8) {\n          charCode = parseInt(unicode8, 16);\n          if (isNaN(charCode)) throw new Error(); // can never happen (regex), but helps performance\n          if (charCode < 0xFFFF) return fromCharCode(charCode);\n          return fromCharCode(0xD800 + ((charCode -= 0x10000) >> 10), 0xDC00 + (charCode & 0x3FF));\n        }\n        else {\n          var replacement = escapeReplacements[escapedChar];\n          if (!replacement) throw new Error();\n          return replacement;\n        }\n      });\n    }\n    catch (error) { return ''; }\n\n    // Test for invalid unicode surrogate pairs\n    if (partialSurrogatesWithoutEndpoint.exec(string)) {\n      throw new Error('Invalid unicode codepoint of surrogate pair without corresponding codepoint in ' + string);\n    }\n\n    return string;\n  }\n\n  // Creates a list, collecting its (possibly blank) items and triples associated with those items\n  function createList(objects) {\n    var list = blank(), head = list, listItems = [], listTriples, triples = [];\n    objects.forEach(function (o) { listItems.push(o.entity); appendAllTo(triples, o.triples); });\n\n    // Build an RDF list out of the items\n    for (var i = 0, j = 0, l = listItems.length, listTriples = Array(l * 2); i < l;)\n      listTriples[j++] = triple(head, Parser.factory.namedNode(RDF_FIRST), listItems[i]),\n      listTriples[j++] = triple(head, Parser.factory.namedNode(RDF_REST),  head = ++i < l ? blank() : Parser.factory.namedNode(RDF_NIL));\n\n    // Return the list's identifier, its triples, and the triples associated with its items\n    return { entity: list, triples: appendAllTo(listTriples, triples) };\n  }\n\n  // Creates a blank node identifier, collecting triples with that blank node as subject\n  function createAnonymousObject(propertyList) {\n    var entity = blank();\n    return {\n      entity: entity,\n      triples: propertyList.map(function (t) { return extend(triple(entity), t); })\n    };\n  }\n\n  // Collects all (possibly blank) objects, and triples that have them as subject\n  function objectListToTriples(predicate, objectList, otherTriples) {\n    var objects = [], triples = [];\n    objectList.forEach(function (l) {\n      let annotation = null;\n      if (l.annotation) {\n        annotation = l.annotation\n        l = l.object;\n      }\n      objects.push(triple(null, predicate, l.entity, annotation));\n      appendAllTo(triples, l.triples);\n    });\n    return unionAll(objects, otherTriples || [], triples);\n  }\n\n  // Simplifies groups by merging adjacent BGPs\n  function mergeAdjacentBGPs(groups) {\n    var merged = [], currentBgp;\n    for (var i = 0, group; group = groups[i]; i++) {\n      switch (group.type) {\n        // Add a BGP's triples to the current BGP\n        case 'bgp':\n          if (group.triples.length) {\n            if (!currentBgp)\n              appendTo(merged, currentBgp = group);\n            else\n              appendAllTo(currentBgp.triples, group.triples);\n          }\n          break;\n        // All other groups break up a BGP\n        default:\n          // Only add the group if its pattern is non-empty\n          if (!group.patterns || group.patterns.length > 0) {\n            appendTo(merged, group);\n            currentBgp = null;\n          }\n      }\n    }\n    return merged;\n  }\n\n  // Return the id of an expression\n  function getExpressionId(expression) {\n    return expression.variable ? expression.variable.value : expression.value || expression.expression.value;\n  }\n\n  // Get all \"aggregate\"'s from an expression\n  function getAggregatesOfExpression(expression) {\n    if (!expression) {\n      return [];\n    }\n    if (expression.type === 'aggregate') {\n      return [expression];\n    } else if (expression.type === \"operation\") {\n      const aggregates = [];\n      for (const arg of expression.args) {\n        aggregates.push(...getAggregatesOfExpression(arg));\n      }\n      return aggregates;\n    }\n    return [];\n  }\n\n  // Get all variables used in an expression\n  function getVariablesFromExpression(expression) {\n    const variables = new Set();\n    const visitExpression = function (expr) {\n      if (!expr) { return; }\n      if (expr.termType === \"Variable\") {\n        variables.add(expr);\n      } else if (expr.type === \"operation\") {\n        expr.args.forEach(visitExpression);\n      }\n    };\n    visitExpression(expression);\n    return variables;\n  }\n\n  // Helper function to flatten arrays\n  function flatten(input, depth = 1, stack = []) {\n    for (const item of input) {\n        if (depth > 0 && item instanceof Array) {\n          flatten(item, depth - 1, stack);\n        } else {\n          stack.push(item);\n        }\n    }\n    return stack;\n  }\n\n  function isVariable(term) {\n    return term.termType === 'Variable';\n  }\n\n  function getBoundVarsFromGroupGraphPattern(pattern) {\n    if (pattern.triples) {\n      const boundVars = [];\n      for (const triple of pattern.triples) {\n        if (isVariable(triple.subject)) boundVars.push(triple.subject.value);\n        if (isVariable(triple.predicate)) boundVars.push(triple.predicate.value);\n        if (isVariable(triple.object)) boundVars.push(triple.object.value);\n      }\n      return boundVars;\n    } else if (pattern.patterns) {\n      const boundVars = [];\n      for (const pat of pattern.patterns) {\n        boundVars.push(...getBoundVarsFromGroupGraphPattern(pat));\n      }\n      return boundVars;\n    }\n    return [];\n  }\n\n  // Helper function to find duplicates in array\n  function getDuplicatesInArray(array) {\n    const sortedArray = array.slice().sort();\n    const duplicates = [];\n    for (let i = 0; i < sortedArray.length - 1; i++) {\n      if (sortedArray[i + 1] == sortedArray[i]) {\n        duplicates.push(sortedArray[i]);\n      }\n    }\n    return duplicates;\n  }\n\n  function ensureSparqlStar(value) {\n    if (!Parser.sparqlStar) {\n      throw new Error('SPARQL-star support is not enabled');\n    }\n    return value;\n  }\n\n  function _applyAnnotations(subject, annotations, arr) {\n    for (const annotation of annotations) {\n      const t = triple(\n        // If the annotation already has a subject then just push the\n        // annotation to the upper scope as it is a blank node introduced\n        // from a pattern like :s :p :o {| :p1 [ :p2 :o2; :p3 :o3 ] |}\n        'subject' in annotation ? annotation.subject : subject,\n        annotation.predicate,\n        annotation.object\n      )\n\n      arr.push(t);\n\n      if (annotation.annotations) {\n        _applyAnnotations(nestedTriple(\n        subject,\n        annotation.predicate,\n        annotation.object\n      ), annotation.annotations, arr)\n      }\n    }\n  }\n\n  function applyAnnotations(triples) {\n    if (Parser.sparqlStar) {\n      const newTriples = [];\n\n      triples.forEach(t => {\n        const s = triple(t.subject, t.predicate, t.object);\n\n        newTriples.push(s);\n\n        if (t.annotations) {\n          _applyAnnotations(nestedTriple(t.subject, t.predicate, t.object), t.annotations, newTriples);\n        }\n      });\n\n      return newTriples;\n    }\n    return triples;\n  }\n\n  function ensureSparqlStarNestedQuads(value) {\n    if (!Parser.sparqlStarNestedQuads) {\n      throw new Error('Lenient SPARQL-star support with nested quads is not enabled');\n    }\n    return value;\n  }\n\n  function ensureNoVariables(operations) {\n    for (const operation of operations) {\n      if (operation.type === 'graph' && operation.name.termType === 'Variable') {\n        throw new Error('Detected illegal variable in GRAPH');\n      }\n      if (operation.type === 'bgp' || operation.type === 'graph') {\n        for (const triple of operation.triples) {\n          if (triple.subject.termType === 'Variable' ||\n              triple.predicate.termType === 'Variable' ||\n              triple.object.termType === 'Variable') {\n            throw new Error('Detected illegal variable in BGP');\n          }\n        }\n      }\n    }\n    return operations;\n  }\n\n  function ensureNoBnodes(operations) {\n    for (const operation of operations) {\n      if (operation.type === 'bgp') {\n        for (const triple of operation.triples) {\n          if (triple.subject.termType === 'BlankNode' ||\n              triple.predicate.termType === 'BlankNode' ||\n              triple.object.termType === 'BlankNode') {\n            throw new Error('Detected illegal blank node in BGP');\n          }\n        }\n      }\n    }\n    return operations;\n  }\n/* generated by jison-lex 0.3.4 */\nvar lexer = (function(){\nvar lexer = ({\n\nEOF:1,\n\nparseError:function parseError(str, hash) {\n        if (this.yy.parser) {\n            this.yy.parser.parseError(str, hash);\n        } else {\n            throw new Error(str);\n        }\n    },\n\n// resets the lexer, sets new input\nsetInput:function (input, yy) {\n        this.yy = yy || this.yy || {};\n        this._input = input;\n        this._more = this._backtrack = this.done = false;\n        this.yylineno = this.yyleng = 0;\n        this.yytext = this.matched = this.match = '';\n        this.conditionStack = ['INITIAL'];\n        this.yylloc = {\n            first_line: 1,\n            first_column: 0,\n            last_line: 1,\n            last_column: 0\n        };\n        if (this.options.ranges) {\n            this.yylloc.range = [0,0];\n        }\n        this.offset = 0;\n        return this;\n    },\n\n// consumes and returns one char from the input\ninput:function () {\n        var ch = this._input[0];\n        this.yytext += ch;\n        this.yyleng++;\n        this.offset++;\n        this.match += ch;\n        this.matched += ch;\n        var lines = ch.match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno++;\n            this.yylloc.last_line++;\n        } else {\n            this.yylloc.last_column++;\n        }\n        if (this.options.ranges) {\n            this.yylloc.range[1]++;\n        }\n\n        this._input = this._input.slice(1);\n        return ch;\n    },\n\n// unshifts one char (or a string) into the input\nunput:function (ch) {\n        var len = ch.length;\n        var lines = ch.split(/(?:\\r\\n?|\\n)/g);\n\n        this._input = ch + this._input;\n        this.yytext = this.yytext.substr(0, this.yytext.length - len);\n        //this.yyleng -= len;\n        this.offset -= len;\n        var oldLines = this.match.split(/(?:\\r\\n?|\\n)/g);\n        this.match = this.match.substr(0, this.match.length - 1);\n        this.matched = this.matched.substr(0, this.matched.length - 1);\n\n        if (lines.length - 1) {\n            this.yylineno -= lines.length - 1;\n        }\n        var r = this.yylloc.range;\n\n        this.yylloc = {\n            first_line: this.yylloc.first_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.first_column,\n            last_column: lines ?\n                (lines.length === oldLines.length ? this.yylloc.first_column : 0)\n                 + oldLines[oldLines.length - lines.length].length - lines[0].length :\n              this.yylloc.first_column - len\n        };\n\n        if (this.options.ranges) {\n            this.yylloc.range = [r[0], r[0] + this.yyleng - len];\n        }\n        this.yyleng = this.yytext.length;\n        return this;\n    },\n\n// When called from action, caches matched text and appends it on next action\nmore:function () {\n        this._more = true;\n        return this;\n    },\n\n// When called from action, signals the lexer that this rule fails to match the input, so the next matching rule (regex) should be tested instead.\nreject:function () {\n        if (this.options.backtrack_lexer) {\n            this._backtrack = true;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n\n        }\n        return this;\n    },\n\n// retain first n characters of the match\nless:function (n) {\n        this.unput(this.match.slice(n));\n    },\n\n// displays already matched input, i.e. for error messages\npastInput:function () {\n        var past = this.matched.substr(0, this.matched.length - this.match.length);\n        return (past.length > 20 ? '...':'') + past.substr(-20).replace(/\\n/g, \"\");\n    },\n\n// displays upcoming input, i.e. for error messages\nupcomingInput:function () {\n        var next = this.match;\n        if (next.length < 20) {\n            next += this._input.substr(0, 20-next.length);\n        }\n        return (next.substr(0,20) + (next.length > 20 ? '...' : '')).replace(/\\n/g, \"\");\n    },\n\n// displays the character position where the lexing error occurred, i.e. for error messages\nshowPosition:function () {\n        var pre = this.pastInput();\n        var c = new Array(pre.length + 1).join(\"-\");\n        return pre + this.upcomingInput() + \"\\n\" + c + \"^\";\n    },\n\n// test the lexed token: return FALSE when not a match, otherwise return token\ntest_match:function(match, indexed_rule) {\n        var token,\n            lines,\n            backup;\n\n        if (this.options.backtrack_lexer) {\n            // save context\n            backup = {\n                yylineno: this.yylineno,\n                yylloc: {\n                    first_line: this.yylloc.first_line,\n                    last_line: this.last_line,\n                    first_column: this.yylloc.first_column,\n                    last_column: this.yylloc.last_column\n                },\n                yytext: this.yytext,\n                match: this.match,\n                matches: this.matches,\n                matched: this.matched,\n                yyleng: this.yyleng,\n                offset: this.offset,\n                _more: this._more,\n                _input: this._input,\n                yy: this.yy,\n                conditionStack: this.conditionStack.slice(0),\n                done: this.done\n            };\n            if (this.options.ranges) {\n                backup.yylloc.range = this.yylloc.range.slice(0);\n            }\n        }\n\n        lines = match[0].match(/(?:\\r\\n?|\\n).*/g);\n        if (lines) {\n            this.yylineno += lines.length;\n        }\n        this.yylloc = {\n            first_line: this.yylloc.last_line,\n            last_line: this.yylineno + 1,\n            first_column: this.yylloc.last_column,\n            last_column: lines ?\n                         lines[lines.length - 1].length - lines[lines.length - 1].match(/\\r?\\n?/)[0].length :\n                         this.yylloc.last_column + match[0].length\n        };\n        this.yytext += match[0];\n        this.match += match[0];\n        this.matches = match;\n        this.yyleng = this.yytext.length;\n        if (this.options.ranges) {\n            this.yylloc.range = [this.offset, this.offset += this.yyleng];\n        }\n        this._more = false;\n        this._backtrack = false;\n        this._input = this._input.slice(match[0].length);\n        this.matched += match[0];\n        token = this.performAction.call(this, this.yy, this, indexed_rule, this.conditionStack[this.conditionStack.length - 1]);\n        if (this.done && this._input) {\n            this.done = false;\n        }\n        if (token) {\n            return token;\n        } else if (this._backtrack) {\n            // recover context\n            for (var k in backup) {\n                this[k] = backup[k];\n            }\n            return false; // rule action called reject() implying the next rule should be tested instead.\n        }\n        return false;\n    },\n\n// return next match in input\nnext:function () {\n        if (this.done) {\n            return this.EOF;\n        }\n        if (!this._input) {\n            this.done = true;\n        }\n\n        var token,\n            match,\n            tempMatch,\n            index;\n        if (!this._more) {\n            this.yytext = '';\n            this.match = '';\n        }\n        var rules = this._currentRules();\n        for (var i = 0; i < rules.length; i++) {\n            tempMatch = this._input.match(this.rules[rules[i]]);\n            if (tempMatch && (!match || tempMatch[0].length > match[0].length)) {\n                match = tempMatch;\n                index = i;\n                if (this.options.backtrack_lexer) {\n                    token = this.test_match(tempMatch, rules[i]);\n                    if (token !== false) {\n                        return token;\n                    } else if (this._backtrack) {\n                        match = false;\n                        continue; // rule action called reject() implying a rule MISmatch.\n                    } else {\n                        // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n                        return false;\n                    }\n                } else if (!this.options.flex) {\n                    break;\n                }\n            }\n        }\n        if (match) {\n            token = this.test_match(match, rules[index]);\n            if (token !== false) {\n                return token;\n            }\n            // else: this is a lexer rule which consumes input without producing a token (e.g. whitespace)\n            return false;\n        }\n        if (this._input === \"\") {\n            return this.EOF;\n        } else {\n            return this.parseError('Lexical error on line ' + (this.yylineno + 1) + '. Unrecognized text.\\n' + this.showPosition(), {\n                text: \"\",\n                token: null,\n                line: this.yylineno\n            });\n        }\n    },\n\n// return next match that has a token\nlex:function lex () {\n        var r = this.next();\n        if (r) {\n            return r;\n        } else {\n            return this.lex();\n        }\n    },\n\n// activates a new lexer condition state (pushes the new lexer condition state onto the condition stack)\nbegin:function begin (condition) {\n        this.conditionStack.push(condition);\n    },\n\n// pop the previously active lexer condition state off the condition stack\npopState:function popState () {\n        var n = this.conditionStack.length - 1;\n        if (n > 0) {\n            return this.conditionStack.pop();\n        } else {\n            return this.conditionStack[0];\n        }\n    },\n\n// produce the lexer rule set which is active for the currently active lexer condition state\n_currentRules:function _currentRules () {\n        if (this.conditionStack.length && this.conditionStack[this.conditionStack.length - 1]) {\n            return this.conditions[this.conditionStack[this.conditionStack.length - 1]].rules;\n        } else {\n            return this.conditions[\"INITIAL\"].rules;\n        }\n    },\n\n// return the currently active lexer condition state; when an index argument is provided it produces the N-th previous condition state, if available\ntopState:function topState (n) {\n        n = this.conditionStack.length - 1 - Math.abs(n || 0);\n        if (n >= 0) {\n            return this.conditionStack[n];\n        } else {\n            return \"INITIAL\";\n        }\n    },\n\n// alias for begin(condition)\npushState:function pushState (condition) {\n        this.begin(condition);\n    },\n\n// return the number of states currently on the stack\nstateStackSize:function stateStackSize() {\n        return this.conditionStack.length;\n    },\noptions: {\"flex\":true,\"case-insensitive\":true},\nperformAction: function anonymous(yy,yy_,$avoiding_name_collisions,YY_START) {\nvar YYSTATE=YY_START;\nswitch($avoiding_name_collisions) {\ncase 0:/* ignore */\nbreak;\ncase 1:return 12\nbreak;\ncase 2:return 15\nbreak;\ncase 3:return 41\nbreak;\ncase 4:return 325\nbreak;\ncase 5:return 326\nbreak;\ncase 6:return 45\nbreak;\ncase 7:return 47\nbreak;\ncase 8:return 48\nbreak;\ncase 9:return 39\nbreak;\ncase 10:return 24\nbreak;\ncase 11:return 28\nbreak;\ncase 12:return 29\nbreak;\ncase 13:return 31\nbreak;\ncase 14:return 32\nbreak;\ncase 15:return 36\nbreak;\ncase 16:return 53\nbreak;\ncase 17:return 327\nbreak;\ncase 18:return 63\nbreak;\ncase 19:return 64\nbreak;\ncase 20:return 70\nbreak;\ncase 21:return 73\nbreak;\ncase 22:return 76\nbreak;\ncase 23:return 78\nbreak;\ncase 24:return 81\nbreak;\ncase 25:return 83\nbreak;\ncase 26:return 85\nbreak;\ncase 27:return 193\nbreak;\ncase 28:return 100\nbreak;\ncase 29:return 328\nbreak;\ncase 30:return 121\nbreak;\ncase 31:return 329\nbreak;\ncase 32:return 330\nbreak;\ncase 33:return 110\nbreak;\ncase 34:return 331\nbreak;\ncase 35:return 109\nbreak;\ncase 36:return 332\nbreak;\ncase 37:return 333\nbreak;\ncase 38:return 113\nbreak;\ncase 39:return 115\nbreak;\ncase 40:return 116\nbreak;\ncase 41:return 131\nbreak;\ncase 42:return 123\nbreak;\ncase 43:return 126\nbreak;\ncase 44:return 128\nbreak;\ncase 45:return 132\nbreak;\ncase 46:return 112\nbreak;\ncase 47:return 334\nbreak;\ncase 48:return 335\nbreak;\ncase 49:return 159\nbreak;\ncase 50:return 161\nbreak;\ncase 51:return 164\nbreak;\ncase 52:return 174\nbreak;\ncase 53:return 160\nbreak;\ncase 54:return 336\nbreak;\ncase 55:return 163\nbreak;\ncase 56:return 312\nbreak;\ncase 57:return 314\nbreak;\ncase 58:return 317\nbreak;\ncase 59:return 318\nbreak;\ncase 60:return 272\nbreak;\ncase 61:return 197\nbreak;\ncase 62:return 337\nbreak;\ncase 63:return 338\nbreak;\ncase 64:return 229\nbreak;\ncase 65:return 340\nbreak;\ncase 66:return 263\nbreak;\ncase 67:return 224\nbreak;\ncase 68:return 231\nbreak;\ncase 69:return 232\nbreak;\ncase 70:return 242\nbreak;\ncase 71:return 246\nbreak;\ncase 72:return 290\nbreak;\ncase 73:return 341\nbreak;\ncase 74:return 342\nbreak;\ncase 75:return 343\nbreak;\ncase 76:return 344\nbreak;\ncase 77:return 345\nbreak;\ncase 78:return 250\nbreak;\ncase 79:return 346\nbreak;\ncase 80:return 265\nbreak;\ncase 81:return 276\nbreak;\ncase 82:return 277\nbreak;\ncase 83:return 268\nbreak;\ncase 84:return 269\nbreak;\ncase 85:return 270\nbreak;\ncase 86:return 271\nbreak;\ncase 87:return 347\nbreak;\ncase 88:return 348\nbreak;\ncase 89:return 273\nbreak;\ncase 90:return 274\nbreak;\ncase 91:return 350\nbreak;\ncase 92:return 349\nbreak;\ncase 93:return 351\nbreak;\ncase 94:return 279\nbreak;\ncase 95:return 280\nbreak;\ncase 96:return 283\nbreak;\ncase 97:return 285\nbreak;\ncase 98:return 289\nbreak;\ncase 99:return 293\nbreak;\ncase 100:return 296\nbreak;\ncase 101:return 13\nbreak;\ncase 102:return 16\nbreak;\ncase 103:return 308\nbreak;\ncase 104:return 309\nbreak;\ncase 105:return 87\nbreak;\ncase 106:return 292\nbreak;\ncase 107:return 82\nbreak;\ncase 108:return 294\nbreak;\ncase 109:return 295\nbreak;\ncase 110:return 297\nbreak;\ncase 111:return 298\nbreak;\ncase 112:return 299\nbreak;\ncase 113:return 300\nbreak;\ncase 114:return 301\nbreak;\ncase 115:return 302\nbreak;\ncase 116:return 'EXPONENT'\nbreak;\ncase 117:return 303\nbreak;\ncase 118:return 304\nbreak;\ncase 119:return 305\nbreak;\ncase 120:return 306\nbreak;\ncase 121:return 89\nbreak;\ncase 122:return 310\nbreak;\ncase 123:return 6\nbreak;\ncase 124:return 'INVALID'\nbreak;\ncase 125:console.log(yy_.yytext);\nbreak;\n}\n},\nrules: [/^(?:\\s+|(#[^\\n\\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\\()/i,/^(?:AS)/i,/^(?:\\))/i,/^(?:\\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\\{)/i,/^(?:\\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\\s+|(#[^\\n\\r]*)\\n\\r?)+)DATA)/i,/^(?:DELETE((\\s+|(#[^\\n\\r]*)\\n\\r?)+)DATA)/i,/^(?:DELETE((\\s+|(#[^\\n\\r]*)\\n\\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\\{\\|)/i,/^(?:\\|\\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\\|)/i,/^(?:\\/)/i,/^(?:\\^)/i,/^(?:\\?)/i,/^(?:\\+)/i,/^(?:!)/i,/^(?:\\[)/i,/^(?:\\])/i,/^(?:\\|\\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\\^\\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\\\"\\{\\}\\|\\^`\\\\\\u0000-\\u0020])*>))/i,/^(?:((([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])(?:(?:(((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|-|[0-9]|\\u00B7|[\\u0300-\\u036F\\u203F-\\u2040])|\\.)*(((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|-|[0-9]|\\u00B7|[\\u0300-\\u036F\\u203F-\\u2040]))?)?:))/i,/^(?:(((([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])(?:(?:(((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|-|[0-9]|\\u00B7|[\\u0300-\\u036F\\u203F-\\u2040])|\\.)*(((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|-|[0-9]|\\u00B7|[\\u0300-\\u036F\\u203F-\\u2040]))?)?:)((?:((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\\\(_|~|\\.|-|!|\\$|&|'|\\(|\\)|\\*|\\+|,|;|=|\\/|\\?|#|@|%))))(?:(?:(((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|-|[0-9]|\\u00B7|[\\u0300-\\u036F\\u203F-\\u2040])|\\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\\\(_|~|\\.|-|!|\\$|&|'|\\(|\\)|\\*|\\+|,|;|=|\\/|\\?|#|@|%))))*(?:(((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|-|[0-9]|\\u00B7|[\\u0300-\\u036F\\u203F-\\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\\\(_|~|\\.|-|!|\\$|&|'|\\(|\\)|\\*|\\+|,|;|=|\\/|\\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|-|[0-9]|\\u00B7|[\\u0300-\\u036F\\u203F-\\u2040])|\\.)*(((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|-|[0-9]|\\u00B7|[\\u0300-\\u036F\\u203F-\\u2040]))?))/i,/^(?:([\\?\\$]((?:((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])|_))|[0-9]|\\u00B7|[\\u0300-\\u036F\\u203F-\\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\\.[0-9]+))/i,/^(?:([0-9]+\\.[0-9]*([eE][+-]?[0-9]+)|\\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\\+([0-9]+)))/i,/^(?:(\\+([0-9]*\\.[0-9]+)))/i,/^(?:(\\+([0-9]+\\.[0-9]*([eE][+-]?[0-9]+)|\\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\\.[0-9]+)))/i,/^(?:(-([0-9]+\\.[0-9]*([eE][+-]?[0-9]+)|\\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\\u0027\\u005C\\u000A\\u000D])|(\\\\[tbnrf\\\\\\\"']|\\\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:(\"(?:(?:[^\\u0022\\u005C\\u000A\\u000D])|(\\\\[tbnrf\\\\\\\"']|\\\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*\"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\\\]|(\\\\[tbnrf\\\\\\\"']|\\\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:(\"\"\"(?:(?:\"|\"\")?(?:[^\\\"\\\\]|(\\\\[tbnrf\\\\\\\"']|\\\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*\"\"\"))/i,/^(?:(\\((\\u0020|\\u0009|\\u000D|\\u000A)*\\)))/i,/^(?:(\\[(\\u0020|\\u0009|\\u000D|\\u000A)*\\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],\nconditions: {\"INITIAL\":{\"rules\":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],\"inclusive\":true}}\n});\nreturn lexer;\n})();\nparser.lexer = lexer;\nfunction Parser () {\n  this.yy = {};\n}\nParser.prototype = parser;parser.Parser = Parser;\nreturn new Parser;\n})();module.exports=SparqlParser\n","\n// Wildcard constructor\nclass Wildcard {\n  constructor() {\n    return WILDCARD || this;\n  }\n\n  equals(other) {\n    return other && (this.termType === other.termType);\n  }\n}\n\nObject.defineProperty(Wildcard.prototype, 'value', {\n  enumerable: true,\n  value: '*',\n});\n\nObject.defineProperty(Wildcard.prototype, 'termType', {\n  enumerable: true,\n  value: 'Wildcard',\n});\n\n\n// Wildcard singleton\nvar WILDCARD = new Wildcard();\n\nmodule.exports.Wildcard = Wildcard;\n","var Parser = require('./lib/SparqlParser').Parser;\nvar Generator = require('./lib/SparqlGenerator');\nvar Wildcard = require(\"./lib/Wildcard\").Wildcard;\nvar { DataFactory } = require('rdf-data-factory');\n\nmodule.exports = {\n  /**\n   * Creates a SPARQL parser with the given pre-defined prefixes and base IRI\n   * @param options {\n   *   prefixes?: { [prefix: string]: string },\n   *   baseIRI?: string,\n   *   factory?: import('rdf-js').DataFactory,\n   *   sparqlStar?: boolean,\n   *   skipValidation?: boolean,\n   *   skipUngroupedVariableCheck?: boolean\n   * }\n   */\n  Parser: function ({ prefixes, baseIRI, factory, sparqlStar, skipValidation, skipUngroupedVariableCheck, pathOnly } = {}) {\n\n    // Create a copy of the prefixes\n    var prefixesCopy = {};\n    for (var prefix in prefixes || {})\n      prefixesCopy[prefix] = prefixes[prefix];\n\n    // Create a new parser with the given prefixes\n    // (Workaround for https://github.com/zaach/jison/issues/241)\n    var parser = new Parser();\n    parser.parse = function () {\n      Parser.base = baseIRI || '';\n      Parser.prefixes = Object.create(prefixesCopy);\n      Parser.factory = factory || new DataFactory();\n      Parser.sparqlStar = Boolean(sparqlStar);\n      Parser.pathOnly = Boolean(pathOnly);\n      // We keep skipUngroupedVariableCheck for compatibility reasons.\n      Parser.skipValidation = Boolean(skipValidation) || Boolean(skipUngroupedVariableCheck)\n      return Parser.prototype.parse.apply(parser, arguments);\n    };\n    parser._resetBlanks = Parser._resetBlanks;\n    return parser;\n  },\n  Generator: Generator,\n  Wildcard: Wildcard,\n};\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/SparqlJsonParser\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SparqlJsonParser = void 0;\nconst rdf_data_factory_1 = require(\"rdf-data-factory\");\nconst readable_stream_1 = require(\"readable-stream\");\n// tslint:disable-next-line:no-var-requires\nconst JsonParser = require('@bergos/jsonparse');\n/**\n * Parser for the SPARQL 1.1 Query Results JSON format.\n * @see https://www.w3.org/TR/sparql11-results-json/\n */\nclass SparqlJsonParser {\n    constructor(settings) {\n        var _a;\n        settings = settings || {};\n        this.dataFactory = settings.dataFactory || new rdf_data_factory_1.DataFactory();\n        this.prefixVariableQuestionMark = !!settings.prefixVariableQuestionMark;\n        this.suppressMissingStreamResultsError = (_a = settings.suppressMissingStreamResultsError) !== null && _a !== void 0 ? _a : true;\n    }\n    /**\n     * Convert a SPARQL JSON bindings response to an array of bindings objects.\n     * @param sparqlResponse A SPARQL JSON response.\n     * @return {IBindings[]} An array of bindings.\n     */\n    parseJsonResults(sparqlResponse) {\n        return sparqlResponse.results.bindings.map((rawBindings) => this.parseJsonBindings(rawBindings));\n    }\n    /**\n     * Convert a SPARQL JSON bindings response stream to a stream of bindings objects.\n     *\n     * The bindings stream will emit a 'variables' event that will contain\n     * the array of variables (as RDF.Variable[]), as defined in the response head.\n     *\n     * @param {NodeJS.ReadableStream} sparqlResponseStream A SPARQL JSON response stream.\n     * @return {NodeJS.ReadableStream} A stream of bindings.\n     */\n    parseJsonResultsStream(sparqlResponseStream) {\n        const errorListener = (error) => resultStream.emit('error', error);\n        sparqlResponseStream.on('error', errorListener);\n        const jsonParser = new JsonParser();\n        jsonParser.onError = errorListener;\n        let variablesFound = false;\n        let resultsFound = false;\n        jsonParser.onValue = (value) => {\n            if (jsonParser.key === \"vars\" && jsonParser.stack.length === 2 && jsonParser.stack[1].key === 'head') {\n                resultStream.emit('variables', value.map((v) => this.dataFactory.variable(v)));\n                variablesFound = true;\n            }\n            else if (jsonParser.key === \"results\" && jsonParser.stack.length === 1) {\n                resultsFound = true;\n            }\n            else if (typeof jsonParser.key === 'number' && jsonParser.stack.length === 3 && jsonParser.stack[1].key === 'results' && jsonParser.stack[2].key === 'bindings') {\n                try {\n                    resultStream.push(this.parseJsonBindings(value));\n                }\n                catch (error) {\n                    resultStream.emit(\"error\", error);\n                }\n            }\n            else if (jsonParser.key === \"metadata\" && jsonParser.stack.length === 1) {\n                resultStream.emit('metadata', value);\n            }\n        };\n        const resultStream = sparqlResponseStream\n            .on(\"end\", _ => {\n            if (!resultsFound && !this.suppressMissingStreamResultsError) {\n                resultStream.emit(\"error\", new Error(\"No valid SPARQL query results were found.\"));\n            }\n            else if (!variablesFound) {\n                resultStream.emit('variables', []);\n            }\n        })\n            .pipe(new readable_stream_1.Transform({\n            objectMode: true,\n            transform(chunk, encoding, callback) {\n                jsonParser.write(chunk);\n                callback();\n            }\n        }));\n        return resultStream;\n    }\n    /**\n     * Convert a SPARQL JSON result binding to a bindings object.\n     * @param rawBindings A SPARQL JSON result binding.\n     * @return {IBindings} A bindings object.\n     */\n    parseJsonBindings(rawBindings) {\n        const bindings = {};\n        for (const key in rawBindings) {\n            const rawValue = rawBindings[key];\n            bindings[this.prefixVariableQuestionMark ? ('?' + key) : key] = this.parseJsonValue(rawValue);\n        }\n        return bindings;\n    }\n    /**\n     * Convert a SPARQL JSON result value to an RDF term.\n     * @param rawValue A SPARQL JSON result value\n     * @return {RDF.Term} An RDF term.\n     */\n    parseJsonValue(rawValue) {\n        let value;\n        switch (rawValue.type) {\n            case 'bnode':\n                value = this.dataFactory.blankNode(rawValue.value);\n                break;\n            case 'literal':\n                if (rawValue['xml:lang']) {\n                    value = this.dataFactory.literal(rawValue.value, rawValue['xml:lang']);\n                }\n                else if (rawValue.datatype) {\n                    value = this.dataFactory.literal(rawValue.value, this.dataFactory.namedNode(rawValue.datatype));\n                }\n                else {\n                    value = this.dataFactory.literal(rawValue.value);\n                }\n                break;\n            case 'typed-literal':\n                // Virtuoso uses this non-spec-compliant way of defining typed literals\n                value = this.dataFactory.literal(rawValue.value, this.dataFactory.namedNode(rawValue.datatype));\n                break;\n            case 'triple':\n                const tripleValue = rawValue.value;\n                if (!tripleValue || !tripleValue.subject || !tripleValue.predicate || !tripleValue.object) {\n                    throw new Error('Invalid quoted triple: ' + JSON.stringify(rawValue));\n                }\n                value = this.dataFactory.quad(this.parseJsonValue(tripleValue.subject), this.parseJsonValue(tripleValue.predicate), this.parseJsonValue(tripleValue.object));\n                break;\n            default:\n                value = this.dataFactory.namedNode(rawValue.value);\n                break;\n        }\n        return value;\n    }\n    /**\n     * Convert a SPARQL JSON boolean response to a boolean.\n     * This will throw an error if the given reponse was not a valid boolean response.\n     * @param sparqlResponse A SPARQL JSON response.\n     * @return {IBindings[]} An array of bindings.\n     */\n    parseJsonBoolean(sparqlResponse) {\n        if ('boolean' in sparqlResponse) {\n            return sparqlResponse.boolean;\n        }\n        throw new Error('No valid ASK response was found.');\n    }\n    /**\n     * Convert a SPARQL JSON boolean response stream to a promise resolving to a boolean.\n     * This will reject if the given reponse was not a valid boolean response.\n     * @param {NodeJS.ReadableStream} sparqlResponseStream A SPARQL JSON response stream.\n     * @return {Promise<boolean>} The response boolean.\n     */\n    parseJsonBooleanStream(sparqlResponseStream) {\n        return new Promise((resolve, reject) => {\n            const parser = new JsonParser();\n            parser.onError = reject;\n            parser.onValue = (value) => {\n                if (parser.key === \"boolean\" && typeof value === 'boolean' && parser.stack.length === 1) {\n                    resolve(value);\n                }\n            };\n            sparqlResponseStream\n                .on('error', reject)\n                .on('data', d => parser.write(d))\n                .on('end', () => reject(new Error('No valid ASK response was found.')));\n        });\n    }\n}\nexports.SparqlJsonParser = SparqlJsonParser;\n//# sourceMappingURL=SparqlJsonParser.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/Converter\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Converter = void 0;\nconst rdf_literal_1 = require(\"rdf-literal\");\nconst sparqljson_parse_1 = require(\"sparqljson-parse\");\n/**\n * Converts SPARQL JSON results to a tree-based structure by splitting variables on a certain delimiter.\n */\nclass Converter {\n    constructor(settings) {\n        settings = settings || { delimiter: '_' };\n        settings.prefixVariableQuestionMark = false;\n        this.delimiter = settings.delimiter || '_';\n        this.parser = new sparqljson_parse_1.SparqlJsonParser(settings);\n        this.materializeRdfJsTerms = settings.materializeRdfJsTerms;\n    }\n    /**\n     * Adds a value to a tree.\n     * @param tree A tree datastructure.\n     * @param {string[]} path The path of keys in the tree.\n     * @param {Term} value A value to add.\n     * @param {string} lastKeyPath The accumulated key path (separated by the given delimiter)\n     *                             through recursive calls, can be empty.\n     * @param {ISchema} schema A schema.\n     * @param {string} delimiter The string to join key paths by.\n     */\n    static addValueToTree(tree, path, value, lastKeyPath, schema, delimiter) {\n        const key = path[0];\n        const keyPath = lastKeyPath ? (lastKeyPath + delimiter + key) : key;\n        const singularize = schema.singularizeVariables[keyPath];\n        if (path.length === 1) {\n            // Leaf nodes\n            if (singularize) {\n                if (!tree[key]) {\n                    tree[key] = value;\n                }\n            }\n            else {\n                if (!tree[key]) {\n                    tree[key] = [];\n                }\n                tree[key].push(value);\n            }\n        }\n        else {\n            // Inner nodes\n            let nextNode;\n            if (singularize) {\n                if (!tree[key]) {\n                    tree[key] = {};\n                }\n                nextNode = tree[key];\n            }\n            else {\n                if (!tree[key]) {\n                    tree[key] = [{}];\n                }\n                nextNode = tree[key][0];\n            }\n            Converter.addValueToTree(nextNode, path.slice(1), value, keyPath, schema, delimiter);\n        }\n    }\n    /**\n     * Recursively merge the two given trees.\n     * @param tree1 A first tree (has key priority on literals).\n     * @param tree2 A second tree. All arrays will/should only have a single element.\n     * @return {any} The merged tree.\n     */\n    static mergeTrees(tree1, tree2) {\n        if (typeof tree1 !== typeof tree2) {\n            throw new Error(`Two incompatible tree nodes were found: ${typeof tree1} and ${typeof tree2}`);\n        }\n        if (Array.isArray(tree1) !== Array.isArray(tree2)) {\n            throw new Error(`Two incompatible tree nodes were found: Array?${Array.isArray(tree1)} and Array?${Array.isArray(tree2)}`);\n        }\n        if (typeof tree1 === 'object' && typeof tree2 === 'object') {\n            if (tree1.termType && tree2.termType) {\n                if (tree1.equals(tree2)) {\n                    return { valid: true, result: tree1 };\n                }\n                else {\n                    return { valid: false, result: tree1 };\n                }\n            }\n            if (Array.isArray(tree1) && Array.isArray(tree2)) {\n                if (tree1.length > 0) {\n                    const merged = [];\n                    let valid = false;\n                    for (const tree1Element of tree1) {\n                        const mergedElement = Converter.mergeTrees(tree1Element, tree2[0]);\n                        if (mergedElement.valid) {\n                            valid = true;\n                            merged.push(mergedElement.result);\n                        }\n                        else {\n                            merged.push(tree1Element);\n                        }\n                    }\n                    if (valid) {\n                        return { valid: true, result: merged };\n                    }\n                }\n                return { valid: true, result: tree1.concat(tree2) };\n            }\n            else {\n                const merged = {};\n                for (const key2 in tree2) {\n                    merged[key2] = tree2[key2];\n                }\n                for (const key1 in tree1) {\n                    if (merged[key1]) {\n                        const mergedElement = Converter.mergeTrees(tree1[key1], merged[key1]);\n                        if (mergedElement.valid) {\n                            merged[key1] = mergedElement.result;\n                        }\n                        else {\n                            return { valid: false, result: tree1 };\n                        }\n                    }\n                    else {\n                        merged[key1] = tree1[key1];\n                    }\n                }\n                return { valid: true, result: merged };\n            }\n        }\n        else {\n            throw new Error(`Unmergable tree types: ${typeof tree1} and ${typeof tree2}`);\n        }\n    }\n    /**\n     * Materialize all RDF terms in the given tree to raw values.\n     * This does not mutate the original tree.\n     * @param tree A tree.\n     * @return {any} A materialized tree.\n     */\n    static materializeTree(tree) {\n        if (tree.termType) {\n            return (0, rdf_literal_1.getTermRaw)(tree);\n        }\n        else if (Array.isArray(tree)) {\n            return tree.map(Converter.materializeTree);\n        }\n        else {\n            const materialized = {};\n            for (const key in tree) {\n                materialized[key] = Converter.materializeTree(tree[key]);\n            }\n            return materialized;\n        }\n    }\n    /**\n     * Convert a complete SPARQL JSON response to a GraphQL results tree.\n     * @param sparqlResponse A SPARQL JSON response.\n     * @param {ISchema} schema A schema.\n     * @return {any} A GraphQL results tree.\n     */\n    sparqlJsonResultsToTree(sparqlResponse, schema) {\n        return this.bindingsToTree(this.parser.parseJsonResults(sparqlResponse), schema || { singularizeVariables: {} });\n    }\n    /**\n     * Convert an array of bindings to a GraphQL results tree.\n     * @param {IBindings[]} bindingsArray An array of bindings.\n     * @param {ISchema} schema A schema.\n     * @return {any} A GraphQL results tree.\n     */\n    bindingsToTree(bindingsArray, schema) {\n        const singularRoot = schema && schema.singularizeVariables[''];\n        let tree = singularRoot ? {} : [];\n        for (const bindings of bindingsArray) {\n            const subTree = singularRoot ? {} : [{}];\n            for (const key in bindings) {\n                const path = key.split(this.delimiter);\n                const value = bindings[key];\n                Converter.addValueToTree(singularRoot ? subTree : subTree[0], path, value, '', schema, this.delimiter);\n            }\n            tree = Converter.mergeTrees(tree, subTree).result;\n        }\n        if (this.materializeRdfJsTerms) {\n            tree = Converter.materializeTree(tree);\n        }\n        return tree;\n    }\n}\nexports.Converter = Converter;\n//# sourceMappingURL=Converter.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./lib/SparqlXmlParser\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SparqlXmlParser = void 0;\nconst rdf_data_factory_1 = require(\"rdf-data-factory\");\nconst saxes_1 = require(\"@rubensworks/saxes\");\nconst readable_stream_1 = require(\"readable-stream\");\n/**\n * Parser for the SPARQL Query Results XML format.\n * @see https://www.w3.org/TR/rdf-sparql-XMLres/\n */\nclass SparqlXmlParser {\n    constructor(settings) {\n        settings = settings || {};\n        this.dataFactory = settings.dataFactory || new rdf_data_factory_1.DataFactory();\n        this.prefixVariableQuestionMark = !!settings.prefixVariableQuestionMark;\n    }\n    /**\n     * Convert a SPARQL XML bindings response stream to a stream of bindings objects.\n     *\n     * The bindings stream will emit a 'variables' event that will contain\n     * the array of variables (as RDF.Variable[]), as defined in the response head.\n     *\n     * @param {NodeJS.ReadableStream} sparqlResponseStream A SPARQL XML response stream.\n     * @return {NodeJS.ReadableStream} A stream of bindings.\n     */\n    parseXmlResultsStream(sparqlResponseStream) {\n        const errorListener = (error) => resultStream.emit('error', error);\n        sparqlResponseStream.on('error', errorListener);\n        const parser = new saxes_1.SaxesParser();\n        const stack = [];\n        let variablesFound = false;\n        let resultsFound = false;\n        const variables = [];\n        let currentBindings = {};\n        let currentBindingName = '';\n        let currentBindingType = '';\n        let currentBindingAnnotation;\n        let currentText = '';\n        let currentQuotedTriples = [];\n        parser.on(\"error\", errorListener);\n        parser.on(\"opentag\", tag => {\n            if (tag.name === \"variable\" && this.stackEquals(stack, ['sparql', 'head'])) {\n                variables.push(this.dataFactory.variable(tag.attributes.name));\n            }\n            else if (tag.name === \"results\" && this.stackEquals(stack, ['sparql'])) {\n                resultsFound = true;\n            }\n            else if (tag.name === 'result' && this.stackEquals(stack, ['sparql', 'results'])) {\n                currentBindings = {};\n            }\n            else if (tag.name === 'binding' && this.stackEquals(stack, ['sparql', 'results', 'result'])) {\n                currentBindingName = tag.attributes.name || '';\n                currentBindingType = '';\n                currentBindingAnnotation = '';\n                currentText = '';\n                currentQuotedTriples = [];\n            }\n            else if (tag.name === 'triple' && this.stackBeginsWith(stack, ['sparql', 'results', 'result'])) {\n                currentQuotedTriples.push({ components: {} });\n            }\n            else if (stack[stack.length - 1] === 'triple' && this.stackBeginsWith(stack, ['sparql', 'results', 'result', 'binding'])) {\n                currentBindingType = '';\n                currentBindingAnnotation = '';\n                currentText = '';\n                if (!['subject', 'predicate', 'object'].includes(tag.name)) {\n                    errorListener(new Error(`Illegal quoted triple component '${tag.name}' found on line ${parser.line + 1}`));\n                }\n                else {\n                    currentQuotedTriples[currentQuotedTriples.length - 1].currentComponent = tag.name;\n                }\n            }\n            else if (this.stackBeginsWith(stack, ['sparql', 'results', 'result', 'binding'])) {\n                currentBindingType = tag.name;\n                if ('xml:lang' in tag.attributes) {\n                    currentBindingAnnotation = tag.attributes['xml:lang'];\n                }\n                else if ('datatype' in tag.attributes) {\n                    currentBindingAnnotation = this.dataFactory.namedNode(tag.attributes.datatype);\n                }\n                else {\n                    currentBindingAnnotation = undefined;\n                }\n            }\n            stack.push(tag.name);\n        });\n        parser.on(\"closetag\", tag => {\n            if (this.stackEquals(stack, ['sparql', 'head'])) {\n                resultStream.emit(\"variables\", variables);\n                variablesFound = true;\n            }\n            if (this.stackEquals(stack, ['sparql', 'results', 'result'])) {\n                resultStream.push(currentBindings);\n            }\n            if (this.stackBeginsWith(stack, ['sparql', 'results', 'result', 'binding'])) {\n                // Determine current RDF term value\n                let term;\n                if (!currentBindingName && currentBindingType) {\n                    errorListener(new Error(`Terms should have a name on line ${parser.line + 1}`));\n                }\n                else if (currentBindingType === 'uri') {\n                    term = this.dataFactory.namedNode(currentText);\n                }\n                else if (currentBindingType === 'bnode') {\n                    term = this.dataFactory.blankNode(currentText);\n                }\n                else if (currentBindingType === 'literal') {\n                    term = this.dataFactory.literal(currentText, currentBindingAnnotation);\n                }\n                else if (stack[stack.length - 1] === 'triple') {\n                    const currentQuotedTriple = currentQuotedTriples.pop();\n                    if (currentQuotedTriple && currentQuotedTriple.components.subject && currentQuotedTriple.components.predicate && currentQuotedTriple.components.object) {\n                        term = this.dataFactory.quad(currentQuotedTriple.components.subject, currentQuotedTriple.components.predicate, currentQuotedTriple.components.object);\n                    }\n                    else {\n                        errorListener(new Error(`Incomplete quoted triple on line ${parser.line + 1}`));\n                    }\n                }\n                else if (currentBindingType) {\n                    errorListener(new Error(`Invalid term type '${currentBindingType}' on line ${parser.line + 1}`));\n                }\n                if (term) {\n                    if (currentQuotedTriples.length > 0) {\n                        // If we're in a quoted triple, store the term inside the active quoted triple\n                        const currentQuotedTriple = currentQuotedTriples[currentQuotedTriples.length - 1];\n                        if (currentQuotedTriple.components[currentQuotedTriple.currentComponent]) {\n                            errorListener(new Error(`The ${currentQuotedTriple.currentComponent} in a quoted triple on line ${parser.line + 1} was already defined before`));\n                        }\n                        currentQuotedTriple.components[currentQuotedTriple.currentComponent] = term;\n                    }\n                    else {\n                        // Store the value in the current bindings object\n                        const key = this.prefixVariableQuestionMark ? ('?' + currentBindingName) : currentBindingName;\n                        currentBindings[key] = term;\n                    }\n                }\n                currentBindingType = undefined;\n            }\n            stack.pop();\n        });\n        parser.on(\"text\", text => {\n            if (this.stackBeginsWith(stack, ['sparql', 'results', 'result', 'binding']) && stack[stack.length - 1] === currentBindingType) {\n                currentText = text;\n            }\n        });\n        const resultStream = sparqlResponseStream\n            .on(\"end\", _ => {\n            if (!resultsFound) {\n                resultStream.emit(\"error\", new Error(\"No valid SPARQL query results were found.\"));\n            }\n            else if (!variablesFound) {\n                resultStream.emit('variables', []);\n            }\n        })\n            .pipe(new readable_stream_1.Transform({\n            objectMode: true,\n            transform(chunk, encoding, callback) {\n                parser.write(chunk);\n                callback();\n            }\n        }));\n        return resultStream;\n    }\n    /**\n     * Convert a SPARQL XML boolean response stream to a promise resolving to a boolean.\n     * This will reject if the given response was not a valid boolean response.\n     * @param {NodeJS.ReadableStream} sparqlResponseStream A SPARQL XML response stream.\n     * @return {Promise<boolean>} The response boolean.\n     */\n    parseXmlBooleanStream(sparqlResponseStream) {\n        return new Promise((resolve, reject) => {\n            const parser = new saxes_1.SaxesParser();\n            const stack = [];\n            parser.on(\"error\", reject);\n            parser.on(\"opentag\", tag => {\n                stack.push(tag.name);\n            });\n            parser.on(\"closetag\", _ => {\n                stack.pop();\n            });\n            parser.on(\"text\", text => {\n                if (this.stackEquals(stack, ['sparql', 'boolean'])) {\n                    resolve(text === 'true');\n                }\n            });\n            sparqlResponseStream\n                .on('error', reject)\n                .on('data', d => parser.write(d))\n                .on('end', () => reject(new Error('No valid ASK response was found.')));\n        });\n    }\n    stackEquals(a, b) {\n        return a.length === b.length && a.every((v, i) => b[i] === v);\n    }\n    stackBeginsWith(a, b) {\n        return a.length >= b.length && b.every((v, i) => a[i] === v);\n    }\n}\nexports.SparqlXmlParser = SparqlXmlParser;\n//# sourceMappingURL=SparqlXmlParser.js.map","var Promise = require('promise-polyfill')\n\nmodule.exports = function (stream, enc, cb) {\n    if (typeof enc === 'function') {\n        cb = enc\n        enc = null\n    }\n\n    var str = ''\n\n    var p = new Promise (function (resolve, reject) {\n        stream.on('data', function (data) {\n            str += (typeof enc === 'string') ? data.toString(enc) : data.toString()\n        })\n        stream.on('end', function () {\n            resolve(str)\n        })\n        stream.on('error', reject)\n    })\n    if (cb) {\n        p.then(function (str) { cb(null, str) }, cb)\n    }\n    return p\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"NIL\", {\n  enumerable: true,\n  get: function get() {\n    return _nil.default;\n  }\n});\nObject.defineProperty(exports, \"parse\", {\n  enumerable: true,\n  get: function get() {\n    return _parse.default;\n  }\n});\nObject.defineProperty(exports, \"stringify\", {\n  enumerable: true,\n  get: function get() {\n    return _stringify.default;\n  }\n});\nObject.defineProperty(exports, \"v1\", {\n  enumerable: true,\n  get: function get() {\n    return _v.default;\n  }\n});\nObject.defineProperty(exports, \"v3\", {\n  enumerable: true,\n  get: function get() {\n    return _v2.default;\n  }\n});\nObject.defineProperty(exports, \"v4\", {\n  enumerable: true,\n  get: function get() {\n    return _v3.default;\n  }\n});\nObject.defineProperty(exports, \"v5\", {\n  enumerable: true,\n  get: function get() {\n    return _v4.default;\n  }\n});\nObject.defineProperty(exports, \"validate\", {\n  enumerable: true,\n  get: function get() {\n    return _validate.default;\n  }\n});\nObject.defineProperty(exports, \"version\", {\n  enumerable: true,\n  get: function get() {\n    return _version.default;\n  }\n});\n\nvar _v = _interopRequireDefault(require(\"./v1.js\"));\n\nvar _v2 = _interopRequireDefault(require(\"./v3.js\"));\n\nvar _v3 = _interopRequireDefault(require(\"./v4.js\"));\n\nvar _v4 = _interopRequireDefault(require(\"./v5.js\"));\n\nvar _nil = _interopRequireDefault(require(\"./nil.js\"));\n\nvar _version = _interopRequireDefault(require(\"./version.js\"));\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nvar _stringify = _interopRequireDefault(require(\"./stringify.js\"));\n\nvar _parse = _interopRequireDefault(require(\"./parse.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (let i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  const output = [];\n  const length32 = input.length * 32;\n  const hexTab = '0123456789abcdef';\n\n  for (let i = 0; i < length32; i += 8) {\n    const x = input[i >> 5] >>> i % 32 & 0xff;\n    const hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  let a = 1732584193;\n  let b = -271733879;\n  let c = -1732584194;\n  let d = 271733878;\n\n  for (let i = 0; i < x.length; i += 16) {\n    const olda = a;\n    const oldb = b;\n    const oldc = c;\n    const oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  const length8 = input.length * 8;\n  const output = new Uint32Array(getOutputLength(length8));\n\n  for (let i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  const lsw = (x & 0xffff) + (y & 0xffff);\n  const msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nvar _default = md5;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nvar _default = {\n  randomUUID\n};\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = '00000000-0000-0000-0000-000000000000';\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction parse(uuid) {\n  if (!(0, _validate.default)(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  let v;\n  const arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nvar _default = parse;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = rng;\n// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\n\nfunction rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\n// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  const K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  const H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    const msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (let i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  const l = bytes.length / 4 + 2;\n  const N = Math.ceil(l / 16);\n  const M = new Array(N);\n\n  for (let i = 0; i < N; ++i) {\n    const arr = new Uint32Array(16);\n\n    for (let j = 0; j < 16; ++j) {\n      arr[j] = bytes[i * 64 + j * 4] << 24 | bytes[i * 64 + j * 4 + 1] << 16 | bytes[i * 64 + j * 4 + 2] << 8 | bytes[i * 64 + j * 4 + 3];\n    }\n\n    M[i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (let i = 0; i < N; ++i) {\n    const W = new Uint32Array(80);\n\n    for (let t = 0; t < 16; ++t) {\n      W[t] = M[i][t];\n    }\n\n    for (let t = 16; t < 80; ++t) {\n      W[t] = ROTL(W[t - 3] ^ W[t - 8] ^ W[t - 14] ^ W[t - 16], 1);\n    }\n\n    let a = H[0];\n    let b = H[1];\n    let c = H[2];\n    let d = H[3];\n    let e = H[4];\n\n    for (let t = 0; t < 80; ++t) {\n      const s = Math.floor(t / 20);\n      const T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[t] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nvar _default = sha1;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nexports.unsafeStringify = unsafeStringify;\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nfunction unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!(0, _validate.default)(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nvar _default = stringify;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _rng = _interopRequireDefault(require(\"./rng.js\"));\n\nvar _stringify = require(\"./stringify.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\nlet _nodeId;\n\nlet _clockseq; // Previous uuid creation time\n\n\nlet _lastMSecs = 0;\nlet _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  let i = buf && offset || 0;\n  const b = buf || new Array(16);\n  options = options || {};\n  let node = options.node || _nodeId;\n  let clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    const seedBytes = options.random || (options.rng || _rng.default)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  let msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  let nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  const dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  const tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  const tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (let n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || (0, _stringify.unsafeStringify)(b);\n}\n\nvar _default = v1;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _v = _interopRequireDefault(require(\"./v35.js\"));\n\nvar _md = _interopRequireDefault(require(\"./md5.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst v3 = (0, _v.default)('v3', 0x30, _md.default);\nvar _default = v3;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.URL = exports.DNS = void 0;\nexports.default = v35;\n\nvar _stringify = require(\"./stringify.js\");\n\nvar _parse = _interopRequireDefault(require(\"./parse.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  const bytes = [];\n\n  for (let i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nconst DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexports.DNS = DNS;\nconst URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexports.URL = URL;\n\nfunction v35(name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    var _namespace;\n\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = (0, _parse.default)(namespace);\n    }\n\n    if (((_namespace = namespace) === null || _namespace === void 0 ? void 0 : _namespace.length) !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    let bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (let i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return (0, _stringify.unsafeStringify)(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _native = _interopRequireDefault(require(\"./native.js\"));\n\nvar _rng = _interopRequireDefault(require(\"./rng.js\"));\n\nvar _stringify = require(\"./stringify.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction v4(options, buf, offset) {\n  if (_native.default.randomUUID && !buf && !options) {\n    return _native.default.randomUUID();\n  }\n\n  options = options || {};\n\n  const rnds = options.random || (options.rng || _rng.default)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return (0, _stringify.unsafeStringify)(rnds);\n}\n\nvar _default = v4;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _v = _interopRequireDefault(require(\"./v35.js\"));\n\nvar _sha = _interopRequireDefault(require(\"./sha1.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst v5 = (0, _v.default)('v5', 0x50, _sha.default);\nvar _default = v5;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regex = _interopRequireDefault(require(\"./regex.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && _regex.default.test(uuid);\n}\n\nvar _default = validate;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _validate = _interopRequireDefault(require(\"./validate.js\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction version(uuid) {\n  if (!(0, _validate.default)(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.slice(14, 15), 16);\n}\n\nvar _default = version;\nexports.default = _default;","\"use strict\";\n/**\n * Character classes and associated utilities for the 5th edition of XML 1.0.\n *\n * @author Louis-Dominique Dubeau\n * @license MIT\n * @copyright Louis-Dominique Dubeau\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//\n// Fragments.\n//\nexports.CHAR = \"\\t\\n\\r -\\uD7FF\\uE000-\\uFFFD\\uD800\\uDC00-\\uDBFF\\uDFFF\";\nexports.S = \" \\t\\r\\n\";\n// tslint:disable-next-line:max-line-length\nexports.NAME_START_CHAR = \":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\uD800\\uDC00-\\uDB7F\\uDFFF\";\nexports.NAME_CHAR = \"-\" + exports.NAME_START_CHAR + \".0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040\";\n//\n// Regular expressions.\n//\nexports.CHAR_RE = new RegExp(\"^[\" + exports.CHAR + \"]$\", \"u\");\nexports.S_RE = new RegExp(\"^[\" + exports.S + \"]+$\", \"u\");\nexports.NAME_START_CHAR_RE = new RegExp(\"^[\" + exports.NAME_START_CHAR + \"]$\", \"u\");\nexports.NAME_CHAR_RE = new RegExp(\"^[\" + exports.NAME_CHAR + \"]$\", \"u\");\nexports.NAME_RE = new RegExp(\"^[\" + exports.NAME_START_CHAR + \"][\" + exports.NAME_CHAR + \"]*$\", \"u\");\nexports.NMTOKEN_RE = new RegExp(\"^[\" + exports.NAME_CHAR + \"]+$\", \"u\");\nvar TAB = 9;\nvar NL = 0xA;\nvar CR = 0xD;\nvar SPACE = 0x20;\n//\n// Lists.\n//\n/** All characters in the ``S`` production. */\nexports.S_LIST = [SPACE, NL, CR, TAB];\n/**\n * Determines whether a codepoint matches the ``CHAR`` production.\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches ``CHAR``.\n */\nfunction isChar(c) {\n    return (c >= SPACE && c <= 0xD7FF) ||\n        c === NL || c === CR || c === TAB ||\n        (c >= 0xE000 && c <= 0xFFFD) ||\n        (c >= 0x10000 && c <= 0x10FFFF);\n}\nexports.isChar = isChar;\n/**\n * Determines whether a codepoint matches the ``S`` (space) production.\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches ``S``.\n */\nfunction isS(c) {\n    return c === SPACE || c === NL || c === CR || c === TAB;\n}\nexports.isS = isS;\n/**\n * Determines whether a codepoint matches the ``NAME_START_CHAR`` production.\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches ``NAME_START_CHAR``.\n */\nfunction isNameStartChar(c) {\n    return ((c >= 0x41 && c <= 0x5A) ||\n        (c >= 0x61 && c <= 0x7A) ||\n        c === 0x3A ||\n        c === 0x5F ||\n        c === 0x200C ||\n        c === 0x200D ||\n        (c >= 0xC0 && c <= 0xD6) ||\n        (c >= 0xD8 && c <= 0xF6) ||\n        (c >= 0x00F8 && c <= 0x02FF) ||\n        (c >= 0x0370 && c <= 0x037D) ||\n        (c >= 0x037F && c <= 0x1FFF) ||\n        (c >= 0x2070 && c <= 0x218F) ||\n        (c >= 0x2C00 && c <= 0x2FEF) ||\n        (c >= 0x3001 && c <= 0xD7FF) ||\n        (c >= 0xF900 && c <= 0xFDCF) ||\n        (c >= 0xFDF0 && c <= 0xFFFD) ||\n        (c >= 0x10000 && c <= 0xEFFFF));\n}\nexports.isNameStartChar = isNameStartChar;\n/**\n * Determines whether a codepoint matches the ``NAME_CHAR`` production.\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches ``NAME_CHAR``.\n */\nfunction isNameChar(c) {\n    return isNameStartChar(c) ||\n        (c >= 0x30 && c <= 0x39) ||\n        c === 0x2D ||\n        c === 0x2E ||\n        c === 0xB7 ||\n        (c >= 0x0300 && c <= 0x036F) ||\n        (c >= 0x203F && c <= 0x2040);\n}\nexports.isNameChar = isNameChar;\n//# sourceMappingURL=ed5.js.map","\"use strict\";\n/**\n * Character classes and associated utilities for the 2nd edition of XML 1.1.\n *\n * @author Louis-Dominique Dubeau\n * @license MIT\n * @copyright Louis-Dominique Dubeau\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//\n// Fragments.\n//\nexports.CHAR = \"\\u0001-\\uD7FF\\uE000-\\uFFFD\\uD800\\uDC00-\\uDBFF\\uDFFF\";\nexports.RESTRICTED_CHAR = \"\\u0001-\\u0008\\u000B\\u000C\\u000E-\\u001F\\u007F-\\u0084\\u0086-\\u009F\";\nexports.S = \" \\t\\r\\n\";\n// tslint:disable-next-line:max-line-length\nexports.NAME_START_CHAR = \":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\uD800\\uDC00-\\uDB7F\\uDFFF\";\nexports.NAME_CHAR = \"-\" + exports.NAME_START_CHAR + \".0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040\";\n//\n// Regular expressions.\n//\nexports.CHAR_RE = new RegExp(\"^[\" + exports.CHAR + \"]$\", \"u\");\nexports.RESTRICTED_CHAR_RE = new RegExp(\"^[\" + exports.RESTRICTED_CHAR + \"]$\", \"u\");\nexports.S_RE = new RegExp(\"^[\" + exports.S + \"]+$\", \"u\");\nexports.NAME_START_CHAR_RE = new RegExp(\"^[\" + exports.NAME_START_CHAR + \"]$\", \"u\");\nexports.NAME_CHAR_RE = new RegExp(\"^[\" + exports.NAME_CHAR + \"]$\", \"u\");\nexports.NAME_RE = new RegExp(\"^[\" + exports.NAME_START_CHAR + \"][\" + exports.NAME_CHAR + \"]*$\", \"u\");\nexports.NMTOKEN_RE = new RegExp(\"^[\" + exports.NAME_CHAR + \"]+$\", \"u\");\nvar TAB = 9;\nvar NL = 0xA;\nvar CR = 0xD;\nvar SPACE = 0x20;\n//\n// Lists.\n//\n/** All characters in the ``S`` production. */\nexports.S_LIST = [SPACE, NL, CR, TAB];\n/**\n * Determines whether a codepoint matches the ``CHAR`` production.\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches ``CHAR``.\n */\nfunction isChar(c) {\n    return (c >= 0x0001 && c <= 0xD7FF) ||\n        (c >= 0xE000 && c <= 0xFFFD) ||\n        (c >= 0x10000 && c <= 0x10FFFF);\n}\nexports.isChar = isChar;\n/**\n * Determines whether a codepoint matches the ``RESTRICTED_CHAR`` production.\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches ``RESTRICTED_CHAR``.\n */\nfunction isRestrictedChar(c) {\n    return (c >= 0x1 && c <= 0x8) ||\n        c === 0xB ||\n        c === 0xC ||\n        (c >= 0xE && c <= 0x1F) ||\n        (c >= 0x7F && c <= 0x84) ||\n        (c >= 0x86 && c <= 0x9F);\n}\nexports.isRestrictedChar = isRestrictedChar;\n/**\n * Determines whether a codepoint matches the ``CHAR`` production and does not\n * match the ``RESTRICTED_CHAR`` production. ``isCharAndNotRestricted(x)`` is\n * equivalent to ``isChar(x) && !isRestrictedChar(x)``. This function is faster\n * than running the two-call equivalent.\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches ``CHAR`` and does not match\n * ``RESTRICTED_CHAR``.\n */\nfunction isCharAndNotRestricted(c) {\n    return (c === 0x9) ||\n        (c === 0xA) ||\n        (c === 0xD) ||\n        (c > 0x1F && c < 0x7F) ||\n        (c === 0x85) ||\n        (c > 0x9F && c <= 0xD7FF) ||\n        (c >= 0xE000 && c <= 0xFFFD) ||\n        (c >= 0x10000 && c <= 0x10FFFF);\n}\nexports.isCharAndNotRestricted = isCharAndNotRestricted;\n/**\n * Determines whether a codepoint matches the ``S`` (space) production.\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches ``S``.\n */\nfunction isS(c) {\n    return c === SPACE || c === NL || c === CR || c === TAB;\n}\nexports.isS = isS;\n/**\n * Determines whether a codepoint matches the ``NAME_START_CHAR`` production.\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches ``NAME_START_CHAR``.\n */\n// tslint:disable-next-line:cyclomatic-complexity\nfunction isNameStartChar(c) {\n    return ((c >= 0x41 && c <= 0x5A) ||\n        (c >= 0x61 && c <= 0x7A) ||\n        c === 0x3A ||\n        c === 0x5F ||\n        c === 0x200C ||\n        c === 0x200D ||\n        (c >= 0xC0 && c <= 0xD6) ||\n        (c >= 0xD8 && c <= 0xF6) ||\n        (c >= 0x00F8 && c <= 0x02FF) ||\n        (c >= 0x0370 && c <= 0x037D) ||\n        (c >= 0x037F && c <= 0x1FFF) ||\n        (c >= 0x2070 && c <= 0x218F) ||\n        (c >= 0x2C00 && c <= 0x2FEF) ||\n        (c >= 0x3001 && c <= 0xD7FF) ||\n        (c >= 0xF900 && c <= 0xFDCF) ||\n        (c >= 0xFDF0 && c <= 0xFFFD) ||\n        (c >= 0x10000 && c <= 0xEFFFF));\n}\nexports.isNameStartChar = isNameStartChar;\n/**\n * Determines whether a codepoint matches the ``NAME_CHAR`` production.\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches ``NAME_CHAR``.\n */\nfunction isNameChar(c) {\n    return isNameStartChar(c) ||\n        (c >= 0x30 && c <= 0x39) ||\n        c === 0x2D ||\n        c === 0x2E ||\n        c === 0xB7 ||\n        (c >= 0x0300 && c <= 0x036F) ||\n        (c >= 0x203F && c <= 0x2040);\n}\nexports.isNameChar = isNameChar;\n//# sourceMappingURL=ed2.js.map","\"use strict\";\n/**\n * Character class utilities for XML NS 1.0 edition 3.\n *\n * @author Louis-Dominique Dubeau\n * @license MIT\n * @copyright Louis-Dominique Dubeau\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\n//\n// Fragments.\n//\n// tslint:disable-next-line:max-line-length\nexports.NC_NAME_START_CHAR = \"A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\uD800\\uDC00-\\uDB7F\\uDFFF\";\nexports.NC_NAME_CHAR = \"-\" + exports.NC_NAME_START_CHAR + \".0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040\";\n//\n// Regular expressions.\n//\nexports.NC_NAME_START_CHAR_RE = new RegExp(\"^[\" + exports.NC_NAME_START_CHAR + \"]$\", \"u\");\nexports.NC_NAME_CHAR_RE = new RegExp(\"^[\" + exports.NC_NAME_CHAR + \"]$\", \"u\");\nexports.NC_NAME_RE = new RegExp(\"^[\" + exports.NC_NAME_START_CHAR + \"][\" + exports.NC_NAME_CHAR + \"]*$\", \"u\");\n/**\n * Determines whether a codepoint matches [[NC_NAME_START_CHAR]].\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches.\n */\n// tslint:disable-next-line:cyclomatic-complexity\nfunction isNCNameStartChar(c) {\n    return ((c >= 0x41 && c <= 0x5A) ||\n        c === 0x5F ||\n        (c >= 0x61 && c <= 0x7A) ||\n        (c >= 0xC0 && c <= 0xD6) ||\n        (c >= 0xD8 && c <= 0xF6) ||\n        (c >= 0x00F8 && c <= 0x02FF) ||\n        (c >= 0x0370 && c <= 0x037D) ||\n        (c >= 0x037F && c <= 0x1FFF) ||\n        (c >= 0x200C && c <= 0x200D) ||\n        (c >= 0x2070 && c <= 0x218F) ||\n        (c >= 0x2C00 && c <= 0x2FEF) ||\n        (c >= 0x3001 && c <= 0xD7FF) ||\n        (c >= 0xF900 && c <= 0xFDCF) ||\n        (c >= 0xFDF0 && c <= 0xFFFD) ||\n        (c >= 0x10000 && c <= 0xEFFFF));\n}\nexports.isNCNameStartChar = isNCNameStartChar;\n/**\n * Determines whether a codepoint matches [[NC_NAME_CHAR]].\n *\n * @param c The code point.\n *\n * @returns ``true`` if the codepoint matches.\n */\nfunction isNCNameChar(c) {\n    return isNCNameStartChar(c) ||\n        (c === 0x2D ||\n            c === 0x2E ||\n            (c >= 0x30 && c <= 0x39) ||\n            c === 0x00B7 ||\n            (c >= 0x0300 && c <= 0x036F) ||\n            (c >= 0x203F && c <= 0x2040));\n}\nexports.isNCNameChar = isNCNameChar;\n//# sourceMappingURL=ed3.js.map","\"use strict\";\n/**\n * An asynchronous iterator library for advanced object pipelines\n * @module asynciterator\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isIterator = exports.isIterable = exports.isSourceExpression = exports.isPromise = exports.isEventEmitter = exports.isFunction = exports.range = exports.union = exports.fromIterable = exports.fromIterator = exports.fromArray = exports.single = exports.empty = exports.wrap = exports.WrappingIterator = exports.ClonedIterator = exports.UnionIterator = exports.MultiTransformIterator = exports.SimpleTransformIterator = exports.TransformIterator = exports.BufferedIterator = exports.MappingIterator = exports.DESTINATION = exports.identity = exports.IntegerIterator = exports.ArrayIterator = exports.SingletonIterator = exports.EmptyIterator = exports.AsyncIterator = exports.DESTROYED = exports.ENDED = exports.CLOSED = exports.CLOSING = exports.OPEN = exports.INIT = exports.setTaskScheduler = exports.getTaskScheduler = exports.scheduleTask = exports.LinkedList = void 0;\nconst events_1 = require(\"events\");\nconst linkedlist_1 = require(\"./linkedlist.js\");\nObject.defineProperty(exports, \"LinkedList\", { enumerable: true, get: function () { return linkedlist_1.LinkedList; } });\nconst taskscheduler_1 = require(\"./taskscheduler.js\");\nlet taskScheduler = taskscheduler_1.createTaskScheduler();\n/** Schedules the given task for asynchronous execution. */\nfunction scheduleTask(task) {\n    taskScheduler(task);\n}\nexports.scheduleTask = scheduleTask;\n/** Returns the asynchronous task scheduler. */\nfunction getTaskScheduler() {\n    return taskScheduler;\n}\nexports.getTaskScheduler = getTaskScheduler;\n/** Sets the asynchronous task scheduler. */\nfunction setTaskScheduler(scheduler) {\n    taskScheduler = scheduler;\n}\nexports.setTaskScheduler = setTaskScheduler;\n/**\n  ID of the INIT state.\n  An iterator is initializing if it is preparing main item generation.\n  It can already produce items.\n  @type integer\n*/\nexports.INIT = 1 << 0;\n/**\n  ID of the OPEN state.\n  An iterator is open if it can generate new items.\n  @type integer\n*/\nexports.OPEN = 1 << 1;\n/**\n  ID of the CLOSING state.\n  An iterator is closing if item generation is pending but will not be scheduled again.\n  @type integer\n*/\nexports.CLOSING = 1 << 2;\n/**\n  ID of the CLOSED state.\n  An iterator is closed if it no longer actively generates new items.\n  Items might still be available.\n  @type integer\n*/\nexports.CLOSED = 1 << 3;\n/**\n  ID of the ENDED state.\n  An iterator has ended if no further items will become available.\n  The 'end' event is guaranteed to have been called when in this state.\n  @type integer\n*/\nexports.ENDED = 1 << 4;\n/**\n  ID of the DESTROYED state.\n  An iterator has been destroyed\n  after calling {@link module:asynciterator.AsyncIterator#destroy}.\n  The 'end' event has not been called, as pending elements were voided.\n  @type integer\n*/\nexports.DESTROYED = 1 << 5;\n/**\n  An asynchronous iterator provides pull-based access to a stream of objects.\n  @extends module:asynciterator.EventEmitter\n*/\nclass AsyncIterator extends events_1.EventEmitter {\n    /** Creates a new `AsyncIterator`. */\n    constructor(initialState = exports.OPEN) {\n        super();\n        this._readable = false;\n        this._state = initialState;\n        this.on('newListener', waitForDataListener);\n    }\n    /**\n      Changes the iterator to the given state if possible and necessary,\n      possibly emitting events to signal that change.\n      @protected\n      @param {integer} newState The ID of the new state\n      @param {boolean} [eventAsync=false] Whether resulting events should be emitted asynchronously\n      @returns {boolean} Whether the state was changed\n      @emits module:asynciterator.AsyncIterator.end\n    */\n    _changeState(newState, eventAsync = false) {\n        // Validate the state change\n        const valid = newState > this._state && this._state < exports.ENDED;\n        if (valid) {\n            this._state = newState;\n            // Emit the `end` event when changing to ENDED\n            if (newState === exports.ENDED) {\n                if (!eventAsync)\n                    this.emit('end');\n                else\n                    taskScheduler(() => this.emit('end'));\n            }\n        }\n        return valid;\n    }\n    /**\n      Tries to read the next item from the iterator.\n      This is the main method for reading the iterator in _on-demand mode_,\n      where new items are only created when needed by consumers.\n      If no items are currently available, this methods returns `null`.\n      The {@link module:asynciterator.event:readable} event\n      will then signal when new items might be ready.\n      To read all items from the iterator,\n      switch to _flow mode_ by subscribing\n      to the {@link module:asynciterator.event:data} event.\n      When in flow mode, do not use the `read` method.\n      @returns {object?} The next item, or `null` if none is available\n    */\n    read() {\n        return null;\n    }\n    /**\n      The iterator emits a `readable` event when it might have new items available\n      after having had no items available right before this event.\n      If the iterator is not in flow mode, items can be retrieved\n      by calling {@link module:asynciterator.AsyncIterator#read}.\n      @event module:asynciterator.readable\n    */\n    /**\n      The iterator emits a `data` event with a new item as soon as it becomes available.\n      When one or more listeners are attached to the `data` event,\n      the iterator switches to _flow mode_,\n      generating and emitting new items as fast as possible.\n      This drains the source and might create backpressure on the consumers,\n      so only subscribe to this event if this behavior is intended.\n      In flow mode, don't use {@link module:asynciterator.AsyncIterator#read}.\n      To switch back to _on-demand mode_, remove all listeners from the `data` event.\n      You can then obtain items through `read` again.\n      @event module:asynciterator.data\n      @param {object} item The new item\n    */\n    /**\n      Invokes the callback for each remaining item in the iterator.\n      Switches the iterator to flow mode.\n      @param {Function} callback A function that will be called with each item\n      @param {object?} self The `this` pointer for the callback\n    */\n    forEach(callback, self) {\n        this.on('data', bind(callback, self));\n    }\n    /**\n      Stops the iterator from generating new items.\n      Already generated items or terminating items can still be emitted.\n      After this, the iterator will end asynchronously.\n      @emits module:asynciterator.AsyncIterator.end\n    */\n    close() {\n        if (this._changeState(exports.CLOSED))\n            this._endAsync();\n    }\n    /**\n      Destroy the iterator and stop it from generating new items.\n      This will not do anything if the iterator was already ended or destroyed.\n      All internal resources will be released an no new items will be emitted,\n      even not already generated items.\n      Implementors should not override this method,\n      but instead implement {@link module:asynciterator.AsyncIterator#_destroy}.\n      @param {Error} [cause] An optional error to emit.\n      @emits module:asynciterator.AsyncIterator.end\n      @emits module:asynciterator.AsyncIterator.error Only if an error is passed.\n    */\n    destroy(cause) {\n        if (!this.done) {\n            this._destroy(cause, error => {\n                cause = cause || error;\n                if (cause)\n                    this.emit('error', cause);\n                this._end(true);\n            });\n        }\n    }\n    /**\n      Called by {@link module:asynciterator.AsyncIterator#destroy}.\n      Implementers can override this, but this should not be called directly.\n      @param {?Error} cause The reason why the iterator is destroyed.\n      @param {Function} callback A callback function with an optional error argument.\n    */\n    _destroy(cause, callback) {\n        callback();\n    }\n    /**\n      Ends the iterator and cleans up.\n      Should never be called before {@link module:asynciterator.AsyncIterator#close};\n      typically, `close` is responsible for calling `_end`.\n      @param {boolean} [destroy] If the iterator should be forcefully destroyed.\n      @protected\n      @emits module:asynciterator.AsyncIterator.end\n    */\n    _end(destroy = false) {\n        if (this._changeState(destroy ? exports.DESTROYED : exports.ENDED)) {\n            this._readable = false;\n            this.removeAllListeners('readable');\n            this.removeAllListeners('data');\n            this.removeAllListeners('end');\n        }\n    }\n    /**\n      Asynchronously calls `_end`.\n      @protected\n    */\n    _endAsync() {\n        taskScheduler(() => this._end());\n    }\n    /**\n      The `end` event is emitted after the last item of the iterator has been read.\n      @event module:asynciterator.end\n    */\n    /**\n      Gets or sets whether this iterator might have items available for read.\n      A value of `false` means there are _definitely_ no items available;\n      a value of `true` means items _might_ be available.\n      @type boolean\n      @emits module:asynciterator.AsyncIterator.readable\n    */\n    get readable() {\n        return this._readable;\n    }\n    set readable(readable) {\n        readable = Boolean(readable) && !this.done;\n        // Set the readable value only if it has changed\n        if (this._readable !== readable) {\n            this._readable = readable;\n            // If the iterator became readable, emit the `readable` event\n            if (readable)\n                taskScheduler(() => this.emit('readable'));\n        }\n    }\n    /**\n      Gets whether the iterator has stopped generating new items.\n      @type boolean\n      @readonly\n    */\n    get closed() {\n        return this._state >= exports.CLOSING;\n    }\n    /**\n      Gets whether the iterator has finished emitting items.\n      @type boolean\n      @readonly\n    */\n    get ended() {\n        return this._state === exports.ENDED;\n    }\n    /**\n      Gets whether the iterator has been destroyed.\n      @type boolean\n      @readonly\n    */\n    get destroyed() {\n        return this._state === exports.DESTROYED;\n    }\n    /**\n      Gets whether the iterator will not emit anymore items,\n      either due to being closed or due to being destroyed.\n      @type boolean\n      @readonly\n    */\n    get done() {\n        return this._state >= exports.ENDED;\n    }\n    /* Generates a textual representation of the iterator. */\n    toString() {\n        const details = this._toStringDetails();\n        return `[${this.constructor.name}${details ? ` ${details}` : ''}]`;\n    }\n    /**\n      Generates details for a textual representation of the iterator.\n      @protected\n    */\n    _toStringDetails() {\n        return '';\n    }\n    /**\n      Consume all remaining items of the iterator into an array that will be returned asynchronously.\n      @param {object} [options] Settings for array creation\n      @param {integer} [options.limit] The maximum number of items to place in the array.\n     */\n    toArray(options) {\n        const items = [];\n        const limit = typeof (options === null || options === void 0 ? void 0 : options.limit) === 'number' ? options.limit : Infinity;\n        return this.ended || limit <= 0 ? Promise.resolve(items) : new Promise((resolve, reject) => {\n            // Collect and return all items up to the limit\n            const resolveItems = () => resolve(items);\n            const pushItem = (item) => {\n                items.push(item);\n                if (items.length >= limit) {\n                    this.removeListener('error', reject);\n                    this.removeListener('data', pushItem);\n                    this.removeListener('end', resolveItems);\n                    resolve(items);\n                }\n            };\n            // Start item collection\n            this.on('error', reject);\n            this.on('data', pushItem);\n            this.on('end', resolveItems);\n        });\n    }\n    /**\n      Retrieves the property with the given name from the iterator.\n      If no callback is passed, it returns the value of the property\n      or `undefined` if the property is not set.\n      If a callback is passed, it returns `undefined`\n      and calls the callback with the property the moment it is set.\n      @param {string} propertyName The name of the property to retrieve\n      @param {Function?} [callback] A one-argument callback to receive the property value\n      @returns {object?} The value of the property (if set and no callback is given)\n    */\n    getProperty(propertyName, callback) {\n        const properties = this._properties;\n        // If no callback was passed, return the property value\n        if (!callback)\n            return properties && properties[propertyName];\n        // If the value has been set, send it through the callback\n        if (properties && (propertyName in properties)) {\n            taskScheduler(() => callback(properties[propertyName]));\n        }\n        // If the value was not set, store the callback for when the value will be set\n        else {\n            let propertyCallbacks;\n            if (!(propertyCallbacks = this._propertyCallbacks))\n                this._propertyCallbacks = propertyCallbacks = Object.create(null);\n            if (propertyName in propertyCallbacks)\n                propertyCallbacks[propertyName].push(callback);\n            else\n                propertyCallbacks[propertyName] = [callback];\n        }\n        return undefined;\n    }\n    /**\n      Sets the property with the given name to the value.\n      @param {string} propertyName The name of the property to set\n      @param {object?} value The new value of the property\n    */\n    setProperty(propertyName, value) {\n        const properties = this._properties || (this._properties = Object.create(null));\n        properties[propertyName] = value;\n        // Execute getter callbacks that were waiting for this property to be set\n        const propertyCallbacks = this._propertyCallbacks || {};\n        const callbacks = propertyCallbacks[propertyName];\n        if (callbacks) {\n            delete propertyCallbacks[propertyName];\n            taskScheduler(() => {\n                for (const callback of callbacks)\n                    callback(value);\n            });\n            // Remove _propertyCallbacks if no pending callbacks are left\n            for (propertyName in propertyCallbacks)\n                return;\n            delete this._propertyCallbacks;\n        }\n    }\n    /**\n      Retrieves all properties of the iterator.\n      @returns {object} An object with property names as keys.\n    */\n    getProperties() {\n        const properties = this._properties;\n        const copy = {};\n        for (const name in properties)\n            copy[name] = properties[name];\n        return copy;\n    }\n    /**\n      Sets all of the given properties.\n      @param {object} properties Key/value pairs of properties to set\n    */\n    setProperties(properties) {\n        for (const propertyName in properties)\n            this.setProperty(propertyName, properties[propertyName]);\n    }\n    /**\n      Copies the given properties from the source iterator.\n      @param {module:asynciterator.AsyncIterator} source The iterator to copy from\n      @param {Array} propertyNames List of property names to copy\n    */\n    copyProperties(source, propertyNames) {\n        for (const propertyName of propertyNames) {\n            source.getProperty(propertyName, value => this.setProperty(propertyName, value));\n        }\n    }\n    /**\n      Transforms items from this iterator.\n      After this operation, only read the returned iterator instead of the current one.\n      @param {object|Function} [options] Settings of the iterator, or the transformation function\n      @param {integer} [options.maxbufferSize=4] The maximum number of items to keep in the buffer\n      @param {boolean} [options.autoStart=true] Whether buffering starts directly after construction\n      @param {integer} [options.offset] The number of items to skip\n      @param {integer} [options.limit] The maximum number of items\n      @param {Function} [options.filter] A function to synchronously filter items from the source\n      @param {Function} [options.map] A function to synchronously transform items from the source\n      @param {Function} [options.transform] A function to asynchronously transform items from the source\n      @param {boolean} [options.optional=false] If transforming is optional, the original item is pushed when its mapping yields `null` or its transformation yields no items\n      @param {Array|module:asynciterator.AsyncIterator} [options.prepend] Items to insert before the source items\n      @param {Array|module:asynciterator.AsyncIterator} [options.append]  Items to insert after the source items\n      @returns {module:asynciterator.AsyncIterator} A new iterator that maps the items from this iterator\n    */\n    transform(options) {\n        return new SimpleTransformIterator(this, options);\n    }\n    /**\n      Maps items from this iterator using the given function.\n      After this operation, only read the returned iterator instead of the current one.\n      @param {Function} map A mapping function to call on this iterator's (remaining) items\n      @param {object?} self The `this` pointer for the mapping function\n      @returns {module:asynciterator.AsyncIterator} A new iterator that maps the items from this iterator\n    */\n    map(map, self) {\n        return new MappingIterator(this, bind(map, self));\n    }\n    filter(filter, self) {\n        return this.map(function (item) {\n            return filter.call(self || this, item) ? item : null;\n        });\n    }\n    /**\n     * Returns a new iterator containing all of the unique items in the original iterator.\n     * @param by - The derived value by which to determine uniqueness (e.g., stringification).\n                   Defaults to the identity function.\n     * @returns An iterator with duplicates filtered out.\n     */\n    uniq(by = identity) {\n        const uniques = new Set();\n        return this.filter(function (item) {\n            const hashed = by.call(this, item);\n            if (!uniques.has(hashed)) {\n                uniques.add(hashed);\n                return true;\n            }\n            return false;\n        });\n    }\n    /**\n      Prepends the items after those of the current iterator.\n      After this operation, only read the returned iterator instead of the current one.\n      @param {Array|module:asynciterator.AsyncIterator} items Items to insert before this iterator's (remaining) items\n      @returns {module:asynciterator.AsyncIterator} A new iterator that prepends items to this iterator\n    */\n    prepend(items) {\n        return this.transform({ prepend: items });\n    }\n    /**\n      Appends the items after those of the current iterator.\n      After this operation, only read the returned iterator instead of the current one.\n      @param {Array|module:asynciterator.AsyncIterator} items Items to insert after this iterator's (remaining) items\n      @returns {module:asynciterator.AsyncIterator} A new iterator that appends items to this iterator\n    */\n    append(items) {\n        return this.transform({ append: items });\n    }\n    /**\n      Surrounds items of the current iterator with the given items.\n      After this operation, only read the returned iterator instead of the current one.\n      @param {Array|module:asynciterator.AsyncIterator} prepend Items to insert before this iterator's (remaining) items\n      @param {Array|module:asynciterator.AsyncIterator} append Items to insert after this iterator's (remaining) items\n      @returns {module:asynciterator.AsyncIterator} A new iterator that appends and prepends items to this iterator\n    */\n    surround(prepend, append) {\n        return this.transform({ prepend, append });\n    }\n    /**\n      Skips the given number of items from the current iterator.\n      The current iterator may not be read anymore until the returned iterator ends.\n      @param {integer} offset The number of items to skip\n      @returns {module:asynciterator.AsyncIterator} A new iterator that skips the given number of items\n    */\n    skip(offset) {\n        return this.map(item => offset-- > 0 ? null : item);\n    }\n    /**\n      Limits the current iterator to the given number of items.\n      The current iterator may not be read anymore until the returned iterator ends.\n      @param {integer} limit The maximum number of items\n      @returns {module:asynciterator.AsyncIterator} A new iterator with at most the given number of items\n    */\n    take(limit) {\n        return this.transform({ limit });\n    }\n    /**\n      Limits the current iterator to the given range.\n      The current iterator may not be read anymore until the returned iterator ends.\n      @param {integer} start Index of the first item to return\n      @param {integer} end Index of the last item to return\n      @returns {module:asynciterator.AsyncIterator} A new iterator with items in the given range\n    */\n    range(start, end) {\n        return this.transform({ offset: start, limit: Math.max(end - start + 1, 0) });\n    }\n    /**\n      Creates a copy of the current iterator,\n      containing all items emitted from this point onward.\n      Further copies can be created; they will all start from this same point.\n      After this operation, only read the returned copies instead of the original iterator.\n      @returns {module:asynciterator.AsyncIterator} A new iterator that contains all future items of this iterator\n    */\n    clone() {\n        return new ClonedIterator(this);\n    }\n    /**\n     * An AsyncIterator is async iterable.\n     * This allows iterators to be used via the for-await syntax.\n     *\n     * In cases where the returned EcmaScript AsyncIterator will not be fully consumed,\n     * it is recommended to manually listen for error events on the main AsyncIterator\n     * to avoid uncaught error messages.\n     *\n     * @returns {ESAsyncIterator<T>} An EcmaScript AsyncIterator\n     */\n    [Symbol.asyncIterator]() {\n        const it = this;\n        let currentResolve = null;\n        let currentReject = null;\n        let pendingError = null;\n        it.addListener('readable', tryResolve);\n        it.addListener('end', tryResolve);\n        it.addListener('error', tryReject);\n        // Tries to emit an item or signal the end of the iterator\n        function tryResolve() {\n            if (currentResolve !== null) {\n                if (pendingError !== null) {\n                    tryReject(pendingError);\n                }\n                else if (it.done) {\n                    currentResolve({ done: true, value: undefined });\n                    currentResolve = currentReject = null;\n                    removeListeners();\n                }\n                else {\n                    const value = it.read();\n                    if (value !== null) {\n                        currentResolve({ done: false, value });\n                        currentResolve = currentReject = null;\n                    }\n                }\n            }\n        }\n        // Tries to emit an error\n        function tryReject(error) {\n            if (currentReject !== null) {\n                currentReject(error);\n                currentResolve = currentReject = pendingError = null;\n                removeListeners();\n            }\n            else if (pendingError === null) {\n                pendingError = error;\n            }\n        }\n        // Cleans up all attached listeners\n        function removeListeners() {\n            it.removeListener('readable', tryResolve);\n            it.removeListener('end', tryResolve);\n            it.removeListener('error', tryReject);\n        }\n        // An EcmaScript AsyncIterator exposes the next() function that can be invoked repeatedly\n        return {\n            next() {\n                return new Promise((resolve, reject) => {\n                    currentResolve = resolve;\n                    currentReject = reject;\n                    tryResolve();\n                });\n            },\n        };\n    }\n}\nexports.AsyncIterator = AsyncIterator;\n// Starts emitting `data` events when `data` listeners are added\nfunction waitForDataListener(eventName) {\n    if (eventName === 'data') {\n        this.removeListener('newListener', waitForDataListener);\n        addSingleListener(this, 'readable', emitData);\n        if (this.readable)\n            taskScheduler(() => emitData.call(this));\n    }\n}\n// Emits new items though `data` events as long as there are `data` listeners\nfunction emitData() {\n    // While there are `data` listeners and items, emit them\n    let item;\n    while (this.listenerCount('data') !== 0 && (item = this.read()) !== null)\n        this.emit('data', item);\n    // Stop draining the source if there are no more `data` listeners\n    if (this.listenerCount('data') === 0 && !this.done) {\n        this.removeListener('readable', emitData);\n        addSingleListener(this, 'newListener', waitForDataListener);\n    }\n}\n// Adds the listener to the event, if it has not been added previously.\nfunction addSingleListener(source, eventName, listener) {\n    if (!source.listeners(eventName).includes(listener))\n        source.on(eventName, listener);\n}\n/**\n  An iterator that doesn't emit any items.\n  @extends module:asynciterator.AsyncIterator\n*/\nclass EmptyIterator extends AsyncIterator {\n    /** Creates a new `EmptyIterator`. */\n    constructor() {\n        super();\n        this._changeState(exports.ENDED, true);\n    }\n}\nexports.EmptyIterator = EmptyIterator;\n/**\n  An iterator that emits a single item.\n  @extends module:asynciterator.AsyncIterator\n*/\nclass SingletonIterator extends AsyncIterator {\n    /**\n      Creates a new `SingletonIterator`.\n      @param {object} item The item that will be emitted.\n    */\n    constructor(item) {\n        super();\n        this._item = item;\n        if (item === null)\n            this.close();\n        else\n            this.readable = true;\n    }\n    /* Reads the item from the iterator. */\n    read() {\n        const item = this._item;\n        this._item = null;\n        this.close();\n        return item;\n    }\n    /* Generates details for a textual representation of the iterator. */\n    _toStringDetails() {\n        return this._item === null ? '' : `(${this._item})`;\n    }\n}\nexports.SingletonIterator = SingletonIterator;\n/**\n  An iterator that emits the items of a given array.\n  @extends module:asynciterator.AsyncIterator\n*/\nclass ArrayIterator extends AsyncIterator {\n    /**\n      Creates a new `ArrayIterator`.\n      @param {Array} items The items that will be emitted.\n      @param {boolean} [options.autoStart=true] Whether buffering starts directly after construction\n      @param {boolean} [options.preserve=true] If false, the passed array can be safely modified\n    */\n    constructor(items = [], { autoStart = true, preserve = true } = {}) {\n        super();\n        const buffer = preserve || !Array.isArray(items) ? [...items] : items;\n        this._index = 0;\n        this._sourceStarted = autoStart !== false;\n        this._truncateThreshold = preserve ? -1 : 64;\n        if (this._sourceStarted && buffer.length === 0)\n            this.close();\n        else\n            this._buffer = buffer;\n        this.readable = true;\n    }\n    /* Reads an item from the iterator. */\n    read() {\n        if (!this._sourceStarted)\n            this._sourceStarted = true;\n        let item = null;\n        if (this._buffer) {\n            // Emit the current item\n            if (this._index < this._buffer.length)\n                item = this._buffer[this._index++];\n            // Close when all elements have been returned\n            if (this._index === this._buffer.length) {\n                delete this._buffer;\n                this.close();\n            }\n            // Do need keep old items around indefinitely\n            else if (this._index === this._truncateThreshold) {\n                this._buffer.splice(0, this._truncateThreshold);\n                this._index = 0;\n            }\n        }\n        return item;\n    }\n    /* Generates details for a textual representation of the iterator. */\n    _toStringDetails() {\n        return `(${this._buffer ? this._buffer.length - this._index : 0})`;\n    }\n    /* Called by {@link module:asynciterator.AsyncIterator#destroy} */\n    _destroy(cause, callback) {\n        delete this._buffer;\n        callback();\n    }\n    /**\n     Consume all remaining items of the iterator into an array that will be returned asynchronously.\n     @param {object} [options] Settings for array creation\n     @param {integer} [options.limit] The maximum number of items to place in the array.\n     */\n    toArray(options = {}) {\n        if (!this._buffer)\n            return Promise.resolve([]);\n        // Determine start and end index\n        const { length } = this._buffer;\n        const start = this._index;\n        const end = typeof options.limit !== 'number' ? length : start + options.limit;\n        // Slice the items off the buffer\n        const items = this._buffer.slice(start, end);\n        this._index = end;\n        // Close this iterator when we're past the end\n        if (end >= length)\n            this.close();\n        return Promise.resolve(items);\n    }\n}\nexports.ArrayIterator = ArrayIterator;\n/**\n  An iterator that enumerates integers in a certain range.\n  @extends module:asynciterator.AsyncIterator\n*/\nclass IntegerIterator extends AsyncIterator {\n    /**\n      Creates a new `IntegerIterator`.\n      @param {object} [options] Settings of the iterator\n      @param {integer} [options.start=0] The first number to emit\n      @param {integer} [options.end=Infinity] The last number to emit\n      @param {integer} [options.step=1] The increment between two numbers\n    */\n    constructor({ start = 0, step = 1, end } = {}) {\n        super();\n        // Determine the first number\n        if (Number.isFinite(start))\n            start = Math.trunc(start);\n        this._next = start;\n        // Determine step size\n        if (Number.isFinite(step))\n            step = Math.trunc(step);\n        this._step = step;\n        // Determine the last number\n        const ascending = step >= 0;\n        const direction = ascending ? Infinity : -Infinity;\n        if (Number.isFinite(end))\n            end = Math.trunc(end);\n        else if (end !== -direction)\n            end = direction;\n        this._last = end;\n        // Start iteration if there is at least one item; close otherwise\n        if (!Number.isFinite(start) || (ascending ? start > end : start < end))\n            this.close();\n        else\n            this.readable = true;\n    }\n    /* Reads an item from the iterator. */\n    read() {\n        if (this.closed)\n            return null;\n        const current = this._next, step = this._step, last = this._last, next = this._next += step;\n        if (step >= 0 ? next > last : next < last)\n            this.close();\n        return current;\n    }\n    /* Generates details for a textual representation of the iterator. */\n    _toStringDetails() {\n        return `(${this._next}...${this._last})`;\n    }\n}\nexports.IntegerIterator = IntegerIterator;\n/** Function that maps an element to itself. */\nfunction identity(item) {\n    return item;\n}\nexports.identity = identity;\n/** Key indicating the current consumer of a source. */\nexports.DESTINATION = Symbol('destination');\n/**\n An iterator that synchronously transforms every item from its source\n by applying a mapping function.\n @extends module:asynciterator.AsyncIterator\n*/\nclass MappingIterator extends AsyncIterator {\n    /**\n     * Applies the given mapping to the source iterator.\n     */\n    constructor(source, map = identity, options = {}) {\n        super();\n        this._map = map;\n        this._source = ensureSourceAvailable(source);\n        this._destroySource = options.destroySource !== false;\n        // Close if the source is already empty\n        if (source.done) {\n            this.close();\n        }\n        // Otherwise, wire up the source for reading\n        else {\n            this._source[exports.DESTINATION] = this;\n            this._source.on('end', destinationClose);\n            this._source.on('error', destinationEmitError);\n            this._source.on('readable', destinationSetReadable);\n            this.readable = this._source.readable;\n        }\n    }\n    /* Tries to read the next item from the iterator. */\n    read() {\n        if (!this.done) {\n            // Try to read an item that maps to a non-null value\n            if (this._source.readable) {\n                let item, mapped;\n                while ((item = this._source.read()) !== null) {\n                    if ((mapped = this._map(item)) !== null)\n                        return mapped;\n                }\n            }\n            this.readable = false;\n            // Close this iterator if the source is empty\n            if (this._source.done)\n                this.close();\n        }\n        return null;\n    }\n    /* Cleans up the source iterator and ends. */\n    _end(destroy) {\n        this._source.removeListener('end', destinationClose);\n        this._source.removeListener('error', destinationEmitError);\n        this._source.removeListener('readable', destinationSetReadable);\n        delete this._source[exports.DESTINATION];\n        if (this._destroySource)\n            this._source.destroy();\n        super._end(destroy);\n    }\n}\nexports.MappingIterator = MappingIterator;\n// Validates an AsyncIterator for use as a source within another AsyncIterator\nfunction ensureSourceAvailable(source, allowDestination = false) {\n    if (!source || !isFunction(source.read) || !isFunction(source.on))\n        throw new TypeError(`Invalid source: ${source}`);\n    if (!allowDestination && source[exports.DESTINATION])\n        throw new Error('The source already has a destination');\n    return source;\n}\n/**\n  An iterator that maintains an internal buffer of items.\n  This class serves as a base class for other iterators\n  with a typically complex item generation process.\n  @extends module:asynciterator.AsyncIterator\n*/\nclass BufferedIterator extends AsyncIterator {\n    /**\n      Creates a new `BufferedIterator`.\n      @param {object} [options] Settings of the iterator\n      @param {integer} [options.maxBufferSize=4] The number of items to preload in the internal buffer\n      @param {boolean} [options.autoStart=true] Whether buffering starts directly after construction\n    */\n    constructor({ maxBufferSize = 4, autoStart = true } = {}) {\n        super(exports.INIT);\n        this._buffer = new linkedlist_1.LinkedList();\n        this._maxBufferSize = 4;\n        this._reading = true;\n        this._pushedCount = 0;\n        this.maxBufferSize = maxBufferSize;\n        taskScheduler(() => this._init(autoStart));\n        this._sourceStarted = autoStart !== false;\n    }\n    /**\n      The maximum number of items to preload in the internal buffer.\n      A `BufferedIterator` tries to fill its buffer as far as possible.\n      Set to `Infinity` to fully drain the source.\n      @type number\n    */\n    get maxBufferSize() {\n        return this._maxBufferSize;\n    }\n    set maxBufferSize(maxBufferSize) {\n        // Allow only positive integers and infinity\n        if (maxBufferSize !== Infinity) {\n            maxBufferSize = !Number.isFinite(maxBufferSize) ? 4 :\n                Math.max(Math.trunc(maxBufferSize), 1);\n        }\n        // Only set the maximum buffer size if it changes\n        if (this._maxBufferSize !== maxBufferSize) {\n            this._maxBufferSize = maxBufferSize;\n            // Ensure sufficient elements are buffered\n            if (this._state === exports.OPEN)\n                this._fillBuffer();\n        }\n    }\n    /**\n      Initializing the iterator by calling {@link BufferedIterator#_begin}\n      and changing state from INIT to OPEN.\n      @protected\n      @param {boolean} autoStart Whether reading of items should immediately start after OPEN.\n    */\n    _init(autoStart) {\n        // Perform initialization tasks\n        let doneCalled = false;\n        this._reading = true;\n        this._begin(() => {\n            if (doneCalled)\n                throw new Error('done callback called multiple times');\n            doneCalled = true;\n            // Open the iterator and start buffering\n            this._reading = false;\n            this._changeState(exports.OPEN);\n            if (autoStart)\n                this._fillBufferAsync();\n            // If reading should not start automatically, the iterator doesn't become readable.\n            // Therefore, mark the iterator as (potentially) readable so consumers know it might be read.\n            else\n                this.readable = true;\n        });\n    }\n    /**\n      Writes beginning items and opens iterator resources.\n      Should never be called before {@link BufferedIterator#_init};\n      typically, `_init` is responsible for calling `_begin`.\n      @protected\n      @param {function} done To be called when initialization is complete\n    */\n    _begin(done) {\n        done();\n    }\n    /**\n      Tries to read the next item from the iterator.\n      If the buffer is empty,\n      this method calls {@link BufferedIterator#_read} to fetch items.\n      @returns {object?} The next item, or `null` if none is available\n    */\n    read() {\n        if (this.done)\n            return null;\n        // An explicit read kickstarts the source\n        if (!this._sourceStarted)\n            this._sourceStarted = true;\n        // Try to retrieve an item from the buffer\n        const buffer = this._buffer;\n        let item;\n        if (buffer.empty) {\n            item = null;\n            this.readable = false;\n        }\n        else {\n            item = buffer.shift();\n        }\n        // If the buffer is becoming empty, either fill it or end the iterator\n        if (!this._reading && buffer.length < this._maxBufferSize) {\n            // If the iterator is not closed and thus may still generate new items, fill the buffer\n            if (!this.closed)\n                this._fillBufferAsync();\n            // No new items will be generated, so if none are buffered, the iterator ends here\n            else if (buffer.empty)\n                this._endAsync();\n        }\n        return item;\n    }\n    /**\n      Tries to generate the given number of items.\n      Implementers should add `count` items through {@link BufferedIterator#_push}.\n      @protected\n      @param {integer} count The number of items to generate\n      @param {function} done To be called when reading is complete\n    */\n    _read(count, done) {\n        done();\n    }\n    /**\n      Adds an item to the internal buffer.\n      @protected\n      @param {object} item The item to add\n      @emits module:asynciterator.AsyncIterator.readable\n    */\n    _push(item) {\n        if (!this.done) {\n            this._pushedCount++;\n            this._buffer.push(item);\n            this.readable = true;\n        }\n    }\n    /**\n      Fills the internal buffer until `this._maxBufferSize` items are present.\n      This method calls {@link BufferedIterator#_read} to fetch items.\n      @protected\n      @emits module:asynciterator.AsyncIterator.readable\n    */\n    _fillBuffer() {\n        let neededItems;\n        // Avoid recursive reads\n        if (this._reading) {\n            // Do nothing\n        }\n        // If iterator closing started in the meantime, don't generate new items anymore\n        else if (this.closed) {\n            this._completeClose();\n        }\n        // Otherwise, try to fill empty spaces in the buffer by generating new items\n        else if ((neededItems = Math.min(this._maxBufferSize - this._buffer.length, 128)) > 0) {\n            // Acquire reading lock and start reading, counting pushed items\n            this._pushedCount = 0;\n            this._reading = true;\n            this._read(neededItems, () => {\n                // Verify the callback is only called once\n                if (!neededItems)\n                    throw new Error('done callback called multiple times');\n                neededItems = 0;\n                // Release reading lock\n                this._reading = false;\n                // If the iterator was closed while reading, complete closing\n                if (this.closed) {\n                    this._completeClose();\n                }\n                // If the iterator pushed one or more items,\n                // it might currently be able to generate additional items\n                // (even though all pushed items might already have been read)\n                else if (this._pushedCount) {\n                    this.readable = true;\n                    // If the buffer is insufficiently full, continue filling\n                    if (this._buffer.length < this._maxBufferSize / 2)\n                        this._fillBufferAsync();\n                }\n            });\n        }\n    }\n    /**\n      Schedules `_fillBuffer` asynchronously.\n    */\n    _fillBufferAsync() {\n        // Acquire reading lock to avoid recursive reads\n        if (!this._reading) {\n            this._reading = true;\n            taskScheduler(() => {\n                // Release reading lock so _fillBuffer` can take it\n                this._reading = false;\n                this._fillBuffer();\n            });\n        }\n    }\n    /**\n      Stops the iterator from generating new items\n      after a possible pending read operation has finished.\n      Already generated, pending, or terminating items can still be emitted.\n      After this, the iterator will end asynchronously.\n      @emits module:asynciterator.AsyncIterator.end\n    */\n    close() {\n        // If the iterator is not currently reading, we can close immediately\n        if (!this._reading)\n            this._completeClose();\n        // Closing cannot complete when reading, so temporarily assume CLOSING state\n        // `_fillBuffer` becomes responsible for calling `_completeClose`\n        else\n            this._changeState(exports.CLOSING);\n    }\n    /**\n      Stops the iterator from generating new items,\n      switching from `CLOSING` state into `CLOSED` state.\n      @protected\n      @emits module:asynciterator.AsyncIterator.end\n    */\n    _completeClose() {\n        if (this._changeState(exports.CLOSED)) {\n            // Write possible terminating items\n            this._reading = true;\n            this._flush(() => {\n                if (!this._reading)\n                    throw new Error('done callback called multiple times');\n                this._reading = false;\n                // If no items are left, end the iterator\n                // Otherwise, `read` becomes responsible for ending the iterator\n                if (this._buffer.empty)\n                    this._endAsync();\n            });\n        }\n    }\n    /* Called by {@link module:asynciterator.AsyncIterator#destroy} */\n    _destroy(cause, callback) {\n        this._buffer.clear();\n        callback();\n    }\n    /**\n      Writes terminating items and closes iterator resources.\n      Should never be called before {@link BufferedIterator#close};\n      typically, `close` is responsible for calling `_flush`.\n      @protected\n      @param {function} done To be called when termination is complete\n    */\n    _flush(done) {\n        done();\n    }\n    /**\n      Generates details for a textual representation of the iterator.\n      @protected\n     */\n    _toStringDetails() {\n        const buffer = this._buffer;\n        return `{${buffer.empty ? '' : `next: ${buffer.first}, `}buffer: ${buffer.length}}`;\n    }\n}\nexports.BufferedIterator = BufferedIterator;\n/**\n  An iterator that generates items based on a source iterator.\n  This class serves as a base class for other iterators.\n  @extends module:asynciterator.BufferedIterator\n*/\nclass TransformIterator extends BufferedIterator {\n    /**\n      Creates a new `TransformIterator`.\n      @param {module:asynciterator.AsyncIterator|Readable} [source] The source this iterator generates items from\n      @param {object} [options] Settings of the iterator\n      @param {integer} [options.maxBufferSize=4] The maximum number of items to keep in the buffer\n      @param {boolean} [options.autoStart=true] Whether buffering starts directly after construction\n      @param {boolean} [options.optional=false] If transforming is optional, the original item is pushed when its transformation yields no items\n      @param {boolean} [options.destroySource=true] Whether the source should be destroyed when this transformed iterator is closed or destroyed\n      @param {module:asynciterator.AsyncIterator} [options.source] The source this iterator generates items from\n    */\n    constructor(source, options = source || {}) {\n        super(options);\n        this._boundPush = (item) => this._push(item);\n        // Shift parameters if needed\n        if (!isSourceExpression(source))\n            source = options.source;\n        // The passed source is an AsyncIterator or readable stream\n        if (isEventEmitter(source)) {\n            this.source = source;\n        }\n        // The passed value is a promise or source creation function\n        else if (source) {\n            this._createSource = isPromise(source) ? () => source : source;\n            if (this._sourceStarted)\n                this._loadSourceAsync();\n        }\n        // Set other options\n        this._optional = Boolean(options.optional);\n        this._destroySource = options.destroySource !== false;\n    }\n    /**\n      The source this iterator generates items from.\n      @type module:asynciterator.AsyncIterator\n    */\n    get source() {\n        if (isFunction(this._createSource))\n            this._loadSourceAsync();\n        return this._source;\n    }\n    set source(value) {\n        // Validate and set source\n        const source = this._source = this._validateSource(value);\n        source[exports.DESTINATION] = this;\n        // Do not read the source if this iterator already ended\n        if (this.done) {\n            if (this._destroySource)\n                source.destroy();\n        }\n        // Close this iterator if the source already ended\n        else if (source.done) {\n            this.close();\n        }\n        // Otherwise, react to source events\n        else {\n            source.on('end', destinationCloseWhenDone);\n            source.on('readable', destinationFillBuffer);\n            source.on('error', destinationEmitError);\n        }\n    }\n    /**\n      Initializes a source that was set through a promise\n      @protected\n    */\n    _loadSourceAsync() {\n        if (isFunction(this._createSource)) {\n            // Assign the source after resolving\n            Promise.resolve(this._createSource()).then(source => {\n                delete this._createSource;\n                this.source = source;\n                this._fillBuffer();\n            }, error => this.emit('error', error));\n            // Signal that source creation is pending\n            this._createSource = null;\n        }\n    }\n    /**\n      Validates whether the given iterator can be used as a source.\n      @protected\n      @param {object} source The source to validate\n      @param {boolean} allowDestination Whether the source can already have a destination\n    */\n    _validateSource(source, allowDestination = false) {\n        if (this._source || typeof this._createSource !== 'undefined')\n            throw new Error('The source cannot be changed after it has been set');\n        return ensureSourceAvailable(source, allowDestination);\n    }\n    /**\n      Tries to read transformed items.\n    */\n    _read(count, done) {\n        const next = () => {\n            // Continue transforming until at least `count` items have been pushed\n            if (this._pushedCount < count && !this.closed)\n                taskScheduler(() => this._readAndTransform(next, done));\n            else\n                done();\n        };\n        this._readAndTransform(next, done);\n    }\n    /**\n      Reads a transforms an item\n    */\n    _readAndTransform(next, done) {\n        // If the source exists and still can read items,\n        // try to read and transform the next item.\n        let item;\n        const source = this.source;\n        if (!source || source.done || (item = source.read()) === null)\n            done();\n        else if (!this._optional)\n            this._transform(item, next, this._boundPush);\n        else\n            this._optionalTransform(item, next);\n    }\n    /**\n      Tries to transform the item;\n      if the transformation yields no items, pushes the original item.\n    */\n    _optionalTransform(item, done) {\n        const pushedCount = this._pushedCount;\n        this._transform(item, () => {\n            if (pushedCount === this._pushedCount)\n                this._push(item);\n            done();\n        }, this._boundPush);\n    }\n    /**\n      Generates items based on the item from the source.\n      Implementers should add items through {@link BufferedIterator#_push}.\n      The default implementation pushes the source item as-is.\n      @protected\n      @param {object} item The last read item from the source\n      @param {function} done To be called when reading is complete\n      @param {function} push A callback to push zero or more transformation results.\n    */\n    _transform(item, done, push) {\n        push(item);\n        done();\n    }\n    /**\n      Closes the iterator when pending items are transformed.\n      @protected\n    */\n    _closeWhenDone() {\n        this.close();\n    }\n    /* Cleans up the source iterator and ends. */\n    _end(destroy) {\n        const source = this._source;\n        if (source) {\n            source.removeListener('end', destinationCloseWhenDone);\n            source.removeListener('error', destinationEmitError);\n            source.removeListener('readable', destinationFillBuffer);\n            delete source[exports.DESTINATION];\n            if (this._destroySource)\n                source.destroy();\n        }\n        super._end(destroy);\n    }\n}\nexports.TransformIterator = TransformIterator;\nfunction destinationSetReadable() {\n    this[exports.DESTINATION].readable = true;\n}\nfunction destinationEmitError(error) {\n    this[exports.DESTINATION].emit('error', error);\n}\nfunction destinationClose() {\n    this[exports.DESTINATION].close();\n}\nfunction destinationCloseWhenDone() {\n    this[exports.DESTINATION]._closeWhenDone();\n}\nfunction destinationFillBuffer() {\n    if (this[exports.DESTINATION]._sourceStarted !== false)\n        this[exports.DESTINATION]._fillBuffer();\n}\n/**\n  An iterator that generates items based on a source iterator\n  and simple transformation steps passed as arguments.\n  @extends module:asynciterator.TransformIterator\n*/\nclass SimpleTransformIterator extends TransformIterator {\n    /**\n      Creates a new `SimpleTransformIterator`.\n      @param {module:asynciterator.AsyncIterator|Readable} [source] The source this iterator generates items from\n      @param {object|Function} [options] Settings of the iterator, or the transformation function\n      @param {integer} [options.maxbufferSize=4] The maximum number of items to keep in the buffer\n      @param {boolean} [options.autoStart=true] Whether buffering starts directly after construction\n      @param {module:asynciterator.AsyncIterator} [options.source] The source this iterator generates items from\n      @param {integer} [options.offset] The number of items to skip\n      @param {integer} [options.limit] The maximum number of items\n      @param {Function} [options.filter] A function to synchronously filter items from the source\n      @param {Function} [options.map] A function to synchronously transform items from the source\n      @param {Function} [options.transform] A function to asynchronously transform items from the source\n      @param {boolean} [options.optional=false] If transforming is optional, the original item is pushed when its mapping yields `null` or its transformation yields no items\n      @param {Array|module:asynciterator.AsyncIterator} [options.prepend] Items to insert before the source items\n      @param {Array|module:asynciterator.AsyncIterator} [options.append]  Items to insert after the source items\n    */\n    constructor(source, options) {\n        super(source, options);\n        this._offset = 0;\n        this._limit = Infinity;\n        this._filter = (item) => true;\n        // Set transformation steps from the options\n        options = options || (!isSourceExpression(source) ? source : null);\n        if (options) {\n            const transform = isFunction(options) ? options : options.transform;\n            const { limit, offset, filter, map, prepend, append } = options;\n            // Don't emit any items when bounds are unreachable\n            if (offset === Infinity || limit === -Infinity) {\n                this._limit = 0;\n            }\n            else {\n                if (Number.isFinite(offset))\n                    this._offset = Math.max(Math.trunc(offset), 0);\n                if (Number.isFinite(limit))\n                    this._limit = Math.max(Math.trunc(limit), 0);\n                if (isFunction(filter))\n                    this._filter = filter;\n                if (isFunction(map))\n                    this._map = map;\n                this._transform = isFunction(transform) ? transform : null;\n            }\n            if (prepend)\n                this._prepender = isEventEmitter(prepend) ? prepend : fromArray(prepend);\n            if (append)\n                this._appender = isEventEmitter(append) ? append : fromArray(append);\n        }\n    }\n    /* Tries to read and transform items */\n    _read(count, done) {\n        const next = () => this._readAndTransformSimple(count, nextAsync, done);\n        this._readAndTransformSimple(count, nextAsync, done);\n        function nextAsync() {\n            taskScheduler(next);\n        }\n    }\n    /* Reads and transform items */\n    _readAndTransformSimple(count, next, done) {\n        // Verify we have a readable source\n        let item;\n        const { source } = this;\n        if (!source || source.done) {\n            done();\n            return;\n        }\n        // Verify we are still below the limit\n        if (this._limit === 0)\n            this.close();\n        // Try to read the next item until at least `count` items have been pushed\n        while (!this.closed && this._pushedCount < count && (item = source.read()) !== null) {\n            // Verify the item passes the filter and we've reached the offset\n            if (!this._filter(item) || this._offset !== 0 && this._offset--)\n                continue;\n            // Synchronously map the item\n            const mappedItem = typeof this._map === 'undefined' ? item : this._map(item);\n            // Skip `null` items, pushing the original item if the mapping was optional\n            if (mappedItem === null) {\n                if (this._optional)\n                    this._push(item);\n            }\n            // Skip the asynchronous phase if no transformation was specified\n            else if (!isFunction(this._transform)) {\n                this._push(mappedItem);\n            }\n            // Asynchronously transform the item, and wait for `next` to call back\n            else {\n                if (!this._optional)\n                    this._transform(mappedItem, next, this._boundPush);\n                else\n                    this._optionalTransform(mappedItem, next);\n                return;\n            }\n            // Stop when we've reached the limit\n            if (--this._limit === 0)\n                this.close();\n        }\n        done();\n    }\n    // Prepends items to the iterator\n    _begin(done) {\n        this._insert(this._prepender, done);\n        delete this._prepender;\n    }\n    // Appends items to the iterator\n    _flush(done) {\n        this._insert(this._appender, done);\n        delete this._appender;\n    }\n    // Inserts items in the iterator\n    _insert(inserter, done) {\n        const push = (item) => this._push(item);\n        if (!inserter || inserter.done) {\n            done();\n        }\n        else {\n            inserter.on('data', push);\n            inserter.on('end', end);\n        }\n        function end() {\n            inserter.removeListener('data', push);\n            inserter.removeListener('end', end);\n            done();\n        }\n    }\n}\nexports.SimpleTransformIterator = SimpleTransformIterator;\n/**\n  An iterator that generates items by transforming each item of a source\n  with a different iterator.\n  @extends module:asynciterator.TransformIterator\n*/\nclass MultiTransformIterator extends TransformIterator {\n    /**\n     Creates a new `MultiTransformIterator`.\n     @param {module:asynciterator.AsyncIterator|Readable} [source] The source this iterator generates items from\n     @param {object|Function} [options] Settings of the iterator, or the transformation function\n     @param {integer} [options.maxbufferSize=4] The maximum number of items to keep in the buffer\n     @param {boolean} [options.autoStart=true] Whether buffering starts directly after construction\n     @param {module:asynciterator.AsyncIterator} [options.source] The source this iterator generates items from\n     @param {integer} [options.offset] The number of items to skip\n     @param {integer} [options.limit] The maximum number of items\n     @param {Function} [options.filter] A function to synchronously filter items from the source\n     @param {Function} [options.map] A function to synchronously transform items from the source\n     @param {Function} [options.transform] A function to asynchronously transform items from the source\n     @param {boolean} [options.optional=false] If transforming is optional, the original item is pushed when its mapping yields `null` or its transformation yields no items\n     @param {Function} [options.multiTransform] A function to asynchronously transform items to iterators from the source\n     @param {Array|module:asynciterator.AsyncIterator} [options.prepend] Items to insert before the source items\n     @param {Array|module:asynciterator.AsyncIterator} [options.append]  Items to insert after the source items\n     */\n    constructor(source, options) {\n        super(source, options);\n        this._transformerQueue = [];\n        // Set transformation steps from the options\n        if (options) {\n            const multiTransform = isFunction(options) ? options : options.multiTransform;\n            if (multiTransform)\n                this._createTransformer = multiTransform;\n        }\n    }\n    /* Tries to read and transform items */\n    _read(count, done) {\n        // Remove transformers that have ended\n        const transformerQueue = this._transformerQueue, optional = this._optional;\n        let head, item;\n        while ((head = transformerQueue[0]) && head.transformer.done) {\n            // If transforming is optional, push the original item if none was pushed\n            if (optional && head.item !== null) {\n                count--;\n                this._push(head.item);\n            }\n            // Remove listeners from the transformer\n            transformerQueue.shift();\n            const { transformer } = head;\n            transformer.removeListener('end', destinationFillBuffer);\n            transformer.removeListener('readable', destinationFillBuffer);\n            transformer.removeListener('error', destinationEmitError);\n        }\n        // Create new transformers if there are less than the maximum buffer size\n        const { source } = this;\n        while (source && !source.done && transformerQueue.length < this.maxBufferSize) {\n            // Read an item to create the next transformer\n            item = source.read();\n            if (item === null)\n                break;\n            // Create the transformer and listen to its events\n            const transformer = (this._createTransformer(item) ||\n                new EmptyIterator());\n            transformer[exports.DESTINATION] = this;\n            transformer.on('end', destinationFillBuffer);\n            transformer.on('readable', destinationFillBuffer);\n            transformer.on('error', destinationEmitError);\n            transformerQueue.push({ transformer, item });\n        }\n        // Try to read `count` items from the transformer\n        head = transformerQueue[0];\n        if (head) {\n            const { transformer } = head;\n            while (count-- > 0 && (item = transformer.read()) !== null) {\n                this._push(item);\n                // If a transformed item was pushed, no need to push the original anymore\n                if (optional)\n                    head.item = null;\n            }\n        }\n        // End the iterator if the source has ended\n        else if (source && source.done) {\n            this.close();\n        }\n        done();\n    }\n    /**\n      Creates a transformer for the given item.\n      @param {object} item The last read item from the source\n      @returns {module:asynciterator.AsyncIterator} An iterator that transforms the given item\n    */\n    _createTransformer(item) {\n        return new SingletonIterator(item);\n    }\n    /* Closes the iterator when pending items are transformed. */\n    _closeWhenDone() {\n        // Only close if all transformers are read\n        if (!this._transformerQueue.length)\n            this.close();\n    }\n    _end(destroy) {\n        super._end(destroy);\n        // Also destroy the open transformers left in the queue\n        if (this._destroySource) {\n            for (const item of this._transformerQueue)\n                item.transformer.destroy();\n        }\n    }\n}\nexports.MultiTransformIterator = MultiTransformIterator;\n/**\n  An iterator that generates items by reading from multiple other iterators.\n  @extends module:asynciterator.BufferedIterator\n*/\nclass UnionIterator extends BufferedIterator {\n    /**\n      Creates a new `UnionIterator`.\n      @param {module:asynciterator.AsyncIterator|Array} [sources] The sources to read from\n      @param {object} [options] Settings of the iterator\n      @param {boolean} [options.destroySource=true] Whether the sources should be destroyed when transformed iterator is closed or destroyed\n    */\n    constructor(sources, options = {}) {\n        super(options);\n        this._sources = [];\n        this._currentSource = -1;\n        const autoStart = options.autoStart !== false;\n        // Sources have been passed as an iterator\n        if (isEventEmitter(sources)) {\n            sources.on('error', error => this.emit('error', error));\n            this._pending = { loading: false, sources: sources };\n            if (autoStart)\n                this._loadSources();\n        }\n        // Sources have been passed as a non-empty array\n        else if (Array.isArray(sources) && sources.length > 0) {\n            for (const source of sources)\n                this._addSource(source);\n        }\n        // Sources are an empty list\n        else if (autoStart) {\n            this.close();\n        }\n        // Set other options\n        this._destroySources = options.destroySources !== false;\n    }\n    // Loads pending sources into the sources list\n    _loadSources() {\n        // Obtain sources iterator\n        const sources = this._pending.sources;\n        this._pending.loading = true;\n        // Close immediately if done\n        if (sources.done) {\n            delete this._pending;\n            this.close();\n        }\n        // Otherwise, set up source reading\n        else {\n            sources.on('data', source => {\n                this._addSource(source);\n                this._fillBufferAsync();\n            });\n            sources.on('end', () => {\n                delete this._pending;\n                this._fillBuffer();\n            });\n        }\n    }\n    // Adds the given source to the internal sources array\n    _addSource(source) {\n        if (isPromise(source))\n            source = wrap(source);\n        if (!source.done) {\n            this._sources.push(source);\n            source[exports.DESTINATION] = this;\n            source.on('error', destinationEmitError);\n            source.on('readable', destinationFillBuffer);\n            source.on('end', destinationRemoveEmptySources);\n        }\n    }\n    // Removes sources that will no longer emit items\n    _removeEmptySources() {\n        this._sources = this._sources.filter((source, index) => {\n            // Adjust the index of the current source if needed\n            if (source.done && index <= this._currentSource)\n                this._currentSource--;\n            return !source.done;\n        });\n        this._fillBuffer();\n    }\n    // Reads items from the next sources\n    _read(count, done) {\n        var _a;\n        // Start source loading if needed\n        if (((_a = this._pending) === null || _a === void 0 ? void 0 : _a.loading) === false)\n            this._loadSources();\n        // Try to read `count` items\n        let lastCount = 0, item;\n        while (lastCount !== (lastCount = count)) {\n            // Try every source at least once\n            for (let i = 0; i < this._sources.length && count > 0; i++) {\n                // Pick the next source\n                this._currentSource = (this._currentSource + 1) % this._sources.length;\n                const source = this._sources[this._currentSource];\n                // Attempt to read an item from that source\n                if ((item = source.read()) !== null) {\n                    count--;\n                    this._push(item);\n                }\n            }\n        }\n        // Close this iterator if all of its sources have been read\n        if (!this._pending && this._sources.length === 0)\n            this.close();\n        done();\n    }\n    _end(destroy = false) {\n        super._end(destroy);\n        // Destroy all sources that are still readable\n        if (this._destroySources) {\n            for (const source of this._sources)\n                source.destroy();\n            // Also close the sources stream if applicable\n            if (this._pending) {\n                this._pending.sources.destroy();\n                delete this._pending;\n            }\n        }\n    }\n}\nexports.UnionIterator = UnionIterator;\nfunction destinationRemoveEmptySources() {\n    this[exports.DESTINATION]._removeEmptySources();\n}\n/**\n  An iterator that copies items from another iterator.\n  @extends module:asynciterator.TransformIterator\n*/\nclass ClonedIterator extends TransformIterator {\n    /**\n      Creates a new `ClonedIterator`.\n      @param {module:asynciterator.AsyncIterator|Readable} [source] The source this iterator copies items from\n    */\n    constructor(source) {\n        super(source, { autoStart: false });\n        this._readPosition = 0;\n        this._reading = false;\n        // As cloned iterators are not auto-started, they must always be marked as readable.\n        if (source)\n            this.readable = true;\n    }\n    _init() {\n        // skip buffered iterator initialization, since we read from history\n    }\n    close() {\n        // skip buffered iterator cleanup\n        AsyncIterator.prototype.close.call(this);\n    }\n    // The source this iterator copies items from\n    get source() {\n        return super.source;\n    }\n    set source(value) {\n        // Validate and set the source\n        const source = this._source = this._validateSource(value);\n        // Create a history reader for the source if none already existed\n        const history = (source && source[exports.DESTINATION]) ||\n            (source[exports.DESTINATION] = new HistoryReader(source));\n        // Do not read the source if this iterator already ended\n        if (this.done) {\n            if (this._destroySource)\n                source.destroy();\n        }\n        // Close this clone if history is empty and the source has ended\n        else if (history.endsAt(0)) {\n            this.close();\n        }\n        else {\n            // Subscribe to history events\n            history.register(this);\n            // If there are already items in history, this clone is readable\n            // If the source has a lazy start, always mark this iterator as readable without eagerly triggering a read.\n            if (source._sourceStarted === false || history.readAt(0) !== null)\n                this.readable = true;\n        }\n        // Hook pending property callbacks to the source\n        const propertyCallbacks = this._propertyCallbacks;\n        for (const propertyName in propertyCallbacks) {\n            const callbacks = propertyCallbacks[propertyName];\n            for (const callback of callbacks)\n                this._getSourceProperty(propertyName, callback);\n        }\n    }\n    /**\n      Validates whether the given iterator can be used as a source.\n      @protected\n      @param {object} source The source to validate\n      @param {boolean} allowDestination Whether the source can already have a destination\n    */\n    _validateSource(source, allowDestination = false) {\n        const history = (source && source[exports.DESTINATION]);\n        return super._validateSource(source, !history || history instanceof HistoryReader);\n    }\n    // Retrieves the property with the given name from the clone or its source.\n    getProperty(propertyName, callback) {\n        const { source } = this, properties = this._properties, hasProperty = properties && (propertyName in properties);\n        // If no callback was passed, return the property value\n        if (!callback) {\n            return hasProperty ? properties && properties[propertyName] :\n                source && source.getProperty(propertyName);\n        }\n        // Try to look up the property in this clone\n        super.getProperty(propertyName, callback);\n        // If the property is not set on this clone, it might become set on the source first\n        if (source && !hasProperty)\n            this._getSourceProperty(propertyName, callback);\n        return undefined;\n    }\n    // Retrieves the property with the given name from the source\n    _getSourceProperty(propertyName, callback) {\n        this.source.getProperty(propertyName, value => {\n            // Only send the source's property if it was not set on the clone in the meantime\n            if (!this._properties || !(propertyName in this._properties))\n                callback(value);\n        });\n    }\n    // Retrieves all properties of the iterator and its source.\n    getProperties() {\n        const base = this.source ? this.source.getProperties() : {}, properties = this._properties;\n        for (const name in properties)\n            base[name] = properties[name];\n        return base;\n    }\n    /* Generates details for a textual representation of the iterator. */\n    _toStringDetails() {\n        return `{source: ${this.source ? this.source.toString() : 'none'}}`;\n    }\n    /* Tries to read an item */\n    read() {\n        // An explicit read kickstarts the source\n        if (!this._sourceStarted)\n            this._sourceStarted = true;\n        const source = this.source;\n        let item = null;\n        if (!this.done && source) {\n            // Try to read an item at the current point in history\n            const history = source[exports.DESTINATION];\n            if ((item = history.readAt(this._readPosition)) !== null)\n                this._readPosition++;\n            else\n                this.readable = false;\n            // Close the iterator if we are at the end of the source\n            if (history.endsAt(this._readPosition))\n                this.close();\n        }\n        return item;\n    }\n    /* End the iterator and cleans up. */\n    _end(destroy) {\n        // Unregister from a possible history reader\n        const source = this.source;\n        const history = source === null || source === void 0 ? void 0 : source[exports.DESTINATION];\n        if (history)\n            history.unregister(this);\n        // Don't call TransformIterator#_end,\n        // as it would make the source inaccessible for other clones\n        BufferedIterator.prototype._end.call(this, destroy);\n    }\n}\nexports.ClonedIterator = ClonedIterator;\n// Stores the history of a source, so it can be cloned\nclass HistoryReader {\n    constructor(source) {\n        this._history = [];\n        this._trackers = new Set();\n        this._source = source;\n        // If the source is still live, set up clone tracking;\n        // otherwise, the clones just read from the finished history\n        if (!source.done) {\n            // When the source becomes readable, makes all clones readable\n            const setReadable = () => {\n                for (const tracker of this._trackers)\n                    tracker.readable = true;\n            };\n            // When the source errors, re-emits the error\n            const emitError = (error) => {\n                for (const tracker of this._trackers)\n                    tracker.emit('error', error);\n            };\n            // When the source ends, closes all clones that are fully read\n            const end = () => {\n                // Close the clone if all items had been emitted\n                for (const tracker of this._trackers) {\n                    if (tracker._sourceStarted !== false &&\n                        tracker._readPosition === this._history.length)\n                        tracker.close();\n                }\n                this._trackers.clear();\n                // Remove source listeners, since no further events will be emitted\n                source.removeListener('end', end);\n                source.removeListener('error', emitError);\n                source.removeListener('readable', setReadable);\n            };\n            // Listen to source events to trigger events in subscribed clones\n            source.on('end', end);\n            source.on('error', emitError);\n            source.on('readable', setReadable);\n        }\n    }\n    // Registers a clone for history updates\n    register(clone) {\n        // Tracking is only needed if the source is still live\n        if (!this._source.done)\n            this._trackers.add(clone);\n    }\n    // Unregisters a clone for history updates\n    unregister(clone) {\n        this._trackers.delete(clone);\n    }\n    // Tries to read the item at the given history position\n    readAt(pos) {\n        let item = null;\n        // Retrieve an item from history when available\n        if (pos < this._history.length)\n            item = this._history[pos];\n        // Read a new item from the source when possible\n        else if (!this._source.done && (item = this._source.read()) !== null)\n            this._history[pos] = item;\n        return item;\n    }\n    // Determines whether the given position is the end of the source\n    endsAt(pos) {\n        return this._source.done && this._history.length === pos;\n    }\n}\n/**\n * An iterator that takes a variety of iterable objects as a source.\n */\nclass WrappingIterator extends AsyncIterator {\n    constructor(source, opts) {\n        super();\n        this._source = null;\n        this._destroySource = (opts === null || opts === void 0 ? void 0 : opts.destroySource) !== false;\n        // If promise, set up a temporary source and replace when ready\n        if (isPromise(source)) {\n            this._source = new AsyncIterator();\n            source.then(value => {\n                this._source = null;\n                this.source = value;\n            }).catch(error => this.emit('error', error));\n        }\n        // Otherwise, set the source synchronously\n        else if (source) {\n            this.source = source;\n        }\n    }\n    set source(value) {\n        let source = value;\n        if (this._source !== null)\n            throw new Error('The source cannot be changed after it has been set');\n        // Process an iterable source\n        if (isIterable(source))\n            source = source[Symbol.iterator]();\n        // Process an iterator source\n        if (isIterator(source)) {\n            let iterator = source;\n            source = new events_1.EventEmitter();\n            source.read = () => {\n                if (iterator !== null) {\n                    // Skip any null values inside of the iterator\n                    let next;\n                    while (!(next = iterator.next()).done) {\n                        if (next.value !== null)\n                            return next.value;\n                    }\n                    // No remaining values, so stop iterating\n                    iterator = null;\n                    this.close();\n                }\n                return null;\n            };\n        }\n        // Process any other readable source\n        else {\n            source = ensureSourceAvailable(source);\n        }\n        // Do not change sources if the iterator is already done\n        if (this.done) {\n            if (this._destroySource && isFunction(source.destroy))\n                source.destroy();\n            return;\n        }\n        // Set up event handling\n        source[exports.DESTINATION] = this;\n        source.on('end', destinationClose);\n        source.on('error', destinationEmitError);\n        source.on('readable', destinationSetReadable);\n        // Enable reading from source\n        this._source = source;\n        this.readable = source.readable !== false;\n    }\n    read() {\n        if (this._source !== null && this._source.readable !== false) {\n            const item = this._source.read();\n            if (item !== null)\n                return item;\n            this.readable = false;\n        }\n        return null;\n    }\n    _end(destroy = false) {\n        if (this._source !== null) {\n            this._source.removeListener('end', destinationClose);\n            this._source.removeListener('error', destinationEmitError);\n            this._source.removeListener('readable', destinationSetReadable);\n            delete this._source[exports.DESTINATION];\n            if (this._destroySource && isFunction(this._source.destroy))\n                this._source.destroy();\n            this._source = null;\n        }\n        super._end(destroy);\n    }\n}\nexports.WrappingIterator = WrappingIterator;\n/**\n  Creates an iterator that wraps around a given iterator or readable stream.\n  Use this to convert an iterator-like object into a full-featured AsyncIterator.\n  After this operation, only read the returned iterator instead of the given one.\n  @function\n  @param [source] The source this iterator generates items from\n  @param {object} [options] Settings of the iterator\n  @returns {module:asynciterator.AsyncIterator} A new iterator with the items from the given iterator\n*/\nfunction wrap(source, options) {\n    // For backward compatibility, always use TransformIterator when options are specified\n    if (options && ('autoStart' in options || 'optional' in options || 'source' in options || 'maxBufferSize' in options)) {\n        if (source && !isEventEmitter(source))\n            source = new WrappingIterator(source);\n        return new TransformIterator(source, options);\n    }\n    // Empty iterator if no source specified\n    if (!source)\n        return empty();\n    // Unwrap promised sources\n    if (isPromise(source))\n        return new WrappingIterator(source, options);\n    // Directly return any AsyncIterator\n    if (source instanceof AsyncIterator)\n        return source;\n    // Other iterable objects\n    if (Array.isArray(source))\n        return fromArray(source);\n    if (isIterable(source) || isIterator(source) || isEventEmitter(source))\n        return new WrappingIterator(source, options);\n    // Other types are unsupported\n    throw new TypeError(`Invalid source: ${source}`);\n}\nexports.wrap = wrap;\n/**\n  Creates an empty iterator.\n */\nfunction empty() {\n    return new EmptyIterator();\n}\nexports.empty = empty;\n/**\n  Creates an iterator with a single item.\n  @param {object} item the item\n */\nfunction single(item) {\n    return new SingletonIterator(item);\n}\nexports.single = single;\n/**\n  Creates an iterator for the given array.\n  @param {Array} items the items\n */\nfunction fromArray(items) {\n    return new ArrayIterator(items);\n}\nexports.fromArray = fromArray;\n/**\n Creates an iterator for the given Iterator.\n @param {Iterable} source the iterator\n */\nfunction fromIterator(source) {\n    return new WrappingIterator(source);\n}\nexports.fromIterator = fromIterator;\n/**\n Creates an iterator for the given Iterable.\n @param {Iterable} source the iterable\n */\nfunction fromIterable(source) {\n    return new WrappingIterator(source);\n}\nexports.fromIterable = fromIterable;\n/**\n  Creates an iterator containing all items from the given iterators.\n  @param {Array} items the items\n */\nfunction union(sources) {\n    return new UnionIterator(sources);\n}\nexports.union = union;\n/**\n  Creates an iterator of integers for the given numeric range.\n  @param {Array} items the items\n */\nfunction range(start, end, step) {\n    return new IntegerIterator({ start, end, step });\n}\nexports.range = range;\n// Returns a function that calls `fn` with `self` as `this` pointer. */\nfunction bind(fn, self) {\n    return self ? fn.bind(self) : fn;\n}\n// Determines whether the given object is a function\nfunction isFunction(object) {\n    return typeof object === 'function';\n}\nexports.isFunction = isFunction;\n// Determines whether the given object is an EventEmitter\nfunction isEventEmitter(object) {\n    return isFunction(object === null || object === void 0 ? void 0 : object.on);\n}\nexports.isEventEmitter = isEventEmitter;\n// Determines whether the given object is a promise\nfunction isPromise(object) {\n    return isFunction(object === null || object === void 0 ? void 0 : object.then);\n}\nexports.isPromise = isPromise;\n// Determines whether the given object is a source expression\nfunction isSourceExpression(object) {\n    return object && (isEventEmitter(object) || isPromise(object) || isFunction(object));\n}\nexports.isSourceExpression = isSourceExpression;\n// Determines whether the given object supports the iterable protocol\nfunction isIterable(object) {\n    return object && (Symbol.iterator in object);\n}\nexports.isIterable = isIterable;\n// Determines whether the given object supports the iterator protocol\nfunction isIterator(object) {\n    return isFunction(object === null || object === void 0 ? void 0 : object.next);\n}\nexports.isIterator = isIterator;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedList = void 0;\n/**\n * A list with O(1) push and shift operations.\n */\nclass LinkedList {\n    constructor() {\n        this._length = 0;\n        this._head = null;\n        this._tail = null;\n    }\n    get length() { return this._length; }\n    get first() { var _a; return (_a = this._head) === null || _a === void 0 ? void 0 : _a.value; }\n    get last() { var _a; return (_a = this._tail) === null || _a === void 0 ? void 0 : _a.value; }\n    get empty() { return this._head === null; }\n    push(value) {\n        const node = { value, next: null };\n        if (this._tail === null)\n            this._head = this._tail = node;\n        else\n            this._tail.next = this._tail = node;\n        this._length++;\n    }\n    shift() {\n        if (this._head === null)\n            return undefined;\n        const { value, next } = this._head;\n        this._head = next;\n        if (next === null)\n            this._tail = null;\n        this._length--;\n        return value;\n    }\n    clear() {\n        this._length = 0;\n        this._head = this._tail = null;\n    }\n}\nexports.LinkedList = LinkedList;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createTaskScheduler = void 0;\nconst resolved = Promise.resolve(undefined);\n// Returns a function that asynchronously schedules a task\nfunction createTaskScheduler() {\n    // Use or create a microtask scheduler\n    const scheduleMicrotask = typeof queueMicrotask === 'function' ?\n        queueMicrotask : (task) => resolved.then(task);\n    // Use or create a macrotask scheduler\n    const scheduleMacrotask = typeof setImmediate === 'function' ?\n        setImmediate : (task) => setTimeout(task, 0);\n    // Interrupt with a macrotask every once in a while to avoid freezing\n    let i = 0;\n    let queue = null;\n    return (task) => {\n        // Tasks are currently being queued to avoid freezing\n        if (queue !== null)\n            queue.push(task);\n        // Tasks are being scheduled normally as microtasks\n        else if (++i < 100)\n            scheduleMicrotask(task);\n        // A macrotask interruption is needed\n        else {\n            // Hold all tasks in a queue, and reschedule them after a macrotask\n            queue = [task];\n            scheduleMacrotask(() => {\n                // Work through the queue\n                for (const queued of queue)\n                    scheduleMicrotask(queued);\n                queue = null;\n                // Reset the interruption schedule\n                i = 0;\n            });\n        }\n    };\n}\nexports.createTaskScheduler = createTaskScheduler;\n","\"use strict\";\n/**\n * @module LRUCache\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = void 0;\nconst perf = typeof performance === 'object' &&\n    performance &&\n    typeof performance.now === 'function'\n    ? performance\n    : Date;\nconst warned = new Set();\n/* c8 ignore start */\nconst PROCESS = (typeof process === 'object' && !!process ? process : {});\n/* c8 ignore start */\nconst emitWarning = (msg, type, code, fn) => {\n    typeof PROCESS.emitWarning === 'function'\n        ? PROCESS.emitWarning(msg, type, code, fn)\n        : console.error(`[${code}] ${type}: ${msg}`);\n};\nlet AC = globalThis.AbortController;\nlet AS = globalThis.AbortSignal;\n/* c8 ignore start */\nif (typeof AC === 'undefined') {\n    //@ts-ignore\n    AS = class AbortSignal {\n        onabort;\n        _onabort = [];\n        reason;\n        aborted = false;\n        addEventListener(_, fn) {\n            this._onabort.push(fn);\n        }\n    };\n    //@ts-ignore\n    AC = class AbortController {\n        constructor() {\n            warnACPolyfill();\n        }\n        signal = new AS();\n        abort(reason) {\n            if (this.signal.aborted)\n                return;\n            //@ts-ignore\n            this.signal.reason = reason;\n            //@ts-ignore\n            this.signal.aborted = true;\n            //@ts-ignore\n            for (const fn of this.signal._onabort) {\n                fn(reason);\n            }\n            this.signal.onabort?.(reason);\n        }\n    };\n    let printACPolyfillWarning = PROCESS.env?.LRU_CACHE_IGNORE_AC_WARNING !== '1';\n    const warnACPolyfill = () => {\n        if (!printACPolyfillWarning)\n            return;\n        printACPolyfillWarning = false;\n        emitWarning('AbortController is not defined. If using lru-cache in ' +\n            'node 14, load an AbortController polyfill from the ' +\n            '`node-abort-controller` package. A minimal polyfill is ' +\n            'provided for use by LRUCache.fetch(), but it should not be ' +\n            'relied upon in other contexts (eg, passing it to other APIs that ' +\n            'use AbortController/AbortSignal might have undesirable effects). ' +\n            'You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.', 'NO_ABORT_CONTROLLER', 'ENOTSUP', warnACPolyfill);\n    };\n}\n/* c8 ignore stop */\nconst shouldWarn = (code) => !warned.has(code);\nconst TYPE = Symbol('type');\nconst isPosInt = (n) => n && n === Math.floor(n) && n > 0 && isFinite(n);\n/* c8 ignore start */\n// This is a little bit ridiculous, tbh.\n// The maximum array length is 2^32-1 or thereabouts on most JS impls.\n// And well before that point, you're caching the entire world, I mean,\n// that's ~32GB of just integers for the next/prev links, plus whatever\n// else to hold that many keys and values.  Just filling the memory with\n// zeroes at init time is brutal when you get that big.\n// But why not be complete?\n// Maybe in the future, these limits will have expanded.\nconst getUintArray = (max) => !isPosInt(max)\n    ? null\n    : max <= Math.pow(2, 8)\n        ? Uint8Array\n        : max <= Math.pow(2, 16)\n            ? Uint16Array\n            : max <= Math.pow(2, 32)\n                ? Uint32Array\n                : max <= Number.MAX_SAFE_INTEGER\n                    ? ZeroArray\n                    : null;\n/* c8 ignore stop */\nclass ZeroArray extends Array {\n    constructor(size) {\n        super(size);\n        this.fill(0);\n    }\n}\nclass Stack {\n    heap;\n    length;\n    // private constructor\n    static #constructing = false;\n    static create(max) {\n        const HeapCls = getUintArray(max);\n        if (!HeapCls)\n            return [];\n        Stack.#constructing = true;\n        const s = new Stack(max, HeapCls);\n        Stack.#constructing = false;\n        return s;\n    }\n    constructor(max, HeapCls) {\n        /* c8 ignore start */\n        if (!Stack.#constructing) {\n            throw new TypeError('instantiate Stack using Stack.create(n)');\n        }\n        /* c8 ignore stop */\n        this.heap = new HeapCls(max);\n        this.length = 0;\n    }\n    push(n) {\n        this.heap[this.length++] = n;\n    }\n    pop() {\n        return this.heap[--this.length];\n    }\n}\n/**\n * Default export, the thing you're using this module to get.\n *\n * All properties from the options object (with the exception of\n * {@link OptionsBase.max} and {@link OptionsBase.maxSize}) are added as\n * normal public members. (`max` and `maxBase` are read-only getters.)\n * Changing any of these will alter the defaults for subsequent method calls,\n * but is otherwise safe.\n */\nclass LRUCache {\n    // properties coming in from the options of these, only max and maxSize\n    // really *need* to be protected. The rest can be modified, as they just\n    // set defaults for various methods.\n    #max;\n    #maxSize;\n    #dispose;\n    #disposeAfter;\n    #fetchMethod;\n    /**\n     * {@link LRUCache.OptionsBase.ttl}\n     */\n    ttl;\n    /**\n     * {@link LRUCache.OptionsBase.ttlResolution}\n     */\n    ttlResolution;\n    /**\n     * {@link LRUCache.OptionsBase.ttlAutopurge}\n     */\n    ttlAutopurge;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnGet}\n     */\n    updateAgeOnGet;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnHas}\n     */\n    updateAgeOnHas;\n    /**\n     * {@link LRUCache.OptionsBase.allowStale}\n     */\n    allowStale;\n    /**\n     * {@link LRUCache.OptionsBase.noDisposeOnSet}\n     */\n    noDisposeOnSet;\n    /**\n     * {@link LRUCache.OptionsBase.noUpdateTTL}\n     */\n    noUpdateTTL;\n    /**\n     * {@link LRUCache.OptionsBase.maxEntrySize}\n     */\n    maxEntrySize;\n    /**\n     * {@link LRUCache.OptionsBase.sizeCalculation}\n     */\n    sizeCalculation;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnFetchRejection}\n     */\n    noDeleteOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnStaleGet}\n     */\n    noDeleteOnStaleGet;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort}\n     */\n    allowStaleOnFetchAbort;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchRejection}\n     */\n    allowStaleOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.ignoreFetchAbort}\n     */\n    ignoreFetchAbort;\n    // computed properties\n    #size;\n    #calculatedSize;\n    #keyMap;\n    #keyList;\n    #valList;\n    #next;\n    #prev;\n    #head;\n    #tail;\n    #free;\n    #disposed;\n    #sizes;\n    #starts;\n    #ttls;\n    #hasDispose;\n    #hasFetchMethod;\n    #hasDisposeAfter;\n    /**\n     * Do not call this method unless you need to inspect the\n     * inner workings of the cache.  If anything returned by this\n     * object is modified in any way, strange breakage may occur.\n     *\n     * These fields are private for a reason!\n     *\n     * @internal\n     */\n    static unsafeExposeInternals(c) {\n        return {\n            // properties\n            starts: c.#starts,\n            ttls: c.#ttls,\n            sizes: c.#sizes,\n            keyMap: c.#keyMap,\n            keyList: c.#keyList,\n            valList: c.#valList,\n            next: c.#next,\n            prev: c.#prev,\n            get head() {\n                return c.#head;\n            },\n            get tail() {\n                return c.#tail;\n            },\n            free: c.#free,\n            // methods\n            isBackgroundFetch: (p) => c.#isBackgroundFetch(p),\n            backgroundFetch: (k, index, options, context) => c.#backgroundFetch(k, index, options, context),\n            moveToTail: (index) => c.#moveToTail(index),\n            indexes: (options) => c.#indexes(options),\n            rindexes: (options) => c.#rindexes(options),\n            isStale: (index) => c.#isStale(index),\n        };\n    }\n    // Protected read-only members\n    /**\n     * {@link LRUCache.OptionsBase.max} (read-only)\n     */\n    get max() {\n        return this.#max;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.maxSize} (read-only)\n     */\n    get maxSize() {\n        return this.#maxSize;\n    }\n    /**\n     * The total computed size of items in the cache (read-only)\n     */\n    get calculatedSize() {\n        return this.#calculatedSize;\n    }\n    /**\n     * The number of items stored in the cache (read-only)\n     */\n    get size() {\n        return this.#size;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.fetchMethod} (read-only)\n     */\n    get fetchMethod() {\n        return this.#fetchMethod;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.dispose} (read-only)\n     */\n    get dispose() {\n        return this.#dispose;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.disposeAfter} (read-only)\n     */\n    get disposeAfter() {\n        return this.#disposeAfter;\n    }\n    constructor(options) {\n        const { max = 0, ttl, ttlResolution = 1, ttlAutopurge, updateAgeOnGet, updateAgeOnHas, allowStale, dispose, disposeAfter, noDisposeOnSet, noUpdateTTL, maxSize = 0, maxEntrySize = 0, sizeCalculation, fetchMethod, noDeleteOnFetchRejection, noDeleteOnStaleGet, allowStaleOnFetchRejection, allowStaleOnFetchAbort, ignoreFetchAbort, } = options;\n        if (max !== 0 && !isPosInt(max)) {\n            throw new TypeError('max option must be a nonnegative integer');\n        }\n        const UintArray = max ? getUintArray(max) : Array;\n        if (!UintArray) {\n            throw new Error('invalid max value: ' + max);\n        }\n        this.#max = max;\n        this.#maxSize = maxSize;\n        this.maxEntrySize = maxEntrySize || this.#maxSize;\n        this.sizeCalculation = sizeCalculation;\n        if (this.sizeCalculation) {\n            if (!this.#maxSize && !this.maxEntrySize) {\n                throw new TypeError('cannot set sizeCalculation without setting maxSize or maxEntrySize');\n            }\n            if (typeof this.sizeCalculation !== 'function') {\n                throw new TypeError('sizeCalculation set to non-function');\n            }\n        }\n        if (fetchMethod !== undefined &&\n            typeof fetchMethod !== 'function') {\n            throw new TypeError('fetchMethod must be a function if specified');\n        }\n        this.#fetchMethod = fetchMethod;\n        this.#hasFetchMethod = !!fetchMethod;\n        this.#keyMap = new Map();\n        this.#keyList = new Array(max).fill(undefined);\n        this.#valList = new Array(max).fill(undefined);\n        this.#next = new UintArray(max);\n        this.#prev = new UintArray(max);\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free = Stack.create(max);\n        this.#size = 0;\n        this.#calculatedSize = 0;\n        if (typeof dispose === 'function') {\n            this.#dispose = dispose;\n        }\n        if (typeof disposeAfter === 'function') {\n            this.#disposeAfter = disposeAfter;\n            this.#disposed = [];\n        }\n        else {\n            this.#disposeAfter = undefined;\n            this.#disposed = undefined;\n        }\n        this.#hasDispose = !!this.#dispose;\n        this.#hasDisposeAfter = !!this.#disposeAfter;\n        this.noDisposeOnSet = !!noDisposeOnSet;\n        this.noUpdateTTL = !!noUpdateTTL;\n        this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection;\n        this.allowStaleOnFetchRejection = !!allowStaleOnFetchRejection;\n        this.allowStaleOnFetchAbort = !!allowStaleOnFetchAbort;\n        this.ignoreFetchAbort = !!ignoreFetchAbort;\n        // NB: maxEntrySize is set to maxSize if it's set\n        if (this.maxEntrySize !== 0) {\n            if (this.#maxSize !== 0) {\n                if (!isPosInt(this.#maxSize)) {\n                    throw new TypeError('maxSize must be a positive integer if specified');\n                }\n            }\n            if (!isPosInt(this.maxEntrySize)) {\n                throw new TypeError('maxEntrySize must be a positive integer if specified');\n            }\n            this.#initializeSizeTracking();\n        }\n        this.allowStale = !!allowStale;\n        this.noDeleteOnStaleGet = !!noDeleteOnStaleGet;\n        this.updateAgeOnGet = !!updateAgeOnGet;\n        this.updateAgeOnHas = !!updateAgeOnHas;\n        this.ttlResolution =\n            isPosInt(ttlResolution) || ttlResolution === 0\n                ? ttlResolution\n                : 1;\n        this.ttlAutopurge = !!ttlAutopurge;\n        this.ttl = ttl || 0;\n        if (this.ttl) {\n            if (!isPosInt(this.ttl)) {\n                throw new TypeError('ttl must be a positive integer if specified');\n            }\n            this.#initializeTTLTracking();\n        }\n        // do not allow completely unbounded caches\n        if (this.#max === 0 && this.ttl === 0 && this.#maxSize === 0) {\n            throw new TypeError('At least one of max, maxSize, or ttl is required');\n        }\n        if (!this.ttlAutopurge && !this.#max && !this.#maxSize) {\n            const code = 'LRU_CACHE_UNBOUNDED';\n            if (shouldWarn(code)) {\n                warned.add(code);\n                const msg = 'TTL caching without ttlAutopurge, max, or maxSize can ' +\n                    'result in unbounded memory consumption.';\n                emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache);\n            }\n        }\n    }\n    /**\n     * Return the remaining TTL time for a given entry key\n     */\n    getRemainingTTL(key) {\n        return this.#keyMap.has(key) ? Infinity : 0;\n    }\n    #initializeTTLTracking() {\n        const ttls = new ZeroArray(this.#max);\n        const starts = new ZeroArray(this.#max);\n        this.#ttls = ttls;\n        this.#starts = starts;\n        this.#setItemTTL = (index, ttl, start = perf.now()) => {\n            starts[index] = ttl !== 0 ? start : 0;\n            ttls[index] = ttl;\n            if (ttl !== 0 && this.ttlAutopurge) {\n                const t = setTimeout(() => {\n                    if (this.#isStale(index)) {\n                        this.delete(this.#keyList[index]);\n                    }\n                }, ttl + 1);\n                // unref() not supported on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n        };\n        this.#updateItemAge = index => {\n            starts[index] = ttls[index] !== 0 ? perf.now() : 0;\n        };\n        this.#statusTTL = (status, index) => {\n            if (ttls[index]) {\n                const ttl = ttls[index];\n                const start = starts[index];\n                /* c8 ignore next */\n                if (!ttl || !start)\n                    return;\n                status.ttl = ttl;\n                status.start = start;\n                status.now = cachedNow || getNow();\n                const age = status.now - start;\n                status.remainingTTL = ttl - age;\n            }\n        };\n        // debounce calls to perf.now() to 1s so we're not hitting\n        // that costly call repeatedly.\n        let cachedNow = 0;\n        const getNow = () => {\n            const n = perf.now();\n            if (this.ttlResolution > 0) {\n                cachedNow = n;\n                const t = setTimeout(() => (cachedNow = 0), this.ttlResolution);\n                // not available on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n            return n;\n        };\n        this.getRemainingTTL = key => {\n            const index = this.#keyMap.get(key);\n            if (index === undefined) {\n                return 0;\n            }\n            const ttl = ttls[index];\n            const start = starts[index];\n            if (!ttl || !start) {\n                return Infinity;\n            }\n            const age = (cachedNow || getNow()) - start;\n            return ttl - age;\n        };\n        this.#isStale = index => {\n            const s = starts[index];\n            const t = ttls[index];\n            return !!t && !!s && (cachedNow || getNow()) - s > t;\n        };\n    }\n    // conditionally set private methods related to TTL\n    #updateItemAge = () => { };\n    #statusTTL = () => { };\n    #setItemTTL = () => { };\n    /* c8 ignore stop */\n    #isStale = () => false;\n    #initializeSizeTracking() {\n        const sizes = new ZeroArray(this.#max);\n        this.#calculatedSize = 0;\n        this.#sizes = sizes;\n        this.#removeItemSize = index => {\n            this.#calculatedSize -= sizes[index];\n            sizes[index] = 0;\n        };\n        this.#requireSize = (k, v, size, sizeCalculation) => {\n            // provisionally accept background fetches.\n            // actual value size will be checked when they return.\n            if (this.#isBackgroundFetch(v)) {\n                return 0;\n            }\n            if (!isPosInt(size)) {\n                if (sizeCalculation) {\n                    if (typeof sizeCalculation !== 'function') {\n                        throw new TypeError('sizeCalculation must be a function');\n                    }\n                    size = sizeCalculation(v, k);\n                    if (!isPosInt(size)) {\n                        throw new TypeError('sizeCalculation return invalid (expect positive integer)');\n                    }\n                }\n                else {\n                    throw new TypeError('invalid size value (must be positive integer). ' +\n                        'When maxSize or maxEntrySize is used, sizeCalculation ' +\n                        'or size must be set.');\n                }\n            }\n            return size;\n        };\n        this.#addItemSize = (index, size, status) => {\n            sizes[index] = size;\n            if (this.#maxSize) {\n                const maxSize = this.#maxSize - sizes[index];\n                while (this.#calculatedSize > maxSize) {\n                    this.#evict(true);\n                }\n            }\n            this.#calculatedSize += sizes[index];\n            if (status) {\n                status.entrySize = size;\n                status.totalCalculatedSize = this.#calculatedSize;\n            }\n        };\n    }\n    #removeItemSize = _i => { };\n    #addItemSize = (_i, _s, _st) => { };\n    #requireSize = (_k, _v, size, sizeCalculation) => {\n        if (size || sizeCalculation) {\n            throw new TypeError('cannot set size without setting maxSize or maxEntrySize on cache');\n        }\n        return 0;\n    };\n    *#indexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#tail; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#head) {\n                    break;\n                }\n                else {\n                    i = this.#prev[i];\n                }\n            }\n        }\n    }\n    *#rindexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#head; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#tail) {\n                    break;\n                }\n                else {\n                    i = this.#next[i];\n                }\n            }\n        }\n    }\n    #isValidIndex(index) {\n        return (index !== undefined &&\n            this.#keyMap.get(this.#keyList[index]) === index);\n    }\n    /**\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from most recently used to least recently used.\n     */\n    *entries() {\n        for (const i of this.#indexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.entries}\n     *\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from least recently used to most recently used.\n     */\n    *rentries() {\n        for (const i of this.#rindexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the keys in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *keys() {\n        for (const i of this.#indexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.keys}\n     *\n     * Return a generator yielding the keys in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rkeys() {\n        for (const i of this.#rindexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the values in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *values() {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.values}\n     *\n     * Return a generator yielding the values in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rvalues() {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Iterating over the cache itself yields the same results as\n     * {@link LRUCache.entries}\n     */\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    /**\n     * A String value that is used in the creation of the default string description of an object.\n     * Called by the built-in method Object.prototype.toString.\n     */\n    [Symbol.toStringTag] = 'LRUCache';\n    /**\n     * Find a value for which the supplied fn method returns a truthy value,\n     * similar to Array.find().  fn is called as fn(value, key, cache).\n     */\n    find(fn, getOptions = {}) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            if (fn(value, this.#keyList[i], this)) {\n                return this.get(this.#keyList[i], getOptions);\n            }\n        }\n    }\n    /**\n     * Call the supplied function on each item in the cache, in order from\n     * most recently used to least recently used.  fn is called as\n     * fn(value, key, cache).  Does not update age or recenty of use.\n     * Does not iterate over stale values.\n     */\n    forEach(fn, thisp = this) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * The same as {@link LRUCache.forEach} but items are iterated over in\n     * reverse order.  (ie, less recently used items are iterated over first.)\n     */\n    rforEach(fn, thisp = this) {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * Delete any stale entries. Returns true if anything was removed,\n     * false otherwise.\n     */\n    purgeStale() {\n        let deleted = false;\n        for (const i of this.#rindexes({ allowStale: true })) {\n            if (this.#isStale(i)) {\n                this.delete(this.#keyList[i]);\n                deleted = true;\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Get the extended info about a given entry, to get its value, size, and\n     * TTL info simultaneously. Like {@link LRUCache#dump}, but just for a\n     * single key. Always returns stale values, if their info is found in the\n     * cache, so be sure to check for expired TTLs if relevant.\n     */\n    info(key) {\n        const i = this.#keyMap.get(key);\n        if (i === undefined)\n            return undefined;\n        const v = this.#valList[i];\n        const value = this.#isBackgroundFetch(v)\n            ? v.__staleWhileFetching\n            : v;\n        if (value === undefined)\n            return undefined;\n        const entry = { value };\n        if (this.#ttls && this.#starts) {\n            const ttl = this.#ttls[i];\n            const start = this.#starts[i];\n            if (ttl && start) {\n                const remain = ttl - (perf.now() - start);\n                entry.ttl = remain;\n                entry.start = Date.now();\n            }\n        }\n        if (this.#sizes) {\n            entry.size = this.#sizes[i];\n        }\n        return entry;\n    }\n    /**\n     * Return an array of [key, {@link LRUCache.Entry}] tuples which can be\n     * passed to cache.load()\n     */\n    dump() {\n        const arr = [];\n        for (const i of this.#indexes({ allowStale: true })) {\n            const key = this.#keyList[i];\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined || key === undefined)\n                continue;\n            const entry = { value };\n            if (this.#ttls && this.#starts) {\n                entry.ttl = this.#ttls[i];\n                // always dump the start relative to a portable timestamp\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = perf.now() - this.#starts[i];\n                entry.start = Math.floor(Date.now() - age);\n            }\n            if (this.#sizes) {\n                entry.size = this.#sizes[i];\n            }\n            arr.unshift([key, entry]);\n        }\n        return arr;\n    }\n    /**\n     * Reset the cache and load in the items in entries in the order listed.\n     * Note that the shape of the resulting cache may be different if the\n     * same options are not used in both caches.\n     */\n    load(arr) {\n        this.clear();\n        for (const [key, entry] of arr) {\n            if (entry.start) {\n                // entry.start is a portable timestamp, but we may be using\n                // node's performance.now(), so calculate the offset, so that\n                // we get the intended remaining TTL, no matter how long it's\n                // been on ice.\n                //\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = Date.now() - entry.start;\n                entry.start = perf.now() - age;\n            }\n            this.set(key, entry.value, entry);\n        }\n    }\n    /**\n     * Add a value to the cache.\n     *\n     * Note: if `undefined` is specified as a value, this is an alias for\n     * {@link LRUCache#delete}\n     */\n    set(k, v, setOptions = {}) {\n        if (v === undefined) {\n            this.delete(k);\n            return this;\n        }\n        const { ttl = this.ttl, start, noDisposeOnSet = this.noDisposeOnSet, sizeCalculation = this.sizeCalculation, status, } = setOptions;\n        let { noUpdateTTL = this.noUpdateTTL } = setOptions;\n        const size = this.#requireSize(k, v, setOptions.size || 0, sizeCalculation);\n        // if the item doesn't fit, don't do anything\n        // NB: maxEntrySize set to maxSize by default\n        if (this.maxEntrySize && size > this.maxEntrySize) {\n            if (status) {\n                status.set = 'miss';\n                status.maxEntrySizeExceeded = true;\n            }\n            // have to delete, in case something is there already.\n            this.delete(k);\n            return this;\n        }\n        let index = this.#size === 0 ? undefined : this.#keyMap.get(k);\n        if (index === undefined) {\n            // addition\n            index = (this.#size === 0\n                ? this.#tail\n                : this.#free.length !== 0\n                    ? this.#free.pop()\n                    : this.#size === this.#max\n                        ? this.#evict(false)\n                        : this.#size);\n            this.#keyList[index] = k;\n            this.#valList[index] = v;\n            this.#keyMap.set(k, index);\n            this.#next[this.#tail] = index;\n            this.#prev[index] = this.#tail;\n            this.#tail = index;\n            this.#size++;\n            this.#addItemSize(index, size, status);\n            if (status)\n                status.set = 'add';\n            noUpdateTTL = false;\n        }\n        else {\n            // update\n            this.#moveToTail(index);\n            const oldVal = this.#valList[index];\n            if (v !== oldVal) {\n                if (this.#hasFetchMethod && this.#isBackgroundFetch(oldVal)) {\n                    oldVal.__abortController.abort(new Error('replaced'));\n                    const { __staleWhileFetching: s } = oldVal;\n                    if (s !== undefined && !noDisposeOnSet) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(s, k, 'set');\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([s, k, 'set']);\n                        }\n                    }\n                }\n                else if (!noDisposeOnSet) {\n                    if (this.#hasDispose) {\n                        this.#dispose?.(oldVal, k, 'set');\n                    }\n                    if (this.#hasDisposeAfter) {\n                        this.#disposed?.push([oldVal, k, 'set']);\n                    }\n                }\n                this.#removeItemSize(index);\n                this.#addItemSize(index, size, status);\n                this.#valList[index] = v;\n                if (status) {\n                    status.set = 'replace';\n                    const oldValue = oldVal && this.#isBackgroundFetch(oldVal)\n                        ? oldVal.__staleWhileFetching\n                        : oldVal;\n                    if (oldValue !== undefined)\n                        status.oldValue = oldValue;\n                }\n            }\n            else if (status) {\n                status.set = 'update';\n            }\n        }\n        if (ttl !== 0 && !this.#ttls) {\n            this.#initializeTTLTracking();\n        }\n        if (this.#ttls) {\n            if (!noUpdateTTL) {\n                this.#setItemTTL(index, ttl, start);\n            }\n            if (status)\n                this.#statusTTL(status, index);\n        }\n        if (!noDisposeOnSet && this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return this;\n    }\n    /**\n     * Evict the least recently used item, returning its value or\n     * `undefined` if cache is empty.\n     */\n    pop() {\n        try {\n            while (this.#size) {\n                const val = this.#valList[this.#head];\n                this.#evict(true);\n                if (this.#isBackgroundFetch(val)) {\n                    if (val.__staleWhileFetching) {\n                        return val.__staleWhileFetching;\n                    }\n                }\n                else if (val !== undefined) {\n                    return val;\n                }\n            }\n        }\n        finally {\n            if (this.#hasDisposeAfter && this.#disposed) {\n                const dt = this.#disposed;\n                let task;\n                while ((task = dt?.shift())) {\n                    this.#disposeAfter?.(...task);\n                }\n            }\n        }\n    }\n    #evict(free) {\n        const head = this.#head;\n        const k = this.#keyList[head];\n        const v = this.#valList[head];\n        if (this.#hasFetchMethod && this.#isBackgroundFetch(v)) {\n            v.__abortController.abort(new Error('evicted'));\n        }\n        else if (this.#hasDispose || this.#hasDisposeAfter) {\n            if (this.#hasDispose) {\n                this.#dispose?.(v, k, 'evict');\n            }\n            if (this.#hasDisposeAfter) {\n                this.#disposed?.push([v, k, 'evict']);\n            }\n        }\n        this.#removeItemSize(head);\n        // if we aren't about to use the index, then null these out\n        if (free) {\n            this.#keyList[head] = undefined;\n            this.#valList[head] = undefined;\n            this.#free.push(head);\n        }\n        if (this.#size === 1) {\n            this.#head = this.#tail = 0;\n            this.#free.length = 0;\n        }\n        else {\n            this.#head = this.#next[head];\n        }\n        this.#keyMap.delete(k);\n        this.#size--;\n        return head;\n    }\n    /**\n     * Check if a key is in the cache, without updating the recency of use.\n     * Will return false if the item is stale, even though it is technically\n     * in the cache.\n     *\n     * Will not update item age unless\n     * {@link LRUCache.OptionsBase.updateAgeOnHas} is set.\n     */\n    has(k, hasOptions = {}) {\n        const { updateAgeOnHas = this.updateAgeOnHas, status } = hasOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v) &&\n                v.__staleWhileFetching === undefined) {\n                return false;\n            }\n            if (!this.#isStale(index)) {\n                if (updateAgeOnHas) {\n                    this.#updateItemAge(index);\n                }\n                if (status) {\n                    status.has = 'hit';\n                    this.#statusTTL(status, index);\n                }\n                return true;\n            }\n            else if (status) {\n                status.has = 'stale';\n                this.#statusTTL(status, index);\n            }\n        }\n        else if (status) {\n            status.has = 'miss';\n        }\n        return false;\n    }\n    /**\n     * Like {@link LRUCache#get} but doesn't update recency or delete stale\n     * items.\n     *\n     * Returns `undefined` if the item is stale, unless\n     * {@link LRUCache.OptionsBase.allowStale} is set.\n     */\n    peek(k, peekOptions = {}) {\n        const { allowStale = this.allowStale } = peekOptions;\n        const index = this.#keyMap.get(k);\n        if (index === undefined ||\n            (!allowStale && this.#isStale(index))) {\n            return;\n        }\n        const v = this.#valList[index];\n        // either stale and allowed, or forcing a refresh of non-stale value\n        return this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n    }\n    #backgroundFetch(k, index, options, context) {\n        const v = index === undefined ? undefined : this.#valList[index];\n        if (this.#isBackgroundFetch(v)) {\n            return v;\n        }\n        const ac = new AC();\n        const { signal } = options;\n        // when/if our AC signals, then stop listening to theirs.\n        signal?.addEventListener('abort', () => ac.abort(signal.reason), {\n            signal: ac.signal,\n        });\n        const fetchOpts = {\n            signal: ac.signal,\n            options,\n            context,\n        };\n        const cb = (v, updateCache = false) => {\n            const { aborted } = ac.signal;\n            const ignoreAbort = options.ignoreFetchAbort && v !== undefined;\n            if (options.status) {\n                if (aborted && !updateCache) {\n                    options.status.fetchAborted = true;\n                    options.status.fetchError = ac.signal.reason;\n                    if (ignoreAbort)\n                        options.status.fetchAbortIgnored = true;\n                }\n                else {\n                    options.status.fetchResolved = true;\n                }\n            }\n            if (aborted && !ignoreAbort && !updateCache) {\n                return fetchFail(ac.signal.reason);\n            }\n            // either we didn't abort, and are still here, or we did, and ignored\n            const bf = p;\n            if (this.#valList[index] === p) {\n                if (v === undefined) {\n                    if (bf.__staleWhileFetching) {\n                        this.#valList[index] = bf.__staleWhileFetching;\n                    }\n                    else {\n                        this.delete(k);\n                    }\n                }\n                else {\n                    if (options.status)\n                        options.status.fetchUpdated = true;\n                    this.set(k, v, fetchOpts.options);\n                }\n            }\n            return v;\n        };\n        const eb = (er) => {\n            if (options.status) {\n                options.status.fetchRejected = true;\n                options.status.fetchError = er;\n            }\n            return fetchFail(er);\n        };\n        const fetchFail = (er) => {\n            const { aborted } = ac.signal;\n            const allowStaleAborted = aborted && options.allowStaleOnFetchAbort;\n            const allowStale = allowStaleAborted || options.allowStaleOnFetchRejection;\n            const noDelete = allowStale || options.noDeleteOnFetchRejection;\n            const bf = p;\n            if (this.#valList[index] === p) {\n                // if we allow stale on fetch rejections, then we need to ensure that\n                // the stale value is not removed from the cache when the fetch fails.\n                const del = !noDelete || bf.__staleWhileFetching === undefined;\n                if (del) {\n                    this.delete(k);\n                }\n                else if (!allowStaleAborted) {\n                    // still replace the *promise* with the stale value,\n                    // since we are done with the promise at this point.\n                    // leave it untouched if we're still waiting for an\n                    // aborted background fetch that hasn't yet returned.\n                    this.#valList[index] = bf.__staleWhileFetching;\n                }\n            }\n            if (allowStale) {\n                if (options.status && bf.__staleWhileFetching !== undefined) {\n                    options.status.returnedStale = true;\n                }\n                return bf.__staleWhileFetching;\n            }\n            else if (bf.__returned === bf) {\n                throw er;\n            }\n        };\n        const pcall = (res, rej) => {\n            const fmp = this.#fetchMethod?.(k, v, fetchOpts);\n            if (fmp && fmp instanceof Promise) {\n                fmp.then(v => res(v === undefined ? undefined : v), rej);\n            }\n            // ignored, we go until we finish, regardless.\n            // defer check until we are actually aborting,\n            // so fetchMethod can override.\n            ac.signal.addEventListener('abort', () => {\n                if (!options.ignoreFetchAbort ||\n                    options.allowStaleOnFetchAbort) {\n                    res(undefined);\n                    // when it eventually resolves, update the cache.\n                    if (options.allowStaleOnFetchAbort) {\n                        res = v => cb(v, true);\n                    }\n                }\n            });\n        };\n        if (options.status)\n            options.status.fetchDispatched = true;\n        const p = new Promise(pcall).then(cb, eb);\n        const bf = Object.assign(p, {\n            __abortController: ac,\n            __staleWhileFetching: v,\n            __returned: undefined,\n        });\n        if (index === undefined) {\n            // internal, don't expose status.\n            this.set(k, bf, { ...fetchOpts.options, status: undefined });\n            index = this.#keyMap.get(k);\n        }\n        else {\n            this.#valList[index] = bf;\n        }\n        return bf;\n    }\n    #isBackgroundFetch(p) {\n        if (!this.#hasFetchMethod)\n            return false;\n        const b = p;\n        return (!!b &&\n            b instanceof Promise &&\n            b.hasOwnProperty('__staleWhileFetching') &&\n            b.__abortController instanceof AC);\n    }\n    async fetch(k, fetchOptions = {}) {\n        const { \n        // get options\n        allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, \n        // set options\n        ttl = this.ttl, noDisposeOnSet = this.noDisposeOnSet, size = 0, sizeCalculation = this.sizeCalculation, noUpdateTTL = this.noUpdateTTL, \n        // fetch exclusive options\n        noDeleteOnFetchRejection = this.noDeleteOnFetchRejection, allowStaleOnFetchRejection = this.allowStaleOnFetchRejection, ignoreFetchAbort = this.ignoreFetchAbort, allowStaleOnFetchAbort = this.allowStaleOnFetchAbort, context, forceRefresh = false, status, signal, } = fetchOptions;\n        if (!this.#hasFetchMethod) {\n            if (status)\n                status.fetch = 'get';\n            return this.get(k, {\n                allowStale,\n                updateAgeOnGet,\n                noDeleteOnStaleGet,\n                status,\n            });\n        }\n        const options = {\n            allowStale,\n            updateAgeOnGet,\n            noDeleteOnStaleGet,\n            ttl,\n            noDisposeOnSet,\n            size,\n            sizeCalculation,\n            noUpdateTTL,\n            noDeleteOnFetchRejection,\n            allowStaleOnFetchRejection,\n            allowStaleOnFetchAbort,\n            ignoreFetchAbort,\n            status,\n            signal,\n        };\n        let index = this.#keyMap.get(k);\n        if (index === undefined) {\n            if (status)\n                status.fetch = 'miss';\n            const p = this.#backgroundFetch(k, index, options, context);\n            return (p.__returned = p);\n        }\n        else {\n            // in cache, maybe already fetching\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                const stale = allowStale && v.__staleWhileFetching !== undefined;\n                if (status) {\n                    status.fetch = 'inflight';\n                    if (stale)\n                        status.returnedStale = true;\n                }\n                return stale ? v.__staleWhileFetching : (v.__returned = v);\n            }\n            // if we force a refresh, that means do NOT serve the cached value,\n            // unless we are already in the process of refreshing the cache.\n            const isStale = this.#isStale(index);\n            if (!forceRefresh && !isStale) {\n                if (status)\n                    status.fetch = 'hit';\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                if (status)\n                    this.#statusTTL(status, index);\n                return v;\n            }\n            // ok, it is stale or a forced refresh, and not already fetching.\n            // refresh the cache.\n            const p = this.#backgroundFetch(k, index, options, context);\n            const hasStale = p.__staleWhileFetching !== undefined;\n            const staleVal = hasStale && allowStale;\n            if (status) {\n                status.fetch = isStale ? 'stale' : 'refresh';\n                if (staleVal && isStale)\n                    status.returnedStale = true;\n            }\n            return staleVal ? p.__staleWhileFetching : (p.__returned = p);\n        }\n    }\n    /**\n     * Return a value from the cache. Will update the recency of the cache\n     * entry found.\n     *\n     * If the key is not found, get() will return `undefined`.\n     */\n    get(k, getOptions = {}) {\n        const { allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, status, } = getOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const value = this.#valList[index];\n            const fetching = this.#isBackgroundFetch(value);\n            if (status)\n                this.#statusTTL(status, index);\n            if (this.#isStale(index)) {\n                if (status)\n                    status.get = 'stale';\n                // delete only if not an in-flight background fetch\n                if (!fetching) {\n                    if (!noDeleteOnStaleGet) {\n                        this.delete(k);\n                    }\n                    if (status && allowStale)\n                        status.returnedStale = true;\n                    return allowStale ? value : undefined;\n                }\n                else {\n                    if (status &&\n                        allowStale &&\n                        value.__staleWhileFetching !== undefined) {\n                        status.returnedStale = true;\n                    }\n                    return allowStale ? value.__staleWhileFetching : undefined;\n                }\n            }\n            else {\n                if (status)\n                    status.get = 'hit';\n                // if we're currently fetching it, we don't actually have it yet\n                // it's not stale, which means this isn't a staleWhileRefetching.\n                // If it's not stale, and fetching, AND has a __staleWhileFetching\n                // value, then that means the user fetched with {forceRefresh:true},\n                // so it's safe to return that value.\n                if (fetching) {\n                    return value.__staleWhileFetching;\n                }\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                return value;\n            }\n        }\n        else if (status) {\n            status.get = 'miss';\n        }\n    }\n    #connect(p, n) {\n        this.#prev[n] = p;\n        this.#next[p] = n;\n    }\n    #moveToTail(index) {\n        // if tail already, nothing to do\n        // if head, move head to next[index]\n        // else\n        //   move next[prev[index]] to next[index] (head has no prev)\n        //   move prev[next[index]] to prev[index]\n        // prev[index] = tail\n        // next[tail] = index\n        // tail = index\n        if (index !== this.#tail) {\n            if (index === this.#head) {\n                this.#head = this.#next[index];\n            }\n            else {\n                this.#connect(this.#prev[index], this.#next[index]);\n            }\n            this.#connect(this.#tail, index);\n            this.#tail = index;\n        }\n    }\n    /**\n     * Deletes a key out of the cache.\n     * Returns true if the key was deleted, false otherwise.\n     */\n    delete(k) {\n        let deleted = false;\n        if (this.#size !== 0) {\n            const index = this.#keyMap.get(k);\n            if (index !== undefined) {\n                deleted = true;\n                if (this.#size === 1) {\n                    this.clear();\n                }\n                else {\n                    this.#removeItemSize(index);\n                    const v = this.#valList[index];\n                    if (this.#isBackgroundFetch(v)) {\n                        v.__abortController.abort(new Error('deleted'));\n                    }\n                    else if (this.#hasDispose || this.#hasDisposeAfter) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(v, k, 'delete');\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([v, k, 'delete']);\n                        }\n                    }\n                    this.#keyMap.delete(k);\n                    this.#keyList[index] = undefined;\n                    this.#valList[index] = undefined;\n                    if (index === this.#tail) {\n                        this.#tail = this.#prev[index];\n                    }\n                    else if (index === this.#head) {\n                        this.#head = this.#next[index];\n                    }\n                    else {\n                        const pi = this.#prev[index];\n                        this.#next[pi] = this.#next[index];\n                        const ni = this.#next[index];\n                        this.#prev[ni] = this.#prev[index];\n                    }\n                    this.#size--;\n                    this.#free.push(index);\n                }\n            }\n        }\n        if (this.#hasDisposeAfter && this.#disposed?.length) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Clear the cache entirely, throwing away all values.\n     */\n    clear() {\n        for (const index of this.#rindexes({ allowStale: true })) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                v.__abortController.abort(new Error('deleted'));\n            }\n            else {\n                const k = this.#keyList[index];\n                if (this.#hasDispose) {\n                    this.#dispose?.(v, k, 'delete');\n                }\n                if (this.#hasDisposeAfter) {\n                    this.#disposed?.push([v, k, 'delete']);\n                }\n            }\n        }\n        this.#keyMap.clear();\n        this.#valList.fill(undefined);\n        this.#keyList.fill(undefined);\n        if (this.#ttls && this.#starts) {\n            this.#ttls.fill(0);\n            this.#starts.fill(0);\n        }\n        if (this.#sizes) {\n            this.#sizes.fill(0);\n        }\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free.length = 0;\n        this.#calculatedSize = 0;\n        this.#size = 0;\n        if (this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n//# sourceMappingURL=index.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(90128);\n"],"names":["Buffer","C","LEFT_BRACE","RIGHT_BRACE","LEFT_BRACKET","RIGHT_BRACKET","COLON","COMMA","TRUE","FALSE","NULL","STRING","NUMBER","START","STOP","TRUE1","TRUE2","TRUE3","FALSE1","FALSE2","FALSE3","FALSE4","NULL1","NULL2","NULL3","NUMBER1","NUMBER3","STRING1","STRING2","STRING3","STRING4","STRING5","STRING6","VALUE","KEY","OBJECT","ARRAY","BACK_SLASH","charCodeAt","FORWARD_SLASH","BACKSPACE","FORM_FEED","NEWLINE","CARRIAGE_RETURN","TAB","STRING_BUFFER_SIZE","alloc","size","Parser","this","tState","value","undefined","string","stringBuffer","stringBufferOffset","unicode","highSurrogate","key","mode","stack","state","bytes_remaining","bytes_in_sequence","temp_buffs","offset","toknam","code","keys","Object","i","l","length","toString","proto","prototype","onError","err","charError","buffer","Error","JSON","stringify","String","fromCharCode","appendStringChar","char","appendStringBuf","buf","start","end","copy","write","n","onToken","j","k","byteLength","intVal","parseInt","error","numberReviver","token","parseError","push","pop","parent","emit","onValue","text","result","Number","isNaN","match","module","exports","defineProperty","fragment","str","inputStr","endsWith","slice","args","lastIndexOf","Math","max","getFragment","_a","res","split","filter","s","map","toUpperCase","join","toLowerCase","camelize","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","done","then","apply","lookupAllPrefixes","prefixToUri","uriToPrefix","fragment_1","lookup_1","uri","options","lookupPrefix","mintOnUnknown","existingPrefixes","prefix","lookupUri","lookup_2","enumerable","get","fetchContext","fetchJson","cross_fetch_1","url","fetchFn","fetch","json","__createBinding","create","o","m","k2","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","__exportStar","p","hasOwnProperty","call","fetchContext_1","URL","searchParams","append","prefixes","global","self","__self__","F","DOMException","support","Symbol","Blob","viewClasses","isArrayBufferView","ArrayBuffer","isView","obj","indexOf","normalizeName","name","test","TypeError","normalizeValue","iteratorFor","items","iterator","shift","Headers","headers","forEach","Array","isArray","header","getOwnPropertyNames","consumed","body","bodyUsed","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","view","Uint8Array","set","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","type","arrayBuffer","readAsText","chars","readArrayBufferAsText","formData","decode","parse","oldValue","has","callback","values","entries","methods","Request","input","method","upcased","credentials","signal","referrer","form","trim","bytes","replace","decodeURIComponent","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","RangeError","location","message","constructor","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","ponyfill","ctx","SaxesParser","EVENTS","ed5","ed2","NSed3","isS","isChar10","isChar","isNameStartChar","isNameChar","S_LIST","NAME_RE","isChar11","isNCNameStartChar","isNCNameChar","NC_NAME_RE","XML_NAMESPACE","XMLNS_NAMESPACE","rootNS","__proto__","xml","xmlns","XML_ENTITIES","amp","gt","lt","quot","apos","EOC","NL_LIKE","S_TEXT","S_XML_DECL_ENDING","NL","LESS","EQUAL","GREATER","QUESTION","CLOSE_BRACKET","isQuote","c","QUOTES","DOCTYPE_TERMINATOR","DTD_TERMINATOR","XML_DECL_NAME_TERMINATOR","ATTRIB_VALUE_UNQUOTED_TERMINATOR","nsPairCheck","parser","fail","isNCName","isName","EVENT_NAME_TO_HANDLER_NAME","xmldecl","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","ready","closed","_closed","opt","fragmentOpt","xmlnsOpt","trackPosition","position","fileName","nameStartCheck","nameCheck","processAttribs","processAttribsNS","pushAttrib","pushAttribNS","ns","assign","additional","additionalNamespaces","mapping","local","nsMappingCheck","processAttribsPlain","pushAttribPlain","stateTable","sBegin","sBeginWhitespace","sDoctype","sDoctypeQuote","sDTD","sDTDQuoted","sDTDOpenWaka","sDTDOpenWakaBang","sDTDComment","sDTDCommentEnding","sDTDCommentEnded","sDTDPI","sDTDPIEnding","sText","sEntity","sOpenWaka","sOpenWakaBang","sComment","sCommentEnding","sCommentEnded","sCData","sCDataEnding","sCDataEnding2","sPIFirstChar","sPIRest","sPIBody","sPIEnding","sXMLDeclNameStart","sXMLDeclName","sXMLDeclEq","sXMLDeclValueStart","sXMLDeclValue","sXMLDeclSeparator","sXMLDeclEnding","sOpenTag","sOpenTagSlash","sAttrib","sAttribName","sAttribNameSawWhite","sAttribValue","sAttribValueQuoted","sAttribValueClosed","sAttribValueUnquoted","sCloseTag","sCloseTagSawWhite","_init","openWakaBang","piTarget","entity","q","tags","tag","topNS","chunk","chunkPosition","prevI","carriedFromPrevious","forbiddenState","attribList","reportedTextBeforeRoot","reportedTextAfterRoot","closedRoot","sawRoot","xmlDeclPossible","xmlDeclExpects","entityReturnState","defaultXMLVersion","forceXMLVersion","setXMLVersion","positionAtNewLine","xmlDecl","version","encoding","standalone","column","ENTITIES","readyHandler","columnIndex","on","handler","off","makeError","msg","errorHandler","limit","lastCode","close","getCode10","final","getCode11","getCodeNorm","getCode","unget","captureTo","isNLLike","includes","captureToChar","captureNameChars","skipSpaces","currentXMLVersion","iBefore","doctypeHandler","fromCodePoint","owb","handleTextInRoot","handleTextOutsideRoot","loop","parsed","parseEntity","textHandler","commentHandler","cdataHandler","isQuestion","piHandler","target","xmldeclHandler","attributes","openTagStartHandler","openTag","openSelfClosingTag","closeTag","scanLoop","nonSpace","outRootLoop","qname","attr","attributeHandler","trimmed","_b","endHandler","index","resolvePrefix","colon","seen","Set","eqname","add","isSelfClosing","openTagHandler","_c","closeTagHandler","defined","num","NaN","ReadableWebToNodeStream","readable_stream_1","Readable","stream","super","bytesRead","released","getReader","_read","pendingRead","read","data","waitForReadToComplete","syncAndRelease","releaseLock","AbortController","AbortSignal","window","array","event","DynamicNestedLoopJoin","HashJoin","NestedLoopJoin","SymmetricHashJoin","MergeStream","AsyncIterator","MultiTransformIterator","SimpleTransformIterator","left","funRight","funJoin","_createTransformer","leftItem","transform","rightItem","right","funHash","addedDataListener","leftMap","Map","matches","matchIdx","destroy","readable","hasResults","_end","bind","eventName","_addDataListener","ended","item","hash","scheduleTask","usedLeft","rightMap","_cleanup","streams","arguments","_removeStream","idx","splice","attempts","variables","df_455_1","require","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_init__3_0_0_components_ActorInit_jsonld_ActorInit_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_context_preprocess__3_0_0_components_ActorContextPreprocess_jsonld_ActorContextPreprocess_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_hash_bindings__3_0_0_components_ActorHashBindings_jsonld_ActorHashBindings_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_optimize_query_operation__3_0_0_components_ActorOptimizeQueryOperation_jsonld_ActorOptimizeQueryOperation_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_parse__3_0_0_components_ActorQueryParse_jsonld_ActorQueryParse_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_result_serialize__3_0_0_components_ActorQueryResultSerialize_jsonld_ActorQueryResultSerialize_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_source_identify_hypermedia__3_0_0_components_ActorQuerySourceIdentifyHypermedia_jsonld_ActorQuerySourceIdentifyHypermedia_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join_entries_sort__3_0_0_components_ActorRdfJoinEntriesSort_jsonld_ActorRdfJoinEntriesSort_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join_selectivity__3_0_0_components_ActorRdfJoinSelectivity_jsonld_ActorRdfJoinSelectivity_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata_accumulate__3_0_0_components_ActorRdfMetadataAccumulate_jsonld_ActorRdfMetadataAccumulate_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_serialize__3_0_0_components_ActorRdfSerialize_jsonld_ActorRdfSerialize_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_update_quads__3_0_0_components_ActorRdfUpdateQuads_jsonld_ActorRdfUpdateQuads_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_operation__3_0_0_components_ActorQueryOperation_jsonld_ActorQueryOperation_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_process__3_0_0_components_ActorQueryProcess_jsonld_ActorQueryProcess_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_query_source_identify__3_0_0_components_ActorQuerySourceIdentify_jsonld_ActorQuerySourceIdentify_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_join__3_0_0_components_ActorRdfJoin_jsonld_ActorRdfJoin_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http_invalidate__3_0_0_components_ActorHttpInvalidate_jsonld_ActorHttpInvalidate_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http__3_0_0_components_ActorHttp_jsonld_ActorHttp_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_http__3_0_0_components_ActorHttp_jsonld_ActorHttp_fallback_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_merge_bindings_context__3_0_0_components_ActorMergeBindingsContext_jsonld_ActorMergeBindingsContext_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_dereference_rdf__3_0_0_components_ActorDereferenceRdf_jsonld_ActorDereferenceRdf_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata__3_0_0_components_ActorRdfMetadata_jsonld_ActorRdfMetadata_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_metadata_extract__3_0_0_components_ActorRdfMetadataExtract_jsonld_ActorRdfMetadataExtract_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_resolve_hypermedia_links__3_0_0_components_ActorRdfResolveHypermediaLinks_jsonld_ActorRdfResolveHypermediaLinks_default_bus","https___linkedsoftwaredependencies_org_bundles_npm__comunica_bus_rdf_resolve_hypermedia_links_queue__3_0_0_components_ActorRdfResolveHypermediaLinksQueue_jsonld_ActorRdfResolveHypermediaLinksQueue_default_bus","urn_comunica_default_context_preprocess_actors_query_source_skolemize","urn_comunica_default_context_preprocess_mediators_main","urn_comunica_default_hash_bindings_mediators_main","urn_comunica_default_optimize_query_operation_actors_group_sources","urn_comunica_default_optimize_query_operation_mediators_main","urn_comunica_default_query_parse_mediators_main","urn_comunica_default_query_result_serialize_mediators_serialize","urn_comunica_default_query_result_serialize_mediators_mediaType","urn_comunica_default_query_result_serialize_mediators_mediaTypeFormat","urn_comunica_default_query_source_identify_hypermedia_mediators_main","urn_comunica_default_rdf_join_entries_sort_mediators_main","urn_comunica_default_rdf_join_selectivity_mediators_main","urn_comunica_default_rdf_metadata_accumulate_mediators_main","urn_comunica_default_rdf_serialize_mediators_serialize","urn_comunica_default_rdf_serialize_mediators_mediaType","urn_comunica_default_rdf_serialize_mediators_mediaTypeFormat","urn_comunica_default_rdf_update_quads_mediators_main","urn_comunica_default_query_operation_mediators_main","urn_comunica_default_query_process_mediators_main","urn_comunica_default_query_source_identify_mediators_main","urn_comunica_default_rdf_join_mediators_main","https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_context_preprocess_query_source_identify__3_0_0_components_ActorContextPreprocessQuerySourceIdentify_jsonld_IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator","urn_comunica_default_http_invalidate_mediators_main","https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_sparql_json__3_0_0_components_ActionObserverHttp_jsonld_IActionObserverHttpArgs_default_invalidator","https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_stats__3_0_0_components_ActionObserverHttp_jsonld_IActionObserverHttpArgs_default_invalidator","urn_comunica_default_http_mediators_main","urn_comunica_default_merge_bindings_context_mediators_main","urn_comunica_default_dereference_rdf_mediators_main","urn_comunica_default_rdf_metadata_mediators_main","urn_comunica_default_rdf_metadata_extract_mediators_main","urn_comunica_default_rdf_resolve_hypermedia_links_mediators_main","urn_comunica_default_rdf_resolve_hypermedia_links_queue_mediators_main","urn_comunica_default_optimize_query_operation_actors_filter_pushdown","urn_comunica_default_init_actors_query","https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_sparql_json__3_0_0_components_ActorQueryResultSerializeSparqlJson_jsonld_ActorQueryResultSerializeSparqlJson_default_observer","https___linkedsoftwaredependencies_org_bundles_npm__comunica_actor_query_result_serialize_stats__3_0_0_components_ActorQueryResultSerializeStats_jsonld_ActorQueryResultSerializeStats_default_observer","urn_comunica_default_query_process_actors_sequential","urn_comunica_default_query_source_identify_actors_hypermedia","urn_comunica_default_optimize_query_operation_actors_prune_empty_source_operations","urn_comunica_default_optimize_query_operation_actors_join_connected","urn_comunica_default_optimize_query_operation_actors_bgp_to_join","urn_comunica_default_optimize_query_operation_actors_join_bgp","urn_comunica_default_optimize_query_operation_actors_assign_sources_exhaustive","actor_init_query_1","engineDefault","QueryEngine","QueryEngineBase","engine","core_1","ActorAbstractMediaTyped","Actor","run","action","typedAction","handle","runHandle","handleMediaType","context","mediaTypes","getMediaTypes","mediaTypeFormats","getMediaTypeFormats","testHandle","testMediaType","testMediaTypeFormats","ActorAbstractMediaTyped_1","ActorAbstractMediaTypedFixed","scale","priorityScale","mediaTypePriorities","_index","freeze","mediaType","testHandleChecked","_context","bus_query_operation_1","context_entries_1","asynciterator_1","rdf_data_factory_1","rdf_string_1","sparqlalgebrajs_1","PathVariableObjectIterator_1","DF","DataFactory","ActorAbstractPath","ActorQueryOperationTypedMediated","predicateType","testOperation","operation","predicate","generateVariable","path","subject","object","variable","isPathArbitraryLengthDistinct","KeysQueryOperation","isPathArbitraryLengthDistinctKey","ActorQueryOperation","getSafeBindings","mediatorQueryOperation","mediate","FACTORY","createDistinct","predicateStarGraphVariable","graph","bindingsFactory","sources","getPathSources","predVar","createPath","findGraphs","createUnion","assignPatternSources","createPattern","results","passedGraphs","bindingsStream","multiTransform","bindings","graphValue","EmptyIterator","TransformIterator","async","it","BufferedIterator","getObjectsPredicateStar","count","maxBufferSize","autoStart","metadata","getObjectsPredicateStarEval","emitFirstSubject","termType","PathVariableObjectIterator","getProperty","metadataInner","cardinality","termHashes","counter","termString","termToString","_push","thisVariable","getSubjectAndObjectBindingsPredicateStar","subjectVar","objectVar","subjectVal","objectVal","termHashesGlobal","termHashesCurrentSubject","objects","objectsArray","Algebra","types","ALT","SEQ","flatMap","subOp","INV","ONE_OR_MORE_PATH","ZERO_OR_MORE_PATH","ZERO_OR_ONE_PATH","LINK","NPS","source","getOperationSource","pattern","assignOperationSource","Factory","maxRunningOperations","runningOperations","pendingOperations","pushAsResult","pendingOperation","runningOperation","_fillBufferAsync","setProperty","lastCount","bus_context_preprocess_1","ActorContextPreprocessConvertShortcuts","ActorContextPreprocess","_action","expandShortcuts","contextKeyShortcuts","ActionContextKey","delete","lru_cache_1","ActorContextPreprocessQuerySourceIdentify","cache","cacheSize","LRUCache","httpInvalidator","addInvalidateListener","clear","KeysInitQuery","querySourcesUnidentified","querySourcesUnidentifiedExpanded","all","querySource","expandSource","querySources","identifySource","querySourceUnidentified","mediatorContextPreprocess","ActionContext","ensureActionContext","sourcePromise","mediatorQuerySourceIdentify","QuerySourceSkolemized_1","utils_1","ActorContextPreprocessQuerySourceSkolemize","KeysQuerySourceIdentify","sourceIds","getSafe","sourceWrapper","QuerySourceSkolemized","getSourceId","metadata_1","innerSource","sourceId","getSelectorShape","queryBindings","operationMapped","deskolemizeOperation","ArrayIterator","MetadataValidationState","canContainUndefs","skolemizeBindingsStream","queryBoolean","queryQuads","skolemizeQuadStream","queryVoid","referenceValue","data_factory_1","rdf_terms_1","skolemizeTerm","term","BlankNodeScoped","namedNode","SKOLEM_PREFIX","skolemizeQuad","quad","mapTermsNested","skolemizeBindings","deskolemizeTerm","skolemized","startsWith","colonSeparator","termLabel","blankNode","deskolemizeTermNestedThrowing","subTerm","deskolemized","ret","inheritMetadata","Util","mapOperation","PATTERN","op","factory","recurse","PATH","ActorContextPreprocessSetDefaults","defaultFunctionArgumentsCache","initialize","setDefault","queryTimestamp","Date","KeysCore","log","logger","functionArgumentsCache","hypermediaSourcesAggregatedStores","queryFormat","language","graphqlSingularizeVariables","ActorContextPreprocessSourceToDestination","KeysRdfUpdateQuads","destination","bus_hash_bindings_1","hash_js_1","canonicalize","ActorHashBindingsSha1","ActorHashBindings","allowHashCollisions","hashFunction","sha1","update","fromEntries","digest","hashCollisions","ActorInitQueryBase_1","process","globalThis","ActorInitQuery","ActorInitQueryBase","bus_init_1","ActorInit","actorInitQuery","query","queryOfType","expectedType","resultType","execute","output","queryOrExplain","explain","explainMode","actionContext","noCache","invalidateHttpCache","mediatorQueryProcess","internalToFinalResult","getResultMediaTypes","mediatorQueryResultSerializeMediaTypeCombiner","getResultMediaTypeFormats","mediatorQueryResultSerializeMediaTypeFormatCombiner","resultToString","queryResult","finalToInternalResult","mediatorQueryResultSerialize","mediatorHttpInvalidate","internalResult","quadStream","finalResult","QueryEngineBase_1","bus_optimize_query_operation_1","bus_rdf_update_quads_1","ActorOptimizeQueryOperationAssignSourcesExhaustive","ActorOptimizeQueryOperation","getDataDestinationValue","shape","doesShapeAcceptOperation","assignExhaustive","queryString","subOperation","createAlt","SERVICE","CONSTRUCT","createConstruct","template","DELETE_INSERT","createDeleteInsert","insert","where","ActorOptimizeQueryOperationBgpToJoin","bgp","createJoin","patterns","AF","ActorOptimizeQueryOperationDescribeToConstructsSubject","DESCRIBE","operationOriginal","operations","terms","templatePattern","BGP","variablePatterns","JOIN","ActorOptimizeQueryOperationFilterPushdown","getExpressionVariables","expression","filterPushdown","expressionType","expressionTypes","AGGREGATE","WILDCARD","EXISTENCE","inScopeVariables","NAMED","OPERATOR","uniqTerms","arg","TERM","getOverlappingOperations","expressionVariables","fullyOverlapping","partiallyOverlapping","notOverlapping","inputVariables","variablesSubSetOf","variablesIntersect","EXTEND","createFilter","createExtend","FILTER","joins","logDebug","NOP","PROJECT","createProject","UNION","unions","VALUES","LEFT_JOIN","MINUS","ASK","DISTINCT","EXPRESSION","FROM","GRAPH","GROUP","ORDER_BY","REDUCED","SLICE","COMPOSITE_UPDATE","LOAD","CLEAR","CREATE","DROP","ADD","MOVE","COPY","varsA","varsB","some","varA","varB","equals","varsNeedles","varsHaystack","every","ActorOptimizeQueryOperationGroupSources","groupOperation","groupedInput","scopedSource","removeOperationSource","inputs","subInput","clusters","clusterOperationsWithEqualSources","newInputs","moveSourceAnnotationUpwardsIfPossible","multiFactoryMethod","createSeq","groupOperationMulti","factoryMethod","flatten","nestedMerges","cluster","merged","operationsIn","sourceOperations","sourcelessOperations","ActorOptimizeQueryOperationJoinBgp","createBgp","ActorOptimizeQueryOperationJoinConnected","oldClusters","newClusters","clusterIteration","subJoins","oldCluster","entry","joined","newEntry","haveOverlappingVariables","variablesA","variablesB","variableA","ActorOptimizeQueryOperationPruneEmptySourceOperations","collectedOperations","recurseOperation","collectMultiOperationInputs","emptyOperations","checkOperation","collectedOperation","iri","hasSourceResults","mapMultiOperation","children","emptyProject","subSubOperation","inputType","multiOperationFactory","nonEmptyInputs","traverse","useAskIfSupported","askOperation","createAsk","ActorOptimizeQueryOperationRewriteAdd","defaultGraph","ActorOptimizeQueryOperationRewriteCopy","createCompositeUpdate","createDrop","createAdd","silent","ActorOptimizeQueryOperationRewriteMove","updates","ActorQueryOperationAsk","_operation","runOperation","take","toArray","ActorQueryOperationBgpJoin","BindingsToQuadsIterator_1","ActorQueryOperationConstruct","getVariables","concat","getTermsNested","meta","order","availableOrders","BindingsToQuadsIterator","blankNodeCounter","bindTerm","bindQuad","boundTerm","localizeBlankNode","localizeQuad","bindTemplate","x","Boolean","ActorQueryOperationDistinctHash","newHashFilter","mediatorHashBindings","hashes","bindings_factory_1","expression_evaluator_1","ActorQueryOperationExtend","BindingsFactory","mediatorMergeBindingsContext","AsyncEvaluator","getAsyncExpressionContext","innerVariable","config","evaluator","evaluate","isExpressionError","logWarn","bindingsToString","outputMetadata","ActorQueryOperationFilter","outputRaw","validateQueryOutput","evaluateAsEBV","ActorQueryOperationFromQuad","copyOperation","recursiveCb","copiedOperation","ALGEBRA_TYPES","applyOperationDefaultGraph","defaultGraphs","joinOperations","bgps","unionOperations","paths","applyOperationNamedGraph","namedGraphs","patternGraph","createValues","pat","namedGraph","createOperation","default","named","GroupsState_1","ActorQueryOperationGroup","aggregate","aggregates","agg","sparqleeConfig","groups","GroupsState","bindingsStreamInner","collectResults","consumeBindings","catch","groupsInitializer","groupVariables","distinctHashes","distinct","waitCounter","resultHasBeenCalled","check","resultCheck","grouper","_","groupHash","hashBindings","groupInitializer","groupInitializerDefined","group","aggregators","put","subtractWaitCounterAndCollect","AsyncAggregateEvaluator","bindingsHash","handleResultCollection","rows","groupBindings","returnBindings","single","emptyValue","waitResolver","ActorQueryOperationJoin","mediatorJoin","ActorQueryOperationLeftJoin","ActorQueryOperationMinus","ActorQueryOperationNop","SingletonIterator","SortIterator_1","ActorQueryOperationOrderBy","POSITIVE_INFINITY","expr","expressions","extractSortExpression","isAscending","transformedStream","sortedStream","SortIterator","compare","orderTypes","operator","sort","windowLength","isFinite","sorted","mid","trunc","_flush","actor_abstract_path_1","actor_query_operation_union_1","ActorQueryOperationPathAlt","subOperations","subPredicate","UnionIterator","subMeta","ActorQueryOperationUnion","unionMetadata","mediatorRdfMetadataAccumulate","ActorQueryOperationPathInv","invPath","ActorQueryOperationPathLink","ActorQueryOperationPathNps","blank","iris","ActorQueryOperationPathOneOrMore","starEval","createOneOrMorePath","createInv","ActorQueryOperationPathSeq","joiner","generatedVariableNames","nextJoiner","generatedVariableName","joinMetadata","ActorQueryOperationPathZeroOrMore","sVar","oVar","entities","subjectGraphHash","objectGraphHash","pred","ActorQueryOperationPathZeroOrOne","extra","bindingsOne","varP","bindingsZero","createOperatorExpression","createTermExpression","prepend","ActorQueryOperationProject","deleteVariables","subVariable","missingVariables","deleteVariable","scopedBlankNodesCache","BlankNodeBindingsScoped","scopedBlankNode","ActorQueryOperationReducedHash","ActorQueryOperationService","forceSparqlEndpoint","ActorQueryOperationSlice","limitIndicator","sliceStream","sliceMetadata","hasLength","subMetadata","min","ActorQueryOperationSource","httpRequests","physicalQueryPlanLogger","logOperation","physicalQueryPlanNode","mergedContext","merge","getMetadataQuads","getMetadataBindings","unionVariables","flat","metadatas","accumulatedMetadata","appendingMetadata","invalidateListener","invalidate","outputsRaw","outputType","outputs","getSafeQuads","ActorQueryOperationClear","throwOnReadOnly","graphs","mediatorUpdateQuads","deleteGraphs","requireExistence","dropGraphs","ActorQueryOperationUpdateCompositeUpdate","subResult","getSafeVoid","ActorQueryOperationCreate","createGraphs","requireNonExistence","actor_query_operation_construct_1","ActorQueryOperationUpdateDeleteInsert","whereBindings","quadStreamInsert","quadStreamDelete","ActorQueryOperationDrop","ActorQueryOperationLoad","subContext","lenient","ActorQueryOperationValues","ActorQueryOperationTyped","bus_query_parse_1","graphql_to_sparql_1","ActorQueryParseGraphql","ActorQueryParse","graphqlToSparql","Converter","requireContext","jsonLdContext","singularizeVariables","graphqlToSparqlAlgebra","sparqljs_1","ActorQueryParseSparql","parsedSyntax","baseIRI","sparqlStar","base","translate","quads","blankToVariable","bus_query_process_1","ActorQueryProcessExplainLogical","ActorQueryProcess","queryProcessor","optimize","ActorQueryProcessExplainParsed","MemoryPhysicalQueryPlanLogger_1","ActorQueryProcessExplainPhysical","MemoryPhysicalQueryPlanLogger","toCompactString","toJson","numberToString","toLocaleString","minimumFractionDigits","maximumFractionDigits","planNodes","logicalOperator","physicalOperator","node","parentNode","actor","planNode","rawNode","rootNode","planParentNode","stashChildren","unstashChild","appendMetadata","planNodeToJson","logical","physical","getLogicalMetadata","compactMetadata","child","childrenGrouped","lastSubChild","at","getPlanHash","childrenCompact","occurrences","firstOccurrence","compactMetadataValue","quadToString","lines","nodeToCompactString","id","indent","bindOperation","bindOperationCardinality","cardinalityReal","timeSelf","timeLife","ActorQueryProcessSequential","queryParseOutput","mediatorQueryParse","initialBindings","materializeOperation","mediatorOptimizeQueryOperation","bus_query_result_serialize_1","RdfString","ActorQueryResultSerializeJson","ActorQueryResultSerializeFixedMediaTypes","_mediaType","wrap","element","quadToStringQuad","empty","setTimeout","ActorQueryResultSerializeRdf","ActorQueryResultSerialize","mediatorMediaTypeCombiner","mediatorRdfSerialize","mediatorMediaTypeFormatCombiner","ActorQueryResultSerializeSimple","ActorQueryResultSerializeSparqlCsv","bindingToCsvBindings","stringValue","replaceAll","bindingsAction","ActionObserverHttp","ActionObserver","requests","bus","subscribeObserver","onRun","_actor","_output","ActorQueryResultSerializeSparqlJson","bindingToJsonBindings","literal","jsonValue","datatype","head","vars","resultStream","first","cb","emitMetadata","httpObserver","rdf_string_ttl_1","ActorQueryResultSerializeSparqlTsv","bindingToTsvBindings","XmlSerializer_1","ActorQueryResultSerializeSparqlXml","bindingToXmlBindings","valueToXmlValue","serializer","XmlSerializer","serializeNode","identation","formatTag","escape","ActorQueryResultSerializeStats","pushHeader","createStat","startTime","delay","createFooter","now","performance","time","hrtime","QUAD_TERM_NAMES_VARS","QUAD_TERM_NAMES","ActorQueryResultSerializeTable","padding","repeat","columnWidth","pad","labels","label","createRow","getTerms","sparqljson_to_tree_1","ActorQueryResultSerializeTree","bindingsStreamToGraphQl","converterSettings","converter","schema","bindingsToTree","materializeRdfJsTerms","ActorQueryResultSerializeTree_1","bus_query_source_identify_hypermedia_1","QuerySourceSparql_1","ActorQuerySourceIdentifyHypermediaSparql","ActorQuerySourceIdentifyHypermedia","testMetadata","forceSourceType","sparqlService","checkUrlSuffix","filterFactor","logInfo","QuerySourceSparql","mediatorHttp","bindMethod","forceHttpGet","countTimeout","fetch_sparql_endpoint_1","VAR_COUNT","COUNT_INFINITY","endpointFetcher","SparqlEndpointFetcher","lastSourceContext","prefixVariableQuestionMark","SELECTOR_SHAPE","operationIn","operationPromise","joinBindings","addBindingsToOperation","selectQuery","operationToSelectQuery","queryBindingsRemote","attachMetadata","rawStream","fetchTriples","operationToQuery","fetchAsk","fetchUpdate","variablesCount","countQuery","operationToCountQuery","cachedCardinality","timeoutHandler","clearTimeout","cardinalityValue","addBindings","binding","createGroup","createBoundAggregate","createWildcardExpression","toSparql","endpoint","fetchBindings","rawData","operationType","bus_query_source_identify_1","QuerySourceHypermedia_1","ActorQuerySourceIdentify","QuerySourceHypermedia","maxIterators","aggregateTraversalStore","mediatorMetadata","mediatorMetadataExtract","mediatorMetadataAccumulate","mediatorDereferenceRdf","mediatorQuerySourceIdentifyHypermedia","mediatorRdfResolveHypermediaLinks","mediatorRdfResolveHypermediaLinksQueue","warningMessage","LinkedRdfSourcesAsyncRdfIterator","queryBindingsOptions","firstUrl","sourceStateGetter","started","currentIterators","iteratorsPendingCreation","iteratorsPendingTermination","_reading","kickstart","propertyName","preflightMetadata","sourceState","accumulateMetadata","returnMetadata","canStartNewIterator","startIteratorsForNextUrls","handledDatasets","startIterator","canStartNewIteratorConsiderReadable","areIteratorsRunning","startSource","receivedEndEvent","receivedMetadata","_destination","_fillBuffer","previousMetadata","updateMetadata","metadataIn","getSourceLinks","nextUrls","linkQueue","getLinkQueue","nextUrl","link","syncError","metadataNew","metadataToInvalidate","isRunning","canClose","nextLink","nextSourceState","isCloseable","_requireQueueEmpty","isEmpty","LinkedRdfSourcesAsyncRdfIterator_1","MediatedLinkedRdfSourcesAsyncRdfIterator","aggregatedStore","wasForcefullyClosed","handledUrls","cause","requireQueueEmpty","hasRunningIterators","links","containedSources","unionDefaultGraph","import","setBaseMetadata","actor_query_source_identify_rdfjs_1","MediatedLinkedRdfSourcesAsyncRdfIterator_1","StreamingStoreMetadata_1","aggregateStore","mediators","logWarning","sourcesState","getSourceCached","getAggregateStore","QuerySourceRdfJs","listener","addIteratorCreatedListener","removeIteratorCreatedListener","getSource","dereferenceRdfOutput","rdfMetadataOutput","triples","requestTime","dataset","aggregatedStores","StreamingStoreMetadata","rdf_streaming_store_1","StreamingStore","store","metadataAccumulator","runningIterators","iteratorCreatedListeners","baseMetadata","ClosableTransformIterator","onClose","getStore","countQuads","updateMetadataState","updateStates","QuerySourceRdfJs_1","ActorQuerySourceIdentifyRdfJs","nullifyVariables","quotedTripleFiltering","someTermsNested","hasDuplicateVariables","filterTermsNested","features","filterMatchingQuotedQuads","setMetadata","quadsToBindings","wouldRequirePostFiltering","someTerms","variablesOptional","bus_rdf_join_entries_sort_1","ActorRdfJoinEntriesSortCardinality","ActorRdfJoinEntriesSort","entryLeft","entryRight","bus_rdf_join_1","asyncjoin_1","ActorRdfJoinHash","ActorRdfJoin","logicalType","physicalName","limitEntries","getOutput","getMetadatas","overlappingVariables","constructResultMetadata","getJoinCoefficients","requestInitialTimes","getRequestInitialTimes","requestItemTimes","getRequestItemTimes","iterations","persistedItems","blockingItems","ActorRdfJoinMultiBindSource","canHandleUndefs","entriesUnsorted","getEntriesWithMetadatas","sortJoinEntries","smallestStream","smallestMetadata","remainingEntries","createOperationFromEntries","chunkedStreams","ChunkedIterator","blockSize","physicalPlanMetadata","bindIndex","mediatorJoinEntriesSort","operationModified","remainingRequestInitialTimes","remainingRequestItemTimes","testingOperation","selectorShape","selectivities","mediatorJoinSelectivity","selectivity","selectivityModifier","cardinalityRemaining","reduce","sum","ActorRdfJoinMultiBind","isLeaf","createBindStream","bindOrder","baseStream","operationBinder","optional","autoStartSubBindings","binder","bindFilter","bindingsMerger","subBindings","joinLeftMetadata","joinRightMetadatas","operationBindings","canBindWithOperation","valid","receiveInitialCostRemaining","receiveItemCostRemaining","ActorRdfJoinMultiEmpty","getCardinality","joinVariables","_metadatas","ActorRdfJoinMultiSmallestFilterBindings","limitEntriesMin","entriesSorted","second","secondIndex","secondSharedVariables","sharedVariables","variableFirst","variableSecond","remaining","secondIn","remainingIn","smallestStream1","commonVariables","smallestStream1Projected","commonVariable","filterBindings","joinedEntry","KeysRdfJoin","lastPhysicalJoin","unshift","firstIndex","remain","mul","ActorRdfJoinMultiSmallest","smallestEntry1","smallestEntry2","firstEntry","entriesWithMetadata","acc","ActorRdfJoinNestedLoop","ActorRdfJoinNone","ActorRdfJoinSingle","includeInLogs","ActorRdfJoinSymmetricHash","BindingsIndex_1","ActorRdfJoinMinusHashUndef","BindingsIndex","contains","bufferMetadata","hashTerm","isBindingsValid","dataIt","dataKey","subDataIt","containsRecursive","validKeys","dataIndexes","subDatas","subKey","ActorRdfJoinMinusHash","actor_rdf_join_inner_multi_bind_1","ActorRdfJoinOptionalBind","ActorRdfJoinOptionalNestedLoop","bus_rdf_join_selectivity_1","ActorRdfJoinSelectivityVariableCounting","ActorRdfJoinSelectivity","accuracy","getPatternCost","cost","getJoinTypes","operation1","operation2","joinTypes","JoinTypes","unboundSS","unboundSP","unboundSO","unboundSG","boundSS","boundSP","boundSO","boundSG","unboundPS","unboundPP","unboundPO","unboundPG","boundPS","boundPP","boundPO","boundPG","unboundOS","unboundOP","unboundOO","unboundOG","boundOS","boundOP","boundOO","boundOG","unboundGS","unboundGP","unboundGO","unboundGG","boundGS","boundGP","boundGO","boundGG","getOperationsPairwiseJoinCost","MAX_PAIRWISE_COST","joinType","getOperationsJoinCost","totalCost","costEntries","pattern1","pattern2","factor","bus_rdf_metadata_accumulate_1","ActorRdfMetadataAccumulateCanContainUndefs","ActorRdfMetadataAccumulate","ActorRdfMetadataAccumulateCardinality","subsetOf","ActorRdfMetadataAccumulatePageSize","pageSize","ActorRdfMetadataAccumulateRequestTime","bus_rdf_serialize_1","jsonld_streaming_serializer_1","ActorRdfSerializeJsonLd","ActorRdfSerializeFixedMediaTypes","writer","JsonLdSerializer","space","jsonStringifyIndentSpaces","pipe","n3_1","ActorRdfSerializeN3","StreamWriter","format","arrayify_stream_1","shaclc_write_1","ActorRdfSerializeShaclc","errorOnUnused","extendedSyntax","RdfJsQuadDestination_1","ActorRdfUpdateQuadsRdfJsStore","ActorRdfUpdateQuadsDestination","getContextDestination","remove","getDestination","RdfJsQuadDestination","event_emitter_promisify_1","promisifyEventEmitter","_requireExistence","_dropGraphs","deleteGraph","allQuads","stringToTerm","eventEmitter","once","immutable_1","bindingsToString_1","Bindings","dataFactory","contextHolder","mapIterable","iteratorToIterable","fn","other","createBindingsWithContexts","mergeWith","merger","mergeContext","contextMergeHandlers","otherContext","allKeys","newContextData","handledKeys","keysSetOtherContext","keysBothContext","occursInBoth","setContextEntry","setContextEntryRaw","deleteContextEntry","deleteContextEntryRaw","getContext","getContextEntry","iterable","Bindings_1","mergeHandlers","fromBindings","fromRecord","record","raw","ActorHttpInvalidate","ActorHttpInvalidate_1","ActorHttpInvalidateListenable","invalidateListeners","bnodeCounter","getSafeBoolean","getBaseExpressionContext","extensionFunctionCreator","extensionFunctions","functionNamedNode","getExpressionContext","_mediatorQueryOperation","bnode","exists","createExistenceResolver","not","readOnly","ActorQueryOperation_1","operationName","cachifyMetadata","ActorQueryOperationTyped_1","materializeTerm","strictTargetVariables","extend","project","valueBindings","newBinding","keyString","aggregator","BusQueryOperation","BusIndexed","actorIdentifierFields","actionIdentifierFields","actor_abstract_mediatyped_1","sourceType","QuadTermUtil_1","isTermVariable","getDuplicateElementLinks","variableElements","duplicateVariables","forEachTermsNested","val","duplicateElementLinks","elements","remainingElements","elementVariables","forceEstimateCardinality","getMetadataCb","metadataRaw","quadsMetadataToBindingsMetadata","validateMetadataQuads","metadataQuads","quadsOrderToBindingsOrder","orderDef","quadsOrder","mappedVariables","variableName","direction","filterNonDefaultQuads","reduceTermsNested","filteredOutput","keyLeft","keysLeft","valueLeft","getValueNestedPath","keysRight","matchPatternMappings","instrumentIterator_1","baseArray","el","constructState","partialMetadata","cardinalityJoined","cardinalityThis","variableOccurrences","multiOccurrenceVariables","entriesWithoutCommonVariables","hasCommon","leftWithoutCommonVariables","parentPhysicalQueryPlanNode","planMetadata","instrumentIterator","counters","cardinalities","joinCoefficients","consumeChunkAsIterator","_transform","instrumentIteratorInner","top","_profileInstrumented","readOld","_source","ActorRdfSerialize","ActorRdfUpdateQuads","actor_context_preprocess_query_source_skolemize_1","ActorRdfUpdateQuads_1","deskolemizeStream","deskolemizeQuad","deskolemize","isDataDestinationRawType","dataDestination","fileUrl","hashPosition","CONTEXT_KEY_LOGGER","includeCredentials","auth","httpTimeout","httpBodyTimeout","httpRetryCount","httpRetryDelay","httpRetryOnServerError","recoverBrokenLinks","datetime","httpProxyHandler","cliArgsHandlers","documentLoader","strictValues","parserOptions","processingHtmlScript","extractAllScripts","setRaw","getRaw","hasRaw","contexts","keyName","toJS","for","maybeActionContext","ContextEntries_1","beforeActors","subscribe","addDependencies","getContextLogger","runObservable","deinitialize","getDefaultLogData","dataActual","logTrace","trace","debug","info","warn","logError","logFatal","fatal","actors","observers","dependencyLinks","reorderForDependencies","observer","unsubscribe","unsubscribeObserver","publish","reply","dependent","dependencies","dependency","existingDependencies","actorsAfter","actorAfter","dependentPos","activeActorAfterId","validLink","activeActorAfter","Bus_1","Bus","actorsIndex","actorId","getActorIdentifier","actionId","getActionIdentifier","_undefined_","field","ActionContext_1","mediateActor","mediateWith","singleBindingsScope","TermTransformer_1","Consts_1","TypeHandling_1","sharedContext","separator","termTransformer","TermTransformer","superTypeProvider","termToNumericOrError","isSubTypeOf","TypeAlias","SPARQL_NUMERIC","transformLiteral","aggregatorComponent","variableValues","component","canSkip","addSeen","E","functions_1","Helpers_1","Aggregator_1","Average","AggregatorComponent","summer","regularFunctions","RegularOperator","ADDITION","divider","DIVISION","integer","toRDF","internalTerm","IntegerLiteral","Count","GroupConcat","lastLanguageValid","lastLanguage","langString","Ordering_1","Max","Min","Sample","Sum","bindingValues","putBindings","handleDistinct","bindingList","snd","localeCompare","Average_1","Count_1","GroupConcat_1","Max_1","Min_1","Sample_1","Sum_1","avg","group_concat","sample","BaseAggregateEvaluator_1","SyncEvaluator_1","AggregateEvaluator","BaseAggregateEvaluator","throwError","SyncEvaluator","completeContext","errorOccurred","isWildcard","wildcardAggregator","startTerm","safeThrow","AsyncEvaluator_1","AlgebraTransformer_1","DateTimeHelpers_1","AsyncRecursiveEvaluator_1","typeCache","discoverer","getSuperType","defaultTimeZone","extractTimeZone","algExpr","creator","baseContext","transformer","AlgebraTransformer","transformAlgebra","AsyncRecursiveEvaluator","coerceEBV","evaluateAsInternal","SyncRecursiveEvaluator_1","SyncRecursiveEvaluator","Err","BaseExpressionEvaluator_1","BaseExpressionEvaluator","subEvaluators","ExpressionType","Term","_mapping","Variable","Operator","evalOperator","SpecialOperator","evalSpecialOperator","Named","evalNamed","Existence","evalExistence","Aggregate","evalAggregate","AsyncExtension","evalAsyncExtension","InvalidExpressionType","argPromises","argResults","applyAsync","_evalAsyncArgs","NoExistenceHook","BooleanLiteral","NoAggregator","transformRDFTermUnsafe","aggregators_1","WildcardCountAggregator_1","Aggregator","WildcardCountAggregator","EmptyAggregateError","expressionToVar","UnboundVariableError","SyncExtension","evalSyncExtension","applySynchronously","Expressions_1","Serialization_1","InvalidArgumentTypes","STR","EBVCoercionError","valueTerm","RDFsubject","RDFpredicate","RDFobject","Literal","typedValue","dataType","strValue","NumericLiteral","specificFormatter","TypeURL","XSD_INTEGER","toFixed","XSD_DECIMAL","XSD_FLOAT","XSD_DOUBLE","jsExponential","toExponential","jsMantisse","jsExponent","exponent","XSD_BOOLEAN","RDF_LANG_STRING","XSD_STRING","XSD_DATE_TIME","serializeDateTime","XSD_TIME","serializeTime","XSD_DATE","serializeDate","DurationLiteral","XSD_DURATION","serializeDuration","XSD_DAY_TIME_DURATION","XSD_YEAR_MONTH_DURATION","NonLexicalLiteral","openWorldType","lit","BaseFunction","definition","monomorph","handleInvalidTypes","concreteFunction","arity","overloads","search","functionClass","checkArity","expressions_1","OverloadTree_1","identifier","Builder","overloadTree","OverloadTree","collected","collect","wrapInvalidLexicalProtected","func","InvalidLexicalForm","argTypes","addInvalidHandling","addOverload","from","to","impl","getImplementationExact","UnexpectedError","onUnary","onUnaryTyped","onBinary","onBinaryTyped","onTernaryTyped","a1","a2","a3","onTernary","onQuaternaryTyped","a4","onTerm1","onTerm3","t1","t2","t3","onQuad1","onLiteral1","onBoolean1","onBoolean1Typed","onString1","onString1Typed","onLangString1","onStringly1","SPARQL_STRINGLY","onStringly1Typed","onNumeric1","onDateTime1","numericConverter","evalHelper","decimal","float","double","arithmetic","numberTest","numeric","bool","stringTest","booleanTest","dateTimeTest","DecimalLiteral","FloatLiteral","DoubleLiteral","StringLiteral","lang","LangStringLiteral","date","DateTimeLiteral","variableExpression","Parsing_1","xsdToString","declare","xsdToFloat","parseXSDFloat","CastError","xsdToDouble","xsdToDecimal","parseXSDDecimal","xsdToInteger","parseXSDInteger","xsdToDatetime","dateTime","parseDateTime","hours","minutes","seconds","xsdToBoolean","xsdToTime","TimeLiteral","parseTime","xsdToDate","DateLiteral","parseDate","xsdToDuration","parseDuration","xsdToDayTimeDuration","DayTimeDurationLiteral","trimToDayTimeDuration","parseDayTimeDuration","xsdToYearMonthDuration","YearMonthDurationLiteral","trimToYearMonthDuration","parseYearMonthDuration","depth","implementation","generalOverloads","literalOverLoads","promotionCount","getSubtree","overrideType","generalType","asGeneralType","cacheIter","searchIndex","literalExpression","isLiteralTermExpression","searchStack","getSubTreeWithArg","startIndex","addToCache","getDefault","lruCache","argumentTypes","_addOverload","argumentType","_argumentTypes","nextTree","newNode","asOverrideType","typePromotion","addPromotedOverload","typeToPromote","conversionFunction","funcConf","concreteType","asKnownLiteralType","subExtensionTable","superTypeDictTable","getSuperTypes","matchType","tree","prioA","matchTypeA","prioB","matchTypeB","sortedType","bignumber_js_1","relative_to_absolute_iri_1","spark_md5_1","uuid","SpecAlgos_1","Core_1","X","_1","NOT","unaryPlus","UPLUS","unaryMinus","UMINUS","multiplication","MULTIPLICATION","BigNumber","times","toNumber","division","div","ExpressionError","addition","plus","dur","addDurationToDateTime","defaultedDurationRepresentation","defaultedDateTimeRepresentation","subtraction","SUBTRACTION","minus","date1","date2","elapsedDuration","negateDuration","equality","toUTCDate","getTime","RegularFunction","_left","_right","RDFEqualTypeError","RDFTermEqual","dur1","dur2","yearMonthDurationsToMonths","defaultedYearMonthDurationRepresentation","dayTimeDurationsToSeconds","defaultedDayTimeDurationRepresentation","time1","time2","inequality","NOT_EQUAL","lesserThan","LT","dur1L","dur2L","greaterThan","GT","lesserThanEqual","LTE","greaterThanEqual","GTE","isIRI","IS_IRI","isBlank","IS_BLANK","isLiteral","IS_LITERAL","isNumeric","IS_NUMERIC","LANG","DATATYPE","NamedNode","IRI","STRDT","STRLANG","UUID","v4","STRUUID","STRLEN","SUBSTR","startingLoc","sub","UCASE","LCASE","STRSTARTS","arg1","arg2","IncompatibleLanguageOperation","STRENDS","CONTAINS","STRBEFORE","STRAFTER","ENCODE_FOR_URI","encodeURI","langmatches","LANG_MATCHES","range","langMatches","REGEX","flags","REPLACE","replacement","abs","ABS","round","ROUND","ceil","CEIL","floor","FLOOR","rand","RAND","random","NOW","toDateTimeRepresentation","timeZone","year","YEAR","month","MONTH","day","DAY","HOURS","MINUTES","SECONDS","timezone","TIMEZONE","duration","zoneHours","zoneMinutes","InvalidTimezoneCall","tz","TZ","extractRawTimeZone","MD5","SHA1","SHA256","sha256","SHA384","sha384","SHA512","sha512","triple","TRIPLE","Quad","SUBJECT","PREDICATE","istriple","IS_TRIPLE","uplus","uminus","isiri","isuri","isblank","isliteral","isnumeric","strdt","strlang","struuid","strlen","substr","ucase","lcase","strstarts","strends","strbefore","strafter","encode_for_uri","regex","md5","bound","bound_","BOUND","ifSPARQL","valFirst","coalesce","errors","CoalesceError","logicalOr","leftExpr","rightExpr","logicalAnd","sameTerm","inSPARQL","inRecursiveAsync","inRecursiveSync","needle","InError","nextExpression","notInSPARQL","_in","specialFunctions","IN","isIn","concatTree","CONCAT","pLits","pTerm","lits","langAllEqual","bnodeTree","BNODE","strInput","BlankNode","BNODE_","if","sameterm","in","notin","_isWildCard","_matchLangTag","RegExp","reg","langTags","rangeTags","lI","rI","NamedFunctions_1","RegularFunctions_1","SpecialFunctions_1","definitions","specialDefinitions","SpecialFunction","namedDefinitions","NamedFunction","AggregateEvaluator_1","Errors_1","AsyncAggregateEvaluator_1","algebraConfig","creatorConfig","transformTerm","transformOperator","transformNamed","transformExistence","transformAggregate","transformWildcard","wildcard","SpecialOperators","specialOp","specialArgs","specialFunc","InvalidArity","Operators","UnknownOperator","regularOp","regularArgs","regularFunc","hasCorrectArity","wrapSyncFunction","ExtensionFunctionError","wrapAsyncFunction","funcName","namedArgs","NamedOperators","namedFunc","namedFunctions","syncExtensionFunc","simpleAppl","asyncExtensionFunc","asyncAppl","UnknownNamedOperator","RDFString","InvalidExpression","InvalidTermType","superTypeDict","getSuperTypeDict","dateVal","isFloat","isDouble","doubleVal","SetFunction","RegularOperators","rep","toJSDate","jumpDeltaOfDate","setFullYear","getFullYear","temp","years","days","getMonth","getDate","getHours","getMinutes","getSeconds","defaultTimezone","localTime","minutesCorrectionLocal","getTimezoneOffset","hourCorrectionUTC","minutesCorrectionUTC","zoneContained","exec","pp","arg0","cast","dateString","payload","functionError","comparePrimitives","valueA","valueB","termA","termB","strict","typeDiscoveryCallback","_TERM_ORDERING_PRIORITY","orderSubject","orderPredicate","orderObject","litA","litB","isGreater","isEqual","myLitA","myLitB","compareType","orderLiteralTypes","InvalidCompareArgumentTypes","DefaultGraph","parseTimeZone","timeZoneStr","dateStr","formatted","ParseError","dateStrings","maximumDayInMonthFor","__parseTime","timeStr","timeStrings","durationStr","dayNotation","timeNotation","formattedDayDur","durationStrings","formattedTimeDur","sign","simplifyDurationRepresentation","numb","NEGATIVE_INFINITY","dateTimeStr","numSerializer","minimumIntegerDigits","useGrouping","serializeTimeZone","zeroString","fDiv","high","low","intDiv","remainder","yearValue","monthValue","additionalYears","newDate","tempDiv","carry","d1","d2","diff","cached","__depth","subExtension","knownValue","extensionTableInit","_key","extensionTableInput","extensionTableBuilderInitKey","baseRes","baseType","XSD_DATE_TIME_STAMP","XSD_NORMALIZED_STRING","XSD_TOKEN","XSD_LANGUAGE","XSD_NM_TOKEN","XSD_NAME","XSD_NC_NAME","XSD_ENTITY","XSD_ID","XSD_ID_REF","XSD_NON_POSITIVE_INTEGER","XSD_NEGATIVE_INTEGER","XSD_LONG","XSD_INT","XSD_SHORT","XSD_BYTE","XSD_NON_NEGATIVE_INTEGER","XSD_POSITIVE_INTEGER","XSD_UNSIGNED_LONG","XSD_UNSIGNED_INT","XSD_UNSIGNED_SHORT","XSD_UNSIGNED_BYTE","XSD_G_MONTH","XSD_G_MONTHDAY","XSD_G_YEAR","XSD_G_YEAR_MONTH","XSD_G_DAY","XSD_ANY_URI","typeAliasCheck","initTypeAliasCheck","asTermType","types_1","LoggerVoid","Logger","MediatorAll","Mediator","validActors","testResults","testResult","MediatorCombinePipeline","filterErrors","_testResults","getOrder","elem","actor1","actor2","MediatorCombineUnion","combiner","createCombiner","MediatorJoinCoefficientsFixed","promises","coefficients","costs","coeff","cpuWeight","memoryWeight","timeWeight","ioWeight","maxCost","minIndex","minValue","bestActor","MediatorNumber","indexPicker","createIndexPicker","tests","prev","curr","getOrDefault","defaultValue","ignoreErrors","dummy","MediatorRace","subError","validateMetadataBindings","lastReturn","lastReturnValue","getLevelOrdinal","level","LEVELS","b64","lens","getLens","validLen","placeHoldersLen","toByteArray","tmp","arr","Arr","_byteLength","curByte","len","revLookup","fromByteArray","uint8","extraBytes","maxChunkLength","len2","encodeChunk","lookup","globalObject","mathceil","mathfloor","bignumberError","tooManyDigits","BASE","LOG_BASE","MAX_SAFE_INTEGER","POWS_TEN","SQRT_BASE","MAX","bitFloor","coeffToString","a","z","r","y","b","xc","yc","intCheck","isOdd","charAt","toFixedPoint","zs","configObject","convertBase","parseNumeric","pow2_53","random53bitInt","basePrefix","dotAfter","dotBefore","isInfinityOrNaN","whitespaceOrPlus","valueOf","ONE","DECIMAL_PLACES","ROUNDING_MODE","TO_EXP_NEG","TO_EXP_POS","MIN_EXP","MAX_EXP","CRYPTO","MODULO_MODE","POW_PRECISION","FORMAT","groupSize","secondaryGroupSize","groupSeparator","decimalSeparator","fractionGroupSize","fractionGroupSeparator","suffix","ALPHABET","alphabetHasNormalDecimalDigits","v","alphabet","caseChanged","isNum","_isBigNumber","substring","DEBUG","rm","c0","ne","maxOrMin","normalise","sd","d","ni","rd","pows10","out","ROUND_UP","ROUND_DOWN","ROUND_CEIL","ROUND_FLOOR","ROUND_HALF_UP","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_CEIL","ROUND_HALF_FLOOR","EUCLID","crypto","getRandomValues","randomBytes","EXPONENTIAL_AT","RANGE","isBigNumber","maximum","minimum","dp","Uint32Array","toBaseOut","baseIn","baseOut","arrL","reverse","callerIsToString","pow","multiply","xlo","xhi","klo","khi","aL","bL","cmp","subtract","more","prod","prodL","qc","rem","remL","rem0","xi","xL","yc0","yL","yz","p1","p2","absoluteValue","comparedTo","decimalPlaces","dividedBy","dividedToIntegerBy","idiv","exponentiatedBy","half","isModExp","nIsBig","nIsNeg","nIsOdd","isInteger","mod","integerValue","isEqualTo","eq","isGreaterThan","isGreaterThanOrEqualTo","gte","isLessThan","isLessThanOrEqualTo","lte","isNegative","isPositive","isZero","t","xLTy","xe","ye","modulo","multipliedBy","xcL","ycL","ylo","yhi","zc","sqrtBase","negated","precision","shiftedBy","squareRoot","sqrt","toFormat","g1","g2","intPart","fractionPart","isNeg","intDigits","toFraction","md","d0","exp","n0","n1","toPrecision","toJSON","base64","ieee754","customInspectSymbol","SlowBuffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","setPrototypeOf","encodingOrOffset","allocUnsafe","isEncoding","actual","fromString","arrayView","isInstance","fromArrayBuffer","byteOffset","fromArrayLike","fromArrayView","SharedArrayBuffer","isBuffer","checked","numberIsNaN","fromObject","toPrimitive","assertSize","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","dir","arrayIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","found","hexWrite","strLen","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","codePoints","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","foo","typedArraySupport","console","poolSize","fill","allocUnsafeSlow","_isBuffer","list","pos","swap16","swap32","swap64","inspect","thisStart","thisEnd","thisCopy","targetCopy","_arr","hexSliceLookupTable","checkOffset","ext","checkInt","wrtBigUInt64LE","checkIntBI","BigInt","wrtBigUInt64BE","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","subarray","readUintLE","readUIntLE","readUintBE","readUIntBE","readUint8","readUInt8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUInt32LE","readUint32BE","readUInt32BE","readBigUInt64LE","defineBigIntMethod","validateNumber","last","boundsError","readBigUInt64BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readBigInt64LE","readBigInt64BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUInt8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUInt32LE","writeUint32BE","writeUInt32BE","writeBigUInt64LE","writeBigUInt64BE","writeIntLE","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeBigInt64LE","writeBigInt64BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","sym","getMessage","Base","addNumericalSeparator","ERR_OUT_OF_RANGE","checkBounds","ERR_INVALID_ARG_TYPE","ERR_BUFFER_OUT_OF_BOUNDS","received","INVALID_BASE64_RE","Infinity","leadSurrogate","base64clean","src","dst","table","i16","BufferBigIntNotDefined","serialize","Function","cv","ci","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","ownKeys","getOwnPropertySymbols","NumberIsNaN","EventEmitter","emitter","errorListener","removeListener","resolver","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","_getMaxListeners","that","_addListener","events","existing","warning","newListener","warned","w","onceWrapper","fired","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","wrapListener","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","listeners","addListener","prependListener","prependOnceListener","originalListener","spliceOne","removeAllListeners","rawListeners","eventNames","equal","sparqljson_parse_1","sparqlxml_parse_1","stringifyStream","readable_web_to_node_stream_1","n3","isStream","additionalUrlParams","defaultHeaders","fetchCb","sparqlJsonParser","SparqlJsonParser","sparqlXmlParser","SparqlXmlParser","sparqlParsers","CONTENTTYPE_SPARQL_JSON","parseBooleanStream","sparqlResponseStream","parseJsonBooleanStream","parseResultsStream","parseJsonResultsStream","CONTENTTYPE_SPARQL_XML","parseXmlBooleanStream","parseXmlResultsStream","timeout","getQueryType","parsedQuery","queryType","getUpdateTypes","updateType","contentType","responseStream","fetchRawStream","CONTENTTYPE_SPARQL","CONTENTTYPE_TURTLE","StreamParser","abortController","defaultHeadersRaw","handleFetchCall","ignoreBody","acceptHeader","encodeURIComponent","timeoutId","controller","httpResponse","simpleUrl","bodyString","language_1","handler_1","directivenode_1","IConvertContext_1","Util_1","settings","variableDelimiter","expressionVariableCounter","util","initializeNodeHandlers","registerNodeHandlers","registerNodeHandler","NodeHandlerDocument","NodeHandlerDefinitionOperation","NodeHandlerDefinitionFragment","NodeHandlerSelectionFragmentSpread","NodeHandlerSelectionInlineFragment","NodeHandlerSelectionField","registerNodeValueHandlers","registerNodeValueHandler","NodeValueHandlerVariable","NodeValueHandlerInt","NodeValueHandlerFloat","NodeValueHandlerString","NodeValueHandlerBoolean","NodeValueHandlerNull","NodeValueHandlerEnum","NodeValueHandlerList","NodeValueHandlerObject","registerDirectiveNodeHandlers","registerDirectiveNodeHandler","DirectiveNodeHandlerInclude","DirectiveNodeHandlerOptional","DirectiveNodeHandlerPlural","DirectiveNodeHandlerSingle","DirectiveNodeHandlerSkip","graphqlQuery","graphqlToSparqlAlgebraRawContext","contextParser","document","convertContext","fragmentDefinitions","indexFragments","singularizeState","SingularizeState","PLURAL","terminalVariables","variablesDict","variablesMetaDict","handleNode","newDefinitions","kind","jsonld_context_parser_1","nodeHandlers","nodeValueHandlers","directiveNodeHandlers","operationFactory","ContextParser","nodeHandler","targetKind","nodeValueHandler","directiveNodeHandler","handleNodeValue","fieldName","handleDirectiveNode","directiveContext","directive","nonBgps","joinOperationsAsBgp","originalLeftJoin","createLeftJoin","joinOperationsAsNestedJoin","appendFieldToPath","fieldLabel","getFieldLabel","alias","nameToVariable","valueToNamedNode","contextValue","expandTerm","getArgument","argument","newTypePattern","typeCondition","createQuadPattern","predicateName","getContextRaw","createQuadPath","predicateAlternatives","predicateInitial","pathSymbol","createLink","predicateAlternative","NodeHandlerAdapter","getNodeQuadContextSelectionSet","selectionSet","nodeQuadContext","selectionNode","selections","fieldNode","handleNodeQuadContextField","nodeQuadContextKey","valueOutput","auxiliaryPatterns","getDirectiveOutputs","directives","ignore","handleDirectiveOutputs","directiveOutputs","directiveOutput","operationOverrider","NodeHandlerDefinitionAdapter","NodeHandlerAdapter_1","NodeHandlerDefinitionAdapter_1","operationDefinition","variableDefinitions","variableDefinition","typeNode","mandatory","definitionOperations","subjectOutput","getNodeQuadContextDefinitionNode","ignoreUnknownVariables","queryParseContext","definitionOperation","translateBlankNodesToVariables","blankToVariableMapping","variablesRaw","createUniqueVariable","NodeHandlerSelectionAdapter","getNodeQuadContextFieldNode","fieldToOperation","pushTerminalVariables","nesting","SINGLE","operationOverride","handleMetaField","overrideObjectTerms","pathValue","subConvertContext","totalCount","selection","joinedOperation","expressionVariable","countOverVariable","countProject","createSlice","NodeHandlerSelectionAdapter_1","fragmentSpreadNode","fragmentDefinitionNode","inlineFragmentNode","DirectiveNodeHandlerAdapter","getDirectiveConditionalValue","subValue","isDirectiveScopeAll","scopeArg","DirectiveNodeHandlerAdapter_1","NodeValueHandlerAdapter","NodeValueHandlerAdapter_1","valueNode","nodeFirst","nodeRest","nodeNil","listTerms","arraysToRdfLists","firstListNode","listNode","nextListNode","nil","auxiliaryObjectPatterns","fields","contextEntry","listValue","_typeof","printError","GraphQLError","_isObjectLike","_symbols","_location","_printLocation","enumerableOnly","symbols","_defineProperty","_defineProperties","props","descriptor","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","_wrapNativeSuper","Class","_cache","Wrapper","_construct","_getPrototypeOf","_setPrototypeOf","Parent","_isNativeReflectConstruct","construct","instance","sham","Proxy","_Error","subClass","superClass","_inherits","Derived","hasNativeReflectConstruct","Constructor","protoProps","_super","Super","NewTarget","nodes","positions","originalError","extensions","_nodeLocations","_nodeLocations2","_nodeLocations3","_this","_classCallCheck","undefinedIfEmpty","nodeLocations","_i2","_ref3","_this$nodes","loc","locations","getLocation","originalExtensions","getOwnPropertyDescriptors","defineProperties","_objectSpread","captureStackTrace","SYMBOL_TO_STRING_TAG","_i4","_error$nodes2","printLocation","_i6","_error$locations2","printSourceLocation","syntaxError","description","_GraphQLError","classObject","_invariant","_nodejsCustomInspectSymbol","_interopRequireDefault","condition","formatValue","MAX_ARRAY_LENGTH","MAX_RECURSIVE_DEPTH","seenValues","previouslySeenValues","customInspectFn","getCustomFn","customValue","formatArray","getObjectTag","formatObject","formatObjectValue","_default","isNode","maybeNode","Token","Location","_defineInspect","startToken","endToken","getBlockStringIndentation","_commonIndent","isFirstLine","isEmptyLine","commonIndent","dedentBlockStringValue","rawString","startLine","endLine","printBlockString","indentation","preferMultipleLines","isSingleLine","hasLeadingSpace","hasTrailingQuote","hasTrailingSlash","printAsMultipleLines","DirectiveLocation","QUERY","MUTATION","SUBSCRIPTION","FIELD","FRAGMENT_DEFINITION","FRAGMENT_SPREAD","INLINE_FRAGMENT","VARIABLE_DEFINITION","SCHEMA","SCALAR","FIELD_DEFINITION","ARGUMENT_DEFINITION","INTERFACE","ENUM","ENUM_VALUE","INPUT_OBJECT","INPUT_FIELD_DEFINITION","Source","_kinds","Kind","_tokenKind","TokenKind","_lexer","Lexer","_parser","parseValue","parseType","_printer","print","_visitor","visit","visitInParallel","getVisitFn","BREAK","_ast","_predicates","isDefinitionNode","isExecutableDefinitionNode","isSelectionNode","isValueNode","isTypeNode","isTypeSystemDefinitionNode","isTypeDefinitionNode","isTypeSystemExtensionNode","isTypeExtensionNode","_directiveLocation","NAME","DOCUMENT","OPERATION_DEFINITION","SELECTION_SET","ARGUMENT","VARIABLE","INT","FLOAT","BOOLEAN","LIST","OBJECT_FIELD","DIRECTIVE","NAMED_TYPE","LIST_TYPE","NON_NULL_TYPE","SCHEMA_DEFINITION","OPERATION_TYPE_DEFINITION","SCALAR_TYPE_DEFINITION","OBJECT_TYPE_DEFINITION","INPUT_VALUE_DEFINITION","INTERFACE_TYPE_DEFINITION","UNION_TYPE_DEFINITION","ENUM_TYPE_DEFINITION","ENUM_VALUE_DEFINITION","INPUT_OBJECT_TYPE_DEFINITION","DIRECTIVE_DEFINITION","SCHEMA_EXTENSION","SCALAR_TYPE_EXTENSION","OBJECT_TYPE_EXTENSION","INTERFACE_TYPE_EXTENSION","UNION_TYPE_EXTENSION","ENUM_TYPE_EXTENSION","INPUT_OBJECT_TYPE_EXTENSION","isPunctuatorTokenKind","BANG","DOLLAR","AMP","PAREN_L","PAREN_R","SPREAD","EQUALS","AT","BRACKET_L","BRACKET_R","BRACE_L","PIPE","BRACE_R","_syntaxError","_blockString","startOfFileToken","SOF","lastToken","lineStart","_proto","advance","lookahead","EOF","_token$next","readToken","COMMENT","printCharCode","lexer","bodyLength","_line","_col","readComment","readBlockString","readString","readNumber","readName","unexpectedCharacterMessage","col","firstCode","readDigits","isNameStart","chunkStart","charCode","char2hex","invalidSequence","rawValue","BLOCK_STRING","lineRegexp","parseDocument","expectToken","parseValueLiteral","parseTypeReference","sourceObj","isSource","_options","parseName","many","parseDefinition","peek","parseOperationDefinition","parseFragmentDefinition","parseTypeSystemDefinition","parseTypeSystemExtension","peekDescription","unexpected","parseSelectionSet","parseOperationType","parseVariableDefinitions","parseDirectives","operationToken","optionalMany","parseVariableDefinition","parseVariable","expectOptionalToken","parseSelection","parseFragment","parseField","nameOrAlias","parseArguments","isConst","parseConstArgument","parseArgument","hasTypeCondition","expectOptionalKeyword","parseFragmentName","parseNamedType","_this$_options","expectKeyword","experimentalFragmentVariables","parseList","parseObject","parseStringLiteral","block","any","_this2","parseObjectField","parseDirective","keywordToken","parseSchemaDefinition","parseScalarTypeDefinition","parseObjectTypeDefinition","parseInterfaceTypeDefinition","parseUnionTypeDefinition","parseEnumTypeDefinition","parseInputObjectTypeDefinition","parseDirectiveDefinition","parseDescription","operationTypes","parseOperationTypeDefinition","interfaces","parseImplementsInterfaces","parseFieldsDefinition","_this$_options2","allowLegacySDLImplementsInterfaces","delimitedMany","_this$_options3","allowLegacySDLEmptyFields","parseFieldDefinition","parseArgumentDefs","parseInputValueDef","parseUnionMemberTypes","parseEnumValuesDefinition","parseEnumValueDefinition","parseInputFieldsDefinition","parseSchemaExtension","parseScalarTypeExtension","parseObjectTypeExtension","parseInterfaceTypeExtension","parseUnionTypeExtension","parseEnumTypeExtension","parseInputObjectTypeExtension","repeatable","parseDirectiveLocations","parseDirectiveLocation","_this$_options4","noLocation","getTokenKindDesc","getTokenDesc","atToken","openKind","parseFn","closeKind","delimiterKind","sourceLocation","firstLineColumnOffset","locationOffset","whitespace","lineIndex","lineOffset","lineNum","columnOffset","columnNum","locationStr","locationLine","subLineIndex","subLineColumnNum","subLines","printPrefixedLines","subLine","existingLines","_ref","padLen","_ref2","ast","leave","printDocASTReducer","Name","Document","OperationDefinition","varDefs","VariableDefinition","SelectionSet","Field","argsLine","Argument","_ref4","FragmentSpread","_ref5","InlineFragment","_ref6","FragmentDefinition","_ref7","IntValue","_ref8","FloatValue","_ref9","StringValue","_ref10","BooleanValue","_ref11","NullValue","EnumValue","_ref12","ListValue","_ref13","ObjectValue","_ref14","ObjectField","_ref15","Directive","_ref16","NamedType","_ref17","ListType","_ref18","NonNullType","_ref19","SchemaDefinition","addDescription","_ref20","OperationTypeDefinition","_ref21","ScalarTypeDefinition","_ref22","ObjectTypeDefinition","_ref23","FieldDefinition","_ref24","hasMultilineItems","InputValueDefinition","_ref25","InterfaceTypeDefinition","_ref26","UnionTypeDefinition","_ref27","EnumTypeDefinition","_ref28","EnumValueDefinition","_ref29","InputObjectTypeDefinition","_ref30","DirectiveDefinition","_ref31","SchemaExtension","_ref32","ScalarTypeExtension","_ref33","ObjectTypeExtension","_ref34","InterfaceTypeExtension","_ref35","UnionTypeExtension","_ref36","EnumTypeExtension","_ref37","InputObjectTypeExtension","_ref38","maybeArray","_maybeArray$filter$jo","maybeString","isMultiline","_instanceOf","_inspect","_devAssert","root","visitor","visitorKeys","QueryDocumentKeys","inArray","edits","ancestors","newRoot","isLeaving","isEdited","_Object$keys2","editOffset","ii","editKey","editValue","_visitorKeys$node$kin","visitFn","visitors","skipping","enter","kindVisitor","kindSpecificVisitor","specificVisitor","specificKindVisitor","SYMBOL_ASYNC_ITERATOR","SYMBOL_ITERATOR","asyncIterator","toStringTag","utils","common","sha","ripemd","hmac","sha224","ripemd160","assert","BlockHash","pending","pendingTotal","outSize","hmacStrength","padLength","endian","_delta8","_delta32","enc","join32","_update","_pad","_digest","Hmac","Hash","inner","outer","rotl32","sum32","sum32_3","sum32_4","RIPEMD160","h","f","K","Kh","inherits","A","B","D","Ah","Bh","Ch","Dh","Eh","T","rh","sh","toHex32","split32","shaCommon","sum32_5","ft_1","sha1_K","W","SHA224","ch32","maj32","s0_256","s1_256","g0_256","g1_256","sha256_K","g","T1","T2","rotr64_hi","rotr64_lo","shr64_hi","shr64_lo","sum64","sum64_hi","sum64_lo","sum64_4_hi","sum64_4_lo","sum64_5_hi","sum64_5_lo","sha512_K","ch64_hi","xh","xl","yh","yl","zh","ch64_lo","zl","maj64_hi","maj64_lo","s0_512_hi","s0_512_lo","s1_512_lo","g0_512_hi","g0_512_lo","g1_512_lo","_prepareBlock","c0_hi","c0_lo","c1_hi","c1_lo","c2_hi","c2_lo","c3_hi","c3_lo","ah","al","bh","bl","ch","cl","dh","dl","eh","fh","fl","gh","gl","hh","hl","c4_hi","c4_lo","T1_hi","T1_lo","T2_hi","T2_lo","rotr32","p32","isSurrogatePair","htonl","zero2","word","zero8","toHex","COMPATIBLE_ENCODING_PATTERN","WS_TRIM_PATTERN","WS_CHAR_PATTERN","WS_FOLD_PATTERN","DELIMITER_PATTERN","WS_DELIMITER_PATTERN","TOKEN_PATTERN","hasWhitespace","skipWhitespace","needsQuotes","Link","refs","rel","setUnique","ref","shallowCompareObjects","object1","object2","expandRelations","attrValue","isSingleOccurenceAttr","parseExtendedValue","formatAttribute","isCompatibleEncoding","isTokenAttr","escapeQuotes","formatExtendedAttribute","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","rt","LN2","DELETE","SHIFT","SIZE","MASK","NOT_SET","SetRef","OwnerID","ensureSize","iter","__iterate","returnTrue","wrapIndex","uint32Index","wholeSlice","begin","resolveBegin","resolveIndex","resolveEnd","defaultIndex","IS_COLLECTION_SYMBOL","isCollection","maybeCollection","IS_KEYED_SYMBOL","isKeyed","maybeKeyed","IS_INDEXED_SYMBOL","isIndexed","maybeIndexed","isAssociative","maybeAssociative","Collection","Seq","KeyedCollection","KeyedSeq","IndexedCollection","IndexedSeq","SetCollection","SetSeq","Keyed","Indexed","IS_SEQ_SYMBOL","isSeq","maybeSeq","IS_RECORD_SYMBOL","isRecord","maybeRecord","isImmutable","maybeImmutable","IS_ORDERED_SYMBOL","isOrdered","maybeOrdered","ITERATE_KEYS","ITERATE_VALUES","ITERATE_ENTRIES","REAL_ITERATOR_SYMBOL","FAUX_ITERATOR_SYMBOL","ITERATOR_SYMBOL","Iterator","iteratorValue","iteratorResult","iteratorDone","hasIterator","maybeIterable","getIteratorFn","isIterator","maybeIterator","getIterator","iteratorFn","KEYS","ENTRIES","toSource","isArrayLike","emptySequence","toSeq","seq","maybeIndexedSeqFromValue","fromEntrySeq","isKeysIterable","toSetSeq","ObjectSeq","seqFromValue","__toString","cacheResult","__iterateUncached","entrySeq","__iterator","__iteratorUncached","toKeyedSeq","keyedSeqFromValue","toIndexedSeq","indexedSeqFromValue","of","ArraySeq","_array","notSetValue","_object","_keys","EMPTY_SEQ","CollectionSeq","collection","_collection","IS_MAP_SYMBOL","isMap","maybeMap","isOrderedMap","maybeOrderedMap","isValueObject","maybeValue","hashCode","is","imul","smi","i32","defaultValueOf","hashNullish","hashed","hashNumber","STRING_HASH_CACHE_MIN_STRLEN","stringHashCache","hashString","STRING_HASH_CACHE_SIZE","STRING_HASH_CACHE_MAX_SIZE","usingWeakMap","weakMap","UID_HASH_KEY","canDefineProperty","propertyIsEnumerable","nodeType","uniqueID","documentElement","getIENodeHash","nextHash","isExtensible","hashJSObj","symbolMap","hashSymbol","nullish","_objHashUID","WeakMap","ToKeyedSequence","indexed","useKeys","_iter","_useKeys","valueSeq","this$1$1","reversedSequence","reverseFactory","mapper","mappedSequence","mapFactory","ToIndexedSequence","ToSetSequence","FromEntriesSequence","validateEntry","indexedCollection","flipFactory","flipSequence","makeSequence","flip","cacheResultThrough","filterFactory","filterSequence","sliceFactory","originalSize","resolvedBegin","resolvedEnd","sliceSize","resolvedSize","sliceSeq","skipped","isSkipping","skipWhileFactory","skipSequence","flattenFactory","flatSequence","stopped","flatDeep","currentDepth","sortFactory","comparator","defaultComparator","isKeyedCollection","maxFactory","maxCompare","comp","zipWithFactory","keyIter","zipper","iters","zipAll","zipSequence","sizes","iterators","isDone","steps","reify","collectionClass","arrCopy","newArr","invariant","assertNotInfinite","coerceKeyPath","keyPath","isPlainObject","parentProto","nextProto","isDataStructure","quoteString","_ignoreError","shallowCopy","collectionCopy","updateIn$1","updater","updatedValue","updateInDeeply","inImmutable","wasNotSet","existingValue","newValue","nextExisting","nextUpdated","emptyMap","setIn$1","setIn","removeIn","deleteIn","update$1","updateIn","merge$1","mergeIntoKeyedWith","mergeWith$1","collections","collection$1","__ownerID","withMutations","mergeIntoCollection","oldVal","mergeWithSources","mergeDeep$1","mergeDeepWithSources","mergeDeepWith$1","deepMerger","newDataStructure","oldSeq","newSeq","deepMergerWith","mergeItem","hasVal","nextVal","mergeDeep","mergeDeepWith","mergeIn","mergeDeepIn","mutable","asMutable","wasAltered","__ensureOwner","asImmutable","__altered","keyValues","_root","updateMap","deleteAll","__hash","OrderedMap","sortBy","MapIterator","iterate","ownerID","makeMap","MapPrototype","removeAll","ArrayMapNode","keyHash","didChangeSize","didAlter","removed","MAX_ARRAY_MAP_SIZE","ValueNode","createNodes","isEditable","newEntries","BitmapIndexedNode","bitmap","bit","popCount","keyHashFrag","updateNode","MAX_BITMAP_INDEXED_SIZE","including","expandedNodes","HashArrayMapNode","expandNodes","isLeafNode","newBitmap","newNodes","setAt","canEdit","newLen","newArray","after","spliceOut","spliceIn","newCount","MIN_HASH_ARRAY_MAP_SIZE","excluding","packedII","packedNodes","packNodes","HashCollisionNode","mergeIntoNode","keyMatch","maxIndex","EMPTY_MAP","_type","_reverse","_stack","mapIteratorFrame","mapIteratorValue","subNode","__prev","newSize","idx1","idx2","IS_LIST_SYMBOL","isList","maybeList","List","emptyList","makeList","VNode","setSize","listNodeFor","_origin","setListBounds","newTail","_tail","getTailOffset","_capacity","updateVNode","_level","updateList","oldSize","arguments$1","seqs","iterateList","DONE","ListPrototype","removeBefore","originIndex","newChild","removingFirst","oldChild","editable","editableVNode","removeAfter","sizeIndex","EMPTY_LIST","tailPos","tail","iterateNodeOrLeaf","iterateLeaf","iterateNode","origin","capacity","nodeHas","lowerNode","newLowerNode","rawIndex","owner","oldOrigin","oldCapacity","newOrigin","newCapacity","newLevel","offsetShift","oldTailOffset","newTailOffset","oldTail","beginIndex","EMPTY_ORDERED_MAP","emptyOrderedMap","_map","_list","updateOrderedMap","newMap","newList","makeOrderedMap","omap","toMap","IS_STACK_SYMBOL","isStack","maybeStack","Stack","emptyStack","pushAll","_head","makeStack","EMPTY_STACK","StackPrototype","unshiftAll","IS_SET_SYMBOL","isSet","maybeSet","isOrderedSet","maybeOrderedSet","deepEqual","notAssociative","flipped","allEqual","bSize","mixin","ctor","keyCopier","result$1","emptySet","fromKeys","keySeq","intersect","sets","SetPrototype","union","updateSet","didChanges","mapEntries","mapped","toRemove","OrderedSet","__make","__empty","EMPTY_SET","makeSet","EMPTY_RANGE","Range","_start","_step","searchValue","possibleIndex","offsetValue","getIn$1","searchKeyPath","getIn","hasIn$1","toObject","isIterable","useTuples","toOrderedMap","toOrderedSet","toSet","toStack","toList","__toStringMapper","singleton","concatSeq","concatFactory","returnValue","partition","isKeyedIter","coerce","partitionFactory","find","findEntry","sideEffect","isFirst","reducer","initialReduction","reduceRight","butLast","countBy","countByFactory","entriesSequence","entryMapper","filterNot","findKey","findLast","findLastEntry","findLastKey","flatMapFactory","searchKey","groupBy","groupByFactory","hasIn","isSubset","isSuperset","keyOf","keyMapper","lastKeyOf","maxBy","neg","defaultNegComparator","minBy","rest","skip","amount","skipLast","skipWhile","skipUntil","takeLast","takeWhile","takeSequence","iterating","takeWhileFactory","takeUntil","ordered","keyed","murmurHashOfSize","hashMerge","hashCollection","CollectionPrototype","chain","mapKeys","KeyedCollectionPrototype","findIndex","removeNum","numArgs","spliced","findLastIndex","interpose","interposedSequence","interposeFactory","interleave","zipped","interleaved","zip","defaultZipper","zipWith","IndexedCollectionPrototype","SetCollectionPrototype","reduction","useFirst","emptyOrderedSet","EMPTY_ORDERED_SET","OrderedSetPrototype","makeOrderedSet","PairSorting","LeftThenRight","RightThenLeft","Record","defaultValues","hasInitialized","throwOnInvalidDefaultValues","RecordType","indices","RecordTypePrototype","_indices","_name","_defaultValues","propName","recordName","setProp","_values","RecordPrototype","displayName","recordSeq","newValues","makeRecord","getDescriptiveName","likeRecord","EMPTY_REPEAT","Repeat","_value","fromJS","fromJSWith","defaultConverter","parentValue","converted","Iterable","superCtor","super_","TempCtor","_write","_writableState","_readableState","duplex","ErrorCoded_1","FetchDocumentLoader_1","JsonLdContextNormalized_1","FetchDocumentLoader","documentCache","validateContext","skipValidation","expandContentTypeToBase","remoteContextsDepthLimit","redirectSchemaOrgHttps","validateLanguage","strictRange","errorCode","ErrorCoded","REGEX_LANGUAGE_TAG","validateDirection","ERROR_CODES","INVALID_BASE_DIRECTION","REGEX_DIRECTION_TAG","idifyReverseTerms","isValidKeyword","INVALID_IRI_MAPPING","isPotentialKeyword","expandPrefixedTerms","contextRaw","EXPAND_KEYS_BLACKLIST","isReservedInternalKeyword","keyValue","ALIAS_DOMAIN_BLACKLIST","KEYWORD_REDEFINITION","ALIAS_RANGE_BLACKLIST","getContextValueId","INVALID_KEYWORD_ALIAS","INVALID_TERM_DEFINITION","isPrefixValue","changed","canAddIdEntry","isValidIri","newId","expandedType","normalize","processingMode","normalizeLanguageTags","lowercase","containersToHash","containerValue","applyScopedProtected","expandOptions","isTermProtected","isSimpleTermDefinitionPrefix","validateKeywordRedefinitions","contextBefore","contextAfter","PROTECTED_TERM_REDEFINITION","validate","valueType","INVALID_VOCAB_MAPPING","INVALID_BASE_IRI","INVALID_DEFAULT_LANGUAGE","INVALID_VERSION_VALUE","INVALID_CONTEXT_ENTRY","INVALID_PROPAGATE_VALUE","getPrefix","CYCLIC_IRI_MAPPING","isValidIriWeak","JsonLdContextNormalized","isCompactIri","objectKey","objectValue","INVALID_TYPE_MAPPING","INVALID_REVERSE_PROPERTY","CONTAINERS_1_0","INVALID_CONTAINER_MAPPING","CONTAINERS","INVALID_LANGUAGE_MAPPING","INVALID_PREFIX_VALUE","INVALID_NEST_VALUE","applyBaseEntry","inheritFromParent","parentContext","external","normalizeContextIri","contextIri","parseInnerContexts","ignoreScopedContexts","ignoreProtection","ignoreRemoteScopedContexts","INVALID_SCOPED_CONTEXT","minimalProcessing","internalOptions","DEFAULT_PROCESSING_MODE","remoteContexts","CONTEXT_OVERFLOW","hasProtectedTerms","INVALID_CONTEXT_NULLIFICATION","overriddenLoad","getOverriddenLoad","parsedStringContext","load","contextIris","reducedContexts","accContextPromise","accContext","importContext","INVALID_IMPORT_VALUE","loadImportContext","defaultExpandOptions","newContext","overlappingKeys","newContextWrapped","INVALID_LOCAL_CONTEXT","LOADING_REMOTE_CONTEXT_FAILED","INVALID_REMOTE_CONTEXT","RECURSIVE_CONTEXT_INCLUSION","importContextIri","http_link_header_1","fetcher","accept","colonPos","alternateUrl","linkHeader","LOADING_DOCUMENT_FAILED","expandVocab","validIriMapping","vocab","vocabRelative","potentialKeyword","contextPrefixValue","allowPrefixForcing","allowVocabRelativeToBase","compactIri","shortestPrefixing","allowPrefixNonGenDelims","separatorPos","isPrefixIriEndingWithGenDelim","keyword","KEYWORD_REGEX","prefixIri","ENDS_WITH_GEN_DELIM","IRI_REGEX","IRI_REGEX_WEAK","VALID_KEYWORDS","objKeys1","objKeys2","value1","value2","SeparatorType_1","Transform","objectMode","originalContext","PassThrough","transformQuad","termToValue","opened","pushDocumentStart","lastPredicate","endPredicate","lastSubject","endSubject","lastGraph","endGraph","endDocument","lastGraphMatchesSubject","lastSubjectMatchesGraph","pushId","pushSeparator","SeparatorType","GRAPH_FIELD_NONCOMPACT","GRAPH_FIELD_COMPACT","ARRAY_END_COMMA","pushPredicate","pushObject","excludeContext","OBJECT_START","CONTEXT_FIELD","pushIndented","ARRAY_START","startOnNewLine","pushNestedQuad","subjectValue","property","useRdfType","RDF_TYPE","objectOptions","compactIds","compactedProperty","hadObjectForPredicate","lastLastSubject","lastLastPredicate","nestedQuad","commaAfterSubject","ARRAY_END","OBJECT_END","comma","OBJECT_END_COMMA","pushNewLine","getIndentPrefix","useNativeTypes","compacted","RDF_JSON","parsedJson","INVALID_JSON_LITERAL","rdfDirection","I18N","stringType","stringToNativeType","XSD","parsedInt","parsedFloat","parseFloat","RDF","SWAP","xsd","boolean","rdf","owl","sameAs","forSome","forAll","implies","escapeSequence","escapeReplacements","illegalIriChars","lineModeRegExps","_iri","_unescapedIri","_simpleQuotedString","_langcode","_blank","_newline","_comment","_whitespace","_endOfFile","invalidRegExp","N3Lexer","_simpleApostropheString","_prefix","_prefixed","_variable","_number","_boolean","_keyword","_sparqlKeyword","_shortPredicates","_lineMode","lineMode","_n3Mode","_comments","comments","_literalClosingPos","_tokenizeToEnd","inputFinished","_input","currentLineLength","whiteSpaceMatch","emitToken","firstChar","matchLength","inconclusive","_previousMarker","_unescape","reportSyntaxError","_parseLiteral","previousToken","invalid","replaced","sequence","unicode4","unicode8","escapedChar","opening","openingLength","closingPos","backslashCount","issue","_readStartingBom","tokenize","tokens","_pendingBuffer","setEncoding","DEFAULTGRAPH","_blankNodeCounter","languageOrDataType","atPos","datatypeString","dtPos","termFromId","nested","endPos","termToId","_subject","_predicate","_graph","blankNodePrefix","N3Parser","_contextStack","_setBase","initDataFactory","isTurtle","isTriG","isNTriples","isNQuads","isN3","isLineMode","_supportsNamedGraphs","_readPredicateOrNamedGraph","_readPredicate","_supportsQuads","_supportsRDFStar","_resolveRelativeIRI","_blankNodePrefix","_explicitQuantifiers","explicitQuantifiers","_resetBlankNodePrefix","fragmentPos","_base","_basePath","_baseRoot","_baseScheme","_saveContext","n3Mode","inverse","_inversePredicate","blankPrefix","_prefixes","quantified","_quantified","_restoreContext","_error","_readInTopContext","_callback","_sparqlStyle","_readPrefix","_readBaseIRI","_readSubject","_readNamedGraphLabel","_readEntity","quantifier","_resolveIRI","_namedNode","_blankNode","_readBlankNodeHead","RDF_NIL","_readListItem","_readPunctuation","N3_FORSOME","_quantifier","_readQuantifierList","N3_FORALL","_literalValue","_completeSubjectLiteral","_literal","_getPathReader","ABBREVIATIONS","_readBlankNodeTail","_readObject","_readDataTypeOrLang","_getContextEndReader","_readGraph","_readBlankNodePunctuation","_emit","_readPredicateAfterBlank","previousList","RDF_FIRST","_readListItemDataTypeOrLang","RDF_REST","_completeObjectLiteral","_completeLiteral","listItem","completed","_readCallback","_readFormulaTail","inversePredicate","_quad","_readQuadPunctuation","_readPrefixIRI","prefixNode","_prefixCallback","_readDeclarationPunctuation","_readNamedGraphBlankLabel","QUANTIFIERS_GRAPH","_readQuantifierPunctuation","afterPath","_afterPath","_readPath","_readForwardPath","_readBackwardPath","_readRDFStarTailOrGraph","_readRDFStarTail","contextStack","noop","_removeDotSegments","pathStart","segmentStart","quadCallback","prefixCallback","isNamedNode","isBlankNode","isVariable","isDefaultGraph","inDefaultGraph","defaultPrefixes","processPrefix","N3DataFactory","escapeAll","escapedCharacters","SerializedTerm","N3Writer","outputStream","_prefixRegex","_lists","lists","_outputStream","_endStream","_writeQuad","_writeQuadLine","_prefixIRIs","addPrefixes","_baseMatcher","escapeRegex","_baseLength","_inDefaultGraph","_encodeIriOrBlank","_encodeObject","_encodePredicate","_encodeSubject","_prefixMatch","quadsToString","_encodeQuad","characterReplacer","prefixMatch","_encodeLiteral","_blockedWrite","addQuad","addQuads","addPrefix","hasPrefixes","IRIlist","prefixList","prefixIRI","contents","singleDone","character","N3Store","_size","_graphs","_id","_ids","_entities","_blankNodeIndex","_factory","_termFromId","_termToNumericId","_termToNewNumericId","subjects","graphKey","subjectKey","predicateKey","_addToIndex","index0","key0","key1","key2","index1","index2","existed","_removeFromIndex","_findInIndex","name0","name1","name2","graphId","entityKeys","value0","_loop","_loopByKey0","_loopByKey1","_loopBy2Keys","_countInIndex","_getGraphs","_uniqueEntities","uniqueIds","graphItem","predicates","removeQuad","subjectOrQuad","readQuads","removeQuads","removeMatches","getQuads","content","subjectId","predicateId","objectId","DatasetCoreAndReadableStream","getSubjects","forSubjects","getPredicates","forPredicates","getObjects","forObjects","getGraphs","forGraphs","createBlankNode","suggestedName","extractLists","tails","tailQuad","headPos","malformed","current","objectQuads","subjectQuads","n3Store","filtered","_filtered","newStore","N3StreamParser","onData","onEnd","decodeStrings","N3StreamWriter","writableObjectMode","_writer","Writer","Store","Triple","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","marker","runClearTimeout","Item","nextTick","title","browser","env","argv","versions","cwd","chdir","umask","asap","setImmediate","_state","_deferreds","doResolve","deferred","me","onFulfilled","onRejected","finale","Handler","reason","ex","race","queueMicrotask","BlankNode_1","DefaultGraph_1","Literal_1","NamedNode_1","Quad_1","Variable_1","dataFactoryCounter","languageOrDatatype","INSTANCE","fromTerm","original","fromQuad","resetBlankNodeCounter","RDF_LANGUAGE_STRING","isTermGrounded","termToSignature","quadToSignature","sha1hex","hashTerms","getGraphBlankNodes","uniqGraph","deindexGraph","indexGraph","getQuadsWithoutBlankNodes","getQuadsWithBlankNodes","hasValue","hashValues","getBijectionInner","getBijection","isomorphic","graphA","graphB","nonBlankIndexA","nonBlankIndexB","blankQuadsA","blankQuadsB","blankNodesA","blankNodesB","groundedHashesA","groundedHashesB","hashesA","ungroundedHashesA","hashesB","ungroundedHashesB","hashKeyA","bijection","blankNodeA","blankNodeAString","blankNodeAHash","blankNodeBString","arraysEqual","blankNodeB","array1","array2","hashValue","everyTerms","indexedGraph","stringQuadToQuad","getBlankNodes","groundedHashes","ungroundedHashes","hashNeeded","initialGroundedNodesCount","grounded","uniques","termKey","quadSignatures","quadTerm","getSupportedJavaScriptPrimitives","getSupportedRdfDatatypes","getTermRaw","toRdf","fromRdf","Translator_1","translator","Translator","registerHandler","TypeHandlerString","TYPES","TypeHandlerBoolean","TYPE","TypeHandlerNumberDouble","TypeHandlerNumberInteger","TypeHandlerDate","supportedRdfDatatypes","fromRdfHandlers","toRdfHandlers","incorrectRdfDataType","rdfDatatypes","javaScriptDataTypes","rdfDatatype","javaScriptDataType","existingToRdfHandlers","handlers","VALIDATORS","partsMonthDay","valueString","getUTCDate","getUTCMonth","getUTCFullYear","toISOString","gDay","gMonthDay","gYear","gYearMonth","MAX_INT","MIN_INT","PendingStreamsIndex","indexedStreams","allStreams","ID_VARIABLE","addPatternListener","pendingStream","ID_SEPARATOR","existingListeners","getPendingStreamsForQuad","keysOld","keyModified","pendingStreams","PendingStreamsIndex_1","_pipeSource","unpipe","importToListeners","isInitialized","storeResult","getLiteralValue","getLiteralType","getLiteralLanguage","TermUtil_1","iriValue","escapePattern","replaceEscapedCharacter","literalValue","stringTerms","ignoreTags","lastIndex","stringQuad","escapes","inQuote","escaped","matchPatternComplete","matchPattern","matchTerm","everyTermsNested","reduceTerms","mapTerms","filterQuadTermNamesNested","filterQuadTermNames","filterTerms","forEachTerms","collectNamedTerms","getNamedTerms","TRIPLE_TERM_NAMES","ignoreDefaultGraph","checker","namedTerms","defaultCb","namedTerm","names","keysS","keysP","keysO","keysG","initialValue","_pattern","skipVarMapping","returnMappings","getDefaultGraphs","getLiterals","getNamedNodes","getTermsOfType","TERM_TYPES","SymbolDispose","AbortError","codes","isNodeStream","isWebStream","kControllerErrorFunction","eos","addAbortListener","addAbortSignal","validateAbortSignal","addAbortSignalNoValidate","onAbort","disposable","StringPrototypeSlice","SymbolIterator","TypedArrayPrototypeSet","consume","hasStrings","_getString","_getBuffer","retLen","customInspect","pipeline","Duplex","destroyer","isReadable","isWritable","isTransformStream","isWritableStream","isReadableStream","ERR_INVALID_ARG_VALUE","ERR_MISSING_ARGS","orgStreams","ondrain","onfinish","onreadable","onclose","readableObjectMode","_final","getWriter","toRead","_destroy","aggregateTwoErrors","ERR_MULTIPLE_CALLBACK","kIsDestroyed","isDestroyed","isFinished","isServerRequest","kDestroy","kConstruct","checkError","errored","called","onDestroy","emitErrorCloseNT","emitCloseNT","emitErrorNT","closeEmitted","emitClose","errorEmitted","errorOrDestroy","sync","destroyed","autoDestroy","constructNT","onConstruct","constructed","emitConstructNT","isRequest","setHeader","emitCloseLegacy","emitErrorCloseLegacy","socket","req","undestroy","reading","endEmitted","finalCalled","prefinished","ending","finished","ObjectDefineProperties","ObjectGetOwnPropertyDescriptor","ObjectKeys","ObjectSetPrototypeOf","Writable","allowHalfOpen","webStreamsAdapters","duplexify","lazyWebStreams","writableHighWaterMark","writableBuffer","writableLength","writableFinished","writableCorked","writableEnded","writableNeedDrain","fromWeb","pair","newStreamDuplexFromReadableWritablePair","toWeb","newReadableWritablePairFromDuplex","bufferModule","isReadableNodeStream","isWritableNodeStream","isDuplexNodeStream","ERR_INVALID_RETURN_VALUE","createDeferredPromise","isBlob","FunctionPrototypeCall","Duplexify","_duplexify","onfinished","ac","_promise","_resolve","fromAsyncGen","ERR_STREAM_PREMATURE_CLOSE","kEmptyObject","validateFunction","validateObject","validateBoolean","PromisePrototypeThen","isClosed","isReadableFinished","isReadableErrored","isWritableFinished","isWritableErrored","willEmitClose","_willEmitClose","kIsClosedPromise","nop","_options$readable","_options$writable","isAborted","originalCallback","resolverFn","eosWeb","wState","rState","onlegacyfinish","readableFinished","onend","onclosed","onrequest","cleanup","endCallback","opts","_opts","autoCleanup","SymbolAsyncIterator","ERR_STREAM_NULL_VALUES","isAsync","highWaterMark","hadError","hasThrow","throw","return","ArrayIsArray","EE","Stream","dest","ondata","pause","resume","_isStdio","didOnEnd","validateInteger","kWeakHandler","kResistStopPropagation","staticCompose","deprecate","ArrayPrototypePush","MathFloor","PromiseReject","PromiseResolve","kEmpty","kEof","concurrency","signalOpt","cnt","onCatch","afterItemProcessed","maybeResume","pump","unused","ReduceAwareErrMissingArgs","toIntegerOrInfinity","number","streamReturningOperators","asIndexedPairs","_options$signal","drop","_options$signal5","_options$signal6","_options$signal7","_options$signal8","compose","composedStream","promiseReturningOperators","_options$signal2","hasInitialValue","gotAnyItemFromStream","_options$signal3","_options$signal4","destroyImpl","ERR_STREAM_DESTROYED","writing","makeAsyncIterable","fromReadable","pumpToNode","finish","onresolve","wait","pumpToWeb","pipelineImpl","outerSignal","lastStreamCleanup","finishImpl","destroys","finishCount","_disposable","isLastStream","_ret","_ret2","pt","endFn","popCallback","ArrayPrototypeIndexOf","NumberIsInteger","NumberParseInt","SafeSet","SymbolAsyncDispose","ReadableState","BufferList","getHighWaterMark","getDefaultHighWaterMark","ERR_METHOD_NOT_IMPLEMENTED","ERR_STREAM_PUSH_AFTER_EOF","ERR_STREAM_UNSHIFT_AFTER_END_EVENT","kPaused","StringDecoder","kObjectMode","kConstructed","kSync","kNeedReadable","kEmitClose","kAutoDestroy","kMultiAwaitDrain","makeBitMapDescriptor","isDuplex","pipes","flowing","defaultEncoding","awaitDrainWriters","decoder","needReadable","maybeReadMore","readableAddChunk","addToFront","_isUint8Array","_uint8ArrayToBuffer","emitReadable","emittedReadable","emitReadable_","onEofChunk","addChunk","dataEmitted","howMuchToRead","flow","readingMore","maybeReadMore_","updateReadableListening","readableListening","resumeScheduled","nReadingNextTick","resume_","streamToAsyncIterator","destroyOnReturn","createAsyncIterator","fromList","endReadable","endReadableNT","endWritableNT","multiAwaitDrain","_undestroy","captureRejectionSymbol","readableEnded","isPaused","nOrig","computeNewHighWaterMark","doRead","pipeOpts","stdout","stderr","onunpipe","unpipeInfo","hasUnpiped","cleanedUp","needDrain","pipeOnDrain","dests","ev","paused","streamKeys","readableDidRead","readableAborted","readableHighWaterMark","readableBuffer","readableFlowing","readableLength","readableEncoding","pipesCount","_fromList","readableStream","newStreamReadableFromReadableStream","streamReadable","newReadableStreamFromStreamReadable","_src$readableObjectMo","defaultHighWaterMarkBytes","defaultHighWaterMarkObjectMode","duplexKey","hwm","highWaterMarkFrom","setDefaultHighWaterMark","kCallback","flush","prefinish","SymbolFor","kIsErrored","kIsReadable","kIsWritable","kIsDisturbed","_obj$_readableState","_obj$_writableState","pipeThrough","cancel","isWritableEnded","isOutgoingMessage","_defaultKeepAlive","_removedConnection","_removedContLen","isServerResponse","_sent100","isDisturbed","_stream$kIsDisturbed","isErrored","_stream$kIsErrored","_stream$_readableStat3","_stream$_writableStat3","_stream$_readableStat4","_stream$_writableStat4","readableErrored","writableErrored","isReadableEnded","_stream$_readableStat","_stream$_readableStat2","_stream$_writableStat","_stream$_writableStat2","_stream$req","_consuming","_dumped","upgradeOrConnect","ArrayPrototypeSlice","FunctionPrototypeSymbolHasInstance","ObjectDefineProperty","StringPrototypeToLowerCase","SymbolHasInstance","WritableState","ERR_STREAM_CANNOT_PIPE","ERR_STREAM_ALREADY_FINISHED","ERR_STREAM_WRITE_AFTER_END","ERR_UNKNOWN_ENCODING","kOnFinished","noDecode","corked","bufferProcessing","onwrite","writecb","writelen","afterWriteTickInfo","resetBuffer","pendingcb","buffered","bufferedIndex","allBuffers","allNoop","writev","_writev","clearBuffer","finishMaybe","writeOrBuffer","doWrite","onwriteError","errorBuffer","afterWriteTick","afterWrite","_state$errored","onfinishCallbacks","_state$errored2","bufferedLength","chunks","needFinish","onFinish","callFinal","getBuffer","cork","uncork","setDefaultEncoding","writableAborted","writableStream","newStreamWritableFromWritableStream","streamWritable","newWritableStreamFromStreamWritable","ArrayPrototypeIncludes","ArrayPrototypeJoin","ArrayPrototypeMap","NumberMAX_SAFE_INTEGER","NumberMIN_SAFE_INTEGER","ObjectPrototypeHasOwnProperty","RegExpPrototypeExec","StringPrototypeToUpperCase","StringPrototypeTrim","hideStackFrames","ERR_SOCKET_BAD_PORT","ERR_UNKNOWN_SIGNAL","normalizeEncoding","isAsyncFunction","signals","octalReg","validateInt32","validateUint32","positive","validateString","validateOneOf","oneOf","allowed","getOwnPropertyValueOrDefault","allowArray","allowFunction","validateDictionary","validateArray","minLength","validateBuffer","validatePlainFunction","validateUndefined","linkValueRegExp","validateLinkHeaderFormat","isInt32","isUint32","parseFileMode","def","validateStringArray","validateBooleanArray","validateAbortSignalArray","indexedName","validateEncoding","normalizedEncoding","validatePort","port","allowZero","validateSignalName","validateUnion","validateLinkHeaderValue","hints","hintsLength","CustomStream","originalDestroy","AggregateError","CustomAggregateError","kIsNodeError","kTypes","classRegExp","ERR_INTERNAL_ASSERTION","NodeError","expectedLength","hidden","expected","instances","_actual$constructor","inspected","colors","_value$constructor","innerError","outerError","sep","ArrayPrototypePop","thisArgs","hasInstance","MIN_SAFE_INTEGER","prop","PromisePrototypeCatch","thenFn","catchFn","RegExpPrototypeTest","dispose","asyncDispose","AsyncFunction","rej","promisify","debuglog","_unused","_removeEventListener","AbortSignalAny","custom","customPromisify","ERR_ILLEGAL_CONSTRUCTOR","pl","lastArg","removeDotSegments","segmentBuffers","isCharacterAllowedAfterRelativePathSegment","removeDotSegmentsOfPath","colonPosition","searchOffset","pathSeparator","relativeIRI","baseFragmentPos","baseQueryPos","relativeColonPos","valueColonPos","baseColonPos","baseIRIScheme","baseSlashAfterColonPos","baseIRIPath","baseIRILastSlashPos","copyProps","SafeBuffer","__importDefault","prefixcc_1","property_param_1","base_prefixes_1","node_param_1","getNamespace","knownNamespaces","knownPrefixes","rdfs","errorOnExtraQuads","mintUnspecifiedPrefixes","prefixRev","onotology","writeImports","namespaces","namespace","pref","allNamespaces","writePrefixes","newLine","writeShapes","writeTurtlePredicates","deindent","imports","getObjectsOnce","imp","disableShaclName","allowBlankNodes","getShaclName","getSubjectsOnce","getQuadsOnce","targetClasses","targetClass","singleObject","unusedPredicates","writeGivenTurtlePredicates","writeShapeBody","getSingleProperty","allowedPredicates","examining","singleLayerPropertiesList","expectOneProperty","orProperties","statement","getList","termTemp","writeIriLiteralOrArray","singleQuad","writeAssigment","writeAtom","writeAssigments","assignments","shortcuts","assignment","writeParams","allowedParam","surroundings","or","params","properties","writeProperty","writePath","nodeKind","propertyClass","nodeShapes","nestedShapes","semi","writeTurtleObjects","blankObjects","nonBlankObjects","writeList","elems","braces","alternatives","alt","ShaclcGenerator_1","writer_1","volatile_store_1","volatileStore","extraQuads","mintPrefixes","targetNode","targetObjectsOf","targetSubjectsOf","deactivated","severity","class","minExclusive","minInclusive","maxExclusive","maxInclusive","maxLength","languageIn","disjoint","ignoredProperties","uniqueLang","lessThan","lessThanOrEquals","qualifiedValueShape","qualifiedMinCount","qualifiedMaxCount","qualifiedValueShapesDisjoint","VolitileStore","indents","no","hex_chr","md5cycle","md5blk","md5blks","md5blk_array","md51","rhex","hex","toUtf8","unescape","hexToBinaryString","SparkMD5","reset","clamp","targetArray","sourceArray","appendBinary","_buff","_length","_hash","buff","_finish","getState","setState","hashBinary","returnUInt8Array","utf8Str2ArrayBuffer","md51_array","__setModuleDefault","__importStar","toSparqlJs","sparqlAlgebra_1","factory_1","sparql_1","util_1","createTerm","flattenMulti","createAggregateExpression","createDescribe","createFrom","createGraph","createMinus","createNop","createNps","createOrderBy","createReduced","createService","createZeroOrMorePath","createZeroOrOnePath","createExistenceExpression","createNamedExpression","Wildcard","deleteQuads","insertQuads","createLoad","addSilent","createClear","createCreate","createMove","createCopy","newChildren","rdf_isomorphic_1","eTypes","resetContext","translateOperation","removeQuadsRecursive","translateExpression","translateProject","translatePattern","translateBgp","translateConstruct","translateDistinct","translateExtend","translateFrom","translateFilter","translateGraph","aggs","translateBoundAggregate","translateGroup","translateJoin","leftjoin","translateLeftJoin","translateMinus","translateOrderBy","translatePathComponent","translatePath","reduced","translateReduced","translateService","translateSlice","arrayToPattern","translateUnion","translateValues","translateCompositeUpdate","use","convertUpdatePatterns","using","translateDeleteInsert","translateLoad","translateClearCreateDrop","translateClear","translateCreate","translateDrop","translateUpdateGraphShortcut","translateAdd","translateMove","translateCopy","aggregation","translateAggregateExpression","translateExistenceExpression","function","translateNamedExpression","translateOperatorExpression","translateTermExpression","translateWildcardExpression","pathType","translateAlt","inv","translateInv","translateLink","translateNps","translateOneOrMorePath","translateSeq","translateZeroOrMorePath","translateZeroOrOnePath","translateTerm","replaceAggregatorVariables","st","isSimpleTerm","select","descending","objectContainsValues","having","vals","keyGraphs","globalNames","newGraphs","graphNameSet","graphPatterns","graphName","splitBgpToGraphs","Generator","varCount","useQuads","translateQuery","sparql","thingy","findAllVariables","translateGraphPattern","mapAggregate","generateFreshVar","translateInlineData","PV","translateQuad","translateAggregates","translateSingleUpdate","isTerm","inScope","simplifyPath","translatePathPredicate","recurseGraph","filters","nonfilters","accumulateGroupGraphPattern","isQuad","hasQuadVariables","normals","inverted","normalElement","invertedElement","simplifiedPath","_resetBlanks","typeVals","G","simplifiedJoin","subthingy","translateUpdateGraphLoad","translateUpdateGraph","deleteTriples","insertTriples","translateUpdateTriplesBlock","translateInsertDelete","currentGraph","currentTriples","algebra_1","objectify","algebra","addVariable","v2","recurseTerm","callbacks","doRecursion","recurseOp","copyMetadata","recurseResult","toCopyMetadata","mapOp","mapExpression","cloneOperation","cloneExpression","labelLoop","_prefixByIri","prefixIris","isString","iriList","_usedPrefixes","_sparqlStar","_indent","newline","_explicitDatatype","explicitDatatype","toQuery","mapJoin","toEntity","toExpression","variableToString","toUpdate","baseAndPrefixes","allPrefixes","toPattern","encodeTriples","equalTerms","inline","valuesList","lparen","rparen","service","escapeReplacer","lexical","encodeIRI","term1","term2","currentOptions","createGenerator","SparqlParser","$V0","$V1","$V2","$V3","$V4","$V5","$V6","$V7","$V8","$V9","$Va","$Vb","$Vc","$Vd","$Ve","$Vf","$Vg","$Vh","$Vi","$Vj","$Vk","$Vl","$Vm","$Vn","$Vo","$Vp","$Vq","$Vr","$Vs","$Vt","$Vu","$Vv","$Vw","$Vx","$Vy","$Vz","$VA","$VB","$VC","$VD","$VE","$VF","$VG","$VH","$VI","$VJ","$VK","$VL","$VM","$VN","$VO","$VP","$VQ","$VR","$VS","$VT","$VU","$VV","$VW","$VX","$VY","$VZ","$V_","$V$","$V01","$V11","$V21","$V31","$V41","$V51","$V61","$V71","$V81","$V91","$Va1","$Vb1","$Vc1","$Vd1","$Ve1","$Vf1","$Vg1","$Vh1","$Vi1","$Vj1","$Vk1","$Vl1","$Vm1","$Vn1","$Vo1","$Vp1","$Vq1","$Vr1","$Vs1","$Vt1","$Vu1","$Vv1","$Vw1","$Vx1","$Vy1","$Vz1","$VA1","$VB1","$VC1","$VD1","$VE1","$VF1","$VG1","$VH1","$VI1","$VJ1","$VK1","$VL1","$VM1","$VN1","$VO1","$VP1","$VQ1","$VR1","$VS1","$VT1","$VU1","$VV1","$VW1","$VX1","$VY1","$VZ1","$V_1","$V$1","$V02","$V12","$V22","$V32","$V42","$V52","$V62","$V72","$V82","$V92","$Va2","$Vb2","$Vc2","$Vd2","$Ve2","$Vf2","$Vg2","$Vh2","$Vi2","$Vj2","$Vk2","$Vl2","$Vm2","$Vn2","$Vo2","$Vp2","$Vq2","$Vr2","$Vs2","$Vt2","$Vu2","$Vv2","$Vw2","$Vx2","$Vy2","$Vz2","$VA2","yy","symbols_","terminals_","productions_","performAction","yytext","yyleng","yylineno","yystate","$$","_$","propertyList","$0","pathOnly","insertBnodesAll","insertBnodes","$","resolveIRI","groupDatasets","getAggregatesOfExpression","selectVar","groupVar","getExpressionId","usedVars","getVariablesFromExpression","usedVar","subqueries","selectedVarIds","subqueryIds","selectedVarId","appendAllTo","duplicates","sortedArray","getDuplicatesInArray","toInt","toVar","valuesObject","appendTo","ensureNoVariables","ensureNoBnodes","unionAll","boundVars","getBoundVarsFromGroupGraphPattern","boundVar","ensureSparqlStar","degroupSingle","applyAnnotations","objectListToTriples","annotation","listItems","listTriples","createList","createOperationTree","negatedLiteral","createTypedLiteral","unescapeString","namePos","expansion","uriString","nestedTriple","defaultActions","recoverable","vstack","lstack","recovering","sharedState","setInput","yylloc","yyloc","ranges","symbol","preErrorSymbol","newState","yyval","lex","errStr","showPosition","first_line","last_line","first_column","last_column","basePath","baseRoot","operatorName","initialExpression","operationList","fromClauses","groupName","fromClause","defaults","annotations","blankId","partialSurrogatesWithoutEndpoint","trimLength","objectList","otherTriples","visitExpression","_applyAnnotations","newTriples","_more","_backtrack","matched","conditionStack","unput","oldLines","backtrack_lexer","less","pastInput","past","upcomingInput","pre","test_match","indexed_rule","backup","tempMatch","rules","_currentRules","flex","popState","conditions","topState","pushState","stateStackSize","yy_","$avoiding_name_collisions","YY_START","skipUngroupedVariableCheck","prefixesCopy","JsonParser","suppressMissingStreamResultsError","parseJsonResults","sparqlResponse","rawBindings","parseJsonBindings","jsonParser","variablesFound","resultsFound","parseJsonValue","tripleValue","parseJsonBoolean","rdf_literal_1","delimiter","addValueToTree","lastKeyPath","singularize","nextNode","mergeTrees","tree1","tree2","tree1Element","mergedElement","materializeTree","materialized","sparqlJsonResultsToTree","bindingsArray","singularRoot","subTree","saxes_1","currentBindingAnnotation","currentBindings","currentBindingName","currentBindingType","currentText","currentQuotedTriples","stackEquals","stackBeginsWith","components","currentComponent","currentQuotedTriple","nb","nenc","retried","_normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckExtraBytes","total","utf8CheckIncomplete","_nil","_parse","_stringify","_v","_v2","_v3","_v4","_validate","_version","getOutputLength","inputLength8","safeAdd","lsw","md5cmn","md5ff","md5gg","md5hh","md5ii","length32","hexTab","md5ToHexEncodedArray","olda","oldb","oldc","oldd","wordsToMd5","length8","bytesToWords","randomUUID","rnds8","ROTL","H","N","M","unsafeStringify","byteToHex","_rng","_nodeId","_clockseq","_lastMSecs","_lastNSecs","clockseq","seedBytes","rng","msecs","nsecs","dt","tl","tmh","_md","DNS","hashfunc","generateUUID","_namespace","stringToBytes","_native","rnds","_sha","_regex","CHAR","S","NAME_START_CHAR","NAME_CHAR","CHAR_RE","S_RE","NAME_START_CHAR_RE","NAME_CHAR_RE","NMTOKEN_RE","RESTRICTED_CHAR","RESTRICTED_CHAR_RE","isRestrictedChar","isCharAndNotRestricted","NC_NAME_START_CHAR","NC_NAME_CHAR","NC_NAME_START_CHAR_RE","NC_NAME_CHAR_RE","isSourceExpression","isPromise","isEventEmitter","isFunction","fromIterable","fromIterator","fromArray","WrappingIterator","ClonedIterator","MappingIterator","DESTINATION","identity","IntegerIterator","DESTROYED","ENDED","CLOSED","CLOSING","OPEN","INIT","setTaskScheduler","getTaskScheduler","LinkedList","events_1","linkedlist_1","taskScheduler","createTaskScheduler","task","scheduler","initialState","_readable","waitForDataListener","_changeState","eventAsync","_endAsync","details","_toStringDetails","resolveItems","pushItem","_properties","propertyCallbacks","_propertyCallbacks","getProperties","setProperties","copyProperties","propertyNames","uniq","by","surround","currentResolve","currentReject","pendingError","tryResolve","tryReject","removeListeners","addSingleListener","emitData","_item","preserve","_sourceStarted","_truncateThreshold","_buffer","_next","ascending","_last","ensureSourceAvailable","_destroySource","destroySource","destinationClose","destinationEmitError","destinationSetReadable","allowDestination","_maxBufferSize","_pushedCount","doneCalled","_begin","neededItems","_completeClose","_boundPush","_createSource","_loadSourceAsync","_optional","_validateSource","destinationCloseWhenDone","destinationFillBuffer","_readAndTransform","_optionalTransform","pushedCount","_closeWhenDone","_offset","_limit","_filter","_prepender","_appender","_readAndTransformSimple","nextAsync","mappedItem","_insert","inserter","_transformerQueue","transformerQueue","_sources","_currentSource","_pending","loading","_loadSources","_addSource","_destroySources","destroySources","destinationRemoveEmptySources","_removeEmptySources","_readPosition","history","HistoryReader","endsAt","register","readAt","_getSourceProperty","hasProperty","unregister","_history","_trackers","setReadable","tracker","emitError","resolved","scheduleMicrotask","scheduleMacrotask","queued","perf","PROCESS","emitWarning","AC","AS","_onabort","warnACPolyfill","printACPolyfillWarning","LRU_CACHE_IGNORE_AC_WARNING","isPosInt","getUintArray","Uint16Array","ZeroArray","heap","static","HeapCls","ttl","ttlResolution","ttlAutopurge","updateAgeOnGet","updateAgeOnHas","allowStale","noDisposeOnSet","noUpdateTTL","maxEntrySize","sizeCalculation","noDeleteOnFetchRejection","noDeleteOnStaleGet","allowStaleOnFetchAbort","allowStaleOnFetchRejection","ignoreFetchAbort","unsafeExposeInternals","starts","ttls","keyMap","keyList","valList","free","isBackgroundFetch","backgroundFetch","moveToTail","indexes","rindexes","isStale","maxSize","calculatedSize","fetchMethod","disposeAfter","UintArray","shouldWarn","getRemainingTTL","unref","cachedNow","getNow","age","remainingTTL","entrySize","totalCalculatedSize","_i","_s","_st","_k","rentries","rkeys","rvalues","getOptions","__staleWhileFetching","thisp","rforEach","purgeStale","deleted","dump","setOptions","maxEntrySizeExceeded","__abortController","hasOptions","peekOptions","fetchOpts","updateCache","ignoreAbort","fetchAborted","fetchError","fetchAbortIgnored","fetchResolved","fetchFail","bf","fetchUpdated","allowStaleAborted","noDelete","returnedStale","__returned","fetchDispatched","fmp","fetchRejected","fetchOptions","forceRefresh","stale","staleVal","fetching","pi","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__webpack_exports__"],"sourceRoot":""}